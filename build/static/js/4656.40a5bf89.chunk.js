"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[4656],{67046:(e,s,l)=>{l.d(s,{CK:()=>x,HT:()=>u,Op:()=>d,V3:()=>c,WG:()=>o,cS:()=>a,fW:()=>h,j3:()=>n,oe:()=>r});var i=l(31342);const t="https://dev.memate.com.au/api/v1",n=async()=>{const e=new Headers,s=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${s}`);const l={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${t}/sales/`,l);return await e.text()}catch(i){throw console.error("Profile fetch error:",i),i}},a=async(e,s)=>{const l=new Headers,i=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${i}`),l.append("Content-Type","application/json");const n={method:"PUT",headers:l,body:JSON.stringify({sales_note:s}),redirect:"follow"};try{const s=await fetch(`${t}/sales/${e}/notes/`,n);if(!s.ok){const e=await s.text();throw new Error(`Sales notes update failed with status ${s.status}: ${e}`)}const l=await s.text();return l.trim()?JSON.parse(l):null}catch(a){throw console.error("Sales notes update error:",a),a}},o=async e=>{const s={method:"PUT",body:{ids:e}},l=new URL(`${t}/sales/status/won/`);return(0,i.f)(l.toString(),s)},d=async e=>{const s={method:"PUT",body:{ids:e}},l=new URL(`${t}/sales/status/lost/`);return(0,i.f)(l.toString(),s)},r=async(e,s)=>{const l=new Headers,i=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${i}`),l.append("Content-Type","application/json");const n={method:"POST",headers:l,body:JSON.stringify(s),redirect:"follow"};try{const s=await fetch(`${t}/sales/${e}/contacts/`,n);return s.ok?s:(console.log("Error:",s.status),null)}catch(a){return console.log("Error:",a),null}},c=async(e,s)=>{const l=new Headers,i=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${i}`),l.append("Content-Type","application/json");const n={method:"PUT",headers:l,body:JSON.stringify({lead:s,unique_id:e}),redirect:"follow"};try{const s=await fetch(`${t}/sales/${e}/lead/`,n);if(!s.ok){const e=await s.text();throw new Error(`Sales lead update failed with status ${s.status}: ${e}`)}const l=await s.text();return l.trim()?JSON.parse(l):null}catch(a){throw console.error("Sales lead update error:",a),a}},h=async e=>{const s=new Headers,l=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${l}`),s.append("Content-Type","application/json");const i={method:"PUT",headers:s,body:JSON.stringify({ids:e}),redirect:"follow"};try{const e=await Promise.all([fetch(`${t}/sales/status/won/`,i)]);return await Promise.all(e.map((e=>e.json())))}catch(n){throw n}},x=async e=>{const s=new Headers,l=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${l}`),s.append("Content-Type","application/json");const i={method:"GET",headers:s,redirect:"follow"},n=await fetch(`${t}/sales/${e}/duplicate/`,i);return(await n.json())[0]},u=async e=>{const s=new Headers,l=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${l}`),s.append("Content-Type","application/json");const i={method:"PUT",headers:s,body:JSON.stringify({ids:e}),redirect:"follow"};try{const e=await Promise.all([fetch(`${t}/sales/status/lost/`,i)]);return await Promise.all(e.map((e=>e.json())))}catch(n){throw n}}},92445:(e,s,l)=>{l.r(s),l.d(s,{default:()=>$e});var i=l(65043),t=l(84052),n=(l(26016),l(75329)),a=l(38294),o=l(72018),d=l(93747),r=l(73216),c=l(35475),h=l(20288),x=l(2028);const u={gobackBtn:"client-order-history_gobackBtn__hjQYj",filterBox:"client-order-history_filterBox__5GK2j",active:"client-order-history_active__eNK2b",selectedCount:"client-order-history_selectedCount__Zqu8f",clientName:"client-order-history_clientName__wdACW",lost:"client-order-history_lost__IVJOh",complete:"client-order-history_complete__Jbs33",declined:"client-order-history_declined__FzHHB",inprogress:"client-order-history_inprogress__mjVTk",defaultStatus:"client-order-history_defaultStatus__6l+xZ",lostProfit:"client-order-history_lostProfit__CwGac",inprogressProfit:"client-order-history_inprogressProfit__ZoNLr",completeProfit:"client-order-history_completeProfit__ZF3X+",declinedProfit:"client-order-history_declinedProfit__34CM+",department:"client-order-history_department__Ipt3B",subdepartment:"client-order-history_subdepartment__uVr3f",orderHeading:"client-order-history_orderHeading__G9AFg",historyTitle:"client-order-history_historyTitle__7zmr+",historyText:"client-order-history_historyText__ShzSh",historyDescription:"client-order-history_historyDescription__EQ36H"};var m=l(58387),p=l(76104),v=l(64824),j=l(9642),A=l(41451),g=l(99367),y=(l(93066),l(99868)),f=l(52572),N=l(72413),b=l(22636),w=l(90991),C=l(71807),_=l(22927),F=l(99832),k=l(27066),S=l(38300),$=l(31683),B=l(77918),P=l(88578),L=l(21777),D=l(56328),E=l(67046),R=l(93740),z=l(85632),I=l(59638),T=l(70579);const M=(0,i.forwardRef)(((e,s)=>{let{selected:l,setSelected:t,clientOrders:n,isPending:a}=e;const o=(0,r.Zp)(),[d,h]=(0,i.useState)(null),[x,M]=(0,i.useState)(null);return(0,T.jsxs)(v.b,{ref:s,value:n,scrollable:!0,selectionMode:"checkbox",removableSort:!0,columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:"calc(100vh - 182px)",className:"border",selection:l,onSelectionChange:e=>t(e.value),loading:a,emptyMessage:y.A,children:[(0,T.jsx)(j.V,{selectionMode:"multiple",headerClassName:"ps-4",bodyClassName:"show-on-hover ps-4",headerStyle:{width:"3rem",textAlign:"center"},frozen:!0}),(0,T.jsx)(j.V,{field:"number",header:"Project ID",frozen:!0,sortable:!0,style:{minWidth:"100px"},headerClassName:"shadowRight",bodyClassName:"shadowRight"}),(0,T.jsx)(j.V,{field:"reference",header:"Reference",style:{minWidth:"154px"}}),(0,T.jsx)(j.V,{field:"status",header:"Status",body:e=>{const s=e.status;switch(s){case"Lost":return(0,T.jsx)(p.v,{className:`status ${u.lost}`,value:s});case"Completed":return(0,T.jsx)(p.v,{className:`status ${u.complete}`,value:s});case"In progress":return(0,T.jsx)(p.v,{className:`status ${u.inprogress}`,value:s});case"Declined":return(0,T.jsx)(p.v,{className:`status ${u.declined}`,value:s});default:return(0,T.jsx)(p.v,{className:`status ${u.defaultStatus}`,value:s})}},sortable:!0,style:{minWidth:"113px"}}),(0,T.jsx)(j.V,{header:"Invoice",body:e=>(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-4",children:[(0,T.jsx)(c.N_,{to:e.invoice_url,children:(0,T.jsx)(f.A,{color:"#FF0000",size:16})}),(0,T.jsx)(c.N_,{to:e.unique_url,children:(0,T.jsx)(N.A,{color:"#3366CC",size:16})})]}),style:{minWidth:"114px"}}),(0,T.jsx)(j.V,{header:"Quote",body:e=>(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-4",children:[(0,T.jsx)(c.N_,{to:"#",children:(0,T.jsx)("div",{children:(0,T.jsx)(b.A,{color:"#FDB022",size:16})})}),(0,T.jsx)(c.N_,{to:e.quote_url,children:(0,T.jsx)(f.A,{color:"#FF0000",size:16})}),(0,T.jsx)(c.N_,{to:e.unique_url,children:(0,T.jsx)(N.A,{color:"#3366CC",size:16})})]}),style:{minWidth:"160px"}}),(0,T.jsx)(j.V,{header:"History",body:e=>{var s;const l=(0,i.useRef)(null),[t,n]=(0,i.useState)(!1),a=(0,A.k)(t,n),o=e=>{const s=1e3*+e.created,l=new Date(s),i=l.toLocaleString("en-US",{weekday:"short"}).substring(0,3);return`${l.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")} | ${i} | ${l.toLocaleDateString("en-GB").replaceAll("/",".")} by ${(null===e||void 0===e?void 0:e.manager)||"-"}`};function d(e){switch(e){case"billing":return(0,T.jsx)(w.A,{size:16,color:"#1AB2FF"});case"quote":return(0,T.jsx)(C.A,{size:16,color:"#1AB2FF"});case"invoice":return(0,T.jsx)(_.A,{size:16,color:"#1AB2FF"});case"task":case"order":return(0,T.jsx)(F.A,{size:16,color:"#1AB2FF"});case"note":return(0,T.jsx)(k.A,{size:16,color:"#1AB2FF"});case"tag":return(0,T.jsx)(S.A,{size:16,color:"#1AB2FF"});default:return"-"}}return(0,T.jsxs)(i.Fragment,{children:[(0,T.jsx)(_.A,{color:"#667085",size:16,className:"cursor-pointer",ref:l,...a}),(0,T.jsx)("div",{className:"fixedMenu",style:{position:"fixed",top:"50%",left:"40%"},children:(0,T.jsxs)(g.k,{state:t?"open":"closed",anchorRef:l,onClose:()=>n(!1),menuStyle:{padding:"24px 24px 20px 24px",width:"405px",textAlign:"left"},children:[(0,T.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,T.jsx)("div",{className:"BoxNo",children:(0,T.jsx)("div",{children:(0,T.jsx)($.A,{color:"#FFFFFF",size:24})})}),(0,T.jsx)(z.A,{onClick:()=>n(!1)})]}),(0,T.jsx)("h1",{className:(0,m.A)(u.orderHeading,"mb-3"),children:"Order card history "}),(0,T.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:null===e||void 0===e||null===(s=e.history)||void 0===s?void 0:s.map((e=>(0,T.jsxs)("div",{className:"d-flex flex-column mb-4 text-start",children:[(0,T.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[d(e.type),(0,T.jsx)("p",{className:(0,m.A)(u.historyTitle,"mb-0"),children:(null===e||void 0===e?void 0:e.title)||"-"})]}),(null===e||void 0===e?void 0:e.text)&&(0,T.jsx)("p",{className:(0,m.A)(u.historyText,"mb-1"),dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.text}}),(0,T.jsx)("p",{className:(0,m.A)(u.historyDescription,"mb-0"),children:o(e)})]})))})]})},e.id)]})},bodyClassName:"text-center",style:{minWidth:"70px"}}),(0,T.jsx)(j.V,{header:"Info",body:e=>{var s;const l=(0,i.useRef)(null),[t,n]=(0,i.useState)(!1),a=(0,A.k)(t,n);return(0,T.jsxs)(i.Fragment,{children:[(0,T.jsx)(B.A,{color:"#667085",size:16,className:"cursor-pointer",ref:l,...a}),(0,T.jsx)("div",{className:"fixedMenu",style:{position:"fixed",top:"40%",left:"40%"},children:(0,T.jsxs)(g.k,{state:t?"open":"closed",anchorRef:l,onClose:()=>n(!1),menuStyle:{padding:"24px 24px 20px 24px",width:"365px",marginTop:"45px"},children:[(0,T.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,T.jsx)("div",{className:"BoxNo",children:(0,T.jsx)("div",{children:(0,T.jsx)($.A,{color:"#FFFFFF",size:24})})}),(0,T.jsx)(z.A,{onClick:()=>n(!1)})]}),(0,T.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:null===e||void 0===e||null===(s=e.indexes)||void 0===s?void 0:s.map((e=>(0,T.jsxs)("div",{className:(0,m.A)("mb-3 text-start"),children:[(0,T.jsx)("h1",{className:u.department,children:e[1]}),(0,T.jsx)("h5",{className:u.subdepartment,children:e[2]})]},e[0])))})]})})]})},bodyClassName:"text-center",style:{minWidth:"68px"}}),(0,T.jsx)(j.V,{field:"total",header:"Total",body:e=>`$${e.total}`,bodyClassName:"text-end",style:{minWidth:"110px"}}),(0,T.jsx)(j.V,{field:"profit",header:"Operational Profit",body:e=>{switch(e.status){case"Lost":return(0,T.jsx)(p.v,{className:`profit ${u.lostProfit} rounded`,value:`$ ${e.profit}`});case"Completed":return(0,T.jsx)(p.v,{className:`profit ${u.completeProfit} rounded`,value:`$ ${e.profit}`});case"In progress":return(0,T.jsx)(p.v,{className:`profit ${u.inprogressProfit}`,value:`$ ${e.profit}`});case"Declined":return(0,T.jsx)(p.v,{className:`profit ${u.declinedProfit} rounded`,value:`$ ${e.profit}`});default:return(0,T.jsx)(p.v,{className:`profit ${u.defaultProfit} rounded`,value:`$ ${e.profit}`})}},bodyClassName:"text-end",style:{minWidth:"144px"},sortable:!0}),(0,T.jsx)(j.V,{header:"Duplicate",body:e=>(0,T.jsx)(T.Fragment,{children:(null===e||void 0===e?void 0:e.unique_id)===d?(0,T.jsx)(R.p,{style:{width:"18px",height:"18px",position:"relative",top:"2px"}}):(0,T.jsx)(P.A,{color:"#667085",size:16,className:"cursor-pointer",onClick:()=>(async e=>{try{if(!e)return D.oR.error("Project id not found");h(e),await(0,E.CK)(e),o("/sales"),D.oR.success("Sale has been successfully duplicated")}catch(s){console.error("Error is duplicating:",s),D.oR.error("Failed to duplicate sale. Please try again.")}finally{h(null)}})(null===e||void 0===e?void 0:e.unique_id)})}),bodyClassName:"text-center",style:{minWidth:"82px"}}),(0,T.jsx)(j.V,{header:"Bring Back",body:e=>(0,T.jsx)(T.Fragment,{children:(null===e||void 0===e?void 0:e.unique_id)===x?(0,T.jsx)(R.p,{style:{width:"18px",height:"18px",position:"relative",top:"2px"}}):(0,T.jsx)(L.A,{color:"#667085",size:16,className:"cursor-pointer",onClick:()=>(async(e,s)=>{try{if(!e)return D.oR.error("Project id not found");M(e),await(0,I.kB)(e)?"Lost"===s||"In progress"===s?o("/sales"):"Completed"===s||"Declined"===s?o("/management"):window.location.reload():D.oR.error("Failed to update sendBack to sales. Please try again.")}catch(l){console.error("Error updating sendBack to sales:",l),D.oR.error("Failed to update sendBack to sales. Please try again.")}finally{M(null)}})(null===e||void 0===e?void 0:e.unique_id,e.status)})}),bodyClassName:"text-center",style:{minWidth:"110px"}})]})}));var O=l(95192),W=l(56741),H=l(24291),q=l(14282),V=l(61072),Z=l(78602);const U="indivisual-client-view_profileBox__WzeFK",G="indivisual-client-view_box__ObzCe",K="indivisual-client-view_boxLabel__w8zNR",J="indivisual-client-view_boxLabel2__5dIgs",X="indivisual-client-view_label__hrhXx",Y="indivisual-client-view_text__d2e62",Q="indivisual-client-view_iconBoxsContainer__XWWcT",ee="indivisual-client-view_iconBox__PFmlv";var se=l(74196),le=l(17344),ie=l(43162);const te=(0,i.forwardRef)(((e,s)=>{var l,t,n,a,o,d,c,h,x,u,m,p,v,j,A,g,y,f,N;let{client:b,refetch:w,setIsPending:C,handleExternalSubmit:_,setIsEdit:F}=e;const k=(0,r.Zp)(),[S,$]=(0,i.useState)((null===b||void 0===b?void 0:b.photo)||null),[B,P]=(0,i.useState)({firstname:(null===b||void 0===b||null===(l=b.name)||void 0===l||null===(t=l.split(" "))||void 0===t?void 0:t[0])||"",lastname:(null===b||void 0===b||null===(n=b.name)||void 0===n||null===(a=n.split(" "))||void 0===a?void 0:a[1])||"",email:null===b||void 0===b?void 0:b.email,phone:null===b||void 0===b?void 0:b.phone,category:(null===b||void 0===b||null===(o=b.category)||void 0===o?void 0:o.id)||1,payment_terms:null===b||void 0===b?void 0:b.payment_terms,description:null===b||void 0===b?void 0:b.description,address:{id:(null===(d=b.addresses)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.id)||"",title:(null===(h=b.addresses)||void 0===h||null===(x=h[0])||void 0===x?void 0:x.title)||"",country:(null===(u=b.addresses)||void 0===u||null===(m=u[0])||void 0===m?void 0:m.country_id)||"",state:(null===(p=b.addresses)||void 0===p||null===(v=p[0])||void 0===v?void 0:v.state_id)||"",city:(null===(j=b.addresses)||void 0===j||null===(A=j[0])||void 0===A?void 0:A.city)||"",address:(null===(g=b.addresses)||void 0===g||null===(y=g[0])||void 0===y?void 0:y.address)||"",postcode:(null===(f=b.addresses)||void 0===f||null===(N=f[0])||void 0===N?void 0:N.postcode)||""}});return(0,T.jsx)(le.A,{photo:S,setPhoto:$,ref:s,onSubmit:async e=>{b.id?(async e=>{console.log("indivisualFormSubmit: ",e);const s=(0,ie.$)(e,S);C(!0),await(0,ie.g)(`https://dev.memate.com.au/api/v1/clients/update/individual/${b.id}/`,"PUT",s,(e=>{F(!1),console.log("response: ",e),D.oR.success("Client updated successfully"),k("/clients")}),(()=>{D.oR.error("Failed to update client. Please try again.")})),C(!1)})(e):D.oR.error("Client id not found")},defaultValues:B})}));var ne=l(94819),ae=l(30970),oe=l(47097);const de=e=>{let{id:s}=e;const l=(0,r.Zp)(),i=(0,oe.n)({mutationFn:e=>(0,I.zZ)(s),onSuccess:()=>{l("/clients"),D.oR.success("Client deleted successfully")},onError:e=>{D.oR.error("Failed to delete client. Please try again.")}}),t=()=>{i.mutate()},n=()=>{};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(ae.r,{}),(0,T.jsx)(q.A,{type:"button",onClick:e=>{if(!s)return D.oR.error("Id not found");console.log("id: ",s),(0,ae.P)({target:e.currentTarget,message:"Do you want to delete this record?",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:t,reject:n})},className:"outline-button",children:i.isPending?(0,T.jsx)(R.p,{style:{width:"20px",height:"20px"}}):(0,T.jsx)(ne.A,{color:"#344054",size:20})})]})};var re=l(24572);const ce=e=>{let{id:s,refetch:l}=e;const t=(0,r.Zp)(),[n,a]=(0,i.useState)(!1);return(0,T.jsxs)(q.A,{type:"button",disabled:n,onClick:e=>{e.stopPropagation(),(async e=>{e||D.oR.error("Id not found");try{a(!0);const s=await(0,I.oO)(e);if(null===s||void 0===s||!s.detail)throw new Error("Failed to restore client.");t("/clients"),D.oR.success("Client restored successfully")}catch(s){console.log("err: ",s),D.oR.error("Failed to restore client. Please try again.")}finally{a(!1)}})(s)},className:"outline-button",children:["Restore Client ",n&&(0,T.jsx)(R.p,{style:{width:"20px",height:"20px"}})]})},he=e=>{var s,l,i,t,n;let{client:a}=e;const o=[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}];let d=null===o||void 0===o?void 0:o.find((e=>(null===e||void 0===e?void 0:e.value)===(null===a||void 0===a?void 0:a.payment_terms)));return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:(0,m.A)(G),children:(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Email"}),(0,T.jsx)(c.N_,{to:"#",onClick:e=>{e.preventDefault(),window.location.href=`mailto:${null===a||void 0===a?void 0:a.email}`},children:(0,T.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,T.jsxs)("div",{className:"ellipsis-width",title:null===a||void 0===a?void 0:a.email,children:[(null===a||void 0===a?void 0:a.email)||"-","\xa0"]}),(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,T.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Phone"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:(null===a||void 0===a?void 0:a.phone)||"-"})]})]})}),(0,T.jsx)("h5",{className:(0,m.A)(K),children:"Payment Terms"}),(0,T.jsx)("div",{className:(0,m.A)(G),children:(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Payment Terms"}),(0,T.jsx)("h4",{className:(0,m.A)(Y,"mb-0"),children:(null===d||void 0===d?void 0:d.label)||"-"})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Customers Discount Category"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:(null===a||void 0===a||null===(s=a.category)||void 0===s?void 0:s.name)||"-"})]})]})}),(0,T.jsx)("h5",{className:(0,m.A)(K),children:"Contact Person"}),null===a||void 0===a||null===(l=a.contact_persons)||void 0===l?void 0:l.map((e=>{var s;return(0,T.jsxs)("div",{className:(0,m.A)(G),children:[(0,T.jsx)("div",{className:(0,m.A)(Q),children:(0,T.jsx)("div",{className:(0,m.A)(ee),children:(0,T.jsx)(H.A,{color:e.is_main||1===(null===a||void 0===a||null===(s=a.contact_persons)||void 0===s?void 0:s.length)?"#FFCB45":"#D0D5DD",size:16})})}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Full Name"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:`${e.firstname} ${e.lastname}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Email"}),(0,T.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`mailto:${null===e||void 0===e?void 0:e.email}`},children:(0,T.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,T.jsxs)("div",{className:"ellipsis-width",title:null===e||void 0===e?void 0:e.email,children:[(null===e||void 0===e?void 0:e.email)||"-","\xa0"]}),(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,T.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Position"}),(0,T.jsx)("h4",{className:(0,m.A)(Y,"mb-0"),children:(null===e||void 0===e?void 0:e.position)||"-"})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Phone"}),(0,T.jsxs)("h4",{className:(0,m.A)(Y,"mb-0"),children:[(null===e||void 0===e?void 0:e.phone)||"-","\xa0\xa0",(0,T.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`tel:${null===e||void 0===e?void 0:e.phone}`},style:{position:"relative",top:"-2px"},children:(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,T.jsx)("path",{d:"M4.15387 1.32849C3.90343 1.00649 3.42745 0.976861 3.139 1.26531L2.10508 2.29923C1.6216 2.78271 1.44387 3.46766 1.6551 4.06847C2.50338 6.48124 3.89215 8.74671 5.82272 10.6773C7.75329 12.6078 10.0188 13.9966 12.4315 14.8449C13.0323 15.0561 13.7173 14.8784 14.2008 14.3949L15.2347 13.361C15.5231 13.0726 15.4935 12.5966 15.1715 12.3461L12.8653 10.5524C12.7008 10.4245 12.4866 10.3793 12.2845 10.4298L10.0954 10.9771C9.50082 11.1257 8.87183 10.9515 8.43845 10.5181L5.98187 8.06155C5.54849 7.62817 5.37427 6.99919 5.52292 6.40459L6.07019 4.21553C6.12073 4.01336 6.07552 3.79918 5.94758 3.63468L4.15387 1.32849ZM2.38477 0.511076C3.12689 -0.231039 4.3515 -0.154797 4.99583 0.673634L6.78954 2.97983C7.1187 3.40304 7.23502 3.95409 7.10498 4.47423L6.55772 6.66329C6.49994 6.8944 6.56766 7.13888 6.7361 7.30732L9.19268 9.7639C9.36113 9.93235 9.6056 10.0001 9.83671 9.94229L12.0258 9.39502C12.5459 9.26498 13.097 9.3813 13.5202 9.71047L15.8264 11.5042C16.6548 12.1485 16.731 13.3731 15.9889 14.1152L14.955 15.1492C14.2153 15.8889 13.1089 16.2137 12.0778 15.8512C9.51754 14.9511 7.11438 13.4774 5.06849 11.4315C3.0226 9.38562 1.54895 6.98246 0.648838 4.42225C0.286318 3.39112 0.61113 2.28472 1.35085 1.545L2.38477 0.511076Z",fill:"#106B99"})})})]})]})]})]},e.id)})),0===(null===a||void 0===a||null===(i=a.contact_persons)||void 0===i?void 0:i.length)&&(0,T.jsx)("div",{className:(0,m.A)(G),children:"-"}),(0,T.jsx)("h5",{className:(0,m.A)(K),children:"Locations"}),null===a||void 0===a||null===(t=a.addresses)||void 0===t?void 0:t.map((e=>{var s;return(0,T.jsxs)("div",{className:(0,m.A)(G),children:[(0,T.jsxs)("div",{className:(0,m.A)(Q),children:[(0,T.jsx)("div",{className:(0,m.A)(ee),children:(0,T.jsx)(H.A,{color:e.is_main||1===(null===a||void 0===a||null===(s=a.addresses)||void 0===s?void 0:s.length)?"#FFCB45":"#D0D5DD",size:16})}),(0,T.jsx)("div",{className:(0,m.A)(ee),children:(0,T.jsx)(c.N_,{to:`http://maps.google.com/?q=${e.address}`,target:"_blank",children:(0,T.jsx)("img",{src:se,alt:"map"})})})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Location Name"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:`${e.title||"-"}`})]}),(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Country"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:`${e.country||"-"}`})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"State"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:`${e.state||"-"}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"City"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:`${e.city_name||"-"}`})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Street Address"}),(0,T.jsx)("h4",{className:(0,m.A)(Y,"mb-0"),children:`${e.address||"-"}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Postcode"}),(0,T.jsx)("h4",{className:(0,m.A)(Y,"mb-0"),children:`${e.postcode||"-"}`})]})]})]},e.id)})),0===(null===a||void 0===a||null===(n=a.addresses)||void 0===n?void 0:n.length)&&(0,T.jsx)("div",{className:(0,m.A)(G),children:"-"}),(0,T.jsx)("h5",{className:(0,m.A)(K),children:"Client Description"}),(0,T.jsx)("div",{className:(0,m.A)(G),children:a.description||"-"}),(0,T.jsx)("h5",{className:(0,m.A)(K),children:"Calculations"}),(0,T.jsxs)(V.A,{children:[(0,T.jsx)(Z.A,{sm:6,children:(0,T.jsx)("div",{className:(0,m.A)(G),children:(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Total Turnover:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:(0,re.up)(+a.total_turnover)||"-"})]}),(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Average Weekly Turnover:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:(0,re.up)(+a.average_weekly)||"-"})]}),(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Total orders:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:(0,re.up)(+a.total_orders)||"-"})]})]})})}),(0,T.jsx)(Z.A,{sm:6,children:(0,T.jsx)("div",{className:(0,m.A)(G),children:(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Total requests:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:+a.total_requests||"-"})]}),(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Order Frequency:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:((e,s)=>{const l=12*((new Date).getFullYear()-new Date(1e3*+s).getFullYear())+((new Date).getMonth()-new Date(1e3*s).getMonth());return`${l>0?(parseFloat(e)/l).toFixed(2):0} p/m`})(a.total_orders,a.created)||"-"})]}),(0,T.jsxs)(Z.A,{sm:12,children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Average order:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y),children:(0,re.up)(+a.average_orders)||"-"})]})]})})})]}),(0,T.jsxs)("div",{className:(0,m.A)(G,"mb-0"),children:[(0,T.jsx)("label",{className:(0,m.A)(X),children:"Date Entered:"}),(0,T.jsx)("h4",{className:(0,m.A)(Y,"mb-0"),children:(0,re.i$)(a.created,!0)||"-"})]})]})},xe=e=>{let{client:s,refetch:l,closeIconRef:t,hide:n}=e;const a=(0,i.useRef)(null),[o,d]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!1),h=()=>{a.current&&a.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,T.jsx)("div",{className:"view-details-sidebar",children:(0,T.jsxs)("div",{className:"d-flex flex-column",children:[(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,T.jsx)("div",{className:(0,m.A)(U,"d-flex align-items-center justify-content-center"),children:s.photo?(0,T.jsx)("img",{src:s.photo,alt:"client-photo"}):(0,T.jsx)(O.A,{color:"#667085",size:26})}),(0,T.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,T.jsx)("span",{style:{color:"344054",fontSize:"22px",fontWeight:600},children:s.name}),s.deleted?(0,T.jsx)(p.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]}),(0,T.jsx)("span",{children:(0,T.jsx)(q.A,{type:"button",className:"text-button",ref:t,onClick:e=>n(e),children:(0,T.jsx)(W.A,{size:24,color:"#667085"})})})]}),(0,T.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 105px)",overflow:"auto"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,T.jsx)("h5",{className:(0,m.A)(K),children:"Client Details"}),(0,T.jsxs)("h6",{className:(0,m.A)(J),children:["Client ID: ",s.id]})]}),r?(0,T.jsx)(te,{ref:a,refetch:l,setIsPending:d,handleExternalSubmit:h,client:s,setIsEdit:c}):(0,T.jsx)(he,{client:s})]}),(0,T.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between h-100",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[s.deleted?(0,T.jsx)("span",{}):(0,T.jsx)(de,{id:null===s||void 0===s?void 0:s.id}),r?(0,T.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,T.jsx)(q.A,{type:"button",onClick:e=>{e.stopPropagation(),c(!1)},className:"outline-button",children:"Cancel"}),(0,T.jsx)(q.A,{type:"button",onClick:h,className:"solid-button",style:{minWidth:"179px"},children:o?"Loading...":"Save Client Details"})]}):s.deleted?(0,T.jsx)(ce,{id:null===s||void 0===s?void 0:s.id,refetch:l}):(0,T.jsx)(q.A,{type:"button",onClick:e=>{e.stopPropagation(),c(!0)},className:"solid-button",children:"Edit Client"})]})]})})};var ue=l(44541),me=l(63712),pe=l(33074);const ve=(0,i.forwardRef)(((e,s)=>{var l,t,n,a,o;let{client:d,refetch:c,setIsPending:h,handleExternalSubmit:x,setIsEdit:u}=e;const m=(0,r.Zp)(),[p,v]=(0,i.useState)((null===d||void 0===d?void 0:d.photo)||null),[j,A]=(0,i.useState)({...d,category:(null===d||void 0===d||null===(l=d.category)||void 0===l?void 0:l.id)||1,contact_persons:null===d||void 0===d||null===(t=d.contact_persons)||void 0===t?void 0:t.filter((e=>!(null!==e&&void 0!==e&&e.deleted))).map((e=>({...e,uniqeId:(null===e||void 0===e?void 0:e.id)||"",deleted:null===e||void 0===e?void 0:e.deleted}))),addresses:null===d||void 0===d||null===(n=d.addresses)||void 0===n?void 0:n.filter((e=>!(null!==e&&void 0!==e&&e.deleted))).map((e=>({id:(null===e||void 0===e?void 0:e.id)||"",uniqeId:(null===e||void 0===e?void 0:e.id)||"",deleted:null===e||void 0===e?void 0:e.deleted,title:(null===e||void 0===e?void 0:e.title)||"",country:(null===e||void 0===e?void 0:e.country_id)||"",state:(null===e||void 0===e?void 0:e.state_id)||"",city:(null===e||void 0===e?void 0:e.city)||"",address:(null===e||void 0===e?void 0:e.address)||"",postcode:(null===e||void 0===e?void 0:e.postcode)||""})))}||null);0===(null===j||void 0===j||null===(a=j.addresses)||void 0===a?void 0:a.length)&&j.addresses.push({deleted:!1}),0===(null===j||void 0===j||null===(o=j.contact_persons)||void 0===o?void 0:o.length)&&j.contact_persons.push({deleted:!1});return(0,T.jsx)(pe.A,{photo:p,setPhoto:v,ref:s,onSubmit:async e=>{d.id?(async e=>{console.log("data: ",e);const s=new FormData;if(s.append("name",e.name),s.append("abn",e.abn),s.append("phone",e.phone),s.append("email",e.email),s.append("website",e.website),s.append("payment_terms",e.payment_terms),s.append("category",e.category),s.append("industry",e.industry),s.append("description",e.description),e.addresses.forEach(((e,l)=>{e.city&&(s.append(`addresses[${l}]city`,e.city),s.append(`addresses[${l}]title`,e.title),s.append(`addresses[${l}]address`,e.address),s.append(`addresses[${l}]is_main`,e.is_main),s.append(`addresses[${l}]postcode`,e.postcode),null!==e&&void 0!==e&&e.id&&s.append(`addresses[${l}]id`,null===e||void 0===e?void 0:e.id))})),e.contact_persons.forEach(((e,l)=>{(e.firstname||e.email)&&(s.append(`contact_persons[${l}]firstname`,e.firstname),s.append(`contact_persons[${l}]lastname`,e.lastname),s.append(`contact_persons[${l}]email`,e.email),s.append(`contact_persons[${l}]phone`,e.phone),s.append(`contact_persons[${l}]position`,e.position),s.append(`contact_persons[${l}]is_main`,e.is_main),null!==e&&void 0!==e&&e.id&&s.append(`contact_persons[${l}]id`,null===e||void 0===e?void 0:e.id))})),null!==p&&void 0!==p&&p.croppedImageBlob){const e=(0,me.Ak)(6);s.append("photo",null===p||void 0===p?void 0:p.croppedImageBlob,`${e}.jpg`)}try{h(!0);const e=localStorage.getItem("access_token"),l=await fetch(`https://dev.memate.com.au/api/v1/clients/update/business/${d.id}/`,{method:"PUT",headers:{Authorization:`Bearer ${e}`},body:s});l.ok?(u(!1),console.log("response: ",l),D.oR.success("Client updated successfully"),m("/clients")):D.oR.error("Failed to update client. Please try again.")}catch(l){D.oR.error("Failed to update client. Please try again.")}finally{h(!1)}})(e):D.oR.error("Client id not found")},defaultValues:j,deleteAddress:async e=>{try{const s=await(0,I.ab)(e);console.log("response: ",s),s.message?D.oR.success("Address deleted successfully."):D.oR.error("Failed to delete address. Please try again.")}catch(s){D.oR.error("Failed to delete address. Please try again.")}},deleteContact:async e=>{try{(await(0,I.F1)(e)).message?D.oR.success("Contact deleted successfully."):D.oR.error("Failed to delete contact. Please try again.")}catch(s){D.oR.error("Failed to delete contact. Please try again.")}}})})),je=ve,Ae="business-client_profileBox__VGcoZ",ge="business-client_box__+9rUT",ye="business-client_boxLabel__InMvR",fe="business-client_boxLabel2__IXr47",Ne="business-client_label__v0SXB",be="business-client_text__y7JLT",we="business-client_iconBoxsContainer__pG+eu",Ce="business-client_iconBox__BOGzY",_e=e=>{var s,l,t;let{client:n,industries:a,refetch:o}=e;const[d,r]=(0,i.useState)(null),h=[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}];let x=null===a||void 0===a?void 0:a.find((e=>e.id===(null===n||void 0===n?void 0:n.industry))),u=null===h||void 0===h?void 0:h.find((e=>(null===e||void 0===e?void 0:e.value)===(null===n||void 0===n?void 0:n.payment_terms)));const p=null===n||void 0===n||null===(s=n.addresses)||void 0===s?void 0:s.filter((e=>!(null!==e&&void 0!==e&&e.deleted))),v=null===n||void 0===n||null===(l=n.contact_persons)||void 0===l?void 0:l.filter((e=>!(null!==e&&void 0!==e&&e.deleted)));return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:(0,m.A)(ge),children:[(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"ABN"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:(null===n||void 0===n?void 0:n.abn)||"-"})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Industry"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:(null===x||void 0===x?void 0:x.name)||"-"})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Customer Type"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:null!==n&&void 0!==n&&n.is_business?"Business":"Indivisual"})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Phone"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:(null===n||void 0===n?void 0:n.phone)||"-"})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Email"}),(0,T.jsx)(c.N_,{to:"#",onClick:e=>{e.preventDefault(),window.location.href=`mailto:${null===n||void 0===n?void 0:n.email}`},children:(0,T.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,T.jsxs)("div",{className:"ellipsis-width",title:null===n||void 0===n?void 0:n.email,children:[(null===n||void 0===n?void 0:n.email)||"-","\xa0"]}),(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,T.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Website"}),(0,T.jsx)(c.N_,{to:(null===n||void 0===n?void 0:n.website)||"#",target:"_blank",children:(0,T.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,T.jsxs)("div",{className:"ellipsis-width",title:null===n||void 0===n?void 0:n.website,children:[(null===n||void 0===n?void 0:n.website)||"-","\xa0"]}),(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,T.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]})]}),(0,T.jsx)("h5",{className:(0,m.A)(ye),children:"Payment Terms"}),(0,T.jsx)("div",{className:(0,m.A)(ge),children:(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Payment Terms"}),(0,T.jsx)("h4",{className:(0,m.A)(be,"mb-0"),children:(null===u||void 0===u?void 0:u.label)||"-"})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Customers Discount Category"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:(null===n||void 0===n||null===(t=n.category)||void 0===t?void 0:t.name)||"-"})]})]})}),(0,T.jsx)("h5",{className:(0,m.A)(ye),children:"Contact Person"}),null===v||void 0===v?void 0:v.map((e=>(0,T.jsxs)("div",{className:(0,m.A)(ge),children:[(0,T.jsx)("div",{className:(0,m.A)(we),children:(0,T.jsx)("div",{className:(0,m.A)(Ce,"cursor-pointer"),onClick:()=>(async e=>{try{if(!e)return D.oR.error("Id not found");r(e),await(0,I.Ye)(e),o(),D.oR.success("Contact person has been successfully set as the primary contact")}catch(s){console.error("Error is setting primary contact:",s),D.oR.error("Failed to set primary contact. Please try again.")}finally{r(null)}})(e.id),children:d===e.id?(0,T.jsx)(R.p,{style:{width:"20px",height:"20px"}}):(0,T.jsx)(H.A,{color:e.is_main?"#FFCB45":"#D0D5DD",size:16})})}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Full Name"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:`${e.firstname} ${e.lastname}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Email"}),(0,T.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`mailto:${null===e||void 0===e?void 0:e.email}`},children:(0,T.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,T.jsxs)("div",{className:"ellipsis-width",title:null===e||void 0===e?void 0:e.email,children:[(null===e||void 0===e?void 0:e.email)||"-","\xa0"]}),(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,T.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Position"}),(0,T.jsx)("h4",{className:(0,m.A)(be,"mb-0"),children:(null===e||void 0===e?void 0:e.position)||"-"})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Phone"}),(0,T.jsxs)("h4",{className:(0,m.A)(be,"mb-0"),children:[(null===e||void 0===e?void 0:e.phone)||"-","\xa0\xa0",(0,T.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`tel:${null===e||void 0===e?void 0:e.phone}`},style:{position:"relative",top:"-2px"},children:(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,T.jsx)("path",{d:"M4.15387 1.32849C3.90343 1.00649 3.42745 0.976861 3.139 1.26531L2.10508 2.29923C1.6216 2.78271 1.44387 3.46766 1.6551 4.06847C2.50338 6.48124 3.89215 8.74671 5.82272 10.6773C7.75329 12.6078 10.0188 13.9966 12.4315 14.8449C13.0323 15.0561 13.7173 14.8784 14.2008 14.3949L15.2347 13.361C15.5231 13.0726 15.4935 12.5966 15.1715 12.3461L12.8653 10.5524C12.7008 10.4245 12.4866 10.3793 12.2845 10.4298L10.0954 10.9771C9.50082 11.1257 8.87183 10.9515 8.43845 10.5181L5.98187 8.06155C5.54849 7.62817 5.37427 6.99919 5.52292 6.40459L6.07019 4.21553C6.12073 4.01336 6.07552 3.79918 5.94758 3.63468L4.15387 1.32849ZM2.38477 0.511076C3.12689 -0.231039 4.3515 -0.154797 4.99583 0.673634L6.78954 2.97983C7.1187 3.40304 7.23502 3.95409 7.10498 4.47423L6.55772 6.66329C6.49994 6.8944 6.56766 7.13888 6.7361 7.30732L9.19268 9.7639C9.36113 9.93235 9.6056 10.0001 9.83671 9.94229L12.0258 9.39502C12.5459 9.26498 13.097 9.3813 13.5202 9.71047L15.8264 11.5042C16.6548 12.1485 16.731 13.3731 15.9889 14.1152L14.955 15.1492C14.2153 15.8889 13.1089 16.2137 12.0778 15.8512C9.51754 14.9511 7.11438 13.4774 5.06849 11.4315C3.0226 9.38562 1.54895 6.98246 0.648838 4.42225C0.286318 3.39112 0.61113 2.28472 1.35085 1.545L2.38477 0.511076Z",fill:"#106B99"})})})]})]})]})]},e.id))),0===(null===v||void 0===v?void 0:v.length)&&(0,T.jsx)("div",{className:(0,m.A)(ge),children:"-"}),(0,T.jsx)("h5",{className:(0,m.A)(ye),children:"Locations"}),null===p||void 0===p?void 0:p.map((e=>(0,T.jsxs)("div",{className:(0,m.A)(ge),children:[(0,T.jsxs)("div",{className:(0,m.A)(we),children:[(0,T.jsx)("div",{className:(0,m.A)(Ce,"cursor-pointer"),onClick:()=>(async e=>{try{if(!e)return D.oR.error("Id not found");r(e),await(0,I.QK)(e),o(),D.oR.success("Address has been successfully set as the primary address")}catch(s){console.error("Error is setting primary address:",s),D.oR.error("Failed to set primary address. Please try again.")}finally{r(null)}})(e.id),children:d===e.id?(0,T.jsx)(R.p,{style:{width:"20px",height:"20px"}}):(0,T.jsx)(H.A,{color:e.is_main?"#FFCB45":"#D0D5DD",size:16})}),(0,T.jsx)("div",{className:(0,m.A)(Ce),children:(0,T.jsx)(c.N_,{to:`http://maps.google.com/?q=${e.address}`,target:"_blank",children:(0,T.jsx)("img",{src:se,alt:"map"})})})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Location Name"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:`${e.title||"-"}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Country"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:`${e.country||"-"}`})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"State"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:`${e.state||"-"}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"City"}),(0,T.jsx)("h4",{className:(0,m.A)(be),children:`${e.city||"-"}`})]})]}),(0,T.jsxs)(V.A,{children:[(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Street Address"}),(0,T.jsx)("h4",{className:(0,m.A)(be,"mb-0"),children:`${e.address||"-"}`})]}),(0,T.jsxs)(Z.A,{sm:6,children:[(0,T.jsx)("label",{className:(0,m.A)(Ne),children:"Postcode"}),(0,T.jsx)("h4",{className:(0,m.A)(be,"mb-0"),children:`${e.postcode||"-"}`})]})]})]},e.id))),0===(null===p||void 0===p?void 0:p.length)&&(0,T.jsx)("div",{className:(0,m.A)(ge),children:"-"}),(0,T.jsx)("h5",{className:(0,m.A)(ye),children:"Client Description"}),(0,T.jsx)("div",{className:(0,m.A)(ge,"mb-0"),children:n.description||"-"})]})},Fe=e=>{let{client:s,refetch:l,closeIconRef:t,hide:n}=e;const a=(0,i.useRef)(null),[o,r]=(0,i.useState)(!1),[c,h]=(0,i.useState)(!1),x=(0,d.I)({queryKey:["industries"],queryFn:I.OF}),u=()=>{a.current&&a.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,T.jsx)("div",{className:"view-details-sidebar",children:(0,T.jsxs)("div",{className:"d-flex flex-column",children:[(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,T.jsx)("div",{className:(0,m.A)(Ae,"d-flex align-items-center justify-content-center"),children:s.photo?(0,T.jsx)("img",{src:s.photo,alt:"client-photo"}):(0,T.jsx)(ue.A,{color:"#667085",size:26})}),(0,T.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,T.jsx)("span",{style:{color:"344054",fontSize:"22px",fontWeight:600},children:s.name}),s.deleted?(0,T.jsx)(p.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]}),(0,T.jsx)("span",{children:(0,T.jsx)(q.A,{type:"button",className:"text-button",ref:t,onClick:e=>n(e),children:(0,T.jsx)(W.A,{size:24,color:"#667085"})})})]}),(0,T.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 105px)",overflow:"auto"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,T.jsx)("h5",{className:(0,m.A)(ye),children:"Client Details"}),(0,T.jsxs)("h6",{className:(0,m.A)(fe),children:["Client ID: ",s.id]})]}),c?(0,T.jsx)(je,{ref:a,refetch:l,setIsPending:r,handleExternalSubmit:u,client:s,setIsEdit:h}):(0,T.jsx)(_e,{client:s,industries:null===x||void 0===x?void 0:x.data,refetch:l})]}),(0,T.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between h-100",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[s.deleted?(0,T.jsx)("span",{}):(0,T.jsx)(de,{id:null===s||void 0===s?void 0:s.id}),c?(0,T.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,T.jsx)(q.A,{type:"button",onClick:e=>{e.stopPropagation(),h(!1)},className:"outline-button",children:"Cancel"}),(0,T.jsx)(q.A,{type:"button",onClick:u,className:"solid-button",style:{width:"180px"},children:o?"Loading...":"Save Client Details"})]}):s.deleted?(0,T.jsx)(ce,{id:null===s||void 0===s?void 0:s.id,refetch:l}):(0,T.jsx)(q.A,{type:"button",onClick:e=>{e.stopPropagation(),h(!0)},className:"solid-button",children:"Edit Client"})]})]})})};var ke=l(74856);const Se=()=>(0,T.jsx)("div",{className:"loading-details-sidebar",children:(0,T.jsxs)("div",{className:"d-flex flex-column",children:[(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,T.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{borderRadius:"var(--radius-xs, 4px)",border:"1px solid #dedede",width:"56px",height:"56px",overflow:"hidden"},children:(0,T.jsx)(ke.E,{size:"3.5rem"})}),(0,T.jsx)(ke.E,{height:"2rem",width:"20rem",className:"mb-2"})]}),(0,T.jsx)("span",{children:(0,T.jsx)(ke.E,{shape:"circle",size:"2rem",className:"mr-2"})})]}),(0,T.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 105px)",overflow:"auto"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,T.jsx)(ke.E,{height:"1.5rem",width:"10rem",className:"mb-2"}),(0,T.jsx)(ke.E,{height:"1.5rem",width:"10rem",className:"mb-2"})]}),(0,T.jsx)(ke.E,{width:"100%",className:"mb-4",height:"150px"}),(0,T.jsx)(ke.E,{height:"2rem",className:"mb-2"}),(0,T.jsx)(ke.E,{width:"100%",className:"mb-4",height:"150px"}),(0,T.jsx)(ke.E,{height:"2rem",className:"mb-2"}),(0,T.jsx)(ke.E,{width:"100%",className:"mb-4",height:"150px"})]}),(0,T.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between h-100",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[(0,T.jsx)(ke.E,{width:"4rem",height:"3rem"}),(0,T.jsx)(ke.E,{width:"8rem",height:"3rem"})]})]})}),$e=()=>{var e,s,l;const m=(0,r.Zp)(),p=(0,i.useRef)(null),{id:v}=(0,r.g)(),[j,A]=(0,i.useState)(!0),[g,y]=(0,i.useState)(null),[f,N,b]=(0,x.d7)("",400),w=(0,d.I)({queryKey:["client-read"],queryFn:()=>(0,I.EZ)(v),enabled:!!v,retry:1}),C=(0,d.I)({queryKey:["client-order"],queryFn:()=>(0,I.o6)(v),enabled:!!v,retry:1}),_=e=>{p.current?p.current.exportCSV({selectionOnly:e}):console.error("DataTable ref is null")};return"Not found"===(null===w||void 0===w||null===(e=w.error)||void 0===e?void 0:e.message)&&(D.oR.error("Client not found"),m("/clients")),(0,T.jsxs)(t.mD,{className:"client-order-history-page",children:[(0,T.jsxs)("div",{className:"client-order-history",style:{width:j?"calc(100% - 559px)":"100%"},children:[(0,T.jsxs)("div",{className:`topbar ${null!==g&&void 0!==g&&g.length?u.active:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,T.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==g&&void 0!==g&&g.length?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("h6",{className:u.selectedCount,children:["Selected: ",null===g||void 0===g?void 0:g.length]}),(0,T.jsx)("div",{className:"filtered-box",children:(0,T.jsx)("button",{className:`${u.filterBox}`,onClick:()=>_(!0),children:(0,T.jsx)(n.A,{})})})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(c.N_,{to:"/clients",className:`${u.gobackBtn}`,children:[(0,T.jsx)(a.A,{color:"#1AB2FF",size:20})," Go Back"]}),(0,T.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,T.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,T.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,T.jsx)("input",{type:"text",placeholder:"Search",value:f,onChange:e=>b(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#98A2B3",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),(0,T.jsx)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"47%"},children:(0,T.jsx)("h1",{onClick:()=>{A(!0)},className:`${u.clientName} m-0 p-0 cursor-pointer`,title:null===w||void 0===w||null===(s=w.data)||void 0===s?void 0:s.name,children:(null===w||void 0===w||null===(l=w.data)||void 0===l?void 0:l.name)||""})}),(0,T.jsx)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:(0,T.jsx)(o.$,{label:"Download",onClick:()=>_(!1),className:"primary-text-button",text:!0})})]}),(0,T.jsx)(M,{ref:p,selected:g,setSelected:y,searchValue:N,clientOrders:(null===C||void 0===C?void 0:C.data)||[],isPending:null===C||void 0===C?void 0:C.isPending})]}),(0,T.jsx)(h.B,{visible:j,position:"right",onHide:()=>A(!1),modal:!1,dismissable:!1,style:{width:"559px"},content:e=>{var s,l;let{closeIconRef:i,hide:t}=e;return null!==w&&void 0!==w&&null!==(s=w.data)&&void 0!==s&&s.is_business?(0,T.jsx)(Fe,{client:(null===w||void 0===w?void 0:w.data)||{},refetch:null===w||void 0===w?void 0:w.refetch,closeIconRef:i,hide:t,setVisible:A}):!1===(null===w||void 0===w||null===(l=w.data)||void 0===l?void 0:l.is_business)?(0,T.jsx)(xe,{client:(null===w||void 0===w?void 0:w.data)||{},refetch:null===w||void 0===w?void 0:w.refetch,closeIconRef:i,hide:t}):(0,T.jsx)(Se,{})}})]})}},24572:(e,s,l)=>{function i(e){var s,l={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},i="";for(s in l)for(;e>=l[s];)i+=s,e-=l[s];return i}function t(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})}l.d(s,{Mf:()=>i,i$:()=>n,up:()=>t});const n=(e,s)=>{var l;if(!e)return"-";const i=new Date(1e3*+e);if(s){return i.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,".")}return null===(l=i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))||void 0===l?void 0:l.replace(/,/g,"")}},74196:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKZSURBVHgBjZM7aBRBGMf/sze53MNAYthdonJ5cZeQFAkSEHyQswiCWJxFIlho4yOFRbAwkigimMIikkI0lSLYSMBSUZK7aFqx0GAUTXyQ+EgkHvHu9h67M87M3i7auezON7v7/X/ft//ZIfiP42MqWc9pcIJX7OMgpJ4QPOeUnGufmX1NemdGkmBIykTGmJiqmYpqFOejmXcnueO0gAOcMzkIDmHlcOgArTh2psJs7N7eiiitxbP1JTjMETou8jgOfcqBM66wn/NFFB0HrdFa1HCu1eQKE7TMKjgTH1CAtcKmLILM90W//d6fJTFylAVkYSOrOmCsDp11YRANezRZpd/swvkX9/DNyiJpdqMp3OADcpT48yjVVNxGAyoKVlaTFbfKFvoa2/F47SX26h2qCwmWcWFHWCUHhXOpnTqOxUzsitRCvQR/QplIvPLqAUa7U2iO6riznMZXa9OHnNjPQFcDsN/bClRD1Avp7aoD5yppuX/KdQjcF7l3wGQij0GzjK0NAz+uf4Fm5ZVYAVri1xK3717WeNVt2YnXtszxxEXWhLXIaZQGjvhiu6cP1vCIIwtpTLVTFVY7mOxwxSwQQ7F+HAFaB7KvH6wtrrqzD6d8Y9UqeJeE3egoKPHKr2ZML44psWEYoJTC7uqB05YAb2j0AbRqgKo+5YtjuDg/hlwlgnyZ42xSU5CN3j4wq4C/D7EK7s871Wlh0HArj86PC2FEPU+/JaI7DcMHAT2ewDr4PwDNqzxklLCSjfli+Zy5nmFOQKYzGgLBIIzOLvU5PmBKGDZklrAsxBcyl5ATYk/oGSuH2SWCW2kBCQRgmiZCoZALONpYefphU4jTY/hdCqkdyeWurEZvLq/ZNxw359ROzOq6/lAC/gA2jGWYJ8Il5QAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=4656.40a5bf89.chunk.js.map