"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[977],{1690:(e,s,t)=>{t.d(s,{A:()=>o});t(65043);const o=t.p+"static/media/Featured icon.f0452deecdd8a0600a95469561a90cfe.svg"},73210:(e,s,t)=>{t.r(s),t.d(s,{default:()=>us});var o=t(65043),l=t(14282),i=t(72970),n=t(88166),a=t(18091),d=t(75329),c=t(39759),r=t(49367),x=t(35475),u=t(47097),h=t(58387),p=t(2028),m=t(93740),v=t(90818),g=t(56328),j=t(43666),f=t(33817),b=t(56741),_=t(50565),y=t(94819),A=t(90688),w=t(88120),N=t(72018),E=t(9642),F=t(64824),C=t(76104);const S={filterBox:"expenses_filterBox__wxXcv",menu:"expenses_menu__5taYH",newButton:"expenses_newButton__SU4MY",total:"expenses_total__LH43I",totalCount:"expenses_totalCount__5Yt5A",totalMoney:"expenses_totalMoney__L+hKb",clientImg:"expenses_clientImg__VRYOd",ellipsis:"expenses_ellipsis__94-xF",location:"expenses_location__JzKDi",active:"expenses_active__J0Nsm",selectedCount:"expenses_selectedCount__wP1-v",deletedRow:"expenses_deletedRow__FYQdz",paidRow:"expenses_paidRow__STtg1",unpaidRow:"expenses_unpaidRow__eujRL",fontStanderdSize:"expenses_fontStanderdSize__F1Lwi",plusIcon:"expenses_plusIcon__YeleL","paid-false":"expenses_paid-false__Oe4Ym",status:"expenses_status__W0wup",inactive:"expenses_inactive__J0oTn",actionButton:"expenses_actionButton__XzmE2",allMoneyButton:"expenses_allMoneyButton__FCs0l",unpaidMoneyButton:"expenses_unpaidMoneyButton__kA4gC",shakeText:"expenses_shakeText__4E+55","tilt-n-move-shaking":"expenses_tilt-n-move-shaking__fDQcc",customToast:"expenses_customToast__MyoQa",toastIcon:"expenses_toastIcon__xu4JV",outerToastIcon:"expenses_outerToastIcon__VG2NP",toastTitle:"expenses_toastTitle__pDAPJ",toastMessage:"expenses_toastMessage__adrZS",paidButton:"expenses_paidButton__pQuP8",notPaidButton:"expenses_notPaidButton__DyR80",accountCode:"expenses_accountCode__4ZKuY"};var R=t(10586),k=t(57189),B=t(48417),D=t(568),z=t(74737),$=t(10737),P=t(36858),M=t(50917),T=t(35646),V=t(62645),I=t(50410),W=t(43808),L=t(26506),H=t(11062),O=t(53516),U=t(57927),Y=t(80501),J=t(25004),X=t(64721),q=t(55251),K=t(25958),Q=t(28987),Z=t(86169),G=t(10213),ee=t(65961),se=t(78909),te=t(988),oe=t(71584),le=t(11733),ie=t(98465),ne=t(83700),ae=t(46),de=t(85421),ce=t(97530),re=t(14872),xe=t(18917),ue=t(60571),he=t(19188),pe=t(52068),me=t(27726),ve=t(86944),ge=t(1427),je=t(94154),fe=t(57160),be=t(93819),_e=t(40261),ye=t(17544),Ae=t(28494),we=t(81460),Ne=t(43414),Ee=t(10095),Fe=t(7647),Ce=t(91875),Se=t(10696),Re=t(70579);const ke={aac:{icon:$.A,color:"#4CAF50"},ai:{icon:P.A,color:"#FF9800"},bmp:{icon:M.A,color:"#00ADEF"},cs:{icon:T.A,color:"#239120"},css:{icon:V.A,color:"#1572B6"},csv:{icon:I.A,color:"#22A746"},doc:{icon:W.A,color:"#2368E1"},docx:{icon:L.A,color:"#2368E1"},exe:{icon:H.A,color:"#8E8E8E"},gif:{icon:O.A,color:"#F64A8A"},heic:{icon:U.A,color:"#FFAA00"},html:{icon:Y.A,color:"#E34F26"},java:{icon:J.A,color:"#007396"},jpg:{icon:X.A,color:"#FFAA00"},jpeg:{icon:X.A,color:"#FFAA00"},js:{icon:q.A,color:"#F7DF1E"},json:{icon:K.A,color:"#22A746"},jsx:{icon:Q.A,color:"#61DAFB"},key:{icon:Z.A,color:"#FF9800"},m4p:{icon:G.A,color:"#4CAF50"},md:{icon:ee.A,color:"#8E8E8E"},mdx:{icon:se.A,color:"#8E8E8E"},mov:{icon:te.A,color:"#9C27B0"},mp3:{icon:oe.A,color:"#4CAF50"},mp4:{icon:le.A,color:"#9C27B0"},otf:{icon:ie.A,color:"#795548"},pdf:{icon:ne.A,color:"#FF0000"},php:{icon:ae.A,color:"#777BB4"},png:{icon:de.A,color:"#00ADEF"},ppt:{icon:ce.A,color:"#FF9800"},pptx:{icon:re.A,color:"#FF9800"},psd:{icon:xe.A,color:"#31A8FF"},py:{icon:ue.A,color:"#3776AB"},raw:{icon:he.A,color:"#FFAA00"},rb:{icon:pe.A,color:"#CC342D"},sass:{icon:me.A,color:"#CF649A"},scss:{icon:ve.A,color:"#CF649A"},sh:{icon:ge.A,color:"#8E8E8E"},sql:{icon:je.A,color:"#336791"},svg:{icon:fe.A,color:"#FF5722"},tiff:{icon:be.A,color:"#FFAA00"},tsx:{icon:_e.A,color:"#3178C6"},ttf:{icon:ye.A,color:"#795548"},txt:{icon:Ae.A,color:"#8E8E8E"},wav:{icon:we.A,color:"#795548"},woff:{icon:Ne.A,color:"#795548"},xls:{icon:Ee.A,color:"#22A746"},xlsx:{icon:Fe.A,color:"#22A746"},xml:{icon:Ce.A,color:"#E34F26"},yml:{icon:Se.A,color:"#8E8E8E"},zip:{icon:H.A,color:"#FFD700"},rar:{icon:H.A,color:"#F44336"},tar:{icon:H.A,color:"#FFC107"},pub:{icon:W.A,color:"#4CAF50"},swf:{icon:H.A,color:"#FFEB3B"}},Be=e=>{let{extension:s,color:t,size:o}=e;const l=null===s||void 0===s?void 0:s.toLowerCase(),i=ke[l];if(i){const e=i.icon,s=t||i.color;return(0,Re.jsx)(e,{color:s,size:o})}return(0,Re.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:t||"#888",xmlns:"http://www.w3.org/2000/svg",children:(0,Re.jsx)("path",{d:"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6.5L9.5 0H4zm8 1.5V6H9V1h3z"})})};var De=t(14834),ze=t(27734),$e=t(54967),Pe=t(99868),Me=t(93202),Te=t(93747),Ve=t(20288);const Ie="expense-edit_circledesignstyle__0R-yu",We="expense-edit_out__t3U+W",Le="expense-edit_expensesEditHead__vh0iB";var He=t(44908),Oe=t(61072),Ue=t(78602),Ye=t(74856);const Je=()=>(0,Re.jsx)("div",{className:"loading-details-sidebar",children:(0,Re.jsx)("div",{className:"d-flex flex-column",children:(0,Re.jsxs)("div",{className:"modal-body",style:{padding:"0px 12px 12px 12px",height:"calc(100vh - 72px - 122px)",overflow:"auto"},children:[(0,Re.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,Re.jsx)(Ye.E,{height:"2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{height:"1.5rem",width:"10rem",className:"mb-2"})]}),(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"}),(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"}),(0,Re.jsxs)(Oe.A,{children:[(0,Re.jsxs)(Ue.A,{children:[(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"})]}),(0,Re.jsxs)(Ue.A,{children:[(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"})]})]}),(0,Re.jsxs)(Oe.A,{children:[(0,Re.jsxs)(Ue.A,{children:[(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"})]}),(0,Re.jsxs)(Ue.A,{children:[(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"})]})]}),(0,Re.jsxs)(Oe.A,{children:[(0,Re.jsx)(Ue.A,{children:(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"94px"})}),(0,Re.jsx)(Ue.A,{children:(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"94px"})}),(0,Re.jsx)(Ue.A,{children:(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"94px"})})]}),(0,Re.jsxs)("div",{className:"d-flex align-items-center mb-4 gap-1",children:[(0,Re.jsx)(Ye.E,{height:"2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{height:"2rem",width:"10rem",className:"mb-2"})]}),(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"50%",className:"mb-4",height:"45px"}),(0,Re.jsxs)(Oe.A,{children:[(0,Re.jsxs)(Ue.A,{children:[(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"})]}),(0,Re.jsxs)(Ue.A,{children:[(0,Re.jsx)(Ye.E,{height:"1.2rem",width:"10rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{width:"100%",className:"mb-4",height:"45px"})]})]}),(0,Re.jsxs)("div",{className:"d-flex align-items-center mb-4 gap-1",children:[(0,Re.jsx)(Ye.E,{height:"2rem",width:"2rem",className:"mb-2"}),(0,Re.jsx)(Ye.E,{height:"2rem",width:"50%",className:"mb-2"})]})]})})}),Xe=e=>{let{visible:s,setVisible:t,setEditData:i,id:n,name:a,setRefetch:d}=e;const c=(0,o.useRef)(null),[r,x]=(0,o.useState)({}),h=(0,Te.I)({queryKey:["getExpense",n],queryFn:()=>(0,R.$R)(n),enabled:!!n}),p=(0,u.n)({mutationFn:e=>(0,R.eY)(n,e),onSuccess:e=>{console.log("response: ",e),g.oR.success("Expense updated successfully"),t(!1),i({}),x({}),d((e=>!e)),h.refetch()},onError:e=>{console.error("Error updating expense:",e),g.oR.error("Failed to update expense. Please try again.")}}),v=async(e,s)=>{x((s=>({...s,...e}))),delete e["gst-calculation"],delete e.option,delete e.subtotal,delete e.totalAmount,delete e.tax,e.order||delete e.order,e.type||(e.type=2),e.date&&(e.date=new Date(e.date).toISOString().split("T")[0]),e.due_date&&(e.due_date=new Date(e.due_date).toISOString().split("T")[0]),console.log("data: ",e),p.mutateAsync(e)},j=()=>{c.current&&c.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,o.useEffect)((()=>{if(null!==h&&void 0!==h&&h.data){var e,s,t;console.log("call......",null===h||void 0===h?void 0:h.data);const l=(o=null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.nogst,(null===h||void 0===h||null===(s=h.data)||void 0===s?void 0:s.gst)?"ex":o?"no":"in"),{subtotal:i,tax:n,totalAmount:a}=((e,s)=>{let t=0,o=0;return"ex"===s?(o=e,t=.1*o):"in"===s?(t=.1*e/1.1,o=e-t):(o=e,t=0),{subtotal:o.toFixed(2),tax:t.toFixed(2),totalAmount:(parseFloat(o)+parseFloat(t)).toFixed(2)}})(+(null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.amount),l);x((e=>{var s,t,o,d,c,r,x,u,p,m,v,g,j,f;return{...e,note:null===h||void 0===h||null===(s=h.data)||void 0===s?void 0:s.note,supplier:null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.supplier,invoice_reference:null===h||void 0===h||null===(o=h.data)||void 0===o?void 0:o.invoice_reference,date:new Date(1e3*+(null===h||void 0===h||null===(d=h.data)||void 0===d?void 0:d.date)),due_date:new Date(1e3*+(null===h||void 0===h||null===(c=h.data)||void 0===c?void 0:c.due_date)),amount:null===h||void 0===h||null===(r=h.data)||void 0===r?void 0:r.amount,nogst:null===h||void 0===h||null===(x=h.data)||void 0===x?void 0:x.nogst,gst:null===h||void 0===h||null===(u=h.data)||void 0===u?void 0:u.gst,order:null===h||void 0===h||null===(p=h.data)||void 0===p?void 0:p.order,type:+(null===h||void 0===h||null===(m=h.data)||void 0===m?void 0:m.type),account_code:null===h||void 0===h||null===(v=h.data)||void 0===v?void 0:v.account_code,notification:null===h||void 0===h||null===(g=h.data)||void 0===g?void 0:g.notification,"gst-calculation":l,subtotal:i,tax:n,totalAmount:a,option:null!==h&&void 0!==h&&null!==(j=h.data)&&void 0!==j&&j.order?"Assign to project":"Assign to timeframe",file:null===h||void 0===h||null===(f=h.data)||void 0===f?void 0:f.file}}))}var o}),[null===h||void 0===h?void 0:h.data]),(0,Re.jsx)(Ve.B,{visible:s,position:"right",onHide:()=>{t(!1),i({})},modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{var s,o;let{closeIconRef:d,hide:x}=e;return(0,Re.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,Re.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,Re.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Re.jsx)("div",{className:Ie,children:(0,Re.jsx)("div",{className:We,children:(0,Re.jsx)(Me.A,{size:24,color:"#17B26A"})})}),(0,Re.jsx)("span",{style:{color:"344054",fontSize:"20px",fontWeight:600},children:"Update Expense"})]}),(0,Re.jsx)("span",{children:(0,Re.jsx)(l.A,{type:"button",className:"text-button",ref:d,onClick:e=>x(e),children:(0,Re.jsx)(b.A,{size:24,color:"#667085"})})})]}),(0,Re.jsx)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 122px)",overflow:"auto"},children:null!==h&&void 0!==h&&h.isFetching||null===r||void 0===r||!r.option?(0,Re.jsx)(Je,{}):(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsxs)("div",{className:`d-flex align-items-center mb-2 justify-content-between ${Le}`,children:[(0,Re.jsx)("h5",{children:"Expense Details"}),(0,Re.jsxs)("h6",{children:["Expense ID: ",(null===h||void 0===h||null===(s=h.data)||void 0===s?void 0:s.number)||"-"]})]}),(0,Re.jsx)(He.A,{ref:c,onSubmit:v,defaultValues:r,defaultSupplier:{name:a,id:null===h||void 0===h||null===(o=h.data)||void 0===o?void 0:o.supplier},id:n})]})}),(0,Re.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-end gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,Re.jsx)(l.A,{type:"button",onClick:e=>{e.stopPropagation(),t(!1),i({})},className:"outline-button",disabled:p.isPending,children:"Cancel"}),(0,Re.jsxs)(l.A,{type:"button",onClick:j,className:"solid-button",style:{minWidth:"70px"},disabled:p.isPending,children:["Update ",p.isPending&&(0,Re.jsx)(m.p,{style:{width:"18px",height:"18px"}})]})]})]})}})};var qe=t(51038),Ke=t(20092),Qe=t(55797);const Ze="dialog_modal__HiKtw",Ge="dialog_modalHeader__CCaHg",es="dialog_headerTitle__zaVm3",ss="dialog_iconStyle__uliFd",ts="dialog_paidTotal__H5dQT",os="dialog_unpaidTotal__BulDM";function ls(e){let{visible:s,setVisible:t,details:o,setRefetch:l}=e;const i=(0,u.n)({mutationFn:e=>(0,R.D3)(e),onSuccess:()=>{l((e=>!e)),t(),g.oR.success("Expenses have been successfully marked as paid.")},onError:e=>{console.log("error: ",e),g.oR.error("Failed to mark the expenses as paid. Please try again.")}}),n=(0,Re.jsxs)("div",{className:`${Ge}`,children:[(0,Re.jsx)("b",{className:ss,children:(0,Re.jsx)(qe.A,{size:24,color:"#B54708"})}),(0,Re.jsx)("span",{className:`white-space-nowrap ${es}`,children:"Mark Expense as paid?"})]}),a=(0,Re.jsxs)("div",{className:"d-flex justify-content-end align-items-center gap-3",children:[(0,Re.jsx)(N.$,{disabled:null===i||void 0===i?void 0:i.isPending,label:"Cancel",className:"outline-button outline-none",onClick:()=>t(!1),autoFocus:!0}),(0,Re.jsx)(N.$,{disabled:null===i||void 0===i?void 0:i.isPending,label:null!==i&&void 0!==i&&i.isPending?"Loading...":"Mark as Paid",className:"success-button outline-none",onClick:()=>{const e=null===o||void 0===o?void 0:o.id;i.mutate({ids:[e]})},autoFocus:!0})]});return(0,Re.jsx)(Qe.l,{visible:s,modal:!0,header:n,footer:a,className:`${Ze} custom-modal`,onHide:()=>{s&&t(!1)},children:(0,Re.jsxs)("div",{className:"px-3",children:[(0,Re.jsx)("p",{className:"font-16 mb-1",style:{color:"#344054"},children:"Reference"}),(0,Re.jsx)("h6",{style:{fontSize:"16px",color:"#475467",fontWeight:600,marginBottom:"16px"},children:(null===o||void 0===o?void 0:o.invoice_reference)||""}),(0,Re.jsx)("p",{className:"font-16 mb-1",style:{color:"#344054"},children:"Total"}),(0,Re.jsxs)("div",{className:`${ts}`,children:[(0,Re.jsx)(Ke.E,{severity:"success"})," $ ",(null===o||void 0===o?void 0:o.total)||"0.00"]})]})})}var is=t(1690);function ns(e){let{visible:s,setVisible:t,details:o,setRefetch:l}=e;const i=(0,u.n)({mutationFn:e=>(0,R.ik)(e),onSuccess:()=>{l((e=>!e)),t(),g.oR.success("Expenses have been successfully marked as unpaid.")},onError:e=>{console.log("error: ",e),g.oR.error("Failed to mark the expenses as unpaid. Please try again.")}}),n=(0,Re.jsxs)("div",{className:`${Ge}`,children:[(0,Re.jsx)("img",{src:is.A,alt:"task-details",style:{width:"48px",height:"48px"}}),(0,Re.jsx)("span",{className:`white-space-nowrap ${es}`,children:"Mark Expense as Unpaid?"})]}),a=(0,Re.jsxs)("div",{className:"d-flex justify-content-end align-items-center gap-3",children:[(0,Re.jsx)(N.$,{disabled:null===i||void 0===i?void 0:i.isPending,label:"Cancel",className:"outline-button outline-none",onClick:()=>t(!1),autoFocus:!0}),(0,Re.jsx)(N.$,{disabled:null===i||void 0===i?void 0:i.isPending,label:null!==i&&void 0!==i&&i.isPending?"Loading...":"Mark as Unpaid",className:"danger-button font-Weight-600",style:{padding:"10px 10px"},onClick:()=>{const e=null===o||void 0===o?void 0:o.id;i.mutate({ids:[e]})},autoFocus:!0})]});return(0,Re.jsx)(Re.Fragment,{children:(0,Re.jsx)(Qe.l,{visible:s,modal:!1,header:n,footer:a,className:`${Ze} custom-modal`,onHide:()=>{s&&t(!1)},children:(0,Re.jsxs)("div",{className:"px-3",children:[(0,Re.jsx)("p",{className:"font-16 mb-1",style:{color:"#344054"},children:"Reference"}),(0,Re.jsx)("h6",{style:{fontSize:"16px",color:"#475467",fontWeight:600,marginBottom:"16px"},children:(null===o||void 0===o?void 0:o.invoice_reference)||""}),(0,Re.jsx)("p",{className:"font-16 mb-1",style:{color:"#344054"},children:"Total"}),(0,Re.jsxs)("div",{className:`${os}`,children:[(0,Re.jsx)(Ke.E,{severity:"danger"})," $ ",(null===o||void 0===o?void 0:o.total)||"0.00"]})]})})})}const as=e=>{let{showDialog:s,setShowDialog:t,setRefetch:o}=e;const{data:l,show:i}=s;return(0,Re.jsx)(Re.Fragment,{children:!i||null!==l&&void 0!==l&&l.paid?i?(0,Re.jsx)(ns,{visible:i,details:l,setVisible:()=>t({data:null,show:!1}),setRefetch:o}):"":(0,Re.jsx)(ls,{visible:i,details:l,setVisible:()=>t({data:null,show:!1}),setRefetch:o})})},ds=e=>{const s=new Date(1e3*e);return`${s.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(s)} ${s.getFullYear()}`},cs=(0,o.forwardRef)(((e,s)=>{let{searchValue:t,setTotal:l,setTotalMoney:i,selected:a,setSelected:d,isShowDeleted:c,refetch:r,setRefetch:h}=e;const{role:p}=(0,k.As)(),v=(0,o.useRef)(null),$=(0,o.useRef)(null),{trialHeight:P}=(0,B.$)(),[M,T]=(0,o.useState)([]),[V,I]=(0,o.useState)(1),[W,L]=(0,o.useState)({sortField:"id",sortOrder:-1}),[H,O]=(0,o.useState)({sortField:"id",sortOrder:-1}),[U,Y]=(0,o.useState)(!0),[J,X]=(0,o.useState)(!1),[q,K]=(0,o.useState)(""),[Q,Z]=(0,o.useState)(!1),[G,ee]=(0,o.useState)({data:null,show:!1}),se=o.useMemo((()=>window.location.href),[]),te=o.useMemo((()=>new URL(se)),[se]),oe=o.useMemo((()=>new URLSearchParams(te.search)),[te]);(0,o.useEffect)((()=>{const e=oe.get("expenseId");if(e&&"undefined"!==e){const s=oe.get("supplierName");K({id:e,name:s}),Z(!0),te.searchParams.delete("expenseId"),window.history.replaceState({},"",te),te.searchParams.delete("supplierName"),window.history.replaceState({},"",te)}else"undefined"===e&&(g.oR.error("Expense id not found"),te.searchParams.delete("expenseId"),window.history.replaceState({},"",te),te.searchParams.delete("supplierName"),window.history.replaceState({},"",te))}),[oe]),(0,o.useEffect)((()=>{I(1)}),[t,r,c]),(0,o.useEffect)((()=>{(async()=>{X(!0);let e="";1===(null===H||void 0===H?void 0:H.sortOrder)?e=`${H.sortField}`:-1===(null===H||void 0===H?void 0:H.sortOrder)&&(e=`-${H.sortField}`);const s=await(0,R.md)(V,25,t,e,c);var o;(l((()=>(null===s||void 0===s?void 0:s.count)||0)),i((null===s||void 0===s?void 0:s.total_amount)||0),1===V)?T(s.results):(null===s||void 0===s||null===(o=s.results)||void 0===o?void 0:o.length)>0&&T((e=>{const t=new Set(e.map((e=>e.id))),o=s.results.filter((e=>!t.has(e.id)));return[...e,...o]}));L(H),Y(s.count!==M.length),X(!1)})()}),[V,t,H,r,c]),(0,o.useEffect)((()=>{if(M.length>0&&U){v.current=new IntersectionObserver((e=>{e[0].isIntersecting&&I((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&v.current.observe(e)}return()=>{v.current&&v.current.disconnect()}}),[M,U]);const le=(0,u.n)({mutationFn:e=>(0,R.Wz)(e),onSuccess:()=>{g.oR.success("Expense deleted successfully"),le.reset(),h(!r)},onError:e=>{le.reset(),console.log("error: ",e),g.oR.error("Failed to delete expense. Please try again.")}});return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsxs)(F.b,{ref:s,value:M,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${P}px)`,className:"border",selection:a,onSelectionChange:e=>d(e.value),loading:J,loadingIcon:ze.A,emptyMessage:(0,Re.jsx)(Pe.A,{isDataExist:!!t||!!c}),sortField:null===W||void 0===W?void 0:W.sortField,sortOrder:null===W||void 0===W?void 0:W.sortOrder,onSort:e=>{const{sortField:s,sortOrder:t}=e;O({sortField:s,sortOrder:t}),I(1)},children:[(0,Re.jsx)(E.V,{selectionMode:"multiple",headerClassName:"ps-4 border-end-0",bodyClassName:"show-on-hover border-end-0 ps-4",headerStyle:{width:"3rem",textAlign:"center"},frozen:!0}),(0,Re.jsx)(E.V,{field:"id",header:"Expense ID",body:e=>{var s;return(0,Re.jsxs)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",children:[(0,Re.jsxs)("div",{className:"d-flex flex-column",style:{lineHeight:"1.385"},children:[(0,Re.jsx)("span",{children:null===(s=e.number)||void 0===s?void 0:s.split("-")[1]}),(0,Re.jsx)("span",{className:"font-12",style:{color:"#98A2B3"},children:ds(e.created)})]}),(0,Re.jsx)(N.$,{label:"Open",onClick:()=>{var s;Z(!0),K({id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e||null===(s=e.supplier)||void 0===s?void 0:s.name})},className:"primary-text-button ms-3 show-on-hover-element not-show-checked",text:!0})]})},headerClassName:"paddingLeftHide",bodyClassName:"paddingLeftHide",style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,Re.jsx)(E.V,{field:"supplier__name",header:"Supplier A\u2192Z",body:e=>{var s,t,o;return(0,Re.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Re.jsx)($e.Ay,{has_photo:null===e||void 0===e||null===(s=e.supplier)||void 0===s?void 0:s.has_photo,photo:null===e||void 0===e||null===(t=e.supplier)||void 0===t?void 0:t.photo,is_business:!0}),(0,Re.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,Re.jsx)("div",{className:`${S.ellipsis}`,children:null===(o=e.supplier)||void 0===o?void 0:o.name}),e.deleted?(0,Re.jsx)(C.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]})},headerClassName:"shadowRight",bodyClassName:"shadowRight",style:{minWidth:"224px"},frozen:!0,sortable:!0}),(0,Re.jsx)(E.V,{field:"invoice_reference",header:"Reference",body:e=>(0,Re.jsx)("div",{className:"ellipsis-width",title:e.invoice_reference,style:{maxWidth:"250px",color:"#344054"},children:e.invoice_reference}),style:{minWidth:"94px"}}),(0,Re.jsx)(E.V,{field:"file",header:"File",body:e=>{var s,t,o;if(!e.file)return"";const l=e.paid,i=e.file?null===(s=e.file.split("."))||void 0===s||null===(t=s[(null===(o=e.file.split("."))||void 0===o?void 0:o.length)-1])||void 0===t?void 0:t.toLowerCase():"";return e.file?(0,Re.jsx)(x.N_,{to:e.file,target:"_blank",children:(0,Re.jsx)(Be,{extension:i,color:l?"#98A2B3":"#FF0000",size:16})}):void 0},style:{minWidth:"60px",textAlign:"center",maxWidth:"60px",width:"60px"}}),(0,Re.jsx)(E.V,{field:"created",header:"Due Date",body:e=>(0,Re.jsx)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",style:{color:"#667085",fontSize:"12px"},children:ds(e.created)}),style:{minWidth:"56px"},className:"text-center"}),(0,Re.jsx)(E.V,{field:"jobsdone",header:"Total",body:e=>(0,Re.jsx)("div",{className:`d-flex align-items-center justify-content-end show-on-hover ${S.fontStanderdSize}`,children:(0,Re.jsxs)("div",{className:` ${e.paid?S["paid-true"]:S["paid-false"]}`,children:["$",(0,De.m)(e.total)]})}),style:{minWidth:"56px",textAlign:"end"}}),(0,Re.jsx)(E.V,{field:"type",header:"Interval/Project",body:e=>e.order?(0,Re.jsx)("span",{style:{color:"#344054",fontSize:"14px"},children:(null===e||void 0===e?void 0:e.order.number)||"-"}):(0,Re.jsx)("span",{className:"text-capitalize",style:{color:"#344054",fontSize:"14px"},children:e.type}),style:{minWidth:"123px",textAlign:"left"}}),(0,Re.jsx)(E.V,{field:"account_code.code",header:"Account Code",body:e=>{var s,t,o;return(0,Re.jsxs)("div",{className:`d-flex align-items-center justify-content-start show-on-hover ${S.accountCode}`,children:[(null===(s=e.account_code)||void 0===s?void 0:s.code)&&(0,Re.jsxs)("span",{children:[null===(t=e.account_code)||void 0===t?void 0:t.code,": "]}),null===(o=e.account_code)||void 0===o?void 0:o.name]})},style:{minWidth:"114px",textAlign:"left"},sortable:!0}),(0,Re.jsx)(E.V,{field:"total_requests",header:"Xero/Myob",body:e=>(0,Re.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:"in_progress"===(null===e||void 0===e?void 0:e.xero_status)?(0,Re.jsx)("span",{style:{color:"#158ECC",fontSize:"12px"},className:S.shakeText,children:"xero"}):"completed"===(null===e||void 0===e?void 0:e.xero_status)?(0,Re.jsx)("span",{style:{color:"#158ECC",fontSize:"12px"},children:"xero"}):(0,Re.jsx)("span",{})}),style:{minWidth:"89px",textAlign:"center"}}),(0,Re.jsx)(E.V,{field:"paid",header:"Status",body:e=>e.paid?(0,Re.jsxs)(N.$,{onClick:()=>ee({data:e,show:!0}),className:S.paidButton,style:{height:"36px",width:"97px"},children:["Paid ",(0,Re.jsx)(n.A,{color:"#17B26A",size:16})]}):(0,Re.jsxs)(N.$,{onClick:()=>ee({data:e,show:!0}),className:S.notPaidButton,style:{height:"36px",width:"97px"},children:["Not Paid ",(0,Re.jsx)(j.A,{color:"#F04438",size:16})," "]}),style:{minWidth:"130px",maxWidth:"130px",width:"130px"},bodyStyle:{color:"#667085"},bodyClassName:"text-center",headerClassName:"text-center"}),(0,z._)(p,D.J.EXPENSE.DELETE)&&(0,Re.jsx)(E.V,{header:"Actions",body:e=>{const s=(0,o.useRef)(null),[t,n]=(0,o.useState)(!1),a=(0,A.k)(t,n);return(0,Re.jsxs)(o.Fragment,{children:[(0,Re.jsx)(_.A,{size:24,color:"#667085",className:"cursor-pointer",ref:s,...a}),(0,Re.jsx)(w.k,{state:t?"open":"closed",anchorRef:s,onClose:()=>n(!1),className:"threeDots",menuStyle:{padding:"4px",width:"241px",textAlign:"left"},children:(0,Re.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-2 hover-greay px-2 py-2",onClick:()=>{n(!1),T((s=>s.filter((s=>s.id!==e.id)))),l((e=>e-1)),i((s=>s-e.total)),$.current=setTimeout((()=>{le.mutate(e.id)}),5e3),g.oR.custom((s=>(0,Re.jsxs)("div",{className:S.customToast,children:[(0,Re.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100 mb-3",children:[(0,Re.jsx)("div",{className:S.outerToastIcon,children:(0,Re.jsx)("div",{className:S.toastIcon,children:(0,Re.jsx)(f.A,{color:"#DC6803",size:20})})}),(0,Re.jsx)(N.$,{className:"close-button border-0",onClick:()=>g.oR.dismiss(s),children:(0,Re.jsx)(b.A,{size:20,color:"#344054"})})]}),(0,Re.jsxs)("div",{className:"ps-2",children:[(0,Re.jsx)("p",{className:S.toastTitle,children:"Expense has been deleted"}),(0,Re.jsx)("p",{className:S.toastMessage,children:"You can undo this action within a few seconds."}),(0,Re.jsx)(N.$,{className:"text-button ps-0",onClick:()=>{var t;clearTimeout($.current),null===(t=le.reset)||void 0===t||t.call(le),g.oR.success("Expense has been restored"),g.oR.dismiss(s),T((s=>{const t=M.findIndex((s=>s.id===e.id));return[...s.slice(0,t),e,...s.slice(t)]})),l((e=>e+1)),i((s=>s+e.total))},children:"Undo action"})]})]})),{position:"bottom-right"})},children:[(0,Re.jsx)(y.A,{color:"#B42318",size:20}),(0,Re.jsx)("span",{style:{color:"#B42318",fontSize:"16px",fontWeight:500},children:"Delete expense"}),(null===le||void 0===le?void 0:le.variables)===e.id?(0,Re.jsx)(m.p,{style:{width:"20px",height:"20px"}}):""]})})]})},style:{minWidth:"75px",maxWidth:"75px",width:"75px",textAlign:"center"},bodyStyle:{color:"#667085"}})]}),(0,Re.jsx)(Xe,{id:null===q||void 0===q?void 0:q.id,name:null===q||void 0===q?void 0:q.name,visible:Q,setVisible:Z,setEditData:K,setRefetch:h},null===q||void 0===q?void 0:q.id),(0,Re.jsx)(as,{showDialog:G,setShowDialog:ee,setRefetch:h})]})})),rs=cs;var xs=t(62284);const us=()=>{const e=(0,o.useRef)(null),s=(0,o.useRef)(null),[t]=(0,x.ok)(),j=t.get("isShowUnpaid"),[f,b]=(0,o.useState)(0),[_,y]=(0,o.useState)(0),[A,w]=(0,o.useState)(!1),[N,E]=(0,o.useState)(!1),[F,C]=(0,o.useState)(!!j),[k,B]=(0,o.useState)(null),[D,z,$]=(0,p.d7)("",400),P=(0,u.n)({mutationFn:e=>(0,R.a_)(e),onSuccess:()=>{E((e=>!e)),B(null),g.oR.success("Expense successfully sent to Xero!")},onError:e=>{console.log("error: ",e),g.oR.error("Failed to send the expense to xero. Please try again.")}}),M=(0,u.n)({mutationFn:e=>(0,R.D3)(e),onSuccess:()=>{E((e=>!e)),B(null),g.oR.success("Expenses have been successfully marked as paid.")},onError:e=>{console.log("error: ",e),g.oR.error("Failed to mark the expenses as paid. Please try again.")}}),T=(0,u.n)({mutationFn:e=>(0,R.ik)(e),onSuccess:()=>{E((e=>!e)),B(null),g.oR.success("Expenses have been successfully marked as unpaid.")},onError:e=>{console.log("error: ",e),g.oR.error("Failed to mark the expenses as unpaid. Please try again.")}});return(0,Re.jsxs)("div",{className:"peoples-page",children:[(0,Re.jsx)(r.mg,{children:(0,Re.jsx)("title",{children:"MeMate - Expenses"})}),(0,Re.jsxs)("div",{className:`topbar ${null!==k&&void 0!==k&&k.length?S.active:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,Re.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==k&&void 0!==k&&k.length?(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsxs)("h6",{className:S.selectedCount,children:["Selected: ",null===k||void 0===k?void 0:k.length]}),(0,Re.jsxs)("div",{className:"filtered-box d-flex align-items-center gap-2",children:[(0,Re.jsxs)("button",{className:`danger-outline-button ${S.actionButton}`,onClick:()=>{const e=k.map((e=>e.id));T.mutate({ids:e})},disabled:null===T||void 0===T?void 0:T.isPending,children:["Mark as Unpaid ",null!==T&&void 0!==T&&T.isPending?(0,Re.jsx)(m.p,{style:{width:"20px",height:"20px"}}):(0,Re.jsx)(i.A,{color:"#B42318",size:20})," "]}),(0,Re.jsxs)("button",{className:`success-outline-button ${S.actionButton}`,onClick:()=>{const e=k.map((e=>e.id));M.mutate({ids:e})},disabled:null===M||void 0===M?void 0:M.isPending,children:["Mark as Paid ",null!==M&&void 0!==M&&M.isPending?(0,Re.jsx)(m.p,{style:{width:"20px",height:"20px"}}):(0,Re.jsx)(n.A,{color:"#067647",size:20})," "]}),(0,Re.jsxs)("button",{className:`outline-button ${S.actionButton}`,onClick:()=>{const e=k.map((e=>e.id));P.mutate({ids:e})},disabled:P.isPending,children:["Send to Xero/MYOB",P.isPending?(0,Re.jsx)(m.p,{style:{width:"20px",height:"20px"}}):(0,Re.jsx)(a.A,{color:"#1D2939",size:20})]}),(0,Re.jsx)("button",{className:`${S.filterBox}`,onClick:()=>{return s=!0,void(e.current?e.current.exportCSV({selectionOnly:s}):console.error("DataTable ref is null"));var s},children:(0,Re.jsx)(d.A,{})})]})]}):(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsxs)("div",{className:"filtered-box",children:[(0,Re.jsx)("button",{className:`${S.filterBox}`,children:(0,Re.jsx)(c.A,{size:20})}),(0,Re.jsx)(v.b,{model:[],className:(0,h.A)(S.menu),popup:!0,ref:s,breakpoint:"767px"})]}),(0,Re.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,Re.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,Re.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,Re.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,Re.jsx)("input",{type:"text",placeholder:"Search",value:D,onChange:e=>$(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),!(null!==k&&void 0!==k&&k.length)&&(0,Re.jsxs)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[(0,Re.jsx)("h1",{className:"title p-0",style:{marginRight:"16px"},children:"Expenses"}),(0,Re.jsx)(l.A,{onClick:()=>w(!0),className:`${S.newButton}`,children:"New"})]}),(0,Re.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,Re.jsx)(l.A,{className:F?S.unpaidMoneyButton:S.allMoneyButton,onClick:()=>{C(!F),"true"===j&&F&&window.history.pushState({},"","/expenses")},children:"Unpaid"}),F&&(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)("h1",{className:`${S.total} mb-0`,children:"Total"}),(0,Re.jsxs)("div",{className:`${S.totalCount}`,children:[f," Expenses"]}),(0,Re.jsxs)("h1",{className:S.totalMoney,children:["$",(0,De.m)(_||0)]})]})]})]}),(0,Re.jsx)(rs,{ref:e,searchValue:z,setTotal:b,setTotalMoney:y,selected:k,setSelected:B,isShowDeleted:F,refetch:N,setRefetch:E}),(0,Re.jsx)(xs.A,{visible:A,setVisible:w,setRefetch:E})]})}}}]);
//# sourceMappingURL=977.f502b85e.chunk.js.map