"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[4908],{24908:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(65043),n=s(87201),i=(s(61234),s(70579));const r=5;function o(e){let{organizationId:t=r}=e;const[s,o]=(0,a.useState)(String(t||r)),[c,d]=(0,a.useState)([]),[l,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),u=async e=>{p(!0),m("");try{const t=await(0,n.sk)(e),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.results)||[];d(s)}catch(t){m(t.message||"Failed to load forms")}finally{p(!1)}};(0,a.useEffect)((()=>{u(s)}),[]);return(0,i.jsx)("div",{className:"mf-builder",children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("header",{children:(0,i.jsx)("h1",{children:"Forms"})}),(0,i.jsx)("div",{className:"editor-actions",style:{gap:12},children:(0,i.jsxs)("div",{className:"form-field",style:{display:"flex",alignItems:"center",gap:8,margin:0},children:[(0,i.jsx)("label",{htmlFor:"org-id",style:{margin:0},children:"Organization ID"}),(0,i.jsx)("input",{id:"org-id",value:s,onChange:e=>o(e.target.value),style:{width:120}}),(0,i.jsx)("button",{className:"btn",onClick:()=>u(s),children:"Load"}),(0,i.jsx)("button",{className:"btn",onClick:()=>u(s),children:"Reload"}),(0,i.jsx)("a",{className:"btn btn-primary",href:"/enquiries/form-builder/new",children:"New Form"})]})}),l&&(0,i.jsx)("p",{children:"Loading\u2026"}),h&&(0,i.jsx)("p",{className:"error-message",children:h}),!l&&!h&&(0,i.jsx)("div",{className:"table-wrap",style:{overflowX:"auto",marginTop:12},children:(0,i.jsxs)("table",{className:"mf-table",style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"ID"}),(0,i.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Form"}),(0,i.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Domain"}),(0,i.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Created At"}),(0,i.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Inquiries"}),(0,i.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Actions"})]})}),(0,i.jsxs)("tbody",{children:[0===c.length&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:6,style:{padding:"12px"},children:"No forms found for this organization."})}),c.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"8px 10px"},children:e.id}),(0,i.jsx)("td",{style:{padding:"8px 10px"},children:e.title||"(untitled)"}),(0,i.jsx)("td",{style:{padding:"8px 10px"},children:e.domain||"-"}),(0,i.jsx)("td",{style:{padding:"8px 10px"},children:e.created?new Date(e.created).toLocaleString():"-"}),(0,i.jsx)("td",{style:{padding:"8px 10px"},children:e.inquiries_count||0}),(0,i.jsxs)("td",{style:{padding:"8px 10px",display:"flex",gap:8},children:[(0,i.jsx)("button",{className:"btn btn-secondary",onClick:()=>(async e=>{const t=`<script src="https://app.memate.com.au/astatic/inquiries/embed.js" data-form-id="${e}"><\/script>`;try{await navigator.clipboard.writeText(t),alert("Embed code copied to clipboard")}catch(s){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand&&document.execCommand("copy"),document.body.removeChild(e),alert("Embed code copied to clipboard")}})(e.id),children:"Copy Embed"}),(0,i.jsx)("a",{className:"btn btn-secondary",href:`/enquiries/form-builder/new?id=${e.id}`,children:"Edit"}),(0,i.jsx)("a",{className:"btn btn-secondary",href:`/enquiries/form-builder/inquiries?id=${e.id}`,children:"Inquiries"}),(0,i.jsx)("button",{className:"btn",style:{backgroundColor:"#f87171",color:"white"},onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this form?"))try{await(0,n.i6)(e),alert("Form deleted successfully"),u(s)}catch(t){alert(t.message||"Failed to delete form")}})(e.id),children:"Delete"})]})]},e.id)))]})]})})]})})}},61234:()=>{},87201:(e,t,s)=>{s.d(t,{Jy:()=>r,Mb:()=>c,bJ:()=>n,i6:()=>d,lI:()=>o,sk:()=>i});const a="https://app.memate.com.au/api/v1/inquiries/form/";async function n(e){const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text().catch((()=>""));let a=`API ${t.status}: ${e||t.statusText}`;try{const t=JSON.parse(e);if(t&&"object"===typeof t){const e=[];for(const[s,a]of Object.entries(t)){const t=s.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),n=Array.isArray(a)?a:[a];e.push(`${t}: ${n.join(", ")}`)}e.length>0&&(a=e.join("\n"))}}catch(s){}throw new Error(a)}return t.json()}async function i(e){const t=`https://app.memate.com.au/api/v1/inquiries/forms/?organization=${encodeURIComponent(e)}`,s=await fetch(t);if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return s.json()}async function r(e){const t=`https://app.memate.com.au/api/v1/inquiries/form/${e}/`,s=await fetch(t);if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return s.json()}async function o(e,t){const s=`https://app.memate.com.au/api/v1/inquiries/form/${e}/update/`,a=await fetch(s,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.text().catch((()=>""));let t=`API ${a.status}: ${e||a.statusText}`;try{const s=JSON.parse(e);if(s&&"object"===typeof s){const e=[];for(const[t,a]of Object.entries(s)){const s=t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),n=Array.isArray(a)?a:[a];e.push(`${s}: ${n.join(", ")}`)}e.length>0&&(t=e.join("\n"))}}catch(n){}throw new Error(t)}return a.json()}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("formId is required");const s=`https://app.memate.com.au/api/v1/inquiries/form/${encodeURIComponent(e)}/submissions/`,a=new URLSearchParams;t.page&&a.set("page",t.page),t.page_size&&a.set("page_size",t.page_size),null!=t.status&&a.set("status",t.status),t.assigned_to&&a.set("assigned_to",t.assigned_to),t.search&&a.set("search",t.search),t.ordering&&a.set("ordering",t.ordering);const n=a.toString()?`${s}?${a.toString()}`:s,i=await fetch(n);if(!i.ok){const e=await i.text().catch((()=>""));throw new Error(`API ${i.status}: ${e||i.statusText}`)}return i.json()}async function d(e){const t=`https://app.memate.com.au/api/v1/inquiries/form/${e}/delete/`,s=await fetch(t,{method:"DELETE"});if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return!0}}}]);
//# sourceMappingURL=4908.8ef1ab6e.chunk.js.map