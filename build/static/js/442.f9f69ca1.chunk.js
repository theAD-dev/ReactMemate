"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[442],{10442:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var s=n(65043),r=n(73898),o=n(49367),a=n(24858),i=n(35475),c=n(18403),l=n(72018),d=n(9642),u=n(64824),m=n(55797),h=n(88060),p=n(80899),y=n(40748),v=n(48417),g=n(62924),f=n(27307),x=n(70579);const j=p.Ik().shape({code:p.Yj().required("Code is required")});const b=function(){const{trialHeight:e}=(0,v.$)(),[t,n]=(0,s.useState)(null),[p,b]=(0,s.useState)(!1),[N,w]=(0,s.useState)([]),_=(0,g.PV)(),E=(0,g.Od)(),{control:P,handleSubmit:S,setValue:A,formState:{errors:C}}=(0,a.mN)({resolver:(0,c.t)(j)}),I=()=>{b(!1),A("code",""),n(null)};(0,s.useEffect)((()=>{if(null!==_&&void 0!==_&&_.data){const e=null===_||void 0===_?void 0:_.data.flatMap((e=>e.services.map((t=>({...t,industryId:e.id,industryName:e.name,industryIcon:e.icon})))));w(e)}}),[null===_||void 0===_?void 0:_.data]);const{mutate:T,isPending:O}=(0,f.mC)(),V=(0,x.jsx)("div",{className:`${y.A.modalHeader}`,children:(0,x.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,x.jsx)("div",{className:y.A.circledesignstyle,children:(0,x.jsx)("div",{className:y.A.out,children:(0,x.jsx)(r.A,{size:24,color:"#17B26A",className:"mb-3"})})}),(0,x.jsx)("span",{className:`white-space-nowrap ${y.A.headerTitle}`,children:"Edit Code"})]})});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.mg,{children:(0,x.jsx)("title",{children:"MeMate - Expenses Account"})}),(0,x.jsxs)("div",{className:"headSticky",children:[(0,x.jsx)("h1",{children:"Accounting"}),(0,x.jsx)("div",{className:"contentMenuTab",children:(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:(0,x.jsx)(i.N_,{to:"/settings/accounting/department-turnover-plan",children:"Department Turnover Plan"})}),(0,x.jsx)("li",{className:"menuActive",children:(0,x.jsx)(i.N_,{to:"/settings/accounting/industry-service",children:"Supplier Categories"})}),(0,x.jsx)("li",{children:(0,x.jsx)(i.N_,{to:"/settings/accounting/account-code",children:"Account Codes"})})]})})]}),(0,x.jsx)("div",{className:"content_wrap_main w-100",style:{paddingBottom:`${e}px`},children:(0,x.jsx)("div",{className:"content_wrapper w-100",children:(0,x.jsxs)("div",{className:"listwrapper",children:[(0,x.jsx)("div",{className:"topHeadStyle pb-3",children:(0,x.jsx)("h2",{children:"Supplier Categories"})}),(0,x.jsxs)(u.b,{className:"w-100",showGridlines:!0,rowGroupMode:"rowspan",groupRowsBy:"industryName",value:N||[],tableStyle:{minWidth:"100%",border:"1px solid #f2f2f2"},children:[(0,x.jsx)(d.V,{header:"#",body:(e,t)=>t.rowIndex+1}),(0,x.jsx)(d.V,{field:"industryName",header:"Industry"}),(0,x.jsx)(d.V,{field:"name",header:"Service"}),(0,x.jsx)(d.V,{field:"description",header:"Description"}),(0,x.jsx)(d.V,{field:"code",header:"Code",body:e=>(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-center show-on-hover gap-3",children:[(0,x.jsx)("span",{children:e.code}),(0,x.jsx)(l.$,{label:"Edit",onClick:()=>(e=>{n(e),A("code",e.code),b(!0)})(e),className:"primary-text-button ms-3 show-on-hover-element not-show-checked",text:!0})]})})]}),(0,x.jsx)(m.l,{visible:p,modal:!0,header:V,className:`${y.A.modal} custom-modal`,onHide:()=>b(!1),children:(0,x.jsxs)("form",{onSubmit:S((e=>{T({id:null===t||void 0===t?void 0:t.id,data:{code:e.code}},{onSuccess:()=>{I(),_.refetch()}})})),children:[(0,x.jsxs)("div",{className:"d-flex flex-column mb-4",children:[(0,x.jsx)("h6",{className:"mb-3",style:{fontSize:"16px",color:"#1D2939",fontWeight:600},children:null===t||void 0===t?void 0:t.name}),(0,x.jsx)("p",{className:"font-14 mb-1",style:{color:"#475467",fontWeight:500},children:"Code"}),(0,x.jsx)(a.xI,{name:"code",control:P,render:e=>{var t;let{field:n}=e;return(0,x.jsx)(h.m,{...n,options:(null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.map((e=>({value:e.code,label:`${e.code} - ${e.name}`}))))||[],onChange:e=>n.onChange(e.value),placeholder:"Select Code",filter:!0,filterInputAutoFocus:!0,scrollHeight:"400px"})}}),C.code&&(0,x.jsx)("small",{className:"p-error",children:C.code.message})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"d-flex justify-content-end gap-2 mt-3",children:[(0,x.jsx)(l.$,{className:"outline-button",onClick:I,children:"Cancel"}),(0,x.jsx)(l.$,{className:"solid-button",style:{minWidth:"132px"},type:"submit",loading:O,children:"Save Details"})]})]})})]})})})]})}},12671:(e,t,n)=>{n.d(t,{IQ:()=>r,IR:()=>a,JP:()=>c,oF:()=>i,rg:()=>l,wx:()=>o,x1:()=>d});var s=n(20701);const r=async()=>(0,s.y)("/settings/accounting/",{method:"GET"}),o=async(e,t)=>{const n=`/settings/accounting/${e}/`,r={method:"PUT",body:t};return(0,s.y)(n,r)},a=async()=>(0,s.y)("/suppliers/industries/",{method:"GET"}),i=async(e,t)=>{const n=`/suppliers/industries/${e}/`,r={method:"PUT",body:t};return(0,s.y)(n,r)},c=async()=>(0,s.y)("/references/xero-codes/",{method:"GET"}),l=async()=>(0,s.y)("/account_codes/",{method:"GET"}),d=async()=>(0,s.y)("/account_codes/sync/",{method:"PUT"})},18403:(e,t,n)=>{n.d(t,{t:()=>c});var s=n(24858);const r=(e,t,n)=>{if(e&&"reportValidity"in e){const r=(0,s.Jt)(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},o=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?r(s.ref,n,e):s.refs&&s.refs.forEach((t=>r(t,n,e)))}},a=(e,t)=>{t.shouldUseNativeValidation&&o(e,t);const n={};for(const r in e){const o=(0,s.Jt)(t.fields,r),a=Object.assign(e[r]||{},{ref:o&&o.ref});if(i(t.names||Object.keys(e),r)){const e=Object.assign({},(0,s.Jt)(n,r));(0,s.hZ)(e,"root",a),(0,s.hZ)(n,r,e)}else(0,s.hZ)(n,r,a)}return n},i=(e,t)=>e.some((e=>e.startsWith(t+".")));function c(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(r,i,c){try{return Promise.resolve(function(s,a){try{var l=(t.context,Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](r,Object.assign({abortEarly:!1},t,{context:i}))).then((function(e){return c.shouldUseNativeValidation&&o({},c),{values:n.raw?r:e,errors:{}}})))}catch(d){return a(d)}return l&&l.then?l.then(void 0,a):l}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:a((t=e,n=!c.shouldUseNativeValidation&&"all"===c.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var r=e[t.path].types,o=r&&r[t.type];e[t.path]=(0,s.Gb)(t.path,n,e,t.type,o?[].concat(o,t.message):t.message)}return e}),{})),c)};var t,n})))}catch(l){return Promise.reject(l)}}}},27307:(e,t,n)=>{n.d(t,{PU:()=>c,mC:()=>i,vi:()=>a});var s=n(47097),r=n(56328),o=n(12671);const a=()=>(0,s.n)({mutationFn:e=>{let{id:t,data:n}=e;return(0,o.wx)(t,n)},onSuccess:()=>{r.oR.success("Accounting target updated successfully")},onError:e=>{console.error("Error updating accounting target:",e),r.oR.error("Failed to update accounting target. Please try again.")}}),i=()=>(0,s.n)({mutationFn:e=>{let{id:t,data:n}=e;return(0,o.oF)(t,n)},onSuccess:()=>{r.oR.success("The supplier category code have been updated successfully.")},onError:e=>{console.error("Error updating supplier category code:",e),r.oR.error("Failed to update supplier category code. Please try again.")}}),c=()=>(0,s.n)({mutationFn:()=>(0,o.x1)(),onSuccess:()=>{r.oR.success("Account codes synced successfully"),window.location.reload()},onError:e=>{console.error("Error syncing account codes:",e),r.oR.error("Failed to sync account codes. Please try again.")}})},40748:(e,t,n)=>{n.d(t,{A:()=>s});const s={modal:"accounting_modal__NAThj",modalHeader:"accounting_modalHeader__hyBfM",headerTitle:"accounting_headerTitle__9luE3",circledesignstyle:"accounting_circledesignstyle__WBgzI",out:"accounting_out__kcA0q",inputBox:"accounting_inputBox__9qwkR",tablePrimeBar:"accounting_tablePrimeBar__MkG2R"}},62924:(e,t,n)=>{n.d(t,{Od:()=>i,PV:()=>a,Xn:()=>o,c2:()=>c});var s=n(28261),r=n(12671);const o=()=>(0,s.I)({queryKey:["accounting-list"],queryFn:r.IQ}),a=()=>(0,s.I)({queryKey:["industry-service-list"],queryFn:r.IR}),i=()=>(0,s.I)({queryKey:["xero-codes-list"],queryFn:r.JP}),c=()=>(0,s.I)({queryKey:["account-code-list"],queryFn:r.rg})},73898:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(65043),r=n(65173),o=n.n(r),a=["color","size","title","className"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i.apply(null,arguments)}var c=(0,s.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,o=e.size,c=void 0===o?"1em":o,l=e.title,d=void 0===l?null:l,u=e.className,m=void 0===u?"":u,h=function(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,a);return s.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:c,height:c,fill:r,className:["bi","bi-pencil-square",m].filter(Boolean).join(" ")},h),d?s.createElement("title",null,d):null,s.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),s.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"}))}));c.propTypes={color:o().string,size:o().oneOfType([o().string,o().number]),title:o().string,className:o().string};const l=c}}]);
//# sourceMappingURL=442.f9f69ca1.chunk.js.map