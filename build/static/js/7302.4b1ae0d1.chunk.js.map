{"version":3,"file":"static/js/7302.4b1ae0d1.chunk.js","mappings":"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","sources":["pages/business/enquiries/forms/inquiries-list.jsx","pages/business/enquiries/form-builder/api.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { listFormSubmissions } from '../form-builder/api';\n\n/**\n * InquiriesList\n * -----------------\n * Shows submissions for a single form (by formId).\n *\n * API expected: GET /api/v1/inquiries/form/:id/submissions/\n * Returns an array of submissions. Each submission may contain a flat map\n * or an array of { name, label, value } items. We defensively extract\n * \"name\", \"email\", \"phone\", and a generic message field.\n *\n * This component is selfâ€‘contained and scoped with a unique root class\n * to avoid CSS collisions with the host app.\n */\nexport default function InquiriesList() {\n  // Try to get formId from query string (?id=123) or route param (/forms/:id)\n  const url = typeof window !== 'undefined' ? new URL(window.location.href) : null;\n  const qsId = url ? url.searchParams.get('id') : null;\n  const pathMatch = url?.pathname.match(/forms\\/(\\d+)/);\n  const initialFormId = pathMatch?.[1] || qsId || '';\n\n  const [formId, setFormId] = useState(initialFormId);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [items, setItems] = useState([]);\n  const [search, setSearch] = useState('');\n  const [activeTab, setActiveTab] = useState('All'); // All | Web | Form | Fb/In (placeholder)\n\n  const loadedForId = React.useRef(new Set());\n\n  useEffect(() => {\n    if (!formId) return;\n    // Prevent double-fetch on mount in StrictMode and repeated ids\n    if (loadedForId.current.has(formId)) return;\n    loadedForId.current.add(formId);\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [formId]);\n\n  async function load() {\n    setError('');\n    setLoading(true);\n    try {\n      const data = await listFormSubmissions(formId);\n      setItems(Array.isArray(data) ? data : (data?.results || []));\n    } catch (e) {\n      setError(e.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Extract common fields from each submission payload\n  function pluck(sub, keys) {\n    if (!sub) return '';\n    // If backend gives array of fields\n    if (Array.isArray(sub.fields)) {\n      const map = {};\n      sub.fields.forEach(f => {\n        const key = (f.name || f.label || '').toLowerCase();\n        map[key] = f.value ?? f.answer ?? '';\n      });\n      for (const k of keys) {\n        const hit = map[k];\n        if (hit) return hit;\n      }\n      // try contains (e.g., \"message\", \"note\")\n      for (const key in map) {\n        if (keys.some(k => key.includes(k))) return map[key];\n      }\n      return '';\n    }\n    // Else if backend gives plain dict\n    const dict = sub.payload || sub.data || sub || {};\n    for (const k of keys) {\n      if (dict[k] != null) return dict[k];\n    }\n    // last resort: first matching contains\n    const first = Object.keys(dict).find(k => keys.some(n => k.toLowerCase().includes(n)));\n    return first ? dict[first] : '';\n  }\n\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    if (!q) return items;\n    return items.filter((s) => {\n      const hay = [\n        pluck(s, ['name', 'full_name']),\n        pluck(s, ['email']),\n        pluck(s, ['phone', 'mobile', 'tel']),\n        pluck(s, ['message', 'note', 'comments'])\n      ].join(' ').toLowerCase();\n      return hay.includes(q);\n    });\n  }, [items, search]);\n\n  return (\n    <div className=\"mf-inquiries-page\">\n      <div className=\"mf-toolbar\">\n        <div className=\"mf-toolbar-left\">\n          <input\n            className=\"mf-input\"\n            placeholder=\"Form ID\"\n            value={formId}\n            onChange={(e) => setFormId(e.target.value)}\n            style={{ width: 120 }}\n          />\n          <button className=\"mf-btn\" onClick={load} disabled={!formId || loading}>Load</button>\n          <button className=\"mf-btn ghost\" onClick={() => setSearch('')}>Reload</button>\n        </div>\n        <div className=\"mf-toolbar-mid\">\n          <input\n            className=\"mf-search\"\n            placeholder=\"Search\"\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n          />\n          <div className=\"mf-tabs\">\n            {['All','Web','Form','Fb/In'].map(t => (\n              <button key={t} className={`mf-tab ${activeTab===t?'active':''}`} onClick={()=>setActiveTab(t)}>{t}</button>\n            ))}\n          </div>\n        </div>\n        <div className=\"mf-toolbar-right\">\n          <button className=\"mf-btn primary\" disabled>New</button>\n          <button className=\"mf-btn ghost\" disabled>Set Up</button>\n        </div>\n      </div>\n\n      {error && <div className=\"mf-error\">{error}</div>}\n\n      <div className=\"mf-table-wrap\">\n        <table className=\"mf-table\">\n          <thead>\n            <tr>\n              <th>Lead Source</th>\n              <th>Name</th>\n              <th>Message</th>\n              <th>Phone</th>\n              <th>Email</th>\n              <th>Assign To</th>\n              <th>Spam</th>\n              <th>No Go</th>\n              <th>Move to Quote</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading && (\n              <tr><td colSpan={9} className=\"mf-empty\">Loadingâ€¦</td></tr>\n            )}\n            {!loading && filtered.length === 0 && (\n              <tr><td colSpan={9} className=\"mf-empty\">No inquiries</td></tr>\n            )}\n            {!loading && filtered.map((s, idx) => (\n              <tr key={s.id || idx}>\n                <td>\n                  <div className=\"mf-cell-lead\">\n                    <span className=\"mf-chip\">{s.source || 'Form'}</span>\n                    <div className=\"mf-subtext\">{formatDate(s.created)}</div>\n                  </div>\n                </td>\n                <td>\n                  <div className=\"mf-cell-name\">\n                    <div className=\"mf-avatar\">{initials(pluck(s,['name','full_name']) || 'U')}</div>\n                    <span>{pluck(s,['name','full_name']) || 'Unknown'}</span>\n                  </div>\n                </td>\n                <td className=\"mf-ellipsis\" title={pluck(s,['message','note','comments'])}>\n                  {pluck(s,['message','note','comments']) || 'â€”'}\n                </td>\n                <td>{formatPhone(pluck(s,['phone','mobile','tel']))}</td>\n                <td className=\"mf-ellipsis\">{pluck(s,['email'])}</td>\n                <td>\n                  <div className=\"mf-cell-name muted\">\n                    <div className=\"mf-avatar small\">{initials((s.assignee_name)||'')}</div>\n                    <span>{s.assignee_name || 'â€”'}</span>\n                  </div>\n                </td>\n                <td className=\"mf-icon-col\">ğŸ§¹</td>\n                <td className=\"mf-icon-col\">ğŸš«</td>\n                <td>\n                  <button className=\"mf-btn small\">Move</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <style>{`\n        .mf-inquiries-page {font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}\n        .mf-toolbar {display:flex; align-items:center; justify-content:space-between; gap:12px; margin:12px 0;}\n        .mf-toolbar-left, .mf-toolbar-right {display:flex; gap:8px; align-items:center;}\n        .mf-toolbar-mid {display:flex; align-items:center; gap:12px; flex:1;}\n        .mf-input {height:36px; border:1px solid #e5e7eb; border-radius:8px; padding:0 10px; background:#fff;}\n        .mf-search {flex:1; height:36px; border:1px solid #e5e7eb; border-radius:18px; padding:0 14px;}\n        .mf-tabs {display:flex; gap:6px;}\n        .mf-tab {height:30px; padding:0 12px; border-radius:16px; border:1px solid #e5e7eb; background:#fff;}\n        .mf-tab.active {background:#eef2ff; border-color:#c7d2fe; color:#3730a3;}\n        .mf-btn {height:32px; padding:0 12px; border-radius:8px; border:1px solid #e5e7eb; background:#fff; cursor:pointer;}\n        .mf-btn.primary {background:#2563eb; color:#fff; border-color:#2563eb;}\n        .mf-btn.ghost {background:transparent;}\n        .mf-btn.small {height:28px; padding:0 10px;}\n        .mf-error {margin:8px 0; color:#b91c1c;}\n        .mf-table-wrap {background:#fff; border:1px solid #e5e7eb; border-radius:12px; overflow:hidden;}\n        table.mf-table {width:100%; border-collapse:separate; border-spacing:0;}\n        .mf-table th {text-align:left; font-weight:600; font-size:12px; color:#6b7280; padding:12px; background:#f9fafb; border-bottom:1px solid #eef2f7;}\n        .mf-table td {padding:14px 12px; border-bottom:1px solid #f3f4f6; vertical-align:middle;}\n        .mf-empty {text-align:center; padding:24px; color:#6b7280;}\n        .mf-cell-lead {display:flex; flex-direction:column; gap:4px;}\n        .mf-chip {display:inline-block; font-size:12px; background:#eef2ff; color:#3730a3; padding:4px 8px; border-radius:999px;}\n        .mf-subtext {font-size:11px; color:#9ca3af;}\n        .mf-cell-name {display:flex; align-items:center; gap:10px;}\n        .mf-cell-name.muted span {color:#6b7280}\n        .mf-avatar {width:28px; height:28px; border-radius:50%; background:#e5e7eb; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:600; color:#374151;}\n        .mf-avatar.small {width:22px; height:22px; font-size:10px;}\n        .mf-ellipsis {max-width:420px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}\n        .mf-icon-col {text-align:center;}\n      `}</style>\n    </div>\n  );\n}\n\nfunction initials(name) {\n  const s = String(name || '').trim();\n  if (!s) return 'â€”';\n  const parts = s.split(/\\s+/).slice(0, 2);\n  return parts.map(p => p[0]?.toUpperCase()).join('');\n}\n\nfunction formatDate(ts) {\n  if (!ts) return '';\n  // backend sometimes uses epoch seconds; sometimes ISO\n  const n = Number(ts);\n  const d = Number.isFinite(n) && n > 1e10 ? new Date(n) : new Date(n * 1000);\n  const valid = isNaN(d.getTime()) ? new Date(ts) : d;\n  if (isNaN(valid.getTime())) return '';\n  return valid.toLocaleDateString(undefined, { day:'2-digit', month:'short', year:'numeric' });\n}\n\nfunction formatPhone(p) { return p || ''; }\n","export const INQUIRY_FORM_API_URL = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\nexport const INQUIRY_FORM_DETAIL_URL = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n\nexport async function saveFormToApi(payload) {\n  const res = await fetch(INQUIRY_FORM_API_URL, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function listFormsByOrganization(orgId) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/forms/`;\n  const url = `${base}?organization=${encodeURIComponent(orgId)}`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function getFormById(id) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n  const url = `${base}${id}/`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function updateFormToApi(id, payload) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n  const url = `${base}${id}/update/`;\n  const res = await fetch(url, {\n    method: 'PATCH',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function listFormSubmissions(formId, params = {}) {\n  if (!formId) throw new Error('formId is required');\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/${encodeURIComponent(formId)}/submissions/`;\n\n  const qs = new URLSearchParams();\n  // Optional filters/pagination if backend supports them\n  if (params.page) qs.set('page', params.page);\n  if (params.page_size) qs.set('page_size', params.page_size);\n  if (params.status != null) qs.set('status', params.status); // e.g., 0,1,2\n  if (params.assigned_to) qs.set('assigned_to', params.assigned_to); // user id/email if supported\n  if (params.search) qs.set('search', params.search);\n  if (params.ordering) qs.set('ordering', params.ordering);\n\n  const url = qs.toString() ? `${base}?${qs.toString()}` : base;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function deleteForm(id) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n  const url = `${base}${id}/delete/`;\n  const res = await fetch(url, { method: 'DELETE' });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return true;\n}"],"names":["InquiriesList","url","window","URL","location","href","qsId","searchParams","get","pathMatch","pathname","match","initialFormId","formId","setFormId","useState","loading","setLoading","error","setError","items","setItems","search","setSearch","activeTab","setActiveTab","loadedForId","React","Set","async","load","data","listFormSubmissions","Array","isArray","results","e","message","pluck","sub","keys","fields","map","forEach","f","_ref","_f$value","key","name","label","toLowerCase","value","answer","k","hit","some","includes","dict","payload","first","Object","find","n","useEffect","current","has","add","filtered","useMemo","q","trim","filter","s","join","_jsxs","className","children","_jsx","placeholder","onChange","target","style","width","onClick","disabled","t","colSpan","length","idx","source","formatDate","created","initials","title","p","assignee_name","id","String","split","slice","_p$","toUpperCase","ts","Number","d","isFinite","Date","valid","isNaN","getTime","toLocaleDateString","undefined","day","month","year","INQUIRY_FORM_API_URL","saveFormToApi","res","fetch","method","headers","body","JSON","stringify","ok","text","catch","Error","status","statusText","json","listFormsByOrganization","orgId","encodeURIComponent","getFormById","updateFormToApi","params","arguments","base","qs","URLSearchParams","page","set","page_size","assigned_to","ordering","toString","deleteForm"],"sourceRoot":""}