"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[6357],{10586:(e,t,s)=>{s.d(t,{$R:()=>r,Bu:()=>a,D3:()=>x,JP:()=>o,Rv:()=>d,Wz:()=>u,a_:()=>p,eY:()=>c,ik:()=>h,md:()=>i});var n=s(31342);const l="https://dev.memate.com.au/api/v1",i=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0;const a=(e-1)*t,r=new URL(`${l}/expenses/`);return r.searchParams.append("limit",t),r.searchParams.append("offset",a),s&&r.searchParams.append("search",s),i&&r.searchParams.append("ordering",i),o&&r.searchParams.append("status","not_paid"),(0,n.f)(r.toString(),{method:"GET"})},o=async()=>{const e=new URL(`${l}/references/xero-codes/`);return(0,n.f)(e.toString(),{method:"GET"})},a=async()=>{const e=new URL(`${l}/references/projects/`);return(0,n.f)(e.toString(),{method:"GET"})},r=async e=>{const t=new URL(`${l}${`/expenses/update/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},d=async e=>{const t={method:"POST",body:e},s=new URL(`${l}/expenses/new/`);return(0,n.f)(s.toString(),t)},c=async(e,t)=>{const s={method:"PUT",body:t},i=new URL(`${l}${`/expenses/update/${e}/`}`);return(0,n.f)(i.toString(),s)},x=async e=>{const t={method:"POST",body:e},s=new URL(`${l}/expenses/paid/`);return(0,n.f)(s.toString(),t)},h=async e=>{const t={method:"POST",body:e},s=new URL(`${l}/expenses/unpaid/`);return(0,n.f)(s.toString(),t)},p=async e=>{const t={method:"PUT",body:e},s=new URL(`${l}/expenses/to-xero/`);return(0,n.f)(s.toString(),t)},u=async e=>{const t=new URL(`${l}${`/expenses/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})}},97810:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var n=s(65043),l=s(14282),i=s(75329),o=s(39759),a=s(49367),r=s(2028),d=s(22927),c=s(58387),x=s(72018),h=s(9642),p=s(64824);const u={active:"task_active__XHjXL",selectedCount:"task_selectedCount__KCjbh",filterBox:"task_filterBox__Vl8TJ",newButton:"task_newButton__FgzVj",total:"task_total__iv2al",totalCount:"task_totalCount__g7jIX",shadowRight:"task_shadowRight__POYJ0",clientName:"task_clientName__bfmFM",complete:"task_complete__zEIDq",pending:"task_pending__4JfNO",projectImg:"task_projectImg__SdMAS",projectText:"task_projectText__2Lg5C",projectNumber:"task_projectNumber__bQcj7"};var m=s(79106),j=s(48417),g=s(58027),v=s(27734),f=s(99868),y=s(33183),b=s(93747),w=s(47097),N=s(61424),_=s(65975),A=s(72796),C=s(42265),k=s(42052),S=s(47994),T=s(51038),B=s(95192),$=s(8129),F=s(73722),R=s(56328),D=s(10586),I=s(12532),L=s(84678),E=s(35470),P=s(70579);const z=e=>{if(!e)return null;return new Date(1e3*+e)},U=e=>{var t,s,i,o,a;let{show:r,setShow:d,refetch:c,taskId:x,setTaskId:h,defaultValue:p}=e;const u=(0,n.useRef)(null),[j,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(""),[_,C]=(0,n.useState)(""),[k,U]=(0,n.useState)(""),[V,M]=(0,n.useState)(null),[q,O]=(0,n.useState)(null),[H,G]=(0,n.useState)({taskTitle:!1,description:!1,project:!1,user:!1,date:!1});(0,n.useEffect)((()=>{var e,t;x&&p&&(y(null===p||void 0===p?void 0:p.title),C(null===p||void 0===p?void 0:p.description),U(null===p||void 0===p||null===(e=p.project)||void 0===e?void 0:e.id),M(null===p||void 0===p||null===(t=p.user)||void 0===t?void 0:t.id),O({startDate:z(null===p||void 0===p?void 0:p.from_date),endDate:z(null===p||void 0===p?void 0:p.to_date)}))}),[x,p]);const W=(0,b.I)({queryKey:["getProjectsList"],queryFn:D.Bu}),Z=(0,b.I)({queryKey:["getUserList"],queryFn:m.aU}),J=(0,w.n)({mutationFn:e=>x?(0,m.lC)(x,e):(0,m.Af)(e),onSuccess:()=>{c(),d(!1),y(""),C(""),U(""),M(null),O(null),v(!1),G({taskTitle:!1,description:!1,project:!1,user:!1,date:!1}),x&&h(null),R.oR.success(`Task ${x?"updated":"created"} successfully`)},onError:e=>{console.error(`Error ${x?"updating":"creating"} task:`,e),R.oR.error(`Failed to ${x?"update":"create"} client. Please try again.`)}});(0,n.useEffect)((()=>{if(j){G({taskTitle:!f,description:!_,project:!k,user:!V,date:!q})}}),[f,_,k,V,q,j]);const K=(0,w.n)({mutationFn:e=>(0,A.mM)(x),onSuccess:()=>{console.log("Delete success"),d(!1),c()},onError:e=>{console.error("Error creating task:",e)}});return(0,P.jsxs)(N.A,{show:r,centered:!0,onHide:()=>d(!1),className:"task-form",children:[(0,P.jsx)(N.A.Header,{closeButton:!0,children:(0,P.jsxs)(N.A.Title,{children:[(0,P.jsx)("img",{src:x?I.A:L.A,alt:"task-details",style:{width:"48px",height:"48px"}}),(0,P.jsxs)("span",{className:"modal-task-title",children:[x?"Edit":"New"," Task"]})]})}),(0,P.jsxs)(N.A.Body,{style:{background:"#f9fafb"},children:[(0,P.jsxs)(F.A.Group,{className:"mb-3",children:[(0,P.jsx)(F.A.Label,{children:"Task Title"}),(0,P.jsxs)(S.A,{children:[(0,P.jsx)(F.A.Control,{required:!0,type:"text",placeholder:"Enter task title",value:f,onChange:e=>y(e.target.value)}),(0,P.jsx)(S.A.Text,{children:(0,P.jsx)(T.A,{})})]}),H.taskTitle&&(0,P.jsx)(F.A.Text,{className:"text-danger",children:"Task title is required"})]}),(0,P.jsxs)(F.A.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,P.jsx)(F.A.Label,{children:"Description"}),(0,P.jsx)(F.A.Control,{as:"textarea",rows:3,placeholder:"Enter a description...",value:_,onChange:e=>C(e.target.value),required:!0}),H.description&&(0,P.jsx)(F.A.Text,{className:"text-danger",children:"Description is required"})]}),(0,P.jsxs)(F.A.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,P.jsx)(F.A.Label,{children:"Project Task"}),(0,P.jsx)($.m,{options:(null===W||void 0===W||null===(t=W.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:`${e.number}: ${e.reference}`}))))||[],onChange:e=>{U(e.value),console.log("e.value: ",e.value)},className:"w-100 outline-none",style:{height:"46px"},value:k,loading:null===W||void 0===W?void 0:W.isFetching,placeholder:"Select project",filter:!0}),H.project&&(0,P.jsx)(F.A.Text,{className:"text-danger",children:"Project task is required"})]})]}),(0,P.jsxs)("div",{className:"d-flex align-items-center border-top px-3 py-2",children:[(0,P.jsxs)("div",{className:"d-flex align-items-center gap-4",children:[!V&&(0,P.jsx)(B.A,{color:null!==(s=u.current)&&void 0!==s&&null!==(i=s.panel)&&void 0!==i&&null!==(o=i.element)&&void 0!==o&&o.offsetParent?"#1AB2FF":"#475467",size:22,style:{position:"relative",left:"10px",zIndex:1},onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.show()},className:"me-3 cursor-pointer"}),(0,P.jsx)($.m,{ref:u,options:(null===Z||void 0===Z||null===(a=Z.data)||void 0===a?void 0:a.map((e=>({value:null===e||void 0===e?void 0:e.id,label:(null===e||void 0===e?void 0:e.name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[],onChange:e=>{M(e.value)},valueTemplate:e=>(0,P.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,P.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,P.jsx)(g.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}),itemTemplate:e=>(0,P.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,P.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,P.jsx)(g.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}),className:"outline-none border-0 p-0",style:{width:V?"fit-content":"0px",height:V?"46px":"0px",zIndex:V?"1":"0",position:"relative",left:V?"0px":"-60px",top:V?"0px":"-15px"},value:V,dropdownIcon:(0,P.jsx)(P.Fragment,{}),placeholder:"Select project",filter:!0})]}),(0,P.jsx)(E.A,{dateRange:q,setDateRange:O})]}),(H.user||H.date)&&(0,P.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"16px",padding:"0 30px 8px 30px"},children:[H.user&&(0,P.jsx)(F.A.Text,{className:"text-danger",children:"User is required"}),H.date&&(0,P.jsx)(F.A.Text,{className:"text-danger",children:"Date is required"})]}),(0,P.jsxs)(N.A.Footer,{className:"d-flex justify-content-between",children:[(0,P.jsx)(l.A,{type:"button",className:"delete-button",onClick:()=>{K.mutate()},children:K.isPending?"Loading...":"Delete Task"}),(0,P.jsx)(l.A,{type:"button",className:"save-button",onClick:()=>{v(!0);const e={taskTitle:!f,description:!_,project:!k,user:!V,date:!q};G(e),e.taskTitle||e.description||e.user||e.date||J.mutate({title:f,description:_,project:k,user:V,from_date:q.startDate,to_date:q.endDate})},children:J.isPending?"Loading...":(x?"Update":"Create")+" Task"})]})]})},V=()=>(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary",size:"lg"})}),(0,P.jsx)(_.A,{as:"p",animation:"wave",children:(0,P.jsx)(_.A,{xs:12,bg:"secondary",style:{height:"80px"},size:"lg"})}),(0,P.jsx)("table",{className:"task-deatils-table w-100",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})}),(0,P.jsx)("td",{style:{paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})})]}),(0,P.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})}),(0,P.jsx)("td",{style:{paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})})]}),(0,P.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})}),(0,P.jsx)("td",{style:{paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})})]}),(0,P.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})}),(0,P.jsx)("td",{style:{paddingBottom:"12px"},children:(0,P.jsx)(_.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,P.jsx)(_.A,{xs:12,bg:"secondary"})})})]})]})})]}),M=e=>{var t,s;let{view:i,setView:o,taskId:a,setTaskId:r,reInitialize:d}=e;const[c,x]=(0,n.useState)(!1),{isFetching:h,data:p}=(0,b.I)({queryKey:["taskId",a],queryFn:()=>(0,m.gg)(a),enabled:!!a,retry:1,cacheTime:0}),u=(0,w.n)({mutationFn:e=>(0,A._x)(a,e),onSuccess:()=>{j(),r(null),d()},onError:e=>{console.error("Error updating task:",e)}}),j=()=>o(!1),g=e=>{var t;if(!e)return"-";return null===(t=new Date(1e3*+e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))||void 0===t?void 0:t.replace(/,/g,"")};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(N.A,{show:i,centered:!0,onHide:j,children:[(0,P.jsx)(N.A.Header,{closeButton:!0,children:(0,P.jsxs)(N.A.Title,{children:[(0,P.jsx)("img",{src:k.A,alt:"task-details",style:{width:"48px",height:"48px"}}),(0,P.jsx)("span",{className:"modal-task-title",children:"Task Details"})]})}),(0,P.jsx)(N.A.Body,{children:h?(0,P.jsx)(V,{}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{className:"task-title",children:(null===p||void 0===p?void 0:p.title)||"-"}),(0,P.jsx)("p",{className:"task-description",children:(null===p||void 0===p?void 0:p.description)||"-"}),(0,P.jsx)("table",{className:"task-deatils-table",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"Project Task"}),(0,P.jsx)("td",{style:{paddingBottom:"12px"},children:null!==p&&void 0!==p&&p.project&&p.project.reference?p.project.reference:"-"})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"ID"}),(0,P.jsx)("td",{style:{paddingBottom:"12px"},children:(null===p||void 0===p?void 0:p.number)||"-"})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"Assigned"}),(0,P.jsxs)("td",{style:{paddingBottom:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[(0,P.jsx)("img",{src:null!==p&&void 0!==p&&null!==(t=p.user)&&void 0!==t&&t.has_photo?null===p||void 0===p?void 0:p.user.photo:C.A,alt:"img-assigned",style:{width:"24px",height:"24px",borderRadius:"50%"}}),(0,P.jsx)("span",{children:(null===p||void 0===p||null===(s=p.user)||void 0===s?void 0:s.full_name)||"-"})]})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"Date"}),(0,P.jsxs)("td",{style:{paddingBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,P.jsx)("span",{children:g(null===p||void 0===p?void 0:p.from_date)}),(0,P.jsx)(y.A,{size:20,color:"#475467"}),(0,P.jsx)("span",{children:g(null===p||void 0===p?void 0:p.to_date)})]})]})]})})]})}),h?(0,P.jsxs)(N.A.Footer,{children:[(0,P.jsx)(_.A,{as:"p",animation:"wave",children:(0,P.jsx)(_.A,{xs:12,bg:"secondary",style:{height:"40px",width:"93px",borderRadius:"4px"},size:"lg"})}),(0,P.jsx)(_.A,{as:"p",animation:"wave",children:(0,P.jsx)(_.A,{xs:12,bg:"secondary",style:{height:"40px",width:"93px",borderRadius:"4px"},size:"lg"})})]}):(0,P.jsxs)(N.A.Footer,{children:[(0,P.jsx)(l.A,{className:"edit-button",onClick:function(){j(),x(!0)},children:"Edit Task"}),null!==p&&void 0!==p&&p.finished?(0,P.jsx)(l.A,{className:"incomplete-button",onClick:()=>u.mutate(!1),children:u.isPending?(0,P.jsx)(P.Fragment,{children:"Loading..."}):(0,P.jsxs)(P.Fragment,{children:["Incomplete",(0,P.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,P.jsx)("path",{d:"M20 10.5C20 16.0228 15.5228 20.5 10 20.5C4.47715 20.5 0 16.0228 0 10.5C0 4.97715 4.47715 0.5 10 0.5C15.5228 0.5 20 4.97715 20 10.5ZM15.0379 6.71209C14.6718 6.34597 14.0782 6.34597 13.7121 6.71209C13.7032 6.72093 13.6949 6.73029 13.6872 6.74013L9.34674 12.2709L6.72985 9.65403C6.36373 9.28791 5.77014 9.28791 5.40402 9.65403C5.0379 10.0201 5.0379 10.6137 5.40402 10.9799L8.71208 14.2879C9.0782 14.654 9.67179 14.654 10.0379 14.2879C10.0461 14.2798 10.0538 14.2712 10.061 14.2622L15.0512 8.02434C15.404 7.65727 15.3995 7.07371 15.0379 6.71209Z",fill:"#F04438"})})]})}):(0,P.jsx)(l.A,{className:"complete-button",onClick:()=>u.mutate(!0),children:u.isPending?(0,P.jsx)(P.Fragment,{children:"Loading..."}):(0,P.jsxs)(P.Fragment,{children:["Complete",(0,P.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,P.jsx)("path",{d:"M20 10.5C20 16.0228 15.5228 20.5 10 20.5C4.47715 20.5 0 16.0228 0 10.5C0 4.97715 4.47715 0.5 10 0.5C15.5228 0.5 20 4.97715 20 10.5ZM15.0379 6.71209C14.6718 6.34597 14.0782 6.34597 13.7121 6.71209C13.7032 6.72093 13.6949 6.73029 13.6872 6.74013L9.34674 12.2709L6.72985 9.65403C6.36373 9.28791 5.77014 9.28791 5.40402 9.65403C5.0379 10.0201 5.0379 10.6137 5.40402 10.9799L8.71208 14.2879C9.0782 14.654 9.67179 14.654 10.0379 14.2879C10.0461 14.2798 10.0538 14.2712 10.061 14.2622L15.0512 8.02434C15.404 7.65727 15.3995 7.07371 15.0379 6.71209Z",fill:"#17B26A"})})]})})]})]}),(0,P.jsx)(U,{show:c,setShow:x,taskId:a,setTaskId:r,defaultValue:p,refetch:d})]})},q=e=>{const t=new Date(1e3*e);return`${t.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(t)} ${t.getFullYear()}`},O=(0,n.forwardRef)(((e,t)=>{let{searchValue:s,setTotal:l,selected:i,setSelected:o,refetch:a,setRefetch:r}=e;const{trialHeight:y}=(0,j.$)(),b=(0,n.useRef)(null),[w,N]=(0,n.useState)(!1),[_,A]=(0,n.useState)(null),[C,k]=(0,n.useState)(1),[S,T]=(0,n.useState)([]),[B,$]=(0,n.useState)({sortField:"id",sortOrder:-1}),[F,R]=(0,n.useState)({sortField:"id",sortOrder:-1}),[D,I]=(0,n.useState)(!0),[L,E]=(0,n.useState)(!1);(0,n.useEffect)((()=>{k(1)}),[s,a]),(0,n.useEffect)((()=>{(async()=>{E(!0);let e="";1===(null===F||void 0===F?void 0:F.sortOrder)?e=`${F.sortField}`:-1===(null===F||void 0===F?void 0:F.sortOrder)&&(e=`-${F.sortField}`);const t=await(0,m.U9)(C,25,s,e);var n;(l((()=>(null===t||void 0===t?void 0:t.count)||0)),1===C)?T(t.results):(null===t||void 0===t||null===(n=t.results)||void 0===n?void 0:n.length)>0&&T((e=>{const s=new Set(e.map((e=>e.id))),n=t.results.filter((e=>!s.has(e.id)));return[...e,...n]}));$(F),I(t.count!==S.length),E(!1)})()}),[C,s,F,a]),(0,n.useEffect)((()=>{if(S.length>0&&D){b.current=new IntersectionObserver((e=>{e[0].isIntersecting&&k((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&b.current.observe(e)}return()=>{b.current&&b.current.disconnect()}}),[S,D]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(p.b,{ref:t,value:S,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${y}px)`,className:"border",selection:i,onSelectionChange:e=>o(e.value),loading:L,loadingIcon:v.A,emptyMessage:(0,P.jsx)(f.A,{isDataExist:!!s}),sortField:null===B||void 0===B?void 0:B.sortField,sortOrder:null===B||void 0===B?void 0:B.sortOrder,onSort:e=>{const{sortField:t,sortOrder:s}=e;R({sortField:t,sortOrder:s}),k(1)},rowClassName:e=>null!==e&&void 0!==e&&e.deleted?u.deletedRow:"",children:[(0,P.jsx)(h.V,{selectionMode:"multiple",headerClassName:"ps-4 border-end-0",bodyClassName:"show-on-hover border-end-0 ps-4",headerStyle:{width:"3rem",textAlign:"center"},frozen:!0}),(0,P.jsx)(h.V,{field:"number",header:"Task ID",body:e=>(0,P.jsxs)("div",{className:"d-flex align-items-center justify-content-center show-on-hover",children:[(0,P.jsx)("div",{children:e.number}),(0,P.jsx)(x.$,{label:"Open",onClick:()=>{A(null===e||void 0===e?void 0:e.id),N(!0)},className:"primary-text-button ms-3 show-on-hover-element",text:!0})]}),style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,P.jsx)(h.V,{field:"title",header:"Task Title",style:{minWidth:"150px"},bodyClassName:`${u.shadowRight}`,headerClassName:`${u.shadowRight}`,frozen:!0}),(0,P.jsx)(h.V,{field:"user.full_name",header:"Assigne",body:e=>{var t,s,n,l;const i=`${null===e||void 0===e?void 0:e.user.full_name}`,o=`${null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.alias}`;return(0,P.jsxs)("div",{className:"d-flex align-items-center",children:[(0,P.jsx)("div",{className:`d-flex justify-content-center align-items-center ${u.clientName}`,children:null!==e&&void 0!==e&&null!==(s=e.user)&&void 0!==s&&s.has_photo?(0,P.jsx)(g.A,{has_photo:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.has_photo,photo:null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.photo,is_business:!1}):o}),i]})},style:{minWidth:"208px"}}),(0,P.jsx)(h.V,{field:"finished",header:"Status",body:e=>(0,P.jsx)("div",{className:`${u.time} ${e.finished?u.complete:u.pending}`,children:e.finished?"Complete":"Not Complete"}),style:{minWidth:"120px"}}),(0,P.jsx)(h.V,{field:"project.reference",header:"Project",body:e=>{var t,s;return(0,P.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,P.jsx)("div",{className:(0,c.A)(u.projectImg,"d-flex align-items-center justify-content-center"),children:(0,P.jsx)(d.A,{color:"#475467",size:13})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:(0,c.A)(u.projectText,"mb-0"),children:null===e||void 0===e||null===(t=e.project)||void 0===t?void 0:t.reference}),(0,P.jsx)("h6",{className:(0,c.A)(u.projectNumber,"mb-0"),children:null===e||void 0===e||null===(s=e.project)||void 0===s?void 0:s.number})]})]})},style:{minWidth:"460px"}}),(0,P.jsx)(h.V,{field:"from_date",header:"Start Date",body:e=>q(e.from_date),style:{minWidth:"100px"},sortable:!0}),(0,P.jsx)(h.V,{field:"to_date",header:"Due Date",body:e=>q(e.to_date),style:{minWidth:"100px"},sortable:!0})]}),(0,P.jsx)(M,{view:w,setView:N,taskId:_,setTaskId:A,reInitialize:()=>r((e=>!e))})]})})),H=O,G=()=>{const e=(0,n.useRef)(null),[t,s]=(0,n.useState)(0),[d,c]=(0,n.useState)(!1),[x,h,p]=(0,r.d7)("",400),[m,j]=(0,n.useState)([]),[g,v]=(0,n.useState)(!1);return(0,P.jsxs)("div",{className:"jobs-page",children:[(0,P.jsx)(a.mg,{children:(0,P.jsx)("title",{children:"MeMate - Tasks"})}),(0,P.jsxs)("div",{className:`topbar ${null!==m&&void 0!==m&&m.length?u.active:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,P.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==m&&void 0!==m&&m.length?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("h6",{className:u.selectedCount,children:["Selected: ",null===m||void 0===m?void 0:m.length]}),(0,P.jsx)("div",{className:"filtered-box",children:(0,P.jsx)("button",{className:`${u.filterBox}`,onClick:()=>{return t=!0,void(e.current?e.current.exportCSV({selectionOnly:t}):console.error("DataTable ref is null"));var t},children:(0,P.jsx)(i.A,{})})})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"filtered-box",children:(0,P.jsx)("button",{className:`${u.filterBox}`,onClick:()=>{},children:(0,P.jsx)(o.A,{size:20})})}),(0,P.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,P.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,P.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,P.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,P.jsx)("input",{type:"text",placeholder:"Search",value:x,onChange:e=>p(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),(0,P.jsxs)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[(0,P.jsx)("h1",{className:"title p-0",style:{marginRight:"16px"},children:"Tasks"}),(0,P.jsx)(l.A,{onClick:()=>c(!0),className:`${u.newButton}`,children:"New"})]}),(0,P.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,P.jsx)("h1",{className:`${u.total} mb-0`,children:"Total"}),(0,P.jsxs)("div",{className:`${u.totalCount}`,children:[t," Jobs"]})]})]}),(0,P.jsx)(H,{ref:e,searchValue:h,setTotal:s,selected:m,setSelected:j,refetch:g,setRefetch:v}),(0,P.jsx)(U,{show:d,setShow:c,refetch:()=>v((e=>!e))})]})}},20701:(e,t,s)=>{s.d(t,{y:()=>n});const n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;const l=new URL(`https://dev.memate.com.au/api/v1${e}`),{method:i="GET",headers:o={},body:a}=t,r=localStorage.getItem("access_token"),d=a instanceof FormData,c=new AbortController,x=setTimeout((()=>c.abort()),n),h=new Headers({...d?{}:{"Content-Type":"application/json"},...o});s&&r&&h.set("Authorization",`Bearer ${r}`);const p={method:i,headers:h,body:d?a:a?JSON.stringify(a):null,redirect:"follow",signal:c.signal};try{const e=await fetch(l,p);if(!e.ok){const t=await e.text();throw new Error(`HTTP error! Status: ${e.status} - ${t}`)}return(e.headers.get("Content-Type")||"").includes("application/json")?e.json():e.text()}catch(u){if("AbortError"===u.name)throw console.error("Fetch request timed out."),new Error("Request timeout. Please try again.");throw console.error("Fetch API error:",u),u}finally{clearTimeout(x)}}},57092:(e,t,s)=>{s.d(t,{A:()=>u});var n=s(65043),l=s(52873),i=s(47097),o=s(58387),a=s(72018),r=s(55797),d=s(27932),c=s(56328);const x={form:"support_form__Uc3cv",content:"support_content__zZg6p",field:"support_field__hVjcM","p-button":"support_p-button__gjGEe",circleDesignStyle:"support_circleDesignStyle__rW1wm",out:"support_out__4vM8Q"};var h=s(20701);var p=s(70579);const u=e=>{let{visible:t,setVisible:s}=e;const[u,m]=(0,n.useState)(""),[j,g]=(0,n.useState)(""),v=()=>{s(!1),m(""),g("")},f=(0,i.n)({mutationFn:e=>(async e=>{const t={method:"POST",body:e};return(0,h.y)("/support/",t)})(e),onSuccess:()=>{s(!1),m(""),c.oR.success("Your message has been sent successfully.")},onError:e=>{console.error("Error sending message:",e),c.oR.error("Failed to sent your message. Please try again.")}}),y=(0,p.jsx)("div",{className:"d-flex flex-column",children:(0,p.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,p.jsx)("div",{className:x.circleDesignStyle,children:(0,p.jsx)("div",{className:x.out,children:(0,p.jsx)("div",{className:x.in,children:(0,p.jsx)(l.A,{size:24,color:"#17B26A"})})})}),(0,p.jsx)("div",{className:"d-flex flex-column",children:(0,p.jsx)("span",{style:{color:"#344054",fontSize:"20px",fontWeight:600},children:"How can we help?"})})]})}),b=(0,p.jsxs)("div",{className:"d-flex justify-content-end gap-3 pt-3",children:[(0,p.jsx)(a.$,{label:"Cancel",className:"outline-button",onClick:v}),(0,p.jsx)(a.$,{label:"Submit",loading:f.isPending,disabled:f.isPending,className:"solid-button",onClick:()=>{""!==u.trim()?(g(""),f.mutate({message:u})):g("Please enter message.")}})]});return(0,p.jsx)(r.l,{header:y,footer:b,headerClassName:"border-bottom py-3",contentClassName:(0,o.A)("px-0 border-bottom pb-4",x.content),visible:t,onHide:v,style:{width:"600px"},children:(0,p.jsx)("div",{className:x.form,children:(0,p.jsxs)("div",{className:x.field,children:[(0,p.jsxs)("label",{htmlFor:"description",children:["Message ",(0,p.jsx)("span",{className:"required",children:"*"})]}),(0,p.jsx)(d.Z,{id:"description",placeholder:"Enter a message here...",value:u,onChange:e=>m(e.target.value),rows:5,className:"border outline-none",style:{resize:"none"}}),(0,p.jsx)("small",{className:"error-message",children:j})]})})})}},99868:(e,t,s)=>{s.d(t,{A:()=>m});var n=s(65043),l=s(14282),i=s(38294),o=s(35475),a=s(58387);const r="no-data-found-template_noDataBox__HgeT1",d="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",x="no-data-found-template_supportext__pHg2P";var h=s(20793),p=s(57092),u=s(70579);const m=e=>{let{isDataExist:t=!0}=e;const[s,m]=(0,n.useState)(!1);return(0,u.jsxs)("div",{className:(0,a.A)(r),children:[(0,u.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,u.jsx)("img",{src:h,alt:"no-data"})}),t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:(0,a.A)(d),children:"There is no results"}),(0,u.jsxs)("p",{className:(0,a.A)(c),children:["The user you are looking for doesn't exist. ",(0,u.jsx)("br",{}),"Here are some helpful links:"]}),(0,u.jsx)(o.N_,{to:"/",children:(0,u.jsxs)(l.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,u.jsx)(i.A,{})," Go back"]})}),(0,u.jsx)(o.N_,{onClick:()=>m(!0),to:"#",children:(0,u.jsx)("span",{className:(0,a.A)(x),children:"Support"})})]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h2",{className:(0,a.A)(d),children:"No historical records yet."})}),(0,u.jsx)(p.A,{setVisible:m,visible:s})]})}},20793:(e,t,s)=>{e.exports=s.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"}}]);
//# sourceMappingURL=6357.658a1db9.chunk.js.map