"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[6042],{10586:(e,t,s)=>{s.d(t,{$R:()=>i,Bu:()=>l,D3:()=>m,E4:()=>v,JP:()=>r,Rv:()=>d,Wz:()=>p,a_:()=>h,eY:()=>c,ik:()=>u,md:()=>o,oP:()=>x,sr:()=>f});var n=s(31342);const a="https://app.memate.com.au/api/v1",o=async function(e,t){var s;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const d=(e-1)*t,c=[];c.push(`limit=${t}`),c.push(`offset=${d}`),o&&c.push(`search=${encodeURIComponent(o)}`),r&&c.push(`ordering=${encodeURIComponent(r)}`),l&&c.push("status=not_paid");let m="";var u;null!==i&&void 0!==i&&i.suppliers&&(m=null===i||void 0===i||null===(u=i.suppliers)||void 0===u?void 0:u.map((e=>e.id)).join(","),console.log("Suppliers filter string:",m),m&&c.push(`suppliers=${m}`));let h="";var p;null!==i&&void 0!==i&&i.departments&&(h=null===i||void 0===i||null===(p=i.departments)||void 0===p?void 0:p.map((e=>e.id)).join(","),h&&c.push(`departments=${h}`));let v="";var x;null!==i&&void 0!==i&&i.status&&1===(null===i||void 0===i||null===(s=i.status)||void 0===s?void 0:s.length)?(console.log("Status filter array:",i.status),null===i||void 0===i||null===(x=i.status)||void 0===x||x.forEach((e=>{console.log("Processing status element:",e),"paid"===(null===e||void 0===e?void 0:e.name)?v="paid":"not_paid"===(null===e||void 0===e?void 0:e.name)&&(v="not_paid")})),v&&(console.log("Applied status filter:",v),c.push(`status=${v}`))):null!==i&&void 0!==i&&i.status&&console.log("Status filter not applied - length:",i.status.length,"values:",i.status);if(null!==i&&void 0!==i&&i.date){var f,g,_,j;const e=null===i||void 0===i||null===(f=i.date[0])||void 0===f||null===(g=f.value)||void 0===g?void 0:g[0];if(e){const t=new Date(e),s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");c.push(`date_after=${s}-${n}-${a}`)}const t=null===i||void 0===i||null===(_=i.date[0])||void 0===_||null===(j=_.value)||void 0===j?void 0:j[1];if(t){const e=new Date(t),s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");c.push(`date_before=${s}-${n}-${a}`)}}const y=`${a}/expenses/?${c.join("&")}`;return console.log("Final expenses API URL:",y),(0,n.f)(y,{method:"GET"})},r=async()=>{const e=new URL(`${a}/references/xero-codes/`);return(0,n.f)(e.toString(),{method:"GET"})},l=async()=>{const e=new URL(`${a}/references/projects/expenses/`);return(0,n.f)(e.toString(),{method:"GET"})},i=async e=>{const t=new URL(`${a}${`/expenses/update/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},d=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/expenses/new/`);return(0,n.f)(s.toString(),t)},c=async(e,t)=>{const s={method:"PUT",body:t},o=new URL(`${a}${`/expenses/update/${e}/`}`);return(0,n.f)(o.toString(),s)},m=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/expenses/paid/`);return(0,n.f)(s.toString(),t)},u=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/expenses/unpaid/`);return(0,n.f)(s.toString(),t)},h=async e=>{const t={method:"PUT",body:e},s=new URL(`${a}/expenses/to-xero/`);return(0,n.f)(s.toString(),t)},p=async e=>{const t=new URL(`${a}${`/expenses/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},v=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/clients/statement/pdf/`);return(0,n.f)(s.toString(),t)},x=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/clients/statement/send/`);return(0,n.f)(s.toString(),t)},f=async(e,t)=>{const s={method:"PUT",body:{code:t}},o=new URL(`${a}${`/suppliers/service-update/${e}/`}`);return(0,n.f)(o.toString(),s)}},36042:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(28261),a=s(79106),o=s(55973),r=s(70579);const l=e=>{let{view:t,setView:s,taskId:l,setTaskId:i,reInitialize:d}=e;const{data:c,refetch:m,isFetching:u}=(0,n.I)({queryKey:["taskId",l],queryFn:()=>(0,a.gg)(l),enabled:!!l&&!!t,retry:1,cacheTime:0,staleTime:0});return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsx)(o.A,{show:t,setShow:s,taskId:l,setTaskId:i,defaultValue:c,refetch:d,refetchTask:m,isFetching:u})})}},55973:(e,t,s)=>{s.d(t,{A:()=>Ue});var n=s(65043),a=s(93202),o=s(38161),r=s(56741),l=s(95192),i=s(88166),d=s(28261),c=s(47097),m=s(58387),u=s(10446),h=s.n(u),p=s(88060),v=s(93740),x=s(20288),f=s(74856),g=s(14282),_=s(78602),j=s(29853),y=s(61072),k=s(56328),N=s(43984),b=s(71807),A=s(8242),w=s(47009),S=s(86213),D=s(4258);const $="comment-editor_asanaEditorWrapper__1UAiy",C="comment-editor_avatarWrapper__HX3H9",T="comment-editor_editorContainer__5DNNe",R="comment-editor_focused__A0TDm",E="comment-editor_dragOver__3RQri",L="comment-editor_disabled__kEgBL",I="comment-editor_inputArea__iqu88",U="comment-editor_textInput__BuSfR",F="comment-editor_attachmentsPreview__2tXR3",P="comment-editor_attachmentChip__tsAPk",z="comment-editor_error__Gh98k",B="comment-editor_fileIcon__9QnuH",M="comment-editor_fileInfo__Ak+Ca",H="comment-editor_fileName__NFnbx",W="comment-editor_fileSize__I8VsI",q="comment-editor_fileStatus__O7zuJ",G="comment-editor_removeChip__UIpfQ",O="comment-editor_toolbar__H14ex",J="comment-editor_toolbarLeft__QjN7m",K="comment-editor_toolbarRight__q1XK-",Y="comment-editor_toolbarIcon__YrnT2",V="comment-editor_emojiWrapper__xJmG8",X="comment-editor_emojiPickerDropdown__hdgWf",Q="comment-editor_commentBtn__zCVYF",Z="comment-editor_active__j2dE3",ee="comment-editor_imagePreviewChip__YNUuv",te="comment-editor_removeImageBtn__lUflP",se="comment-editor_progressBar__PTWAG",ne="comment-editor_progressFill__lTJmW";var ae=s(79106),oe=s(58027),re=s(70579);const le=e=>{let{taskId:t,session:s,onCommentAdded:a,disabled:o=!1,commentsScrollRef:l}=e;const[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[_,j]=(0,n.useState)(!1),[y,le]=(0,n.useState)([]),[ie,de]=(0,n.useState)(!1),ce=(0,n.useRef)(null),me=(0,n.useRef)(null),ue=(0,n.useRef)(null),he=(0,n.useRef)(null);(0,n.useEffect)((()=>{const e=e=>{he.current&&!he.current.contains(e.target)&&f(!1)};return x&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[x]);const pe=async(e,t,s)=>{try{const n=await S.A.put(t,e,{headers:{"Content-Type":""},onUploadProgress:e=>{const n=Math.round(e.loaded/e.total*100);le((e=>e.map((e=>e.id===s?{...e,progress:n,url:t}:e))))}});return le((e=>e.map((e=>e.id===s?{...e,progress:100,uploaded:!0}:e)))),n}catch(n){let t="Upload failed";return t=n.response?403===n.response.status?"Permission denied (403 Forbidden)":`Server error: ${n.response.status}`:n.request?"No response from server":n.message,console.error(`Error uploading ${e.name}:`,t),le((e=>e.map((e=>e.id===s?{...e,progress:0,error:!0,errorMessage:t,uploadFailed:!0}:e)))),{error:!0,message:t}}},ve=async e=>{if(!t)return void k.oR.error("Save the task first before adding attachments");const s=Array.from(e).filter((e=>!(e.size>10485760)||(k.oR.error(`${e.name} is too large. Max size is 10MB`),!1)));if(0===s.length)return;const n=s.map(((e,t)=>({id:`upload-${Date.now()}-${t}`,name:e.name,size:e.size,type:e.type,progress:0,file:e})));le((e=>[...e,...n]));for(const o of n)try{const e=await(0,ae.qT)(t,o.name,o.type),{url:s}=e;if(!s){console.error(`No URL returned for file: ${o.name}`),le((e=>e.map((e=>e.id===o.id?{...e,error:!0,errorMessage:"No URL returned"}:e))));continue}const n=await pe(o.file,s,o.id);if(n&&!n.error){const e=s.split("?")[0];u((t=>[...t,{id:o.id,name:o.name,url:e,type:o.type,size:o.size}])),le((e=>e.filter((e=>e.id!==o.id))))}}catch(a){console.error("Error uploading file:",o.name,a),le((e=>e.map((e=>e.id===o.id?{...e,progress:0,error:!0,errorMessage:a.message||"Failed to get upload URL",uploadFailed:!0}:e))))}},xe=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),p(!0)}),[]),fe=(0,n.useCallback)((e=>{var t;e.preventDefault(),e.stopPropagation(),null!==(t=ue.current)&&void 0!==t&&t.contains(e.relatedTarget)||p(!1)}),[]),ge=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),_e=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),p(!1);const t=e.dataTransfer.files;t.length>0&&ve(t)}),[t]),je=(0,n.useCallback)((e=>{var t;const s=null===(t=e.clipboardData)||void 0===t?void 0:t.items;if(!s)return;const n=[];for(const a of s)if("file"===a.kind){const e=a.getAsFile();e&&n.push(e)}n.length>0&&(e.preventDefault(),ve(n))}),[t]),ye=e=>{u((t=>t.filter((t=>t.id!==e))))},ke=e=>{le((t=>t.filter((t=>t.id!==e))))},Ne=async()=>{if(i.trim()||0!==c.length)if(t){j(!0);try{var e;let n=null,o=null;c.length>0&&(1===c.length?(n=c[0].url,o=c[0].type):(n=JSON.stringify(c.map((e=>e.url))),o=JSON.stringify(c.map((e=>e.type))))),await(0,ae.Zi)(t,{comment:i.trim(),attachment_url:n,attachment_type:o,created_by:{role:null===s||void 0===s||null===(e=s.user)||void 0===e?void 0:e.role}}),d(""),u([]),null===a||void 0===a||a(),setTimeout((()=>{null!==l&&void 0!==l&&l.current&&l.current.scrollIntoView({behavior:"smooth",block:"end"})}),500)}catch(o){console.error("Error adding comment:",o),k.oR.error("Failed to add comment. Please try again.")}finally{var n;j(!1),null===(n=ce.current)||void 0===n||n.focus()}}else k.oR.error("Save the task first")},be=e=>null!==e&&void 0!==e&&e.startsWith("image/")?(0,re.jsx)(N.A,{size:16}):(0,re.jsx)(b.A,{size:16}),Ae=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",we=e=>null===e||void 0===e?void 0:e.startsWith("image/"),Se=i.trim()||c.length>0;return(0,re.jsxs)("div",{className:$,children:[(0,re.jsx)("div",{className:C,children:(0,re.jsx)(oe.A,{photo:null===s||void 0===s?void 0:s.photo,has_photo:null===s||void 0===s?void 0:s.has_photo,is_business:!1,size:20})}),(c.length>0||y.length>0)&&(0,re.jsxs)("div",{className:F,children:[y.map((e=>we(e.type)?(0,re.jsxs)("div",{className:ee,children:[(0,re.jsx)("img",{src:URL.createObjectURL(e.file),alt:e.name}),(0,re.jsx)("button",{className:te,onClick:()=>ke(e.id),type:"button",children:(0,re.jsx)(r.A,{size:12})}),!e.uploaded&&!e.error&&(0,re.jsx)("div",{className:se,children:(0,re.jsx)("div",{className:ne,style:{width:`${e.progress}%`}})})]},e.id):(0,re.jsxs)("div",{className:(0,m.A)(P,e.error&&z),children:[(0,re.jsx)("div",{className:B,children:be(e.type)}),(0,re.jsxs)("div",{className:M,children:[(0,re.jsx)("span",{className:H,children:e.name}),(0,re.jsx)("span",{className:W,children:Ae(e.size)})]}),(0,re.jsx)("span",{className:(0,m.A)(q,e.error&&z),children:e.error?"Failed":`${e.progress}%`}),(0,re.jsx)("button",{className:G,onClick:()=>ke(e.id),type:"button",children:(0,re.jsx)(r.A,{size:14})})]},e.id))),c.map((e=>we(e.type)?(0,re.jsxs)("div",{className:ee,children:[(0,re.jsx)("img",{src:e.url,alt:e.name}),(0,re.jsx)("button",{className:te,onClick:()=>ye(e.id),type:"button",children:(0,re.jsx)(r.A,{size:12})})]},e.id):(0,re.jsxs)("div",{className:P,children:[(0,re.jsx)("div",{className:B,children:be(e.type)}),(0,re.jsxs)("div",{className:M,children:[(0,re.jsx)("span",{className:H,children:e.name}),(0,re.jsx)("span",{className:W,children:Ae(e.size)})]}),(0,re.jsx)("button",{className:G,onClick:()=>ye(e.id),type:"button",children:(0,re.jsx)(r.A,{size:14})})]},e.id)))]}),(0,re.jsxs)("div",{className:(0,m.A)(T,ie&&R,h&&E,o&&L),ref:ue,onDragEnter:xe,onDragLeave:fe,onDragOver:ge,onDrop:_e,children:[(0,re.jsx)("div",{className:I,children:(0,re.jsx)("input",{ref:ce,type:"text",className:U,placeholder:"Add a comment",value:i,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Ne())},onPaste:je,onFocus:()=>de(!0),onBlur:()=>de(!1),disabled:o||_||!t})}),(0,re.jsxs)("div",{className:O,children:[(0,re.jsxs)("div",{className:J,children:[(0,re.jsxs)("div",{className:V,ref:he,children:[(0,re.jsx)("button",{className:Y,type:"button",title:"Add emoji",disabled:o||!t,onClick:()=>f(!x),children:(0,re.jsx)(A.A,{size:18})}),x&&(0,re.jsx)("div",{className:X,children:(0,re.jsx)(D.Ay,{onEmojiClick:e=>{var t;d((t=>t+e.emoji)),f(!1),null===(t=ce.current)||void 0===t||t.focus()},theme:"light",width:300,height:350,searchPlaceHolder:"Search emoji...",previewConfig:{showPreview:!1}})})]}),(0,re.jsx)("button",{className:Y,onClick:()=>{var e;return null===(e=me.current)||void 0===e?void 0:e.click()},type:"button",title:"Attach file",disabled:o||!t,children:(0,re.jsx)(w.A,{size:18})}),(0,re.jsx)("input",{ref:me,type:"file",multiple:!0,onChange:e=>ve(e.target.files),style:{display:"none"}})]}),(0,re.jsx)("div",{className:K,children:(0,re.jsx)(g.A,{onClick:Ne,className:(0,m.A)(Q,Se&&Z),disabled:o||_||!t||!Se,children:_?(0,re.jsx)(v.p,{style:{width:"14px",height:"14px"},strokeWidth:"3"}):"Comment"})})]})]})]})},ie="create-task_circleDesignStyle__vtKho",de="create-task_out__LG-iY",ce="create-task_taskTitleInput__s+lNu",me="create-task_formLabel__04J0h",ue="create-task_taskDescriptionInput__RZWSI",he="create-task_projectDropdown__qXb5+",pe="create-task_saveStatusWrapper__1NhE+",ve="create-task_saveStatus__6yreg",xe="create-task_saved__jqL5a",fe="create-task_error__5CguB",ge="create-task_footerHint__acXGx",_e="create-task_sidebarFooter__+ieeU",je="create-task_taskFooter__zplYw",ye="create-task_footerRight__UmNHb";var ke=s(10586),Ne=s(72796),be=s(57189),Ae=s(63040),we=s(83738);const Se=(e,t)=>{const s={month:"short",day:"numeric"};return`${new Date(e).toLocaleDateString("en-US",s)} - ${new Date(t).toLocaleDateString("en-US",s)}`},De=e=>{let{startDate:t,endDate:s}=e;return(0,re.jsx)("div",{className:"dateSelectdTaskBar",children:Se(t,s)})},$e=e=>{let{setDateRange:t,dateRange:s}=e;const[a,o]=(0,n.useState)(!1),r=(0,n.useRef)(null),l=e=>{r.current&&!r.current.contains(e.target)&&o(!1)};return(0,n.useEffect)((()=>(a?document.addEventListener("mousedown",l):document.removeEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)})),[a]),(0,re.jsxs)("div",{className:"select-date",style:{position:"relative"},ref:r,children:[(0,re.jsx)("div",{onClick:()=>o((e=>!e)),style:{cursor:"pointer"},children:null!==s&&void 0!==s&&s.startDate&&null!==s&&void 0!==s&&s.endDate?(0,re.jsx)(De,{startDate:s.startDate,endDate:s.endDate}):(0,re.jsx)("div",{style:{border:"1px dashed #98A2B3",width:"24px",height:"24px",borderRadius:"50%"},className:"iconStyleCircle d-flex justify-content-center align-items-center iconStyleCircleRight "+(a?"active":""),children:(0,re.jsx)(Ae.A,{color:a?"#1AB2FF":"#475467",size:14})})}),a&&(0,re.jsx)("div",{className:"select-date-range",style:{position:"absolute",top:"-100px",background:"#fff",zIndex:1e3},children:(0,re.jsx)(we.s,{onDataApply:e=>{t(e),o(!1)},dateRange:s,onClose:()=>o(!1)})})]})};var Ce=s(75714);const Te={commentsContainer:"task-comments_commentsContainer__9Qiud",commentsHeader:"task-comments_commentsHeader__SxVw0",commentsTitle:"task-comments_commentsTitle__f66k0",commentsList:"task-comments_commentsList__NBm+d",commentItem:"task-comments_commentItem__bv78f",deleteButton:"task-comments_deleteButton__XLlzH",userName:"task-comments_userName__EH9bR",commentTime:"task-comments_commentTime__4eCW6",commentText:"task-comments_commentText__rSHhj",addCommentSection:"task-comments_addCommentSection__-KvEG",avatar:"task-comments_avatar__GZ9fT",loadMoreWrapper:"task-comments_loadMoreWrapper__TLDxd",loadMoreBtn:"task-comments_loadMoreBtn__6oQeF",loading:"task-comments_loading__3LE67",commentAvatar:"task-comments_commentAvatar__Pc8rI",commentHeader:"task-comments_commentHeader__T9R4I",noComments:"task-comments_noComments__xAIGD",attachmentContainer:"task-comments_attachmentContainer__QEIIm",imageAttachment:"task-comments_imageAttachment__pMEwt",attachmentImage:"task-comments_attachmentImage__3TpwU",fileAttachment:"task-comments_fileAttachment__F5SBZ",fileIconWrapper:"task-comments_fileIconWrapper__bozGA",fileDetails:"task-comments_fileDetails__3maHd",fileName:"task-comments_fileName__6bsXF",fileAction:"task-comments_fileAction__bNX3c"},Re=e=>{var t,s,n,a,o;let r=[],l=[];if(e.attachment_url)try{const t=JSON.parse(e.attachment_url);r=Array.isArray(t)?t:[e.attachment_url]}catch{r=[e.attachment_url]}if(e.attachment_type)try{const t=JSON.parse(e.attachment_type);l=Array.isArray(t)?t:[e.attachment_type]}catch{l=[e.attachment_type]}return{id:e.id,text:e.comment,created_at:e.created_at,attachments:r.map(((e,t)=>({url:e,type:l[t]||"application/octet-stream"}))),attachment_url:e.attachment_url||null,attachment_type:e.attachment_type||null,user:{id:null===(t=e.created_by)||void 0===t?void 0:t.id,full_name:null===(s=e.created_by)||void 0===s?void 0:s.full_name,email:null===(n=e.created_by)||void 0===n?void 0:n.email,photo:null===(a=e.created_by)||void 0===a?void 0:a.avatar,role:null===(o=e.created_by)||void 0===o?void 0:o.role}}},Ee=e=>{const t=new Date,s=new Date(e),n=Math.floor((t-s)/6e4);return n<1?"Just now":n<60?`${n} min ago`:n<1440?`${Math.floor(n/60)} hours ago`:`${Math.floor(n/1440)} days ago`},Le=(0,n.forwardRef)(((e,t)=>{let{taskId:s,usersMap:a=new Map}=e;const{data:o,refetch:r,fetchNextPage:l,hasNextPage:i,isFetchingNextPage:d,isLoading:m}=(0,Ce.q)({queryKey:["task-comments",s],queryFn:e=>{let{pageParam:t}=e;return t?fetch(t).then((e=>e.json())):(0,ae.Lb)(s)},enabled:!!s,getNextPageParam:e=>e.next});(0,n.useImperativeHandle)(t,(()=>({refetchComments:()=>r()})));const u=(0,c.n)({mutationFn:ae.Co,onSuccess:()=>{k.oR.success("Comment deleted"),r()},onError:()=>{k.oR.error("Failed to delete comment")}}),h=o?o.pages.slice().flatMap((e=>e.results)).map(Re).sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())).reverse():[];if(m)return(0,re.jsx)("div",{className:Te.loading,children:"Loading comments\u2026"});if(!h.length)return(0,re.jsx)("div",{className:Te.noComments,children:"No comments yet."});return(0,re.jsxs)("div",{className:Te.commentsContainer,children:[i&&(0,re.jsx)("div",{className:Te.loadMoreWrapper,children:(0,re.jsx)("button",{onClick:l,disabled:d,className:Te.loadMoreBtn,children:d?"Loading\u2026":"Load older comments"})}),(0,re.jsx)("div",{className:Te.commentsList,children:h.map((e=>{var t,s,n;const o=a.get(null===(t=e.user)||void 0===t?void 0:t.id),r=(null===o||void 0===o?void 0:o.photo)||(null===(s=e.user)||void 0===s?void 0:s.photo),l=(null===o||void 0===o?void 0:o.has_photo)||!!r;return(0,re.jsx)("div",{className:Te.commentItem,children:(0,re.jsxs)("div",{className:"d-flex gap-3",children:[(0,re.jsx)("div",{className:Te.avatar,children:(0,re.jsx)(oe.A,{photo:r,has_photo:l,is_business:!1,size:18})}),(0,re.jsxs)("div",{className:"flex-grow-1",style:{width:"calc(100% - 50px)"},children:[(0,re.jsxs)("div",{className:Te.header,children:[(0,re.jsx)("span",{className:Te.userName,children:null===(n=e.user)||void 0===n?void 0:n.full_name}),(0,re.jsxs)("span",{className:Te.commentTime,children:["\xb7 ",Ee(1e3*e.created_at)]}),(0,re.jsx)("button",{onClick:()=>{return t=e.id,void u.mutate(t);var t},disabled:u.isLoading,className:Te.deleteButton,style:{marginLeft:"5px",background:"none",border:"none",color:"#D92D20",cursor:"pointer",fontSize:12},children:"Delete"})]}),(0,re.jsx)("p",{className:Te.commentText,children:e.text}),e.attachments&&e.attachments.length>0&&(0,re.jsx)("div",{className:Te.attachmentContainer,children:e.attachments.map(((e,t)=>{var s,n;return null!==(s=e.type)&&void 0!==s&&s.startsWith("image/")?(0,re.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:Te.imageAttachment,children:(0,re.jsx)("img",{src:e.url,alt:`Attachment ${t+1}`,className:Te.attachmentImage})},t):(0,re.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:Te.fileAttachment,children:[(0,re.jsx)("div",{className:Te.fileIconWrapper,children:(0,re.jsx)(b.A,{size:18})}),(0,re.jsxs)("div",{className:Te.fileDetails,children:[(0,re.jsx)("span",{className:Te.fileName,children:(null===(n=e.url.split("/").pop())||void 0===n?void 0:n.split("?")[0])||"Attachment"}),(0,re.jsx)("span",{className:Te.fileAction,children:"Click to download"})]})]},t)}))})]})]})},e.id)}))})]})})),Ie=e=>{if(!e)return null;return new Date(1e3*+e)},Ue=e=>{var t,s;let{show:u,setShow:N,refetch:b,taskId:A,setTaskId:w,defaultValue:S,projectId:D,refetchTask:$,isFetching:C=!1}=e;const T=(0,n.useRef)(null),R=(0,n.useRef)(null),E=(0,n.useRef)(null),L=(0,n.useRef)(null),{session:I}=(0,be.As)(),[U,F]=(0,n.useState)("idle"),[P,z]=(0,n.useState)(null),[B,M]=(0,n.useState)(""),[H,W]=(0,n.useState)(""),[q,G]=(0,n.useState)(""),[O,J]=(0,n.useState)(null),[K,Y]=(0,n.useState)(null),[V,X]=(0,n.useState)({taskTitle:!1,description:!1,project:!1,user:!1,date:!1}),Q=A||P;(0,n.useEffect)((()=>{var e,t;A&&S&&(M(null===S||void 0===S?void 0:S.title),W(null===S||void 0===S?void 0:S.description),G(null===S||void 0===S||null===(e=S.project)||void 0===e?void 0:e.id),J(null===S||void 0===S||null===(t=S.user)||void 0===t?void 0:t.id),Y({startDate:Ie(null===S||void 0===S?void 0:S.from_date),endDate:Ie(null===S||void 0===S?void 0:S.to_date)}))}),[A,S]);const Z=()=>{b(),M(""),W(""),G(""),J(null),Y(null),F("idle"),z(null),Se.current=null,De.current=!0,X({taskTitle:!1,description:!1,project:!1,user:!1,date:!1})},ee=(0,d.I)({queryKey:["getProjectsList"],queryFn:ke.Bu}),te=(0,d.I)({queryKey:["getUserList"],queryFn:ae.aU}),se=(0,d.I)({queryKey:["getMobileUserList"],queryFn:ae.gy}),ne=n.useMemo((()=>{var e,t,s,n;const a=new Map;return null===te||void 0===te||null===(e=te.data)||void 0===e||null===(t=e.users)||void 0===t||t.forEach((e=>{a.set(e.id,{id:e.id,label:`${e.first_name} ${e.last_name}`.trim()||e.first_name||"-",photo:e.photo||"",has_photo:e.has_photo})})),null===se||void 0===se||null===(s=se.data)||void 0===s||null===(n=s.users)||void 0===n||n.forEach((e=>{a.has(e.id)||a.set(e.id,{id:e.id,label:`${e.first_name} ${e.last_name}`.trim()||e.first_name||"-",photo:e.photo||"",has_photo:e.has_photo})})),a}),[null===te||void 0===te||null===(t=te.data)||void 0===t?void 0:t.users,null===se||void 0===se||null===(s=se.data)||void 0===s?void 0:s.users]);(0,n.useEffect)((()=>{u||Z()}),[u]);const Ae=(0,c.n)({mutationFn:e=>(0,ae.Af)(e),onSuccess:e=>{z(null===e||void 0===e?void 0:e.id),F("saved"),k.oR.success("Task created"),setTimeout((()=>F("idle")),2e3)},onError:e=>{console.error("Error creating task:",e),F("error"),k.oR.error("Failed to create task")}}),we=(0,c.n)({mutationFn:e=>(0,ae.lC)(Q,e),onSuccess:()=>{F("saved"),setTimeout((()=>F("idle")),2e3)},onError:e=>{console.error("Error updating task:",e),F("error"),k.oR.error("Failed to save changes")}}),Se=(0,n.useRef)(null),De=(0,n.useRef)(!0),Ce=(0,n.useRef)(null);(0,n.useEffect)((()=>{Ce.current=()=>{var e,t;if(null===B||void 0===B||!B.trim())return;const s={title:B,description:H||"",...q&&{project:q},...O&&{user:O},...(null===K||void 0===K?void 0:K.startDate)&&{from_date:K.startDate},...(null===K||void 0===K?void 0:K.endDate)&&{to_date:K.endDate}},n=JSON.stringify({title:B,description:H||"",project:q||null,user:O||null,fromDate:(null===K||void 0===K||null===(e=K.startDate)||void 0===e?void 0:e.toString())||null,toDate:(null===K||void 0===K||null===(t=K.endDate)||void 0===t?void 0:t.toString())||null});if(Se.current!==n){if(De.current&&Q)return De.current=!1,void(Se.current=n);Se.current=n,De.current=!1,F("saving"),Q?we.mutate(s):Ae.mutate(s)}}}),[B,H,q,O,K,Q,we,Ae]);const Te=(0,n.useCallback)(h()((()=>{var e;null===(e=Ce.current)||void 0===e||e.call(Ce)}),1500),[]);(0,n.useEffect)((()=>(u&&null!==B&&void 0!==B&&B.trim()&&Te(),()=>{var e;null===(e=Te.cancel)||void 0===e||e.call(Te)})),[B,H,q,O,K,u,Te]);const Re=(0,c.n)({mutationFn:()=>(0,Ne.mM)(Q),onSuccess:()=>{console.log("Delete success"),N(!1),b()},onError:e=>{console.error("Error creating task:",e)}}),Ee=(0,c.n)({mutationFn:e=>(0,Ne._x)(Q,e),onSuccess:(e,t)=>{k.oR.success(t?"Task marked as complete":"Task marked as incomplete"),null===$||void 0===$||$()},onError:e=>{console.error("Error updating task status:",e),k.oR.error("Failed to update task status")}}),Ue=()=>{const e=null===S||void 0===S?void 0:S.finished;Ee.mutate(!e)},Fe=()=>{Re.mutate()},Pe=()=>{var e;null===(e=E.current)||void 0===e||e.refetchComments()};return(0,n.useEffect)((()=>{setTimeout((()=>{R.current&&(R.current.style.height="auto",R.current.style.height=R.current.scrollHeight+"px")}),200)}),[H,A]),(0,n.useEffect)((()=>{D&&G(+D)}),[D]),(0,re.jsx)(x.B,{visible:u,position:"right",onHide:()=>{N(!1),A&&w(null),Z()},modal:!1,dismissable:!1,style:{width:"591px",height:"97vh",borderRadius:"10px",marginRight:"10px"},content:e=>{var t,s,n,d,c,u,h,x,k,N;let{closeIconRef:b,hide:w}=e;return(0,re.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,re.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,re.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,re.jsx)("div",{className:ie,children:(0,re.jsx)("div",{className:de,children:(0,re.jsx)(a.A,{size:24,color:"#17B26A"})})}),(0,re.jsxs)("span",{style:{color:"344054",fontSize:"20px",fontWeight:600},children:[Q?"Edit":"Create New"," Task"]}),(0,re.jsxs)("div",{className:pe,children:["saving"===U&&(0,re.jsxs)("div",{className:ve,children:[(0,re.jsx)(v.p,{style:{width:"14px",height:"14px"},strokeWidth:"3"}),(0,re.jsx)("span",{children:"Saving..."})]}),"saved"===U&&(0,re.jsxs)("div",{className:(0,m.A)(ve,xe),children:[(0,re.jsx)(o.A,{size:14}),(0,re.jsx)("span",{children:"Saved"})]}),"error"===U&&(0,re.jsx)("div",{className:(0,m.A)(ve,fe),children:(0,re.jsx)("span",{children:"Save failed"})})]})]}),(0,re.jsx)("span",{children:(0,re.jsx)(g.A,{type:"button",className:"text-button",ref:b,onClick:e=>w(e),children:(0,re.jsx)(r.A,{size:24,color:"#667085"})})})]}),(0,re.jsxs)("div",{className:"modal-body",style:{height:"calc(100vh - 72px - 200px)",overflow:"auto"},children:[C&&A?(0,re.jsxs)("div",{className:"task-content",style:{padding:"24px"},children:[(0,re.jsx)(f.E,{width:"70%",height:"28px",className:"mb-3"}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,className:"d-flex flex-column justify-content-center pt-2",children:(0,re.jsx)(f.E,{width:"80px",height:"22px"})}),(0,re.jsxs)(_.A,{sm:8,className:"d-flex align-items-center",children:[(0,re.jsx)(f.E,{shape:"circle",size:"24px",className:"me-2"}),(0,re.jsx)(f.E,{width:"120px",height:"22px",style:{marginLeft:"8px"}})]})]}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,className:"d-flex flex-column justify-content-center",children:(0,re.jsx)(f.E,{width:"80px",height:"22px"})}),(0,re.jsx)(_.A,{sm:8,children:(0,re.jsx)(f.E,{width:"180px",height:"22px"})})]}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,className:"d-flex flex-column justify-content-center pt-3",children:(0,re.jsx)(f.E,{width:"100px",height:"22px"})}),(0,re.jsx)(_.A,{sm:8,children:(0,re.jsx)(f.E,{width:"200px",height:"46px",borderRadius:"8px"})})]}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,children:(0,re.jsx)(f.E,{width:"90px",height:"22px"})}),(0,re.jsx)(_.A,{sm:12,className:"mt-2",children:(0,re.jsx)(f.E,{width:"100%",height:"120px",borderRadius:"8px"})})]})]}):(0,re.jsxs)("div",{className:"task-content",style:{padding:"24px"},children:[(0,re.jsx)(j.A.Control,{type:"text",name:"taskTitle",id:"taskTitle",placeholder:"Enter task title",value:B,onChange:e=>M(e.target.value),className:ce}),V.taskTitle&&(0,re.jsx)(j.A.Text,{className:"error-message",children:"Task title is required"}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,className:"d-flex flex-column justify-content-center pt-2",children:(0,re.jsx)(j.A.Label,{className:me,children:"Assignee"})}),(0,re.jsxs)(_.A,{sm:8,className:"d-flex flex-column justify-content-center",children:[!O&&(0,re.jsx)("div",{className:"d-flex align-items-center justify-content-center",onClick:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.show()},style:{border:"1px dashed #98A2B3",width:"24px",height:"24px",borderRadius:"50%"},children:(0,re.jsx)(l.A,{color:null!==(t=T.current)&&void 0!==t&&null!==(s=t.panel)&&void 0!==s&&null!==(n=s.element)&&void 0!==n&&n.offsetParent?"#1AB2FF":"#475467",size:18,className:"cursor-pointer"})}),(0,re.jsx)(p.m,{ref:T,options:[{label:"Desktop User",items:(null===te||void 0===te||null===(d=te.data)||void 0===d||null===(c=d.users)||void 0===c||null===(u=c.filter((e=>null===e||void 0===e?void 0:e.is_active)))||void 0===u?void 0:u.map((e=>({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}`||(null===e||void 0===e?void 0:e.first_name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]},...null!==I&&void 0!==I&&I.has_work_subscription?[{label:"Mobile User",items:(null===se||void 0===se||null===(h=se.data)||void 0===h||null===(x=h.users)||void 0===x||null===(k=x.filter((e=>"disconnected"!==(null===e||void 0===e?void 0:e.status))))||void 0===k?void 0:k.map((e=>({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}`||(null===e||void 0===e?void 0:e.first_name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]}]:[]],onChange:e=>{J(e.value)},valueTemplate:e=>{const t="object"===typeof e?null===e||void 0===e?void 0:e.value:e,s=ne.get(t);return s?(0,re.jsxs)("div",{className:"d-flex gap-2 align-items-center",style:{position:"relative",left:"-10px"},children:[(0,re.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,re.jsx)(oe.A,{photo:null===s||void 0===s?void 0:s.photo,has_photo:null===s||void 0===s?void 0:s.has_photo,is_business:!1,size:17})}),null===s||void 0===s?void 0:s.label]}):null},itemTemplate:e=>(0,re.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,re.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,re.jsx)(oe.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}),className:"outline-none border-0 p-0",style:{width:O?"fit-content":"0px",height:O?"46px":"0px",zIndex:O?"1":"0",position:"relative",left:O?"-4px":"-60px",top:O?"0px":"-15px"},value:O,dropdownIcon:(0,re.jsx)(re.Fragment,{}),collapseIcon:(0,re.jsx)(re.Fragment,{}),placeholder:"Select project",filter:!0,filterInputAutoFocus:!0,optionGroupLabel:"label",optionGroupChildren:"items",scrollHeight:"400px"})]})]}),V.user&&(0,re.jsx)(j.A.Text,{className:"error-message",children:"User is required"}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,className:"d-flex flex-column justify-content-center",children:(0,re.jsx)(j.A.Label,{className:me,children:"Due Date"})}),(0,re.jsx)(_.A,{sm:8,className:"d-flex flex-column justify-content-center",children:(0,re.jsx)($e,{dateRange:K,setDateRange:Y})})]}),V.date&&(0,re.jsx)(j.A.Text,{className:"error-message",children:"Date is required"}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,className:"d-flex flex-column justify-content-center pt-3",children:(0,re.jsx)(j.A.Label,{className:me,children:"Link to Project"})}),(0,re.jsx)(_.A,{sm:8,className:"d-flex flex-column justify-content-center",children:(0,re.jsx)(p.m,{options:(null===ee||void 0===ee||null===(N=ee.data)||void 0===N?void 0:N.map((e=>({value:e.id,label:`${e.number}: ${e.reference}`}))))||[],onChange:e=>{G(e.value)},className:(0,m.A)("outline-none",he),style:{height:"46px",maxWidth:"100%",width:"fit-content"},value:q,loading:null===ee||void 0===ee?void 0:ee.isFetching,placeholder:"Select project",filter:!0,filterInputAutoFocus:!0,panelStyle:{maxHeight:"400px",width:"591px"}})})]}),V.project&&(0,re.jsx)(j.A.Text,{className:"error-message",children:"Project task is required"}),(0,re.jsxs)(y.A,{className:"mt-3",children:[(0,re.jsx)(_.A,{sm:4,children:(0,re.jsx)(j.A.Label,{className:me,children:"Description"})}),(0,re.jsx)(_.A,{sm:12,children:(0,re.jsx)(j.A.Control,{name:"taskDescription",id:"taskDescription",as:"textarea",placeholder:"Enter a description...",value:H,rows:2,ref:R,onChange:e=>{W(e.target.value)},className:ue,onInput:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"},onFocus:()=>{R.current&&(R.current.style.height="auto",R.current.style.height=R.current.scrollHeight+"px")}})})]}),V.description&&(0,re.jsx)(j.A.Text,{className:"error-message",children:"Description is required"})]}),Q&&(0,re.jsxs)("div",{className:"border-top",style:{background:"#F2F3F4",padding:"12px 24px"},children:[(0,re.jsx)(j.A.Label,{className:me,children:"Comments"}),(0,re.jsx)("div",{ref:L,children:(0,re.jsx)(Le,{taskId:Q,ref:E,usersMap:ne})})]})]}),(0,re.jsxs)("div",{className:_e,children:[(0,re.jsx)(le,{taskId:Q,session:I,onCommentAdded:Pe,disabled:!Q,commentsScrollRef:L}),(0,re.jsxs)("div",{className:je,children:[(0,re.jsxs)(g.A,{disabled:!Q||Ee.isPending,className:null!==S&&void 0!==S&&S.finished?"outline-in-complete-button":"outline-complete-button",onClick:Ue,children:[null!==S&&void 0!==S&&S.finished?"Completed":"Mark Complete",(0,re.jsx)(i.A,{size:16,color:"#079455"}),Ee.isPending&&(0,re.jsx)(v.p,{style:{width:"16px",height:"16px"},strokeWidth:"3"})]}),(0,re.jsxs)("div",{className:ye,children:[(0,re.jsxs)("span",{className:ge,children:["saving"===U&&"Saving...","saved"===U&&"Changes saved","idle"===U&&"Auto-save enabled"]}),(0,re.jsxs)(g.A,{className:"danger-text-button",onClick:Fe,disabled:!Q,children:["Delete",Re.isPending&&(0,re.jsx)(v.p,{style:{width:"18px",height:"18px"}})]})]})]})]})]})}})}},72796:(e,t,s)=>{s.d(t,{_x:()=>r,dd:()=>a,mM:()=>o});const n="https://app.memate.com.au/api/v1",a=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const a={method:"GET",headers:t};try{const t=new URL(`${n}/tasks/${e}/`),s=await fetch(t,a);return await s.json()}catch(o){throw console.error("Tasks fetch error:",o),o}},o=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const a={method:"DELETE",headers:t,redirect:"follow"};try{const t=new URL(`${n}/tasks/delete/${e}/`);if((await fetch(t,a)).ok)return{message:"Task deleted successfully"};throw new Error("Error during deleting")}catch(o){throw console.error("Tasks fetch error:",o),o}},r=async(e,t)=>{const s=new Headers,a=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${a}`),s.append("Content-Type","application/json");const o={method:"PATCH",headers:s,body:JSON.stringify({finished:t}),redirect:"follow"};try{const t=new URL(`${n}/tasks/complete/${e}/`),s=await fetch(t,o);return await s.json()}catch(r){throw console.error("Tasks fetch error:",r),r}}},79106:(e,t,s)=>{s.d(t,{Af:()=>l,Co:()=>h,Lb:()=>m,U9:()=>o,Zi:()=>u,aU:()=>d,gg:()=>r,gy:()=>c,lC:()=>i,qT:()=>p});var n=s(31342);const a="https://app.memate.com.au/api/v1",o=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0;const d=(e-1)*t,c=new URL(`${a}/tasks/`);return c.searchParams.append("limit",t),c.searchParams.append("offset",d),s&&c.searchParams.append("search",s),o&&c.searchParams.append("ordering",o),r&&c.searchParams.append("deleted",1),!0===l&&c.searchParams.append("finished",!1),!1===l&&c.searchParams.append("finished",!0),i&&c.searchParams.append("users",i),(0,n.f)(c.toString(),{method:"GET"})},r=async e=>{const t=new URL(`${a}${`/tasks/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},l=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/tasks/new/`);return(0,n.f)(s.toString(),t)},i=async(e,t)=>{const s={method:"PUT",body:t},o=new URL(`${a}${`/tasks/update/${e}/`}`);return(0,n.f)(o.toString(),s)},d=async()=>{const e=new URL(`${a}/desktop-users/`);return(0,n.f)(e.toString(),{method:"GET"})},c=async()=>{const e=new URL(`${a}/team/mobile-users/`);return(0,n.f)(e.toString(),{method:"GET"})},m=async e=>{const t=new URL(`${a}${`/tasks/${e}/comments/`}`);return(0,n.f)(t.toString(),{method:"GET"})},u=async(e,t)=>{const s=new URL(`${a}${`/tasks/${e}/comments/`}`);return(0,n.f)(s.toString(),{method:"POST",body:t})},h=async e=>{const t=new URL(`${a}${`/tasks/comments/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},p=async(e,t,s)=>{const o=new URL(`${a}/tasks/comments/presigned-url/`);return(0,n.f)(o.toString(),{method:"POST",body:{file_name:t,task_id:e,attachment_type:s}})}},83738:(e,t,s)=>{s.d(t,{s:()=>d});var n=s(65043),a=s(58387),o=s(670),r=s(68767),l=s(32370),i=s(70579);const d=e=>{let{onDataApply:t,dateRange:s,onClose:d,className:c=""}=e;const[m,u]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(null!==s&&void 0!==s&&s.startDate&&null!==s&&void 0!==s&&s.endDate){const e=s.startDate instanceof Date?s.startDate:new Date(s.startDate),t=s.endDate instanceof Date?s.endDate:new Date(s.endDate);u([e,t])}}),[s]);const h=(0,n.useCallback)((()=>{m&&2===m.length&&m[0]&&m[1]?t({startDate:m[0],endDate:m[1]}):m&&1===m.length&&m[0]&&t({startDate:m[0],endDate:m[0]})}),[m,t]),p=(0,n.useCallback)((()=>{u(null),d&&d()}),[d]),v=(0,n.useCallback)((()=>{const e=new Date;e.setHours(0,0,0,0),u([e,e])}),[]),x=(0,n.useCallback)((()=>{const e=m&&m.length>=1&&m[0];return(0,i.jsxs)("div",{className:"date-range-footer",children:[(0,i.jsx)("button",{type:"button",className:"date-range-footer-btn date-range-footer-btn-today",onClick:v,children:"Today"}),(0,i.jsx)("button",{type:"button",className:"date-range-footer-btn date-range-footer-btn-cancel",onClick:p,children:"Cancel"}),(0,i.jsx)("button",{type:"button",className:"date-range-footer-btn date-range-footer-btn-apply",onClick:h,disabled:!e,children:"Apply"})]})}),[m,v,p,h]),f=(0,n.useCallback)((()=>{var e,t;if(!m||0===m.length)return"Select date range";const s={month:"short",day:"numeric",year:"numeric"},n=(null===(e=m[0])||void 0===e?void 0:e.toLocaleDateString("en-US",s))||"",a=(null===(t=m[1])||void 0===t?void 0:t.toLocaleDateString("en-US",s))||"";return n&&a?`${n} - ${a}`:n?`${n} - Select end date`:"Select date range"}),[m]);return(0,i.jsxs)("div",{className:(0,a.A)("date-range-picker-calendar",c),children:[(0,i.jsx)("div",{className:"date-range-header",children:(0,i.jsx)("span",{className:"date-range-header-text",children:f()})}),(0,i.jsx)(o.V,{value:m,onChange:e=>u(e.value),selectionMode:"range",inline:!0,numberOfMonths:1,locale:"en",dateFormat:"dd M yy",footerTemplate:x,firstDayOfWeek:1,showButtonBar:!1,prevIcon:(0,i.jsx)(r.Y,{}),nextIcon:(0,i.jsx)(l.v,{})})]})}}}]);
//# sourceMappingURL=6042.62e4542f.chunk.js.map