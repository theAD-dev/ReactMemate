"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[6453,6731],{54967:(e,t,s)=>{s.d(t,{A:()=>r,h:()=>d});var l=s(65043),a=s(44541),o=s(95192);const i="image-avatar_clientImg__-nnRU";var n=s(70579);const r=e=>{let{has_photo:t,photo:s,is_business:i,size:r}=e;const[d,c]=(0,l.useState)(!1),h=i?a.A:o.A;return(0,n.jsx)(n.Fragment,{children:t&&s&&!d?(0,n.jsx)("img",{src:s,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):(0,n.jsx)(h,{color:"#667085",size:r})})},d=e=>{let{has_photo:t,photo:s,is_business:r}=e;const[d,c]=(0,l.useState)(!1),h=r?a.A:o.A;return(0,n.jsx)("div",{className:`d-flex justify-content-center align-items-center ${i} ${r?"":"rounded-circle"}`,style:{overflow:"hidden"},children:t&&s&&!d?(0,n.jsx)("img",{src:s,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):(0,n.jsx)(h,{color:"#667085"})})}},89573:(e,t,s)=>{s.r(t),s.d(t,{default:()=>H});var l=s(65043),a=s(39759),o=s(49367),i=s(27498),n=s(72413),r=s(93747),d=s(58387),c=s(75218),h=s(9642),p=s(9180),x=s(64824),m=s(93740),v=s(29908),u=s(76104),j=s(56328);const b={filterBox:"approval_filterBox__ystSi",total:"approval_total__t03q9",totalCount:"approval_totalCount__hTTBc",shadowRight:"approval_shadowRight__X9zTG",payment:"approval_payment__YwghB",paymentHours:"approval_paymentHours__0t+W3",paymentFix:"approval_paymentFix__CXsuw",time:"approval_time__EPrle",tracker:"approval_tracker__67lYj",clientImg:"approval_clientImg__UHBLY",clientName:"approval_clientName__lw-Sd",inProgress:"approval_inProgress__WFpNd",approved:"approval_approved__oWI1u",defaultStatus:"approval_defaultStatus__sa3+W",finished:"approval_finished__tAhe6",finishedAction:"approval_finishedAction__PNOct",assign:"approval_assign__EvOLi",assignAction:"approval_assignAction__ENiFC",shadowLeft:"approval_shadowLeft__Slbva",yearDropdown:"approval_yearDropdown__dYRYk",clientPhoto:"approval_clientPhoto__T0lPw",workerPhoto:"approval_workerPhoto__riwim",button:"approval_button__2omTf"};var g=s(15258),f=s(14282),y=s(9634),N=s(70579);const w=e=>{let{onWeekChange:t}=e;const[s,a]=(0,l.useState)(null),[o,i]=(0,l.useState)((new Date).getFullYear()),[n,r]=(0,l.useState)({start:"",end:""}),c=(new Date).getFullYear(),h=Array.from({length:5},((e,t)=>c-t)),p=e=>{const t=new Date(e.getFullYear(),0,1),s=(e-t)/864e5;return Math.ceil((s+t.getDay()+1)/7)},x=(e,t)=>{const s=7*(e-1)-(new Date(t,0,1).getDay()-1);return{start:new Date(t,0,1+s),end:new Date(t,0,1+s+6)}},m=e=>e.toLocaleDateString("en-US",{day:"numeric",month:"short"});(0,l.useEffect)((()=>{const e=new Date,t=p(e);a(t),v(t,o)}),[]),(0,l.useEffect)((()=>{if(v(s,o),t){const{start:e,end:l}=x(s,o);t({week:s,year:o,startDate:e,endDate:l})}}),[s,o]);const v=(e,t)=>{const{start:s,end:l}=x(e,t);r({start:m(s),end:m(l)})},u=()=>{const e=new Date,t=e.getFullYear();if(o>t)return!0;if(o===t){const t=p(e);if(s>=t)return!0}return!1};return(0,N.jsxs)("div",{className:"d-flex align-items-center w-100",style:{gap:"32px",position:"relative"},children:[(0,N.jsxs)(g.A,{style:{position:"absolute",right:"16px"},children:[(0,N.jsxs)(g.A.Toggle,{as:f.A,className:(0,d.A)(b.button,"outline-button mx-auto"),children:[(0,N.jsx)(y.A,{size:16,color:"#667085"}),o]}),(0,N.jsx)(g.A.Menu,{children:h.map((e=>(0,N.jsx)(g.A.Item,{onClick:()=>(e=>{const t=parseInt(e),l=new Date,o=l.getFullYear();if(!(t>o)){if(t===o){const e=p(l);s>e&&a(e)}i(t)}})(e),active:e===o,children:e},e)))})]}),(0,N.jsxs)("div",{className:"d-flex align-items-center mx-auto",children:[(0,N.jsx)("button",{className:"border-0",style:{background:"transparent",cursor:"pointer",opacity:1},onClick:()=>{s>1?a(s-1):(i(o-1),a(52))},children:(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:[(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.35355 1.80514C8.54882 2.0004 8.54882 2.31698 8.35355 2.51224L2.70711 8.15869L8.35355 13.8051C8.54882 14.0004 8.54882 14.317 8.35355 14.5122C8.15829 14.7075 7.84171 14.7075 7.64645 14.5122L1.64645 8.51224C1.45118 8.31698 1.45118 8.0004 1.64645 7.80514L7.64645 1.80514C7.84171 1.60988 8.15829 1.60988 8.35355 1.80514Z",fill:"#344054"}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.3536 1.80514C12.5488 2.0004 12.5488 2.31698 12.3536 2.51224L6.70711 8.15869L12.3536 13.8051C12.5488 14.0004 12.5488 14.317 12.3536 14.5122C12.1583 14.7075 11.8417 14.7075 11.6464 14.5122L5.64645 8.51224C5.45118 8.31698 5.45118 8.0004 5.64645 7.80514L11.6464 1.80514C11.8417 1.60988 12.1583 1.60988 12.3536 1.80514Z",fill:"#344054"})]})}),(0,N.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"4px",width:"200px"},children:(0,N.jsxs)("span",{className:"font-14",style:{color:"#344054"},children:["Week ",s," | ",n.start," - ",n.end]})}),(0,N.jsx)("button",{className:"border-0",style:{background:"transparent",cursor:u()?"not-allowed":"pointer",opacity:u()?.5:1},onClick:()=>{u()||(s<52?a(s+1):(i(o+1),a(1)))},disabled:u(),"aria-disabled":u(),children:(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:[(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.64645 1.80514C3.84171 1.60988 4.15829 1.60988 4.35355 1.80514L10.3536 7.80514C10.5488 8.0004 10.5488 8.31698 10.3536 8.51224L4.35355 14.5122C4.15829 14.7075 3.84171 14.7075 3.64645 14.5122C3.45118 14.317 3.45118 14.0004 3.64645 13.8051L9.29289 8.15869L3.64645 2.51224C3.45118 2.31698 3.45118 2.0004 3.64645 1.80514Z",fill:"#344054"}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64645 1.80514C7.84171 1.60988 8.15829 1.60988 8.35355 1.80514L14.3536 7.80514C14.5488 8.0004 14.5488 8.31698 14.3536 8.51224L8.35355 14.5122C8.15829 14.7075 7.84171 14.7075 7.64645 14.5122C7.45118 14.317 7.45118 14.0004 7.64645 13.8051L13.2929 8.15869L7.64645 2.51224C7.45118 2.31698 7.45118 2.0004 7.64645 1.80514Z",fill:"#344054"})]})})]})]})};var _=s(31342);const C="https://dev.memate.com.au/api/v1",A=async()=>{const e=new URL(`${C}/jobs/to-approve/`);return(0,_.f)(e.toString(),{method:"GET"})};var L=s(48417),k=s(54967),R=s(13846),S=s(61072),F=s(78602),B=s(56741),$=s(56682),W=s(54972),T=s(72052),D=s(27932),V=s(20288);const M={heading:"approve-job_heading__NCGqc",border:"approve-job_border__pYPi2",borderBottom:"approve-job_borderBottom__73j1d",cardBody:"approve-job_cardBody__igMLE",jobDetailHeading:"approve-job_jobDetailHeading__RtqsC",customLabel:"approve-job_customLabel__5r9ok",text:"approve-job_text__VC0CF",plannedTable:"approve-job_plannedTable__QV7Mr",active1:"approve-job_active1__LwXX9",nonActive:"approve-job_nonActive__R5QLG",borderRightNone:"approve-job_borderRightNone__kqdzx",active2:"approve-job_active2__6XFPc",active3:"approve-job_active3__q5Ndq",lastRow:"approve-job_lastRow__0-xNd",fixRateBox:"approve-job_fixRateBox__53ez4",shiftBox:"approve-job_shiftBox__vzGQP",clockIcon:"approve-job_clockIcon__RE0Ne",moneyBox:"approve-job_moneyBox__l1MqE",InputTextarea:"approve-job_InputTextarea__KagCa"};var I=s(38391),z=s(45873);const E=e=>{var t;let{jobId:s=null,visible:a=!1,setVisible:o}=e;const[i,n]=(0,l.useState)(!0),[c,h]=(0,l.useState)(!0),[p,x]=(0,l.useState)(!0),[m,v]=(0,l.useState)(!0),[u,j]=(0,l.useState)("planned"),b=(0,r.I)({queryKey:["getApprovedJob",s],queryFn:()=>(0,I.z8)(s),enabled:!!s,retry:1}),g=null===b||void 0===b?void 0:b.data;console.log("job: ",g);const y=e=>new Date(1e3*parseInt(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),w=()=>{if(null!==g&&void 0!==g&&g.start&&null!==g&&void 0!==g&&g.finish){const e=1e3*parseInt(g.start);return(e=>{const t=60*e;return`${Math.floor(t/60)}:${Math.round(t%60).toString().padStart(2,"0")}`})((1e3*parseInt(g.finish)-e)/36e5)}return"0:00"},_="1:00",C=35*parseInt(_.split(":")[0]),A=(35*((null===g||void 0===g?void 0:g.spent_time)||0)).toFixed(2),L=(C+0).toFixed(2),k=(parseFloat(A)+0).toFixed(2),E=(null===g||void 0===g||null===(t=g.locations)||void 0===t?void 0:t.length)>0?`https://www.openstreetmap.org/export/embed.html?bbox=${parseFloat(g.locations[0].longitude)-.005},${parseFloat(g.locations[0].latitude)-.005},${parseFloat(g.locations[0].longitude)+.005},${parseFloat(g.locations[0].latitude)+.005}&marker=${g.locations[0].latitude},${g.locations[0].longitude}`:null,P=()=>{j("planned")},H=()=>{j("actual")};return(0,N.jsx)(V.B,{visible:a,position:"right",onHide:()=>o(!1),modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{var t,s,l;let{closeIconRef:a,hide:r}=e;return(0,N.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"12px"},children:[(0,N.jsx)("div",{className:"d-flex align-items-center gap-3",children:(0,N.jsxs)("span",{className:M.heading,children:[null===g||void 0===g?void 0:g.id,"-",null===g||void 0===g?void 0:g.number]})}),(0,N.jsx)("span",{children:(0,N.jsx)(f.A,{type:"button",className:"text-button",ref:a,onClick:e=>r(e),children:(0,N.jsx)(B.A,{size:24,color:"#667085"})})})]}),(0,N.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 68px - 80px)",overflow:"auto"},children:[(0,N.jsxs)(R.A,{className:(0,d.A)(M.border,"mb-4"),children:[(0,N.jsx)(R.A.Body,{className:(0,d.A)(M.borderBottom,M.cardBody,"cursor-pointer"),onClick:()=>n(!i),children:(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,N.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Job Details"}),(0,N.jsx)("button",{className:"text-button p-0",children:i?(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),i&&(0,N.jsxs)(R.A.Header,{className:(0,d.A)(M.background,"border-0",M.borderBottom),children:[(0,N.jsx)("h1",{className:(0,d.A)(M.jobDetailHeading,"mb-3"),children:"Link to Project"}),(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Short Description"}),(0,N.jsx)("p",{className:(0,d.A)(M.text),children:null===g||void 0===g?void 0:g.short_description}),(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Long Description"}),(0,N.jsx)("p",{className:(0,d.A)(M.text),children:null===g||void 0===g?void 0:g.long_description}),(0,N.jsxs)(S.A,{children:[(0,N.jsxs)(F.A,{sm:6,children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Client"}),(0,N.jsx)("p",{className:(0,d.A)(M.text),children:null===g||void 0===g||null===(t=g.client)||void 0===t?void 0:t.name})]}),(0,N.jsxs)(F.A,{sm:6,children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Location"}),(0,N.jsx)("p",{className:(0,d.A)(M.text),children:null===g||void 0===g||null===(s=g.location)||void 0===s?void 0:s.name})]})]}),(0,N.jsxs)(S.A,{children:[(0,N.jsxs)(F.A,{sm:6,children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Start Date"}),(0,N.jsx)("p",{className:(0,d.A)(M.text),children:(0,z.Y)(null===g||void 0===g?void 0:g.start_date)})]}),(0,N.jsxs)(F.A,{sm:6,children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"End Date"}),(0,N.jsx)("p",{className:(0,d.A)(M.text),children:(0,z.Y)(null===g||void 0===g?void 0:g.end_date)})]})]})]})]}),(0,N.jsxs)(R.A,{className:(0,d.A)(M.border,"mb-4"),children:[(0,N.jsx)(R.A.Body,{className:(0,d.A)(M.borderBottom,M.cardBody,"cursor-pointer"),onClick:()=>h(!c),children:(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,N.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Planned vs Actual"}),(0,N.jsx)("button",{className:"text-button p-0",children:c?(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),c&&(0,N.jsx)(R.A.Header,{className:(0,d.A)(M.background,"border-0 d-flex justify-content-between px-0 py-0",M.borderBottom),children:(0,N.jsxs)("table",{className:(0,d.A)("w-100",M.plannedTable),children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{children:(0,N.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,N.jsx)("div",{className:M.fixRateBox,children:"Fix Rate"}),(0,N.jsx)("div",{children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,N.jsx)("path",{d:"M10 5C10.3452 5 10.625 5.27982 10.625 5.625V9.375H14.375C14.7202 9.375 15 9.65482 15 10C15 10.3452 14.7202 10.625 14.375 10.625H10.625V14.375C10.625 14.7202 10.3452 15 10 15C9.65482 15 9.375 14.7202 9.375 14.375V10.625H5.625C5.27982 10.625 5 10.3452 5 10C5 9.65482 5.27982 9.375 5.625 9.375H9.375V5.625C9.375 5.27982 9.65482 5 10 5Z",fill:"#667085"})})}),(0,N.jsx)("div",{className:M.shiftBox,children:"Shift"})]})}),(0,N.jsx)("th",{className:"planned"===u?M.active1:M.nonActive,onClick:P,children:(0,N.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,N.jsx)(W.S,{checked:"planned"===u,onChange:()=>j("planned"===u?null:"planned")}),(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Planned"})]})}),(0,N.jsx)("th",{className:"actual"===u?M.active1:"",onClick:H,children:(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,N.jsx)(W.S,{checked:"actual"===u,onChange:()=>j("actual"===u?null:"actual")}),(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Actual"})]}),(0,N.jsx)("div",{className:M.clockIcon,children:(0,N.jsx)($.A,{color:"#475467",size:16})})]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Start"})}),(0,N.jsx)("td",{className:"planned"===u?M.active1:M.nonActive,onClick:P,children:(0,N.jsxs)("span",{className:"font-14",children:[null!==g&&void 0!==g&&g.start?y(g.start):"N/A"," | ",(0,z.Y)(null===g||void 0===g?void 0:g.start_date)]})}),(0,N.jsx)("td",{className:"actual"===u?M.active1:"",onClick:H,children:(0,N.jsxs)("span",{className:"font-14",children:[null!==g&&void 0!==g&&g.start?y(g.start):"N/A"," | ",(0,z.Y)(null===g||void 0===g?void 0:g.start_date)]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Finish"})}),(0,N.jsx)("td",{className:"planned"===u?M.active1:M.nonActive,onClick:P,children:(0,N.jsxs)("span",{className:"font-14",children:[null!==g&&void 0!==g&&g.finish?y(g.finish):"N/A"," | ",(0,z.Y)(null===g||void 0===g?void 0:g.end_date)]})}),(0,N.jsx)("td",{className:"actual"===u?M.active1:"",onClick:H,children:(0,N.jsxs)("span",{className:"font-14",children:[null!==g&&void 0!==g&&g.finish?y(g.finish):"N/A"," | ",(0,z.Y)(null===g||void 0===g?void 0:g.end_date)]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Hours"})}),(0,N.jsx)("td",{className:"planned"===u?M.active1:M.nonActive,onClick:P,children:(0,N.jsx)("span",{className:"font-14",children:_})}),(0,N.jsx)("td",{className:"actual"===u?M.active1:"",onClick:H,children:(0,N.jsx)("span",{className:"font-14",children:w()})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Rate per hour"})}),(0,N.jsx)("td",{colSpan:2,className:(0,d.A)("planned"===u?M.active1:M.active3,"text-center",M.borderRightNone),children:(0,N.jsxs)("div",{className:(0,d.A)(M.moneyBox),children:["$",35..toFixed(2)]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Subtotal"})}),(0,N.jsx)("td",{className:(0,d.A)("planned"===u?M.active1:M.nonActive,"planned"===u?M.active2:""),onClick:P,children:(0,N.jsxs)("span",{className:"font-14",children:["$",C.toFixed(2)]})}),(0,N.jsx)("td",{className:"actual"===u?M.active1:"",onClick:H,children:(0,N.jsxs)("span",{className:"font-14",children:["$",A]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Variation"})}),(0,N.jsx)("td",{colSpan:2,className:(0,d.A)("planned"===u?M.active1:M.active3,"text-center","planned"!==u?"":M.borderRightNone),children:(0,N.jsxs)("div",{className:(0,d.A)(M.moneyBox),children:["$",(0).toFixed(2)]})})]}),(0,N.jsxs)("tr",{className:(0,d.A)(M.lastRow),children:[(0,N.jsx)("td",{children:(0,N.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Total"})}),(0,N.jsx)("td",{className:(0,d.A)("planned"===u?M.active1:M.nonActive,"planned"===u?M.active2:""),onClick:P,children:(0,N.jsxs)("span",{className:"font-14",children:["$",L]})}),(0,N.jsx)("td",{className:"actual"===u?M.active1:"",onClick:H,children:(0,N.jsxs)("span",{className:"font-14",children:["$",k]})})]})]})})]}),(0,N.jsxs)(R.A,{className:(0,d.A)(M.border,"mb-4"),children:[(0,N.jsx)(R.A.Body,{className:(0,d.A)(M.borderBottom,M.cardBody,"cursor-pointer"),onClick:()=>x(!p),children:(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,N.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Variation"}),(0,N.jsx)("button",{className:"text-button p-0",children:p?(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),p&&(0,N.jsxs)(R.A.Header,{className:(0,d.A)(M.background,"border-0",M.borderBottom),children:[(0,N.jsxs)("div",{className:"form-group mb-3 w-100",children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Amount"}),(0,N.jsx)(T.S,{className:(0,d.A)("w-100",M.InputText)})]}),(0,N.jsxs)("div",{className:"form-group mb-3 w-100",children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Reason"}),(0,N.jsx)(D.Z,{className:(0,d.A)("w-100",M.InputTextarea),rows:3,placeholder:"Enter a reason..."})]})]})]}),(0,N.jsxs)(R.A,{className:(0,d.A)(M.border,"mb-4"),children:[(0,N.jsx)(R.A.Body,{className:(0,d.A)(M.borderBottom,M.cardBody,"cursor-pointer"),onClick:()=>v(!m),children:(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,N.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Job Tracking"}),(0,N.jsx)("button",{className:"text-button p-0",children:m?(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),m&&(0,N.jsx)(R.A.Header,{className:(0,d.A)(M.background,"border-0",M.borderBottom),children:E?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel),children:"Job Location"}),(0,N.jsx)("iframe",{width:"100%",height:"300",frameBorder:"0",style:{border:0},src:E,allowFullScreen:!0}),(null===g||void 0===g||null===(l=g.locations)||void 0===l?void 0:l.length)>0&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("label",{className:(0,d.A)(M.customLabel,"mt-3"),children:"Location Tracking Timestamps (IST)"}),g.locations.map(((e,t)=>{return(0,N.jsxs)("p",{className:(0,d.A)(M.text),children:["Recorded at: ",(s=e.date,new Date(1e3*parseInt(s)).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}))]},t);var s}))]})]}):(0,N.jsx)("p",{className:(0,d.A)(M.text),children:"Location map unavailable: No coordinates provided."})})]})]}),(0,N.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-end gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,N.jsx)(f.A,{type:"button",onClick:e=>{e.stopPropagation(),o(!1)},className:"outline-button",children:"Cancel"}),(0,N.jsxs)(f.A,{type:"button",onClick:()=>{},className:"solid-button",style:{minWidth:"75px"},children:["Edit ",!1]})]})]})}})},P=l.memo((()=>{const{trialHeight:e}=(0,L.$)(),[t,s]=(0,l.useState)(null),[a,o]=(0,l.useState)(null),[g,f]=(0,l.useState)({week:null,year:null,startDate:null,endDate:null}),[y,R]=(0,l.useState)(!1),[S,F]=(0,l.useState)(null),B=(0,l.useCallback)((e=>{f(e)}),[]),{data:$=[],isLoading:W,error:T}=(0,r.I)({queryKey:["jobsToApprove"],queryFn:A,refetchOnWindowFocus:!1,onError:e=>{j.oR.error("Failed to load jobs to approve"),console.error("Error loading jobs to approve:",e)}}),D=l.useCallback((()=>null!==g&&void 0!==g&&g.week&&null!==g&&void 0!==g&&g.year?(async(e,t)=>{const s=new URL(`${C}/jobs/to-invoice/${e}/${t}/`);return(0,_.f)(s.toString(),{method:"GET"})})(g.year,g.week):Promise.resolve([])),[null===g||void 0===g?void 0:g.week,null===g||void 0===g?void 0:g.year]),{data:V=[],isLoading:M,error:I}=(0,r.I)({queryKey:["jobsToInvoice",null===g||void 0===g?void 0:g.week,null===g||void 0===g?void 0:g.year],queryFn:D,enabled:!(null===g||void 0===g||!g.week)&&!(null===g||void 0===g||!g.year),refetchOnWindowFocus:!1,onError:e=>{j.oR.error("Failed to load approved jobs for invoicing"),console.error("Error loading jobs to invoice:",e)}}),z=e=>{const t="1"===e.time_type?"Hours":"Fix";return(0,N.jsxs)("div",{className:"d-flex justify-content-center align-items-center",style:{gap:"10px"},children:[(0,N.jsx)("div",{className:`${b.payment} ${"Hours"===t?b.paymentHours:b.paymentFix}`,children:t}),(0,N.jsx)(i.A,{color:"#158ECC"})]})},P=e=>{const t="2"===e.type?"TimeFrame":"TimeTracker";return(0,N.jsx)("div",{className:"d-flex align-items-center show-on-hover",children:(0,N.jsx)("div",{className:`${b.time} ${"TimeFrame"===t?b.frame:b.tracker}`,children:t})})},H=()=>(0,N.jsxs)("div",{className:"d-flex align-items-center",children:["Client",(0,N.jsx)("small",{children:"A\u2192Z"})]}),Y=e=>{var t,s,l;return(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)("div",{className:`d-flex justify-content-center align-items-center ${b.clientImg}`,children:(0,N.jsx)(k.A,{has_photo:null===(t=e.client)||void 0===t?void 0:t.has_photo,photo:null===(s=e.client)||void 0===s?void 0:s.photo,is_business:!0,size:16})}),(null===(l=e.client)||void 0===l?void 0:l.name)||"N/A"]})},Z=e=>{var t,s,l,a,o;const i=`${(null===(t=e.worker)||void 0===t?void 0:t.first_name)||""} ${(null===(s=e.worker)||void 0===s?void 0:s.last_name)||""}`.trim(),n=i?i.split(" ").map((e=>e[0])).join(""):"N/A";return(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)("div",{className:`d-flex justify-content-center align-items-center ${b.clientName}`,children:null!==(l=e.worker)&&void 0!==l&&l.has_photo?(0,N.jsx)(k.A,{has_photo:null===(a=e.worker)||void 0===a?void 0:a.has_photo,photo:null===(o=e.worker)||void 0===o?void 0:o.photo,is_business:!1,size:16}):n}),i||"N/A"]})},J=l.useCallback((e=>{F(e),R(!0)}),[]),q=l.useCallback((e=>{if(!e)return"N/A";try{const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return`${s} ${l} ${t.getFullYear()}`}catch(t){return console.error("Error formatting date:",t),e||"N/A"}}),[]),G=e=>e.project?(0,N.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.project.number,(0,N.jsx)(n.A,{color:"#3366CC"})]}):"N/A",U=e=>(0,N.jsx)(u.v,{value:e.total,style:{border:"2px solid var(--Orange-200, #FFE0BC)",background:"#FFF7EE",color:"#FFB258",fontSize:"12px",fontWeight:500},rounded:!0}),O=e=>(0,N.jsx)("span",{style:{fontWeight:"bold"},children:e.total}),K=(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",style:{position:"relative"},children:[(0,N.jsx)("p",{style:{color:"#344054",fontWeight:400},className:"m-0 font-14",children:"Review & Approve"}),W&&(0,N.jsx)(m.p,{style:{width:"20px",height:"20px",marginLeft:"8px",position:"absolute",right:"-40px"}})]}),X=(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2",style:{position:"relative"},children:[(0,N.jsx)("p",{style:{color:"#344054",fontWeight:500},className:"m-0 font-14",children:null!==g&&void 0!==g&&g.week&&null!==g&&void 0!==g&&g.year?`Week ${g.week}, ${g.year} - Approved Jobs (Not Invoiced)`:"Approved Jobs - Not Invoiced"}),M&&(0,N.jsx)(m.p,{style:{width:"20px",height:"20px",marginRight:"8px",position:"absolute",right:"-40px"}})]}),Q=l.useMemo((()=>$&&0!==$.length?$.reduce(((e,t)=>e+parseFloat(t.total||0)),0):0),[$]),ee=l.useMemo((()=>V&&0!==V.length?V.reduce(((e,t)=>e+parseFloat(t.total||0)),0):0),[V]),te=l.useMemo((()=>{const e=Q.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return(0,N.jsx)(p.o,{children:(0,N.jsxs)(v.f,{className:"w-100",children:[(0,N.jsx)(h.V,{colSpan:12}),(0,N.jsx)(h.V,{footer:`Total= $${e}`,footerStyle:{position:"sticky",right:0}})]})})}),[Q]),se=l.useMemo((()=>{const e=ee.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return(0,N.jsx)(p.o,{children:(0,N.jsxs)(v.f,{className:"w-100",children:[(0,N.jsx)(h.V,{colSpan:12}),(0,N.jsx)(h.V,{footer:`Total= $${e}`,footerStyle:{position:"sticky",right:0}})]})})}),[ee]);return(0,l.useEffect)((()=>{T&&j.oR.error(`Error loading jobs to approve: ${T.message||"Please try again later"}`),I&&j.oR.error(`Error loading jobs to invoice: ${I.message||"Please try again later"}`)}),[T,I]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(x.b,{value:$,header:K,footerColumnGroup:te,scrollable:!0,selectionMode:"checkbox",removableSort:!0,columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:"calc(50vh - 150px)",className:"border-0",selection:t,onSelectionChange:e=>s(e.value),emptyMessage:"No jobs to approve",loading:W,loadingIcon:(0,N.jsx)(N.Fragment,{}),children:[(0,N.jsx)(h.V,{selectionMode:"multiple",bodyClassName:"show-on-hover",headerStyle:{width:"3rem"},frozen:!0}),(0,N.jsx)(h.V,{field:"number",header:"Job ID",style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,N.jsx)(h.V,{field:"time_type",header:"Payment Type",body:z,style:{minWidth:"130px"},frozen:!0,sortable:!0}),(0,N.jsx)(h.V,{field:"type",header:"Time",body:P,style:{minWidth:"118px"},bodyClassName:`${b.shadowRight}`,headerClassName:`${b.shadowRight}`,frozen:!0}),(0,N.jsx)(h.V,{field:"submitted",header:"Submitted",style:{minWidth:"122px"},sortable:!0,body:e=>q(e.submitted)}),(0,N.jsx)(h.V,{field:"short_description",header:"Job Reference",style:{minWidth:"270px"}}),(0,N.jsx)(h.V,{field:"client.name",header:H,body:Y,style:{minWidth:"162px"}}),(0,N.jsx)(h.V,{field:"project.number",header:"Linked To Project",body:G,style:{minWidth:"105px"}}),(0,N.jsx)(h.V,{field:"worker.first_name",header:"Worker",body:Z,style:{minWidth:"205px"}}),(0,N.jsx)(h.V,{field:"spent_time",header:"Spent Time",style:{minWidth:"105px"},sortable:!0}),(0,N.jsx)(h.V,{field:"real_total",header:"Real Total",body:O,style:{minWidth:"105px"},sortable:!0}),(0,N.jsx)(h.V,{field:"total",header:"Total",body:U,style:{minWidth:"105px"},sortable:!0}),(0,N.jsx)(h.V,{field:"id",header:"Actions",body:e=>(0,N.jsx)("div",{className:"d-flex justify-content-center gap-2",children:(0,N.jsx)(c.v,{className:`status ${b.finishedAction} cursor-pointer`,label:"Approve",onClick:()=>J(e.id)})}),style:{minWidth:"120px"},bodyClassName:`${b.shadowLeft}`,headerClassName:(0,d.A)(`${b.shadowLeft}`,"d-flex justify-content-center"),frozen:!0,alignFrozen:"right"})]}),(0,N.jsx)("div",{className:"topbar d-flex justify-content-center text-center w-100",style:{padding:"4px 0px",position:"relative",height:"48px",borderTop:"1px solid #dedede",borderBottom:"0px solid #dedede",background:"#F9FAFB"},children:(0,N.jsx)(w,{onWeekChange:B})}),(0,N.jsxs)(x.b,{value:V||[],header:X,footerColumnGroup:se,scrollable:!0,selectionMode:"checkbox",removableSort:!0,columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(50vh - 150px - ${e}px)`,className:"border-0",selection:a,onSelectionChange:e=>o(e.value),emptyMessage:"No approved jobs waiting to be invoiced",loading:M,loadingIcon:(0,N.jsx)(N.Fragment,{}),children:[(0,N.jsx)(h.V,{selectionMode:"multiple",bodyClassName:"show-on-hover",headerStyle:{width:"3rem"},frozen:!0}),(0,N.jsx)(h.V,{field:"number",header:"Job ID",style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,N.jsx)(h.V,{field:"time_type",header:"Payment Type",body:z,style:{minWidth:"130px"},frozen:!0,sortable:!0}),(0,N.jsx)(h.V,{field:"type",header:"Time",body:P,style:{minWidth:"118px"},bodyClassName:`${b.shadowRight}`,headerClassName:`${b.shadowRight}`,frozen:!0}),(0,N.jsx)(h.V,{field:"submitted",header:"Submitted",style:{minWidth:"122px"},sortable:!0,body:e=>q(e.submitted)}),(0,N.jsx)(h.V,{field:"short_description",header:"Job Reference",style:{minWidth:"270px"}}),(0,N.jsx)(h.V,{field:"client.name",header:H,body:Y,style:{minWidth:"162px"}}),(0,N.jsx)(h.V,{field:"project.number",header:"Linked To Project",body:G,style:{minWidth:"105px"}}),(0,N.jsx)(h.V,{field:"worker.first_name",header:"Worker",body:Z,style:{minWidth:"205px"}}),(0,N.jsx)(h.V,{field:"spent_time",header:"Spent Time",style:{minWidth:"105px"},sortable:!0}),(0,N.jsx)(h.V,{field:"real_total",header:"Real Total",body:O,style:{minWidth:"105px"},sortable:!0}),(0,N.jsx)(h.V,{field:"total",header:"Total",body:U,style:{minWidth:"105px"},sortable:!0}),(0,N.jsx)(h.V,{field:"id",header:"Status",body:()=>(0,N.jsx)(c.v,{className:`status ${b.approved}`,label:"Approved"}),style:{minWidth:"120px"},bodyClassName:(0,d.A)(`${b.shadowLeft}`,"text-center"),headerClassName:(0,d.A)(`${b.shadowLeft}`,"d-flex justify-content-center"),frozen:!0,alignFrozen:"right"})]}),(0,N.jsx)(E,{visible:y,setVisible:R,jobId:S})]})})),H=()=>(0,N.jsxs)("div",{className:"approval-page",children:[(0,N.jsx)(o.mg,{children:(0,N.jsx)("title",{children:"MeMate - Approval"})}),(0,N.jsxs)("div",{className:"topbar",style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,N.jsxs)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:[(0,N.jsx)("div",{className:"filtered-box",children:(0,N.jsx)("button",{className:`${b.filterBox}`,children:(0,N.jsx)(a.A,{size:20})})}),(0,N.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,N.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,N.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,N.jsx)("input",{type:"text",placeholder:"Search",onChange:()=>{},className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]}),(0,N.jsx)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,N.jsx)("h1",{className:"title p-0 mt-1",children:"Approval"})}),(0,N.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,N.jsx)("h1",{className:`${b.total} mb-0`,children:"Total"}),(0,N.jsx)("div",{className:`${b.totalCount}`,children:"30 Jobs"})]})]}),(0,N.jsx)(P,{})]})}}]);
//# sourceMappingURL=6453.6366b7ef.chunk.js.map