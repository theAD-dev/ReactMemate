"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[586,6731],{11520:(e,t,s)=>{s.d(t,{Mv:()=>f,Np:()=>l,OE:()=>C,SE:()=>u,Wb:()=>g,ZE:()=>d,aj:()=>o,fi:()=>m,jE:()=>c,jy:()=>j,ky:()=>y,m2:()=>x,mw:()=>r,o2:()=>i,pV:()=>p,qm:()=>v,yE:()=>h});const n="https://app.memate.com.au/api/v1",a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{method:s="GET",headers:n={},body:a}=t,r={method:s,headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json",...n},body:JSON.stringify(a),redirect:"follow"};try{const t=new URL(`${e}`),s=await fetch(t,r);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=s.headers.get("Content-Type");if(n&&n.includes("application/json"))return await s.json();return{message:"Non-JSON response",body:await s.text()}}catch(l){throw console.error("Fetch API error:",l),l}},r=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${n}${`/project-card/schedule/${e}/`}`);return a(r.toString(),s)},l=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${n}${`/project-card/custom-status/${e}/`}`);return a(r.toString(),s)},o=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${n}${`/project-card/reference/${e}/`}`);return a(r.toString(),s)},i=async(e,t)=>{const s={method:"POST",body:t},r=new URL(`${n}${`/project-card/note/${e}/`}`);return a(r.toString(),s)},c=async e=>{const t={method:"PUT",body:{unique_id:e}},s=new URL(`${n}/projects/back/`);return a(s.toString(),t)},d=async e=>{const t={method:"PUT",body:{unique_id:e}},s=new URL(`${n}/projects/decline/`);return a(s.toString(),t)},h=async e=>{const t={method:"PUT",body:{unique_id:e}},s=new URL(`${n}/projects/complete/`);return a(s.toString(),t)},u=async e=>{const t=new URL(`${n}${`/invoices/create/${e}/`}`);return a(t.toString(),{method:"POST"})},m=async(e,t)=>{const s={method:"POST",body:t},r=new URL(`${n}${`/invoices/send/${e}/`}`);return a(r.toString(),s)},p=async e=>{const t=new URL(`${n}${`/projects/file-list/${e}/`}`);return a(t.toString(),{method:"GET"})},x=async(e,t)=>{const s={method:"POST",body:{file_name:t}},r=new URL(`${n}${`/projects/file-delete/${e}/`}`);return a(r.toString(),s)},g=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${n}${`/project-card/calc-description/${e}/`}`);return a(r.toString(),s)},j=async(e,t,s)=>{let r;r=t?`/custom/email/${e}/${t}/`:`/custom/email/${e}/`;const l={method:"POST",body:s},o=new URL(`${n}${r}`);return a(o.toString(),l)},v=async(e,t)=>{const s={method:"POST",body:t},r=new URL(`${n}${`/sms/${e}/`}`);return a(r.toString(),s)},y=async(e,t)=>{const s={method:"POST",body:t},r=new URL(`${n}${`/resend/quote/${e}/`}`);return a(r.toString(),s)},f=async()=>{const e=new Headers,t=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${t}`),e.append("Content-Type","application/json");const s={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${n}/management/`,s);return await e.json()}catch(a){throw console.error(a),a}},C=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const a={method:"GET",headers:t,redirect:"follow"};try{const t=await fetch(`${n}/project-card/${e}/`,a);return await t.json()}catch(r){throw console.error(r),r}}},14834:(e,t,s)=>{function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=parseFloat(e);return isNaN(s)?"0.00":t&&Math.abs(s)>=1e3?new Intl.NumberFormat("en-AU",{notation:"compact",compactDisplay:"short",minimumFractionDigits:2,maximumFractionDigits:2}).format(s):new Intl.NumberFormat("en-AU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}s.d(t,{m:()=>n})},20793:(e,t,s)=>{e.exports=s.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},22814:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Qt});var n=s(65043),a=s(27417),r=s(49367),l=s(64196),o=s(95192),i=s(83627),c=s(22636),d=s(52572),h=s(72413),u=s(38161),m=s(55003),p=s(35475),x=s(28261),g=s(65148),j=s(16484),v=s(748),y=s(18226),f=s(93740),C=s(14282),w=s(56328),b=s(18091),S=s(56682),N=s(44713),A=s(38345),$=s(1607),_=s(94819),T=s(50565),L=s(17392),k=s(88059),R=s(37970),U=s(67046),E=s(47097),q=s(20701);const P=()=>(0,E.n)({mutationFn:e=>(async e=>{const t=`/quotes/${e}/delete/`;return(0,q.y)(t,{method:"DELETE"})})(e),onSuccess:()=>{w.oR.success("Quotation deleted successfully")},onError:e=>{console.error("Error deleting sale quotation:",e),w.oR.error("Failed to delete deleteSaleQuotation. Please try again.")}});var F=s(59638),D=s(11520),I=s(81242),B=s(70579);const H=e=>{var t,s,a;let{viewShow:r,setViewShow:l,clientId:o,projectId:i,projectCardData:c}=e;const[,d]=(0,n.useState)({}),[h,u]=(0,n.useState)(!1);function m(e){if(!e)return"";return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}const p=(0,x.I)({queryKey:["getClientById",o],queryFn:()=>(0,F.EZ)(o),enabled:!!o&&r,retry:1}),g=[...(null===p||void 0===p||null===(t=p.data)||void 0===t?void 0:t.contact_persons)||[],...null!==p&&void 0!==p&&null!==(s=p.data)&&void 0!==s&&s.email?[{email:null===p||void 0===p||null===(a=p.data)||void 0===a?void 0:a.email}]:[]],j=(0,E.n)({mutationFn:e=>(0,D.ky)(i,e),onSuccess:async()=>{await(async()=>{u(!0);const e={type:"E",date:m(new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"}))),note:"Contacted by Email."};try{await(0,U.oe)(i,e)}catch(t){u(!1),console.error("Error while saving:",t),w.oR.error("Failed to add contact. Please try again.")}finally{u(!1)}})(),l(!1),c(),w.oR.success("Email send successfully.")},onError:e=>{console.error("Error sending email:",e),w.oR.error("Failed to send email. Please try again.")}});return(0,B.jsx)(I.A,{show:r,setShow:l,mutation:j,contactPersons:g,setPayload:d,defaultTemplateId:"Resend Quote",isAddingContact:h})};var z=s(58387),M=s(55797);const V="sale-history_modal__GF6MN",O="sale-history_modalHeader__WvZhi",G="sale-history_headerTitle__o4ot5",W="sale-history_title__K+lKo",Q="sale-history_historyBox__mPHuV";var Z=s(20793);const K=e=>{let{history:t,setHistory:s}=e;const[a,r]=(0,n.useState)(!!t),l=(0,B.jsx)("div",{className:`${O}`,children:(0,B.jsx)("span",{className:`white-space-nowrap ${G}`,children:"History"})});return(0,B.jsx)(M.l,{visible:a,modal:!0,header:l,className:`${V} custom-modal`,onHide:()=>s(null),children:(0,B.jsxs)("div",{className:"d-flex justify-content-start flex-wrap gap-4 align-items-center",children:[Object.entries(t).map((e=>{let[t,s]=e;return(0,B.jsxs)("div",{className:(0,z.A)(Q,"d-flex align-items-center gap-1"),children:[(0,B.jsx)(d.A,{color:"#667085",size:18}),(0,B.jsx)(p.N_,{to:s,target:"_blank",children:t})]},t)})),0===Object.entries(t).length&&(0,B.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column w-100",children:[(0,B.jsx)("img",{src:Z,alt:"no-data"}),(0,B.jsx)("h2",{className:(0,z.A)(W),children:"No history found"})]})]})})},Y=e=>{let{saleUniqueId:t,clientId:s,refreshData:a,status:r,salesHistory:l}=e;const[o,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[h,u]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),x=P(),g=()=>{i(null)},j=[{label:"Resend",icon:1===c?(0,B.jsx)(f.p,{style:{width:"20px",height:"20px"}}):(0,B.jsx)(b.A,{color:"#344054",size:20})},{label:"History",icon:(0,B.jsx)(S.A,{color:"#344054",size:20})},{label:"Print Label",icon:(0,B.jsx)(N.A,{color:"#344054",size:20})},{label:"Project Card",icon:(0,B.jsx)(A.A,{color:"#344054",size:20})},{label:"Replicate",icon:4===c?(0,B.jsx)(f.p,{style:{width:"20px",height:"20px",position:"absolute",right:"15px",top:"10px"}}):(0,B.jsx)($.A,{color:"#344054",size:20})},..."Draft"===r?[{label:"Delete",icon:5===c?(0,B.jsx)(f.p,{style:{width:"20px",height:"20px",position:"absolute",right:"15px",top:"10px"}}):(0,B.jsx)(_.A,{size:20})}]:[]];return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(L.A,{"aria-label":"more",id:"long-button","aria-controls":o?"long-menu":void 0,"aria-expanded":o?"true":void 0,"aria-haspopup":"true",onClick:e=>i(e.currentTarget),children:(0,B.jsx)(T.A,{size:24,color:"#667085"})}),(0,B.jsx)(k.A,{id:"long-menu",anchorEl:o,open:Boolean(o),onClose:g,PaperProps:{style:{borderBottom:"1px solid #EAECF0",width:"215px",padding:"0"}},children:j.map((e=>(0,B.jsxs)(R.A,{className:"LmenuList d-flex justify-content-between",onClick:s=>(async(e,s)=>{if("Replicate"===s.label)try{d(4),await(0,U.CK)(t),a(),g()}catch(n){console.error("Error fetching duplicate data:",n)}finally{d(null)}else"Resend"===s.label?(p(!0),i(null)):"Print Label"===s.label?window.open(`/api/v1/sales/${t}/label/`,"_blank"):"Project Card"===s.label?window.open(`/api/v1/project-card/${t}/pdf/`,"_blank"):"Delete"===s.label&&t?(d(5),await x.mutateAsync(t),d(null),a()):"History"===s.label&&(u(l),i(null))})(0,e),children:[e.label,e.icon]},t+e.label)))}),(0,B.jsx)(H,{projectId:t,clientId:s,viewShow:m,setViewShow:p,projectCardData:a}),h&&(0,B.jsx)(K,{history:h,setHistory:u})]})};var J=s(6091),X=s(36097),ee=s(92719),te=s(56741),se=s(37753),ne=s(33361),ae=s(77527),re=s(9634),le=s(85865),oe=s(60446),ie=s.n(oe),ce=s(670),de=s(599),he=s(29853),ue=s(32952),me=s(88490);const pe=s.p+"static/media/sale-01.74c52636eaacc72e4c5a7a89e51203b5.svg",xe=e=>{let{saleUniqueIdold:t,contactRefresh:s,step:a,created:r,type:l}=e;const[o,c]=(0,n.useState)("E"),[d,h]=(0,n.useState)(null),[u,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[g,j]=(0,n.useState)({}),[v,y]=(0,n.useState)(!1),f=500,w=(0,n.useCallback)((()=>{x(!1),y(!1),j({}),m(""),h(null),c("E")}),[]),b=(0,n.useCallback)((()=>x(!0)),[]);function S(e){if(!e)return"";return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}const N=(0,n.useCallback)((async()=>{if(!(()=>{const e={};return d&&ie()(d).isValid()||(e.date="Please select a valid date"),u.trim()?u.length<3?e.note="Note must be at least 3 characters":u.length>f&&(e.note="Note must not exceed 500 characters"):e.note="Note is required",j(e),0===Object.keys(e).length})())return;if(!t)return void j({general:"Sale ID is missing"});y(!0);const e={type:o,date:S(d),note:u.trim()};try{await(0,U.oe)(t,e),s(),w()}catch(n){y(!1),console.error("Error while saving:",n),j({general:"Failed to save contact. Please try again."})}finally{y(!1)}}),[o,d,u,t,s,w]),A=[{name:"Email",value:"E",icon:(0,B.jsx)(ne.A,{size:20})},{name:"Phone",value:"P",icon:(0,B.jsx)(se.A,{size:20})},{name:"Meeting",value:"M",icon:(0,B.jsx)(ae.A,{size:20})}],$=0===a?Date.now()-1e3*r>=2592e5:Date.now()-1e3*l[a-1].date>=2592e5;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(C.A,{variant:"ContactAdd",onClick:b,children:(0,B.jsx)(i.A,{color:"#1AB2FF",className:""+($?"vibrate":""),size:16,style:{width:"16px",height:"16px"}})}),(0,B.jsxs)(ue.A,{show:p,onHide:w,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"SalesContact salesTableWrap",animation:!1,children:[(0,B.jsx)(ue.A.Header,{className:"SalesContact mb-0 pb-0 border-0",closeButton:!0,children:(0,B.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,B.jsxs)("span",{children:[(0,B.jsx)("div",{className:"iconOutStyle",children:(0,B.jsx)("div",{className:"iconinStyle",children:(0,B.jsx)("div",{className:"iconinnerStyle",children:(0,B.jsx)("img",{src:pe,alt:"saleContact"})})})}),"Sales Contact"]})})}),(0,B.jsx)(ue.A.Body,{children:(0,B.jsxs)("div",{className:"ContactModel",children:[(0,B.jsxs)("div",{className:"ContactModelIn",children:[(0,B.jsxs)(he.A.Label,{children:["Contact Type",(0,B.jsx)("sup",{className:"required",children:"*"})]}),(0,B.jsx)(de.A,{className:"radioSelectButton",children:A.map(((e,t)=>(0,B.jsx)("div",{className:"radioSelectButtons",children:(0,B.jsxs)(me.A,{id:`radio-${t}`,type:"radio",variant:o===e.value?"selectBox":"outlineBox",name:"radio",value:e.value,checked:o===e.value,onChange:e=>c(e.currentTarget.value),disabled:v,children:[e.name," ",e.icon]})},t)))}),(0,B.jsxs)(he.A.Label,{className:"flexRemove mt-3 mb-0",children:["Date",(0,B.jsx)("sup",{className:"required",children:"*"})]}),(0,B.jsx)(ce.V,{value:d,onChange:e=>h(e.value),dateFormat:"dd/mm/yy",disabled:v,locale:"en",className:"w-100 outline-none border rounded",style:{height:"46px",width:"230px",overflow:"hidden"},showIcon:!0,showButtonBar:!0,icon:(0,B.jsx)(re.A,{color:"#667085",size:20,style:{position:"absolute",top:"6px"}}),inputStyle:{width:"88%"},placeholder:"DD/MM/YY"}),g.date&&(0,B.jsx)("div",{className:"error-message mt-2",children:g.date}),(0,B.jsxs)(he.A.Label,{className:"mt-3",children:["Note",(0,B.jsx)("sup",{className:"required",children:"*"})]}),(0,B.jsxs)(le.A,{sx:{p:0},children:[(0,B.jsx)(he.A.Control,{as:"textarea",placeholder:"Enter a description...",style:{height:"152px"},value:u,onChange:e=>m(e.target.value),maxLength:f,isInvalid:!!g.note}),(0,B.jsx)("div",{className:"d-flex justify-content-between mt-1",children:(0,B.jsx)("small",{className:g.note?"error-message":"text-muted",children:g.note||`${u.length}/500 characters`})})]}),g.general&&(0,B.jsx)("div",{className:"text-danger mt-2",children:g.general})]}),(0,B.jsxs)("div",{className:"popoverbottom mt-0 pt-4",children:[(0,B.jsx)(C.A,{className:"closebox",onClick:w,disabled:v,children:"Cancel"}),(0,B.jsx)(C.A,{className:"savebox",onClick:N,disabled:v,children:v?"Saving...":"Save"})]})]})})]})]})};const ge=s.p+"static/media/calendargradi.b3116ec64a97e5fef4c8d79e73c4993a.svg";const je=s.p+"static/media/mailgradi.2164d17057c769448ddf96d8f89a722a.svg";const ve=s.p+"static/media/phonecallgra.20daa5d6965e95d0209bd3a0ffd66365.svg",ye="sales_footerwrap__Ymbwg",fe="sales_cancelbut__BhO13",Ce="sales_padding_24__nSSrM",we="sales_paddingLR_24__oXCU4",be=function(e){arguments.length>1&&void 0!==arguments[1]||Intl.DateTimeFormat().resolvedOptions().timeZone;const t=new Date(1e3*e);return new Intl.DateTimeFormat("en-AU",{day:"numeric",month:"short",year:"numeric",timeZone:"Australia/Sydney"}).format(t)},Se=e=>{let{saleUniqueId:t,type:s,refreshData:a,created:r}=e;const[l,o]=n.useState(null),i=()=>{o(null)};return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)("div",{className:"innerTableStyle",children:(0,B.jsxs)("ul",{children:[null===s||void 0===s?void 0:s.map(((e,t)=>(0,B.jsx)("li",{children:(0,B.jsx)(J.A,{children:(0,B.jsx)(X.A,{trigger:"click",rootClose:!0,placement:"bottom",show:l===t,onHide:i,overlay:(0,B.jsx)(ee.A,{id:`popover-trigger-click-root-close-${t}`,className:"salesTableWrap",title:"",children:(0,B.jsxs)("div",{className:"contactInfo",children:[(0,B.jsxs)("div",{className:`contactInfoflex ${Ce}`,children:[(0,B.jsxs)("div",{className:"iconStyle",children:["Phone"===e.type&&(0,B.jsx)("img",{src:ve,alt:"phonecallgra"}),"Email"===e.type&&(0,B.jsx)("img",{src:je,alt:"mailgradi"}),"Meeting"===e.type&&(0,B.jsx)("img",{src:ge,alt:"calendargradi"})]}),(0,B.jsx)(C.A,{variant:"link",className:"ClosePopover",onClick:i,children:(0,B.jsx)(te.A,{color:"#667085",size:24})})]}),(0,B.jsxs)("div",{className:we,children:[(0,B.jsx)("p",{className:"contactdate",children:be(e.date)}),(0,B.jsx)("p",{children:e.note})]}),(0,B.jsx)("div",{className:ye,children:(0,B.jsx)(C.A,{onClick:i,className:fe,children:"Cancel"})})]})}),children:(0,B.jsx)(C.A,{variant:"saleContacte",onClick:()=>(e=>{const t=document.querySelectorAll(".ClosePopover");t.length>0&&t.forEach((e=>e.click())),o(l===e?null:e)})(t),children:(0,B.jsxs)(B.Fragment,{children:["Phone"===e.type&&(0,B.jsx)(se.A,{color:"#344054",size:16}),"Email"===e.type&&(0,B.jsx)(ne.A,{color:"#344054",size:16}),"Meeting"===e.type&&(0,B.jsx)(ae.A,{color:"#344054",size:16}),(0,B.jsx)("div",{children:be(e.date)})]})})})},t)},t))),s&&s.length<3&&(0,B.jsx)("li",{children:(0,B.jsx)("span",{className:"contactButList",children:(0,B.jsx)("div",{className:"contactButListIn1",children:(0,B.jsx)("div",{className:"contactButListIn2",children:(0,B.jsx)(xe,{step:s.length,created:r,type:s,saleUniqueIdold:t,contactRefresh:()=>{a()}})})})})})]})})})};var Ne=s(66415);const Ae=e=>{let{percentage:t,selectlabel:s}=e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"progress","data-percentage":t,children:[(0,B.jsx)("span",{className:"progress-left",children:(0,B.jsx)("span",{className:"progress-bar"})}),(0,B.jsx)("span",{className:"progress-right",children:(0,B.jsx)("span",{className:"progress-bar"})}),(0,B.jsx)("div",{className:"progress-value",children:(0,B.jsx)("div",{children:null===t?"0%":t+"%"})})]}),(0,B.jsx)("span",{children:s})]})},$e=e=>{let{percentage:t,label:s,gradient:n,onSelect:a,isActive:r}=e;return(0,B.jsxs)("li",{className:"option "+(r?"active":""),"data-percentage":t,onClick:a,children:[(0,B.jsx)("input",{className:"radio-custom",name:"radio-group",type:"radio",checked:r,onChange:()=>{}}),(0,B.jsx)("em",{className:"radio-custom-label"}),(0,B.jsxs)("div",{className:"progressWrapper",children:[(0,B.jsxs)("div",{className:"labelInfo",children:[(0,B.jsx)("strong",{children:s}),(0,B.jsx)("div",{className:"progress-light-grey",children:(0,B.jsx)("div",{className:"progress-container progress-color progress-center","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:{"--value":t,background:n},children:(0,B.jsxs)("span",{children:[t,"%"]})})})]}),(0,B.jsxs)("label",{children:[t,"%"]})]})]})},_e=e=>{let{progressName1:t,progressPercentage1:s,salesUniqId1:a,refreshData:r}=e;const[l,o]=(0,n.useState)({text:t,percentage:s,background:"linear-gradient(90deg, #9E77ED 10%, transparent 10%)"}),[i,c]=(0,n.useState)(!1),[d,h]=(0,n.useState)(l.percentage);return(0,B.jsxs)("div",{className:"select-menu",children:[(0,B.jsxs)("div",{className:"select-btn",onClick:()=>{document.querySelectorAll(".options.active").forEach((e=>e.classList.remove("active"))),c((e=>!e))},children:[(0,B.jsx)(Ae,{percentage:l.percentage,selectlabel:l.text}),(0,B.jsx)(Ne.A,{color:"#98A2B3",size:16})]}),(0,B.jsx)("ul",{className:"options "+(i?"active":""),children:[{percentage:10,label:"Lead",gradient:"linear-gradient(90deg, #1AB2FF 10%, transparent 10%)"},{percentage:20,label:"Prospect",gradient:"linear-gradient(90deg, #1AB2FF 20%, transparent 20%)"},{percentage:40,label:"Proposal sent",gradient:"linear-gradient(90deg, #1AB2FF 40%, transparent 40%)"},{percentage:60,label:"Negotiation",gradient:"linear-gradient(90deg, #1AB2FF 60%, transparent 60%)"},{percentage:80,label:"Awaiting approval",gradient:"linear-gradient(90deg, #1AB2FF 80%, transparent 80%)"}].map((e=>{return(0,B.jsx)($e,{percentage:e.percentage,label:e.label,gradient:e.gradient,onSelect:()=>(async e=>{try{const t=a,s=e.percentage;await(0,U.V3)(t,s),o({text:e.label,percentage:e.percentage,background:e.gradient}),h(s),r(),c(!1)}catch(t){console.error("Error updating sales lead:",t)}})(e),isActive:(t=e.percentage,t===d)},e.percentage);var t}))})]})};var Te=s(72970),Le=s(76083),ke=s(74802),Re=s(96446),Ue=s(11906),Ee=s(63977);const qe=s.p+"static/media/archive.a93d5d4bb5e805d41614288a785b8375.svg";var Pe=s(97483);const Fe=e=>{let{saleUniqueId:t,LostQuote:s,quoteType:a,onRemoveRow:r}=e;const[l,o]=n.useState(!1),[,i]=(0,n.useState)(!1),[c]=(0,n.useState)({content:"",type:"success"}),d=()=>{setTimeout((()=>{i(!1),o(!1)}),1e3)};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Ue.A,{onClick:()=>o(!0),className:`quoteLost message ${c.type}`,children:(0,B.jsx)(Te.A,{color:"#D92D20",size:16})}),(0,B.jsx)(Ee.A,{open:l,onClose:d,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,B.jsx)(Re.A,{className:"modelStyleBox QuoteLost salesTableWrap  QuoteActionStyle",sx:{width:460},children:(0,B.jsxs)(le.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:[(0,B.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,B.jsxs)("span",{children:[(0,B.jsxs)("div",{className:"iconOutStyleflex",children:[(0,B.jsxs)("div",{className:"flexIconWrap",children:[(0,B.jsx)("div",{className:"iconOutStyle",children:(0,B.jsx)("div",{className:"iconinStyle",children:(0,B.jsx)("div",{className:"iconinnerStyle",children:(0,B.jsx)(Le.A,{color:"#F04438",size:24})})})}),(0,B.jsx)("div",{className:"quoteStyleHeading",children:"lost"===a&&(0,B.jsx)(B.Fragment,{children:`Quote Lost ${s}`})})]}),(0,B.jsx)(L.A,{edge:"end",color:"inherit",onClick:d,"aria-label":"close",children:(0,B.jsx)(ke.A,{color:"#667085",size:24})})]}),(0,B.jsxs)("div",{className:"stepBoxStyle",children:[(0,B.jsxs)("ul",{children:[(0,B.jsxs)("li",{children:[(0,B.jsx)("strong",{children:(0,B.jsx)("img",{src:Pe.A,alt:"SalesIcon"})}),(0,B.jsx)("span",{className:"lightColorStyle",children:"Sales"})]}),(0,B.jsxs)("li",{children:[(0,B.jsx)("em",{className:"lineHor"}),(0,B.jsx)("strong",{children:(0,B.jsxs)("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.jsx)("g",{clipPath:"url(#clip0_13244_72509)",children:(0,B.jsx)("path",{d:"M4.31518 0.577465C4.6602 0.577465 4.93493 0.727048 5.13939 1.02621C5.3481 1.31938 5.45246 1.75914 5.45246 2.3455V5.45975H4.31518V2.71346C4.31518 2.40832 4.27473 2.18694 4.1938 2.04933C4.11287 1.91172 3.9936 1.84291 3.836 1.84291C3.6784 1.84291 3.54636 1.93266 3.43988 2.11215C3.33765 2.28566 3.28654 2.54594 3.28654 2.89296V5.45975H2.15566V2.71346C2.15566 2.40832 2.1152 2.18694 2.03427 2.04933C1.95334 1.91172 1.83407 1.84291 1.67648 1.84291C1.51888 1.84291 1.38684 1.93266 1.28035 2.11215C1.17813 2.28566 1.12701 2.54594 1.12701 2.89296V5.45975H-0.0102539V0.694137H1.08228V1.34032H1.10784C1.35915 0.831748 1.70842 0.577465 2.15566 0.577465C2.38567 0.577465 2.58586 0.64627 2.75624 0.783889C2.92661 0.915517 3.05866 1.11595 3.15237 1.3852C3.30144 1.13989 3.46543 0.945429 3.64433 0.801836C3.82323 0.652252 4.04684 0.577465 4.31518 0.577465ZM9.16305 4.02378C9.12046 4.26909 9.03099 4.51141 8.8947 4.75074C8.7584 4.98408 8.5667 5.18153 8.3197 5.34307C8.07264 5.49864 7.77023 5.57642 7.4124 5.57642C6.84593 5.57642 6.40293 5.35504 6.08346 4.91229C5.76405 4.46953 5.6043 3.86224 5.6043 3.09041C5.6043 2.30661 5.76187 1.69333 6.07711 1.25058C6.39652 0.801836 6.83952 0.577465 7.40605 0.577465C7.96399 0.577465 8.40276 0.795854 8.72217 1.23262C9.04593 1.6694 9.20776 2.29763 9.20776 3.11733L9.2014 3.39555H6.77352C6.77352 3.74856 6.83099 4.02977 6.94599 4.23917C7.06528 4.44261 7.22076 4.54432 7.4124 4.54432C7.58705 4.54432 7.72123 4.48448 7.81493 4.36482C7.90864 4.24516 7.9704 4.09857 8.00023 3.92506L9.16305 4.02378ZM7.40605 1.58264C7.21864 1.58264 7.06952 1.66641 6.95881 1.83393C6.84805 1.99548 6.7884 2.21088 6.77987 2.48012H8.03858C8.03005 2.21088 7.96828 1.99548 7.85328 1.83393C7.74252 1.66641 7.59346 1.58264 7.40605 1.58264ZM4.31518 6.3615C4.6602 6.3615 4.93493 6.51109 5.13939 6.81024C5.3481 7.10342 5.45246 7.54316 5.45246 8.12957V11.2438H4.31518V8.49752C4.31518 8.19237 4.27473 7.97101 4.1938 7.83335C4.11287 7.69577 3.9936 7.62694 3.836 7.62694C3.6784 7.62694 3.54636 7.71668 3.43988 7.89623C3.33765 8.06967 3.28654 8.32995 3.28654 8.67699V11.2438H2.15566V8.49752C2.15566 8.19237 2.1152 7.97101 2.03427 7.83335C1.95334 7.69577 1.83407 7.62694 1.67648 7.62694C1.51888 7.62694 1.38684 7.71668 1.28035 7.89623C1.17813 8.06967 1.12701 8.32995 1.12701 8.67699V11.2438H-0.0102539V6.47817H1.08228V7.12436H1.10784C1.35915 6.61579 1.70842 6.3615 2.15566 6.3615C2.38567 6.3615 2.58586 6.43031 2.75624 6.56793C2.92661 6.69955 3.05866 6.89999 3.15237 7.16923C3.30144 6.92393 3.46543 6.72947 3.64433 6.58587C3.82323 6.43629 4.04684 6.3615 4.31518 6.3615ZM7.92358 11.2438C7.85964 11.1361 7.8277 10.9057 7.8277 10.5528C7.74681 10.804 7.60623 11.0014 7.40605 11.145C7.21011 11.2887 6.98434 11.3605 6.72876 11.3605C6.53287 11.3605 6.34758 11.3036 6.17293 11.1899C5.99828 11.0763 5.85776 10.9147 5.75123 10.7053C5.64476 10.4959 5.59152 10.2476 5.59152 9.96039C5.59152 9.47577 5.7044 9.11377 5.93017 8.87448C6.15587 8.6351 6.49876 8.47356 6.95881 8.38977C7.19305 8.34193 7.37193 8.29706 7.49546 8.25517C7.61899 8.20733 7.70417 8.15643 7.75105 8.10264C7.80217 8.04281 7.8277 7.96498 7.8277 7.86929C7.8277 7.71965 7.78511 7.60604 7.69993 7.5282C7.61899 7.4445 7.50399 7.4026 7.35493 7.4026C7.21864 7.4026 7.09934 7.4564 6.99711 7.56414C6.89487 7.67181 6.82252 7.82443 6.77987 8.02183L5.7257 7.86929C5.79811 7.39657 5.98128 7.02863 6.27517 6.76537C6.56905 6.49612 6.93534 6.3615 7.37411 6.3615C7.89799 6.3615 8.29411 6.5051 8.56246 6.79229C8.83081 7.0735 8.96499 7.47441 8.96499 7.99489V10.3553C8.96499 10.6126 8.96923 10.807 8.97776 10.9386C8.99052 11.0643 9.01611 11.166 9.0544 11.2438H7.92358ZM7.8277 9.00007C7.78087 9.04197 7.70417 9.08088 7.5977 9.11675C7.49123 9.14666 7.37411 9.17657 7.24628 9.20648C6.91405 9.29622 6.74793 9.50568 6.74793 9.83471C6.74793 9.99625 6.78417 10.1249 6.85658 10.2207C6.93323 10.3104 7.03334 10.3553 7.15687 10.3553C7.25911 10.3553 7.36128 10.3224 7.46352 10.2565C7.56576 10.1908 7.65093 10.089 7.71911 9.95138C7.79152 9.80785 7.8277 9.6283 7.8277 9.41289V9.00007ZM11.3669 10.0681V11.2438C11.2988 11.2558 11.0688 11.2617 10.6769 11.2617C10.4 11.2617 10.1828 11.2288 10.0252 11.163C9.87187 11.0913 9.75687 10.9656 9.68023 10.7861C9.60781 10.6065 9.57158 10.3433 9.57158 9.99625V7.47441H9.05411V6.47817H9.57158V5.16786H10.7025V6.47817H11.3797V7.47441H10.7025V9.61938C10.7025 9.81083 10.7302 9.93345 10.7855 9.98733C10.8452 10.0412 10.9559 10.0681 11.1178 10.0681H11.3669ZM14.9363 9.80785C14.8937 10.0531 14.8042 10.2954 14.6679 10.5347C14.5316 10.7681 14.3399 10.9656 14.0929 11.1271C13.8459 11.2827 13.5435 11.3605 13.1856 11.3605C12.6192 11.3605 12.1762 11.1391 11.8567 10.6963C11.5373 10.2536 11.3775 9.64623 11.3775 8.87448C11.3775 8.09066 11.5351 7.47738 11.8503 7.03462C12.1698 6.58587 12.6128 6.3615 13.1793 6.3615C13.7372 6.3615 14.176 6.57989 14.4954 7.01666C14.8192 7.45342 14.981 8.08165 14.981 8.90133L14.9746 9.17954H12.5468C12.5468 9.53262 12.6042 9.8138 12.7192 10.0232C12.8385 10.2266 12.994 10.3283 13.1856 10.3283C13.3603 10.3283 13.4945 10.2685 13.5882 10.1489C13.6819 10.0292 13.7436 9.88263 13.7735 9.70911L14.9363 9.80785ZM13.1793 7.36666C12.9919 7.36666 12.8428 7.45045 12.732 7.61794C12.6213 7.77956 12.5616 7.99489 12.5531 8.26418H13.8118C13.8033 7.99489 13.7415 7.77956 13.6265 7.61794C13.5158 7.45045 13.3667 7.36666 13.1793 7.36666Z",fill:"url(#paint0_radial_13244_72509)"})}),(0,B.jsxs)("defs",{children:[(0,B.jsxs)("radialGradient",{id:"paint0_radial_13244_72509",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(-0.195533 0.874516) rotate(33.8103) scale(16.7787 220.176)",children:[(0,B.jsx)("stop",{stopColor:"#1AB3FF"}),(0,B.jsx)("stop",{offset:"1",stopColor:"#FFB258"})]}),(0,B.jsx)("clipPath",{id:"clip0_13244_72509",children:(0,B.jsx)("rect",{width:"15",height:"10.8451",fill:"white",transform:"translate(0 0.577465)"})})]})]})}),(0,B.jsx)("em",{className:"lineHor"})]}),(0,B.jsxs)("li",{children:[(0,B.jsx)("strong",{children:(0,B.jsx)("img",{src:qe,alt:"Archive"})}),(0,B.jsx)("span",{children:"Archive"})]})]}),(0,B.jsx)("p",{children:"Sorry to see a lost opportunity. This quote will be stored in the client's history, should you need to refer to it in the future."})]})]})}),(0,B.jsx)("div",{className:"footerBorder text-center",children:(0,B.jsx)("button",{onClick:async()=>{try{if(t){(await(0,U.Op)([t])).length?(r(),w.oR.success("Sale request has been updated to Lost!")):w.oR.error("Failed to update the sale request to Lost. Please try again.")}}catch(e){console.error("Error:",e),w.oR.error("An error occurred. Please try again.")}d(),i(!0)},children:"Archive"})})]})})})]})};var De=s(88166),Ie=s(99832),Be=s(6030),He=s(15129);const ze=e=>{let{active:t,config:s}=e;return(0,B.jsx)(He.A,{active:t,config:s})},Me=e=>{let{saleUniqueId:t,wonQuote:s,quoteType:a,onRemoveRow:r}=e;const[l,o]=n.useState(!1),[i,c]=(0,n.useState)(!1),[d]=(0,n.useState)({content:"",type:"success"}),[h,u]=(0,n.useState)(!1),m=()=>{setTimeout((()=>{c(!1),o(!1)}),1e3)};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Ue.A,{onClick:()=>o(!0),className:`message quoteWon ${d.type} ${"Draft"===s}`,children:(0,B.jsx)(De.A,{color:"#079455",size:16})}),(0,B.jsx)(Ee.A,{open:l,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,B.jsx)(Re.A,{className:"modelStyleBox QuoteWon salesTableWrap QuoteActionStyle",sx:{width:460},children:(0,B.jsxs)(le.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:[(0,B.jsx)("div",{className:"modelHeader justify-content-between align-items-start",children:(0,B.jsxs)("span",{children:[(0,B.jsxs)("div",{className:"iconOutStyleflex",children:[(0,B.jsxs)("div",{className:"flexIconWrap",children:[(0,B.jsx)("div",{className:"iconOutStyle",children:(0,B.jsx)("div",{className:"iconinStyle",children:(0,B.jsx)("div",{className:"iconinnerStyle",children:(0,B.jsx)(Ie.A,{color:"#17B26A",size:24})})})}),(0,B.jsx)("div",{className:"quoteStyleHeading",children:"won"===a&&(0,B.jsx)(B.Fragment,{children:`Quote Won ${s}`})})]}),(0,B.jsx)(L.A,{edge:"end",color:"inherit",onClick:m,"aria-label":"close",children:(0,B.jsx)(ke.A,{color:"#667085",size:24})})]}),(0,B.jsxs)("div",{className:"stepBoxStyle",children:[(0,B.jsxs)("ul",{children:[(0,B.jsxs)("li",{children:[(0,B.jsx)("strong",{children:(0,B.jsx)("img",{src:Pe.A,alt:"SalesIcon"})}),(0,B.jsx)("span",{className:"lightColorStyle",children:"Sales"})]}),(0,B.jsxs)("li",{children:[(0,B.jsx)("em",{className:"lineHor"}),(0,B.jsx)("strong",{children:(0,B.jsxs)("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.jsx)("g",{clipPath:"url(#clip0_13244_72509)",children:(0,B.jsx)("path",{d:"M4.31518 0.577465C4.6602 0.577465 4.93493 0.727048 5.13939 1.02621C5.3481 1.31938 5.45246 1.75914 5.45246 2.3455V5.45975H4.31518V2.71346C4.31518 2.40832 4.27473 2.18694 4.1938 2.04933C4.11287 1.91172 3.9936 1.84291 3.836 1.84291C3.6784 1.84291 3.54636 1.93266 3.43988 2.11215C3.33765 2.28566 3.28654 2.54594 3.28654 2.89296V5.45975H2.15566V2.71346C2.15566 2.40832 2.1152 2.18694 2.03427 2.04933C1.95334 1.91172 1.83407 1.84291 1.67648 1.84291C1.51888 1.84291 1.38684 1.93266 1.28035 2.11215C1.17813 2.28566 1.12701 2.54594 1.12701 2.89296V5.45975H-0.0102539V0.694137H1.08228V1.34032H1.10784C1.35915 0.831748 1.70842 0.577465 2.15566 0.577465C2.38567 0.577465 2.58586 0.64627 2.75624 0.783889C2.92661 0.915517 3.05866 1.11595 3.15237 1.3852C3.30144 1.13989 3.46543 0.945429 3.64433 0.801836C3.82323 0.652252 4.04684 0.577465 4.31518 0.577465ZM9.16305 4.02378C9.12046 4.26909 9.03099 4.51141 8.8947 4.75074C8.7584 4.98408 8.5667 5.18153 8.3197 5.34307C8.07264 5.49864 7.77023 5.57642 7.4124 5.57642C6.84593 5.57642 6.40293 5.35504 6.08346 4.91229C5.76405 4.46953 5.6043 3.86224 5.6043 3.09041C5.6043 2.30661 5.76187 1.69333 6.07711 1.25058C6.39652 0.801836 6.83952 0.577465 7.40605 0.577465C7.96399 0.577465 8.40276 0.795854 8.72217 1.23262C9.04593 1.6694 9.20776 2.29763 9.20776 3.11733L9.2014 3.39555H6.77352C6.77352 3.74856 6.83099 4.02977 6.94599 4.23917C7.06528 4.44261 7.22076 4.54432 7.4124 4.54432C7.58705 4.54432 7.72123 4.48448 7.81493 4.36482C7.90864 4.24516 7.9704 4.09857 8.00023 3.92506L9.16305 4.02378ZM7.40605 1.58264C7.21864 1.58264 7.06952 1.66641 6.95881 1.83393C6.84805 1.99548 6.7884 2.21088 6.77987 2.48012H8.03858C8.03005 2.21088 7.96828 1.99548 7.85328 1.83393C7.74252 1.66641 7.59346 1.58264 7.40605 1.58264ZM4.31518 6.3615C4.6602 6.3615 4.93493 6.51109 5.13939 6.81024C5.3481 7.10342 5.45246 7.54316 5.45246 8.12957V11.2438H4.31518V8.49752C4.31518 8.19237 4.27473 7.97101 4.1938 7.83335C4.11287 7.69577 3.9936 7.62694 3.836 7.62694C3.6784 7.62694 3.54636 7.71668 3.43988 7.89623C3.33765 8.06967 3.28654 8.32995 3.28654 8.67699V11.2438H2.15566V8.49752C2.15566 8.19237 2.1152 7.97101 2.03427 7.83335C1.95334 7.69577 1.83407 7.62694 1.67648 7.62694C1.51888 7.62694 1.38684 7.71668 1.28035 7.89623C1.17813 8.06967 1.12701 8.32995 1.12701 8.67699V11.2438H-0.0102539V6.47817H1.08228V7.12436H1.10784C1.35915 6.61579 1.70842 6.3615 2.15566 6.3615C2.38567 6.3615 2.58586 6.43031 2.75624 6.56793C2.92661 6.69955 3.05866 6.89999 3.15237 7.16923C3.30144 6.92393 3.46543 6.72947 3.64433 6.58587C3.82323 6.43629 4.04684 6.3615 4.31518 6.3615ZM7.92358 11.2438C7.85964 11.1361 7.8277 10.9057 7.8277 10.5528C7.74681 10.804 7.60623 11.0014 7.40605 11.145C7.21011 11.2887 6.98434 11.3605 6.72876 11.3605C6.53287 11.3605 6.34758 11.3036 6.17293 11.1899C5.99828 11.0763 5.85776 10.9147 5.75123 10.7053C5.64476 10.4959 5.59152 10.2476 5.59152 9.96039C5.59152 9.47577 5.7044 9.11377 5.93017 8.87448C6.15587 8.6351 6.49876 8.47356 6.95881 8.38977C7.19305 8.34193 7.37193 8.29706 7.49546 8.25517C7.61899 8.20733 7.70417 8.15643 7.75105 8.10264C7.80217 8.04281 7.8277 7.96498 7.8277 7.86929C7.8277 7.71965 7.78511 7.60604 7.69993 7.5282C7.61899 7.4445 7.50399 7.4026 7.35493 7.4026C7.21864 7.4026 7.09934 7.4564 6.99711 7.56414C6.89487 7.67181 6.82252 7.82443 6.77987 8.02183L5.7257 7.86929C5.79811 7.39657 5.98128 7.02863 6.27517 6.76537C6.56905 6.49612 6.93534 6.3615 7.37411 6.3615C7.89799 6.3615 8.29411 6.5051 8.56246 6.79229C8.83081 7.0735 8.96499 7.47441 8.96499 7.99489V10.3553C8.96499 10.6126 8.96923 10.807 8.97776 10.9386C8.99052 11.0643 9.01611 11.166 9.0544 11.2438H7.92358ZM7.8277 9.00007C7.78087 9.04197 7.70417 9.08088 7.5977 9.11675C7.49123 9.14666 7.37411 9.17657 7.24628 9.20648C6.91405 9.29622 6.74793 9.50568 6.74793 9.83471C6.74793 9.99625 6.78417 10.1249 6.85658 10.2207C6.93323 10.3104 7.03334 10.3553 7.15687 10.3553C7.25911 10.3553 7.36128 10.3224 7.46352 10.2565C7.56576 10.1908 7.65093 10.089 7.71911 9.95138C7.79152 9.80785 7.8277 9.6283 7.8277 9.41289V9.00007ZM11.3669 10.0681V11.2438C11.2988 11.2558 11.0688 11.2617 10.6769 11.2617C10.4 11.2617 10.1828 11.2288 10.0252 11.163C9.87187 11.0913 9.75687 10.9656 9.68023 10.7861C9.60781 10.6065 9.57158 10.3433 9.57158 9.99625V7.47441H9.05411V6.47817H9.57158V5.16786H10.7025V6.47817H11.3797V7.47441H10.7025V9.61938C10.7025 9.81083 10.7302 9.93345 10.7855 9.98733C10.8452 10.0412 10.9559 10.0681 11.1178 10.0681H11.3669ZM14.9363 9.80785C14.8937 10.0531 14.8042 10.2954 14.6679 10.5347C14.5316 10.7681 14.3399 10.9656 14.0929 11.1271C13.8459 11.2827 13.5435 11.3605 13.1856 11.3605C12.6192 11.3605 12.1762 11.1391 11.8567 10.6963C11.5373 10.2536 11.3775 9.64623 11.3775 8.87448C11.3775 8.09066 11.5351 7.47738 11.8503 7.03462C12.1698 6.58587 12.6128 6.3615 13.1793 6.3615C13.7372 6.3615 14.176 6.57989 14.4954 7.01666C14.8192 7.45342 14.981 8.08165 14.981 8.90133L14.9746 9.17954H12.5468C12.5468 9.53262 12.6042 9.8138 12.7192 10.0232C12.8385 10.2266 12.994 10.3283 13.1856 10.3283C13.3603 10.3283 13.4945 10.2685 13.5882 10.1489C13.6819 10.0292 13.7436 9.88263 13.7735 9.70911L14.9363 9.80785ZM13.1793 7.36666C12.9919 7.36666 12.8428 7.45045 12.732 7.61794C12.6213 7.77956 12.5616 7.99489 12.5531 8.26418H13.8118C13.8033 7.99489 13.7415 7.77956 13.6265 7.61794C13.5158 7.45045 13.3667 7.36666 13.1793 7.36666Z",fill:"url(#paint0_radial_13244_72509)"})}),(0,B.jsxs)("defs",{children:[(0,B.jsxs)("radialGradient",{id:"paint0_radial_13244_72509",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(-0.195533 0.874516) rotate(33.8103) scale(16.7787 220.176)",children:[(0,B.jsx)("stop",{stopColor:"#1AB3FF"}),(0,B.jsx)("stop",{offset:"1",stopColor:"#FFB258"})]}),(0,B.jsx)("clipPath",{id:"clip0_13244_72509",children:(0,B.jsx)("rect",{width:"15",height:"10.8451",fill:"white",transform:"translate(0 0.577465)"})})]})]})}),(0,B.jsx)("em",{className:"lineHor"})]}),(0,B.jsxs)("li",{children:[(0,B.jsx)("strong",{children:(0,B.jsx)("img",{src:Be.A,alt:"ManagementIcon"})}),(0,B.jsx)("span",{children:"Management"})]})]}),(0,B.jsx)("p",{children:"Great, another quote converted into a project."})]})]})}),(0,B.jsxs)("div",{className:"footerBorder text-center",children:[(0,B.jsxs)("button",{disabled:h,onClick:async()=>{try{if(t){u(!0);if((await(0,U.WG)([t])).length){r(),document.querySelector(".management-notification").style.display="block";let e=parseInt(document.querySelector(".management-notification-count").innerText||0);document.querySelector(".management-notification-count").innerHTML=e+1,w.oR.success("Successfully moved to Management!")}else w.oR.error("Failed to move to Management. Please try again.")}}catch(e){w.oR.error("An error occurred. Please try again.")}finally{u(!1)}m(),c(!0)},children:["Move to the Management ",h&&(0,B.jsx)(f.p,{style:{width:"20px",height:"20px",color:"#fff"}})]}),(0,B.jsx)(ze,{active:i,config:{}})]})]})})})]})};var Ve=s(46679),Oe=s(58415);const Ge="request-changes_iconButton__G0dvv",We="request-changes_badge__Ab3AT",Qe="request-changes_modalHeader__Uwuv4",Ze="request-changes_headerContent__yaZpp",Ke="request-changes_headerIcon__oOy37",Ye="request-changes_headerText__gXFA1",Je="request-changes_headerTitle__ociwv",Xe="request-changes_headerSubtitle__C1cA1",et="request-changes_closeButton__L+Kgd",tt="request-changes_modalBody__cTIqY",st="request-changes_changesContainer__EHDSA",nt="request-changes_changeCard__1gpYZ",at="request-changes_cardContent__U58rA",rt="request-changes_messageLabel__oxx2-",lt="request-changes_messageText__0yqru",ot="request-changes_emptyState__1f0TF",it="request-changes_emptyIcon__9w0qX",ct="request-changes_emptyText__2R+Gp",dt="request-changes_emptySubtext__UObUu",ht=e=>{let{requestChanges:t,quoteNumber:s,status:a}=e;const[r,l]=(0,n.useState)(!1),o=()=>l(!1),i=t&&t.length>0;return i&&"Review"===a?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("button",{className:Ge,onClick:()=>l(!0),title:`${t.length} change request(s)`,children:[(0,B.jsx)(Ve.A,{color:"#FDB022",size:16}),t.length>0&&(0,B.jsx)("span",{className:We,children:t.length})]}),(0,B.jsxs)(ue.A,{show:r,onHide:o,centered:!0,size:"lg",animation:!1,children:[(0,B.jsxs)(ue.A.Header,{className:Qe,children:[(0,B.jsxs)("div",{className:Ze,children:[(0,B.jsx)("div",{className:Ke,children:(0,B.jsx)(Ve.A,{size:20,color:"#FDB022"})}),(0,B.jsxs)("div",{className:Ye,children:[(0,B.jsx)("h2",{className:Je,children:"Change Requests"}),(0,B.jsxs)("p",{className:Xe,children:["Quote ",s," \u2022 ",(null===t||void 0===t?void 0:t.length)||0," request",1!==(null===t||void 0===t?void 0:t.length)?"s":""]})]})]}),(0,B.jsx)("button",{className:et,onClick:o,"aria-label":"Close",children:(0,B.jsx)(te.A,{size:24})})]}),(0,B.jsx)(ue.A.Body,{className:tt,children:i?(0,B.jsx)("div",{className:st,children:t.map(((e,t)=>(0,B.jsx)("div",{className:nt,children:(0,B.jsxs)("div",{className:at,children:[(0,B.jsxs)("div",{className:rt,children:[(0,B.jsx)(Oe.A,{size:14}),(0,B.jsx)("span",{children:"Requested Changes:"})]}),(0,B.jsx)("div",{className:lt,children:e.request_changes})]})},t)))}):(0,B.jsxs)("div",{className:ot,children:[(0,B.jsx)("div",{className:it,children:(0,B.jsx)(Ve.A,{size:48,color:"#D0D5DD"})}),(0,B.jsx)("p",{className:ct,children:"No change requests"}),(0,B.jsx)("p",{className:dt,children:"Change requests from clients will appear here"})]})})]})]}):null};var ut=s(90239),mt=s(76688),pt=s(96776);const xt=e=>{let{saleUniqueId:t,noteData:s,onNoteUpdate:a,refreshData:r}=e;const[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(s||""),[h,u]=(0,n.useState)(!s),[m,p]=(0,n.useState)(""),[x,g]=(0,n.useState)(!1),j=2e3,v=e=>e.trim()?e.length<3?"Note must be at least 3 characters":e.length>j?"Note must not exceed 2000 characters":"":"Note is required",y=()=>{o(null),d(s||""),p(""),u(!s)},f=async()=>{const e=v(c);if(e)p(e);else if(t){g(!0);try{await(0,U.cS)(t,c.trim()),await(0,U.j3)(),a&&a(c.trim()),u(!1),y(),r()}catch(m){console.error("Error saving note:",m),p(m.message||"Failed to save note. Please try again.")}finally{g(!1)}}else p("Sale ID is missing")},C=Boolean(l);return(0,n.useEffect)((()=>{s&&d(s)}),[s]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"saleNoteBorder noteInfo "+(c?"Yes":"No"),"aria-describedby":C?"simple-popover":void 0,onClick:e=>{o(e.currentTarget),p("")},children:c?(0,B.jsxs)("span",{style:{cursor:"pointer"},onClick:()=>u(!0),children:["Note ",(0,B.jsx)(ut.A,{color:"#17B26A",size:16})]}):(0,B.jsx)("strong",{children:(0,B.jsxs)("span",{style:{cursor:"pointer"},children:["Note ",(0,B.jsx)(i.A,{color:"#667085",size:16})]})})}),(0,B.jsx)(pt.Ay,{id:"simple-popover",open:C,anchorEl:l,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{width:"640px"},id:"popoverStyleChange"},children:(0,B.jsxs)(he.A,{onSubmit:e=>{e.preventDefault(),f()},children:[(0,B.jsxs)("div",{className:"popoverHead popoverHeadflex salesTableWrap",children:[(0,B.jsxs)("span",{children:[(0,B.jsx)("div",{className:"iconOutStyle",children:(0,B.jsx)("div",{className:"iconinStyle",children:(0,B.jsx)("div",{className:"iconinnerStyle",children:(0,B.jsx)(mt.A,{color:"#17B26A",size:24})})})}),"Add Note"]}),(0,B.jsx)(L.A,{className:"popupcrossInfo",size:"small",onClick:y,disabled:x,children:(0,B.jsx)(ke.A,{})})]}),(0,B.jsx)("div",{className:"popupcrossInfomain",children:(0,B.jsxs)(le.A,{sx:{p:"16px 24px 24px 24px"},children:[(0,B.jsxs)("h3",{children:["Note ",(0,B.jsx)("span",{className:"required",children:"*"})]}),(0,B.jsx)(he.A.Control,{id:"placeholderColor",as:"textarea",placeholder:"Enter a description...",style:{height:"157px"},value:c,onChange:e=>{const t=e.target.value;d(t);const s=v(t);p(s)},maxLength:j,className:m?"error-border":""}),(0,B.jsx)("div",{className:"d-flex justify-content-between mt-1",children:(0,B.jsx)("small",{className:m?"error-message":"text-muted",children:m||`${c.length}/2000 characters`})})]})}),(0,B.jsxs)("div",{className:"popoverbottom popoverendflex",children:[(0,B.jsx)(Ue.A,{className:"closebox",onClick:y,disabled:x,children:"Cancel"}),(0,B.jsx)(Ue.A,{className:"savebox",onClick:f,disabled:x||!!m,children:x?"Saving...":"Save"})]})]})})]})};var gt=s(39759),jt=s(75329),vt=s(62812),yt=s(39195),ft=s(56052),Ct=s(2028),wt=s(78602),bt=s(53519),St=s(61072),Nt=s(5328),At=s(44621),$t=s(3098),_t=s(73216);const Tt=s.p+"static/media/newQuote.9cbe4c1c556f514b424a.png",Lt=()=>{const[e,t]=(0,n.useState)(!1),s=()=>t(!1),a=(0,_t.Zp)();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Ue.A,{onClick:()=>t(!0),className:"addNewBilling p-0",children:(0,B.jsxs)("div",{className:"styleGrey01 tabActive",children:[(0,B.jsx)("span",{style:{fontWeight:400,textTransform:"capitalize"},children:"Quote New Project"})," ",(0,B.jsx)(i.A,{color:"#fff",size:16})]})}),(0,B.jsx)(Ee.A,{open:e,onClose:s,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,B.jsx)(Re.A,{className:"modelStyleBoxstatus NewQuoteModal",sx:{width:732},children:(0,B.jsx)(le.A,{id:"modal-modal-title",className:"",variant:"h6",component:"h2",children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"modelHeader modelHeaderBillig d-flex justify-content-between align-items-start",children:[(0,B.jsxs)("span",{className:"modelHeadFlex",children:[(0,B.jsx)("div",{className:"iconinnerStyle1",children:(0,B.jsx)($t.A,{color:"#F04438",size:24})}),(0,B.jsx)("h2",{children:"Complete Your Profile to Proceed"})]}),(0,B.jsx)(L.A,{edge:"end",color:"inherit",onClick:s,"aria-label":"close",children:(0,B.jsx)(ke.A,{color:"#667085",size:24})})]}),(0,B.jsxs)("div",{className:"stepBoxStyle ",children:[(0,B.jsx)("img",{src:Tt,alt:"NewQuoteImg"}),(0,B.jsxs)("div",{className:"newQuotewrap",children:[(0,B.jsx)("h3",{children:"Bank Details Required"}),(0,B.jsx)("p",{children:"Before creating a new request, please ensure you have filled in your bank details. This is necessary to process your transactions smoothly. You can add your bank information by navigating to your profile settings. "})]})]}),(0,B.jsxs)("div",{className:"footerButton",children:[(0,B.jsx)("button",{className:"Cancel",onClick:s,children:"Cancel and Return"}),(0,B.jsx)(Ue.A,{className:"save",onClick:()=>{a("/settings/generalinformation/bank-details"),s()},children:"Add Bank Details"})]})]})})})})]})};s(7245);var kt=s(27965);const Rt=e=>{let{onDataApply:t}=e;const[s,a]=(0,n.useState)([]),r=(0,n.useRef)(null),[l,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(null),[,d]=(0,n.useState)(!1),[h,u]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=new Date,t=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`;u(t)}),[]);(0,n.useEffect)((()=>{if(2===s.length){const e=s[0],t=s[1];o(e),c(t)}}),[s]);(0,n.useEffect)((()=>{if(l||i){if(l&&i){const e={year:"numeric",month:"short",day:"numeric"},t=`<p>${`${new Date(l).toLocaleDateString("en-US",e)} - ${new Date(i).toLocaleDateString("en-US",e)}`}</p><span class="today-span" style="cursor: pointer">Today</span>`,s=document.querySelector(".flatpickr-months");if(s){const e=document.querySelector(".custom-div");if(e)e.innerHTML=t;else{const e=document.createElement("div");e.className="custom-div",e.innerHTML=t,s.parentNode.insertBefore(e,s.nextSibling)}}}}else{const e=new Date;o(e),c(e)}}),[l,i]);const m=()=>{const e=new Date;a([e,e])};return(0,n.useEffect)((()=>{const e=document.querySelector(".today-span");return e&&e.addEventListener("click",m),()=>{e&&e.removeEventListener("click",m)}}),[l,i]),(0,B.jsxs)("div",{children:[(0,B.jsx)(kt.A,{options:{dateFormat:"Y-m-d",mode:"range",inline:!0},value:s,onChange:e=>{a(e)},ref:r}),(0,B.jsxs)("div",{className:"calenderBut",children:[(0,B.jsx)("button",{className:"tabCancel",onClick:()=>{a([]),o(null),c(null),d(!1);const e=document.querySelector(".custom-div p");e&&(e.textContent=`${h}`)},children:"Cancel"}),(0,B.jsx)("button",{className:"tabApply",onClick:()=>{(()=>{const e=document.querySelector(".custom-div p");l&&i&&e&&(e.textContent=`${l.toISOString().split("T")[0]} - ${i.toISOString().split("T")[0]}`)})(),d(!0),t({startDate:l,endDate:i});const e=document.querySelector(".tags-input-container .rangedatepicker .mainWrapperTags");e&&(e.textContent=`${l.toISOString().split("T")[0]} - ${i.toISOString().split("T")[0]}`)},children:"Apply"})]})]})};var Ut=s(25721);const Et=e=>{let{setInputValue:t,inputValue:s}=e;return(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{className:"mr-3",children:(0,B.jsx)(Ut.A,{color:"#98A2B3",size:20})}),(0,B.jsx)("input",{type:"text",placeholder:"Search",value:s,onChange:e=>t(e.target.value)})]})};var qt=s(14834),Pt=s(54967);const Ft=[{percentage:10,label:"Lead",gradient:"linear-gradient(90deg, #1AB2FF 10%, transparent 10%)"},{percentage:20,label:"Prospect",gradient:"linear-gradient(90deg, #1AB2FF 20%, transparent 20%)"},{percentage:40,label:"Proposal sent",gradient:"linear-gradient(90deg, #1AB2FF 40%, transparent 40%)"},{percentage:60,label:"Negotiation",gradient:"linear-gradient(90deg, #1AB2FF 60%, transparent 60%)"},{percentage:80,label:"Awaiting approval",gradient:"linear-gradient(90deg, #1AB2FF 80%, transparent 80%)"}],Dt=e=>{var t,s,a,r;let{profileData:l,salesData:c,removeRowMulti:d,selectedUniqueIds:h,onRowsFilterChange:m,rows:g,setSelectedRows:j,selectedRow:v,selectedRowCount:y}=e;const[f,b]=(0,p.ok)(),S=f.get("search"),N=f.get("targetId"),[A,$]=(0,n.useState)(0),[_,T]=(0,n.useState)(0),[L,k]=(0,n.useState)(0),[R,E]=(0,n.useState)("DateRange"),[q,P]=(0,n.useState)({}),[D,I]=(0,n.useState)({}),[H,M]=(0,n.useState)(!1),[V,O]=(0,n.useState)(!1),G=(0,n.useRef)(null),[W,Q,Z]=(0,Ct.d7)("",400),[K,Y]=(0,n.useState)(!1),J=(0,x.I)({queryKey:["project-manager"],queryFn:F.Fl}),X=e=>{var t,s;let n=Gt(c);if(null!==e&&void 0!==e&&e.dateRange){const[t,s]=e.dateRange;n=g.filter((e=>{const n=new Date(1e3*parseInt(e.created)).toLocaleDateString("en-CA");return n>=t&&n<=s}))}null!==e&&void 0!==e&&e.progress&&(n=n.filter((t=>{var s;return null===e||void 0===e||null===(s=e.progress)||void 0===s?void 0:s.includes(t.progressName)}))),(null===(t=e.statuses)||void 0===t?void 0:t.length)>0&&(n=n.filter((t=>{var s;return null===e||void 0===e||null===(s=e.statuses)||void 0===s?void 0:s.includes(null===t||void 0===t?void 0:t.Status)}))),(null===e||void 0===e||null===(s=e.projectManager)||void 0===s?void 0:s.length)>0&&(n=n.filter((t=>{var s;return null===t||void 0===t||null===(s=t.User)||void 0===s?void 0:s.map((e=>null===e||void 0===e?void 0:e.full_name)).some((t=>{var s;return null===e||void 0===e||null===(s=e.projectManager)||void 0===s?void 0:s.includes(t)}))}))),n=n.filter((e=>{var t,s,n;return!!(null!==e&&void 0!==e&&null!==(t=e.Client)&&void 0!==t&&t.toLowerCase().includes(null===Q||void 0===Q?void 0:Q.toLowerCase())||null!==e&&void 0!==e&&null!==(s=e.Quote)&&void 0!==s&&s.toLowerCase().includes(null===Q||void 0===Q?void 0:Q.toLowerCase())||null!==e&&void 0!==e&&null!==(n=e.Reference)&&void 0!==n&&n.toLowerCase().includes(null===Q||void 0===Q?void 0:Q.toLowerCase()))})),m(n)},ee=(0,qt.m)(A);(0,n.useEffect)((()=>{if(null!==g&&void 0!==g&&g.length){const e=g.reduce(((e,t)=>e+t.amountData),0),t=g.reduce(((e,t)=>Number(e)+Number((null===t||void 0===t?void 0:t.progressPercentage)||0)),0)/g.length,s=g.reduce(((e,t)=>Number(e)+Number((null===t||void 0===t?void 0:t.progressPercentage)||0)/100*Number((null===t||void 0===t?void 0:t.amountData)||0)),0);k(s),T(parseInt(t)),$(e)}}),[g]);return(0,n.useEffect)((()=>{const e=e=>{G.current&&!G.current.contains(e.target)&&(e.target.closest(".tab-content,.nav-tabs")||M(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,n.useEffect)((()=>{X(D)}),[Q]),(0,n.useEffect)((()=>{S&&N&&(Z(S),Y(!0))}),[S,N,Z]),(0,n.useEffect)((()=>{if(!K||!N||Q!==S)return;const e=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return setTimeout((()=>{const t=document.querySelector(`.row-id-${N}`);if(t)(n=t).classList.add("highlight-row"),setTimeout((()=>{const e=n.closest(".table-responsive, .salesTableWrap");if(e){const t=n.offsetTop-e.clientHeight/2+n.clientHeight/2;e.scrollTo({top:t,behavior:"smooth"})}}),100),setTimeout((()=>{n.classList.remove("highlight-row"),Y(!1);const e=new URLSearchParams(f);e.delete("search"),e.delete("targetId"),b(e,{replace:!0})}),6e3);else{if(!s){const t=e(1500,!0);return()=>clearTimeout(t)}Y(!1),console.warn("Target row not found:",N)}var n}),t)},t=e(800);return()=>clearTimeout(t)}),[K,N,Q,S,f,b]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:(y?"selected-row":"")+" flexbetween paddingLR tableTopBar tableTopBarSales",style:{borderBottom:"1px solid #f2f2f2"},children:v&&0!==(null===v||void 0===v?void 0:v.length)?(0,B.jsx)(bt.A,{fluid:!0,children:(0,B.jsxs)(St.A,{style:{display:"flex",alignItems:"center"},children:[(0,B.jsxs)(wt.A,{style:{textAlign:"left",display:"flex",alignItems:"center"},children:[(0,B.jsxs)("span",{className:"styleT4",children:["Selected: ",y]}),(0,B.jsxs)("ul",{className:"filterBtn",children:[(0,B.jsxs)("li",{children:[(0,B.jsxs)(C.A,{variant:"lostFilter",onClick:async()=>{try{if(h){await(0,U.HT)(h)?(j([]),d(),O(!0),w.oR.success("Sale request has been updated to Lost!")):w.oR.error("Failed to update to Lost. Please try again.")}}catch(e){w.oR.error("An error occurred. Please try again.")}},children:["Lost",(0,B.jsx)(Te.A,{color:"#D92D20",size:20})]}),(0,B.jsx)(ze,{active:V,config:{}})]}),(0,B.jsxs)("li",{children:[" ",(0,B.jsxs)(C.A,{variant:"wonFilter",onClick:async()=>{try{if(h){if(await(0,U.fW)(h)){j([]),d(),O(!0),document.querySelector(".management-notification").style.display="block";let e=parseInt(document.querySelector(".management-notification-count").innerText||0);document.querySelector(".management-notification-count").innerHTML=e+h.length,w.oR.success("Successfully moved to Management!")}else w.oR.error("Failed to move to Management. Please try again.")}}catch(e){w.oR.error("An error occurred. Please try again.")}},children:["Won",(0,B.jsx)(De.A,{color:"#079455",size:20})]}),(0,B.jsx)(ze,{active:V,config:{}})]}),(0,B.jsx)("li",{children:(0,B.jsx)(C.A,{variant:"downloadBtn",children:(0,B.jsx)(jt.A,{color:"#344054",size:20})})})]})]}),(0,B.jsx)(wt.A,{}),(0,B.jsx)(wt.A,{style:{textAlign:"right"},children:c&&(null===c||void 0===c?void 0:c.length)>0?(0,B.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total"," ",(0,B.jsxs)("span",{className:"styleT2",children:[null!==g&&void 0!==g&&g.length?(0,B.jsxs)(B.Fragment,{children:[" ",null===g||void 0===g?void 0:g.length]}):(0,B.jsxs)(B.Fragment,{children:[null===c||void 0===c?void 0:c.length," "]})," ","Sales"]}),(0,B.jsxs)("strong",{className:"styleT1",children:["$",(0,B.jsx)(B.Fragment,{children:ee})]})]}):(0,B.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total ",(0,B.jsx)("span",{className:"styleT2",children:"0 Sales"})," ",(0,B.jsx)("strong",{className:"styleT1",children:"$0.00"})]})})]})}):(0,B.jsx)(bt.A,{fluid:!0,children:(0,B.jsxs)(St.A,{style:{display:"flex",alignItems:"center"},children:[(0,B.jsxs)(wt.A,{style:{textAlign:"left",display:"flex",alignItems:"center"},children:[(0,B.jsx)("div",{className:"filterDropDown",onClick:()=>{M(!H)},children:(0,B.jsx)(C.A,{ref:G,variant:"link",children:(0,B.jsx)(gt.A,{color:"#344054",size:20})})}),(0,B.jsx)("div",{className:"filterSearch",children:(0,B.jsx)(Et,{setInputValue:Z,inputValue:W})})]}),(0,B.jsx)(wt.A,{children:(0,B.jsx)("div",{className:"centerTabSales",children:(0,B.jsxs)("ul",{children:[(0,B.jsx)("li",{children:(0,B.jsx)(p.k2,{to:"#",children:"Sales"})}),(0,B.jsx)("li",{children:null!==l&&void 0!==l&&null!==(t=l.bank_detail)&&void 0!==t&&t.account_number?(0,B.jsxs)(p.k2,{className:"tabActive",to:"/sales/newquote/selectyourclient",children:[(0,B.jsx)("span",{style:{fontWeight:400},children:"Quote New Project"})," ",(0,B.jsx)(i.A,{color:"#fff",size:16})]}):(0,B.jsx)(Lt,{})})]})})}),(0,B.jsx)(wt.A,{style:{textAlign:"right"},children:c&&(null===c||void 0===c?void 0:c.length)>0?(0,B.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total"," ",(0,B.jsxs)("span",{className:"styleT2",style:{whiteSpace:"nowrap"},children:[null!==g&&void 0!==g&&g.length?(0,B.jsxs)(B.Fragment,{children:[" ",null===g||void 0===g?void 0:g.length]}):(0,B.jsxs)(B.Fragment,{children:[null===c||void 0===c?void 0:c.length," "]})," ","Sales"]}),(0,B.jsxs)("strong",{className:"styleT1",children:["$",(0,B.jsx)(B.Fragment,{children:ee})]}),(0,B.jsx)("div",{style:{width:"60px",height:"12px",background:"#EAECF0",borderRadius:"20px",marginLeft:"8px"},children:(0,B.jsx)("div",{style:{width:`${_||0}%`,height:"100%",background:"#1AB2FF",borderRadius:"20px"}})}),(0,B.jsxs)("span",{className:"font-14",style:{fontWeight:500,margin:"0px 8px 0px 12px",color:"#344054"},children:[_||0,"%"]}),(0,B.jsxs)("strong",{className:"styleT1",children:["$",(0,qt.m)(L||0)]})]}):(0,B.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total ",(0,B.jsx)("span",{className:"styleT2",children:"0 Sales"})," ",(0,B.jsx)("strong",{className:"styleT1",children:"$0.00"})]})})]})})}),H&&(0,B.jsxs)(At.A,{id:"controlled-tab-example",activeKey:R,onSelect:e=>E(e),className:"filtterBoxWrapper",children:[(0,B.jsx)(Nt.A,{eventKey:"DateRange",title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(vt.A,{color:"#667085",size:16})," Date Range"]}),children:(0,B.jsx)("ul",{children:(0,B.jsx)(Rt,{onDataApply:e=>{const t=e=>e?new Date(e).toLocaleDateString("en-CA"):"",s=t(e.startDate),n=t(e.endDate),a=`${s} - ${n}`;P({...q,dateRange:[a]});let r={...D};r.dateRange=[s,n],I(r),X(r),M(!1)}})})}),(0,B.jsx)(Nt.A,{eventKey:"Progress",title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(yt.A,{color:"#667085",size:16})," Progress"]}),children:(0,B.jsxs)("ul",{children:[(0,B.jsx)("div",{style:{maxHeight:"350px",overflow:"auto"},children:Ft.map(((e,t)=>{var s,n;return(0,B.jsx)("li",{className:null!==D&&void 0!==D&&null!==(s=D.progress)&&void 0!==s&&s.includes(e.label)?"checkedList":"",children:(0,B.jsx)("label",{className:"customCheckBox",children:(0,B.jsx)("div",{className:"userName",children:(0,B.jsx)("div",{className:"ProgressTag",children:(0,B.jsxs)("div",{className:"option","data-percentage":e.percentage,children:[(0,B.jsx)("input",{type:"checkbox",value:e.label,checked:null===D||void 0===D||null===(n=D.progress)||void 0===n?void 0:n.includes(e.label),onChange:()=>{return t=e.label,void I((e=>{const s=e.progress||[];return null!==s&&void 0!==s&&s.includes(t)?{...e,progress:s.filter((e=>e!==t))}:{...e,progress:[...s,t]}}));var t}}),(0,B.jsx)("span",{className:"checkmark",children:(0,B.jsx)(u.A,{color:"#1ab2ff",size:20})}),(0,B.jsxs)("div",{className:"progressWrapper",children:[(0,B.jsxs)("div",{className:"labelInfo",children:[(0,B.jsx)("strong",{children:e.label}),(0,B.jsx)("div",{className:"progress-light-grey",children:(0,B.jsx)("div",{className:"progress-container progress-color progress-center",style:{background:e.gradient},"aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100",children:(0,B.jsxs)("span",{children:[e.percentage,"%"]})})})]}),(0,B.jsxs)("label",{children:[e.percentage,"%"]})]})]})})})})},t)}))}),(0,B.jsxs)(St.A,{className:"buttomBottom d-flex justify-content-between align-items-center",children:[(0,B.jsx)(wt.A,{className:"pr-2",children:(0,B.jsx)(C.A,{variant:"tabContent tabCancel",onClick:()=>{I((e=>{const{progress:t,...s}=e;return s}))},children:"Cancel"})}),(0,B.jsx)(wt.A,{children:(0,B.jsx)(C.A,{variant:"tabContent tabApply",onClick:()=>{const e=D.progress||[];P({...q,progress:e}),X(D),M(!1)},children:"Apply"})})]})]})}),(0,B.jsx)(Nt.A,{eventKey:"Status",title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(ft.A,{color:"#667085",size:16}),"Status"]}),children:(0,B.jsxs)("ul",{children:[(0,B.jsx)("div",{style:{maxHeight:"350px",overflow:"auto"},children:["Draft","Saved","Sent","Accepted","Recurring","Review","Declined","Required"].map(((e,t)=>{var s,n;return(0,B.jsx)("li",{className:null!==D&&void 0!==D&&null!==(s=D.statuses)&&void 0!==s&&s.includes(e)?"checkedList":"",children:(0,B.jsxs)("label",{className:`customCheckBox ${e}`,children:[(0,B.jsx)("input",{type:"checkbox",value:e,checked:null===D||void 0===D||null===(n=D.statuses)||void 0===n?void 0:n.includes(e),onChange:()=>{return t=e,void I((e=>{const s=e.statuses||[];return null!==s&&void 0!==s&&s.includes(t)?{...e,statuses:s.filter((e=>e!==t))}:{...e,statuses:[...s,t]}}));var t}}),(0,B.jsx)("span",{className:"checkmark",children:(0,B.jsx)(u.A,{color:"#1ab2ff",size:20})}),(0,B.jsxs)("div",{className:"userName",children:[(0,B.jsx)("span",{className:(0,z.A)("statusInfo",e),children:(0,B.jsx)("a",{children:e})})," "]})]})},t)}))}),(0,B.jsxs)(St.A,{className:"buttomBottom d-flex justify-content-between align-items-center",children:[(0,B.jsx)(wt.A,{className:"pr-2",children:(0,B.jsx)(C.A,{variant:"tabContent tabCancel",onClick:()=>{I((e=>{const{statuses:t,...s}=e;return s}))},children:"Cancel"})}),(0,B.jsx)(wt.A,{children:(0,B.jsx)(C.A,{variant:"tabContent tabApply",onClick:()=>{const e={...D};I(e),X(e),P({...q,statuses:e.statuses}),M(!1)},children:"Apply"})})]})]})}),(0,B.jsx)(Nt.A,{eventKey:"projectManager",title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(o.A,{color:"#667085",size:16}),"Project Manager"]}),children:(0,B.jsxs)("ul",{children:[(0,B.jsx)("div",{id:"controlled-tab-example-tabpane-Status",style:{maxHeight:"350px",overflow:"auto"},children:null===J||void 0===J||null===(s=J.data)||void 0===s?void 0:s.map(((e,t)=>{var s,n;return(0,B.jsx)("li",{className:null!==D&&void 0!==D&&null!==(s=D.projectManager)&&void 0!==s&&s.includes(e.name)?"checkedList":"",children:(0,B.jsxs)("label",{className:`customCheckBox ${e.name}`,children:[(0,B.jsx)("input",{type:"checkbox",value:e.name,checked:(null===D||void 0===D||null===(n=D.projectManager)||void 0===n?void 0:n.includes(e.name))||!1,onChange:()=>{return t=e.name,void I((e=>{const s=e.projectManager||[];return null!==s&&void 0!==s&&s.includes(t)?{...e,projectManager:s.filter((e=>e!==t))}:{...e,projectManager:[...s,t]}}));var t}}),(0,B.jsx)("span",{className:"checkmark",children:(0,B.jsx)(u.A,{color:"#1ab2ff",size:20})}),(0,B.jsxs)("div",{className:"ms-3 d-flex justify-content-center align-items-center",children:[(0,B.jsx)(Pt.Ay,{has_photo:e.has_photo,photo:e.photo,is_business:!1}),(0,B.jsx)("span",{className:"font-14",style:{color:"#374151"},children:(0,B.jsx)("a",{children:e.name})})]})]})},t)}))}),(0,B.jsxs)(St.A,{className:"buttomBottom d-flex justify-content-between align-items-center",children:[(0,B.jsx)(wt.A,{className:"pr-2",children:(0,B.jsx)(C.A,{variant:"tabContent tabCancel",onClick:()=>{console.log("..."),I((e=>{const{projectManager:t,...s}=e;return s}))},children:"Cancel"})}),(0,B.jsx)(wt.A,{children:(0,B.jsx)(C.A,{variant:"tabContent tabApply",onClick:()=>{const e={...D};I(e),X(e),P({...q,projectManager:e.projectManager}),M(!1)},children:"Apply"})})]})]})})]}),(null===(a=Object.keys(q))||void 0===a?void 0:a.length)>0&&(0,B.jsx)("div",{className:"mainTagsWrapper",children:null===(r=Object.entries(q))||void 0===r?void 0:r.map((e=>{let[t,s]=e;return(0,B.jsx)("div",{children:(null===s||void 0===s?void 0:s.length)>0&&(0,B.jsx)("div",{className:"tags-input-container",children:(0,B.jsxs)("ul",{children:[s.map(((e,n)=>(0,B.jsxs)("li",{className:"mainWrapperTags tag-item-wrap",children:[e,(null===s||void 0===s?void 0:s.length)>1&&(0,B.jsx)(C.A,{variant:"link",size:"sm",style:{marginLeft:"5px"},onClick:()=>((e,t)=>{const s={...q},n=s[e].filter((e=>e!==t));s[e]=n,P(s),I({...D,[e]:n}),X({...D,[e]:n})})(t,e),children:(0,B.jsx)(te.A,{color:"#F96969",size:15})})]},n))),(0,B.jsx)(C.A,{variant:"link",size:"sm",style:{marginLeft:"0px"},onClick:()=>(e=>{const t={...q};delete t[e],P(t);const s={...D};delete s[e],I(s),X(s)})(t),children:(0,B.jsx)(te.A,{color:"#F96969",size:20})})]})})},t)}))})]})};var It=s(79106),Bt=s(48417),Ht=s(58027),zt=s(99868);const Mt=e=>{let{params:t,userGroups:s=[],refreshData:a}=e;const r=(0,n.useRef)(null),l=(0,n.useRef)(null),[c,d]=(0,n.useState)(!1),h=(0,n.useMemo)((()=>(null===t||void 0===t?void 0:t.value)||[]),[null===t||void 0===t?void 0:t.value]),[u,m]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=null===h||void 0===h?void 0:h.map((e=>null===e||void 0===e?void 0:e.full_name)),t=[];s.forEach((s=>{s.items.forEach((s=>{e.includes(s.first_name+" "+s.last_name)&&t.push(s.id)}))})),m(t)}),[h,s]);const p=(0,B.jsxs)("div",{className:"d-flex justify-content-end gap-2 p-3 border-top",children:[(0,B.jsx)(C.A,{className:"outline-button py-1",onClick:()=>{m([]),l.current.hide()},children:"Cancel"}),(0,B.jsxs)(C.A,{className:"solid-button py-1",onClick:async()=>{if(0!==u.length)try{var e;d(!0),await(0,U.Sg)(null===t||void 0===t||null===(e=t.row)||void 0===e?void 0:e.id,u),w.oR.success(u.length>1?`${u.length} managers assigned`:"Manager assigned successfully"),m([]),l.current.hide(),a&&a(),d(!1)}catch(s){d(!1),console.error("Assignment failed:",s),w.oR.error("Failed to assign managers")}else l.current.hide()},disabled:0===u.length,children:["Apply",c&&(0,B.jsx)(f.p,{style:{width:"16px",height:"16px",marginLeft:"8px"},strokeWidth:"4"})]})]});return(0,B.jsxs)("div",{style:{position:"relative"},children:[(0,B.jsxs)(j.Z,{onClick:e=>{r.current.toggle(e)},style:{cursor:"pointer"},children:[h.slice(0,2).map(((e,t)=>(0,B.jsx)(g.e,{shape:"circle",image:e.has_photo&&e.photo?e.photo:null,label:e.has_photo&&e.photo?null:(0,B.jsx)("small",{children:e.alias_name}),style:{background:"#fff",border:"1px solid #dedede"}},`${e.id||e.email}-${t}`))),h.length>2&&(0,B.jsx)(g.e,{label:"+"+(h.length-2),shape:"circle",size:"small",style:{fontSize:"14px"}})]}),(0,B.jsxs)(y.j,{ref:r,className:"salesOverlay",style:{width:"340px"},children:[h.length>0?h.map(((e,t)=>(0,B.jsxs)("div",{className:"d-flex align-items-center px-3 py-2",style:{borderBottom:t<h.length-1?"1px solid #f2f4f7":"none"},children:[(0,B.jsx)(g.e,{image:e.has_photo&&e.photo?e.photo:null,icon:e.has_photo&&e.photo?null:(0,B.jsx)(o.A,{color:"#667085",size:20}),shape:"circle",style:{background:"#fff",border:"1px solid #dedede"}}),(0,B.jsx)("div",{className:"ms-2",children:(0,B.jsx)("div",{className:"fullnameText",children:e.full_name})})]},e.id||t))):(0,B.jsx)("div",{className:"px-3 py-2 text-muted fst-italic",children:"No managers assigned"}),(0,B.jsx)("div",{className:"py-2 border-top",children:(0,B.jsxs)("div",{className:"d-flex align-items-center gap-3 px-3 py-3 rounded cursor-pointer",style:{backgroundColor:"#f9fafb",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f0f5ff",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#f9fafb",onClick:e=>{var t;e.stopPropagation(),null===(t=l.current)||void 0===t||t.show(e)},children:[(0,B.jsx)("div",{className:"d-flex align-items-center justify-content-center rounded-circle",style:{width:"32px",height:"32px",backgroundColor:"#1AB2FF"},children:(0,B.jsx)(i.A,{color:"white",size:16})}),(0,B.jsx)("span",{style:{color:"#1AB2FF",fontWeight:500},children:"Assign Project Manager"})]})}),(0,B.jsx)(v.K,{ref:l,value:u,onChange:e=>m(e.value),options:s,optionLabel:"first_name",optionValue:"id",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"Search managers...",filter:!0,filterBy:"first_name,last_name,email",itemTemplate:e=>{var t,s;return(0,B.jsxs)("div",{className:"d-flex align-items-center gap-2 py-2",children:[(0,B.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede",background:"#fff",flexShrink:0},children:e.has_photo&&e.photo?(0,B.jsx)(Ht.A,{photo:e.photo,has_photo:e.has_photo,alt:`${e.first_name} ${e.last_name}`,is_business:!1,size:32}):(0,B.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100",children:(0,B.jsx)("small",{style:{fontSize:"12px",color:"#667085"},children:e.alias_name||`${(null===(t=e.first_name)||void 0===t?void 0:t[0])||""}${(null===(s=e.last_name)||void 0===s?void 0:s[0])||""}`})})}),(0,B.jsxs)("div",{className:"flex-1",children:[(0,B.jsxs)("div",{style:{fontSize:"14px",fontWeight:500,color:"#344054"},children:[e.first_name," ",e.last_name]}),e.email&&(0,B.jsx)("div",{style:{fontSize:"12px",color:"#667085"},children:e.email})]})]})},panelFooterTemplate:p,style:{opacity:0,position:"absolute",pointerEvents:"none",width:"100%"},panelStyle:{width:"340px"}})]})]})},Vt=e=>{const t=new Date(1e3*e);return`${t.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(t)} ${t.getFullYear()}`},Ot=(e,t,s)=>(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(xt,{noteData:e,saleUniqueId:t,refreshData:s})}),Gt=(e,t)=>e.map((e=>({unique_id:e.unique_id,id:e.id,Quote:e.number,created:e.created,Client:e.client.name,clientId:e.client.id,photo:e.client.photo,is_business:e.client.is_business,hasPhoto:e.client.has_photo,Reference:e.reference,Status:e.status,Calculation:e.calculation,CalculationPDF:e.quote_url,CalculationURL:e.unique_url,Note:Ot(e.sales_note,e.unique_id,t),User:e.managers,fullName:e.manager.full_name,Contact:e.sales_contacts,progressName:e.lead.name,progressPercentage:e.lead.percentage,saleUniqueId:e.unique_id,wonQuote:(e.number,e.status),LostQuote:(e.number,e.status),amountData:e.amount,Actions:"Actions",history:null===e||void 0===e?void 0:e.previous_versions,has_recurring:e.has_recurring,requestChanges:e.request_changes||[]}))),Wt=e=>{let{profileData:t,salesData:s,fetchData:a,isLoading:r}=e;const{trialHeight:o}=(0,Bt.$)(),[i,g]=(0,n.useState)([]),[j,v]=(0,n.useState)([]),[y,f]=(0,n.useState)([]),w=(0,x.I)({queryKey:["getUserList"],queryFn:It.aU});(0,n.useEffect)((()=>{var e,t;const s=[];if((null===w||void 0===w||null===(e=w.data)||void 0===e||null===(t=e.users)||void 0===t?void 0:t.length)>0){const e=w.data.users.filter((e=>null===e||void 0===e?void 0:e.is_active)).map((e=>({id:null===e||void 0===e?void 0:e.id,first_name:null===e||void 0===e?void 0:e.first_name,last_name:null===e||void 0===e?void 0:e.last_name,photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo})));e.length>0&&s.push({label:"Desktop User",items:e})}f(s)}),[null===w||void 0===w?void 0:w.data]);const b=(0,n.useCallback)((async()=>{await a()}),[a]),S=(0,n.useCallback)((()=>{a()}),[a]),N=j.length,A=[{field:"Quote",width:144,headerName:(0,B.jsx)("div",{className:"styleColor1",children:(0,B.jsx)("span",{className:"ps-3",children:"Quote"})}),renderCell:e=>(0,B.jsxs)("div",{className:"innerFlex styleColor2 d-flex justify-content-between",children:[(0,B.jsxs)("div",{className:"styleColor1",children:[(0,B.jsx)("strong",{className:"ellipsis-width",style:{maxWidth:"85px"},title:e.value,children:e.value}),(0,B.jsx)("p",{children:Vt(e.row.created)})]}),(0,B.jsx)(p.N_,{to:`/sales/quote-calculation/${e.row.unique_id}`,children:(0,B.jsx)(C.A,{className:"linkByttonStyle",variant:"link",children:"Open"})})]})},{field:"Client",width:270,headerName:(0,B.jsx)("div",{className:"styleColor1",children:(0,B.jsx)("span",{children:"Client"})}),renderCell:e=>{var t,s;return(0,B.jsxs)("div",{className:"d-flex align-items-center",children:[(0,B.jsx)(Pt.Ay,{has_photo:e.row.hasPhoto,photo:null===(t=e.row)||void 0===t?void 0:t.photo,is_business:null===(s=e.row)||void 0===s?void 0:s.is_business}),(0,B.jsx)("div",{className:"ellipsis-width",style:{maxWidth:"200px"},title:e.value,children:e.value})]})}},{field:"Reference",sortable:!1,width:500,headerName:"Reference",renderCell:e=>(0,B.jsx)("div",{className:"mainStyle mainStyleMin",style:{whiteSpace:"normal",textAlign:"left"},children:e.value})},{field:"Status",sortable:!1,headerName:(0,B.jsx)("div",{className:"styleColor1",children:(0,B.jsx)("span",{children:"Status"})}),width:118,renderCell:e=>(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,B.jsx)("div",{className:`statusInfo ${e.value}`,children:(0,B.jsx)(p.N_,{to:"/",style:{pointerEvents:"none"},children:e.value})}),e.row.has_recurring&&(0,B.jsx)(p.N_,{to:`/settings/quotesjobs/recurring-quotes?recurringId=${e.row.unique_id}`,className:"ms-2",children:(0,B.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",children:[(0,B.jsx)("path",{d:"M11.5 4.46622V2.99998H5.5C3.29086 2.99998 1.5 4.79085 1.5 6.99998C1.5 7.63948 1.6497 8.24258 1.91552 8.77747C2.03841 9.02476 1.93757 9.32485 1.69028 9.44774C1.44299 9.57063 1.1429 9.46979 1.02 9.2225C0.687005 8.55243 0.5 7.79733 0.5 6.99998C0.5 4.23856 2.73858 1.99998 5.5 1.99998H11.5V0.533742C11.5 0.321783 11.7472 0.205993 11.91 0.341687L14.2695 2.30793C14.3895 2.40788 14.3895 2.59209 14.2695 2.69204L11.91 4.65828C11.7472 4.79397 11.5 4.67818 11.5 4.46622Z",fill:"#158ECC"}),(0,B.jsx)("path",{d:"M15.3097 4.55223C15.557 4.42934 15.8571 4.53018 15.98 4.77747C16.313 5.44754 16.5 6.20264 16.5 6.99998C16.5 9.76141 14.2614 12 11.5 12H5.5V13.4662C5.5 13.6782 5.25279 13.794 5.08995 13.6583L2.73047 11.692C2.61053 11.5921 2.61053 11.4079 2.73047 11.3079L5.08995 9.34169C5.25279 9.20599 5.5 9.32178 5.5 9.53374V11H11.5C13.7091 11 15.5 9.20912 15.5 6.99998C15.5 6.36049 15.3503 5.75739 15.0845 5.2225C14.9616 4.97521 15.0624 4.67512 15.3097 4.55223Z",fill:"#158ECC"})]})}),(0,B.jsx)(ht,{requestChanges:e.row.requestChanges,quoteNumber:e.row.Quote,status:e.value})]})},{field:"Calculation",sortable:!1,headerName:"Calculation",width:147,renderCell:e=>(0,B.jsx)("div",{children:(0,B.jsxs)("ul",{className:"disPlayInline disPlayInlineCenter",children:[(0,B.jsx)(p.N_,{to:`/sales/quote-calculation/${e.row.unique_id}`,children:(0,B.jsx)("li",{className:"plusminus",children:(0,B.jsx)(c.A,{color:"#FDB022",size:16})})}),(0,B.jsx)("li",{className:`${e.row.Status}`,children:(0,B.jsx)(p.N_,{to:e.row.CalculationPDF,target:"_blank",rel:"noopener noreferrer",children:(0,B.jsx)(d.A,{color:"#FF0000",size:16})})}),(0,B.jsx)("li",{className:`${e.row.Status}`,children:(0,B.jsx)(p.N_,{to:`/quote/${e.row.unique_id}`,target:"_blank",rel:"noopener noreferrer",children:(0,B.jsx)(h.A,{color:"#3366CC",size:16})})})]})})},{field:"Note",sortable:!1,headerName:"Note",width:94,renderCell:e=>(0,B.jsx)("div",{children:e.value})},{field:"User",sortable:!1,headerName:"User",width:56,renderCell:e=>(0,B.jsx)(Mt,{params:e,userGroups:y,refreshData:S})},{field:"Contact",sortable:!1,headerName:"Contact",width:183,renderCell:e=>(0,B.jsx)("div",{children:(0,B.jsx)(Se,{type:e.value,saleUniqueId:e.row.saleUniqueId,refreshData:S,created:e.row.created})})},{field:"Progress",headerName:(0,B.jsx)("div",{className:"styleColor1",children:(0,B.jsx)("span",{children:"Progress"})}),width:232,renderCell:e=>(0,B.jsx)("div",{style:{width:"100%"},children:(0,B.jsx)(_e,{progressName1:e.row.progressName,progressPercentage1:e.row.progressPercentage,salesUniqId1:e.row.saleUniqueId,refreshData:()=>{}})})},{field:"W",sortable:!1,headerName:"Lost / Won",width:106,renderCell:e=>(0,B.jsx)("div",{children:(0,B.jsxs)("div",{className:"styleActionBtn",children:[(0,B.jsx)(Fe,{size:16,color:"#D92D20",LostQuote:e.row.LostQuote,saleUniqueId:e.row.saleUniqueId,saleId:e.row.id,status:e.row.status,onRemoveRow:b,fetchData1:g,quoteType:"lost"}),(0,B.jsx)(Me,{size:16,color:"#079455",wonQuote:e.row.wonQuote,saleUniqueId:e.row.saleUniqueId,saleId:e.row.id,status:e.row.status,onRemoveRow:b,fetchData1:g,quoteType:"won"})]})})},{field:"Actions",sortable:!1,headerName:"Actions",width:72,className:"ActionBtn",renderCell:e=>(0,B.jsx)(Y,{saleUniqueId:e.row.saleUniqueId,clientId:e.row.clientId,refreshData:S,status:e.row.Status,salesHistory:e.row.history},e.row.saleUniqueId)}];(0,n.useEffect)((()=>{const e=Gt(s,S);g(e)}),[s,j,S]);return(0,B.jsxs)("div",{className:"salesTableWrap",children:[(0,B.jsx)(Dt,{profileData:t,salesData:s,removeRowMulti:b,selectedUniqueIds:s.filter((e=>j.includes(e.id))).map((e=>e.unique_id)),onRowsFilterChange:e=>{g(e)},rows:i,setSelectedRows:v,selectedRow:j,selectedRowCount:N}),!r&&(0,B.jsxs)(l.A,{responsive:!0,style:{marginBottom:`${o}px`},children:[(0,B.jsx)("thead",{style:{position:"sticky",top:"0px",zIndex:9},children:(0,B.jsxs)("tr",{children:[(0,B.jsx)("th",{style:{width:40},children:(0,B.jsxs)("label",{className:"customCheckBox",children:[(0,B.jsx)("input",{type:"checkbox",checked:j.length&&j.length===s.length,onChange:()=>{const e=s&&s.length&&s.map((e=>e.id))||[];j.length===e.length?v([]):v(e)}}),(0,B.jsx)("span",{className:"checkmark",children:(0,B.jsx)(u.A,{color:"#1ab2ff",size:20})})]})}),A.map((e=>(0,B.jsx)("th",{style:{width:e.width},children:(0,B.jsx)(m.Resizable,{width:e.width||100,height:0,children:(0,B.jsx)("div",{children:e.headerName})})},e.field)))]})}),(0,B.jsx)("tbody",{children:0===i.length?(0,B.jsx)("tr",{className:"nodataTableRow",children:(0,B.jsx)("td",{colSpan:A.length,style:{textAlign:"center",overflow:"auto"},children:(0,B.jsx)(zt.A,{isDataExist:!!s.length})})}):i.map((e=>(0,B.jsxs)("tr",{"data-saleuniqueid":e.saleUniqueId,className:`${j.includes(e.id)?"selected-row":""} ${e.unique_id?`row-id-${e.unique_id}`:""}`,children:[(0,B.jsx)("td",{style:{width:40},children:(0,B.jsxs)("label",{className:"customCheckBox",children:[(0,B.jsx)("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>(e=>{const t=[...j];t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),v(t||[])})(e.id)}),(0,B.jsx)("span",{className:"checkmark",children:(0,B.jsx)(u.A,{color:"#1AB2FF",size:20})})]})}),A.map((t=>(0,B.jsx)("td",{children:t.renderCell({value:e[t.field],row:e})},t.field+e.id)))]},e.id)))})]})]})},Qt=()=>{const[e,t]=(0,n.useState)(!0),s=JSON.parse(window.localStorage.getItem("profileData")||"{}"),[l,o]=(0,n.useState)([]),i=async()=>{try{t(!0);const e=await(0,U.j3)(),s=JSON.parse(e);o(s)}catch(e){console.error("Error fetching sales data:",e)}finally{t(!1)}};return(0,n.useEffect)((()=>{i()}),[]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(r.mg,{children:(0,B.jsx)("title",{children:"MeMate - Sales"})}),e&&(0,B.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",background:"white",width:"60px",height:"60px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},className:"shadow-lg",children:(0,B.jsx)(a.A,{animation:"border",role:"status",children:(0,B.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),(0,B.jsx)(Wt,{profileData:s,salesData:l,fetchData:i,isLoading:e})]})}},54967:(e,t,s)=>{s.d(t,{Ab:()=>i,dg:()=>c,fr:()=>d,Ay:()=>h});var n=s(65043),a=s(44541),r=s(95192);const l="image-avatar_clientImg__-nnRU";var o=s(70579);const i=e=>{let{has_photo:t,photo:s,is_business:l,size:i}=e;const[c,d]=(0,n.useState)(!1),h=l?a.A:r.A;return(0,o.jsx)(o.Fragment,{children:t&&s&&!c?(0,o.jsx)("img",{src:s,alt:"client avatar",className:"w-100",onError:()=>d(!0)}):(0,o.jsx)(h,{color:"#667085",size:i})})},c=e=>{var t,s,a;let{has_photo:r,photo:l,name:i}=e;const[c,d]=(0,n.useState)(!1),h=i&&(null===i||void 0===i||null===(t=i.split(" "))||void 0===t||null===(s=t.map((e=>e[0])))||void 0===s||null===(a=s.join(""))||void 0===a?void 0:a.toUpperCase())||"";return(0,o.jsx)(o.Fragment,{children:r&&l&&!c?(0,o.jsx)("img",{src:l,alt:"client avatar",className:"w-100",onError:()=>d(!0)}):h})},d=e=>{let{name:t,size:s=14}=e;const n=t.split(" ").map((e=>e[0])).join("").toUpperCase();return(0,o.jsx)("span",{style:{fontSize:`${s}px`},children:n})},h=e=>{let{has_photo:t,photo:s,is_business:i}=e;const[c,d]=(0,n.useState)(!1),h=i?a.A:r.A;return(0,o.jsx)("div",{className:`d-flex justify-content-center align-items-center ${l} ${i?"":"rounded-circle"}`,style:{overflow:"hidden"},children:t&&s&&!c?(0,o.jsx)("img",{src:s,alt:"client avatar",className:"w-100",onError:()=>d(!0)}):(0,o.jsx)(h,{color:"#667085"})})}},59638:(e,t,s)=>{s.d(t,{EZ:()=>l,F1:()=>v,Fl:()=>u,OF:()=>i,QK:()=>x,Ql:()=>o,X6:()=>c,Ye:()=>g,ab:()=>y,cT:()=>w,h0:()=>C,i6:()=>h,kB:()=>f,nP:()=>d,o6:()=>p,oO:()=>r,oo:()=>m,zZ:()=>j});var n=s(31342);const a="https://app.memate.com.au/api/v1",r=async e=>{const t=new URL(`${a}${`/clients/restore/${e}/`}`);return(0,n.f)(t.toString(),{method:"POST"})},l=async e=>{const t=new URL(`${a}${`/clients/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},o=async()=>{const e=new URL(`${a}/references/clients/categories/`);return(0,n.f)(e.toString(),{method:"GET"})},i=async()=>{const e=new URL(`${a}/references/clients/industries/`);return(0,n.f)(e.toString(),{method:"GET"})},c=async()=>{const e=new URL(`${a}/references/countries/`),t=await(0,n.f)(e.toString(),{method:"GET"},!1),s=[1];return(null===t||void 0===t?void 0:t.filter((e=>s.includes(e.id))))||[]},d=async e=>{const t=new URL(`${a}${`/references/states/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"},!1)},h=async e=>{const t=new URL(`${a}${`/references/cities/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"},!1)},u=async()=>{const e=new URL(`${a}/references/desktop-users/`);return(0,n.f)(e.toString(),{method:"GET"})},m=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4?arguments[4]:void 0;const o=(e-1)*t,i=new URL(`${a}/clients/`);return i.searchParams.append("limit",t),i.searchParams.append("offset",o),s&&i.searchParams.append("search",s),r&&i.searchParams.append("ordering",r),l&&i.searchParams.append("deleted",1),(0,n.f)(i.toString(),{method:"GET"})},p=async function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const o=(t-1)*s,i=new URL(`${a}${`/clients/${e}/orders/`}`);return i.searchParams.append("limit",s),i.searchParams.append("offset",o),r&&i.searchParams.append("number",r),l&&i.searchParams.append("ordering",l),(0,n.f)(i.toString(),{method:"GET"})},x=async e=>{const t=new URL(`${a}${`/clients/address/${e}/main`}`);return(0,n.f)(t.toString(),{method:"PUT"})},g=async e=>{const t=new URL(`${a}${`/clients/contact-persons/${e}/main`}`);return(0,n.f)(t.toString(),{method:"PUT"})},j=async e=>{const t=new URL(`${a}${`/clients/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},v=async e=>{const t=new URL(`${a}${`/clients/contact-persons/${e}/delete/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},y=async e=>{const t=new URL(`${a}${`/clients/address/${e}/delete/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},f=async e=>{const t={method:"PUT",body:{unique_id:e}},s=new URL(`${a}/projects/back/`);return(0,n.f)(s.toString(),t)},C=async()=>{const e=new URL(`${a}/clients/export/`);return(0,n.f)(e.toString(),{method:"GET"},!0,!0)},w=async e=>{const t={method:"POST",body:{clients:e}},s=new URL(`${a}/clients/import/`);return(0,n.f)(s.toString(),t)}},67046:(e,t,s)=>{s.d(t,{CK:()=>p,D7:()=>r,HT:()=>x,Op:()=>d,Sg:()=>l,V3:()=>u,WG:()=>c,cS:()=>i,fW:()=>m,j3:()=>o,oe:()=>h});var n=s(31342);const a="https://app.memate.com.au/api/v1",r=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/sales/new-request/`);return(0,n.f)(s.toString(),t)},l=async(e,t)=>{const s={method:"POST",body:{managers:t}},r=new URL(`${a}${`/sales/managers/${e}/`}`);return(0,n.f)(r.toString(),s)},o=async()=>{const e=new Headers,t=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${t}`);const s={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${a}/sales/`,s);return await e.text()}catch(n){throw console.error("Profile fetch error:",n),n}},i=async(e,t)=>{const s=new Headers,n=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${n}`),s.append("Content-Type","application/json");const r={method:"PUT",headers:s,body:JSON.stringify({sales_note:t}),redirect:"follow"};try{const t=await fetch(`${a}/sales/${e}/notes/`,r);if(!t.ok){const e=await t.text();throw new Error(`Sales notes update failed with status ${t.status}: ${e}`)}const s=await t.text();return s.trim()?JSON.parse(s):null}catch(l){throw console.error("Sales notes update error:",l),l}},c=async e=>{const t={method:"PUT",body:{ids:e}},s=new URL(`${a}/sales/status/won/`);return(0,n.f)(s.toString(),t)},d=async e=>{const t={method:"PUT",body:{ids:e}},s=new URL(`${a}/sales/status/lost/`);return(0,n.f)(s.toString(),t)},h=async(e,t)=>{const s=new Headers,n=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${n}`),s.append("Content-Type","application/json");const r={method:"POST",headers:s,body:JSON.stringify(t),redirect:"follow"};try{const t=await fetch(`${a}/sales/${e}/contacts/`,r);return t.ok?t:(console.log("Error:",t.status),null)}catch(l){return console.log("Error:",l),null}},u=async(e,t)=>{const s=new Headers,n=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${n}`),s.append("Content-Type","application/json");const r={method:"PUT",headers:s,body:JSON.stringify({lead:t,unique_id:e}),redirect:"follow"};try{const t=await fetch(`${a}/sales/${e}/lead/`,r);if(!t.ok){const e=await t.text();throw new Error(`Sales lead update failed with status ${t.status}: ${e}`)}const s=await t.text();return s.trim()?JSON.parse(s):null}catch(l){throw console.error("Sales lead update error:",l),l}},m=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const n={method:"PUT",headers:t,body:JSON.stringify({ids:e}),redirect:"follow"},r=await Promise.all([fetch(`${a}/sales/status/won/`,n)]);return await Promise.all(r.map((e=>e.json())))},p=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const n={method:"POST",headers:t,redirect:"follow"},r=await fetch(`${a}/sales/${e}/duplicate/`,n);return(await r.json())[0]},x=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const n={method:"PUT",headers:t,body:JSON.stringify({ids:e}),redirect:"follow"},r=await Promise.all([fetch(`${a}/sales/status/lost/`,n)]);return await Promise.all(r.map((e=>e.json())))}},79106:(e,t,s)=>{s.d(t,{Af:()=>o,Co:()=>m,Lb:()=>h,U9:()=>r,Zi:()=>u,aU:()=>c,gg:()=>l,gy:()=>d,lC:()=>i,qT:()=>p});var n=s(31342);const a="https://app.memate.com.au/api/v1",r=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0;const c=(e-1)*t,d=new URL(`${a}/tasks/`);return d.searchParams.append("limit",t),d.searchParams.append("offset",c),s&&d.searchParams.append("search",s),r&&d.searchParams.append("ordering",r),l&&d.searchParams.append("deleted",1),!0===o&&d.searchParams.append("finished",!1),!1===o&&d.searchParams.append("finished",!0),i&&d.searchParams.append("users",i),(0,n.f)(d.toString(),{method:"GET"})},l=async e=>{const t=new URL(`${a}${`/tasks/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},o=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/tasks/new/`);return(0,n.f)(s.toString(),t)},i=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${a}${`/tasks/update/${e}/`}`);return(0,n.f)(r.toString(),s)},c=async()=>{const e=new URL(`${a}/desktop-users/`);return(0,n.f)(e.toString(),{method:"GET"})},d=async()=>{const e=new URL(`${a}/team/mobile-users/`);return(0,n.f)(e.toString(),{method:"GET"})},h=async e=>{const t=new URL(`${a}${`/tasks/${e}/comments/`}`);return(0,n.f)(t.toString(),{method:"GET"})},u=async(e,t)=>{const s=new URL(`${a}${`/tasks/${e}/comments/`}`);return(0,n.f)(s.toString(),{method:"POST",body:t})},m=async e=>{const t=new URL(`${a}${`/tasks/comments/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},p=async(e,t,s)=>{const r=new URL(`${a}/tasks/comments/presigned-url/`);return(0,n.f)(r.toString(),{method:"POST",body:{file_name:t,task_id:e,attachment_type:s}})}},81047:(e,t,s)=>{s.d(t,{AO:()=>p,Ad:()=>w,Bz:()=>L,Hb:()=>h,IT:()=>T,Kb:()=>o,Mp:()=>C,Pf:()=>N,Rh:()=>b,SQ:()=>d,T6:()=>g,UM:()=>y,VQ:()=>_,Xm:()=>c,bd:()=>$,bj:()=>x,gY:()=>j,hS:()=>m,hx:()=>A,iS:()=>l,p4:()=>i,pJ:()=>f,rJ:()=>S,s:()=>u,sB:()=>v,tC:()=>r});var n=s(31342);const a="https://app.memate.com.au/api/v1",r=async()=>{const e=new URL(`${a}/jobs/templates/`);return(0,n.f)(e.toString(),{method:"GET"})},l=async e=>{const t=new URL(`${a}${`/jobs/templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},o=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/jobs/templates/`);return(0,n.f)(s.toString(),t)},i=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${a}${`/jobs/templates/${e}/`}`);return(0,n.f)(r.toString(),s)},c=async e=>{const t=new URL(`${a}${`/jobs/templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},d=async()=>{const e=new URL(`${a}/settings/templates/email-templates/`);return(0,n.f)(e.toString(),{method:"GET"})},h=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/settings/templates/email-templates/`);return(0,n.f)(s.toString(),t)},u=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${a}${`/settings/templates/email-templates/${e}/`}`);return(0,n.f)(r.toString(),s)},m=async e=>{const t=new URL(`${a}${`/settings/templates/email-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},p=async()=>{const e=new URL(`${a}/email-signatures/`);return(0,n.f)(e.toString(),{method:"GET"})},x=async e=>{const t=new URL(`${a}${`/email-signatures/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},g=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/email-signatures/`);return(0,n.f)(s.toString(),t)},j=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${a}${`/email-signatures/${e}/`}`);return(0,n.f)(r.toString(),s)},v=async e=>{const t=new URL(`${a}${`/email-signatures/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},y=async e=>{const t=new URL(`${a}${`/settings/email-signatures/default/${e}/`}`);return(0,n.f)(t.toString(),{method:"PUT"})},f=async()=>{const e=new URL(`${a}/sms-templates/`);return(0,n.f)(e.toString(),{method:"GET"})},C=async e=>{const t=new URL(`${a}${`/sms-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},w=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/sms-templates/`);return(0,n.f)(s.toString(),t)},b=async(e,t)=>{const s={method:"PUT",body:t},r=new URL(`${a}${`/sms-templates/${e}/`}`);return(0,n.f)(r.toString(),s)},S=async e=>{const t=new URL(`${a}${`/sms-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},N=async e=>{const t=new URL(`${a}${`/proposals/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},A=async()=>{const e=new URL(`${a}/references/outgoing-email/`);return(0,n.f)(e.toString(),{method:"GET"})},$=async e=>{const t=new URL(`${a}${`/settings/templates/email-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},_=async()=>{const e=new URL(`${a}/settings/proposals/`);return(0,n.f)(e.toString(),{method:"GET"})},T=async e=>{const t=new URL(`${a}${`/settings/proposals/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},L=async e=>{const t=new URL(`${a}${`/settings/proposals/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})}},99868:(e,t,s)=>{s.d(t,{A:()=>x});var n=s(65043),a=s(14282),r=s(38294),l=s(35475),o=s(58387);const i="no-data-found-template_noDataBox__HgeT1",c="no-data-found-template_title__P5uV2",d="no-data-found-template_subTitle__zMBB-",h="no-data-found-template_supportext__pHg2P";var u=s(20793),m=s(32808),p=s(70579);const x=e=>{let{isDataExist:t=!0}=e;const[s,x]=(0,n.useState)(!1);return(0,p.jsxs)("div",{className:(0,o.A)(i),children:[(0,p.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,p.jsx)("img",{src:u,alt:"no-data"})}),t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{className:(0,o.A)(c),children:"There is no results"}),(0,p.jsxs)("p",{className:(0,o.A)(d),children:["The user you are looking for doesn't exist. ",(0,p.jsx)("br",{}),"Here are some helpful links:"]}),(0,p.jsx)(l.N_,{to:"/",children:(0,p.jsxs)(a.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,p.jsx)(r.A,{})," Go back"]})}),(0,p.jsx)(l.N_,{onClick:()=>x(!0),to:"#",children:(0,p.jsx)("span",{className:(0,o.A)(h),children:"Support"})})]}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("h2",{className:(0,o.A)(c),children:"No historical records yet."})}),(0,p.jsx)(m.A,{setVisible:x,visible:s})]})}}}]);
//# sourceMappingURL=586.13521b2b.chunk.js.map