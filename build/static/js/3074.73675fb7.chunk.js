"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3074],{20685:(e,s,l)=>{l.d(s,{A:()=>a});const a={circledesignstyle:"new-client-create_circledesignstyle__sG0j7",out:"new-client-create_out__UsInp",tab:"new-client-create_tab__IdlaT",iconBox:"new-client-create_iconBox__AupEc",tabText:"new-client-create_tabText__RSTYW",active:"new-client-create_active__2eoaJ",bgGreay:"new-client-create_bgGreay__y1jMx",fileUploadBox:"new-client-create_fileUploadBox__n9KJX",uploadedImgBox:"new-client-create_uploadedImgBox__rHsYh",uploadedText1:"new-client-create_uploadedText1__9ZZMJ",uploadedText2:"new-client-create_uploadedText2__PeAVp",lable:"new-client-create_lable__mDL9D",inputText:"new-client-create_inputText__Y-va7",error:"new-client-create_error__YI1Tz",phoneInput:"new-client-create_phoneInput__oIg7A",countrySelector:"new-client-create_countrySelector__fLpJG",headingInputs:"new-client-create_headingInputs__X8li4",dropdownSelect:"new-client-create_dropdownSelect__CZFIr",tempDelete:"new-client-create_tempDelete__q+CA0",tempAdd:"new-client-create_tempAdd__PhaaR"}},31342:(e,s,l)=>{l.d(s,{f:()=>a});const a=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{method:a="GET",headers:n={},body:t}=s,r=localStorage.getItem("access_token"),i=t instanceof FormData,o={"Content-Type":i?"multipart/form-data":"application/json",...n};l&&(o.Authorization=`Bearer ${r}`);const d={method:a,headers:o,body:i?t:JSON.stringify(t),redirect:"follow"};try{const s=new URL(e),l=await fetch(s,d),a=l.headers.get("Content-Type");if(!l.ok){var c;let e=null;e=a&&a.includes("application/json")?await l.json():await l.text(),401===l.status&&(localStorage.clear(),sessionStorage.clear(),window.location.replace("/login"));const s=new Error((null===(c=e)||void 0===c?void 0:c.message)||`HTTP error! Status: ${l.status}`);throw s.status=l.status,s.data=e,s}if(a&&a.includes("application/json"))return await l.json();return{message:"Non-JSON response",body:await l.text()}}catch(m){throw console.error("Fetch API error:",m),m}}},33074:(e,s,l)=>{l.d(s,{A:()=>C});var a=l(65043),n=l(61072),t=l(78602),r=l(14282),i=l(44541),o=l(96141),d=l(24858),c=l(17380),m=l(18403),u=l(93747),p=l(58387),h=l(88060),x=l(28676),v=l(74532),g=l(72052),j=l(27932),A=l(93740),f=l(80899),y=l(20685),b=l(59638),N=l(27472),w=l(63882),_=l(70579);const S=f.Ik({name:f.Yj().required("Company name is required"),industry:f.ai().typeError("Enter a valid industry").required("Industry is required"),abn:f.Yj().nullable().transform((e=>""===e?null:e)).matches(/^\d{11}$/,"ABN must be an 11-digit number").notRequired(),email:f.Yj().email("Invalid email").required("Email is required"),payment_terms:f.ai().typeError("Enter a valid payment terms").required("Payment terms are required"),category:f.ai().typeError("Enter a valid category").required("Category is required"),contact_persons:f.YO().of(f.Ik({email:f.Yj().nullable().email("Invalid contact email format").test("is-valid","Contact email must be a valid email if provided",(e=>!e||f.Yj().email().isValidSync(e)))}))}).required(),C=(0,a.forwardRef)(((e,s)=>{var l;let{photo:f,setPhoto:C,onSubmit:I,defaultValues:$,deleteAddress:T,deleteContact:P}=e;const[E,F]=(0,a.useState)(!1),[R,q]=(0,a.useState)(0),[L,U]=(0,a.useState)({type:null,index:null}),k=(0,u.I)({queryKey:["categories"],queryFn:b.Ql}),B=(0,u.I)({queryKey:["industries"],queryFn:b.OF}),[G,D]=(0,a.useState)(""),[z,V]=(0,a.useState)(""),[Y,H]=(0,a.useState)({}),O=(0,u.I)({queryKey:["countries"],queryFn:b.X6,enabled:!0}),J=(0,u.I)({queryKey:["states",G],queryFn:()=>(0,b.nP)(G),enabled:!!G,retry:1}),K=(0,u.I)({queryKey:["cities",z],queryFn:async()=>(0,b.i6)(z),enabled:!!z,keepPreviousData:!0});(0,a.useEffect)((()=>{z&&(async e=>{if(e&&!Y[e]){const s=await(0,b.i6)(e);H((l=>({...l,[e]:s})))}})(z)}),[z]);const{control:Z,register:M,handleSubmit:W,watch:X,formState:{errors:Q},setValue:ee}=(0,d.mN)({resolver:(0,m.t)(S),defaultValues:$}),{fields:se,append:le,remove:ae}=(0,d.jz)({control:Z,name:"contact_persons"}),{fields:ne,append:te,remove:re}=(0,d.jz)({control:Z,name:"addresses"});return(0,a.useEffect)((()=>{var e;if(null!==$&&void 0!==$&&null!==(e=$.addresses)&&void 0!==e&&e.length&&R<$.addresses.length){const e=$.addresses[R],s=e.country,l=e.state;s!==G?D(s):l!==z?V(l):q((e=>e+1))}}),[$,R,G,z]),(0,a.useEffect)((()=>{var e;if(null!==k&&void 0!==k&&null!==(e=k.data)&&void 0!==e&&e.length&&!$.category){var s;let e=null===(s=k.data)||void 0===s?void 0:s.find((e=>"regular"===e.name.toLowerCase()));e.name&&ee("category",e.id)}}),[null===k||void 0===k?void 0:k.data,$,ee]),(0,_.jsxs)("form",{ref:s,onSubmit:W(I),children:[(0,_.jsxs)(n.A,{className:(0,p.A)(y.A.bgGreay,"pt-0"),children:[(0,_.jsxs)(t.A,{sm:12,children:[(0,_.jsxs)("div",{className:(0,p.A)(y.A.fileUploadBox),onClick:()=>F(!0),children:[(0,_.jsx)("div",{className:(0,p.A)(y.A.uploadedImgBox,"rounded"),children:f?(0,_.jsx)("img",{src:(null===f||void 0===f?void 0:f.croppedImageBase64)||f,alt:"img"}):(0,_.jsx)(i.A,{size:32,color:"#667085"})}),(0,_.jsx)("p",{className:(0,p.A)("mb-0",y.A.uploadedText1),children:(0,_.jsx)("span",{className:(0,p.A)("mb-0",y.A.uploadedText2),children:"Click to upload"})}),(0,_.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]}),(0,_.jsx)(w.A,{show:E,setShow:F,setPhoto:C})]}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsxs)("label",{className:(0,p.A)(y.A.lable),children:["Company Name",(0,_.jsx)("span",{className:"required",children:"*"})]}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:Q.name&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M("name"),className:(0,p.A)(y.A.inputText,{[y.A.error]:Q.name}),placeholder:"Enter company name"})]}),Q.name&&(0,_.jsx)("p",{className:"error-message",children:Q.name.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsxs)("label",{className:(0,p.A)(y.A.lable),children:["Industry",(0,_.jsx)("span",{className:"required",children:"*"})]}),(0,_.jsx)(d.xI,{name:"industry",control:Z,render:e=>{var s;let{field:l}=e;return(0,_.jsx)(h.m,{...l,options:B&&(null===(s=B.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{l.onChange(e.value)},className:(0,p.A)(y.A.dropdownSelect,"dropdown-height-fixed",{[y.A.error]:Q.industry}),style:{height:"46px"},scrollHeight:"380px",value:l.value,loading:null===B||void 0===B?void 0:B.isFetching,placeholder:"Select Industry",filter:!0,filterInputAutoFocus:!0})}}),Q.industry&&(0,_.jsx)("p",{className:"error-message",children:null===(l=Q.industry)||void 0===l?void 0:l.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"ABN"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:Q.abn&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M("abn",{onChange:e=>{const s=e.target.value.replace(/\D/g,"");ee("abn",s,{shouldValidate:!0})},onPaste:e=>{e.preventDefault();const s=e.clipboardData.getData("text").replace(/\D/g,"");ee("abn",s,{shouldValidate:!0})}}),className:(0,p.A)(y.A.inputText,{[y.A.error]:Q.abn}),placeholder:"32 635 443 221"})]}),Q.abn&&(0,_.jsx)("p",{className:"error-message",children:Q.abn.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Phone number"}),(0,_.jsx)(d.xI,{name:"phone",control:Z,render:e=>{let{field:s}=e;return(0,_.jsx)(c.LR,{defaultCountry:"au",value:"string"===typeof s.value?s.value:"",className:"phoneInput rounded",containerClass:y.A.countrySelector,onChange:s.onChange,style:{border:"1px solid "+(Q.phone?"red":"#dedede")}})}}),Q.phone&&(0,_.jsx)("p",{className:"error-message",children:Q.phone.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,_.jsxs)("label",{className:(0,p.A)(y.A.lable),children:["Email",(0,_.jsx)("span",{className:"required",children:"*"})]}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:Q.email&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M("email"),className:(0,p.A)(y.A.inputText,{[y.A.error]:Q.email}),placeholder:"example@email.com"})]}),Q.email&&(0,_.jsx)("p",{className:"error-message",children:Q.email.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Website"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:Q.website&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M("website"),className:(0,p.A)(y.A.inputText,{[y.A.error]:Q.website}),placeholder:"www.example.com"})]}),Q.website&&(0,_.jsx)("p",{className:"error-message",children:Q.website.message})]})})]}),(0,_.jsx)("h2",{className:(0,p.A)(y.A.headingInputs,"mt-4"),children:"Payment Terms"}),(0,_.jsxs)(n.A,{className:(0,p.A)(y.A.bgGreay),children:[(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsxs)("label",{className:(0,p.A)(y.A.lable),children:["Payment Terms",(0,_.jsx)("span",{className:"required",children:"*"})]}),(0,_.jsx)(d.xI,{name:"payment_terms",control:Z,render:e=>{let{field:s}=e;return(0,_.jsx)(h.m,{...s,options:[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}]||0,onChange:e=>{s.onChange(e.value)},className:(0,p.A)(y.A.dropdownSelect,"dropdown-height-fixed",{[y.A.error]:Q.payment_terms}),style:{height:"46px"},value:s.value,scrollHeight:"380px",placeholder:"Select payment terms",filterInputAutoFocus:!0})}}),Q.payment_terms&&(0,_.jsx)("p",{className:"error-message",children:Q.payment_terms.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsxs)("label",{className:(0,p.A)(y.A.lable),children:["Customers Discount Category",(0,_.jsx)("span",{className:"required",children:"*"})]}),(0,_.jsx)(d.xI,{name:"category",control:Z,render:e=>{var s;let{field:l}=e;return(0,_.jsx)(h.m,{...l,options:[...k&&(null===(s=k.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:`${e.name} - ${e.value}%`}))))||[]],onChange:e=>{l.onChange(e.value)},className:(0,p.A)(y.A.dropdownSelect,"dropdown-height-fixed",{[y.A.error]:Q.category}),style:{height:"46px"},value:l.value,loading:null===k||void 0===k?void 0:k.isFetching,placeholder:"Select a category",scrollHeight:"380px",filterInputAutoFocus:!0})}}),Q.category&&(0,_.jsx)("p",{className:"error-message",children:Q.category.message})]})})]}),(0,_.jsx)("h2",{className:(0,p.A)(y.A.headingInputs,"mt-4"),children:"Contact Person"}),(0,_.jsx)(n.A,{children:se.map(((e,s)=>{var l,a,i,m,u,h,j,f,b,w,S,C,I,$,T,E,F,R,q,k,B,G,D,z,V,Y,H,O,J,K,W,X,ee,ne,te,re,ie,oe,de,ce;return(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{type:"hidden",...M(`contact_persons.${s}.is_main`),value:0===s}),(0,_.jsxs)(n.A,{className:(0,p.A)(y.A.bgGreay),children:[(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"First Name"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{style:{top:"40%"},children:(null===(l=Q.contact_persons)||void 0===l||null===(a=l[s])||void 0===a?void 0:a.firstname)&&(0,_.jsx)("img",{src:N.A,alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`contact_persons.${s}.firstname`),rows:5,cols:30,className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(i=Q.contact_persons)||void 0===i||null===(m=i[s])||void 0===m?void 0:m.firstname}),style:{resize:"none"},placeholder:"Jhon"})]}),(null===(u=Q.contact_persons)||void 0===u||null===(h=u[s])||void 0===h?void 0:h.firstname)&&(0,_.jsx)("p",{className:"error-message",children:null===(j=Q.contact_persons)||void 0===j||null===(f=j[s])||void 0===f||null===(b=f.firstname)||void 0===b?void 0:b.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Last Name"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{style:{top:"40%"},children:(null===(w=Q.contact_persons)||void 0===w||null===(S=w[s])||void 0===S?void 0:S.lastname)&&(0,_.jsx)("img",{src:N.A,alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`contact_persons.${s}.lastname`),rows:5,cols:30,className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(C=Q.contact_persons)||void 0===C||null===(I=C[s])||void 0===I?void 0:I.lastname}),style:{resize:"none"},placeholder:"Doe"})]}),(null===($=Q.contact_persons)||void 0===$||null===(T=$[s])||void 0===T?void 0:T.lastname)&&(0,_.jsx)("p",{className:"error-message",children:null===(E=Q.contact_persons)||void 0===E||null===(F=E[s])||void 0===F||null===(R=F.lastname)||void 0===R?void 0:R.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Email"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{style:{top:"40%"},children:(null===(q=Q.contact_persons)||void 0===q||null===(k=q[s])||void 0===k?void 0:k.email)&&(0,_.jsx)("img",{src:N.A,alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`contact_persons.${s}.email`),rows:5,cols:30,className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(B=Q.contact_persons)||void 0===B||null===(G=B[s])||void 0===G?void 0:G.email}),style:{resize:"none"},placeholder:"golden@harvest.com"})]}),(null===(D=Q.contact_persons)||void 0===D||null===(z=D[s])||void 0===z?void 0:z.email)&&(0,_.jsx)("p",{className:"error-message",children:null===(V=Q.contact_persons)||void 0===V||null===(Y=V[s])||void 0===Y||null===(H=Y.email)||void 0===H?void 0:H.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Phone number"}),(0,_.jsx)(d.xI,{name:`contact_persons.${s}.phone`,control:Z,render:e=>{var l,a;let{field:n}=e;return(0,_.jsx)(c.LR,{defaultCountry:"au",value:n.value||"",className:"phoneInput rounded",containerClass:y.A.countrySelector,onChange:e=>n.onChange(e),style:{border:"1px solid "+(null!==(l=Q.contact_persons)&&void 0!==l&&null!==(a=l[s])&&void 0!==a&&a.phone?"red":"#dedede")}})}}),(null===(O=Q.contact_persons)||void 0===O||null===(J=O[s])||void 0===J?void 0:J.phone)&&(0,_.jsx)("p",{className:"error-message",children:null===(K=Q.contact_persons)||void 0===K||null===(W=K[s])||void 0===W?void 0:W.phone.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Position"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{style:{top:"40%"},children:(null===(X=Q.contact_persons)||void 0===X||null===(ee=X[s])||void 0===ee?void 0:ee.position)&&(0,_.jsx)("img",{src:N.A,alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`contact_persons.${s}.position`),rows:5,cols:30,className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(ne=Q.contact_persons)||void 0===ne||null===(te=ne[s])||void 0===te?void 0:te.position}),style:{resize:"none"},placeholder:"Manager"})]}),(null===(re=Q.contact_persons)||void 0===re||null===(ie=re[s])||void 0===ie?void 0:ie.position)&&(0,_.jsx)("p",{className:"error-message",children:null===(oe=Q.contact_persons)||void 0===oe||null===(de=oe[s])||void 0===de||null===(ce=de.position)||void 0===ce?void 0:ce.message})]})}),(0,_.jsx)(t.A,{sm:6})]}),(0,_.jsxs)(t.A,{sm:12,className:"d-flex justify-content-end gap-3 mb-4",children:[0!==s&&(0,_.jsxs)(r.A,{type:"button",className:(0,p.A)(y.A.tempDelete),onClick:()=>(async(e,s)=>{U({type:"contact",index:e}),s&&await P(s),ae(e),U({type:null,index:null})})(s,e.uniqeId),disabled:!("contact"!==(null===L||void 0===L?void 0:L.type)||L.index!==s),children:["Delete ","contact"===(null===L||void 0===L?void 0:L.type)&&L.index===s?(0,_.jsx)(A.p,{style:{width:"20px",height:"20px"}}):""]}),s===se.length-1&&(0,_.jsxs)(r.A,{type:"button",className:(0,p.A)(y.A.tempAdd),onClick:()=>le({}),children:["Add New ",(0,_.jsx)(o.A,{size:24,color:"#106b99"})]})]})]},e.id)}))}),(0,_.jsx)("h2",{className:(0,p.A)(y.A.headingInputs,"mt-4"),children:"Locations"}),(0,_.jsx)(n.A,{children:ne.map(((e,s)=>{var l,a,i,c,m,u,j,f,b,w,S,C,I,$,P,E,F,R,q,k,B,G,H,W,ee,se,le,ae,ie,oe,de,ce,me,ue,pe,he,xe,ve,ge,je,Ae,fe;return(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{type:"hidden",...M(`addresses.${s}.is_main`),value:0===s}),(0,_.jsxs)(n.A,{className:(0,p.A)(y.A.bgGreay),children:[(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Location Name"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:(null===(l=Q.addresses)||void 0===l||null===(a=l[s])||void 0===a?void 0:a.title)&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`addresses.${s}.title`),className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(i=Q.addresses)||void 0===i||null===(c=i[s])||void 0===c?void 0:c.title}),placeholder:"Enter location name"})]}),(null===(m=Q.addresses)||void 0===m||null===(u=m[s])||void 0===u?void 0:u.title)&&(0,_.jsx)("p",{className:"error-message",children:null===(j=Q.addresses)||void 0===j||null===(f=j[s])||void 0===f||null===(b=f.title)||void 0===b?void 0:b.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Country"}),(0,_.jsx)(d.xI,{name:`addresses.${s}.country`,control:Z,defaultValue:"",render:e=>{var s;let{field:l}=e;return(0,_.jsx)(h.m,{...l,options:O&&(null===(s=O.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{l.onChange(e.value),D(e.value)},className:(0,p.A)(y.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:l.value,loading:null===O||void 0===O?void 0:O.isFetching,placeholder:"Select a country",scrollHeight:"380px",filterInputAutoFocus:!0})}}),(null===(w=Q.addresses)||void 0===w||null===(S=w[s])||void 0===S?void 0:S.country)&&(0,_.jsx)("p",{className:"error-message",children:null===(C=Q.addresses)||void 0===C||null===(I=C[s])||void 0===I||null===($=I.country)||void 0===$?void 0:$.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"State"}),(0,_.jsx)(d.xI,{name:`addresses.${s}.state`,control:Z,defaultValue:"",render:e=>{var s;let{field:l}=e;return(0,_.jsx)(h.m,{...l,options:J&&(null===(s=J.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{l.onChange(e.value),V(e.value)},className:(0,p.A)(y.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:l.value,loading:null===J||void 0===J?void 0:J.isFetching,placeholder:"Select a state",scrollHeight:"380px",filter:!0,filterInputAutoFocus:!0})}}),(null===(P=Q.addresses)||void 0===P||null===(E=P[s])||void 0===E?void 0:E.state)&&(0,_.jsx)("p",{className:"error-message",children:null===(F=Q.addresses)||void 0===F||null===(R=F[s])||void 0===R||null===(q=R.state)||void 0===q?void 0:q.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"City/Suburb"}),(0,_.jsx)(d.xI,{name:`addresses.${s}.city`,control:Z,defaultValue:"",render:e=>{var l;let{field:a}=e;const n=X(`addresses.${s}.state`);return(0,_.jsx)(h.m,{...a,options:(null===(l=Y[n])||void 0===l?void 0:l.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{a.onChange(e.value)},className:(0,p.A)(y.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:a.value,loading:n===z&&(null===K||void 0===K?void 0:K.isFetching),disabled:null===K||void 0===K?void 0:K.isFetching,placeholder:"Select a city",emptyMessage:n?"No cities found":"Select a state first",scrollHeight:"380px",filter:!0,filterInputAutoFocus:!0})}}),(null===(k=Q.addresses)||void 0===k||null===(B=k[s])||void 0===B?void 0:B.city)&&(0,_.jsx)("p",{className:"error-message",children:null===(G=Q.addresses)||void 0===G||null===(H=G[s])||void 0===H||null===(W=H.city)||void 0===W?void 0:W.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Street Address"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:(null===(ee=Q.addresses)||void 0===ee||null===(se=ee[s])||void 0===se?void 0:se.address)&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`addresses.${s}.address`),className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(le=Q.addresses)||void 0===le||null===(ae=le[s])||void 0===ae?void 0:ae.address}),placeholder:"Enter street address"})]}),(null===(ie=Q.addresses)||void 0===ie||null===(oe=ie[s])||void 0===oe?void 0:oe.address)&&(0,_.jsx)("p",{className:"error-message",children:null===(de=Q.addresses)||void 0===de||null===(ce=de[s])||void 0===ce||null===(me=ce.address)||void 0===me?void 0:me.message})]})}),(0,_.jsx)(t.A,{sm:6,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Postcode"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{children:(null===(ue=Q.addresses)||void 0===ue||null===(pe=ue[s])||void 0===pe?void 0:pe.postcode)&&(0,_.jsx)("img",{src:N.A,className:"mb-3",alt:"error-icon"})}),(0,_.jsx)(g.S,{...M(`addresses.${s}.postcode`),keyfilter:"int",className:(0,p.A)(y.A.inputText,{[y.A.error]:null===(he=Q.addresses)||void 0===he||null===(xe=he[s])||void 0===xe?void 0:xe.postcode}),placeholder:"Enter postcode"})]}),(null===(ve=Q.addresses)||void 0===ve||null===(ge=ve[s])||void 0===ge?void 0:ge.postcode)&&(0,_.jsx)("p",{className:"error-message",children:null===(je=Q.addresses)||void 0===je||null===(Ae=je[s])||void 0===Ae||null===(fe=Ae.postcode)||void 0===fe?void 0:fe.message})]})})]}),(0,_.jsxs)(t.A,{sm:12,className:"d-flex justify-content-end gap-3 mb-4",children:[0!==s&&(0,_.jsxs)(r.A,{type:"button",className:(0,p.A)(y.A.tempDelete),onClick:()=>(async(e,s)=>{U({type:"address",index:e}),s&&await T(s),re(e),U({type:null,index:null})})(s,e.uniqeId),disabled:!("address"!==(null===L||void 0===L?void 0:L.type)||L.index!==s),children:["Delete ","address"===(null===L||void 0===L?void 0:L.type)&&L.index===s?(0,_.jsx)(A.p,{style:{width:"20px",height:"20px"}}):""]}),s===ne.length-1&&(0,_.jsxs)(r.A,{type:"button",className:(0,p.A)(y.A.tempAdd),onClick:()=>te({country:1}),children:["Add New ",(0,_.jsx)(o.A,{size:24,color:"#106b99"})]})]})]},e.id)}))}),(0,_.jsx)("h2",{className:(0,p.A)(y.A.headingInputs),children:"Client Description"}),(0,_.jsx)(n.A,{className:(0,p.A)(y.A.bgGreay),children:(0,_.jsx)(t.A,{sm:12,children:(0,_.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,_.jsx)("label",{className:(0,p.A)(y.A.lable),children:"Description"}),(0,_.jsxs)(x.C,{children:[(0,_.jsx)(v.m,{style:{top:"75%"},children:Q.description&&(0,_.jsx)("img",{src:N.A,alt:"error-icon"})}),(0,_.jsx)(j.Z,{...M("description"),rows:5,cols:30,className:(0,p.A)(y.A.inputText,{[y.A.error]:Q.description}),style:{resize:"none"},placeholder:"Enter a description..."})]}),Q.description&&(0,_.jsx)("p",{className:"error-message",children:Q.description.message})]})})})]})}))},59638:(e,s,l)=>{l.d(s,{EZ:()=>r,F1:()=>j,Fl:()=>u,OF:()=>o,QK:()=>x,Ql:()=>i,X6:()=>d,Ye:()=>v,ab:()=>A,i6:()=>m,kB:()=>f,nP:()=>c,o6:()=>h,oO:()=>t,oo:()=>p,zZ:()=>g});var a=l(31342);const n="https://dev.memate.com.au/api/v1",t=async e=>{const s=new URL(`${n}${`/clients/restore/${e}/`}`);return(0,a.f)(s.toString(),{method:"POST"})},r=async e=>{const s=new URL(`${n}${`/clients/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},i=async()=>{const e=new URL(`${n}/references/clients/categories/`);return(0,a.f)(e.toString(),{method:"GET"})},o=async()=>{const e=new URL(`${n}/references/clients/industries/`);return(0,a.f)(e.toString(),{method:"GET"})},d=async()=>{const e=new URL(`${n}/references/countries/`),s=await(0,a.f)(e.toString(),{method:"GET"},!1),l=[1];return(null===s||void 0===s?void 0:s.filter((e=>l.includes(e.id))))||[]},c=async e=>{const s=new URL(`${n}${`/references/states/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"},!1)},m=async e=>{const s=new URL(`${n}${`/references/cities/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"},!1)},u=async()=>{const e=new URL(`${n}/references/desktop-users/`);return(0,a.f)(e.toString(),{method:"GET"})},p=async function(e,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0;const i=(e-1)*s,o=new URL(`${n}/clients/`);return o.searchParams.append("limit",s),o.searchParams.append("offset",i),l&&o.searchParams.append("name",l),t&&o.searchParams.append("ordering",t),r&&o.searchParams.append("deleted",1),(0,a.f)(o.toString(),{method:"GET"})},h=async function(e,s,l){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const i=(s-1)*l,o=new URL(`${n}${`/clients/${e}/orders/`}`);return o.searchParams.append("limit",l),o.searchParams.append("offset",i),t&&o.searchParams.append("number",t),r&&o.searchParams.append("ordering",r),(0,a.f)(o.toString(),{method:"GET"})},x=async e=>{const s=new URL(`${n}${`/clients/address/${e}/main`}`);return(0,a.f)(s.toString(),{method:"PUT"})},v=async e=>{const s=new URL(`${n}${`/clients/contact-persons/${e}/main`}`);return(0,a.f)(s.toString(),{method:"PUT"})},g=async e=>{const s=new URL(`${n}${`/clients/delete/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},j=async e=>{const s=new URL(`${n}${`/clients/contact-persons/${e}/delete/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},A=async e=>{const s=new URL(`${n}${`/clients/address/${e}/delete/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},f=async e=>{const s={method:"PUT",body:{unique_id:e}},l=new URL(`${n}/projects/back/`);return(0,a.f)(l.toString(),s)}},63882:(e,s,l)=>{l.d(s,{A:()=>N});var a=l(65043),n=l(32952),t=l(14282),r=l(76163),i=l(69956),o=l(89488),d=l(55683),c=l(58387),m=l(73722);const u="file-uploader_title__+HTTy",p="file-uploader_previewSection__mnNRf",h="file-uploader_previewBox__j6psm",x="file-uploader_previewBoxImg1__SR-1w",v="file-uploader_previewBoxImg2__zYCKK",g="file-uploader_previewBoxImg3__YNTWI",j="file-uploader_previewBoxImg4__cRl+e",A="file-uploader_previewBoxImg5__GzHFj",f="file-uploader_previewActions__UO1dp",y="file-uploader_label__Udhfq";var b=l(70579);const N=e=>{let{show:s,setShow:l,setPhoto:N,additionalDesign:w,shape:_="rect"}=e;const[S,C]=(0,a.useState)([]),[I,$]=(0,a.useState)({x:0,y:0}),[T,P]=(0,a.useState)(1),[E,F]=(0,a.useState)(0),[R,q]=(0,a.useState)(null),[L,U]=(0,a.useState)({}),k=(0,a.useCallback)(((e,s)=>{q(s)}),[]),B=(0,a.useCallback)((async()=>{if(!S.length||!R)return;const e=document.createElement("canvas"),s=e.getContext("2d"),l=new Image;l.src=S[0].preview,await new Promise((e=>l.onload=e)),e.width=R.width,e.height=R.height,s.translate(e.width/2,e.height/2),s.rotate(E*Math.PI/180),s.translate(-e.width/2,-e.height/2),s.drawImage(l,R.x,R.y,R.width,R.height,0,0,R.width,R.height);return e.toDataURL("image/jpeg")}),[S,R,E]),G=async()=>{const e=await B();e&&U({img2:e,img3:e,img4:e,img5:e})};(0,a.useEffect)((()=>{G()}),[T,I,E,S,R]);const{getRootProps:D,getInputProps:z}=(0,o.VB)({maxFiles:1,accept:{"image/*":[]},onDrop:e=>{C(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});return(0,b.jsxs)(n.A,{style:{zIndex:1111},show:s,centered:!0,onHide:()=>l(!1),onShow:G,children:[(0,b.jsx)(n.A.Header,{closeButton:!0,children:(0,b.jsx)(n.A.Title,{children:(0,b.jsx)("span",{className:`${u}`,children:"Edit Photo"})})}),(0,b.jsxs)(n.A.Body,{children:[w,(0,b.jsxs)("div",{className:`${p}`,children:[(0,b.jsxs)("div",{className:`${h}`,children:[(0,b.jsx)("div",{className:(0,c.A)(x,"round"===_?"rounded-circle":""),children:(0,b.jsx)(d.Ay,{image:S.length>0?S[0].preview:null,crop:I,zoom:T,cropShape:_,rotation:E,onCropChange:$,onZoomChange:P,onCropComplete:k,aspect:1,restrictPosition:!1,style:{containerStyle:{width:"100%",height:"100%",position:"relative"},cropAreaStyle:{width:"100%",height:"100%"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}})}),(0,b.jsx)("div",{className:(0,c.A)(v,"round"===_?"rounded-circle":""),children:L.img2&&(0,b.jsx)("img",{src:L.img2,alt:"Preview 2",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,b.jsx)("div",{className:(0,c.A)(g,"round"===_?"rounded-circle":""),children:L.img3&&(0,b.jsx)("img",{src:L.img3,alt:"Preview 3",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,b.jsx)("div",{className:(0,c.A)(j,"round"===_?"rounded-circle":""),children:L.img4&&(0,b.jsx)("img",{src:L.img4,alt:"Preview 4",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,b.jsx)("div",{className:(0,c.A)(A,"round"===_?"rounded-circle":""),children:L.img5&&(0,b.jsx)("img",{src:L.img5,alt:"Preview 5",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),(0,b.jsxs)("div",{className:`${f}`,children:[(0,b.jsxs)(m.A.Group,{children:[(0,b.jsx)(m.A.Label,{className:`${y}`,children:"Zoom"}),(0,b.jsx)(m.A.Range,{value:T,min:1,max:3,step:.1,className:"custom-range",onChange:e=>P(e.target.value)})]}),(0,b.jsx)("div",{className:"d-flex align-item-center pt-4 ms-4",style:{gap:"8px"},children:(0,b.jsxs)(t.A,{className:"text-button",onClick:()=>{F((e=>(e+90)%360))},children:[(0,b.jsx)(r.A,{color:"#106B99",size:24}),"Rotate"]})})]})]}),(0,b.jsxs)("div",{...D({className:"dropzone d-flex justify-content-center align-items-center flex-column cursor-pointer"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,b.jsx)("input",{...z()}),(0,b.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,b.jsx)(i.A,{})}),(0,b.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,b.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,b.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})]}),(0,b.jsxs)(n.A.Footer,{className:"d-flex justify-content-end",children:[(0,b.jsx)(t.A,{className:"outline-button",onClick:e=>{e.stopPropagation(),C([]),U({}),N(null),l(!1)},children:"Cancel"}),(0,b.jsx)(t.A,{className:"solid-button",onClick:async()=>{const e=await B(),s=function(e,s){const l=atob(e.split(",")[1]),a=new ArrayBuffer(l.length),n=new Uint8Array(a);for(let t=0;t<l.length;t++)n[t]=l.charCodeAt(t);return new Blob([a],{type:s})}(e,"image/jpeg");N({croppedImageBase64:e,croppedImageBlob:s}),l(!1)},children:"Save Photo"})]})]})}}}]);
//# sourceMappingURL=3074.73675fb7.chunk.js.map