{"version":3,"file":"static/js/3908.c074bcaa.chunk.js","mappings":"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","sources":["../node_modules/react-bootstrap-icons/dist/icons/arrow-counterclockwise.js","../node_modules/react-bootstrap-icons/dist/icons/chevron-right.js","pages/business/enquiries/form-builder/api.js","pages/business/enquiries/form-builder/builder/init-builder.js","pages/business/enquiries/form-builder/form-builder.jsx","../node_modules/react-bootstrap-icons/dist/icons/arrow-clockwise.js","APIs/email-template.js","../node_modules/react-bootstrap-icons/dist/icons/save.js"],"sourcesContent":["var _excluded = [\"color\", \"size\", \"title\", \"className\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ArrowCounterclockwise = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n    color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? '1em' : _ref$size,\n    _ref$title = _ref.title,\n    title = _ref$title === void 0 ? null : _ref$title,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    width: size,\n    height: size,\n    fill: color,\n    className: ['bi', 'bi-arrow-counterclockwise', className].filter(Boolean).join(' ')\n  }, rest), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466\"\n  }));\n});\nArrowCounterclockwise.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  title: PropTypes.string,\n  className: PropTypes.string\n};\nexport default ArrowCounterclockwise;","var _excluded = [\"color\", \"size\", \"title\", \"className\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronRight = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n    color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? '1em' : _ref$size,\n    _ref$title = _ref.title,\n    title = _ref$title === void 0 ? null : _ref$title,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    width: size,\n    height: size,\n    fill: color,\n    className: ['bi', 'bi-chevron-right', className].filter(Boolean).join(' ')\n  }, rest), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708\"\n  }));\n});\nChevronRight.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  title: PropTypes.string,\n  className: PropTypes.string\n};\nexport default ChevronRight;","export const INQUIRY_FORM_API_URL = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\nexport const INQUIRY_FORM_DETAIL_URL = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n\nexport async function saveFormToApi(payload) {\n  const res = await fetch(INQUIRY_FORM_API_URL, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    let errorMessage = `API ${res.status}: ${text || res.statusText}`;\n    \n    // Try to parse validation errors\n    try {\n      const errorData = JSON.parse(text);\n      if (errorData && typeof errorData === 'object') {\n        // Format validation errors nicely\n        const errors = [];\n        for (const [field, messages] of Object.entries(errorData)) {\n          const fieldName = field.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n          const errorMessages = Array.isArray(messages) ? messages : [messages];\n          errors.push(`${fieldName}: ${errorMessages.join(', ')}`);\n        }\n        if (errors.length > 0) {\n          errorMessage = errors.join('\\n');\n        }\n      }\n    } catch (e) {\n      // Keep original error message if JSON parsing fails\n    }\n    \n    throw new Error(errorMessage);\n  }\n  return res.json();\n}\n\nexport async function listFormsByOrganization(orgId) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/forms/`;\n  const url = `${base}?organization=${encodeURIComponent(orgId)}`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function getFormById(id) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n  const url = `${base}${id}/`;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function updateFormToApi(id, payload) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n  const url = `${base}${id}/update/`;\n  const res = await fetch(url, {\n    method: 'PATCH',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(payload),\n  });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    let errorMessage = `API ${res.status}: ${text || res.statusText}`;\n    \n    // Try to parse validation errors\n    try {\n      const errorData = JSON.parse(text);\n      if (errorData && typeof errorData === 'object') {\n        // Format validation errors nicely\n        const errors = [];\n        for (const [field, messages] of Object.entries(errorData)) {\n          const fieldName = field.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n          const errorMessages = Array.isArray(messages) ? messages : [messages];\n          errors.push(`${fieldName}: ${errorMessages.join(', ')}`);\n        }\n        if (errors.length > 0) {\n          errorMessage = errors.join('\\n');\n        }\n      }\n    } catch (e) {\n      // Keep original error message if JSON parsing fails\n    }\n    \n    throw new Error(errorMessage);\n  }\n  return res.json();\n}\n\nexport async function listFormSubmissions(formId, params = {}) {\n  if (!formId) throw new Error('formId is required');\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/${encodeURIComponent(formId)}/submissions/`;\n\n  const qs = new URLSearchParams();\n  // Optional filters/pagination if backend supports them\n  if (params.page) qs.set('page', params.page);\n  if (params.page_size) qs.set('page_size', params.page_size);\n  if (params.status != null) qs.set('status', params.status); // e.g., 0,1,2\n  if (params.assigned_to) qs.set('assigned_to', params.assigned_to); // user id/email if supported\n  if (params.search) qs.set('search', params.search);\n  if (params.ordering) qs.set('ordering', params.ordering);\n\n  const url = qs.toString() ? `${base}?${qs.toString()}` : base;\n  const res = await fetch(url);\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return res.json();\n}\n\nexport async function deleteForm(id) {\n  const base = `${process.env.REACT_APP_BACKEND_API_URL}/inquiries/form/`;\n  const url = `${base}${id}/delete/`;\n  const res = await fetch(url, { method: 'DELETE' });\n  if (!res.ok) {\n    const text = await res.text().catch(() => '');\n    throw new Error(`API ${res.status}: ${text || res.statusText}`);\n  }\n  return true;\n}","// src/builder/initBuilder.js\nimport { saveFormToApi, updateFormToApi } from '../api';\n\nexport function initBuilder({ defaultOrgId, initialForm = null }) {\n  // Guard against double binding in React StrictMode (dev) or accidental re-calls\n  if (typeof window === 'undefined') {\n    return;\n  }\n  // Scope all DOM lookups to the builder root to avoid collisions with host app\n  const root = document.querySelector('.mf-builder') || document;\n\n  // Prevent duplicate initialization\n  if (root.dataset.builderInitialized === 'true') {\n    console.log('Builder already initialized, skipping...');\n    return;\n  }\n  root.dataset.builderInitialized = 'true';\n\n  // Core nodes\n  const preview = root.querySelector('#preview-container');\n  const properties = root.querySelector('#properties-container');\n  const cssTextarea = root.querySelector('#form_style');\n  const previewBtn = root.querySelector('#preview-btn');\n  const saveBtn = root.querySelector('#save-btn');\n\n  // Internal state (must exist before any hydration uses it)\n  let fieldCounter = 1;\n  let fieldsData = {};\n  let currentField = null;\n  // If we're editing an existing form, keep its id so subsequent saves PATCH instead of POST\n  let currentFormId = initialForm?.id || null;\n\n  // Undo/Redo history\n  let history = [];\n  let historyIndex = -1;\n  const MAX_HISTORY = 50;\n\n  // Save state to history\n  function saveHistory() {\n    // Remove any future history if we're not at the end\n    if (historyIndex < history.length - 1) {\n      history = history.slice(0, historyIndex + 1);\n    }\n\n    // Save current state\n    history.push(JSON.parse(JSON.stringify(fieldsData)));\n\n    // Limit history size\n    if (history.length > MAX_HISTORY) {\n      history.shift();\n    } else {\n      historyIndex++;\n    }\n  }\n\n  // Undo\n  function undo() {\n    if (historyIndex > 0) {\n      historyIndex--;\n      restoreFromHistory(history[historyIndex]);\n    }\n  }\n\n  // Redo\n  function redo() {\n    if (historyIndex < history.length - 1) {\n      historyIndex++;\n      restoreFromHistory(history[historyIndex]);\n    }\n  }\n\n  // Restore state from history\n  function restoreFromHistory(state) {\n    fieldsData = JSON.parse(JSON.stringify(state));\n    rebuildPreview();\n  }\n\n  // Rebuild preview from fieldsData\n  function rebuildPreview() {\n    // Clear preview but keep page header and empty state\n    preview.querySelectorAll('.preview-field').forEach(f => f.remove());\n\n    // Rebuild all fields\n    Object.keys(fieldsData).forEach(id => {\n      const data = fieldsData[id];\n      const type = data.field_type || data.type;\n      const el = document.createElement('div');\n      el.className = 'preview-field';\n      el.id = id;\n      el.dataset.type = type;\n      el.innerHTML = getTemplate(type) + actionBar();\n      preview.appendChild(el);\n      wireField(el, id, type);\n      updateFieldDisplay(el, id, type, data);\n    });\n\n    updateMoveButtons();\n\n    // Show/hide empty state\n    const emptyState = preview.querySelector('.empty-state');\n    if (emptyState) {\n      emptyState.style.display = Object.keys(fieldsData).length === 0 ? 'flex' : 'none';\n    }\n  }\n\n  // Update field display based on data\n  function updateFieldDisplay(el, id, type, data) {\n    const labelEl = el.querySelector('.form-field > label, .checkbox-field label');\n    if (labelEl && data.label) labelEl.textContent = data.label;\n\n    if (['text', 'email', 'number', 'phone', 'url', 'date', 'time'].includes(type)) {\n      const input = el.querySelector('input');\n      if (input && data.placeholder) input.placeholder = data.placeholder;\n    } else if (type === 'textarea') {\n      const ta = el.querySelector('textarea');\n      if (ta && data.placeholder) ta.placeholder = data.placeholder;\n    }\n  }\n\n  // Listen for undo/redo events\n  window.addEventListener('builder-undo', undo);\n  window.addEventListener('builder-redo', redo);\n\n  // If an existing form was passed in, hydrate all UI\n  if (initialForm) {\n    try {\n      hydrateInitialForm(initialForm);\n\n      // Force update preview after hydration\n      setTimeout(() => {\n        const previewTitleEl = root.querySelector('#preview-form-title');\n        const previewDescriptionEl = root.querySelector('#preview-form-description');\n        const formTitleEl = root.querySelector('#form-title');\n        const formDescriptionEl = root.querySelector('#form-description');\n\n        if (previewTitleEl && formTitleEl && formTitleEl.value) {\n          previewTitleEl.textContent = formTitleEl.value;\n        }\n        if (previewDescriptionEl && formDescriptionEl && formDescriptionEl.value) {\n          previewDescriptionEl.textContent = formDescriptionEl.value;\n        }\n      }, 100);\n    } catch (err) {\n      console.error('Hydration failed:', err);\n    }\n  }\n\n  // Update preview title and description in real-time\n  const formTitleEl = root.querySelector('#form-title');\n  const formDescriptionEl = root.querySelector('#form-description');\n  const previewTitleEl = root.querySelector('#preview-form-title');\n  const previewDescriptionEl = root.querySelector('#preview-form-description');\n\n  if (formTitleEl && previewTitleEl) {\n    formTitleEl.addEventListener('input', (e) => {\n      previewTitleEl.textContent = e.target.value || 'Title';\n    });\n  }\n\n  if (formDescriptionEl && previewDescriptionEl) {\n    formDescriptionEl.addEventListener('input', (e) => {\n      previewDescriptionEl.textContent = e.target.value || 'Description';\n    });\n  }\n\n  // Field palette (delegated to support dragging from child elements reliably)\n  const palette = root.querySelector('.field-types');\n  if (palette) {\n    palette.addEventListener('dragstart', (e) => {\n      const item = e.target && e.target.closest('.field-type');\n      if (!item) return;\n      try {\n        if (e.dataTransfer) {\n          e.dataTransfer.effectAllowed = 'copy';\n          // Set both a standard and a custom MIME so all browsers carry data\n          e.dataTransfer.setData('text/plain', item.dataset.type);\n          e.dataTransfer.setData('application/x-field-type', item.dataset.type);\n        }\n      } catch (_) { /* Silently ignore errors */ }\n    }, true);\n  }\n\n  // Drop target - improved with insertion between fields\n  let dragOverField = null;\n  let dropPosition = null; // 'before' or 'after'\n\n  preview.addEventListener('dragenter', (e) => {\n    e.preventDefault();\n    preview.classList.add('dragover');\n  });\n\n  preview.addEventListener('dragover', (e) => {\n    e.preventDefault();\n    if (e.dataTransfer) e.dataTransfer.dropEffect = 'copy';\n\n    // Find which field we're hovering over\n    const target = e.target.closest('.preview-field');\n    if (target) {\n      const rect = target.getBoundingClientRect();\n      const midpoint = rect.top + rect.height / 2;\n      const mouseY = e.clientY;\n\n      // Remove previous indicators\n      preview.querySelectorAll('.preview-field').forEach(f => {\n        f.classList.remove('drag-over-top', 'drag-over-bottom');\n      });\n\n      // Determine if we're in top or bottom half\n      if (mouseY < midpoint) {\n        target.classList.add('drag-over-top');\n        dragOverField = target;\n        dropPosition = 'before';\n      } else {\n        target.classList.add('drag-over-bottom');\n        dragOverField = target;\n        dropPosition = 'after';\n      }\n    } else {\n      // Clear indicators if not over a field\n      preview.querySelectorAll('.preview-field').forEach(f => {\n        f.classList.remove('drag-over-top', 'drag-over-bottom');\n      });\n      dragOverField = null;\n      dropPosition = null;\n    }\n  });\n\n  preview.addEventListener('dragleave', (e) => {\n    if (!preview.contains(e.relatedTarget)) {\n      preview.classList.remove('dragover');\n      preview.querySelectorAll('.preview-field').forEach(f => {\n        f.classList.remove('drag-over-top', 'drag-over-bottom');\n      });\n      dragOverField = null;\n      dropPosition = null;\n    }\n  });\n\n  preview.addEventListener('drop', (e) => {\n    e.preventDefault();\n    preview.classList.remove('dragover');\n    preview.querySelectorAll('.preview-field').forEach(f => {\n      f.classList.remove('drag-over-top', 'drag-over-bottom');\n    });\n\n    let type = '';\n    try {\n      type = (e.dataTransfer && (\n        e.dataTransfer.getData('application/x-field-type') ||\n        e.dataTransfer.getData('text/plain') ||\n        e.dataTransfer.getData('field-type')\n      )) || '';\n    } catch (_) { /* Silently ignore errors */ }\n    if (!type) return;\n\n    // Add field at the determined position\n    addField(type, dragOverField, dropPosition);\n    dragOverField = null;\n    dropPosition = null;\n  });\n\n  function addField(type, referenceField = null, position = null) {\n    const id = `field-${fieldCounter++}`;\n    const el = document.createElement('div');\n    el.className = 'preview-field';\n    el.id = id;\n    el.dataset.type = type;\n    el.innerHTML = getTemplate(type) + actionBar();\n\n    // Insert at the appropriate position\n    if (referenceField && position === 'before') {\n      preview.insertBefore(el, referenceField);\n    } else if (referenceField && position === 'after') {\n      if (referenceField.nextSibling) {\n        preview.insertBefore(el, referenceField.nextSibling);\n      } else {\n        preview.appendChild(el);\n      }\n    } else {\n      // Default: append to end (or insert in fields container if it exists)\n      const fieldsContainer = preview.querySelector('.form-fields-container');\n      if (fieldsContainer) {\n        fieldsContainer.appendChild(el);\n      } else {\n        preview.appendChild(el);\n      }\n    }\n\n    fieldsData[id] = seedDataFor(type);\n    wireField(el, id, type);\n    // Do not auto-select field when adding - let user click to select\n    // selectField(id, type);\n    updateMoveButtons();\n\n    // Save to history after adding field\n    saveHistory();\n\n    // Hide empty state if it exists\n    const emptyState = preview.querySelector('.empty-state');\n    if (emptyState) {\n      emptyState.style.display = 'none';\n    }\n  }\n\n  function getTemplate(type) {\n    const map = {\n      text: `<div class=\"form-field\"><label>Text Field</label><input type=\"text\" placeholder=\"Enter text\"></div>`,\n      email: `<div class=\"form-field\"><label>Email Field</label><input type=\"email\" placeholder=\"Enter email\"></div>`,\n      number: `<div class=\"form-field\"><label>Number Field</label><input type=\"number\" placeholder=\"Enter number\"></div>`,\n      phone: `<div class=\"form-field\"><label>Phone Field</label><input type=\"tel\" placeholder=\"Enter phone\"></div>`,\n      textarea: `<div class=\"form-field\"><label>Text Area</label><textarea placeholder=\"Enter text\"></textarea></div>`,\n      select: `<div class=\"form-field\"><label>Dropdown</label><select><option value=\"\">Select an option</option><option>Option 1</option><option>Option 2</option></select></div>`,\n      radio: `<div class=\"form-field\"><label>Radio Buttons</label><div class=\"radio-field\"><input id=\"r1\" type=\"radio\" name=\"rg\"><label for=\"r1\">Option 1</label></div><div class=\"radio-field\"><input id=\"r2\" type=\"radio\" name=\"rg\"><label for=\"r2\">Option 2</label></div></div>`,\n      checkbox: `<div class=\"form-field\"><div class=\"checkbox-field\"><input id=\"cb\" type=\"checkbox\"><label for=\"cb\" class=\"mb-0\">Checkbox</label></div></div>`,\n      multicheckbox: `<div class=\"form-field\"><label>Multi Checkbox</label><div class=\"checkbox-field\"><input id=\"m1\" type=\"checkbox\"><label for=\"m1\">Option 1</label></div><div class=\"checkbox-field\"><input id=\"m2\" type=\"checkbox\"><label for=\"m2\">Option 2</label></div></div>`,\n      date: `<div class=\"form-field\"><label>Date</label><input type=\"date\"></div>`,\n      time: `<div class=\"form-field\"><label>Time</label><input type=\"time\"></div>`,\n      url: `<div class=\"form-field\"><label>Website URL</label><input type=\"url\" placeholder=\"https://example.com\"></div>`,\n      html: `<div class=\"form-field html-content\"><p>HTML Content</p></div>`,\n      consent: `<div class=\"form-field\"><div class=\"checkbox-field\"><input id=\"consent\" type=\"checkbox\"><label for=\"consent\" class=\"mb-0\">I agree to the terms and conditions</label></div></div>`,\n      submit_button: `<div class=\"form-field\"><button type=\"submit\" class=\"btn-primary\">Submit</button></div>`\n    };\n    return map[type] || map.text;\n  }\n\n  function actionBar(isRequired = false) {\n    return `\n      <div class=\"field-actions\">\n        <input type=\"checkbox\" class=\"required-toggle\" title=\"Required\" ${isRequired ? 'checked' : ''} />\n        <button class=\"move-field-up\" title=\"Up\"></button>\n        <button class=\"move-field-down\" title=\"Down\"></button>\n        <button class=\"edit-field\" title=\"Edit\"></button>\n        <button class=\"remove-field\" title=\"Remove\"></button>\n      </div>`;\n  }\n\n  function seedDataFor(type) {\n    const base = {\n      type,\n      field_type: type,\n      label: `${capitalize(type)} Field`,\n      name: `${type}_field`,\n      required: false,\n      placeholder: `Enter ${type}`,\n      maxlength: '',\n      regex: '',\n      error_message: '',\n      options: []\n    };\n    if (['select', 'radio', 'multicheckbox'].includes(type)) {\n      base.options = ['Option 1', 'Option 2'];\n    }\n    if (type === 'submit_button') {\n      base.button_text = 'Submit';\n      base.custom_style = '';\n    }\n    if (type === 'html') {\n      base.html = '<p>HTML Content</p>';\n    }\n    if (type === 'consent') {\n      base.label = 'I agree to the terms and conditions';\n    }\n    return base;\n  }\n\n  function updateFieldRequiredUI(id) {\n    const data = fieldsData[id];\n    const host = root.querySelector(`#${id}`);\n    if (!host) return;\n\n    // --- Action bar checkbox ---\n    const actionReq = host.querySelector('.required-toggle');\n    if (actionReq) actionReq.checked = !!data.required;\n\n    // --- Properties panel checkbox ---\n    const propReq = root.querySelector('#fp-req');\n    if (propReq) propReq.checked = !!data.required;\n\n    // --- Required attribute ---\n    host.querySelectorAll('input, textarea, select').forEach(el => {\n      if (data.required) el.setAttribute('required', '');\n      else el.removeAttribute('required');\n    });\n\n    // --- Required star ---\n    const label = host.querySelector('.form-field > label');\n    if (label) {\n      let star = label.querySelector('.required-star');\n\n      if (data.required && !star) {\n        label.insertAdjacentHTML(\n          'beforeend',\n          ' <span class=\"required-star\">*</span>'\n        );\n      } else if (!data.required && star) {\n        star.remove();\n      }\n    }\n  }\n\n  function wireField(el, id, type) {\n    el.addEventListener('click', e => {\n      if (!e.target.closest('.field-actions')) selectField(id, type);\n    });\n    const reqToggle = el.querySelector('.required-toggle');\n    if (reqToggle) {\n      reqToggle.addEventListener('change', (e) => {\n        fieldsData[id].required = e.target.checked;\n\n        // sync preview + properties\n        updateFieldRequiredUI(id);\n\n        saveHistory();\n      });\n    }\n    el.querySelector('.remove-field').addEventListener('click', () => {\n      delete fieldsData[id];\n      el.remove();\n      updateMoveButtons();\n\n      // Save to history after removing field\n      saveHistory();\n\n      // If the removed field was selected, clear selection\n      if (currentField === id) {\n        properties.classList.remove('has-selection');\n        // Reset to placeholder\n        const placeholder = properties.querySelector('.field-props-placeholder');\n        if (placeholder) {\n          placeholder.innerHTML = `\n            <div class=\"panel-header\">\n              <h2>Properties</h2>\n            </div>\n            <div class=\"no-selection\">\n              <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" opacity=\"0.2\">\n                <rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\"/>\n                <path d=\"M7 10h10M7 14h6\"/>\n              </svg>\n              <p>Select a field to edit its properties</p>\n            </div>\n          `;\n        }\n      }\n\n      // Show empty state if no fields left\n      const remainingFields = preview.querySelectorAll('.preview-field');\n      const emptyState = preview.querySelector('.empty-state');\n      if (remainingFields.length === 0 && emptyState) {\n        emptyState.style.display = 'flex';\n      }\n    });\n    el.querySelector('.move-field-up').addEventListener('click', e => {\n      e.stopPropagation();\n      if (el.previousElementSibling && el.previousElementSibling.classList.contains('preview-field')) {\n        el.parentNode.insertBefore(el, el.previousElementSibling);\n      }\n      reindex();\n      updateMoveButtons();\n      saveHistory(); // Save to history after moving\n    });\n    el.querySelector('.move-field-down').addEventListener('click', e => {\n      e.stopPropagation();\n      const next = el.nextElementSibling;\n      if (next && next.classList.contains('preview-field')) {\n        el.parentNode.insertBefore(next, el);\n      }\n      reindex();\n      updateMoveButtons();\n      saveHistory(); // Save to history after moving\n    });\n    el.querySelector('.edit-field').addEventListener('click', e => {\n      e.stopPropagation();\n      selectField(id, type);\n    });\n  }\n\n  function reindex() {\n    const newOrder = {};\n    preview.querySelectorAll('.preview-field').forEach(node => {\n      newOrder[node.id] = fieldsData[node.id];\n    });\n    fieldsData = newOrder;\n    updateMoveButtons();\n  }\n\n  function updateMoveButtons() {\n    const nodes = Array.from(preview.querySelectorAll('.preview-field'));\n    nodes.forEach((node, idx) => {\n      const upBtn = node.querySelector('.move-field-up');\n      const downBtn = node.querySelector('.move-field-down');\n      if (upBtn) upBtn.disabled = (idx === 0);\n      if (downBtn) downBtn.disabled = (idx === nodes.length - 1);\n    });\n  }\n\n  function selectField(id, type) {\n    currentField = id;\n    const data = fieldsData[id];\n\n    // Remove selected class from all fields\n    preview.querySelectorAll('.preview-field').forEach(f => f.classList.remove('selected'));\n    // Add selected class to current field\n    const selectedEl = preview.querySelector(`#${id}`);\n    if (selectedEl) selectedEl.classList.add('selected');\n\n    // Add has-selection class to properties container\n    properties.classList.add('has-selection');\n\n    // Find or create field properties container\n    let fieldPropsContainer = properties.querySelector('.field-props-placeholder');\n    if (!fieldPropsContainer) {\n      fieldPropsContainer = document.createElement('div');\n      fieldPropsContainer.className = 'field-props-placeholder';\n      properties.insertBefore(fieldPropsContainer, properties.firstChild);\n    }\n\n    fieldPropsContainer.innerHTML = `\n      <div class=\"panel-header\">\n        <h2>Properties</h2>\n      </div>\n      <div class=\"property-group\">\n        <h3>Basic</h3>\n        <label>Label <input id=\"fp-label\" value=\"${escapeHtml(data.label)}\"></label>\n        ${(['text', 'email', 'number', 'phone', 'url', 'textarea'].includes(type) ?\n        `<label>Placeholder <input id=\"fp-ph\" value=\"${escapeHtml(data.placeholder || '')}\"></label>` : '')}\n        ${(['text', 'email', 'number', 'phone', 'url', 'textarea'].includes(type) ?\n        `<label>Max Length <input id=\"fp-max\" min=\"0\" type=\"number\" value=\"${escapeAttr(data.maxlength || '')}\"></label>` : '')}\n        ${(['text', 'email', 'number', 'phone', 'url', 'textarea'].includes(type) ? `\n          <div class=\"property-subtle\">\n            <label>Validation Pattern (Regex)\n              <input id=\"fp-regex\" placeholder=\"e.g. ^[A-Za-z]{3,}$\" value=\"${escapeAttr(data.regex || '')}\">\n            </label>\n            <p class=\"help-text text-start\">Optional. Add a regex pattern for validation.</p>\n            <label>Regex Error Message <span id=\"fp-errmsg-required\" class=\"required\" style=\"display: ${data.regex ? 'inline' : 'none'};\">*</span>\n              <input id=\"fp-errmsg\" placeholder=\"e.g. Please enter only letters\" value=\"${escapeAttr(data.error_message || '')}\" style=\"border-color: ${data.regex && !data.error_message ? '#dc3545' : ''};\">\n            </label>\n            <p class=\"help-text\">Required when Validation Pattern is set. Custom message to show when validation fails.</p>\n          </div>` : '')}\n        <label class=\"inline\"><input type=\"checkbox\" id=\"fp-req\" ${data.required ? 'checked' : ''}> <span>Required</span></label>\n      </div>\n      ${(['select', 'radio', 'multicheckbox'].includes(type) ? `\n        <div class=\"property-group\">\n          <h3>Options</h3>\n          <div id=\"fp-options\"></div>\n          <button id=\"fp-addopt\" type=\"button\" class=\"fp-addopt\">Add Option</button>\n        </div>` : '')}\n      ${type === 'html' ? `\n        <div class=\"property-group\">\n          <h3>HTML</h3>\n          <textarea id=\"fp-html\" rows=\"5\">${escapeHtml(data.html || '')}</textarea>\n        </div>` : ''}\n      ${type === 'submit_button' ? `\n        <div class=\"property-group\">\n          <h3>Button</h3>\n          <label>Text <input id=\"fp-btntext\" value=\"${escapeHtml(data.button_text || 'Submit')}\"></label>\n          <label>Style (CSS) <textarea id=\"fp-btncss\" rows=\"3\">${escapeHtml(data.custom_style || '')}</textarea></label>\n        </div>` : ''}\n      <div class=\"property-group\"><button id=\"fp-apply\" type=\"button\">Update Field</button></div>\n    `;\n\n    // Helper function to update preview in real-time - Comprehensive\n    const updateFieldPreview = () => {\n      const host = root.querySelector('#' + id);\n      if (!host) return;\n\n      // Update label\n      const label = host.querySelector('.form-field > label, .checkbox-field label');\n      if (label) label.textContent = data.label;\n\n      // Update text-like inputs (text, email, number, phone, url, date, time)\n      if (['text', 'email', 'number', 'phone', 'url', 'date', 'time'].includes(type)) {\n        const input = host.querySelector('input');\n        if (input) {\n          if (data.placeholder) input.placeholder = data.placeholder;\n          if (data.maxlength && !isNaN(data.maxlength) && data.maxlength > 0) {\n            input.maxLength = parseInt(data.maxlength, 10);\n          }\n          if (data.required) input.setAttribute('required', '');\n          else input.removeAttribute('required');\n        }\n      }\n      // Update textarea\n      else if (type === 'textarea') {\n        const ta = host.querySelector('textarea');\n        if (ta) {\n          if (data.placeholder) ta.placeholder = data.placeholder;\n          if (data.maxlength && !isNaN(data.maxlength) && data.maxlength > 0) {\n            ta.maxLength = parseInt(data.maxlength, 10);\n          }\n          if (data.required) ta.setAttribute('required', '');\n          else ta.removeAttribute('required');\n        }\n      }\n      // Update select\n      else if (type === 'select') {\n        const sel = host.querySelector('select');\n        if (sel) {\n          sel.innerHTML = `<option value=\"\">${data.placeholder || 'Select an option'}</option>` +\n            (data.options || []).map(o => `<option>${escapeHtml(o)}</option>`).join('');\n          if (data.required) sel.setAttribute('required', '');\n          else sel.removeAttribute('required');\n        }\n      }\n      // Update radio buttons\n      else if (type === 'radio') {\n        const wrap = host.querySelector('.form-field');\n        if (wrap) {\n          wrap.querySelectorAll('.radio-field').forEach(n => n.remove());\n          (data.options || []).forEach((o, i) => {\n            const div = document.createElement('div');\n            div.className = 'radio-field';\n            const rid = `${data.name}-${i}`;\n            div.innerHTML = `<input id=\"${rid}\" type=\"radio\" name=\"${escapeHtml(data.name)}\" ${data.required ? 'required' : ''}>\n                             <label for=\"${rid}\">${escapeHtml(o)}</label>`;\n            wrap.appendChild(div);\n          });\n        }\n      }\n      // Update multicheckbox\n      else if (type === 'multicheckbox') {\n        const wrap = host.querySelector('.form-field');\n        if (wrap) {\n          wrap.querySelectorAll('.checkbox-field').forEach(n => n.remove());\n          (data.options || []).forEach((o, i) => {\n            const div = document.createElement('div');\n            div.className = 'checkbox-field';\n            const cid = `${data.name}-${i}`;\n            div.innerHTML = `<input id=\"${cid}\" type=\"checkbox\" name=\"${escapeHtml(data.name)}[]\" ${data.required ? 'required' : ''}>\n                             <label for=\"${cid}\">${escapeHtml(o)}</label>`;\n            wrap.appendChild(div);\n          });\n        }\n      }\n      // Update checkbox\n      else if (type === 'checkbox') {\n        const cbl = host.querySelector('.checkbox-field label');\n        if (cbl) cbl.textContent = data.label;\n        const cbinput = host.querySelector('.checkbox-field input');\n        if (cbinput) {\n          if (data.required) cbinput.setAttribute('required', '');\n          else cbinput.removeAttribute('required');\n        }\n      }\n      // Update consent\n      else if (type === 'consent') {\n        const cbl = host.querySelector('.checkbox-field label');\n        if (cbl) cbl.textContent = data.label;\n        const cbinput = host.querySelector('.checkbox-field input');\n        if (cbinput) {\n          if (data.required) cbinput.setAttribute('required', '');\n          else cbinput.removeAttribute('required');\n        }\n      }\n      // Update button\n      else if (type === 'submit_button') {\n        const btn = host.querySelector('button');\n        if (btn) {\n          btn.textContent = data.button_text || 'Submit';\n          if (data.custom_style) btn.setAttribute('style', data.custom_style);\n          else btn.removeAttribute('style');\n        }\n      }\n      // Update HTML\n      else if (type === 'html') {\n        const block = host.querySelector('.html-content');\n        if (block) block.innerHTML = data.html || '<p></p>';\n      }\n    };\n\n    if (['select', 'radio', 'multicheckbox'].includes(type)) {\n      const wrap = root.querySelector('#fp-options');\n\n      const renderOptions = () => {\n        wrap.innerHTML = '';\n        (data.options || []).forEach((opt, i) => {\n          const row = document.createElement('div');\n          row.innerHTML = `<input data-i=\"${i}\" value=\"${escapeAttr(opt)}\"> <button data-i=\"${i}\" class=\"rm\" type=\"button\">x</button>`;\n          wrap.appendChild(row);\n        });\n      };\n\n      renderOptions();\n\n      root.querySelector('#fp-addopt').onclick = () => {\n        data.options.push(`Option ${data.options.length + 1}`);\n        renderOptions();\n        attachRealtimeListeners(); // Re-attach listeners to new options\n        updateFieldPreview(); // Update preview\n        saveHistory();\n      };\n\n      wrap.addEventListener('click', e => {\n        if (e.target.classList.contains('rm')) {\n          const i = +e.target.dataset.i;\n          data.options.splice(i, 1);\n          renderOptions();\n          updateFieldPreview(); // Update preview when option removed\n          saveHistory();\n        }\n      });\n\n      wrap.addEventListener('input', e => {\n        if (e.target.matches('input[data-i]')) {\n          data.options[+e.target.dataset.i] = e.target.value;\n          updateFieldPreview(); // Update preview when option text changed\n          saveHistory();\n        }\n      });\n    }\n\n    // Real-time property updates with event listeners\n    const attachRealtimeListeners = () => {\n      const labelEl = root.querySelector('#fp-label');\n      const phEl = root.querySelector('#fp-ph');\n      const isRequiredEl = root.querySelector('#fp-req');\n      const maxEl = root.querySelector('#fp-max');\n      const regexEl = root.querySelector('#fp-regex');\n      const errmsgEl = root.querySelector('#fp-errmsg');\n      const htmlEl = root.querySelector('#fp-html');\n      const btntextEl = root.querySelector('#fp-btntext');\n      const btncssEl = root.querySelector('#fp-btncss');\n\n      if (labelEl) {\n        labelEl.addEventListener('input', (e) => {\n          data.label = e.target.value;\n          data.name = e.target.value?.toLowerCase()?.replace(/\\s+/g, '_');\n          updateFieldPreview();\n          saveHistory();\n        });\n      }\n      if (phEl) {\n        phEl.addEventListener('input', (e) => {\n          data.placeholder = e.target.value;\n          updateFieldPreview();\n          saveHistory();\n        });\n      }\n      if (isRequiredEl) {\n        isRequiredEl.addEventListener('change', (e) => {\n          data.required = e.target.checked;\n          updateFieldPreview();\n          updateFieldRequiredUI(id);\n          saveHistory();\n        });\n      }\n      if (maxEl) {\n        maxEl.addEventListener('input', (e) => {\n          data.maxlength = e.target.value;\n          updateFieldPreview();\n          saveHistory();\n        });\n      }\n      if (regexEl) {\n        regexEl.addEventListener('input', (e) => {\n          data.regex = e.target.value;\n\n          // Show/hide required indicator for error message\n          const requiredSpan = root.querySelector('#fp-errmsg-required');\n          const errmsgInput = root.querySelector('#fp-errmsg');\n\n          if (requiredSpan) {\n            requiredSpan.style.display = data.regex ? 'inline' : 'none';\n          }\n\n          // Highlight error message field if regex is set but error message is empty\n          if (errmsgInput) {\n            if (data.regex && !data.error_message) {\n              errmsgInput.style.borderColor = '#dc3545';\n            } else {\n              errmsgInput.style.borderColor = '';\n            }\n          }\n\n          saveHistory();\n        });\n      }\n      if (errmsgEl) {\n        errmsgEl.addEventListener('input', (e) => {\n          data.error_message = e.target.value;\n\n          // Remove red border when error message is filled\n          if (data.regex && data.error_message) {\n            e.target.style.borderColor = '';\n          } else if (data.regex && !data.error_message) {\n            e.target.style.borderColor = '#dc3545';\n          }\n\n          saveHistory();\n        });\n      }\n      if (htmlEl) {\n        htmlEl.addEventListener('input', (e) => {\n          data.html = e.target.value;\n          updateFieldPreview();\n          saveHistory();\n        });\n      }\n      if (btntextEl) {\n        btntextEl.addEventListener('input', (e) => {\n          data.button_text = e.target.value || 'Submit';\n          updateFieldPreview();\n          saveHistory();\n        });\n      }\n      if (btncssEl) {\n        btncssEl.addEventListener('input', (e) => {\n          data.custom_style = e.target.value || '';\n          updateFieldPreview();\n          saveHistory();\n        });\n      }\n    };\n\n    // Attach listeners and hide the update button\n    setTimeout(() => {\n      attachRealtimeListeners();\n      const applyBtn = root.querySelector('#fp-apply');\n      if (applyBtn) {\n        applyBtn.style.display = 'none';\n      }\n    }, 0);\n  }\n\n  // Deselect field and hide properties\n  function deselectField() {\n    currentField = null;\n    // Remove selected class from all fields\n    preview.querySelectorAll('.preview-field').forEach(f => f.classList.remove('selected'));\n\n    // Remove has-selection class from properties container\n    properties.classList.remove('has-selection');\n\n    // Reset to placeholder\n    const placeholder = properties.querySelector('.field-props-placeholder');\n    if (placeholder) {\n      placeholder.innerHTML = `\n        <div class=\"panel-header\">\n          <h2>Properties</h2>\n        </div>\n        <div class=\"no-selection\">\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" opacity=\"0.2\">\n            <rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" />\n            <path d=\"M7 10h10M7 14h6\" />\n          </svg>\n          <p>Select a field to edit its properties</p>\n        </div>\n      `;\n    }\n  }\n\n  // Click outside handler to deselect fields\n  properties.addEventListener('click', (e) => {\n    // Check if click is outside of any input/select/textarea within properties\n    const isClickInProperties = e.target.closest('.property-group, .field-props-placeholder, .general-settings');\n    if (!isClickInProperties) {\n      deselectField();\n    }\n  });\n\n  // Also handle clicks on the preview area background to deselect\n  preview.addEventListener('click', (e) => {\n    // If click is not on a preview-field or its action buttons, deselect\n    const clickedField = e.target.closest('.preview-field');\n    if (!clickedField) {\n      deselectField();\n    }\n  });\n\n  // Preview modal and tab\n\n  if (previewBtn) {\n    previewBtn.addEventListener('click', () => {\n      const html = renderPreview(Object.values(fieldsData));\n\n      // Only update tab preview (don't show modal)\n      const tabPreviewContainer = root.querySelector('#preview-form-container-tab');\n      if (tabPreviewContainer) {\n        const formTitleEl = root.querySelector('#form-title');\n        const formDescriptionEl = root.querySelector('#form-description');\n        const title = document.createElement('h6');\n        title.textContent = formTitleEl ? formTitleEl.value || 'Title' : 'Title';\n        const desc = document.createElement('small');\n        desc.style.color = \"#6b7280\";\n        desc.textContent = formDescriptionEl ? formDescriptionEl.value || 'Description' : 'Description';\n\n        let htmlWithHeader = `<b>${escapeHtml(title.textContent)}</b>`;\n        if (desc.textContent) {\n          htmlWithHeader += `<small style=\"color: #6b7280;display: block;\">${escapeHtml(desc.textContent)}</small>`;\n        }\n        htmlWithHeader += html;\n\n        tabPreviewContainer.innerHTML = htmlWithHeader;\n\n        // Add validation handler to submit button\n        setTimeout(() => {\n          const submitBtn = tabPreviewContainer.querySelector('.preview-submit-btn');\n          if (submitBtn) {\n            submitBtn.addEventListener('click', (e) => {\n              e.preventDefault();\n              const form = submitBtn.closest('form');\n              if (form && form.checkValidity()) {\n                alert('Form is valid! (This is a preview - form will not be submitted)');\n              } else {\n                form.reportValidity();\n              }\n            });\n          }\n        }, 100);\n      }\n    });\n  }\n  root.querySelectorAll('.modal-close').forEach(btn => {\n    btn.addEventListener('click', () => (btn.closest('.modal').style.display = 'none'));\n  });\n  // Initial move button state (in case of zero nodes, this is a no-op)\n  updateMoveButtons();\n\n  // Seed default first four fields for brand-new forms\n  if (!initialForm && preview.querySelectorAll('.preview-field').length === 0) {\n    seedDefaultFields();\n  }\n\n  function renderPreview(fields) {\n    let out = `<form class=\"preview-form-rendered\">`;\n\n    fields.forEach(f => {\n      const t = f.field_type || f.type;\n\n      if (t === 'html') {\n        out += `<div class=\"form-field html-content\">${f.html || ''}</div>`;\n        return;\n      }\n\n      out += `<div class=\"form-field ${f.required ? 'required' : ''}\">`;\n\n      // LABEL (with required star)\n      if (!['checkbox', 'consent'].includes(t)) {\n        out += `<label>\n        ${escapeHtml(f.label || '')}\n        ${f.required ? '<span class=\"required-star\">*</span>' : ''}\n      </label>`;\n      }\n\n      // INPUT TYPES\n      if (['text', 'email', 'number', 'phone', 'url', 'date', 'time'].includes(t)) {\n        const inputType = t === 'phone' ? 'tel' : t;\n        out += `<input \n        type=\"${inputType}\" \n        placeholder=\"${escapeAttr(f.placeholder || '')}\" \n        ${f.maxlength ? `maxlength=\"${f.maxlength}\"` : ''} \n        ${f.required ? 'required' : ''} \n      />`;\n\n      } else if (t === 'textarea') {\n        out += `<textarea \n        placeholder=\"${escapeAttr(f.placeholder || '')}\" \n        ${f.required ? 'required' : ''}>\n      </textarea>`;\n\n      } else if (t === 'select') {\n        out += `<select ${f.required ? 'required' : ''}>\n        <option value=\"\">\n          ${escapeHtml(f.placeholder || 'Select an option')}\n        </option>\n        ${(f.options || [])\n            .map(o => `<option>${escapeHtml(o)}</option>`)\n            .join('')}\n      </select>`;\n\n      } else if (t === 'radio') {\n        out += (f.options || [])\n          .map(\n            (o, i) => `\n          <div class=\"radio-field\">\n            <input type=\"radio\" id=\"${f.name}-${i}\" name=\"${f.name}\">\n            <label for=\"${f.name}-${i}\">\n              ${escapeHtml(o)}\n            </label>\n          </div>`\n          )\n          .join('');\n\n      } else if (t === 'multicheckbox') {\n        out += (f.options || [])\n          .map(\n            (o, i) => `\n          <div class=\"checkbox-field\">\n            <input type=\"checkbox\" id=\"${f.name}-${i}\" name=\"${f.name}[]\">\n            <label for=\"${f.name}-${i}\">\n              ${escapeHtml(o)}\n            </label>\n          </div>`\n          )\n          .join('');\n\n      } else if (t === 'checkbox' || t === 'consent') {\n        out += `\n        <div class=\"checkbox-field\">\n          <input type=\"checkbox\" id=\"${f.name}\" ${f.required ? 'required' : ''}>\n          <label for=\"${f.name}\">\n            ${escapeHtml(f.label || '')}\n            ${f.required ? '<span class=\"required-star\">*</span>' : ''}\n          </label>\n        </div>\n      `;\n\n      } else if (t === 'submit_button') {\n        out += `<button \n        type=\"button\" \n        class=\"preview-submit-btn\" \n        style=\"${escapeAttr(f.custom_style || '')}\">\n        ${escapeHtml(f.button_text || 'Submit')}\n      </button>`;\n      }\n\n      out += `</div>`;\n    });\n\n    // Safety submit button in preview\n    if (!fields.some(f => (f.type || f.field_type) === 'submit_button')) {\n      out += `\n      <div class=\"form-field\">\n        <button type=\"button\" class=\"preview-submit-btn\">Submit</button>\n      </div>\n    `;\n    }\n\n    out += `</form>`;\n    return out;\n  }\n\n\n  // Save -> API\n  saveBtn.addEventListener('click', async () => {\n    // Add loading state\n    saveBtn.disabled = true;\n    const originalHTML = saveBtn.innerHTML;\n    saveBtn.innerHTML = `\n      <svg class=\"spin\" style=\"width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 6px;\" viewBox=\"0 0 50 50\">\n        <circle cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"4\" stroke-dasharray=\"80\" stroke-dashoffset=\"60\" />\n      </svg>\n      Saving...\n    `;\n\n    // Clear previous errors\n    window.dispatchEvent(new CustomEvent('builder-clear-error'));\n\n    try {\n      // Validate form title\n      const titleEl = root.querySelector('#form-title');\n      if (!titleEl || !titleEl.value.trim()) {\n        throw new Error('Form title is required');\n      }\n\n      // Validate Submit To email\n      const submitToEl = root.querySelector('#form-submit-to');\n      if (!submitToEl || !submitToEl.value.trim()) {\n        throw new Error('Submit To email address is required');\n      }\n\n      // Get form type\n      const formTypeEl = root.querySelector('#form-type');\n      const formType = formTypeEl?.value || 'web';\n\n      // Only validate reCAPTCHA fields for 'web' type forms\n      if (formType === 'web') {\n        // Enforce Google reCAPTCHA site key required\n        const siteKeyEl = root.querySelector('#form-recaptcha-key');\n        if (!siteKeyEl || !siteKeyEl.value.trim()) {\n          throw new Error('Google reCAPTCHA site key is required');\n        }\n        // Enforce Google reCAPTCHA secret key required\n        const secretKeyEl = root.querySelector('#form-recaptcha-secret');\n        if (!secretKeyEl || !secretKeyEl.value.trim()) {\n          throw new Error('Google reCAPTCHA secret key is required');\n        }\n      }\n\n      // Check if form has at least one field\n      const fieldCount = Object.keys(fieldsData).length;\n      if (fieldCount === 0) {\n        throw new Error('Please add at least one field to your form');\n      }\n\n      // Validate that name and email fields are present and required\n      const fields = Object.values(fieldsData);\n      console.log('fields: ', fields);\n      const nameField = fields.find(f => f.name?.toLowerCase() === 'name');\n      const emailField = fields.find(f => f.name?.toLowerCase() === 'email');\n\n      if (!nameField) {\n        throw new Error('A \"name\" field is required. Please add a field with name \"name\".');\n      }\n      if (!nameField.required) {\n        throw new Error('The \"name\" field must be marked as required.');\n      }\n\n      if (!emailField) {\n        throw new Error('An \"email\" field is required. Please add a field with name \"email\".');\n      }\n      if (!emailField.required) {\n        throw new Error('The \"email\" field must be marked as required.');\n      }\n\n      // Validate that if regex is set, error_message is required\n      Object.values(fieldsData).forEach((field) => {\n        if (field.regex && field.regex.trim() && !field.error_message) {\n          throw new Error(`Field \"${field.label}\" has a Validation Pattern but is missing a Custom Error Message. Custom Error Message is required when Validation Pattern is set.`);\n        }\n      });\n\n      // Validate that field names are unique (no duplicates)\n      const fieldNames = Object.values(fieldsData)\n        .map(f => f.name)\n        .filter(name => name); // Filter out empty names\n\n      const duplicateNames = fieldNames.filter((name, idx, arr) => arr.indexOf(name) !== idx);\n      if (duplicateNames.length > 0) {\n        throw new Error(`Duplicate field name(s) found: \"${duplicateNames.join('\", \"')}\". Each field must have a unique name.`);\n      }\n\n      const payload = buildApiPayload();\n      const json = currentFormId\n        ? await updateFormToApi(currentFormId, payload)\n        : await saveFormToApi(payload);\n\n      // If we just created, remember the id so next saves will update\n      if (!currentFormId && json && json.id) {\n        currentFormId = json.id;\n      }\n\n      // Get public_key and determine content to show based on form type\n      const publicKey = json?.public_key || json?.id;\n      const savedFormType = formTypeEl?.value || 'web';\n\n      // Build embed code or direct link based on form type\n      let contentToShow;\n      if (savedFormType === 'form') {\n        // For type \"form\", show the direct link\n        const apiBase = process.env.REACT_APP_BACKEND_API_URL || 'https://app.memate.com.au/api/v1';\n        contentToShow = `${apiBase}/inquiries/form/page/${publicKey}/`;\n      } else {\n        // For type \"web\", show the embed code using the domain from response\n        const host = process.env.REACT_APP_URL || window.location.origin;\n        contentToShow = `<script src=\"${host}/astatic/inquiries/embed.js\" data-form-id=\"${publicKey}\"></` + `script>`;\n      }\n\n      const embedModal = root.querySelector('#embed-modal');\n      const snippetEl = root.querySelector('#embed-snippet');\n      const copyBtn = root.querySelector('#copy-embed-btn');\n      const closeBtn = root.querySelector('#close-embed-btn');\n      const xBtn = embedModal ? embedModal.querySelector('[data-close-embed]') : null;\n      const modalTitle = embedModal ? embedModal.querySelector('.modal-header h2') : null;\n      const modalDescription = embedModal ? embedModal.querySelector('.modal-content > p') : null;\n\n      // Update modal content based on form type\n      if (modalTitle) {\n        modalTitle.textContent = savedFormType === 'form' ? 'Form Link' : 'Embed this Form';\n      }\n      if (modalDescription) {\n        modalDescription.textContent = savedFormType === 'form'\n          ? 'Copy the link below to share your form.'\n          : 'Copy the snippet below and paste it into your website where you want the form to appear.';\n      }\n\n      if (snippetEl) snippetEl.value = contentToShow;\n      if (closeBtn) closeBtn.disabled = true; // must copy before closing\n      if (embedModal) embedModal.style.display = 'block';\n\n      const doCopy = async () => {\n        try {\n          await navigator.clipboard.writeText(contentToShow);\n        } catch (_) {\n          // Fallback for older browsers\n          if (snippetEl && snippetEl.select) {\n            snippetEl.select();\n            document.execCommand && document.execCommand('copy');\n          }\n        }\n        if (copyBtn) copyBtn.textContent = 'Copied!';\n        if (closeBtn) closeBtn.disabled = false;\n\n        // Redirect to forms list after 1 second\n        setTimeout(() => {\n          window.location.href = '/enquiries/forms';\n        }, 1000);\n      };\n\n      if (copyBtn) copyBtn.onclick = doCopy;\n      if (closeBtn) closeBtn.onclick = () => {\n        if (embedModal) embedModal.style.display = 'none';\n        window.location.href = '/enquiries/forms';\n      };\n      if (xBtn) xBtn.onclick = () => {\n        if (closeBtn && !closeBtn.disabled && embedModal) embedModal.style.display = 'none';\n        window.location.href = '/enquiries/forms';\n      };\n\n      // Notify success\n      window.dispatchEvent(new CustomEvent('builder-save-success'));\n\n    } catch (e) {\n      // Log to console for debugging\n      console.error('Form save error:', e.message || e);\n\n      // Dispatch error event to React component\n      window.dispatchEvent(new CustomEvent('builder-save-error', {\n        detail: { message: e.message || 'Failed to save form' }\n      }));\n    } finally {\n      // Restore button state\n      saveBtn.disabled = false;\n      saveBtn.innerHTML = originalHTML;\n    }\n  });\n\n  function buildApiPayload() {\n    const fields = Object.values(fieldsData).map((f, idx) => ({\n      id: f._id || undefined,    // include id when editing\n      name: f.name || `${f.type}_field`,\n      label: f.label || capitalize(f.type),\n      placeholder: f.placeholder || '',\n      field_type: f.field_type || f.type,\n      required: !!f.required,\n      max_length: f.maxlength || null,\n      error_message: f.error_message || null,\n      options: Array.isArray(f.options) ? f.options : undefined,\n      regex: f.regex || undefined,\n      html: f.type === 'html' ? f.html : undefined,\n      button_text: f.type === 'submit_button' ? (f.button_text || undefined) : undefined,\n      custom_style: f.type === 'submit_button' ? (f.custom_style || undefined) : undefined,\n      order: idx\n    }));\n\n    const get = id => (root.querySelector('#' + id)?.value || '').trim();\n    const formType = get('form-type') || 'web';\n\n    const payload = {\n      organization: defaultOrgId, // hard default as requested\n      title: get('form-title'),\n      description: get('form-description'),\n      type: formType,\n      submit_to: get('form-submit-to'),\n      submit_from: get('form-submit-from'),\n      cc_email: get('form-cc-email'),\n      bcc_email: get('form-bcc-email'),\n      thank_you_message: get('form-thank-you') || 'Thank you for reaching out. We\\'ll get back to you soon!',\n      error_message: get('form-error-message') || 'Something went wrong. Please try again later.',\n      submit_button_label: get('form-submit-label') || 'Submit',\n      custom_css: cssTextarea?.value ?? '',\n      fields\n    };\n\n    // Only include domain and reCAPTCHA fields for 'web' type forms\n    if (formType === 'web') {\n      payload.domain = get('form-domain');\n      payload.recaptcha_site_key = get('form-recaptcha-key');\n      payload.recaptcha_secret_key = get('form-recaptcha-secret');\n    }\n\n    const redirect = get('form-redirect-url');\n    if (redirect) payload.redirect_url = redirect;\n    return payload;\n  }\n\n  // helpers\n  function capitalize(s) { return (s || '').charAt(0).toUpperCase() + (s || '').slice(1); }\n  function escapeHtml(s = '') {\n    const str = String(s || '');\n    return str.replace(/[&<>\"']/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#39;' }[c]));\n  }\n  function escapeAttr(s = '') { return escapeHtml(s).replace(/\"/g, '&quot;'); }\n\n  function seedDefaultFields() {\n    const defaults = [\n      { field_type: 'text', name: 'name', label: 'Name', placeholder: 'Enter your name', required: true, order: 0 },\n      { field_type: 'email', name: 'email', label: 'Email', placeholder: 'Enter your email', required: true, order: 1 },\n      { field_type: 'phone', name: 'phone', label: 'Phone', placeholder: 'Enter your phone', order: 2 },\n      { field_type: 'textarea', name: 'message', label: 'Message', placeholder: 'Type your message', order: 3 },\n    ];\n    defaults.forEach(addFieldFromData);\n  }\n\n  // ----- Hydration helpers -----\n  function setVal(id, v) {\n    const el = document.getElementById(id);\n    if (el) el.value = v ?? '';\n  }\n\n  function hydrateInitialForm(form) {\n    // right-column details\n    setVal('form-title', form.title);\n    setVal('form-type', form.type || 'web');\n    setVal('form-domain', form.domain);\n    setVal('form-description', form.description || form.meta?.description || '');\n    setVal('form-submit-to', form.submit_to);\n    setVal('form-submit-from', form.submit_from);\n    setVal('form-cc-email', form.cc_email);\n    setVal('form-bcc-email', form.bcc_email);\n    setVal('form-thank-you', form.thank_you_message);\n    setVal('form-error-message', form.error_message);\n    setVal('form-submit-label', form.submit_button_label || 'Submit');\n    setVal('form-redirect-url', form.redirect_url);\n    setVal('form-recaptcha-key', form.recaptcha_site_key);\n    setVal('form-recaptcha-secret', form.recaptcha_secret_key);\n\n    // Update preview title and description\n    const previewTitleEl = root.querySelector('#preview-form-title');\n    const previewDescriptionEl = root.querySelector('#preview-form-description');\n    if (previewTitleEl) previewTitleEl.textContent = form.title || 'Title';\n    if (previewDescriptionEl) previewDescriptionEl.textContent = (form.description || form.meta?.description || '') || 'Description';\n\n    // custom css\n    if (cssTextarea && form.custom_css) {\n      cssTextarea.value = form.custom_css;\n    }\n\n    // fields canvas - only remove field elements, keep page header\n    const fields = (form.fields || []).slice().sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\n    preview.querySelectorAll('.preview-field').forEach(f => f.remove());\n    fieldsData = {};\n    fieldCounter = 1;\n\n    fields.forEach(addFieldFromData);\n    updateMoveButtons();\n\n    // Hide empty state if fields exist\n    if (fields.length > 0) {\n      const emptyState = preview.querySelector('.empty-state');\n      if (emptyState) {\n        emptyState.style.display = 'none';\n      }\n    }\n  }\n\n  function addFieldFromData(f) {\n    const type = f.field_type || f.type || 'text';\n    const id = `field-${fieldCounter++}`;\n    const el = document.createElement('div');\n    el.className = 'preview-field';\n    el.id = id;\n    el.dataset.type = type;\n    el.innerHTML = getTemplate(type) + actionBar(!!f.required);\n    preview.appendChild(el);\n\n    const data = {\n      type,\n      field_type: type,\n      _id: f.id,\n      label: f.label ?? `${capitalize(type)} Field`,\n      name: f.name ?? `${type}_field`,\n      required: !!f.required,\n      placeholder: f.placeholder ?? '',\n      maxlength: f.max_length ?? f.maxlength ?? '',\n      regex: f.regex ?? '',\n      error_message: f.error_message ?? '',\n      options: Array.isArray(f.options) ? [...f.options] : [],\n      html: f.html ?? undefined,\n      button_text: f.button_text ?? undefined,\n      custom_style: f.custom_style ?? undefined,\n    };\n\n    fieldsData[id] = data;\n    wireField(el, id, type);\n\n\n    // Do not auto-select field when hydrating - let user click to select\n    // selectField(id, type);\n\n    const labelEl = el.querySelector('.form-field > label, .checkbox-field label');\n    if (labelEl && data.label) {\n      labelEl.innerHTML = `${data.label} ${data.required ? ' <span class=\"required-star\">*</span>' : ''}`;\n    }\n\n    if (['text', 'email', 'number', 'phone', 'url', 'date', 'time'].includes(type)) {\n      const input = el.querySelector('input');\n      if (input) {\n        if (type === 'phone') input.type = 'tel';\n        if (data.placeholder) input.placeholder = data.placeholder;\n        if (data.maxlength && !isNaN(data.maxlength) && data.maxlength > 0) {\n          input.maxLength = parseInt(data.maxlength, 10);\n        }\n        if (data.required) input.required = true;\n      }\n    } else if (type === 'textarea') {\n      const ta = el.querySelector('textarea');\n      if (ta) {\n        if (data.placeholder) ta.placeholder = data.placeholder;\n        if (data.maxlength && !isNaN(data.maxlength) && data.maxlength > 0) {\n          ta.maxLength = parseInt(data.maxlength, 10);\n        }\n        if (data.required) ta.required = true;\n      }\n    } else if (type === 'select') {\n      const sel = el.querySelector('select');\n      if (sel) {\n        sel.innerHTML =\n          `<option value=\"\">${data.placeholder || 'Select an option'}</option>` +\n          (data.options || []).map(o => `<option>${escapeHtml(o)}</option>`).join('');\n        if (data.required) sel.required = true;\n      }\n    } else if (type === 'radio') {\n      const wrap = el.querySelector('.form-field');\n      if (wrap) {\n        wrap.querySelectorAll('.radio-field').forEach(n => n.remove());\n        (data.options || []).forEach((o, i) => {\n          const div = document.createElement('div');\n          div.className = 'radio-field';\n          const rid = `${data.name}-${i}`;\n          div.innerHTML = `<input id=\"${rid}\" type=\"radio\" name=\"${escapeHtml(data.name)}\">\n                           <label for=\"${rid}\">${escapeHtml(o)}</label>`;\n          wrap.appendChild(div);\n        });\n      }\n    } else if (type === 'multicheckbox') {\n      const wrap = el.querySelector('.form-field');\n      if (wrap) {\n        wrap.querySelectorAll('.checkbox-field').forEach(n => n.remove());\n        (data.options || []).forEach((o, i) => {\n          const div = document.createElement('div');\n          div.className = 'checkbox-field';\n          const cid = `${data.name}-${i}`;\n          div.innerHTML = `<input id=\"${cid}\" type=\"checkbox\" name=\"${escapeHtml(data.name)}[]\">\n                           <label for=\"${cid}\">${escapeHtml(o)}</label>`;\n          wrap.appendChild(div);\n        });\n      }\n    } else if (type === 'checkbox' || type === 'consent') {\n      const lab = el.querySelector('.checkbox-field label');\n      if (lab && data.label) lab.textContent = data.label;\n    } else if (type === 'html') {\n      const block = el.querySelector('.html-content');\n      if (block) block.innerHTML = data.html || '<p></p>';\n    } else if (type === 'submit_button') {\n      const btn = el.querySelector('button');\n      if (btn) {\n        btn.textContent = data.button_text || 'Submit';\n        if (data.custom_style) btn.setAttribute('style', data.custom_style);\n      }\n    }\n\n    // Do not auto-select field when adding from data - let user click to select\n    // selectField(id, type);\n  }\n}\n\n// Cleanup function to reset builder state\nexport function cleanupBuilder() {\n  const root = document.querySelector('.mf-builder');\n  if (root) {\n    delete root.dataset.builderInitialized;\n\n    // Clear the preview container\n    const preview = root.querySelector('#preview-container');\n    if (preview) {\n      // Remove all field elements but keep the page header and empty state\n      preview.querySelectorAll('.preview-field').forEach(field => field.remove());\n    }\n  }\n}","import { useEffect, useRef, useState, useCallback } from 'react';\nimport * as Icon from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { toast } from 'sonner';\nimport { getFormById } from './api';\nimport { initBuilder, cleanupBuilder } from './builder/init-builder';\nimport './form-builder.css';\nimport { getOutgoingEmail } from '../../../../APIs/email-template';\nimport { useAuth } from '../../../../app/providers/auth-provider';\nimport { useTrialHeight } from '../../../../app/providers/trial-height-provider';\n\n// Inline SVG Icon component for field types\nconst FieldIcon = ({ type }) => {\n  const props = { width: 22, height: 22, viewBox: '0 0 24 24', fill: 'none', stroke: '#2563eb', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round' };\n  switch (type) {\n    case 'text':\n      return (<svg {...props}><path d=\"M4 6h16\" /><path d=\"M9 6v12\" /><path d=\"M15 6v12\" /></svg>);\n    case 'email':\n      return (<svg {...props}><path d=\"M4 6h16v12H4z\" /><path d=\"M22 6l-10 7L2 6\" /></svg>);\n    case 'number':\n      return (<svg {...props}><path d=\"M6 10h12\" /><path d=\"M6 14h12\" /><path d=\"M9 7v10\" /><path d=\"M15 7v10\" /></svg>);\n    case 'phone':\n      return (<svg {...props}><path d=\"M22 16.92v3a2 2 0 0 1-2.18 2 19.8 19.8 0 0 1-8.62-3.07 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.09 4.18 2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.9 12.9 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 10a16 16 0 0 0 6 6l1.36-1.27a2 2 0 0 1 2.11-.45 12.9 12.9 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\" /></svg>);\n    case 'textarea':\n      return (<svg {...props}><rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" /><path d=\"M7 9h10\" /><path d=\"M7 13h6\" /></svg>);\n    case 'select':\n      return (<svg {...props}><rect x=\"3\" y=\"5\" width=\"18\" height=\"6\" rx=\"2\" /><path d=\"M8 15l4 4 4-4\" /></svg>);\n    case 'radio':\n      return (<svg {...props}><circle cx=\"8\" cy=\"12\" r=\"3\" /><circle cx=\"16\" cy=\"12\" r=\"6\" /></svg>);\n    case 'checkbox':\n      return (<svg {...props}><rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" /><path d=\"M7 12l3 3 7-7\" /></svg>);\n    case 'multicheckbox':\n      return (<svg {...props}><rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" /><path d=\"M7 10l3 3\" /><path d=\"M7 14l3 3\" /><path d=\"M14 10h3\" /><path d=\"M14 14h3\" /></svg>);\n    case 'date':\n      return (<svg {...props}><rect x=\"3\" y=\"5\" width=\"18\" height=\"16\" rx=\"2\" /><path d=\"M8 3v4\" /><path d=\"M16 3v4\" /><path d=\"M3 9h18\" /></svg>);\n    case 'time':\n      return (<svg {...props}><circle cx=\"12\" cy=\"12\" r=\"9\" /><path d=\"M12 7v6l4 2\" /></svg>);\n    case 'html':\n      return (<svg {...props}><path d=\"M10 15l-3-3 3-3\" /><path d=\"M14 9l3 3-3 3\" /><path d=\"M4 19h16\" /></svg>);\n    case 'consent':\n      return (<svg {...props}><rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" /><path d=\"M7 12l3 3 7-7\" /></svg>);\n    default:\n      return (<svg {...props}><circle cx=\"12\" cy=\"12\" r=\"9\" /></svg>);\n  }\n};\n\nexport default function TempFormBuilder() {\n  const { session } = useAuth();\n  const { trialHeight } = useTrialHeight();\n  const bootstrappedRef = useRef(false);\n  const { id } = useParams();\n  const editId = id !== 'new' ? id : null;\n\n  // State management\n  const [toolboxCollapsed, setToolboxCollapsed] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [activeTab, setActiveTab] = useState('designer'); // 'designer' or 'preview'\n  const [formType, setFormType] = useState('web');\n\n  // Field types data\n  const fieldTypes = [\n    ['text', 'Single-Line Input'],\n    ['email', 'Email'],\n    ['number', 'Number'],\n    ['phone', 'Phone'],\n    ['textarea', 'Text Area'],\n    ['select', 'Dropdown'],\n    ['radio', 'Radio Button Group'],\n    ['checkbox', 'Checkboxes'],\n    ['multicheckbox', 'Multi-Select Checkboxes'],\n    ['date', 'Date'],\n    ['time', 'Time'],\n    ['html', 'HTML Block'],\n    ['consent', 'Consent']\n  ];\n\n  // Filter field types based on search\n  const filteredFieldTypes = fieldTypes.filter(([type, label]) =>\n    label.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    type.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Handle preview\n  const handlePreview = useCallback(() => {\n    setActiveTab('preview');\n    // Trigger preview build from init-builder\n    setTimeout(() => {\n      const previewBtn = document.querySelector('#preview-btn');\n      if (previewBtn) {\n        previewBtn.click();\n      }\n    }, 100);\n  }, []);\n\n  // Handle undo/redo (these will be wired to init-builder)\n  const handleUndo = useCallback(() => {\n    window.dispatchEvent(new CustomEvent('builder-undo'));\n  }, []);\n\n  const handleRedo = useCallback(() => {\n    window.dispatchEvent(new CustomEvent('builder-redo'));\n  }, []);\n\n  const outgoingEmailTemplateQuery = useQuery({\n    queryKey: [\"getOutgoingEmail\"],\n    queryFn: getOutgoingEmail\n  });\n  const fromEmail = outgoingEmailTemplateQuery?.data?.outgoing_email || 'no-reply@memate.com.au';\n\n  useEffect(() => {\n    const orgId = session?.organization?.id;\n    if (!orgId) return;               // wait until session is ready\n    if (bootstrappedRef.current) return; // run only once\n\n    // Wait for DOM to be fully rendered\n    const timer = setTimeout(async () => {\n      bootstrappedRef.current = true;\n\n      try {\n        if (editId) {\n          const formJson = await getFormById(editId);\n          console.log('formJson: ', formJson);\n          // Set form type from loaded data\n          setFormType(formJson.type || 'web');\n          initBuilder({\n            defaultOrgId: orgId,\n            initialForm: formJson,\n          });\n        } else {\n          initBuilder({\n            defaultOrgId: orgId,\n          });\n        }\n      } catch (e) {\n        console.error('Failed to load form for editing:', e);\n        initBuilder({\n          defaultOrgId: orgId,\n        });\n      }\n    }, 100);\n\n    return () => {\n      clearTimeout(timer);\n      cleanupBuilder(); // Clean up on unmount\n    };\n  }, [session?.organization?.id, editId]);\n\n  // Listen for save events from init-builder\n  useEffect(() => {\n    const handleSaveError = (e) => {\n      const errorMessage = e.detail?.message || 'Failed to save form';\n      toast.error(errorMessage, {\n        duration: 5000,\n      });\n      setSaving(false);\n    };\n\n    const handleSaveSuccess = () => {\n      toast.success('Form saved successfully!', {\n        duration: 3000,\n      });\n      setSaving(false);\n    };\n\n    const handleClearError = () => {\n      toast.dismiss();\n    };\n\n    window.addEventListener('builder-save-error', handleSaveError);\n    window.addEventListener('builder-save-success', handleSaveSuccess);\n    window.addEventListener('builder-clear-error', handleClearError);\n\n    return () => {\n      window.removeEventListener('builder-save-error', handleSaveError);\n      window.removeEventListener('builder-save-success', handleSaveSuccess);\n      window.removeEventListener('builder-clear-error', handleClearError);\n    };\n  }, []);\n\n  return (\n    <>\n      <div className=\"mf-builder\" style={{\n        overflow: 'auto',\n        height: `calc(100vh - 127px - ${trialHeight}px)`,\n        '--trial-height': `${trialHeight}px`\n      }}>\n        <div className=\"mf-container\">\n          {/* Tabs Navigation */}\n          <div className=\"builder-tabs\">\n            <div className=\"tabs-left\">\n              <button\n                className={`tab-btn ${activeTab === 'designer' ? 'active' : ''}`}\n                onClick={() => setActiveTab('designer')}\n              >\n                Designer\n              </button>\n              <button\n                className={`tab-btn ${activeTab === 'preview' ? 'active' : ''}`}\n                onClick={handlePreview}\n              >\n                Preview\n              </button>\n            </div>\n            <div className=\"tabs-right\">\n              <button className=\"icon-btn\" title=\"Undo\" onClick={handleUndo}>\n                <Icon.ArrowCounterclockwise size={18} />\n              </button>\n              <button className=\"icon-btn\" title=\"Redo\" onClick={handleRedo}>\n                <Icon.ArrowClockwise size={18} />\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                id=\"save-btn\"\n                disabled={saving}\n              >\n                {saving ? (\n                  <>\n                    <ProgressSpinner style={{ width: '16px', height: '16px' }} strokeWidth=\"2\" />\n                    Saving...\n                  </>\n                ) : (\n                  <>\n                    <Icon.Save size={16} />\n                    Save Form\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n\n          {/* Designer Tab - Main Form Builder */}\n          <div className=\"editor-container\" style={{ display: activeTab === 'designer' ? 'grid' : 'none' }}>\n            {/* Toolbox (Field Types) */}\n            <div className={`fields-panel ${toolboxCollapsed ? 'collapsed' : ''}`}>\n              <div className=\"panel-header\">\n                <div className=\"panel-header-top\">\n                  <h2>{toolboxCollapsed ? '' : 'Toolbox'}</h2>\n                  <button\n                    className=\"collapse-btn\"\n                    onClick={() => setToolboxCollapsed(!toolboxCollapsed)}\n                    title={toolboxCollapsed ? 'Expand Toolbox' : 'Collapse Toolbox'}\n                  >\n                    {toolboxCollapsed ? <Icon.ChevronRight size={18} /> : <Icon.ChevronLeft size={18} />}\n                  </button>\n                </div>\n                {!toolboxCollapsed && (\n                  <input\n                    type=\"text\"\n                    placeholder=\"Type to search...\"\n                    className=\"search-input\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                  />\n                )}\n              </div>\n              <div className=\"field-types\">\n                {filteredFieldTypes.map(([type, label]) => (\n                  <div\n                    key={type}\n                    className=\"field-type\"\n                    draggable\n                    data-type={type}\n                    role=\"button\"\n                    aria-label={`Drag ${label} field`}\n                    title={`Drag ${label} field`}\n                  >\n                    <span className=\"icon\"><FieldIcon type={type} /></span>\n                    {!toolboxCollapsed && <span>{label}</span>}\n                  </div>\n                ))}\n              </div>\n\n              {!toolboxCollapsed && (\n                <div className=\"css-editor-container\">\n                  <h3>Custom CSS</h3>\n                  <textarea id=\"form_style\" className=\"code-editor\" rows={10} defaultValue='' placeholder=\"Add custom CSS here (optional)\" />\n                  <p className=\"help-text\">These styles will be applied to the embedded form.</p>\n                </div>\n              )}\n            </div>\n\n            {/* Design Surface (Canvas) */}\n            <div className=\"editor-panel\">\n              <div className=\"panel-header-inline\">\n                <h3>Design Surface</h3>\n              </div>\n              <div className=\"form-preview\" id=\"preview-container\">\n                <div className=\"page-header\">\n                  <div>\n                    <h4 id=\"preview-form-title\">Title</h4>\n                    <p className=\"page-description\" id=\"preview-form-description\">Description</p>\n                  </div>\n                </div>\n                <div className=\"empty-state\" style={{ display: 'none' }}>\n                  <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" opacity=\"0.2\">\n                    <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\n                    <path d=\"M3 9h18M9 21V9\" />\n                  </svg>\n                  <p>Drag and drop fields from the Toolbox to build your form</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Property Grid - Field Properties First, then General settings */}\n            <div className=\"field-properties\" id=\"properties-container\">\n              {/* This will be dynamically filled by field properties when a field is selected */}\n              <div className=\"field-props-placeholder\">\n                <div className=\"panel-header\">\n                  <h2>Properties</h2>\n                </div>\n                <div className=\"no-selection\">\n                  <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" opacity=\"0.2\">\n                    <rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" />\n                    <path d=\"M7 10h10M7 14h6\" />\n                  </svg>\n                  <p>Select a field to edit its properties</p>\n                </div>\n              </div>\n\n              {/* General Settings - Always visible below field properties */}\n              <div className=\"general-settings\">\n                <div className=\"panel-header\">\n                  <h2>General</h2>\n                </div>\n\n                {/* Form Settings */}\n                <div className=\"property-section\">\n                  <div className=\"form-field\">\n                    <label>Form Type</label>\n                    <select id=\"form-type\" defaultValue=\"web\" onChange={(e) => setFormType(e.target.value)}>\n                      <option value=\"web\">Web</option>\n                      <option value=\"form\">Form</option>\n                    </select>\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Form title<span style={{ color: '#f04438' }}>*</span></label>\n                    <input id=\"form-title\" placeholder=\"Enter form title\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Form description</label>\n                    <textarea id=\"form-description\" placeholder=\"Enter description\" rows=\"3\" />\n                  </div>\n                </div>\n\n                {/* Additional Settings */}\n                <div className=\"property-section\">\n                  <h3 className=\"section-title\">Settings</h3>\n                  {formType === 'web' && (\n                    <div className=\"form-field\">\n                      <label>Domain</label>\n                      <input id=\"form-domain\" placeholder=\"Enter domain\" defaultValue=\"https://memate.com.au/\" />\n                    </div>\n                  )}\n                  <div className=\"form-field\">\n                    <label>To Email<span style={{ color: '#f04438' }}>*</span></label>\n                    <input id=\"form-submit-to\" placeholder=\"Enter email\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>From Email</label>\n                    <input id=\"form-submit-from\" placeholder=\"Enter email\" defaultValue={fromEmail} />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>CC Email</label>\n                    <input id=\"form-cc-email\" placeholder=\"Enter email\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>BCC Email</label>\n                    <input id=\"form-bcc-email\" placeholder=\"Enter email\" />\n                  </div>\n                </div>\n\n                {/* Messages */}\n                <div className=\"property-section\">\n                  <h3 className=\"section-title\">Messages</h3>\n                  <div className=\"form-field\">\n                    <label>Thank you message</label>\n                    <input id=\"form-thank-you\" placeholder=\"Enter message\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Error message</label>\n                    <input id=\"form-error-message\" placeholder=\"Enter message\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Submit Button Label</label>\n                    <input id=\"form-submit-label\" defaultValue=\"Submit\" />\n                  </div>\n                  <div className=\"form-field\">\n                    <label>Redirect URL</label>\n                    <input id=\"form-redirect-url\" placeholder=\"Enter URL\" />\n                  </div>\n                </div>\n\n                {/* reCAPTCHA */}\n                {formType === 'web' && (\n                  <div className=\"property-section\">\n                    <h3 className=\"section-title\">reCAPTCHA</h3>\n                    <div className=\"form-field\">\n                      <label>Site Key<span style={{ color: '#f04438' }}>*</span></label>\n                      <input id=\"form-recaptcha-key\" placeholder=\"Enter site key\" />\n                    </div>\n                    <div className=\"form-field\">\n                      <label>Secret Key<span style={{ color: '#f04438' }}>*</span></label>\n                      <input id=\"form-recaptcha-secret\" placeholder=\"Enter secret key\" />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Preview Tab - Shows the form preview */}\n          <div className=\"preview-tab-container\" style={{ display: activeTab === 'preview' ? 'block' : 'none' }}>\n            {/* <div className=\"preview-tab-header\">\n              <h3>Form Preview</h3>\n              <button className=\"btn btn-secondary\" onClick={() => setActiveTab('designer')}>\n                Back to Designer\n              </button>\n            </div> */}\n            <div id=\"preview-form-container-tab\" className=\"preview-form-content\" />\n          </div>\n\n          {/* Footer actions - Removed from here, now in header */}\n\n          {/* Hidden button for preview trigger */}\n          <button id=\"preview-btn\" style={{ display: 'none' }} />\n\n          {/* Preview Modal */}\n          <div className=\"modal\" id=\"preview-modal\" style={{ display: 'none' }}>\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h2>Form Preview</h2>\n                <button className=\"modal-close\"></button>\n              </div>\n              <div id=\"preview-form-container\" />\n            </div>\n          </div>\n\n          {/* Embed Code Modal */}\n          <div className=\"modal\" id=\"embed-modal\" style={{ display: 'none' }}>\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h2>Embed this Form</h2>\n                <button className=\"modal-close\" data-close-embed></button>\n              </div>\n              <p>Copy the snippet below and paste it into your website where you want the form to appear.</p>\n              <textarea\n                id=\"embed-snippet\"\n                readOnly\n                rows={4}\n                style={{\n                  boxSizing: 'border-box',\n                  fontFamily: 'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace'\n                }}\n              />\n              <div className=\"editor-actions\" style={{ justifyContent: 'flex-end' }}>\n                <button className=\"btn\" id=\"copy-embed-btn\">Copy</button>\n                <button className=\"btn btn-primary\" id=\"close-embed-btn\" disabled>OK</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}","var _excluded = [\"color\", \"size\", \"title\", \"className\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ArrowClockwise = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n    color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? '1em' : _ref$size,\n    _ref$title = _ref.title,\n    title = _ref$title === void 0 ? null : _ref$title,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    width: size,\n    height: size,\n    fill: color,\n    className: ['bi', 'bi-arrow-clockwise', className].filter(Boolean).join(' ')\n  }, rest), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466\"\n  }));\n});\nArrowClockwise.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  title: PropTypes.string,\n  className: PropTypes.string\n};\nexport default ArrowClockwise;","import { fetchAPI } from \"./base-api\";\nconst API_BASE_URL = process.env.REACT_APP_BACKEND_API_URL;\n\nexport const getJobTemplates = async () => {\n  const endpoint = `/jobs/templates/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getJobTemplate = async (id) => {\n  const endpoint = `/jobs/templates/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createJobTemplate = async (data) => {\n  const endpoint = `/jobs/templates/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateJobTemplate = async (id, data) => {\n  const endpoint = `/jobs/templates/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteJobTemplate = async (id) => {\n  const endpoint = `/jobs/templates/${id}/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getEmailTemplates = async () => {\n  const endpoint = `/settings/templates/email-templates/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createEmailTemplate = async (data) => {\n  const endpoint = `/settings/templates/email-templates/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateEmailTemplate = async (id, data) => {\n  const endpoint = `/settings/templates/email-templates/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getEmail = async (id) => {\n  const endpoint = `/settings/templates/email-templates/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getSignatureTemplates = async () => {\n  const endpoint = `/email-signatures/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getEmailSignature = async (id) => {\n  const endpoint = `/email-signatures/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createEmailSignature = async (data) => {\n  const endpoint = `/email-signatures/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateEmailSignature = async (id, data) => {\n  const endpoint = `/email-signatures/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteEmailSignature = async (id) => {\n  const endpoint = `/email-signatures/${id}/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const setDefaultEmailSignature = async (id) => {\n  const endpoint = `/settings/email-signatures/default/${id}/`;\n  const options = {\n    method: 'PUT',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getSMSTemplates = async () => {\n  const endpoint = `/sms-templates/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getSMS = async (id) => {\n  const endpoint = `/sms-templates/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createSMSTemplate = async (data) => {\n  const endpoint = `/sms-templates/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateSMSTemplate = async (id, data) => {\n  const endpoint = `/sms-templates/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteSMSTemplate = async (id) => {\n  const endpoint = `/sms-templates/${id}/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getProposalBySalesId = async (id) => {\n  const endpoint = `/proposals/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getOutgoingEmail = async () => {\n  const endpoint = `/references/outgoing-email/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteEmailTemplates = async (id) => {\n  const endpoint = `/settings/templates/email-templates/${id}/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getProposalsTemplates = async () => {\n  const endpoint = `/settings/proposals/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getProposalsTemplate = async (id) => {\n  const endpoint = `/settings/proposals/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createProposalTemplate = async (data) => {\n  const endpoint = `/settings/proposals/new/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteProposalTemplates = async (id) => {\n  const endpoint = `/settings/proposals/delete/${id}/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};","var _excluded = [\"color\", \"size\", \"title\", \"className\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Save = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n    color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? '1em' : _ref$size,\n    _ref$title = _ref.title,\n    title = _ref$title === void 0 ? null : _ref$title,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    width: size,\n    height: size,\n    fill: color,\n    className: ['bi', 'bi-save', className].filter(Boolean).join(' ')\n  }, rest), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1z\"\n  }));\n});\nSave.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  title: PropTypes.string,\n  className: PropTypes.string\n};\nexport default Save;"],"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","ArrowCounterclockwise","forwardRef","_ref","ref","_ref$color","color","_ref$size","size","_ref$title","title","_ref$className","className","rest","o","i","includes","_objectWithoutPropertiesLoose","getOwnPropertySymbols","s","propertyIsEnumerable","_objectWithoutProperties","React","xmlns","viewBox","width","height","fill","filter","Boolean","join","fillRule","d","propTypes","PropTypes","ChevronRight","INQUIRY_FORM_API_URL","initBuilder","defaultOrgId","initialForm","window","root","document","querySelector","dataset","builderInitialized","console","log","preview","properties","cssTextarea","previewBtn","saveBtn","fieldCounter","fieldsData","currentField","currentFormId","id","history","historyIndex","saveHistory","slice","push","JSON","parse","stringify","shift","restoreFromHistory","state","querySelectorAll","forEach","f","remove","keys","data","type","field_type","el","createElement","innerHTML","getTemplate","actionBar","appendChild","wireField","labelEl","label","textContent","input","placeholder","ta","updateFieldDisplay","updateMoveButtons","emptyState","style","display","rebuildPreview","addEventListener","form","_form$meta","_form$meta2","setVal","domain","description","meta","submit_to","submit_from","cc_email","bcc_email","thank_you_message","error_message","submit_button_label","redirect_url","recaptcha_site_key","recaptcha_secret_key","previewTitleEl","previewDescriptionEl","custom_css","value","fields","sort","a","b","_a$order","_b$order","order","addFieldFromData","hydrateInitialForm","setTimeout","formTitleEl","formDescriptionEl","err","error","target","palette","item","closest","dataTransfer","effectAllowed","setData","_","dragOverField","dropPosition","map","text","email","number","phone","textarea","select","radio","checkbox","multicheckbox","date","time","url","html","consent","submit_button","undefined","updateFieldRequiredUI","host","actionReq","checked","required","propReq","setAttribute","removeAttribute","star","insertAdjacentHTML","selectField","reqToggle","classList","remainingFields","stopPropagation","previousElementSibling","contains","parentNode","insertBefore","reindex","next","nextElementSibling","newOrder","node","nodes","Array","from","idx","upBtn","downBtn","disabled","selectedEl","add","fieldPropsContainer","firstChild","escapeHtml","escapeAttr","maxlength","regex","button_text","custom_style","updateFieldPreview","isNaN","maxLength","parseInt","sel","options","wrap","div","rid","name","cid","cbl","cbinput","btn","block","renderOptions","opt","row","onclick","attachRealtimeListeners","splice","matches","phEl","isRequiredEl","maxEl","regexEl","errmsgEl","htmlEl","btntextEl","btncssEl","_e$target$value","_e$target$value$toLow","toLowerCase","replace","requiredSpan","errmsgInput","borderColor","applyBtn","deselectField","capitalize","charAt","toUpperCase","String","c","v","getElementById","_f$label","_f$name3","_f$placeholder","_ref2","_f$max_length","_f$regex","_f$error_message","_f$html","_f$button_text","_f$custom_style","_id","max_length","isArray","lab","preventDefault","dropEffect","rect","getBoundingClientRect","midpoint","top","mouseY","clientY","relatedTarget","getData","referenceField","position","nextSibling","fieldsContainer","base","seedDataFor","addField","out","some","renderPreview","values","tabPreviewContainer","desc","htmlWithHeader","submitBtn","checkValidity","alert","reportValidity","async","originalHTML","dispatchEvent","CustomEvent","titleEl","trim","Error","submitToEl","formTypeEl","siteKeyEl","secretKeyEl","nameField","find","_f$name","emailField","_f$name2","field","duplicateNames","arr","indexOf","payload","_cssTextarea$value","get","_root$querySelector","formType","organization","redirect","buildApiPayload","json","res","fetch","method","headers","body","ok","catch","errorMessage","status","statusText","errorData","errors","messages","entries","fieldName","l","errorMessages","updateFormToApi","saveFormToApi","publicKey","public_key","savedFormType","contentToShow","process","embedModal","snippetEl","copyBtn","closeBtn","xBtn","modalTitle","modalDescription","doCopy","navigator","clipboard","writeText","execCommand","location","href","message","detail","FieldIcon","props","stroke","strokeWidth","strokeLinecap","strokeLinejoin","_jsxs","children","_jsx","x","y","rx","cx","cy","TempFormBuilder","_outgoingEmailTemplat","_session$organization2","session","useAuth","trialHeight","useTrialHeight","bootstrappedRef","useRef","useParams","editId","toolboxCollapsed","setToolboxCollapsed","useState","searchTerm","setSearchTerm","saving","setSaving","activeTab","setActiveTab","setFormType","filteredFieldTypes","handlePreview","useCallback","click","handleUndo","handleRedo","outgoingEmailTemplateQuery","useQuery","queryKey","queryFn","getOutgoingEmail","fromEmail","outgoing_email","useEffect","_session$organization","orgId","current","timer","formJson","getFormById","clearTimeout","cleanupBuilder","handleSaveError","_e$detail","toast","duration","handleSaveSuccess","success","handleClearError","dismiss","removeEventListener","_Fragment","overflow","onClick","Icon","ProgressSpinner","onChange","_ref3","draggable","role","rows","defaultValue","opacity","readOnly","boxSizing","fontFamily","justifyContent","ArrowClockwise","API_BASE_URL","getJobTemplates","URL","fetchAPI","toString","getJobTemplate","createJobTemplate","updateJobTemplate","deleteJobTemplate","getEmailTemplates","createEmailTemplate","updateEmailTemplate","getEmail","getSignatureTemplates","getEmailSignature","createEmailSignature","updateEmailSignature","deleteEmailSignature","setDefaultEmailSignature","getSMSTemplates","getSMS","createSMSTemplate","updateSMSTemplate","deleteSMSTemplate","getProposalBySalesId","deleteEmailTemplates","getProposalsTemplates","getProposalsTemplate","deleteProposalTemplates","Save"],"sourceRoot":""}