"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[7125],{14834:(e,s,l)=>{function a(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=parseFloat(e);return isNaN(l)?"0.00":s&&Math.abs(l)>=1e3?new Intl.NumberFormat("en-AU",{notation:"compact",compactDisplay:"short",minimumFractionDigits:2,maximumFractionDigits:2}).format(l):new Intl.NumberFormat("en-AU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l)}l.d(s,{m:()=>a})},20793:(e,s,l)=>{e.exports=l.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},36166:(e,s,l)=>{l.d(s,{DX:()=>i,H2:()=>r,LG:()=>m,RC:()=>o,Y4:()=>n,de:()=>x,e0:()=>h,ml:()=>c,os:()=>v,r$:()=>d,rf:()=>u});var a=l(31342);const t="https://app.memate.com.au/api/v1",i=async function(e,s){var l;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;const d=(e-1)*s,c=new URL(`${t}/invoices/`);c.searchParams.append("limit",s),c.searchParams.append("offset",d),i&&c.searchParams.append("search",i),n&&c.searchParams.append("ordering",n),o&&c.searchParams.append("status","not_paid");let m="";var h;null!==r&&void 0!==r&&r.client&&(m=null===r||void 0===r||null===(h=r.client)||void 0===h?void 0:h.map((e=>e.id)).join(","));m&&c.searchParams.append("clients",m);let u="";var x;null!==r&&void 0!==r&&r.status&&1===(null===r||void 0===r||null===(l=r.status)||void 0===l?void 0:l.length)&&(null===r||void 0===r||null===(x=r.status)||void 0===x||x.forEach((e=>{"Paid"===(null===e||void 0===e?void 0:e.name)?u="paid":"Not Paid"===(null===e||void 0===e?void 0:e.name)&&(u="not_paid")})));if(u&&c.searchParams.append("status",u),null!==r&&void 0!==r&&r.date){var v,p,j,b;const e=null===r||void 0===r||null===(v=r.date[0])||void 0===v||null===(p=v.value)||void 0===p?void 0:p[0];if(e){const s=new Date(e),l=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0");c.searchParams.append("create_date_after",`${l}-${a}-${t}`)}const s=null===r||void 0===r||null===(j=r.date[0])||void 0===j||null===(b=j.value)||void 0===b?void 0:b[1];if(s){const e=new Date(s),l=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");c.searchParams.append("create_date_before",`${l}-${a}-${t}`)}}return(0,a.f)(c.toString(),{method:"GET"})},n=async e=>{const s=new URL(`${t}${`/invoices/view/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"},!1)},o=async e=>{if(!e)return null;const s=new URL(`${t}${`/invoices/read/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},r=async(e,s)=>{const l={method:"POST",body:s},i=new URL(`${t}${`/invoices/payment-intent/${e}/`}`);return(0,a.f)(i.toString(),l,!1)},d=async e=>{const s=new URL(`${t}${`/invoices/delete/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},c=async(e,s)=>{const l={method:"POST",body:s},i=new URL(`${t}${`/invoices/send/${e}/`}`);return(0,a.f)(i.toString(),l)},m=async(e,s)=>{const l={method:"POST",body:s},i=new URL(`${t}${`/resend/invoice/${e}/`}`);return(0,a.f)(i.toString(),l)},h=async(e,s)=>{const l={method:"POST",body:s},i=new URL(`${t}${`/invoices/partial-payment/${e}/`}`);return(0,a.f)(i.toString(),l)},u=async e=>{const s={method:"PUT",body:e},l=new URL(`${t}/invoices/to-xero/`);return(0,a.f)(l.toString(),s)},x=async e=>{const s=new URL(`${t}${`/team/mobile-users/invoices/${e}/pay/`}`);return(0,a.f)(s.toString(),{method:"POST"})},v=async e=>{const s=new URL(`${t}${`/team/mobile-users/invoices/${e}/unpay/`}`);return(0,a.f)(s.toString(),{method:"POST"})}},57125:(e,s,l)=>{l.r(s),l.d(s,{default:()=>me});var a=l(65043),t=l(75329),i=l(38294),n=l(80248),o=l(73216),r=l(35475),d=l(93747),c=l(72018),m=l(2028),h=l(20288),u=l(56328),x=l(88166),v=l(72970),p=l(52572),j=l(63248),b=l(47097),N=l(9642),A=l(64824),g=l(93740);const y="team-invoice-history_gobackBtn__6iqiT",f="team-invoice-history_filterBox__vYogn",_="team-invoice-history_active__drF0J",S="team-invoice-history_selectedCount__jTdkr",w="team-invoice-history_clientName__c6dzb",C="team-invoice-history_status__tlCDV",$="team-invoice-history_paid__hnrzT",F="team-invoice-history_unpaid__a5I0w",P="team-invoice-history_clickButton__KF5U5";var D=l(36166),R=l(90386),k=l(48417),T=l(91352),E=l(14834),L=l(27734),U=l(99868),B=l(70579);const O=(0,a.forwardRef)(((e,s)=>{let{selected:l,setSelected:t,searchValue:i}=e;const{id:n}=(0,o.g)(),d=(0,j.jE)(),{trialHeight:c}=(0,k.$)(),m=(0,a.useRef)(null),[h,y]=(0,a.useState)([]),[f,_]=(0,a.useState)(1),[S,w]=(0,a.useState)({sortField:"",sortOrder:-1}),[C,O]=(0,a.useState)({sortField:"",sortOrder:-1}),[z,I]=(0,a.useState)(!0),[W,M]=(0,a.useState)(!1),[G,V]=(0,a.useState)(new Set),{mutate:H}=(0,b.n)({mutationFn:e=>(V((s=>new Set(s).add(e))),(0,D.de)(e)),onSuccess:(e,s)=>{y((e=>e.map((e=>e.id===s?{...e,status:"1"}:e)))),d.invalidateQueries(["teamInvoices",n]),u.oR.success("Invoice marked as paid successfully"),V((e=>{const l=new Set(e);return l.delete(s),l}))},onError:(e,s)=>{u.oR.error(e.message||"Failed to mark invoice as paid"),V((e=>{const l=new Set(e);return l.delete(s),l}))}}),{mutate:Y}=(0,b.n)({mutationFn:e=>(V((s=>new Set(s).add(e))),(0,D.os)(e)),onSuccess:(e,s)=>{y((e=>e.map((e=>e.id===s?{...e,status:"0"}:e)))),d.invalidateQueries(["teamInvoices",n]),u.oR.success("Invoice marked as unpaid successfully"),V((e=>{const l=new Set(e);return l.delete(s),l}))},onError:(e,s)=>{u.oR.error(e.message||"Failed to mark invoice as unpaid"),V((e=>{const l=new Set(e);return l.delete(s),l}))}});(0,a.useEffect)((()=>{I(!0),_(1)}),[i]),(0,a.useEffect)((()=>{n&&(async()=>{M(!0);let e="";1===(null===C||void 0===C?void 0:C.sortOrder)?e=`${C.sortField}`:-1===(null===C||void 0===C?void 0:C.sortOrder)&&(e=`-${C.sortField}`);const s=await(0,R.h9)(n,f,25,i,e);var l;1===f?y((null===s||void 0===s?void 0:s.results)||[]):(null===s||void 0===s||null===(l=s.results)||void 0===l?void 0:l.length)>0&&y((e=>{const l=new Set(e.map((e=>e.id))),a=s.results.filter((e=>!l.has(e.id)));return[...e,...a]}));w(C),I((null===s||void 0===s?void 0:s.count)!==(null===h||void 0===h?void 0:h.length)),M(!1)})()}),[n,f,i,C]),(0,a.useEffect)((()=>{if((null===h||void 0===h?void 0:h.length)>0&&z){m.current=new IntersectionObserver((e=>{e[0].isIntersecting&&_((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&m.current.observe(e)}return()=>{m.current&&m.current.disconnect()}}),[h,z]);return(0,B.jsxs)(A.b,{ref:s,value:h,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${c}px)`,className:"border",selection:l,onSelectionChange:e=>t(e.value),loading:W,loadingIcon:L.A,emptyMessage:(0,B.jsx)(U.A,{isDataExist:!(null===h||void 0===h||!h.length)}),sortField:null===S||void 0===S?void 0:S.sortField,sortOrder:null===S||void 0===S?void 0:S.sortOrder,onSort:e=>{const{sortField:s,sortOrder:l}=e;_(1),I(!0),O({sortField:s,sortOrder:l})},children:[(0,B.jsx)(N.V,{selectionMode:"multiple",bodyClassName:"show-on-hover",headerStyle:{width:"3rem"},frozen:!0}),(0,B.jsx)(N.V,{field:"number",header:"Invoice ID",body:e=>(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2",children:[(0,B.jsx)("span",{children:e.number}),(null===e||void 0===e?void 0:e.pdf_path)&&(0,B.jsx)(r.N_,{to:`https://app.memate.com.au${e.pdf_path}`,target:"_blank",children:(0,B.jsx)(p.A,{color:"#FF0000",size:16})})]}),frozen:!0,sortable:!0,style:{minWidth:"180px",maxWidth:"180px",width:"180px"},headerClassName:"shadowRight",bodyClassName:"shadowRight"}),(0,B.jsx)(N.V,{field:"date_from",header:"Week",body:e=>{const s=e=>{const s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),l=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-l);const a=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-a)/864e5+1)/7)},l=new Date(1e3*e.date_from),a=new Date(1e3*e.date_to),t=s(l),i=s(a);return t===i?`Week ${t}`:`Week ${t} - Week ${i}`},style:{minWidth:"154px"}}),(0,B.jsx)(N.V,{field:"date_to",header:"Date",body:e=>`${(0,T.Y)(e.date_from)} - ${(0,T.Y)(e.date_to)}`,sortable:!0,style:{minWidth:"113px"}}),(0,B.jsx)(N.V,{field:"total_hours",header:"Total Hours",body:e=>`${e.total_hours}h`,bodyClassName:"text-end",style:{minWidth:"114px"}}),(0,B.jsx)(N.V,{field:"total_amount",header:"Total Amount",body:e=>`$${(0,E.m)(e.total_amount)}`,style:{minWidth:"114px"}}),(0,B.jsx)(N.V,{field:"status",header:"Status",body:e=>{const s=G.has(e.id);return(0,B.jsx)("div",{className:`${P} ${"1"===e.status?$:F}`,onClick:()=>{G.has(e.id)||("1"===e.status?Y(e.id):H(e.id))},style:{cursor:s?"wait":"pointer"},children:s?(0,B.jsx)(g.p,{style:{width:"18px",height:"18px"}}):"1"===e.status?(0,B.jsxs)(B.Fragment,{children:["Paid ",(0,B.jsx)(x.A,{color:"#079455",size:16})]}):(0,B.jsxs)(B.Fragment,{children:["Not Paid ",(0,B.jsx)(v.A,{color:"#F04438",size:16})]})})},style:{minWidth:"140px",maxWidth:"140px",width:"140px"}})]})}));var z=l(14282),I=l(61072),W=l(78602),M=l(95192),G=l(56741),V=l(58387),H=l(63263),Y=l(76104);const K="mobile-user-view_profileBox__FNrAr",q="mobile-user-view_box__2w3PD",Z="mobile-user-view_boxLabel__XrlJ-",X="mobile-user-view_boxLabel2__g0khI",J="mobile-user-view_label__JT7q3",Q="mobile-user-view_text__j0EDc";var ee=l(51038),se=l(54972),le=l(88060),ae=l(28676),te=l(74532),ie=l(72052),ne=l(27932);const oe={profileBox:"mobile-user-edit_profileBox__V1x77",box:"mobile-user-edit_box__ek+KS",boxLabel:"mobile-user-edit_boxLabel__M19d7",boxLabel2:"mobile-user-edit_boxLabel2__SlGaf",label:"mobile-user-edit_label__ETG14",text:"mobile-user-edit_text__X6ye2",iconBoxsContainer:"mobile-user-edit_iconBoxsContainer__evXL0",iconBox:"mobile-user-edit_iconBox__i7yAD"},re=e=>{let{user:s,message:l,setMessage:a,paymentCycle:t,setPaymentCycle:i,gst:n,setGst:o,hourlyRate:r,setHourlyRate:d}=e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:(0,V.A)(oe.box),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:12,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Rating"}),(0,B.jsx)(H.G,{value:(null===s||void 0===s?void 0:s.rating)||0,className:"yellow-rating",style:{position:"static"},readOnly:!0,cancel:!1})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"First Name"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:null===s||void 0===s?void 0:s.first_name})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Last Name"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:null===s||void 0===s?void 0:s.last_name})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Days in Company"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.days_in_company)||0})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"ABN/TFN"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.abn)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(oe.boxLabel,"mb-2"),children:"Contact Person"}),(0,B.jsx)("div",{className:(0,V.A)(oe.box),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Email"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.email)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Phone"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.phone)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(oe.boxLabel,"mb-2"),children:"Address"}),(0,B.jsx)("div",{className:(0,V.A)(oe.box),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Country"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.country)||"-"})]}),(0,B.jsx)(W.A,{sm:6}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"State"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.state)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"City/Suburb"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.city)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Street Address"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.street)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Postcode"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.postcode)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(oe.boxLabel,"mb-2"),children:"Payment"}),(0,B.jsx)("div",{className:(0,V.A)(oe.box,"border"),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:5,children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"P/H"}),(0,B.jsxs)(ae.C,{className:"w-100 border rounded",iconPosition:"right",children:[(0,B.jsx)(te.m,{children:(0,B.jsx)("span",{style:{position:"relative",top:"-4px",left:"10px"},children:"$"})}),(0,B.jsx)(ie.S,{value:r,keyfilter:"num",onChange:e=>{var s;return d((null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)||0)},style:{paddingLeft:"28px",paddingRight:"40px",height:"46px"},className:(0,V.A)(oe.inputText,"outline-none","w-100"),placeholder:"20"}),(0,B.jsx)(te.m,{children:(0,B.jsx)(ee.A,{style:{position:"relative",top:"-4px",right:"5px"},color:"#98A2B3",size:16})})]})]}),(0,B.jsxs)(W.A,{sm:5,children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Payment cycle"}),(0,B.jsx)(le.m,{options:[{value:"7",label:"WEEK"},{value:"14",label:"TWO_WEEKS",disabled:!0},{value:"28",label:"FOUR_WEEKS",disabled:!0},{value:"1",label:"MONTH",disabled:!0}],className:(0,V.A)(oe.dropdownSelect,"dropdown-height-fixed","outline-none"),placeholder:"Select payment cycle",value:t,style:{height:"46px",width:"180px"},onChange:e=>i(e.value),filterInputAutoFocus:!0})]}),(0,B.jsxs)(W.A,{sm:2,className:"d-flex align-items-center pt-4 gap-2",children:[(0,B.jsx)(se.S,{onChange:e=>o(e.checked),checked:n}),"GST"]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(oe.boxLabel,"mb-2"),children:"Emergency Contact"}),(0,B.jsx)("div",{className:(0,V.A)(oe.box),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Full Name"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.emergency_contact_name)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(oe.label),children:"Phone"}),(0,B.jsx)("p",{className:(0,V.A)(oe.text),children:(null===s||void 0===s?void 0:s.emergency_contact_phone)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(oe.boxLabel,"mb-2"),children:"Manager notes:"}),(0,B.jsx)("div",{className:(0,V.A)(oe.box),children:(0,B.jsx)(ne.Z,{value:l,onChange:e=>a(e.target.value),rows:5,cols:30,className:(0,V.A)(oe.inputText,"w-100"),style:{resize:"none"},placeholder:"Enter a note..."})})]})},de=e=>{let{user:s}=e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:(0,V.A)(q),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:12,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Rating"}),(0,B.jsx)(H.G,{value:(null===s||void 0===s?void 0:s.rating)||0,className:"yellow-rating",style:{position:"static"},readOnly:!0,cancel:!1})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"First Name"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:null===s||void 0===s?void 0:s.first_name})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Last Name"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:null===s||void 0===s?void 0:s.last_name})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Days in Company"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.days_in_company)||0})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"ABN/TFN"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.abn)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(Z,"mb-2"),children:"Contact Person"}),(0,B.jsx)("div",{className:(0,V.A)(q),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Email"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.email)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-0",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Phone"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.phone)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(Z,"mb-2"),children:"Address"}),(0,B.jsx)("div",{className:(0,V.A)(q),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Country"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.country)||"-"})]}),(0,B.jsx)(W.A,{sm:6}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"State"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.state)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,className:"mb-3",children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"City/Suburb"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.city)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Street Address"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.street)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Postcode"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.postcode)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(Z,"mb-2"),children:"Payment"}),(0,B.jsx)("div",{className:(0,V.A)(q),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:4,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"P/H"}),(0,B.jsxs)("p",{className:(0,V.A)(Q),children:["$",(0,E.m)((null===s||void 0===s?void 0:s.hourly_rate)||0)]})]}),(0,B.jsxs)(W.A,{sm:4,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Payment cycle"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:"7"==(null===s||void 0===s?void 0:s.payment_cycle)?"Week":"-"})]}),(0,B.jsxs)(W.A,{sm:4,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Format"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:"Contractor"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(Z,"mb-2"),children:"Emergency Contact"}),(0,B.jsx)("div",{className:(0,V.A)(q),children:(0,B.jsxs)(I.A,{children:[(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Full Name"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.emergencyContactName)||"-"})]}),(0,B.jsxs)(W.A,{sm:6,children:[(0,B.jsx)("label",{className:(0,V.A)(J),children:"Phone"}),(0,B.jsx)("p",{className:(0,V.A)(Q),children:(null===s||void 0===s?void 0:s.emergencyPhone)||"-"})]})]})}),(0,B.jsx)("h5",{className:(0,V.A)(Z,"mb-2"),children:"Manager Notes"}),(0,B.jsx)("div",{className:(0,V.A)(q),children:(0,B.jsx)("p",{className:"mb-0 font-14",children:(null===s||void 0===s?void 0:s.manager_notes)||"-"})})]})},ce=e=>{let{user:s,refetch:l,closeIconRef:t,hide:i}=e;const n=(0,o.Zp)(),[r,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)({}),[h,x]=(0,a.useState)((null===s||void 0===s?void 0:s.manager_notes)||""),[v,p]=(0,a.useState)((null===s||void 0===s?void 0:s.payment_cycle)||"7"),[j,N]=(0,a.useState)((null===s||void 0===s?void 0:s.gst)||!1),[A,g]=(0,a.useState)((null===s||void 0===s?void 0:s.hourly_rate)||0),y=(0,b.n)({mutationFn:e=>(0,R.bd)(null===s||void 0===s?void 0:s.id,e),onSuccess:()=>{l(),u.oR.success("user updated successfully"),n("/work/people")},onError:()=>{u.oR.error("Failed to update user. Please try again.")}});return(0,a.useEffect)((()=>{x((null===s||void 0===s?void 0:s.manager_notes)||""),p((null===s||void 0===s?void 0:s.payment_cycle)||"7"),N((null===s||void 0===s?void 0:s.gst)||!1),g((null===s||void 0===s?void 0:s.hourly_rate)||0)}),[s]),(0,B.jsx)("div",{className:"view-details-sidebar",children:(0,B.jsxs)("div",{className:"d-flex flex-column",children:[(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,B.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,B.jsx)("div",{className:(0,V.A)(K,"d-flex align-items-center justify-content-center"),children:null!==s&&void 0!==s&&s.photo?(0,B.jsx)("img",{src:null===s||void 0===s?void 0:s.photo,alt:"user-photo"}):(0,B.jsx)(M.A,{color:"#667085",size:26})}),(0,B.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,B.jsxs)("span",{style:{color:"344054",fontSize:"22px",fontWeight:600},children:[null===s||void 0===s?void 0:s.first_name," ",null===s||void 0===s?void 0:s.last_name]}),null!==s&&void 0!==s&&s.deleted?(0,B.jsx)(Y.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]}),(0,B.jsx)("span",{children:(0,B.jsx)(z.A,{type:"button",className:"text-button",ref:t,onClick:e=>i(e),children:(0,B.jsx)(G.A,{size:24,color:"#667085"})})})]}),(0,B.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 130px)",overflow:"auto"},children:[(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,B.jsx)("h5",{className:(0,V.A)(Z),children:"user Details"}),(0,B.jsxs)("h6",{className:(0,V.A)(X),children:["user ID: ",null===s||void 0===s?void 0:s.number]})]}),r?(0,B.jsx)(re,{user:s,message:h,setMessage:x,paymentCycle:v,setPaymentCycle:p,gst:j,setGst:N,hourlyRate:A,setHourlyRate:g}):(0,B.jsx)(de,{user:s})]}),(0,B.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between h-100",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[(null!==s&&void 0!==s&&s.deleted,(0,B.jsx)("span",{})),r?(0,B.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,B.jsx)(z.A,{type:"button",disabled:y.isPending,onClick:e=>{e.stopPropagation(),d(!1)},className:"outline-button",children:"Cancel"}),(0,B.jsx)(z.A,{type:"button",disabled:y.isPending,onClick:()=>{let e={manager_notes:h,payment_cycle:v,gst:j,hourly_rate:A};y.mutate(e)},className:"solid-button",style:{minWidth:"179px"},children:y.isPending?"Loading...":"Save user Details"})]}):null!==s&&void 0!==s&&s.deleted?(0,B.jsx)(z.A,{type:"button",onClick:e=>{e.stopPropagation(),d(!0)},className:"solid-button",children:"Restore user"}):(0,B.jsx)(z.A,{type:"button",onClick:e=>{e.stopPropagation(),d(!0)},className:"solid-button",children:"Edit user"})]})]})})},me=()=>{var e;const s=(0,o.Zp)(),l=new URLSearchParams(window.location.search).get("name"),x=(0,a.useRef)(null),{id:v}=(0,o.g)(),[p,j]=(0,a.useState)(!0),[b,N]=(0,a.useState)(null),[A,g]=(0,a.useState)(null),[P,D,k]=(0,m.d7)("",400),T=(0,d.I)({queryKey:["mobile-user-read"],queryFn:()=>(0,R.tD)(),retry:1,cacheTime:0});return(0,a.useEffect)((()=>{var e,l,a;if(null===T||void 0===T||null===(e=T.data)||void 0===e||null===(l=e.users)||void 0===l||!l.length||!v)return;const t=null===T||void 0===T||null===(a=T.data)||void 0===a?void 0:a.users.find((e=>e.id==v));t?g(t):(u.oR.error("Mobile user not found"),s("/work/people"))}),[null===T||void 0===T||null===(e=T.data)||void 0===e?void 0:e.users,v,s]),(0,B.jsxs)("div",{className:"client-order-history-page",children:[(0,B.jsxs)("div",{className:"client-order-history",style:{width:p?"calc(100% - 559px)":"100%"},children:[(0,B.jsxs)("div",{className:`topbar ${null!==b&&void 0!==b&&b.length?_:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,B.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==b&&void 0!==b&&b.length?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("h6",{className:S,children:["Selected: ",null===b||void 0===b?void 0:b.length]}),(0,B.jsx)("div",{className:"filtered-box",children:(0,B.jsx)("button",{className:`${f}`,onClick:()=>{return e=!0,void(x.current?x.current.exportCSV({selectionOnly:e}):console.error("DataTable ref is null"));var e},children:(0,B.jsx)(t.A,{})})})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(r.N_,{to:"/work/people",className:`${y}`,children:[(0,B.jsx)(i.A,{color:"#1AB2FF",size:20})," Go Back"]}),(0,B.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,B.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,B.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,B.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,B.jsx)("input",{type:"text",placeholder:"Search",value:P,onChange:e=>k(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),(0,B.jsx)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,B.jsx)("h1",{onClick:()=>{j(!0)},className:`${w} m-0 p-0 cursor-pointer`,title:l,children:l||""})}),(0,B.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,B.jsx)("div",{className:`${C} ${$}`,children:"Paid: 0"}),(0,B.jsx)("div",{className:`${C} ${F}`,children:"Not Paid: 0"}),(0,B.jsx)(c.$,{label:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(n.A,{color:"#1ab2ff",size:20})," \xa0 ",(0,B.jsx)("span",{style:{position:"relative",top:"2px"},children:"Open"})]}),onClick:()=>j(!0),className:"primary-text-button",text:!0})]})]}),(0,B.jsx)(O,{ref:x,selected:b,setSelected:N,searchValue:D,setVisible:j})]}),(0,B.jsx)(h.B,{visible:p,position:"right",onHide:()=>j(!1),modal:!1,dismissable:!1,style:{width:"559px"},content:e=>{let{closeIconRef:s,hide:l}=e;return(0,B.jsx)(ce,{closeIconRef:s,hide:l,setVisible:j,user:A,refetch:null===T||void 0===T?void 0:T.refetch})}})]})}},90386:(e,s,l)=>{l.d(s,{V_:()=>n,bd:()=>r,h9:()=>o,tD:()=>i});var a=l(31342);const t="https://app.memate.com.au/api/v1",i=async()=>{const e=new URL(`${t}/team/mobile-users/`);return(0,a.f)(e.toString(),{method:"GET"})},n=async()=>{const e=new URL(`${t}/users/desktop-users/`);return(0,a.f)(e.toString(),{method:"GET"})},o=async function(e,s,l){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!e||!s||!l)return;const n=(s-1)*l,o=new URL(`${t}${`/team/mobile-users/${e}/invoices/`}`);return o.searchParams.append("limit",l),o.searchParams.append("offset",n),i&&o.searchParams.append("number",i),(0,a.f)(o.toString(),{method:"GET"})},r=async(e,s)=>{const l={method:"PUT",body:s},i=new URL(`${t}${`/team/mobile-users/${e}/`}`);return(0,a.f)(i.toString(),l)}},99868:(e,s,l)=>{l.d(s,{A:()=>v});var a=l(65043),t=l(14282),i=l(38294),n=l(35475),o=l(58387);const r="no-data-found-template_noDataBox__HgeT1",d="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",m="no-data-found-template_supportext__pHg2P";var h=l(20793),u=l(32808),x=l(70579);const v=e=>{let{isDataExist:s=!0}=e;const[l,v]=(0,a.useState)(!1);return(0,x.jsxs)("div",{className:(0,o.A)(r),children:[(0,x.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,x.jsx)("img",{src:h,alt:"no-data"})}),s?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h2",{className:(0,o.A)(d),children:"There is no results"}),(0,x.jsxs)("p",{className:(0,o.A)(c),children:["The user you are looking for doesn't exist. ",(0,x.jsx)("br",{}),"Here are some helpful links:"]}),(0,x.jsx)(n.N_,{to:"/",children:(0,x.jsxs)(t.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,x.jsx)(i.A,{})," Go back"]})}),(0,x.jsx)(n.N_,{onClick:()=>v(!0),to:"#",children:(0,x.jsx)("span",{className:(0,o.A)(m),children:"Support"})})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("h2",{className:(0,o.A)(d),children:"No historical records yet."})}),(0,x.jsx)(u.A,{setVisible:v,visible:l})]})}}}]);
//# sourceMappingURL=7125.526a2ce3.chunk.js.map