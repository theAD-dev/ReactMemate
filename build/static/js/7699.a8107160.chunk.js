"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[7699],{70016:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n(65043),s=n(61072),a=n(14282),i=n(38294),l=n(95192),r=n(36237),c=n(44541),p=n(73216),d=n(35475),u=n(64018),m=n(63712),f=n(56328),y=n(33074),v=n(70579);const b=()=>{const{id:e}=(0,p.g)(),t=(0,p.Zp)(),n=(0,o.useRef)(null),[b,h]=(0,o.useState)(null),[x,j]=(0,o.useState)(!1),[g]=(0,o.useState)({payment_terms:1,category:"",phone:{country:"",number:""},contact_persons:[{}],addresses:[{title:"Main Location",country:1}]});return(0,v.jsx)("div",{className:"newQuotePage existingClients borderSkyColor",children:(0,v.jsxs)("div",{style:{height:"calc(100vh - 249px)"},children:[(0,v.jsx)("div",{className:"newQuoteBack",children:(0,v.jsx)(d.k2,{to:e?"/sales/newquote/selectyourclient/existing-clients":"/sales/newquote/selectyourclient/new-clients",children:(0,v.jsxs)("button",{children:[(0,v.jsx)(i.A,{color:"#000000",size:20})," \xa0\xa0Go Back"]})})}),(0,v.jsxs)("div",{className:"newQuoteContent h-100",children:[(0,v.jsx)("div",{className:"navStepClient",children:(0,v.jsxs)("ul",{children:[(0,v.jsxs)("li",{children:[(0,v.jsx)("span",{children:(0,v.jsx)(l.A,{color:"#D0D5DD",size:15})})," ",(0,v.jsx)("p",{children:"Choose Client"})]}),(0,v.jsxs)("li",{className:"activeClientTab",children:[(0,v.jsx)("span",{children:(0,v.jsx)(r.A,{color:"#D0D5DD",size:15})})," ",(0,v.jsx)("p",{children:"Client Information"})," "]}),(0,v.jsxs)("li",{className:"deactiveColorBox",children:[(0,v.jsx)("span",{children:(0,v.jsx)(c.A,{color:"#D0D5DD",size:15})})," ",(0,v.jsx)("p",{children:"Scope of Work"})," "]})]})}),(0,v.jsxs)("div",{className:"individual height customscrollBar",children:[(0,v.jsx)("div",{className:"formgroupWrap1",children:(0,v.jsx)("ul",{className:"mt-4",children:(0,v.jsx)("li",{children:(0,v.jsxs)(d.k2,{className:"ActiveClient businessTab",to:"#",children:[(0,v.jsx)("span",{children:(0,v.jsx)(c.A,{color:"#1AB2FF ",size:24})})," Business Client"]})})})}),(0,v.jsx)("div",{className:"formgroupboxs businessFormInQuote",style:{padding:"24px 10px 0px 10px"},children:(0,v.jsxs)(s.A,{className:"text-left pt-3 rounded px-2",style:{background:"#fff"},children:[(0,v.jsx)("h2",{style:{marginBottom:"16px"},children:"Company Details"}),(0,v.jsx)(y.A,{photo:b,setPhoto:h,ref:n,onSubmit:async e=>{const n=new FormData;n.append("name",e.name),e.abn&&n.append("abn",e.abn);const o=(null===e||void 0===e?void 0:e.phone)&&(0,u.l)(e.phone);if(null!==o&&void 0!==o&&o.nationalNumber&&n.append("phone",e.phone),n.append("email",e.email),e.website&&n.append("website",e.website),n.append("payment_terms",e.payment_terms),"0"!=e.category&&n.append("category",e.category),n.append("industry",e.industry),e.description&&n.append("description",e.description),e.addresses.forEach(((e,t)=>{e.city&&(n.append(`addresses[${t}]address`,e.address),n.append(`addresses[${t}]city`,e.city),n.append(`addresses[${t}]postcode`,e.postcode),n.append(`addresses[${t}]is_main`,e.is_main),n.append(`addresses[${t}]title`,e.title))})),e.contact_persons.forEach(((e,t)=>{if(e.firstname||e.email){n.append(`contact_persons[${t}]firstname`,e.firstname),n.append(`contact_persons[${t}]lastname`,e.lastname),n.append(`contact_persons[${t}]email`,e.email);const o=(null===e||void 0===e?void 0:e.phone)&&(0,u.l)(e.phone);null!==o&&void 0!==o&&o.nationalNumber&&n.append(`contact_persons[${t}]phone`,e.phone),n.append(`contact_persons[${t}]position`,e.position),n.append(`contact_persons[${t}]is_main`,e.is_main)}})),null!==b&&void 0!==b&&b.croppedImageBlob){const e=(0,m.Ak)(6);n.append("photo",null===b||void 0===b?void 0:b.croppedImageBlob,`${e}.jpg`)}try{j(!0);const e=localStorage.getItem("access_token"),o=await fetch("https://dev.memate.com.au/api/v1/clients/business/new/",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:n});if(o.ok){f.oR.success("New client created successfully");const e=await o.json();t(`/sales/newquote/selectyourclient/client-information/scope-of-work/${null===e||void 0===e?void 0:e.id}`)}else{const e=await o.json();f.oR.error(e||"Failed to create new client. Please try again.")}}catch(s){console.log("Error in creating new business client: ",s),f.oR.error("Failed to create new client. Please try again.")}finally{j(!1)}},defaultValues:g,deleteAddress:()=>{},deleteContact:()=>{}})]})})]}),(0,v.jsxs)("div",{className:"individual bottomBox",children:[(0,v.jsx)(d.N_,{to:"/sales",children:(0,v.jsx)(a.A,{type:"button",className:"cancel-button",children:"Cancel"})}),(0,v.jsx)(a.A,{type:"button",disabled:x,onClick:()=>{n.current&&n.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},className:"submit-button",children:x?"Loading...":"Next Step"})]})]})]})})}},72052:(e,t,n)=>{n.d(t,{S:()=>h});var o=n(65043),s=n(84052),a=n(41828),i=n(2028),l=n(2224),r=n(1356),c=n(4504);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(null,arguments)}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function m(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={root:function(e){var t=e.props,n=e.isFilled,o=e.context;return(0,c.xW)("p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":n,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:o&&"filled"===o.inputStyle})}},y=a.x.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,children:void 0,className:null,invalid:!1,variant:null,keyfilter:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,iconPosition:null},css:{classes:f}});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=o.memo(o.forwardRef((function(e,t){var n=(0,i.qV)(),d=o.useContext(s.UM),u=y.getProps(e,d),m=y.setMetaData(b(b({props:u},u.__parentMetadata),{},{context:{disabled:u.disabled,iconPosition:u.iconPosition}})),f=m.ptm,v=m.cx,h=m.isUnstyled;(0,a.j)(y.css.styles,h,{name:"inputtext",styled:!0});var x=o.useRef(t);o.useEffect((function(){c.BF.combinedRefs(x,t)}),[x,t]);var j=o.useMemo((function(){return c.BF.isNotEmpty(u.value)||c.BF.isNotEmpty(u.defaultValue)}),[u.value,u.defaultValue]),g=c.BF.isNotEmpty(u.tooltip);o.useEffect((function(){var e;j||null!==(e=x.current)&&void 0!==e&&e.value?c.DV.addClass(x.current,"p-filled"):c.DV.removeClass(x.current,"p-filled")}),[u.disabled,j]);var w=n({className:(0,c.xW)(u.className,v("root",{context:d,isFilled:j})),onBeforeInput:function(e){u.onBeforeInput&&u.onBeforeInput(e),u.keyfilter&&l.Q.onBeforeInput(e,u.keyfilter,u.validateOnly)},onInput:function(e){var t=e.target,n=!0;u.keyfilter&&u.validateOnly&&(n=l.Q.validate(e,u.keyfilter)),u.onInput&&u.onInput(e,n),c.BF.isNotEmpty(t.value)?c.DV.addClass(t,"p-filled"):c.DV.removeClass(t,"p-filled")},onKeyDown:function(e){u.onKeyDown&&u.onKeyDown(e),u.keyfilter&&l.Q.onKeyPress(e,u.keyfilter,u.validateOnly)},onPaste:function(e){u.onPaste&&u.onPaste(e),u.keyfilter&&l.Q.onPaste(e,u.keyfilter,u.validateOnly)}},y.getOtherProps(u),f("root"));return o.createElement(o.Fragment,null,o.createElement("input",p({ref:x},w)),g&&o.createElement(r.m,p({target:x,content:u.tooltip,pt:f("tooltip")},u.tooltipOptions)))})));h.displayName="InputText"}}]);
//# sourceMappingURL=7699.a8107160.chunk.js.map