"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[6884],{85497:(e,t,n)=>{n.d(t,{A:()=>N});var a=n(58387),r=n(63712),o=n(65043),s=n(20288),l=n(14282),i=n(93202),c=n(56741),p=n(65173),u=n.n(p),d=["color","size","title","className"];function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f.apply(this,arguments)}function m(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var y=(0,o.forwardRef)((function(e,t){var n=e.color,a=e.size,r=e.title,s=e.className,l=m(e,d);return o.createElement("svg",f({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:n,className:["bi","bi-building-add",s].filter(Boolean).join(" ")},l),r?o.createElement("title",null,r):null,o.createElement("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0"}),o.createElement("path",{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6.5a.5.5 0 0 1-1 0V1H3v14h3v-2.5a.5.5 0 0 1 .5-.5H8v4H3a1 1 0 0 1-1-1z"}),o.createElement("path",{d:"M4.5 2a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-6 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"}))}));y.propTypes={color:u().string,size:u().oneOfType([u().string,u().number]),title:u().string,className:u().string},y.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const v=y;var h=n(2210),b=n(20685),g=n(17344),x=n(33074),j=n(56328),w=n(43162),O=n(70579);const N=e=>{let{visible:t,setVisible:n,refetch:p}=e;const u=(0,o.useRef)(null),[d,f]=(0,o.useState)(!1),[m,y]=(0,o.useState)(null),[N,P]=(0,o.useState)("1"),[z,A]=(0,o.useState)({payment_terms:1,category:1,phone:{country:"",number:""},contact_persons:[{}],addresses:[{}]}),[E,B]=(0,o.useState)({payment_terms:1,category:1}),S=async e=>{e&&"2"===N?(async e=>{console.log("indivisualFormSubmit: ",e);const t=(0,w.$)(e,m);f(!0),await(0,w.g)("https://dev.memate.com.au/api/v1/clients/individual/new/","POST",t,(e=>{console.log("response: ",e),j.oR.success("New client created successfully"),n(!1),p((e=>!e))}),(()=>{j.oR.error("Failed to create new client. Please try again.")})),f(!1)})(e):(async e=>{console.log("data: ",e);const t=new FormData;if(t.append("name",e.name),e.abn&&t.append("abn",e.abn),t.append("phone",e.phone),t.append("email",e.email),e.website&&t.append("website",e.website),t.append("payment_terms",e.payment_terms),"0"!=e.category&&t.append("category",e.category),t.append("industry",e.industry),e.description&&t.append("description",e.description),e.addresses.forEach(((e,n)=>{e.city&&(t.append(`addresses[${n}]address`,e.address),t.append(`addresses[${n}]city`,e.city),t.append(`addresses[${n}]postcode`,e.postcode),t.append(`addresses[${n}]is_main`,e.is_main),t.append(`addresses[${n}]title`,e.title))})),e.contact_persons.forEach(((e,n)=>{(e.firstname||e.email)&&(t.append(`contact_persons[${n}]firstname`,e.firstname),t.append(`contact_persons[${n}]lastname`,e.lastname),t.append(`contact_persons[${n}]email`,e.email),t.append(`contact_persons[${n}]phone`,e.phone),t.append(`contact_persons[${n}]position`,e.position),t.append(`contact_persons[${n}]is_main`,e.is_main))})),null!==m&&void 0!==m&&m.croppedImageBlob){const e=(0,r.Ak)(6);t.append("photo",null===m||void 0===m?void 0:m.croppedImageBlob,`${e}.jpg`)}try{f(!0);const e=localStorage.getItem("access_token"),a=await fetch("https://dev.memate.com.au/api/v1/clients/business/new/",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:t});a.ok?(console.log("response: ",a),j.oR.success("New client created successfully"),n(!1),p((e=>!e))):j.oR.error("Failed to create new client. Please try again.")}catch(a){j.oR.error("Failed to create new client. Please try again.")}finally{f(!1)}})(e)},F=()=>{u.current&&u.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,o.useEffect)((()=>{t||y(null)}),[t]),(0,O.jsx)(s.B,{visible:t,position:"right",onHide:()=>n(!1),modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{let{closeIconRef:t,hide:r}=e;return(0,O.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,O.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,O.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,O.jsx)("div",{className:b.A.circledesignstyle,children:(0,O.jsx)("div",{className:b.A.out,children:(0,O.jsx)(i.A,{size:24,color:"#17B26A"})})}),(0,O.jsx)("span",{style:{color:"344054",fontSize:"20px",fontWeight:600},children:"Create New Client"})]}),(0,O.jsx)("span",{children:(0,O.jsx)(l.A,{type:"button",className:"text-button",ref:t,onClick:e=>r(e),children:(0,O.jsx)(c.A,{size:24,color:"#667085"})})})]}),(0,O.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 105px)",overflow:"auto"},children:[(0,O.jsx)("div",{style:{padding:"24px 18px 0px 18px",background:"#f9fafb"},children:(0,O.jsxs)("div",{className:(0,a.A)("tabs d-flex gap-3"),children:[(0,O.jsxs)("div",{onClick:()=>P("1"),className:(0,a.A)(b.A.tab,{[b.A.active]:"1"===N}),children:[(0,O.jsx)("div",{className:(0,a.A)(b.A.iconBox),children:(0,O.jsx)(v,{size:24,color:"#1AB2FF"})}),(0,O.jsx)("span",{className:(0,a.A)(b.A.tabText),children:"Business"})]}),(0,O.jsxs)("div",{onClick:()=>P("2"),className:(0,a.A)(b.A.tab,{[b.A.active]:"2"===N}),children:[(0,O.jsx)("div",{className:(0,a.A)(b.A.iconBox),children:(0,O.jsx)(h.A,{size:24,color:"#1AB2FF"})}),(0,O.jsx)("span",{className:(0,a.A)(b.A.tabText),children:"Individual"})]})]})}),"1"===N?(0,O.jsx)(x.A,{photo:m,setPhoto:y,ref:u,onSubmit:S,defaultValues:z,deleteAddress:()=>{},deleteContact:()=>{}}):(0,O.jsx)(g.A,{photo:m,setPhoto:y,ref:u,onSubmit:S,defaultValues:E})]}),(0,O.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-end gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,O.jsx)(l.A,{type:"button",onClick:e=>{e.stopPropagation(),n(!1)},className:"outline-button",children:"Cancel"}),(0,O.jsx)(l.A,{type:"button",onClick:F,className:"solid-button",style:{minWidth:"179px"},children:d?"Loading...":"Save Client Details"})]})]})}})}},27932:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(65043),r=n(84052),o=n(41828),s=n(2028),l=n(2224),i=n(1356),c=n(4504);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(this,arguments)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var f={root:function(e){var t=e.props,n=e.context,a=e.isFilled;return(0,c.xW)("p-inputtextarea p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":a,"p-inputtextarea-resizable":t.autoResize,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:n&&"filled"===n.inputStyle})}},m=o.x.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,invalid:!1,variant:null,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0},css:{classes:f,styles:"\n@layer primereact {\n    .p-inputtextarea-resizable {\n        overflow: hidden;\n        resize: none;\n    }\n    \n    .p-fluid .p-inputtextarea {\n        width: 100%;\n    }\n}\n"}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var a,r,o;a=e,r=t,o=n[t],(r=d(r))in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=a.memo(a.forwardRef((function(e,t){var n=(0,s.qV)(),u=a.useContext(r.UM),d=m.getProps(e,u),f=a.useRef(t),y=a.useRef(0),h=m.setMetaData(v(v({props:d},d.__parentMetadata),{},{context:{disabled:d.disabled}})),b=h.ptm,g=h.cx,x=h.isUnstyled;(0,o.j)(m.css.styles,x,{name:"inputtextarea"});var j=function(e){var t=f.current;t&&c.DV.isVisible(t)&&(y.current||(y.current=t.scrollHeight,t.style.overflow="hidden"),(y.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",y.current=t.scrollHeight))};a.useEffect((function(){c.BF.combinedRefs(f,t)}),[f,t]),a.useEffect((function(){d.autoResize&&j(!0)}),[d.autoResize]);var w=a.useMemo((function(){return c.BF.isNotEmpty(d.value)||c.BF.isNotEmpty(d.defaultValue)}),[d.value,d.defaultValue]),O=c.BF.isNotEmpty(d.tooltip),N=n({ref:f,className:(0,c.xW)(d.className,g("root",{context:u,isFilled:w})),onFocus:function(e){d.autoResize&&j(),d.onFocus&&d.onFocus(e)},onBlur:function(e){d.autoResize&&j(),d.onBlur&&d.onBlur(e)},onKeyUp:function(e){d.autoResize&&j(),d.onKeyUp&&d.onKeyUp(e)},onKeyDown:function(e){d.onKeyDown&&d.onKeyDown(e),d.keyfilter&&l.Q.onKeyPress(e,d.keyfilter,d.validateOnly)},onBeforeInput:function(e){d.onBeforeInput&&d.onBeforeInput(e),d.keyfilter&&l.Q.onBeforeInput(e,d.keyfilter,d.validateOnly)},onInput:function(e){var t=e.target;d.autoResize&&j(c.BF.isEmpty(t.value)),d.onInput&&d.onInput(e),c.BF.isNotEmpty(t.value)?c.DV.addClass(t,"p-filled"):c.DV.removeClass(t,"p-filled")},onPaste:function(e){d.onPaste&&d.onPaste(e),d.keyfilter&&l.Q.onPaste(e,d.keyfilter,d.validateOnly)}},m.getOtherProps(d),b("root"));return a.createElement(a.Fragment,null,a.createElement("textarea",N),O&&a.createElement(i.m,p({target:f,content:d.tooltip,pt:b("tooltip")},d.tooltipOptions)))})));h.displayName="InputTextarea"},2210:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(65043),r=n(65173),o=n.n(r),s=["color","size","title","className"];function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=(0,a.forwardRef)((function(e,t){var n=e.color,r=e.size,o=e.title,c=e.className,p=i(e,s);return a.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n,className:["bi","bi-person-add",c].filter(Boolean).join(" ")},p),o?a.createElement("title",null,o):null,a.createElement("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0m-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"}),a.createElement("path",{d:"M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"}))}));c.propTypes={color:o().string,size:o().oneOfType([o().string,o().number]),title:o().string,className:o().string},c.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const p=c}}]);
//# sourceMappingURL=6884.eee6a231.chunk.js.map