"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[6199],{17344:(e,t,s)=>{s.d(t,{A:()=>N});var a=s(65043),l=s(61072),n=s(78602),r=s(95192),i=s(24858),o=s(17380),d=s(18403),c=s(93747),u=s(58387),m=s(88060),p=s(28676),h=s(74532),x=s(72052),v=s(27932),g=s(80899),f=s(20685),j=s(59638),y=s(27472),b=s(63882),w=s(70579);const A=g.Ik({firstname:g.Yj().required("First name is required"),lastname:g.Yj().required("Last name is required"),email:g.Yj().nullable().transform((e=>""===e?null:e)).matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Invalid email address").notRequired(),payment_terms:g.ai().typeError("Enter a valid payment terms").required("Payment terms are required"),category:g.ai().typeError("Enter a valid category").required("Category is required")}).required(),N=(0,a.forwardRef)(((e,t)=>{var s,g,N,_,S,I,P,C,E,B,T,O,$,F,k,D,R,q,L,U,G,z,V,K;let{photo:M,setPhoto:Y,onSubmit:H,defaultValues:Q}=e;const[J,Z]=(0,a.useState)(!1),[W,X]=(0,a.useState)(""),[ee,te]=(0,a.useState)(""),se=(0,c.I)({queryKey:["countries"],queryFn:j.X6,enabled:!0}),ae=(0,c.I)({queryKey:["states",W],queryFn:()=>(0,j.nP)(W),enabled:!!W,retry:1}),le=(0,c.I)({queryKey:["cities",ee],queryFn:()=>(0,j.i6)(ee),enabled:!!ee}),ne=(0,c.I)({queryKey:["categories"],queryFn:j.Ql}),{control:re,register:ie,handleSubmit:oe,formState:{errors:de},setValue:ce}=(0,i.mN)({resolver:(0,d.t)(A),defaultValues:Q});return(0,a.useEffect)((()=>{var e,t,s,a;null!==Q&&void 0!==Q&&null!==(e=Q.address)&&void 0!==e&&e.country&&X(null===Q||void 0===Q||null===(t=Q.address)||void 0===t?void 0:t.country),null!==Q&&void 0!==Q&&null!==(s=Q.address)&&void 0!==s&&s.state&&te(null===Q||void 0===Q||null===(a=Q.address)||void 0===a?void 0:a.state)}),[null===Q||void 0===Q?void 0:Q.address]),(0,a.useEffect)((()=>{var e;if(null!==ne&&void 0!==ne&&null!==(e=ne.data)&&void 0!==e&&e.length&&!Q.category){var t;let e=null===(t=ne.data)||void 0===t?void 0:t.find((e=>"regular"===e.name.toLowerCase()));e.name&&ce("category",e.id)}}),[null===ne||void 0===ne?void 0:ne.data,Q,ce]),(0,w.jsxs)("form",{ref:t,onSubmit:oe(H),children:[(0,w.jsxs)(l.A,{className:(0,u.A)(f.A.bgGreay,"pt-0"),children:[(0,w.jsxs)(n.A,{sm:12,children:[(0,w.jsxs)("div",{className:(0,u.A)(f.A.fileUploadBox,"cursor-pointer"),onClick:()=>Z(!0),children:[(0,w.jsx)("div",{className:(0,u.A)(f.A.uploadedImgBox),children:M?(0,w.jsx)("img",{src:(null===M||void 0===M?void 0:M.croppedImageBase64)||M,alt:"profile-img"}):(0,w.jsx)(r.A,{size:32,color:"#667085"})}),(0,w.jsx)("p",{className:(0,u.A)("mb-0",f.A.uploadedText1),children:(0,w.jsx)("span",{className:(0,u.A)("mb-0",f.A.uploadedText2),children:"Click to upload"})}),(0,w.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]}),(0,w.jsx)(b.A,{show:J,setShow:Z,setPhoto:Y,shape:"round"})]}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsxs)("label",{className:(0,u.A)(f.A.lable),children:["First Name",(0,w.jsx)("span",{className:"required",children:"*"})]}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{children:de.firstname&&(0,w.jsx)("img",{src:y.A,className:"mb-3"})}),(0,w.jsx)(x.S,{...ie("firstname"),className:(0,u.A)(f.A.inputText,{[f.A.error]:de.firstname}),placeholder:"Enter first name"})]}),de.firstname&&(0,w.jsx)("p",{className:"error-message",children:de.firstname.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsxs)("label",{className:(0,u.A)(f.A.lable),children:["Last Name",(0,w.jsx)("span",{className:"required",children:"*"})]}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{children:de.lastname&&(0,w.jsx)("img",{src:y.A,className:"mb-3"})}),(0,w.jsx)(x.S,{...ie("lastname"),className:(0,u.A)(f.A.inputText,{[f.A.error]:de.lastname}),placeholder:"Enter last name"})]}),de.lastname&&(0,w.jsx)("p",{className:"error-message",children:de.lastname.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Email"}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{children:de.email&&(0,w.jsx)("img",{src:y.A,className:"mb-3"})}),(0,w.jsx)(x.S,{...ie("email"),className:(0,u.A)(f.A.inputText,{[f.A.error]:de.email}),placeholder:"example@email.com"})]}),de.email&&(0,w.jsx)("p",{className:"error-message",children:de.email.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Phone number"}),(0,w.jsx)(i.xI,{name:"phone",control:re,render:e=>{let{field:t}=e;return(0,w.jsx)(o.LR,{defaultCountry:"au",value:t.value,className:"phoneInput rounded",containerClass:f.A.countrySelector,onChange:t.onChange,style:{border:"1px solid "+(de.phone?"red":"#dedede")}})}}),de.phone&&(0,w.jsx)("p",{className:"error-message",children:de.phone.message})]})})]}),(0,w.jsx)("h2",{className:(0,u.A)(f.A.headingInputs,"mt-4"),children:"Payment Terms"}),(0,w.jsxs)(l.A,{className:(0,u.A)(f.A.bgGreay),children:[(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsxs)("label",{className:(0,u.A)(f.A.lable),children:["Payment Terms",(0,w.jsx)("span",{className:"required",children:"*"})]}),(0,w.jsx)(i.xI,{name:"payment_terms",control:re,render:e=>{let{field:t}=e;return(0,w.jsx)(m.m,{...t,options:[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}]||0,onChange:e=>{t.onChange(e.value)},className:(0,u.A)(f.A.dropdownSelect,"dropdown-height-fixed",{[f.A.error]:de.payment_terms}),style:{height:"46px"},value:t.value,placeholder:"Select payment terms",scrollHeight:"380px",filterInputAutoFocus:!0})}}),de.payment_terms&&(0,w.jsx)("p",{className:"error-message",children:de.payment_terms.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsxs)("label",{className:(0,u.A)(f.A.lable),children:["Customers Discount Category",(0,w.jsx)("span",{className:"required",children:"*"})]}),(0,w.jsx)(i.xI,{name:"category",control:re,render:e=>{var t;let{field:s}=e;return(0,w.jsx)(m.m,{...s,options:[...ne&&(null===(t=ne.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:`${e.name} - ${e.value}%`}))))||[]],onChange:e=>{s.onChange(e.value)},className:(0,u.A)(f.A.dropdownSelect,"dropdown-height-fixed",{[f.A.error]:de.category}),style:{height:"46px"},value:s.value,loading:null===ne||void 0===ne?void 0:ne.isFetching,placeholder:"Select a category",scrollHeight:"380px",filterInputAutoFocus:!0})}}),de.category&&(0,w.jsx)("p",{className:"error-message",children:de.category.message})]})})]}),(0,w.jsx)("h2",{className:(0,u.A)(f.A.headingInputs),children:"Locations"}),(0,w.jsxs)(l.A,{className:(0,u.A)(f.A.bgGreay),children:[(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Location Name"}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{children:(null===(s=de.address)||void 0===s?void 0:s.title)&&(0,w.jsx)("img",{src:y.A,className:"mb-3"})}),(0,w.jsx)(x.S,{...ie("address.title"),className:(0,u.A)(f.A.inputText,{[f.A.error]:null===(g=de.address)||void 0===g?void 0:g.title}),placeholder:"Enter location name"})]}),(null===(N=de.address)||void 0===N?void 0:N.title)&&(0,w.jsx)("p",{className:"error-message",children:null===(_=de.address)||void 0===_||null===(S=_.title)||void 0===S?void 0:S.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Country"}),(0,w.jsx)(i.xI,{name:"address.country",control:re,defaultValue:"",render:e=>{var t;let{field:s}=e;return(0,w.jsx)(m.m,{...s,options:se&&(null===(t=se.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{s.onChange(e.value),X(e.value)},className:(0,u.A)(f.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:s.value,loading:null===se||void 0===se?void 0:se.isFetching,placeholder:"Select a country",scrollHeight:"380px",filterInputAutoFocus:!0})}}),(null===(I=de.address)||void 0===I?void 0:I.country)&&(0,w.jsx)("p",{className:"error-message",children:null===(P=de.address)||void 0===P||null===(C=P.country)||void 0===C?void 0:C.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"State"}),(0,w.jsx)(i.xI,{name:"address.state",control:re,defaultValue:"",render:e=>{var t;let{field:s}=e;return(0,w.jsx)(m.m,{...s,options:ae&&(null===(t=ae.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{s.onChange(e.value),te(e.value)},className:(0,u.A)(f.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:s.value,loading:null===ae||void 0===ae?void 0:ae.isFetching,placeholder:"Select a state",scrollHeight:"380px",filter:!0,filterInputAutoFocus:!0})}}),(null===(E=de.address)||void 0===E?void 0:E.state)&&(0,w.jsx)("p",{className:"error-message",children:null===(B=de.address)||void 0===B||null===(T=B.state)||void 0===T?void 0:T.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"City/Suburb"}),(0,w.jsx)(i.xI,{name:"address.city",control:re,defaultValue:"",render:e=>{var t;let{field:s}=e;return(0,w.jsx)(m.m,{...s,options:le&&(null===(t=le.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{s.onChange(e.value)},className:(0,u.A)(f.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:s.value,loading:null===le||void 0===le?void 0:le.isFetching,disabled:null===le||void 0===le?void 0:le.isFetching,placeholder:"Select a city",emptyMessage:ee?"No cities found":"Select a state first",scrollHeight:"380px",filter:!0,filterInputAutoFocus:!0})}}),(null===(O=de.address)||void 0===O?void 0:O.city)&&(0,w.jsx)("p",{className:"error-message",children:null===($=de.address)||void 0===$||null===(F=$.city)||void 0===F?void 0:F.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Street Address"}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{children:(null===(k=de.address)||void 0===k?void 0:k.address)&&(0,w.jsx)("img",{src:y.A,className:"mb-3"})}),(0,w.jsx)(x.S,{...ie("address.address"),className:(0,u.A)(f.A.inputText,{[f.A.error]:null===(D=de.address)||void 0===D?void 0:D.address}),placeholder:"Enter street address"})]}),(null===(R=de.address)||void 0===R?void 0:R.address)&&(0,w.jsx)("p",{className:"error-message",children:null===(q=de.address)||void 0===q||null===(L=q.address)||void 0===L?void 0:L.message})]})}),(0,w.jsx)(n.A,{sm:6,children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Postcode"}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{children:(null===(U=de.address)||void 0===U?void 0:U.postcode)&&(0,w.jsx)("img",{src:y.A,className:"mb-3"})}),(0,w.jsx)(x.S,{...ie("address.postcode"),keyfilter:"int",className:(0,u.A)(f.A.inputText,{[f.A.error]:null===(G=de.address)||void 0===G?void 0:G.postcode}),placeholder:"Enter postcode"})]}),(null===(z=de.address)||void 0===z?void 0:z.postcode)&&(0,w.jsx)("p",{className:"error-message",children:null===(V=de.address)||void 0===V||null===(K=V.postcode)||void 0===K?void 0:K.message})]})})]}),(0,w.jsx)("h2",{className:(0,u.A)(f.A.headingInputs),children:"Client Description"}),(0,w.jsx)(l.A,{className:(0,u.A)(f.A.bgGreay),children:(0,w.jsx)(n.A,{children:(0,w.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,w.jsx)("label",{className:(0,u.A)(f.A.lable),children:"Description"}),(0,w.jsxs)(p.C,{children:[(0,w.jsx)(h.m,{style:{top:"80%"},children:de.description&&(0,w.jsx)("img",{src:y.A})}),(0,w.jsx)(v.Z,{...ie("description"),rows:5,cols:30,className:(0,u.A)(f.A.inputText,{[f.A.error]:de.description}),style:{resize:"none"},placeholder:"Enter a description..."})]}),de.description&&(0,w.jsx)("p",{className:"error-message",children:de.description.message})]})})})]})}))},20685:(e,t,s)=>{s.d(t,{A:()=>a});const a={circledesignstyle:"new-client-create_circledesignstyle__sG0j7",out:"new-client-create_out__UsInp",tab:"new-client-create_tab__IdlaT",iconBox:"new-client-create_iconBox__AupEc",tabText:"new-client-create_tabText__RSTYW",active:"new-client-create_active__2eoaJ",bgGreay:"new-client-create_bgGreay__y1jMx",fileUploadBox:"new-client-create_fileUploadBox__n9KJX",uploadedImgBox:"new-client-create_uploadedImgBox__rHsYh",uploadedText1:"new-client-create_uploadedText1__9ZZMJ",uploadedText2:"new-client-create_uploadedText2__PeAVp",lable:"new-client-create_lable__mDL9D",inputText:"new-client-create_inputText__Y-va7",error:"new-client-create_error__YI1Tz",phoneInput:"new-client-create_phoneInput__oIg7A",countrySelector:"new-client-create_countrySelector__fLpJG",headingInputs:"new-client-create_headingInputs__X8li4",dropdownSelect:"new-client-create_dropdownSelect__CZFIr",tempDelete:"new-client-create_tempDelete__q+CA0",tempAdd:"new-client-create_tempAdd__PhaaR"}},31342:(e,t,s)=>{s.d(t,{f:()=>a});const a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{method:a="GET",headers:l={},body:n}=t,r=localStorage.getItem("access_token"),i=n instanceof FormData,o={"Content-Type":i?"multipart/form-data":"application/json",...l};s&&(o.Authorization=`Bearer ${r}`);const d={method:a,headers:o,body:i?n:JSON.stringify(n),redirect:"follow"};try{const t=new URL(e),s=await fetch(t,d),a=s.headers.get("Content-Type");if(!s.ok){var c;let e=null;e=a&&a.includes("application/json")?await s.json():await s.text(),401===s.status&&(localStorage.clear(),sessionStorage.clear(),window.location.replace("/login"));const t=new Error((null===(c=e)||void 0===c?void 0:c.message)||`HTTP error! Status: ${s.status}`);throw t.status=s.status,t.data=e,t}if(a&&a.includes("application/json"))return await s.json();return{message:"Non-JSON response",body:await s.text()}}catch(u){throw console.error("Fetch API error:",u),u}}},59638:(e,t,s)=>{s.d(t,{EZ:()=>r,F1:()=>f,Fl:()=>m,OF:()=>o,QK:()=>x,Ql:()=>i,X6:()=>d,Ye:()=>v,ab:()=>j,i6:()=>u,kB:()=>y,nP:()=>c,o6:()=>h,oO:()=>n,oo:()=>p,zZ:()=>g});var a=s(31342);const l="https://app.memate.com.au/api/v1",n=async e=>{const t=new URL(`${l}${`/clients/restore/${e}/`}`);return(0,a.f)(t.toString(),{method:"POST"})},r=async e=>{const t=new URL(`${l}${`/clients/${e}/`}`);return(0,a.f)(t.toString(),{method:"GET"})},i=async()=>{const e=new URL(`${l}/references/clients/categories/`);return(0,a.f)(e.toString(),{method:"GET"})},o=async()=>{const e=new URL(`${l}/references/clients/industries/`);return(0,a.f)(e.toString(),{method:"GET"})},d=async()=>{const e=new URL(`${l}/references/countries/`),t=await(0,a.f)(e.toString(),{method:"GET"},!1),s=[1];return(null===t||void 0===t?void 0:t.filter((e=>s.includes(e.id))))||[]},c=async e=>{const t=new URL(`${l}${`/references/states/${e}/`}`);return(0,a.f)(t.toString(),{method:"GET"},!1)},u=async e=>{const t=new URL(`${l}${`/references/cities/${e}/`}`);return(0,a.f)(t.toString(),{method:"GET"},!1)},m=async()=>{const e=new URL(`${l}/references/desktop-users/`);return(0,a.f)(e.toString(),{method:"GET"})},p=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0;const i=(e-1)*t,o=new URL(`${l}/clients/`);return o.searchParams.append("limit",t),o.searchParams.append("offset",i),s&&o.searchParams.append("search",s),n&&o.searchParams.append("ordering",n),r&&o.searchParams.append("deleted",1),(0,a.f)(o.toString(),{method:"GET"})},h=async function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const i=(t-1)*s,o=new URL(`${l}${`/clients/${e}/orders/`}`);return o.searchParams.append("limit",s),o.searchParams.append("offset",i),n&&o.searchParams.append("number",n),r&&o.searchParams.append("ordering",r),(0,a.f)(o.toString(),{method:"GET"})},x=async e=>{const t=new URL(`${l}${`/clients/address/${e}/main`}`);return(0,a.f)(t.toString(),{method:"PUT"})},v=async e=>{const t=new URL(`${l}${`/clients/contact-persons/${e}/main`}`);return(0,a.f)(t.toString(),{method:"PUT"})},g=async e=>{const t=new URL(`${l}${`/clients/delete/${e}/`}`);return(0,a.f)(t.toString(),{method:"DELETE"})},f=async e=>{const t=new URL(`${l}${`/clients/contact-persons/${e}/delete/`}`);return(0,a.f)(t.toString(),{method:"DELETE"})},j=async e=>{const t=new URL(`${l}${`/clients/address/${e}/delete/`}`);return(0,a.f)(t.toString(),{method:"DELETE"})},y=async e=>{const t={method:"PUT",body:{unique_id:e}},s=new URL(`${l}/projects/back/`);return(0,a.f)(s.toString(),t)}},63882:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(65043),l=s(32952),n=s(14282),r=s(76163),i=s(69956),o=s(89488),d=s(55683),c=s(58387),u=s(29853);const m={title:"file-uploader_title__+HTTy",previewSection:"file-uploader_previewSection__mnNRf",previewBox:"file-uploader_previewBox__j6psm",previewBoxImg1:"file-uploader_previewBoxImg1__SR-1w",rectangle:"file-uploader_rectangle__dFhi8",previewBoxImg2:"file-uploader_previewBoxImg2__zYCKK",previewBoxImg3:"file-uploader_previewBoxImg3__YNTWI",previewBoxImg4:"file-uploader_previewBoxImg4__cRl+e",previewBoxImg5:"file-uploader_previewBoxImg5__GzHFj",previewActions:"file-uploader_previewActions__UO1dp",label:"file-uploader_label__Udhfq",label2:"file-uploader_label2__cY-JF"};var p=s(70579);const h=e=>{let{show:t,setShow:s,setPhoto:h,additionalDesign:x,shape:v="rect",aspect:g=1}=e;const[f,j]=(0,a.useState)([]),[y,b]=(0,a.useState)({x:0,y:0}),[w,A]=(0,a.useState)(1),[N,_]=(0,a.useState)(0),[S,I]=(0,a.useState)(null),[P,C]=(0,a.useState)({}),E=(0,a.useCallback)(((e,t)=>{I(t)}),[]),B=(0,a.useCallback)((async()=>{if(!f.length||!S)return;const e=document.createElement("canvas"),t=e.getContext("2d"),s=new Image;s.src=f[0].preview,await new Promise((e=>s.onload=e)),e.width=S.width,e.height=S.height,t.translate(e.width/2,e.height/2),t.rotate(N*Math.PI/180),t.translate(-e.width/2,-e.height/2),t.drawImage(s,S.x,S.y,S.width,S.height,0,0,S.width,S.height);return e.toDataURL("image/jpeg")}),[f,S,N]),T=async()=>{const e=await B();e&&C({img2:e,img3:e,img4:e,img5:e})};(0,a.useEffect)((()=>{T()}),[w,y,N,f,S]);const{getRootProps:O,getInputProps:$}=(0,o.VB)({maxFiles:1,accept:{"image/*":[]},onDrop:e=>{j(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});return(0,p.jsxs)(l.A,{style:{zIndex:1111},show:t,centered:!0,onHide:()=>s(!1),onShow:T,children:[(0,p.jsx)(l.A.Header,{closeButton:!0,children:(0,p.jsx)(l.A.Title,{children:(0,p.jsx)("span",{className:`${m.title}`,children:"Edit Photo"})})}),(0,p.jsxs)(l.A.Body,{children:[x,(0,p.jsxs)("div",{className:`${m.previewSection}`,children:[(0,p.jsxs)("div",{className:`${m.previewBox}`,children:[(0,p.jsx)("div",{className:(0,c.A)(m.previewBoxImg1,"round"===v?"rounded-circle":"",1===g?m.square:m.rectangle),children:(0,p.jsx)(d.Ay,{image:f.length>0?f[0].preview:null,crop:y,zoom:w,cropShape:v,rotation:N,onCropChange:b,onZoomChange:A,onCropComplete:E,aspect:g,restrictPosition:!1,style:{containerStyle:{width:"100%",height:"100%",position:"relative"},cropAreaStyle:{width:"100%",height:"100%"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}})}),(0,p.jsx)("div",{className:(0,c.A)(m.previewBoxImg2,"round"===v?"rounded-circle":"",1===g?m.square:m.rectangle),children:P.img2&&(0,p.jsx)("img",{src:P.img2,alt:"Preview 2",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,p.jsx)("div",{className:(0,c.A)(m.previewBoxImg3,"round"===v?"rounded-circle":"",1===g?m.square:m.rectangle),children:P.img3&&(0,p.jsx)("img",{src:P.img3,alt:"Preview 3",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,p.jsx)("div",{className:(0,c.A)(m.previewBoxImg4,"round"===v?"rounded-circle":"",1===g?m.square:m.rectangle),children:P.img4&&(0,p.jsx)("img",{src:P.img4,alt:"Preview 4",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,p.jsx)("div",{className:(0,c.A)(m.previewBoxImg5,"round"===v?"rounded-circle":"",1===g?m.square:m.rectangle),children:P.img5&&(0,p.jsx)("img",{src:P.img5,alt:"Preview 5",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),(0,p.jsxs)("div",{className:`${m.previewActions}`,children:[(0,p.jsxs)(u.A.Group,{children:[(0,p.jsx)(u.A.Label,{className:`${m.label}`,children:"Zoom"}),(0,p.jsx)(u.A.Range,{value:w,min:1,max:3,step:.1,className:"custom-range",onChange:e=>A(e.target.value)})]}),(0,p.jsx)("div",{className:"d-flex align-item-center pt-4 ms-4",style:{gap:"8px"},children:(0,p.jsxs)(n.A,{className:"text-button",onClick:()=>{_((e=>(e+90)%360))},children:[(0,p.jsx)(r.A,{color:"#106B99",size:24}),"Rotate"]})})]})]}),(0,p.jsxs)("div",{...O({className:"dropzone d-flex justify-content-center align-items-center flex-column cursor-pointer"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,p.jsx)("input",{...$()}),(0,p.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,p.jsx)(i.A,{})}),(0,p.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,p.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,p.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})]}),(0,p.jsxs)(l.A.Footer,{className:"d-flex justify-content-end",children:[(0,p.jsx)(n.A,{className:"outline-button",onClick:e=>{e.stopPropagation(),j([]),C({}),h(null),s(!1)},children:"Cancel"}),(0,p.jsx)(n.A,{className:"solid-button",onClick:async()=>{const e=await B(),t=function(e,t){const s=atob(e.split(",")[1]),a=new ArrayBuffer(s.length),l=new Uint8Array(a);for(let n=0;n<s.length;n++)l[n]=s.charCodeAt(n);return new Blob([a],{type:t})}(e,"image/jpeg");h({croppedImageBase64:e,croppedImageBlob:t}),s(!1)},children:"Save Photo"})]})]})}},64416:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(65043),l=s(65173),n=s.n(l),r=["color","size","title","className"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i.apply(null,arguments)}var o=(0,a.forwardRef)((function(e,t){var s=e.color,l=void 0===s?"currentColor":s,n=e.size,o=void 0===n?"1em":n,d=e.title,c=void 0===d?null:d,u=e.className,m=void 0===u?"":u,p=function(e,t){if(null==e)return{};var s,a,l=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)s=n[a],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,r);return a.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:o,height:o,fill:l,className:["bi","bi-card-list",m].filter(Boolean).join(" ")},p),c?a.createElement("title",null,c):null,a.createElement("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"}),a.createElement("path",{d:"M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8m0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"}))}));o.propTypes={color:n().string,size:n().oneOfType([n().string,n().number]),title:n().string,className:n().string};const d=o},72052:(e,t,s)=>{s.d(t,{S:()=>f});var a=s(65043),l=s(84052),n=s(41828),r=s(2028),i=s(2224),o=s(1356),d=s(4504);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c.apply(null,arguments)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function m(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function p(e,t,s){return(t=m(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var h={root:function(e){var t=e.props,s=e.isFilled,a=e.context;return(0,d.xW)("p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":s,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:a&&"filled"===a.inputStyle})}},x=n.x.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,children:void 0,className:null,invalid:!1,variant:null,keyfilter:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,iconPosition:null},css:{classes:h}});function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f=a.memo(a.forwardRef((function(e,t){var s=(0,r.qV)(),u=a.useContext(l.UM),m=x.getProps(e,u),p=x.setMetaData(g(g({props:m},m.__parentMetadata),{},{context:{disabled:m.disabled,iconPosition:m.iconPosition}})),h=p.ptm,v=p.cx,f=p.isUnstyled;(0,n.j)(x.css.styles,f,{name:"inputtext",styled:!0});var j=a.useRef(t);a.useEffect((function(){d.BF.combinedRefs(j,t)}),[j,t]);var y=a.useMemo((function(){return d.BF.isNotEmpty(m.value)||d.BF.isNotEmpty(m.defaultValue)}),[m.value,m.defaultValue]),b=d.BF.isNotEmpty(m.tooltip);a.useEffect((function(){var e;y||null!==(e=j.current)&&void 0!==e&&e.value?d.DV.addClass(j.current,"p-filled"):d.DV.removeClass(j.current,"p-filled")}),[m.disabled,y]);var w=s({className:(0,d.xW)(m.className,v("root",{context:u,isFilled:y})),onBeforeInput:function(e){m.onBeforeInput&&m.onBeforeInput(e),m.keyfilter&&i.Q.onBeforeInput(e,m.keyfilter,m.validateOnly)},onInput:function(e){var t=e.target,s=!0;m.keyfilter&&m.validateOnly&&(s=i.Q.validate(e,m.keyfilter)),m.onInput&&m.onInput(e,s),d.BF.isNotEmpty(t.value)?d.DV.addClass(t,"p-filled"):d.DV.removeClass(t,"p-filled")},onKeyDown:function(e){m.onKeyDown&&m.onKeyDown(e),m.keyfilter&&i.Q.onKeyPress(e,m.keyfilter,m.validateOnly)},onPaste:function(e){m.onPaste&&m.onPaste(e),m.keyfilter&&i.Q.onPaste(e,m.keyfilter,m.validateOnly)}},x.getOtherProps(m),h("root"));return a.createElement(a.Fragment,null,a.createElement("input",c({ref:j},w)),b&&a.createElement(o.m,c({target:j,content:m.tooltip,pt:h("tooltip")},m.tooltipOptions)))})));f.displayName="InputText"},76199:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(65043),l=s(61072),n=s(38294),r=s(95192),i=s(36237),o=s(64416),d=s(73216),c=s(35475),u=s(64018),m=s(63712),p=s(56328),h=s(17344),x=s(70579);const v=()=>{const{id:e}=(0,d.g)(),t=(0,d.Zp)(),s=(0,a.useRef)(null),[v,g]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),[y]=(0,a.useState)({payment_terms:1,category:"",address:{country:1}});return(0,x.jsx)("div",{className:"newQuotePage existingClients borderSkyColor",children:(0,x.jsxs)("div",{style:{height:"calc(100vh - 249px)"},children:[(0,x.jsx)("div",{className:"newQuoteBack",children:(0,x.jsx)(c.k2,{to:e?"/sales/newquote/selectyourclient/existing-clients":"/sales/newquote/selectyourclient/new-clients",children:(0,x.jsxs)("button",{children:[(0,x.jsx)(n.A,{color:"#000000",size:20})," \xa0\xa0Go Back"]})})}),(0,x.jsxs)("div",{className:"newQuoteContent h-100",children:[(0,x.jsx)("div",{className:"navStepClient",children:(0,x.jsxs)("ul",{children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("span",{children:(0,x.jsx)(r.A,{color:"#D0D5DD",size:15})})," ",(0,x.jsx)("p",{children:"Choose Client"})]}),(0,x.jsxs)("li",{className:"activeClientTab",children:[(0,x.jsx)("span",{children:(0,x.jsx)(i.A,{color:"#D0D5DD",size:15})})," ",(0,x.jsx)("p",{children:"Client Information"})," "]}),(0,x.jsxs)("li",{className:"deactiveColorBox",children:[(0,x.jsx)("span",{children:(0,x.jsx)(o.A,{color:"#D0D5DD",size:15})})," ",(0,x.jsx)("p",{children:"Scope of Work"})," "]})]})}),(0,x.jsxs)("div",{className:"individual height customscrollBar",children:[(0,x.jsx)("div",{className:"formgroupWrap1",children:(0,x.jsx)("ul",{className:"mt-4",children:(0,x.jsx)("li",{children:(0,x.jsxs)(c.k2,{className:"ActiveClient businessTab",to:"#",children:[(0,x.jsx)("span",{children:(0,x.jsx)(r.A,{color:"#667085",size:24})})," Individual Client"]})})})}),(0,x.jsx)("div",{className:"formgroupboxs",style:{padding:"24px 10px 0px 10px"},children:(0,x.jsx)(l.A,{className:"text-left pt-3 rounded px-2",style:{background:"#fff"},children:(0,x.jsx)(h.A,{photo:v,setPhoto:g,ref:s,onSubmit:async e=>{const s=new FormData;s.append("firstname",e.firstname),s.append("lastname",e.lastname),e.email&&s.append("email",e.email);const a=(null===e||void 0===e?void 0:e.phone)&&(0,u.l)(e.phone);if(null!==a&&void 0!==a&&a.nationalNumber&&s.append("phone",e.phone),"0"!=e.category&&s.append("category",e.category),e.payment_terms&&s.append("payment_terms",e.payment_terms),e.description&&s.append("description",e.description),e.address.city&&(s.append("address.country",e.address.country),s.append("address.title",e.address.title),s.append("address.city",e.address.city),s.append("address.address",e.address.address),s.append("address.state",e.address.state),s.append("address.postcode",e.address.postcode),e.address.id&&s.append("address.id",e.address.id)),null!==v&&void 0!==v&&v.croppedImageBlob){const e=(0,m.Ak)(6);s.append("photo",v.croppedImageBlob,`${e}.jpg`)}try{j(!0);const e=localStorage.getItem("access_token"),a=await fetch("https://app.memate.com.au/api/v1/clients/individual/new/",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:s});if(a.ok){p.oR.success("New client created successfully");const e=await a.json();t(`/sales/newquote/selectyourclient/client-information/scope-of-work/${null===e||void 0===e?void 0:e.client}`)}else{const e=await a.json();p.oR.error(e||"Failed to create new client. Please try again.")}}catch(l){console.log("Error in creating new business client: ",l),p.oR.error("Failed to create new client. Please try again.")}finally{j(!1)}},defaultValues:y})})})]}),(0,x.jsxs)("div",{className:"individual bottomBox",children:[(0,x.jsx)(c.N_,{to:"/sales",children:(0,x.jsx)("button",{type:"button",className:"cancel-button",children:"Cancel"})}),(0,x.jsx)("button",{type:"button",disabled:f,onClick:()=>{s.current&&s.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},className:"submit-button",children:f?"Loading...":"Next Step"})]})]})]})})}}}]);
//# sourceMappingURL=6199.9270145b.chunk.js.map