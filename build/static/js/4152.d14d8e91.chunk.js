"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[4152],{54972:(e,t,n)=>{n.d(t,{S:()=>x});var r=n(65043),o=n(84052),i=n(41828),l=n(2028),a=n(52897),s=n(1356),c=n(4504);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function f(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y={box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon",root:function(e){var t=e.props,n=e.checked,r=e.context;return(0,c.xW)("p-checkbox p-component",{"p-highlight":n,"p-disabled":t.disabled,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:r&&"filled"===r.inputStyle})}},b=i.x.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,invalid:!1,variant:null,name:null,onChange:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0},css:{classes:y}});function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=r.memo(r.forwardRef((function(e,t){var n=(0,l.qV)(),p=r.useContext(o.UM),d=b.getProps(e,p),f=v(r.useState(!1),2),m=f[0],y=f[1],h=b.setMetaData({props:d,state:{focused:m},context:{checked:d.checked===d.trueValue,disabled:d.disabled}}),x=h.ptm,j=h.cx,O=h.isUnstyled;(0,i.j)(b.css.styles,O,{name:"checkbox"});var w=r.useRef(null),P=r.useRef(d.inputRef),k=function(){return d.checked===d.trueValue};r.useImperativeHandle(t,(function(){return{props:d,focus:function(){return c.DV.focus(P.current)},getElement:function(){return w.current},getInput:function(){return P.current}}})),r.useEffect((function(){c.BF.combinedRefs(P,d.inputRef)}),[P,d.inputRef]),(0,l.w5)((function(){P.current.checked=k()}),[d.checked,d.trueValue]),(0,l.uU)((function(){d.autoFocus&&c.DV.focus(P.current,d.autoFocus)}));var S=k(),D=c.BF.isNotEmpty(d.tooltip),N=b.getOtherProps(d),E=n({id:d.id,className:(0,c.xW)(d.className,j("root",{checked:S,context:p})),style:d.style,"data-p-highlight":S,"data-p-disabled":d.disabled,onContextMenu:d.onContextMenu,onMouseDown:d.onMouseDown},N,x("root"));return r.createElement(r.Fragment,null,r.createElement("div",u({ref:w},E),function(){var e=c.BF.reduceKeys(N,c.DV.ARIA_PROPS),t=n(g({id:d.inputId,type:"checkbox",className:j("input"),name:d.name,tabIndex:d.tabIndex,onFocus:function(e){return function(e){var t;y(!0),null===d||void 0===d||null===(t=d.onFocus)||void 0===t||t.call(d,e)}(e)},onBlur:function(e){return function(e){var t;y(!1),null===d||void 0===d||null===(t=d.onBlur)||void 0===t||t.call(d,e)}(e)},onChange:function(e){return function(e){if(!d.disabled&&!d.readonly&&d.onChange){var t,n=k()?d.falseValue:d.trueValue,r={originalEvent:e,value:d.value,checked:n,stopPropagation:function(){null===e||void 0===e||e.stopPropagation()},preventDefault:function(){null===e||void 0===e||e.preventDefault()},target:{type:"checkbox",name:d.name,id:d.id,value:d.value,checked:n}};if(null===d||void 0===d||null===(t=d.onChange)||void 0===t||t.call(d,r),e.defaultPrevented)return;c.DV.focus(P.current)}}(e)},disabled:d.disabled,readOnly:d.readOnly,required:d.required,"aria-invalid":d.invalid,checked:S},e),x("input"));return r.createElement("input",u({ref:P},t))}(),function(){var e=n({className:j("icon")},x("icon")),t=n({className:j("box",{checked:S}),"data-p-highlight":S,"data-p-disabled":d.disabled},x("box")),o=S?d.icon||r.createElement(a.S,e):null,i=c.Hj.getJSXIcon(o,g({},e),{props:d,checked:S});return r.createElement("div",t,i)}()),D&&r.createElement(s.m,u({target:w,content:d.tooltip,pt:x("tooltip")},d.tooltipOptions)))})));x.displayName="Checkbox"},70016:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(65043),o=n(61072),i=n(14282),l=n(38294),a=n(95192),s=n(36237),c=n(44541),u=n(73216),p=n(35475),d=n(64018),f=n(63712),m=n(56328),v=n(33074),y=n(70579);const b=()=>{const{id:e}=(0,u.g)(),t=(0,u.Zp)(),n=(0,r.useRef)(null),[b,h]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),j=(()=>{try{const e=sessionStorage.getItem("enquiry-to-sale");if(e)return JSON.parse(e)}catch(e){console.error("Failed to parse enquiry data from sessionStorage",e)}return null})(),[O]=(0,r.useState)((()=>{const e={payment_terms:1,category:"",phone:{country:"",number:""},contact_persons:[{}],addresses:[{title:"Main Location",country:1}]};if(j){var t,n;const r=j.name||"",o=r.trim().split(" "),i=o[0]||"",l=o.slice(1).join(" ")||"";return{...e,name:(null===(t=j.formData)||void 0===t?void 0:t.company_name)||(null===(n=j.formData)||void 0===n?void 0:n.business_name)||r,email:j.email||"",phone:j.phone||"",contact_persons:[{firstname:i,lastname:l,email:j.email||"",phone:j.phone||"",is_main:!0}]}}return e}));(0,r.useEffect)((()=>()=>{}),[]);return(0,y.jsx)("div",{className:"newQuotePage existingClients borderSkyColor",children:(0,y.jsxs)("div",{style:{height:"calc(100vh - 249px)"},children:[(0,y.jsx)("div",{className:"newQuoteBack",children:(0,y.jsx)(p.k2,{to:e?"/sales/newquote/selectyourclient/existing-clients":"/sales/newquote/selectyourclient/new-clients",children:(0,y.jsxs)("button",{children:[(0,y.jsx)(l.A,{color:"#000000",size:20})," \xa0\xa0Go Back"]})})}),(0,y.jsxs)("div",{className:"newQuoteContent h-100",children:[(0,y.jsx)("div",{className:"navStepClient",children:(0,y.jsxs)("ul",{children:[(0,y.jsxs)("li",{children:[(0,y.jsx)("span",{children:(0,y.jsx)(a.A,{color:"#D0D5DD",size:15})})," ",(0,y.jsx)("p",{children:"Choose Client"})]}),(0,y.jsxs)("li",{className:"activeClientTab",children:[(0,y.jsx)("span",{children:(0,y.jsx)(s.A,{color:"#D0D5DD",size:15})})," ",(0,y.jsx)("p",{children:"Client Information"})," "]}),(0,y.jsxs)("li",{className:"deactiveColorBox",children:[(0,y.jsx)("span",{children:(0,y.jsx)(c.A,{color:"#D0D5DD",size:15})})," ",(0,y.jsx)("p",{children:"Scope of Work"})," "]})]})}),(0,y.jsxs)("div",{className:"individual height customscrollBar",children:[(0,y.jsx)("div",{className:"formgroupWrap1",children:(0,y.jsx)("ul",{className:"mt-4",children:(0,y.jsx)("li",{children:(0,y.jsxs)(p.k2,{className:"ActiveClient businessTab",to:"#",children:[(0,y.jsx)("span",{children:(0,y.jsx)(c.A,{color:"#1AB2FF ",size:24})})," Business Client"]})})})}),(0,y.jsx)("div",{className:"formgroupboxs businessFormInQuote",style:{padding:"24px 10px 0px 10px"},children:(0,y.jsxs)(o.A,{className:"text-left pt-3 rounded px-2",style:{background:"#fff"},children:[(0,y.jsx)("h2",{style:{marginBottom:"16px"},children:"Company Details"}),(0,y.jsx)(v.A,{photo:b,setPhoto:h,ref:n,onSubmit:async e=>{const n=new FormData;n.append("name",e.name),e.abn&&n.append("abn",e.abn);const r=(null===e||void 0===e?void 0:e.phone)&&(0,d.l)(e.phone);if(null!==r&&void 0!==r&&r.nationalNumber&&n.append("phone",e.phone),e.email&&n.append("email",e.email),e.website&&n.append("website",e.website),e.payment_terms&&n.append("payment_terms",e.payment_terms),"0"!=e.category&&n.append("category",e.category),e.industry&&n.append("industry",e.industry),e.description&&n.append("description",e.description),e.addresses.forEach(((e,t)=>{e.city&&(n.append(`addresses[${t}]address`,e.address),n.append(`addresses[${t}]city`,e.city),n.append(`addresses[${t}]postcode`,e.postcode),n.append(`addresses[${t}]is_main`,e.is_main),n.append(`addresses[${t}]title`,e.title))})),e.contact_persons.forEach(((e,t)=>{if(e.firstname||e.email){n.append(`contact_persons[${t}]firstname`,e.firstname),n.append(`contact_persons[${t}]lastname`,e.lastname),n.append(`contact_persons[${t}]email`,e.email);const r=(null===e||void 0===e?void 0:e.phone)&&(0,d.l)(e.phone);null!==r&&void 0!==r&&r.nationalNumber&&n.append(`contact_persons[${t}]phone`,e.phone),n.append(`contact_persons[${t}]position`,e.position),n.append(`contact_persons[${t}]is_main`,e.is_main)}})),null!==b&&void 0!==b&&b.croppedImageBlob){const e=(0,f.Ak)(6);n.append("photo",null===b||void 0===b?void 0:b.croppedImageBlob,`${e}.jpg`)}try{x(!0);const e=localStorage.getItem("access_token"),r=await fetch("https://app.memate.com.au/api/v1/clients/business/new/",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:n});if(r.ok){m.oR.success("New client created successfully");const e=await r.json();t(`/sales/newquote/selectyourclient/client-information/scope-of-work/${null===e||void 0===e?void 0:e.id}`)}else{const e=await r.json();m.oR.error(e||"Failed to create new client. Please try again.")}}catch(o){console.log("Error in creating new business client: ",o),m.oR.error("Failed to create new client. Please try again.")}finally{x(!1)}},defaultValues:O,deleteAddress:()=>{},deleteContact:()=>{}})]})})]}),(0,y.jsxs)("div",{className:"individual bottomBox",children:[(0,y.jsx)(p.N_,{to:"/sales",children:(0,y.jsx)(i.A,{type:"button",className:"cancel-button",children:"Cancel"})}),(0,y.jsx)(i.A,{type:"button",disabled:g,onClick:()=>{n.current&&n.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},className:"submit-button",children:g?"Loading...":"Next Step"})]})]})]})})}},72052:(e,t,n)=>{n.d(t,{S:()=>h});var r=n(65043),o=n(84052),i=n(41828),l=n(2028),a=n(2224),s=n(1356),c=n(4504);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function f(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={root:function(e){var t=e.props,n=e.isFilled,r=e.context;return(0,c.xW)("p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":n,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:r&&"filled"===r.inputStyle})}},v=i.x.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,children:void 0,className:null,invalid:!1,variant:null,keyfilter:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,iconPosition:null},css:{classes:m}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=r.memo(r.forwardRef((function(e,t){var n=(0,l.qV)(),p=r.useContext(o.UM),d=v.getProps(e,p),f=v.setMetaData(b(b({props:d},d.__parentMetadata),{},{context:{disabled:d.disabled,iconPosition:d.iconPosition}})),m=f.ptm,y=f.cx,h=f.isUnstyled;(0,i.j)(v.css.styles,h,{name:"inputtext",styled:!0});var g=r.useRef(t);r.useEffect((function(){c.BF.combinedRefs(g,t)}),[g,t]);var x=r.useMemo((function(){return c.BF.isNotEmpty(d.value)||c.BF.isNotEmpty(d.defaultValue)}),[d.value,d.defaultValue]),j=c.BF.isNotEmpty(d.tooltip);r.useEffect((function(){var e;x||null!==(e=g.current)&&void 0!==e&&e.value?c.DV.addClass(g.current,"p-filled"):c.DV.removeClass(g.current,"p-filled")}),[d.disabled,x]);var O=n({className:(0,c.xW)(d.className,y("root",{context:p,isFilled:x})),onBeforeInput:function(e){d.onBeforeInput&&d.onBeforeInput(e),d.keyfilter&&a.Q.onBeforeInput(e,d.keyfilter,d.validateOnly)},onInput:function(e){var t=e.target,n=!0;d.keyfilter&&d.validateOnly&&(n=a.Q.validate(e,d.keyfilter)),d.onInput&&d.onInput(e,n),c.BF.isNotEmpty(t.value)?c.DV.addClass(t,"p-filled"):c.DV.removeClass(t,"p-filled")},onKeyDown:function(e){d.onKeyDown&&d.onKeyDown(e),d.keyfilter&&a.Q.onKeyPress(e,d.keyfilter,d.validateOnly)},onPaste:function(e){d.onPaste&&d.onPaste(e),d.keyfilter&&a.Q.onPaste(e,d.keyfilter,d.validateOnly)}},v.getOtherProps(d),m("root"));return r.createElement(r.Fragment,null,r.createElement("input",u({ref:g},O)),j&&r.createElement(s.m,u({target:g,content:d.tooltip,pt:m("tooltip")},d.tooltipOptions)))})));h.displayName="InputText"},96141:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(65043),o=n(65173),i=n.n(o),l=["color","size","title","className"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}var s=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,s=void 0===i?"1em":i,c=e.title,u=void 0===c?null:c,p=e.className,d=void 0===p?"":p,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:o,className:["bi","bi-plus",d].filter(Boolean).join(" ")},f),u?r.createElement("title",null,u):null,r.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"}))}));s.propTypes={color:i().string,size:i().oneOfType([i().string,i().number]),title:i().string,className:i().string};const c=s}}]);
//# sourceMappingURL=4152.d14d8e91.chunk.js.map