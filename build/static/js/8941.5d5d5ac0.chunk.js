"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[8941],{67046:(e,l,a)=>{a.d(l,{CK:()=>v,D7:()=>i,HT:()=>p,Op:()=>d,Sg:()=>n,V3:()=>m,WG:()=>c,cS:()=>r,fW:()=>h,j3:()=>o,oe:()=>u});var t=a(31342);const s="https://app.memate.com.au/api/v1",i=async e=>{const l={method:"POST",body:e},a=new URL(`${s}/sales/new-request/`);return(0,t.f)(a.toString(),l)},n=async(e,l)=>{const a={method:"POST",body:{managers:l}},i=new URL(`${s}${`/sales/managers/${e}/`}`);return(0,t.f)(i.toString(),a)},o=async()=>{const e=new Headers,l=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${l}`);const a={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${s}/sales/`,a);return await e.text()}catch(t){throw console.error("Profile fetch error:",t),t}},r=async(e,l)=>{const a=new Headers,t=localStorage.getItem("access_token");a.append("Authorization",`Bearer ${t}`),a.append("Content-Type","application/json");const i={method:"PUT",headers:a,body:JSON.stringify({sales_note:l}),redirect:"follow"};try{const l=await fetch(`${s}/sales/${e}/notes/`,i);if(!l.ok){const e=await l.text();throw new Error(`Sales notes update failed with status ${l.status}: ${e}`)}const a=await l.text();return a.trim()?JSON.parse(a):null}catch(n){throw console.error("Sales notes update error:",n),n}},c=async e=>{const l={method:"PUT",body:{ids:e}},a=new URL(`${s}/sales/status/won/`);return(0,t.f)(a.toString(),l)},d=async e=>{const l={method:"PUT",body:{ids:e}},a=new URL(`${s}/sales/status/lost/`);return(0,t.f)(a.toString(),l)},u=async(e,l)=>{const a=new Headers,t=localStorage.getItem("access_token");a.append("Authorization",`Bearer ${t}`),a.append("Content-Type","application/json");const i={method:"POST",headers:a,body:JSON.stringify(l),redirect:"follow"};try{const l=await fetch(`${s}/sales/${e}/contacts/`,i);return l.ok?l:(console.log("Error:",l.status),null)}catch(n){return console.log("Error:",n),null}},m=async(e,l)=>{const a=new Headers,t=localStorage.getItem("access_token");a.append("Authorization",`Bearer ${t}`),a.append("Content-Type","application/json");const i={method:"PUT",headers:a,body:JSON.stringify({lead:l,unique_id:e}),redirect:"follow"};try{const l=await fetch(`${s}/sales/${e}/lead/`,i);if(!l.ok){const e=await l.text();throw new Error(`Sales lead update failed with status ${l.status}: ${e}`)}const a=await l.text();return a.trim()?JSON.parse(a):null}catch(n){throw console.error("Sales lead update error:",n),n}},h=async e=>{const l=new Headers,a=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${a}`),l.append("Content-Type","application/json");const t={method:"PUT",headers:l,body:JSON.stringify({ids:e}),redirect:"follow"},i=await Promise.all([fetch(`${s}/sales/status/won/`,t)]);return await Promise.all(i.map((e=>e.json())))},v=async e=>{const l=new Headers,a=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${a}`),l.append("Content-Type","application/json");const t={method:"POST",headers:l,redirect:"follow"},i=await fetch(`${s}/sales/${e}/duplicate/`,t);return(await i.json())[0]},p=async e=>{const l=new Headers,a=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${a}`),l.append("Content-Type","application/json");const t={method:"PUT",headers:l,body:JSON.stringify({ids:e}),redirect:"follow"},i=await Promise.all([fetch(`${s}/sales/status/lost/`,t)]);return await Promise.all(i.map((e=>e.json())))}},81242:(e,l,a)=>{a.d(l,{A:()=>C});var t=a(65043),s=a(32952),i=a(61072),n=a(78602),o=a(14282),r=a(77918),c=a(28261),d=a(58387),u=a(75758),m=a(88060),h=a(8868),v=a(28676),p=a(74532),g=a(72052),x=a(18226),f=a(93740);const b={headerTitle:"send-email_headerTitle__50KUB",customLabel:"send-email_customLabel__r5xED",templateInfo:"send-email_templateInfo__mWkVT",bag:"send-email_bag__wtdwK",lable:"send-email_lable__+kNCa",dropdownSelect:"send-email_dropdownSelect__RY5w8",autoCompleteBox:"send-email_autoCompleteBox__fWZ7C",AutoComplete:"send-email_AutoComplete__m9YI5",bcc:"send-email_bcc__BwFzl",box:"send-email_box__Zlmer",active:"send-email_active__vEx4h",inputBox:"send-email_inputBox__NpU2b"};var j=a(81047),w=a(70579);const y=(0,w.jsxs)("span",{className:"ql-formats",children:[(0,w.jsx)("button",{className:"ql-bold","aria-label":"Bold"}),(0,w.jsx)("button",{className:"ql-italic","aria-label":"Italic"}),(0,w.jsx)("button",{className:"ql-underline","aria-label":"Underline"}),(0,w.jsx)("button",{className:"ql-strike","aria-label":"Strikethrough"}),(0,w.jsx)("button",{className:"ql-blockquote","aria-label":"Blockquote"}),(0,w.jsx)("button",{className:"ql-list",value:"ordered","aria-label":"Ordered List"}),(0,w.jsx)("button",{className:"ql-list",value:"bullet","aria-label":"Bullet List"}),(0,w.jsx)("button",{className:"ql-align",value:"","aria-label":"Align Left"}),(0,w.jsx)("button",{className:"ql-align",value:"center","aria-label":"Align Center"}),(0,w.jsx)("button",{className:"ql-align",value:"right","aria-label":"Align Right"}),(0,w.jsx)("button",{className:"ql-align",value:"justify","aria-label":"Justify"}),(0,w.jsx)("button",{className:"ql-link","aria-label":"Insert Link"}),(0,w.jsx)("button",{className:"ql-image","aria-label":"Insert Image"}),(0,w.jsx)("button",{className:"ql-code-block","aria-label":"Code Block"})]}),C=e=>{var l,a,C,N;let{show:S,setShow:A,mutation:_,contactPersons:T,setPayload:k,defaultTemplateId:I,isAddingContact:B=!1}=e;const E=(0,t.useRef)(null),$=JSON.parse(window.localStorage.getItem("profileData")||"{}"),[q,O]=(0,t.useState)(""),[L,P]=(0,t.useState)([]),[F,U]=(0,t.useState)([]),[z,H]=(0,t.useState)([]),[K,R]=(0,t.useState)(null),[J,M]=(0,t.useState)(null),[W,D]=(0,t.useState)(null),[Q,V]=(0,t.useState)({}),[G,Y]=(0,t.useState)([]),Z=(0,t.useRef)(null),X=(0,t.useRef)(null),ee=(0,t.useRef)(null),[le,ae]=(0,t.useState)(!1),[te,se]=(0,t.useState)(!1),ie=(0,t.useCallback)((e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())),[]),ne=(0,t.useCallback)((e=>!e||0===e.length||e.every((e=>ie(e)))),[ie]),oe=(0,t.useCallback)((e=>e&&0!==e.length?e.filter((e=>!ie(e))):[]),[ie]),re=(0,t.useCallback)((e=>e&&0!==e.length?e.filter((e=>ie(e))):[]),[ie]),ce=(0,t.useCallback)((()=>{let e=!1;if(L.length>0){const l=oe(L);l.length>0&&(console.log("Found invalid TO emails:",l),P(re(L)),e=!0)}if(F.length>0){const l=oe(F);l.length>0&&(console.log("Found invalid CC emails:",l),U(re(F)),e=!0)}if(z.length>0){const l=oe(z);l.length>0&&(console.log("Found invalid BCC emails:",l),H(re(z)),e=!0)}return!e}),[L,F,z,oe,re]),[de,ue]=(0,t.useState)(null),me=()=>{A(!1),I||(O([]),P([]),U([]),H([]),R([]),M([]),ue(null))},he=(0,c.I)({queryKey:["emailTemplate"],queryFn:j.SQ,enabled:!!S}),ve=(0,c.I)({queryKey:["getSignatureTemplates"],queryFn:j.AO,enabled:!!S}),pe=(0,c.I)({queryKey:["getOutgoingEmail"],queryFn:j.hx,enabled:!!S}),ge=(0,c.I)({queryKey:["emailQuery",de],queryFn:()=>(0,j.hS)(de),enabled:!!de,retry:1});(0,t.useEffect)((()=>{var e,l,a;null!==pe&&void 0!==pe&&pe.data&&(null!==pe&&void 0!==pe&&null!==(e=pe.data)&&void 0!==e&&e.outgoing_email&&null!==pe&&void 0!==pe&&null!==(l=pe.data)&&void 0!==l&&l.outgoing_email_verified?O(null===pe||void 0===pe||null===(a=pe.data)||void 0===a?void 0:a.outgoing_email):O("no-reply@memate.com.au"));if(!de&&null!==he&&void 0!==he&&he.data&&I){var t;const e=null===he||void 0===he||null===(t=he.data)||void 0===t?void 0:t.find((e=>e.type===I));e&&ue(null===e||void 0===e?void 0:e.id)}}),[he,pe,I,de]);const xe=e=>{var l,a;const t=(null===e||void 0===e||null===(l=e.query)||void 0===l?void 0:l.toLowerCase())||"";let s=null===(a=T.map((e=>e.email)))||void 0===a?void 0:a.filter((e=>e));s=s.filter((e=>!L.includes(e))),s=s.filter((e=>!F.includes(e))),s=s.filter((e=>!z.includes(e))),s=s.filter((e=>e.toLowerCase().includes(t))),Y(s)},fe=()=>{xe(),Z.current&&Z.current.show()},be=()=>{xe(),X.current&&X.current.show()},je=()=>{xe(),ee.current&&ee.current.show()};return(0,t.useEffect)((()=>{if(null!==T&&void 0!==T&&T.length){var e;let l=null===(e=T.map((e=>e.email)))||void 0===e?void 0:e.filter((e=>e));Y(l)}}),[T]),(0,t.useEffect)((()=>{if(L.length>0){const e=oe(L);if(e.length>0){console.log("Auto-cleaning invalid TO emails:",e);const l=re(L);P(l)}}}),[L,oe,re]),(0,t.useEffect)((()=>{if(F.length>0){const e=oe(F);if(e.length>0){console.log("Auto-cleaning invalid CC emails:",e);const l=re(F);U(l)}}}),[F,oe,re]),(0,t.useEffect)((()=>{if(z.length>0){const e=oe(z);if(e.length>0){console.log("Auto-cleaning invalid BCC emails:",e);const l=re(z);H(l)}}}),[z,oe,re]),(0,t.useEffect)((()=>{k((e=>({...e,subject:K,email_body:J,from_email:q,to:null===L||void 0===L?void 0:L.toString(),...F.length>0&&{cc:F.toString()},...z.length>0&&{bcc:z.toString()},...W&&{signature:W}})))}),[K,J,q,L,F,z,W,k]),(0,t.useEffect)((()=>{var e,l;null!==ve&&void 0!==ve&&ve.data&&D(null===ve||void 0===ve||null===(e=ve.data)||void 0===e||null===(l=e.find((e=>e.id===$.email_signature)))||void 0===l?void 0:l.id)}),[null===ve||void 0===ve?void 0:ve.data,$.email_signature]),(0,t.useEffect)((()=>{var e,l;M((null===ge||void 0===ge||null===(e=ge.data)||void 0===e?void 0:e.body)||""),R(null===ge||void 0===ge||null===(l=ge.data)||void 0===l?void 0:l.subject),V((e=>({...e,subject:!1}))),V((e=>({...e,text:!1})))}),[null===ge||void 0===ge?void 0:ge.data]),(0,w.jsxs)(s.A,{show:S,centered:!0,onHide:me,className:"invoice-form",size:"lg",children:[(0,w.jsx)(s.A.Header,{closeButton:!0,children:(0,w.jsx)("div",{className:`${b.modalHeader}`,children:(0,w.jsx)("div",{className:"w-100 d-flex align-items-center gap-2",children:(0,w.jsx)("span",{className:`white-space-nowrap mt-2 mb-2 ${b.headerTitle}`,children:"Send email"})})})}),(0,w.jsxs)(s.A.Body,{children:[(0,w.jsxs)(i.A,{children:[(0,w.jsxs)(n.A,{sm:6,className:"mb-3",children:[(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"FROM"}),(0,w.jsx)(m.m,{options:pe&&(null===pe||void 0===pe?void 0:pe.data)&&[{value:null===pe||void 0===pe||null===(l=pe.data)||void 0===l?void 0:l.outgoing_email,label:`${null===pe||void 0===pe||null===(a=pe.data)||void 0===a?void 0:a.outgoing_email}`}]||[],className:(0,d.A)(b.dropdownSelect,"dropdown-height-fixed w-100"),style:{height:"46px",paddingLeft:"60px"},placeholder:"Select from email",onChange:e=>{O(e.value),V((e=>({...e,from:!1})))},value:q,filterInputAutoFocus:!0})]}),(null===Q||void 0===Q?void 0:Q.from)&&(0,w.jsx)("p",{className:"error-message mb-0",children:"From email is required"})]}),(0,w.jsx)(n.A,{sm:6,className:"mb-3",children:(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"Templates"}),(0,w.jsx)(m.m,{options:he&&(null===(C=he.data)||void 0===C?void 0:C.map((e=>({value:e.id,label:`${e.name}`}))))||[],className:(0,d.A)(b.dropdownSelect,"dropdown-height-fixed w-100"),style:{height:"46px",paddingLeft:"88px"},placeholder:"Select template",onChange:e=>{ue(e.value)},value:de,loading:null===he||void 0===he?void 0:he.isFetching,filterInputAutoFocus:!0}),(0,w.jsx)("div",{className:b.templateInfo,onClick:e=>E.current.toggle(e),children:(0,w.jsx)(r.A,{size:16,color:"#737374ff"})}),(0,w.jsxs)(x.j,{ref:E,children:[(0,w.jsx)("p",{className:"font-12",style:{color:"#344054",lineHeight:"18px"},children:"Choose from your existing templates here."}),(0,w.jsxs)("div",{className:"font-12",style:{color:"#344054",lineHeight:"18px"},children:["To edit or add new templates, go to",(0,w.jsx)("br",{})," Profile Settings > Templates > Email",(0,w.jsx)("br",{})," Templates."]})]})]})})]}),(0,w.jsxs)(i.A,{children:[(0,w.jsxs)(n.A,{sm:12,className:"mb-3",children:[(0,w.jsxs)("div",{className:"d-flex gap-3 w-100",children:[(0,w.jsxs)("div",{style:{position:"relative"},className:b.autoCompleteBox,children:[(0,w.jsx)("div",{style:{width:"50px"},className:b.bag}),(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"TO"}),(0,w.jsx)(u.j,{ref:Z,value:L,completeMethod:xe,onChange:e=>{P(e.value),V((e=>({...e,to:!1,toInvalid:!1})))},multiple:!0,suggestions:G,onClick:fe,onFocus:fe,onKeyUp:e=>{const l=e.target.value;if(l.includes(",")||"Enter"===e.key){const a=l.split(/[\s,]+/).filter((e=>e)),t=a.filter((e=>ie(e)));P((e=>[...new Set([...e,...t])])),t.length===a.length&&t.length>0&&V((e=>({...e,to:!1,toInvalid:!1}))),e.target.value=""}},onBlur:e=>{const l=e.target.value.trim();l&&(ie(l)?(P((e=>[...new Set([...e,l])])),V((e=>({...e,to:!1,toInvalid:!1})))):V((e=>({...e,toInvalid:!0}))),e.target.value="")},className:(0,d.A)(b.AutoComplete,"w-100"),placeholder:"TO"})]}),(0,w.jsx)(o.A,{className:(0,d.A)(b.box,{[b.active]:le}),onClick:()=>{ae(!le),U([])},children:"CC"}),(0,w.jsx)(o.A,{className:(0,d.A)(b.box,{[b.active]:te}),onClick:()=>{se(!te),H([])},children:"BCC"})]}),(null===Q||void 0===Q?void 0:Q.to)&&!(null!==Q&&void 0!==Q&&Q.toInvalid)&&(0,w.jsx)("p",{className:"error-message mb-0",children:"To email is required"}),(null===Q||void 0===Q?void 0:Q.toInvalid)&&(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"error-message mb-0",children:"Please enter valid email addresses for TO"}),(null===Q||void 0===Q?void 0:Q.invalidToEmails)&&Q.invalidToEmails.length>0&&(0,w.jsxs)("p",{className:"error-message mb-0 mt-1",style:{fontSize:"12px",color:"#dc3545"},children:["Invalid emails: ",Q.invalidToEmails.join(", ")]})]})]}),le&&(0,w.jsxs)(n.A,{sm:6,className:"mb-3",children:[(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("div",{style:{width:"50px"},className:b.bag}),(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"CC"}),(0,w.jsx)(u.j,{ref:X,value:F,completeMethod:xe,onChange:e=>{U(e.value),V((e=>({...e,cc:!1})))},multiple:!0,suggestions:G,onClick:be,onFocus:be,onKeyUp:e=>{const l=e.target.value;if(l.includes(",")||"Enter"===e.key){const a=l.split(/[\s,]+/).filter((e=>e)),t=a.filter((e=>ie(e)));U((e=>[...new Set([...e,...t])])),t.length===a.length&&V((e=>({...e,cc:!1}))),e.target.value=""}},onBlur:e=>{const l=e.target.value.trim();l&&(ie(l)?(U((e=>[...new Set([...e,l])])),V((e=>({...e,cc:!1})))):V((e=>({...e,cc:!0}))),e.target.value="")},className:(0,d.A)(b.AutoComplete,"w-100"),placeholder:"CC"})]}),(null===Q||void 0===Q?void 0:Q.cc)&&(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"error-message mb-0",children:"Please enter valid email addresses for CC"}),(null===Q||void 0===Q?void 0:Q.invalidCcEmails)&&Q.invalidCcEmails.length>0&&(0,w.jsxs)("p",{className:"error-message mb-0 mt-1",style:{fontSize:"12px",color:"#dc3545"},children:["Invalid emails: ",Q.invalidCcEmails.join(", ")]})]})]}),te&&(0,w.jsxs)(n.A,{sm:6,className:"mb-3",children:[(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("div",{style:{width:"60px"},className:b.bag}),(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"BCC"}),(0,w.jsx)(u.j,{ref:ee,value:z,completeMethod:xe,onChange:e=>{H(e.value),V((e=>({...e,bcc:!1})))},multiple:!0,suggestions:G,onClick:je,onFocus:je,onKeyUp:e=>{const l=e.target.value;if(l.includes(",")||"Enter"===e.key){const a=l.split(/[\s,]+/).filter((e=>e)),t=a.filter((e=>ie(e)));H((e=>[...new Set([...e,...t])])),t.length===a.length&&V((e=>({...e,bcc:!1}))),e.target.value=""}},onBlur:e=>{const l=e.target.value.trim();l&&(ie(l)?(H((e=>[...new Set([...e,l])])),V((e=>({...e,bcc:!1})))):V((e=>({...e,bcc:!0}))),e.target.value="")},className:(0,d.A)(b.AutoComplete,b.bcc,"w-100"),placeholder:"BCC"})]}),(null===Q||void 0===Q?void 0:Q.bcc)&&(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"error-message mb-0",children:"Please enter valid email addresses for BCC"}),(null===Q||void 0===Q?void 0:Q.invalidBccEmails)&&Q.invalidBccEmails.length>0&&(0,w.jsxs)("p",{className:"error-message mb-0 mt-1",style:{fontSize:"12px",color:"#dc3545"},children:["Invalid emails: ",Q.invalidBccEmails.join(", ")]})]})]}),(0,w.jsxs)(n.A,{sm:12,className:"mb-2",children:[(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("div",{style:{width:"60px"},className:b.bag}),(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"SUBJECT"}),(0,w.jsxs)(v.C,{children:[(0,w.jsx)(p.m,{children:(null===ge||void 0===ge?void 0:ge.isFetching)&&(0,w.jsx)(f.p,{style:{width:"20px",height:"20px",position:"relative",top:"-5px"}})}),(0,w.jsx)(g.S,{value:K,className:(0,d.A)(b.inputBox,"w-100"),style:{paddingLeft:"100px"},onChange:e=>{R(e.target.value),V((e=>({...e,subject:!1})))},placeholder:"{Organization} | Quotation: {number} | {reference}"})]})]}),(null===Q||void 0===Q?void 0:Q.subject)&&(0,w.jsx)("p",{className:"error-message mb-0",children:"Subject is required"})]}),(0,w.jsxs)(n.A,{sm:12,className:"mb-3",children:[(0,w.jsxs)("div",{className:"d-flex flex-column gap-1",style:{position:"relative"},children:[(0,w.jsx)("label",{className:(0,d.A)(b.lable),children:"Message"}),(0,w.jsx)(p.m,{style:{position:"absolute",right:"15px",top:"40px",zIndex:1},children:(null===ge||void 0===ge?void 0:ge.isFetching)&&(0,w.jsx)(f.p,{style:{width:"20px",height:"20px",position:"relative",top:"-5px"}})}),(0,w.jsx)(h.K,{style:{minHeight:"150px"},headerTemplate:y,value:J,placeholder:"Enter a description...",onTextChange:e=>{M(e.htmlValue),V((e=>({...e,text:!1})))}})]}),(null===Q||void 0===Q?void 0:Q.text)&&(0,w.jsx)("p",{className:"error-message mb-0",children:"Message is required"})]}),(0,w.jsx)(n.A,{sm:12,children:(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)("label",{className:(0,d.A)(b.customLabel),children:"Signature"}),(0,w.jsx)(m.m,{options:ve&&(null===(N=ve.data)||void 0===N?void 0:N.map((e=>({value:e.id,label:`${e.name}`}))))||[],panelClassName:"px880-dropdown-item",className:(0,d.A)(b.dropdownSelect,"dropdown-height-fixed w-100"),style:{height:"46px",paddingLeft:"88px"},placeholder:"Select signature",onChange:e=>{D(e.value)},value:W,loading:null===ve||void 0===ve?void 0:ve.isFetching,filterInputAutoFocus:!0})]})})]})]}),(0,w.jsxs)(s.A.Footer,{className:"d-flex justify-content-between",children:[(0,w.jsx)("span",{}),(0,w.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,w.jsxs)(o.A,{className:"outline-button",onClick:me,children:["Cancel"," "]}),(0,w.jsxs)(o.A,{disabled:null===_||void 0===_?void 0:_.isPending,className:"solid-button",onClick:async()=>{let e=0;V({});if(ce()||console.log("Some emails were invalid and have been cleaned"),q||(++e,V((e=>({...e,from:!0})))),0===(null===L||void 0===L?void 0:L.length))++e,V((e=>({...e,to:!0})));else if(!ne(L)){++e;const l=oe(L);console.log("Invalid TO emails:",l),V((e=>({...e,to:!0,toInvalid:!0,invalidToEmails:l})))}if(F.length>0&&!ne(F)){++e;const l=oe(F);console.log("Invalid CC emails:",l),V((e=>({...e,cc:!0,invalidCcEmails:l})))}if(z.length>0&&!ne(z)){++e;const l=oe(z);console.log("Invalid BCC emails:",l),V((e=>({...e,bcc:!0,invalidBccEmails:l})))}K||(++e,V((e=>({...e,subject:!0})))),J||(++e,V((e=>({...e,text:!0})))),e||_.mutate({subject:K,email_body:J,from_email:q,to:null===L||void 0===L?void 0:L.toString(),...F.length>0&&{cc:F.toString()},...z.length>0&&{bcc:z.toString()},...W&&{signature:W}})},children:["Send"," ",((null===_||void 0===_?void 0:_.isPending)||B)&&(0,w.jsx)(f.p,{style:{width:"20px",height:"20px",color:"#fff"}})]})]})]})]})}}}]);
//# sourceMappingURL=8941.5d5d5ac0.chunk.js.map