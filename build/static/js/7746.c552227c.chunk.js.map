{"version":3,"file":"static/js/7746.c552227c.chunk.js","mappings":"4GAAO,SAASA,EAAUC,GAA0B,IAAlBC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACrC,MAAMG,EAAMC,WAAWN,GAEvB,OAAIO,MAAMF,GACC,OAGPJ,GAAWO,KAAKC,IAAIJ,IAAQ,IACrB,IAAIK,KAAKC,aAAa,QAAS,CAClCC,SAAU,UACVC,eAAgB,QAChBC,sBAAuB,EACvBC,sBAAuB,IACxBC,OAAOX,GAGP,IAAIK,KAAKC,aAAa,QAAS,CAClCG,sBAAuB,EACvBC,sBAAuB,IACxBC,OAAOX,EACd,C,iMCnBA,MAAMY,EAAeC,mCAERC,EAAiBC,UAC5B,MAIMC,EAAM,IAAIC,IAAI,GAAGL,8BAGvB,OAFY,IAARM,GAAWF,EAAIG,aAAaC,OAAO,MAAO,IAEvCC,EAAAA,EAAAA,GAASL,EAAIM,WANJ,CACdC,OAAQ,OAK8B,EAG7BC,EAA8BT,UACzC,MAIMC,EAAM,IAAIC,IAAI,GAAGL,IAJN,2BAA2Ba,QAKtCC,QAAeL,EAAAA,EAAAA,GAASL,EAAIM,WAJlB,CACdC,OAAQ,QAIV,OAAOI,MAAMC,QAAQF,GACjBA,EAAOG,QAAOC,IAASA,EAAKC,UAC5BL,IAAWA,EAAOK,QAAUL,EAAS,IAAI,EAGlCM,EAAqBjB,UAChC,MAIMC,EAAM,IAAIC,IAAI,GAAGL,IAJN,aAAaqB,QAK9B,OAAOZ,EAAAA,EAAAA,GAASL,EAAIM,WAJJ,CACdC,OAAQ,OAG8B,EAG7BW,EAAmCnB,UAC9C,MACMoB,EAAU,CACdZ,OAAQ,OACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,wBACvB,OAAOS,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BG,EAAmCvB,MAAOkB,EAAWI,KAChE,IAAKJ,EAAW,MAAM,IAAIM,MAAM,eAEhC,MACMJ,EAAU,CACdZ,OAAQ,MACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,IALN,mBAAmBqB,QAMpC,OAAOZ,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BK,EAAsBzB,UACjC,MACMoB,EAAU,CACdZ,OAAQ,OACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,0BACvB,OAAOS,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BM,EAAmB1B,UAC9B,MAIMC,EAAM,IAAIC,IAAI,GAAGL,IAJN,oBAAoBa,eAKrC,OAAOJ,EAAAA,EAAAA,GAASL,EAAIM,WAJJ,CACdC,OAAQ,UAG8B,EAY7BmB,EAAmB3B,UAC9B,MACMoB,EAAU,CACdZ,OAAQ,OACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,2BACvB,OAAOS,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BQ,EAAmB5B,MAAOU,EAAIY,KACzC,IAAKZ,EAAI,OAET,MACMU,EAAU,CACdZ,OAAQ,MACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,IALN,gCAAgCa,QAMjD,OAAOJ,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BS,EAAsB7B,UACjC,MACMoB,EAAU,CACdZ,OAAQ,OACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,+BACvB,OAAOS,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BU,EAAsB9B,MAAOU,EAAIY,KAC5C,IAAKZ,EAAI,OAET,MACMU,EAAU,CACdZ,OAAQ,MACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,IALN,oCAAoCa,QAMrD,OAAOJ,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7BW,EAAmB/B,MAAOgC,EAAOV,KAC5C,MACMF,EAAU,CACdZ,OAAQ,OACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,IALN,2BAA2BmC,YAM5C,OAAO1B,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7Ba,EAAmBjC,MAAOgC,EAAOtB,EAAIY,KAChD,MACMF,EAAU,CACdZ,OAAQ,MACRa,KAAMC,GAEFrB,EAAM,IAAIC,IAAI,GAAGL,IALN,2BAA2BmC,YAAgBtB,QAM5D,OAAOJ,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,EAG7Bc,EAA0BlC,UACrC,MAGMC,EAAM,IAAIC,IAAI,GAAGL,IAAesC,KACtC,OAAO7B,EAAAA,EAAAA,GAASL,EAAIM,WAJJ,CACdC,OAAQ,UAG8B,EAa7B4B,EAAqBpC,UAChC,MACMoB,EAAU,CACdZ,OAAQ,OACRa,KAAMgB,EAAYC,KAAI,CAACC,EAAGC,KAAG,CAAQ9B,GAAI6B,EAAE7B,GAAI+B,MAAOD,EAAM,OAExDvC,EAAM,IAAIC,IAAI,GAAGL,iCACvB,OAAOS,EAAAA,EAAAA,GAASL,EAAIM,WAAYa,EAAQ,C,kBCvJnC,SAASsB,EAASzD,GACvB,IAAgI0D,EAA5HC,EAAS,CAAEC,EAAG,IAAMC,GAAI,IAAKC,EAAG,IAAKC,GAAI,IAAKC,EAAG,IAAKC,GAAI,GAAIC,EAAG,GAAIC,GAAI,GAAIC,EAAG,GAAIC,GAAI,EAAGC,EAAG,EAAGC,GAAI,EAAGC,EAAG,GAAKC,EAAQ,GAC5H,IAAKf,KAAKC,EACR,KAAO3D,GAAO2D,EAAOD,IACnBe,GAASf,EACT1D,GAAO2D,EAAOD,GAGlB,OAAOe,CACT,CAEO,SAASC,EAAYC,GAC1B,OAAOA,EAAOC,eAAe,QAAS,CAAEC,MAAO,WAAYC,SAAU,OACvE,C,oCAGO,MAAMC,EAAaA,CAACC,EAAeC,KAAkB,IAADC,EACzD,IAAKF,EAAe,MAAO,IAE3B,MACMG,EAAO,IAAIC,KAAK,KAAQJ,GAE9B,GAAGC,EAAc,CAMf,OALyBE,EAAKE,mBAAmB,QAAS,CACxDC,IAAK,UACLC,MAAO,UACPC,KAAM,YACLC,QAAQ,MAAO,IAEpB,CAGA,OAD+D,QAA5CP,EAAGC,EAAKE,mBAAmB,QAZ9B,CAAEG,KAAM,UAAWD,MAAO,QAASD,IAAK,mBAYO,IAAAJ,OAAA,EAAzCA,EAA2CO,QAAQ,KAAM,GAC3D,C,sbCpDf,MAAMC,EAAiCA,KAEtCC,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQM,UAAW,UAAWR,UAC9CC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASM,UAAW,UAAWR,UAC/CC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAIhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,qBAO/BE,EAA6BA,KAElCV,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQM,UAAW,UAAWR,UAC9CC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASM,UAAW,UAAWR,UAC/CC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAIhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,mBAGhCN,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAChCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,qB,wDChH5C,MAsEA,EAtEwBI,IAAqD,IAADC,EAAA,IAAnD,YAAEpD,EAAW,aAAEqD,EAAY,MAAEC,EAAK,SAAEC,GAAUJ,EACnE,MAAMK,EAAqBA,CAACC,EAAOC,KAC/BL,EAAaK,EAAOD,EAAOF,EAAS,EAGxC,OACId,EAAAA,EAAAA,KAACkB,EAAAA,EAAI,CACDC,YACIrB,EAAAA,EAAAA,MAACsB,EAAAA,EAAU,CAACpC,MAAO,CACfiB,MAAO,QACPoB,QAAS,cACTC,WAAY,SACZC,eAAgB,gBAChBC,QAAS,UACTC,OAAQ,UACRC,WAAY,cACZC,OAAQ,OACRC,MAAOf,EAAQ,UAAY,WAC7Bd,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,iBAAiBhB,MAAOA,GAAS,aAAad,SACxDc,GAAS,gBAEdb,EAAAA,EAAAA,KAAA,QAAAD,UACIC,EAAAA,EAAAA,KAAC8B,EAAAA,EAAW,CAACF,MAAM,UAAUG,KAAM,UAI/CC,SAAS,OACTC,SAAS,SACTC,QAAM,EACNL,UAAU,mBAAkB9B,SAEhB,OAAXxC,QAAW,IAAXA,GAA6C,QAAlCoD,EAAXpD,EAAavB,QAAQQ,KAAc,OAAJA,QAAI,IAAJA,GAAAA,EAAMN,kBAAQ,IAAAyE,OAAlC,EAAXA,EAA+CwB,MAAK,CAACC,EAAGC,IAAMD,EAAEzE,MAAQ0E,EAAE1E,QAAOH,KAAK8E,IAAU,IAAAC,EAAAC,EAAAC,EAAA,OAC7FzC,EAAAA,EAAAA,KAAC0C,EAAAA,SAAc,CAAA3C,SACA,OAAVuC,QAAU,IAAVA,GAAsB,QAAZC,EAAVD,EAAYK,kBAAU,IAAAJ,GAAtBA,EAAwBtI,QACrB+F,EAAAA,EAAAA,KAAC4C,EAAAA,EAAO,CAEJ5B,MAAiB,OAAVsB,QAAU,IAAVA,OAAU,EAAVA,EAAYO,KACnBC,UAAU,QACVC,MAAM,QACNC,UAAW,CACPC,UAAW,QACXjB,SAAU,OACVzB,UAAW,QACbR,SAEoB,QAFpByC,EAEDF,EAAWK,kBAAU,IAAAH,GAAkC,QAAlCC,EAArBD,EAAuBxG,QAAQQ,KAAc,OAAJA,QAAI,IAAJA,GAAAA,EAAMN,kBAAQ,IAAAuG,OAAlC,EAArBA,EAAyDN,MAAK,CAACC,EAAGC,IAAMD,EAAEzE,MAAQ0E,EAAE1E,QAAOH,KAAK0F,IAC7FlD,EAAAA,EAAAA,KAACmD,EAAAA,EAAQ,CAELC,QAASA,IAAMrC,EAA0B,OAAPmC,QAAO,IAAPA,OAAO,EAAPA,EAASL,KAAa,OAAPK,QAAO,IAAPA,OAAO,EAAPA,EAAStH,IAAImE,SAEtD,OAAPmD,QAAO,IAAPA,OAAO,EAAPA,EAASL,MAHLK,EAAQtH,OAZhB0G,EAAW1G,KAoBpBoE,EAAAA,EAAAA,KAACmD,EAAAA,EAAQ,CACLnE,MAAO,CAAEuB,UAAW,QAEpB6C,QAASA,IAAMrC,EAA6B,OAAVuB,QAAU,IAAVA,OAAU,EAAVA,EAAYO,KAAgB,OAAVP,QAAU,IAAVA,OAAU,EAAVA,EAAY1G,IAAImE,SAEzD,OAAVuC,QAAU,IAAVA,OAAU,EAAVA,EAAYO,MAHRP,EAAW1G,KAzBP0G,EAAW1G,GA+Bf,KAElB,E,4FCtEf,QAA8B,8CAA9B,GAAuF,2CAAvF,GAA+M,+C,gBCY/M,MAAMyH,GAASC,EAAAA,GACL,CACNzC,MAAOyC,EAAAA,KAAaC,SAAS,qBAC7BC,YAAaF,EAAAA,KAAaC,SAAS,6BAEpCA,WAgIH,GA9H+B7C,IAAuD,IAAD+C,EAAAC,EAAAC,EAAA,IAArD,WAAEC,EAAU,cAAEC,EAAa,OAAEC,EAAM,UAAEC,GAAWrD,EAC9E,MAAOsD,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,GAC3BC,GAAUvG,EAAAA,GAAAA,MAAgB,OAANkG,QAAM,IAANA,OAAM,EAANA,EAAQ7J,SAAU,GAAK,IAC1CmK,IAAkBF,EAAAA,EAAAA,UAAS,CAChCrD,MAAO,GACP2C,YAAa,MAET,SAAEa,EAAQ,MAAEC,EAAK,aAAEC,EAAcC,WAAW,OAAEC,KAAaC,EAAAA,EAAAA,IAAQ,CACvEC,UAAUC,EAAAA,EAAAA,GAAYvB,IAASe,mBAGjCS,EAAAA,EAAAA,YAAU,KAAQP,GAAO,GAAK,CAACV,IAE/B,MAsBMkB,EAAcA,IAAMb,GAAQ,GAGlC,OACEnE,EAAAA,EAAAA,MAAC4C,EAAAA,SAAc,CAAA3C,SAAA,EACbC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAASC,UAAiC,QAAvBxB,EAAAyB,OAAOC,KAAKvB,UAAW,IAAAH,OAAA,EAAvBA,EAAyBxJ,QAAS,EAAGmJ,QAJtDgC,IAAMnB,GAAQ,GAI6DpC,WAAWwD,EAAAA,EAAAA,GAAKrG,EAAmB,cAAe,CAAE,CAACA,KAAwC,QAAvB0E,EAAAwB,OAAOC,KAAKvB,UAAW,IAAAF,OAAA,EAAvBA,EAAyBzJ,QAAS,IAAK8F,SAAC,iBACxMD,EAAAA,EAAAA,MAACwF,EAAAA,EAAK,CACJvD,KAAK,KACLiC,KAAMA,EACNuB,UAAQ,EACRC,OAAQV,EACRjD,WAAWwD,EAAAA,EAAAA,GAAK,YAAa,aAAatF,SAAA,EAE1CC,EAAAA,EAAAA,KAACsF,EAAAA,EAAMG,OAAM,CAACC,aAAW,EAAA3F,UACvBD,EAAAA,EAAAA,MAACwF,EAAAA,EAAMK,MAAK,CAAC9D,UAAU,4BAA2B9B,SAAA,EAChDC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,mDAAmD7C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQC,aAAc,MAAOlE,OAAQ,oBAAqBD,WAAY,UAAWE,MAAO,UAAWkE,SAAU,OAAQC,WAAY,KAAMhG,SACtOoE,KAEHnE,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,mBAAkB9B,SAAC,sBAGvCC,EAAAA,EAAAA,KAACsF,EAAAA,EAAMU,KAAI,CAACnE,UAAU,OAAM9B,UAC1BD,EAAAA,EAAAA,MAACmG,EAAAA,EAAI,CAACC,SAAU3B,GA5CN/H,IAAU,IAAD2J,EACzB,MAAMC,EAAU,IACX5J,EACH6J,MAAOlC,EACPmC,YAAsC,QAA3BH,EAAEjB,OAAOqB,OAAO3C,UAAW,IAAAuC,OAAA,EAAzBA,EAA2BK,OAAOhJ,KAAKyD,IAAK,CACvDwF,IAAKxF,EAAMwF,IACXC,SAAUzF,EAAMyF,SAChBC,WAAY1F,EAAM0F,WAClB3F,MAAOC,EAAMD,MACb4F,MAAO3F,EAAM2F,MACbpD,YAAavC,EAAMuC,iBAGvBO,GAAW8C,GAAY,IAAIA,EAAQT,KACnCtB,IACAjB,EAAc,CAAC,EAAE,IA6B4B9D,SAAA,EACrCD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAO7C,MAAO,CAAEiE,UAAW,QAASjB,SAAU,QAAUjC,SAAA,EACrED,EAAAA,EAAAA,MAACmG,EAAAA,EAAKa,MAAK,CAACjF,UAAU,OAAM9B,SAAA,EAC1BC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKc,MAAK,CAAAhH,SAAC,gBACZC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKe,QAAO,IACP3C,EAAS,SACbW,KAAK,OACLiC,YAAY,oBACZpF,UAAW,IAAG4C,EAAO5D,MAAQ,uBAAyB,MAEvD4D,EAAO5D,QAASb,EAAAA,EAAAA,KAACiG,EAAAA,EAAKiB,KAAI,CAACrF,UAAU,cAAa9B,SAAE0E,EAAO5D,MAAMsG,cAGpErH,EAAAA,EAAAA,MAACmG,EAAAA,EAAKa,MAAK,CAACjF,UAAU,OAAOuF,UAAU,+BAA8BrH,SAAA,EACnEC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKc,MAAK,CAAAhH,SAAC,4BACZC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKe,QAAO,CACX7G,GAAG,WACHkH,KAAM,EACNJ,YAAY,4BACR5C,EAAS,eACbrF,MAAO,CAAE4G,OAAQ,OAAQ0B,QAAS,OAAQC,UAAW,QACrD1F,UAAW,IAAG4C,EAAOjB,YAAc,uBAAyB,MAE7DiB,EAAOjB,cAAexD,EAAAA,EAAAA,KAACiG,EAAAA,EAAKiB,KAAI,CAACrF,UAAU,cAAa9B,SAAE0E,EAAOjB,YAAY2D,cAEhFnH,EAAAA,EAAAA,KAACwH,EAAAA,EAAS,CAACC,QAAQ,4BAA4BzI,MAAO,CAAE2C,OAAQ,sCAAuC5B,SAEzE,QAFyE4D,EAEnGuB,OAAOwC,QAAQ9D,UAAW,IAAAD,OAAA,EAA1BA,EAA4BnG,KAAImK,IAAA,IAAElB,EAAKF,GAAOoB,EAAA,OACtC,OAANpB,QAAM,IAANA,OAAM,EAANA,EAAQ/I,KAAKyD,IACXjB,EAAAA,EAAAA,KAACwH,EAAAA,EAAUI,KAAI,CAA4B/F,UAAU,iCAAgC9B,UACnFD,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAChG,UAAU,QAAO9B,SAAA,EACpBC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,aAAY9B,UAChCC,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,QAAS/F,UAC5C,OAALkB,QAAK,IAALA,OAAK,EAALA,EAAOD,QAAS,QAGrBhB,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAEhI,UACTC,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,QAAS/F,UAC5C,OAALkB,QAAK,IAALA,OAAK,EAALA,EAAOuC,cAAe,QAG3BxD,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,uBAAsB9B,UAC1CD,EAAAA,EAAAA,MAAA,QAAMd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQvF,UAAW,OAAQR,SAAA,CAAC,KAClE3F,WAAgB,OAAL6G,QAAK,IAALA,OAAK,EAALA,EAAO2F,OAAOoB,QAAQ,YAdvB,GAAGvB,KAAOxF,EAAMrF,OAmBtC,UAKTkE,EAAAA,EAAAA,MAACwF,EAAAA,EAAM2C,OAAM,CAACpG,UAAU,oDAAmD9B,SAAA,EACzEC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAAS5B,QAhFV8E,KACtBjE,GAAQ,GACRJ,EAAc,CAAC,EAAE,EA8EyChC,UAAW7C,GAAmBe,UAC5EC,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAACvG,MAAM,UAAUG,KAAM,QAE/BjC,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC9CC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAAS5B,QAAS0B,EAAajD,UAAU,iBAAiB7C,MAAO,CAAEoJ,SAAU,QAASrI,SAAC,YACpGC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAASnD,UAAU,eAAe7C,MAAO,CAAEoJ,SAAU,QAASrI,SAAC,yBAMvE,EC7IrB,GAAgC,8CAAhC,GAA+F,+CAA/F,GAAwJ,wCAAxJ,GAA2M,yC,gBCQ3M,MAoDA,GApDoBW,IAAwC,IAAvC,GAAE9E,EAAE,MAAEyK,EAAK,QAAEgC,EAAO,UAAEtE,GAAWrD,EACpD,MAAM,UAAEtE,IAAckM,EAAAA,EAAAA,KAChBC,GAAiBC,EAAAA,EAAAA,GAAY,CACjCC,WAAYA,KAAM7L,EAAAA,EAAAA,IAAiBhB,GACnC8M,UAAWA,KACTC,EAAAA,GAAMC,QAAQ,mCACdP,GAAS,EAEXQ,QAAUC,IACRC,QAAQC,IAAI,UAAWF,GACvBH,EAAAA,GAAMG,MAAM,iDAAiD,IAI3DG,EAASA,KACb,GAAI7M,EAAW,CACb,IAAKR,EAAI,OAAO+M,EAAAA,GAAMG,MAAM,gBAC5BP,EAAeW,QACjB,MACEnF,GAAWD,GACWA,EAAO9H,QAAQmN,GAAUA,EAAM9C,QAAUA,KAGjE,EAEI+C,EAASA,OAaf,OACEtJ,EAAAA,EAAAA,MAAC4C,EAAAA,SAAc,CAAA3C,SAAA,EACbC,EAAAA,EAAAA,KAACqJ,GAAAA,EAAY,IAEXd,EAAee,WACbtJ,EAAAA,EAAAA,KAACuJ,EAAAA,EAAO,CAACnJ,UAAU,SAASoJ,KAAK,SAASzH,KAAK,KAAIhC,UACjDC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,kBAAiB9B,SAAC,kBAElCC,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAAC/E,QAnBQqG,KACvBC,EAAAA,GAAAA,GAAa,CACXC,OAAQF,EAAMG,cACdzC,QAAS,qCACT0C,aAAc,SACdC,gBAAiB,kBACjBb,SACAG,UACA,EAWuCxH,MAAM,UAAUG,KAAM,GAAIF,UAAU,qBAE5D,ECxDrB,GAA8B,4CAA9B,GAAyM,6CCWnMwB,GAASC,EAAAA,GACL,CACNzC,MAAOyC,EAAAA,KAAaC,SAAS,qBAC7BC,YAAaF,EAAAA,KAAaC,SAAS,6BAEpCA,WAiIH,GA/H6B7C,IAAkE,IAADqJ,EAAA,IAAhE,MAAEZ,EAAK,MAAE9C,EAAK,UAAEtC,EAAS,QAAEsE,EAAO,sBAAE2B,GAAuBtJ,EACvF,MAAOsD,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,GAC3BC,EAAUkC,GACTjC,IAAkBF,EAAAA,EAAAA,UAAS,CAChCrD,OAAY,OAALsI,QAAK,IAALA,OAAK,EAALA,EAAOtI,QAAS,GACvB2C,aAAkB,OAAL2F,QAAK,IAALA,OAAK,EAALA,EAAO3F,cAAe,MAE/B,SAAEa,EAAQ,MAAEC,EAAK,aAAEC,EAAcC,WAAW,OAAEC,KAAaC,EAAAA,EAAAA,IAAQ,CACvEC,UAAUC,EAAAA,EAAAA,GAAYvB,IAASe,mBAGjCS,EAAAA,EAAAA,YAAU,KAAQP,GAAO,GAAK,CAAC+B,IAE/B,MAwBMvB,EAAcA,IAAMb,GAAQ,GAGlC,OACEnE,EAAAA,EAAAA,MAAC4C,EAAAA,SAAc,CAAA3C,SAAA,EACbC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAAS5B,QAJPgC,IAAMnB,GAAQ,GAIcpC,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAmB,eAAee,SAAC,UAC9FD,EAAAA,EAAAA,MAACwF,EAAAA,EAAK,CACJvD,KAAK,KACLiC,KAAMA,EACNuB,UAAQ,EACRC,OAAQV,EACRjD,WAAWwD,EAAAA,EAAAA,GAAK,YAAa,aAAatF,SAAA,EAE1CC,EAAAA,EAAAA,KAACsF,EAAAA,EAAMG,OAAM,CAACC,aAAW,EAAA3F,UACvBD,EAAAA,EAAAA,MAACwF,EAAAA,EAAMK,MAAK,CAAC9D,UAAU,4BAA2B9B,SAAA,EAChDC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,mDAAmD7C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQC,aAAc,MAAOlE,OAAQ,oBAAqBD,WAAY,UAAWE,MAAO,UAAWkE,SAAU,OAAQC,WAAY,KAAMhG,SACtOoE,KAEHnE,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,mBAAkB9B,SAAC,2BAGvCC,EAAAA,EAAAA,KAACsF,EAAAA,EAAMU,KAAI,CAACnE,UAAU,OAAM9B,UAC1BD,EAAAA,EAAAA,MAACmG,EAAAA,EAAI,CAACC,SAAU3B,GA9CN/H,IAAU,IAADyN,EACzB,MAAM7D,EAAU,IACX5J,EACH6J,MAAOlC,EACPmC,YAAkB,OAAL6C,QAAK,IAALA,GAAkB,QAAbc,EAALd,EAAO7C,mBAAW,IAAA2D,OAAb,EAALA,EAAoBzM,KAAKyD,IAAK,CACzCwF,IAAKxF,EAAMwF,IACXC,SAAUzF,EAAMyF,SAChBC,WAAY1F,EAAM0F,WAClB3F,MAAOC,EAAMD,MACb4F,MAAO3F,EAAM2F,MACbpD,YAAavC,EAAMuC,iBAGvBO,GAAWD,GACTA,EAAOtG,KAAKvB,GACVA,EAAKoK,QAAUlC,EAAU,IAAKlI,KAASmK,GAAYnK,MAGvD6I,GAAa,IA4BgC/E,SAAA,EACrCD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAO7C,MAAO,CAAEiE,UAAW,QAASjB,SAAU,QAAUjC,SAAA,EACrED,EAAAA,EAAAA,MAACmG,EAAAA,EAAKa,MAAK,CAACjF,UAAU,OAAM9B,SAAA,EAC1BC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKc,MAAK,CAAAhH,SAAC,gBACZC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKe,QAAO,IACP3C,EAAS,SACbW,KAAK,OACLiC,YAAY,oBACZpF,UAAW,IAAG4C,EAAO5D,MAAQ,uBAAyB,MAEvD4D,EAAO5D,QAASb,EAAAA,EAAAA,KAACiG,EAAAA,EAAKiB,KAAI,CAACrF,UAAU,cAAa9B,SAAE0E,EAAO5D,MAAMsG,cAGpErH,EAAAA,EAAAA,MAACmG,EAAAA,EAAKa,MAAK,CAACjF,UAAU,OAAOuF,UAAU,+BAA8BrH,SAAA,EACnEC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKc,MAAK,CAAAhH,SAAC,4BACZC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKe,QAAO,CACX7G,GAAG,WACHkH,KAAM,EACNJ,YAAY,4BACR5C,EAAS,eACbrF,MAAO,CAAE4G,OAAQ,OAAQ0B,QAAS,OAAQC,UAAW,QACrD1F,UAAW,IAAG4C,EAAOjB,YAAc,uBAAyB,MAE7DiB,EAAOjB,cAAexD,EAAAA,EAAAA,KAACiG,EAAAA,EAAKiB,KAAI,CAACrF,UAAU,cAAa9B,SAAE0E,EAAOjB,YAAY2D,cAEhFnH,EAAAA,EAAAA,KAACwH,EAAAA,EAAS,CAACC,QAAQ,4BAA4BzI,MAAO,CAAE2C,OAAQ,sCAAuC5B,SAE9F,OAALoJ,QAAK,IAALA,GAAkB,QAAbY,EAALZ,EAAO7C,mBAAW,IAAAyD,OAAb,EAALA,EAAoBvM,KAAI,CAACyD,EAAO/D,KAC9B8C,EAAAA,EAAAA,KAACwH,EAAAA,EAAUI,KAAI,CAA8B/F,UAAU,iCAAgC9B,UACrFD,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAChG,UAAU,QAAO9B,SAAA,EACpBC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,aAAY9B,UAChCC,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,QAAS/F,UAC5C,OAALkB,QAAK,IAALA,OAAK,EAALA,EAAOD,QAAS,QAGrBhB,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAEhI,UACTC,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,QAAS/F,UAC5C,OAALkB,QAAK,IAALA,OAAK,EAALA,EAAOuC,cAAe,QAG3B1D,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,uBAAsB9B,SAAA,EAC1CD,EAAAA,EAAAA,MAAA,QAAMd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQvF,UAAW,OAAQR,SAAA,CAAC,KAClE3F,WAAgB,OAAL6G,QAAK,IAALA,OAAK,EAALA,EAAO2F,OAAOoB,QAAQ,OAEtChI,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAAC/E,QAASA,IAAM4G,EAAsB/I,EAAM0F,WAAY1F,EAAMwF,KAAM7E,MAAM,UAAUG,KAAM,GAAIF,UAAU,OAAO7C,MAAO,CAAEiD,SAAU,WAAYiI,KAAM,OAAQzI,OAAQ,oBAhB3J,GAAGvE,KAAS+D,EAAMrF,cAwB/CkE,EAAAA,EAAAA,MAACwF,EAAAA,EAAM2C,OAAM,CAACpG,UAAU,oDAAmD9B,SAAA,EACzEC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAAS5B,QA9EV8E,KACtBjE,GAAQ,EAAM,EA6E4CpC,UAAW7C,GAAmBe,UAC5EC,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAACvG,MAAM,UAAUG,KAAM,QAE/BjC,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC9CC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAAS5B,QAAS0B,EAAajD,UAAU,iBAAiB7C,MAAO,CAAEoJ,SAAU,QAASrI,SAAC,YACpGC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAACC,KAAK,SAASnD,UAAU,eAAe7C,MAAO,CAAEoJ,SAAU,QAASrI,SAAC,yBAMvE,E,wCCxIrB,MAoCA,GApCkBW,IAA8B,IAA7B,MAAEG,EAAK,MAAEwF,EAAK,MAAE8D,GAAOzJ,EACtC,MAAM0J,GAAMC,EAAAA,EAAAA,QAAO,OACZC,EAAQC,IAAWrG,EAAAA,EAAAA,WAAS,GAC7BsG,GAAcC,EAAAA,GAAAA,GAASH,EAAQC,GACrC,OACIzK,EAAAA,EAAAA,MAAC4C,EAAAA,SAAc,CAAA3C,SAAA,EACXC,EAAAA,EAAAA,KAAA,UAAQgF,KAAK,SAASnD,UAAU,yBAAyB7C,MAAO,CAAE0L,SAAU,SAAWN,IAAKA,KAASI,EAAWzK,SAAGc,KAEnHf,EAAAA,EAAAA,MAAC6K,GAAAA,EAAc,CACXC,MAAON,EAAS,OAAS,SACzBO,UAAWT,EACXU,QAASA,IAAMP,GAAQ,GACvBvH,UAAW,CAAExB,QAAS,sBAAuBvB,MAAO,SAAUF,SAAA,EAE9DD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,iCAAgC9B,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,QAAO9B,UAClBC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,KAAI9B,SAAEsG,OAEzBrG,EAAAA,EAAAA,KAAC+K,GAAAA,EAAW,CAAC3H,QAASA,IAAMmH,GAAQ,SAGxCvK,EAAAA,EAAAA,KAACwH,EAAAA,EAAS,CAACC,QAAQ,eAAezI,MAAO,CAAEgM,UAAW,QAASjL,SAElD,OAALoK,QAAK,IAALA,OAAK,EAALA,EAAO3M,KAAI,CAAChB,EAAMU,KACd4C,EAAAA,EAAAA,MAAC0H,EAAAA,EAAUI,KAAI,CAAa/F,UAAU,0CAAyC9B,SAAA,EAC3EC,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,KAAMhG,SAAM,OAAJvD,QAAI,IAAJA,OAAI,EAAJA,EAAMwE,SAC7ElB,EAAAA,EAAAA,MAAA,QAAMd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,IAAKkF,WAAY,UAAWlL,SAAA,CAAC,MAAO,OAAJvD,QAAI,IAAJA,OAAI,EAAJA,EAAMoK,QAAS,YAF7F1J,YAQxB,ECHzB,GA5B8BwD,IAA4D,IAA3D,OAAEoD,EAAM,UAAEC,EAAS,QAAEsE,EAAO,sBAAE2B,GAAuBtJ,EAChF,OACIZ,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,OAAK6B,WAAWwD,EAAAA,EAAAA,GAAK,QAASrG,IAAgBA,MAAO,CAAC,KAE9C,OAAN8E,QAAM,IAANA,OAAM,EAANA,EAAQ7J,UAAU+F,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,OAAO7C,MAAO,CAAE8G,SAAU,OAAQC,WAAY,MAAOnE,MAAO,WAAY7B,SAAC,kBAAqB,GAG3H+D,EAAOtG,KAAI,CAAC2L,EAAOjM,KAAK,IAAA+M,EAAA,OACpBnK,EAAAA,EAAAA,MAAA,OAAkC+B,WAAWwD,EAAAA,EAAAA,GAAK,kCAAmCrG,IAAqBe,SAAA,EACtGC,EAAAA,EAAAA,KAAA,OAAK6B,WAAWwD,EAAAA,EAAAA,GAAK,mDAAoDrG,IAAsBe,SACrF,OAALoJ,QAAK,IAALA,OAAK,EAALA,EAAO9C,SAEZvG,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAkC7C,MAAO,CAAEiB,MAAO,SAAUF,SAAA,EACvEC,EAAAA,EAAAA,KAACkL,GAAS,CAACrK,MAAOsI,EAAMtI,MAAOwF,MAAY,OAAL8C,QAAK,IAALA,OAAK,EAALA,EAAO9C,MAAO8D,MAAOhB,EAAM7C,eACjEtG,EAAAA,EAAAA,KAACmL,GAAoB,CAAChC,MAAOA,EAAOpF,UAAWA,EAAWsC,MAAY,OAAL8C,QAAK,IAALA,OAAK,EAALA,EAAO9C,MAAO2D,sBAAuBA,QAE1GlK,EAAAA,EAAAA,MAAA,QAAMd,MAAO,CAAEoJ,SAAU,QAASxG,MAAO,WAAY7B,SAAA,CAAC,MAAQ,OAALoJ,QAAK,IAALA,GAAkB,QAAbc,EAALd,EAAO7C,mBAAW,IAAA2D,OAAb,EAALA,EAAoBmB,QAAO,CAACC,EAAKpP,IAASoP,EAAMjR,WAAW6B,EAAK2K,QAAQ,GAAGoB,QAAQ,KAAM,WAClJhI,EAAAA,EAAAA,KAACsL,GAAW,CAAC1P,GAAIuN,EAAMvN,GAAIyK,MAAY,OAAL8C,QAAK,IAALA,OAAK,EAALA,EAAO9C,MAAOgC,QAASA,EAAStE,UAAWA,MATvE,GAAG7G,KAASiM,EAAMvN,KAUtB,KAIN,OAANkI,QAAM,IAANA,OAAM,EAANA,EAAQ7J,UAAU+F,EAAAA,EAAAA,KAAA,OAAK6B,WAAWwD,EAAAA,EAAAA,GAAK,QAASrG,OAA4B,KAC/E,ECfLuM,GAAqC7K,IAA0C,IAAzC,KAAE8K,EAAI,YAAEjO,EAAW,aAAEqD,GAAcF,EAC3E,OACIZ,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAAU4B,UAAU,kBACxC7B,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQM,UAAW,QAASR,SAAEyL,EAAO,KACzDxL,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAACyL,EAAe,CAAClO,YAAaA,EAAaqD,aAAcA,EAAc8K,aAAa,OAExF1L,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQ0L,WAAY,QAAS5L,UAC7CC,EAAAA,EAAAA,KAAA,YAAUiF,UAAQ,EAACoC,KAAM,EAAGJ,YAAY,yBAAyBjI,MAAO,CAAE0C,WAAY,cAAeC,OAAQ,iBAAkBiK,OAAQ,OAAQC,UAAW,cAAgBC,SAAUA,YAExL9L,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA2B9B,SAAA,EACtCC,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE4C,MAAO,sBAAuB7B,SAAC,OAC9CC,EAAAA,EAAAA,KAAA,SACIgF,KAAK,OACLC,UAAQ,EACRjG,MAAO,CAAEwC,QAAS,MAAOvB,MAAO,QAASyB,WAAY,cAAeE,MAAO,WAC3EX,MAAO,OACP6K,SAAUA,eAItB9L,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA2B9B,SAAA,EACtCC,EAAAA,EAAAA,KAAA,SACIgF,KAAK,OACLC,UAAQ,EACRjG,MAAO,CAAEwC,QAAS,MAAOvB,MAAO,OAAQyB,WAAY,cAAeE,MAAO,WAC1EX,MAAO,OACP6K,SAAUA,UAEdhM,EAAAA,EAAAA,MAAA,UAAQmB,MAAO,MAAOgE,UAAQ,EAACjG,MAAO,CAAE2C,OAAQ,iBAAkBD,WAAY,eAAiBoK,SAAUA,OAAU/L,SAAA,EAC/GC,EAAAA,EAAAA,KAAA,UAAQiB,MAAO,MAAMlB,SAAC,WACtBC,EAAAA,EAAAA,KAAA,UAAQiB,MAAO,MAAMlB,SAAC,WACtBC,EAAAA,EAAAA,KAAA,UAAQiB,MAAO,MAAMlB,SAAC,mBAIlCD,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAEiB,MAAO,QAASM,UAAW,OAAQqB,MAAO,sBAAuB7B,SAAA,CAAC,KAAG,WAClFC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,4BAA2B9B,UACtCC,EAAAA,EAAAA,KAAA,SACIgF,KAAK,OACLC,UAAQ,EACRjG,MAAO,CAAEwC,QAAS,MAAOvB,MAAO,OAAQyB,WAAY,cAAeE,MAAO,WAC1EX,MAAO,OACP6K,SAAUA,cAQtB9L,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,4BAA2B9B,UACtCC,EAAAA,EAAAA,KAAA,SACIgF,KAAK,OACLC,UAAQ,EACRjG,MAAO,CAAEiB,MAAO,OAAQuB,QAAS,MAAOE,WAAY,cAAeE,MAAO,WAC1EX,MAAO,QACP6K,SAAUA,cAItBhM,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAEiB,MAAO,QAASM,UAAW,OAAQqB,MAAO,sBAAuB7B,SAAA,CAAC,KAAG,WAClFC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQgC,SAAU,SAAU8J,MAAO,OAASlK,UAAU,cAAa9B,UACnFC,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAACvG,MAAM,UAAU5C,MAAO,CAAEyC,OAAQ,cAAeuK,QAAS,MAAQ5I,QAASA,aAEpF,EAIP6I,GAAiCA,KAE/BjM,EAAAA,EAAAA,KAAA,SAAAD,UACID,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,WACpBD,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQM,UAAW,QAASR,SAAC,WACjDC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAAC,gBAC/BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,SAAC,iBAC9BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAAC,UAC/BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAAC,qBAC/BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAAC,gBAC/BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAAC,gBAC/BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,SAAC,cAC9BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAAC,YAC/BC,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,eAM9BiM,GAAiCvE,IAAwJ,IAAvJ,KAAEN,EAAI,WAAE8E,EAAU,UAAEC,EAAS,WAAExI,EAAU,cAAEC,EAAa,mBAAEwI,EAAkB,aAAEC,EAAe,GAAE,YAAE/O,EAAW,uBAAEgP,EAAsB,UAAEC,GAAW7E,EA+BrL,OACI3H,EAAAA,EAAAA,KAAAS,EAAAA,SAAA,CAAAV,SACKmF,OAAOwC,QAAQL,GAAM7J,KAAI,CAAAiP,EAAgB7Q,KAAE,IAAhB6K,EAAKF,GAAOkG,EAAA,OACpCzM,EAAAA,EAAAA,KAAC0C,EAAAA,SAAc,CAAA3C,SAED,OAANwG,QAAM,IAANA,OAAM,EAANA,EAAQ/I,KAAI,CAACyD,EAAO/D,KAChB8C,EAAAA,EAAAA,KAAC0M,EAAAA,GAAS,CAACC,YAAa,OAAOlG,KAAOxF,EAAMrF,KAAiCsB,MAAOtB,EAAGmE,SACjF6M,IACE5M,EAAAA,EAAAA,KAAA,MAEIoK,IAAKwC,EAASC,YACVD,EAASE,eACb9N,MAAO,IACA4N,EAASE,eAAe9N,MAC3ByC,OAAQ,WAEZI,UAAW,mBAAkByK,EAAaS,SAAStG,GAAO,WAAa,IAAK1G,SAIxEyM,IAAc/F,GACV3G,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAQ4M,EAASI,gBAAiBhO,MAAO,CAAEiB,MAAO,QAASF,SAEzC,IAAV7C,IAAe8C,EAAAA,EAAAA,KAACiN,EAAAA,EAAY,CAACrL,MAAM,UAAU5C,MAAO,CAAEyC,OAAQ,aAGtEzB,EAAAA,EAAAA,KAACQ,EAA0B,QAI3BV,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAQ4M,EAASI,gBAAiBhO,MAAO,CAAEiB,MAAO,QAAU4B,UAAU,eAAc9B,SAElE,IAAV7C,IAAe8C,EAAAA,EAAAA,KAACiN,EAAAA,EAAY,CAACrL,MAAM,UAAU5C,MAAO,CAAEyC,OAAQ,aAGtEzB,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQM,UAAW,QAASR,UAE5CD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,sDAAqD9B,SAAA,CACrD,IAAV7C,IAAgB8C,EAAAA,EAAAA,KAAA,QAAAD,SAAOnE,EAAK,IAEzByQ,EAAmB,GAAG5F,KAAOxF,EAAM0F,eAC/B3G,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,mDAAmD7C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQC,aAAc,OAAQnE,WAAY,UAAWC,OAAQ,oBAAqBC,MAAO,UAAWkE,SAAU,OAAQoH,YAAa,OAAQnN,SACxOsM,EAAmB,GAAG5F,KAAOxF,EAAM0F,iBAGxC7G,EAAAA,EAAAA,MAAA,SAAO+B,UAAU,0BAA0B7C,MAAO,CAAEkO,YAAa,OAAQnN,SAAA,EACrEC,EAAAA,EAAAA,KAAA,SAAOgF,KAAK,WAAWmI,UAASvJ,EAAW,GAAG6C,KAAOxF,EAAMrF,MAAsBkQ,SAAWsB,GA9E/IxM,EAAC6I,EAAOxI,EAAOwF,KAChC,MAAM4G,EAAW,GAAG5G,KAAOxF,EAAMrF,KAEjCiI,GAAeyJ,IACX,GAAI7D,EAAME,OAAOwD,QAAS,CACtB,MAAMhD,EAAQ,CACVnJ,MAAOC,EAAMD,MACbwC,YAAkB,OAALvC,QAAK,IAALA,OAAK,EAALA,EAAOuC,YACpBmD,WAAiB,OAAL1F,QAAK,IAALA,OAAK,EAALA,EAAO0F,WACnBzJ,MAAY,OAAL+D,QAAK,IAALA,OAAK,EAALA,EAAO/D,MACd0J,MAAY,OAAL3F,QAAK,IAALA,OAAK,EAALA,EAAO2F,MACdH,IAAKA,EACLC,SAAe,OAALzF,QAAK,IAALA,OAAK,EAALA,EAAOyF,UAGrB,IAAI6G,EAAWD,EAASD,IAAa,GAGrC,OAFAE,EAASC,KAAKrD,GAEP,IACAmD,EACH,CAACD,GAAWE,EAEpB,CAAO,CACH,MAAME,EAAe,IAAKH,GAE1B,OADIG,EAAaJ,WAAkBI,EAAaJ,GACzCI,CACX,IACF,EAmDoK7M,CAAawM,EAAGnM,EAAOwF,MACzHzG,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,YAAY7C,MAAO,CAAE0O,IAAK,OAAQ3N,UAC9CC,EAAAA,EAAAA,KAAC2N,EAAAA,EAAK,CAAC/L,MAAM,UAAUG,KAAM,gBAOrD/B,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,SAEZ,IAAV7C,IACI8C,EAAAA,EAAAA,KAACyL,EAAe,CAAClO,YAAaA,EAAaqD,aAAc2L,EAAwB1L,MAAOI,EAAMD,MAAOF,SAAU2F,OAI3HzG,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASM,UAAW,QAASR,UAC7CC,EAAAA,EAAAA,KAAA,YAAUqH,KAAM,EAAGxF,UAAU,cAAc7C,MAAO,CAAE0C,WAAY,cAAeC,OAAQ,iBAAkBmE,SAAU,QAAU7E,MAAOA,EAAMuC,YACtIsI,SAAWsB,GAAMjB,EAAW1F,EAAKxF,EAAMrF,GAAI,cAAewR,EAAEzD,OAAO1I,OACnE2M,QAAUR,IACNA,EAAEzD,OAAO3K,MAAM4G,OAAS,OACxBwH,EAAEzD,OAAO3K,MAAM4G,OAAS,GAAGwH,EAAEzD,OAAOkE,gBAAgB,EAExDC,QAAUV,IACNA,EAAEzD,OAAO3K,MAAM4G,OAAS,OACxBwH,EAAEzD,OAAO3K,MAAM4G,OAAS,GAAGwH,EAAEzD,OAAOkE,gBAAgB,EAExDE,OAASX,IACLA,EAAEzD,OAAO3K,MAAM4G,OAAS,MAAM,EAElCxC,QAAUgK,IACNA,EAAEzD,OAAO3K,MAAM4G,OAAS,OACxBwH,EAAEzD,OAAO3K,MAAM4G,OAAS,GAAGwH,EAAEzD,OAAOkE,gBAAgB,OAIhE7N,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,4BAA2B9B,UACtCC,EAAAA,EAAAA,KAACgO,EAAAA,EAAW,CACRC,OAAO,IACPhN,MAAOA,EAAMiN,KACbC,cAAgBf,GAAMjB,EAAW1F,EAAKxF,EAAMrF,GAAI,OAAQwR,EAAEzD,OAAO1I,OACjEmN,kBAAmB,EACnBC,kBAAmB,EACnBpH,YAAY,QACZqH,QAAQ,iBACRzM,UAAU,QACV0M,WAAY,CAAEtO,MAAO,QAASuB,QAAS,MAAOE,WAAY,sBAItE1B,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA2B9B,SAAA,EACtCC,EAAAA,EAAAA,KAACgO,EAAAA,EAAW,CACR/M,MAAOA,EAAMuN,kBACbL,cAAgBf,GAAMjB,EAAW1F,EAAKxF,EAAMrF,GAAI,oBAAqBwR,EAAEzD,OAAO1I,OAC9EmN,kBAAmB,EACnBC,kBAAmB,EACnBpH,YAAY,OACZqH,QAAQ,iBACRzM,UAAU,QACV0M,WAAY,CAAEtO,MAAO,OAAQuB,QAAS,MAAOE,WAAY,kBAE7D5B,EAAAA,EAAAA,MAAA,UAAQmB,MAAOA,EAAMwN,YAAazP,MAAO,CAAE2C,OAAQ,iBAAkBD,WAAY,cAAeoE,SAAU,QAAUgG,SAAWsB,GAAMjB,EAAW1F,EAAKxF,EAAMrF,GAAI,cAAewR,EAAEzD,OAAO1I,OAAOlB,SAAA,EAC1LC,EAAAA,EAAAA,KAAA,UAAQiB,MAAO,MAAMlB,SAAC,WACtBC,EAAAA,EAAAA,KAAA,UAAQiB,MAAO,MAAMlB,SAAC,WACtBC,EAAAA,EAAAA,KAAA,UAAQiB,MAAO,MAAMlB,SAAC,mBAIlCD,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAEiB,MAAO,OAAQM,UAAW,OAAQuF,SAAU,QAAS/F,SAAA,CAAC,KAAElG,EAAAA,EAAAA,GAAUoH,EAAMyN,YAAc,YACnG1O,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,SAAUF,UAC1BC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,4BAA2B9B,UACtCC,EAAAA,EAAAA,KAACgO,EAAAA,EAAW,CACR/M,MAAOA,EAAM0N,SACbR,cAAgBf,GAAMjB,EAAW1F,EAAKxF,EAAMrF,GAAI,WAAYwR,EAAEzD,OAAO1I,OACrEmN,kBAAmB,EACnBC,kBAAmB,EACnBpH,YAAY,OACZqH,QAAQ,iBACRzM,UAAU,QACV0M,WAAY,CAAEtO,MAAO,OAAQuB,QAAS,MAAOE,WAAY,sBASrE1B,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,QAASF,UACzBC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,4BAA2B9B,UACtCC,EAAAA,EAAAA,KAACgO,EAAAA,EAAW,CACRY,OAAO,IACP3N,MAAOA,EAAM4N,SACbV,cAAgBf,GAAMjB,EAAW1F,EAAKxF,EAAMrF,GAAI,WAAYwR,EAAEzD,OAAO1I,OACrEmN,kBAAmB,EACnBC,kBAAmB,EACnBpH,YAAY,QACZqH,QAAQ,iBACRzM,UAAU,QACV0M,WAAY,CAAEtO,MAAO,OAAQuB,QAAS,MAAOE,WAAY,sBAKrE5B,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAEuB,UAAW,OAAQuF,SAAU,QAAS/F,SAAA,CAAC,MAAGlG,EAAAA,EAAAA,GAAUoH,EAAM2F,OAAS,OAChF5G,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAEiB,MAAO,OAAQgC,SAAU,SAAU8J,MAAO,OAASlK,UAAU,cAAa9B,UACnFC,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAACvG,MAAM,UAAU5C,MAAO,CAAEyC,OAAQ,WAAa2B,QAASA,IAAMgJ,EAAU3F,EAAKxF,EAAMrF,GAAIqF,EAAM0F,oBAnJlH,MAAMF,KAAOxF,EAAMrF,OAHmB,GAAG6K,KAAOxF,EAAMrF,SAH9D6K,EAoKJ,KAEtB,EA+aX,GA3amCqI,IAA0H,IAAzH,UAAEC,EAAS,WAAEC,EAAU,gBAAEC,EAAe,SAAEC,EAAQ,oBAAEC,EAAmB,UAAEC,EAAS,QAAE/G,EAAO,qBAAEgH,GAAsBP,EACnJ,MAAM,UAAE1S,IAAckM,EAAAA,EAAAA,MACfjB,EAAMiI,IAAWpL,EAAAA,EAAAA,UAAS,CAAC,IAC3BqL,EAASC,IAActL,EAAAA,EAAAA,UAAS,OAChCuL,EAAcC,IAAmBxL,EAAAA,EAAAA,UAAS,OAC1CsI,EAAWmD,IAAgBzL,EAAAA,EAAAA,UAAS,OACpC0L,EAAgBC,IAAqB3L,EAAAA,EAAAA,UAAS,KAE9CJ,EAAQC,IAAaG,EAAAA,EAAAA,UAAS,KAC9BN,EAAYC,IAAiBK,EAAAA,EAAAA,UAAS,CAAC,IACvCmI,EAAoByD,IAAyB5L,EAAAA,EAAAA,UAAS,CAAC,IAEtD1H,KAAMe,IAAgBwS,EAAAA,EAAAA,GAAS,CACnCC,SAAU,CAAC,eACXC,QAAShV,EAAAA,GACTiV,UAAW,EACXC,sBAAsB,KAElBC,UAAWC,EAAgB,KAAE7T,IAASuT,EAAAA,EAAAA,GAAS,CACnDC,SAAU,CAAC,kBAAmBT,GAC9BU,QAASA,KAAMtU,EAAAA,EAAAA,IAA4B4T,GAC3Ce,UAAWf,EACXgB,MAAO,IAkCL3P,EAAeA,CAAC4P,EAAWxP,KACzBwP,GAAWhB,EAAWgB,GACtBxP,GAAO0O,EAAgB1O,EAAM,EAG/ByP,EAAkBxU,IACpB,IAEIyU,GAFOtW,WAAW6B,EAAKiS,OAAS,IACrB9T,WAAW6B,EAAK0S,WAAa,GAGxCgC,EAASvW,WAAW6B,EAAKuS,oBAAsB,EAC1B,QAArBvS,EAAKwS,YACLiC,GAAaA,EAAWC,EAAU,IACN,QAArB1U,EAAKwS,YACZiC,GAAuB,EAAIC,EAAS,IACR,QAArB1U,EAAKwS,cACZiC,GAAYC,GAGhB,IAAI9B,EAAWzU,WAAW6B,EAAK4S,WAAa,EAG5C,OAAOzU,WAFKsW,EAAYA,EAAW7B,EAAY,KAEtB7G,QAAQ,EAAE,EAGjC4I,EAAsB3U,IACxB,IAAIiS,EAAO9T,WAAW6B,EAAKiS,OAAS,EAChCQ,EAAa,EAEbiC,EAASvW,WAAW6B,EAAKuS,oBAAsB,EASnD,MARyB,QAArBvS,EAAKwS,YACLC,EAAaR,EAAQA,GAAQyC,EAAS,KACV,QAArB1U,EAAKwS,YACZC,EAAaR,GAAQ,EAAKyC,EAAS,KACP,QAArB1U,EAAKwS,cACZC,EAAaR,EAAOyC,GAGjBvW,WAAWsU,GAAY1G,QAAQ,EAAE,EAGtCmE,EAAaA,CAAC1F,EAAK7K,EAAIoJ,EAAM/D,KAC/BqO,GAAQuB,IACgB,IACbA,EACH,CAACpK,GAAMoK,EAASpK,GAAKjJ,KAAIvB,IACrB,GAAIA,EAAKL,KAAOA,EAAI,CAChB,MAAMkV,EAAc,IAAK7U,EAAM,CAAC+I,GAAO/D,GAMvC,MALgC,QAA5B6P,EAAYrC,aAAyBqC,EAAYtC,mBAAqB,MACtEsC,EAAYtC,kBAAoB,OAEpCsC,EAAYpC,WAAakC,EAAmBE,GAC5CA,EAAYlK,MAAQ6J,EAAeK,GAC5BA,CACX,CACA,OAAO7U,CAAI,OAIrB,EAGA+N,EAAwBA,CAAC+G,EAAiBtK,KAC5C,IAAIuK,EAAc,GAAIC,EAAa,EAEnC,MAAMC,EAAgBpN,EAAOsH,QAAO,CAACvP,EAAQI,KACzC,MAAMkV,EAAqBlV,EAAKqK,YAAYtK,QACxCoV,KAAUA,EAAKzK,aAAeoK,GAAmBK,EAAK3K,MAAQA,KAGlE,GAAI0K,EAAmBlX,OAAS,EAE5B,OADIgC,EAAKL,IAAMQ,GAAW4U,EAAYxD,KAAKvR,EAAKL,IACzCC,EAGXoV,IACA,MAAM5K,GAAQzI,EAAAA,GAAAA,IAASqT,GAEvB,OADApV,EAAO2R,KAAK,IAAKvR,EAAMqK,YAAa6K,EAAoB9K,UACjDxK,CAAM,GACd,IACHkI,EAAUmN,GACV7B,GAAsBgC,GAAS,IAAI,IAAIC,IAAI,IAAID,KAASL,MAAe,EAGrE5E,EAAYA,CAAC3F,EAAK7K,EAAImV,KACxBzB,GAAQuB,IACJ,MAAMU,EAAc,IACbV,EACH,CAACpK,GAAMoK,EAASpK,GAAKzK,QAAOC,GAAQA,EAAKL,KAAOA,KAKpD,OAFgC,IAA5B2V,EAAY9K,GAAKxM,eAAqBsX,EAAY9K,GAE/C8K,CAAW,IAEtBvH,EAAsB+G,EAAiBtK,EAAI,GAG/C5B,EAAAA,EAAAA,YAAU,KACN,GAAIrI,GAAQA,EAAKvC,QAAUsV,EAAS,CAC5B/S,EAAKvC,OACLuC,EAAKgV,SAASvV,IACVA,EAAK+E,MAAQyO,EACbxT,EAAK0K,WAAa1K,EAAKL,GACvBK,EAAKiB,MAAQqS,EACbtT,EAAKyK,UAAW+K,EAAAA,EAAAA,IAAO,GACvBxV,EAAK4S,SAAWI,EAChBhT,EAAK0S,SAAWvU,WAAWA,WAAW6B,EAAK0S,WAAa,GAAG3G,QAAQ,GACnE/L,EAAKyS,WAAakC,EAAmB3U,GACrCA,EAAK2K,MAAQ6J,EAAexU,EAAK,IAGrCO,EAAKgR,KAAK,CACNxM,MAAOyO,EACP9I,WAAYnK,EAAKZ,GACjBsB,MAAOqS,EACP7I,UAAU+K,EAAAA,EAAAA,IAAO,GACjB5C,SAAUI,EACVN,SAAUvU,WAAWA,WAAWoC,EAAKmS,WAAa,GAAG3G,QAAQ,KAIrE,IAAI0J,EAAelV,EAAKR,QAAO,CAACC,EAAMiB,EAAOyU,IACzCzU,IAAUyU,EAAKC,WAAWC,GAAMA,EAAEjW,KAAOK,EAAKL,OAG9C6K,EAAM,IAAGgL,EAAAA,EAAAA,IAAO,KACpBnC,GAASuB,IAAQ,IACVA,EACH,CAAC,GAAGpK,KAAQiL,MAGhBlC,EAAW,GACf,CAEID,GAA4B,KAAb,OAAJ/S,QAAI,IAAJA,OAAI,EAAJA,EAAMvC,SACjB0O,EAAAA,GAAMG,MAAM,+BAA+B2G,IAC/C,GAED,CAACjT,EAAM+S,EAASN,EAAiBQ,IAEpC,MAAMlD,EAAyBrR,MAAO+F,EAAOD,EAAOF,KAChD,GAAKG,GAAUH,EAEf,IACI6O,EAAa7O,GACb,MAAMwF,QAAoB3K,EAAAA,EAAAA,IAA4BsF,GACtD,GAAe,OAAXqF,QAAW,IAAXA,GAAAA,EAAarM,OAAQ,CACrBqM,EAAYkL,SAASvV,IACjBA,EAAK+E,MAAQA,EACb/E,EAAK0K,WAAa1K,EAAKL,GACvBK,EAAKiB,MAAQ+D,EACbhF,EAAKyK,UAAW+K,EAAAA,EAAAA,IAAO,GACvBxV,EAAK4S,SAAWI,EAChBhT,EAAK0S,SAAWvU,WAAWA,WAAW6B,EAAK0S,WAAa,GAAG3G,QAAQ,GACnE/L,EAAKyS,WAAakC,EAAmB3U,GACrCA,EAAK2K,MAAQ6J,EAAexU,EAAK,IAGrC,IAAIyV,EAAepL,EAAYtK,QAAO,CAACC,EAAMiB,EAAOyU,IAChDzU,IAAUyU,EAAKC,WAAWC,GAAMA,EAAEjW,KAAOK,EAAKL,OAGlD0T,GAASuB,IAAQ,IACVA,EACH,CAAC,GAAG/P,KAAa4Q,KAGzB,MACI/I,EAAAA,GAAMG,MAAM,+BAA+B9H,IAEnD,CAAE,MAAO8H,GACLC,QAAQD,MAAM,mCAAoCA,EACtD,CAAC,QACG6G,EAAa,KACjB,GAiJJ,OAtGA9K,EAAAA,EAAAA,YAAU,KACN,MAAMiN,EAzCgBC,KAAa,IAAD5L,EAClC,IAAI6L,EAAS,EACTtB,EAAW,EAEI,QAAnBvK,EAAAjB,OAAOqB,OAAOc,UAAK,IAAAlB,GAAnBA,EAAqBqL,SAAQS,IACX,OAAdA,QAAc,IAAdA,GAAAA,EAAgBT,SAAQvV,IACpB,IAAIiW,EAAO9X,WAAW6B,EAAKiS,OAAS,EAChCS,EAAWvU,WAAW6B,EAAK0S,WAAa,EAE5CqD,GAAU5X,WADC8X,EAAOvD,GACW,GAC7B+B,GAAYtW,WAAW6B,EAAK2K,OAAS,EAAE,GACzC,IAGN,IAAIuL,EAAM,EACNvL,EAAQ,EAEI,OAAZmL,GACAI,EAAiB,GAAXzB,EACN9J,EAAQ8J,EAAWyB,GACA,OAAZJ,GACPnL,EAAQ8J,EACRyB,EAAc,GAARvL,EAAe,IACrB8J,EAAW9J,EAAQuL,GACA,OAAZJ,IACPI,EAAM,EACNvL,EAAQ8J,GAGZ,MAAM0B,EAAoB1B,EAAWsB,EAErC,MAAO,CACHA,OAAQ5X,WAAW4X,GAAU,GAAMhK,QAAQ,GAC3CoK,kBAAmBhY,WAAWgY,GAAmBpK,QAAQ,GACzD0I,SAAUtW,WAAWsW,GAAU1I,QAAQ,GACvCmK,IAAK/X,WAAW+X,GAAKnK,QAAQ,GAC7BpB,MAAOxM,WAAWwM,GAAOoB,QAAQ,GACpC,EAIeqK,CAAiBnD,GACjCH,EAAU+C,GAEV,MAAMQ,EAAepN,OAAOwC,QAAQL,GAAMkL,SAAQ,CAAAC,EAAeC,KAAiB,IAA9BhM,EAAK0D,GAAMqI,EAC3D,OAAOrI,EAAM3M,KAAKvB,IACd,MAAM,GAAEL,KAAO8W,GAASzW,EACxB,MAAO,IACAyW,EACHxE,KAAM9T,WAAWsY,EAAKxE,MAAQ,GAAMlG,QAAQ,GAC5CwG,kBAAmBpU,WAAWsY,EAAKlE,mBAAqB,GAAMxG,QAAQ,GACtE0G,WAAYtU,WAAWsY,EAAKhE,YAAc,GAAM1G,QAAQ,GACxD2G,SAAUvU,WAAWsY,EAAK/D,UAAY,GAAM3G,QAAQ,GACpD6G,SAAUzU,WAAWsY,EAAK7D,UAAY,GAAM7G,QAAQ,GACpDrK,MAAO8U,EAAc,EACxB,GACH,IAENzD,GAAYnI,IAAM,IAAWA,EAAQ8L,QAASb,EAAQlL,OAAS,GAAI0L,kBAAgB,GACpF,CAACjL,EAAM6H,KAEVrK,EAAAA,EAAAA,YAAU,KACNgL,EAAkBT,EAAU,GAC7B,CAACA,KAEJvK,EAAAA,EAAAA,YAAU,KACN,GAAwB,OAAnBsK,QAAmB,IAAnBA,IAAAA,EAAqBlV,QAAsB,OAAXsD,QAAW,IAAXA,IAAAA,EAAatD,OAAQ,OAG1D,MAAM2Y,EAAcrV,EAAY6N,QAAO,CAAC5N,EAAK8E,KACzCA,EAAWK,WAAW6O,SAAQqB,IAC1BrV,EAAIqV,EAASjX,IAAMiX,EAAShQ,IAAI,IAE7BrF,IACR,CAAC,GAGJ2R,EAAoBqC,SAAQvV,IACnBA,EAAKyK,WAAUzK,EAAKyK,UAAW+K,EAAAA,EAAAA,IAAO,GAAE,IAIjD,MAAMqB,EAAc3D,EAAoB/D,QAAO,CAAC2H,EAAGC,KAAiC,IAA/B,MAAErV,EAAK,MAAET,KAAUjB,GAAM+W,EAC1ED,EAAIpV,GAASoV,EAAIpV,IAAU,GAC3B,IAAI+Q,EAAazS,EAAKyS,WAOtB,MANmB,SAAfA,GAA0BA,EAEnBA,IACPA,EAAakC,EAAmB3U,IAFhCyS,EAAakC,EAAmB3U,GAIpC8W,EAAIpV,GAAO6P,KAAK,IAAKvR,EAAMyS,aAAY1N,MAAO4R,EAAY1V,IAAU,UAAWA,UACxE6V,CAAG,GACX,CAAC,GAEEE,EAAkB/N,OAAOC,KAAK2N,GAAa1H,QAAO,CAAC2H,EAAKpV,KAE1DoV,GADYtB,EAAAA,EAAAA,IAAO,IACRqB,EAAYnV,GAChBoV,IACR,CAAC,GAGEG,EAAmB,CAAC,EAC1BhO,OAAOwC,QAAQuL,GAAiBzB,SAAQ2B,IAAmB,IAAjB1M,EAAK0D,GAAMgJ,EACjDhJ,EAAMqH,SAAQvV,IACViX,EAAiBjX,EAAKL,IAAM6K,CAAG,GACjC,IAIN,MAAM2M,EAAoBxD,EAAepS,KAAI,CAAC2L,EAAOjM,KAAW,IAAD+M,EAC3D,MAAM5D,GAAQzI,EAAAA,GAAAA,IAASV,EAAQ,GAEzBoJ,EAAmB,OAAL6C,QAAK,IAALA,GAAkB,QAAbc,EAALd,EAAO7C,mBAAW,IAAA2D,OAAb,EAALA,EAAoBzM,KAAI6V,IACxC,MAAMC,EAAWnE,EAAoBoE,MAAK/W,GAAQA,EAAKZ,KAAOyX,EAAI1M,aAC5DF,EAAMyM,EAAyB,OAARI,QAAQ,IAARA,OAAQ,EAARA,EAAU1X,IACvC,MAAO,CAAEoF,MAAO4R,EAAoB,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUpW,OAAQsG,YAAqB,OAAR8P,QAAQ,IAARA,OAAQ,EAARA,EAAU9P,YAAaoD,MAAe,OAAR0M,QAAQ,IAARA,OAAQ,EAARA,EAAU1M,MAAOD,WAAoB,OAAR2M,QAAQ,IAARA,OAAQ,EAARA,EAAU3M,WAAYF,MAAKC,SAAkB,OAAR4M,QAAQ,IAARA,OAAQ,EAARA,EAAU5M,SAAU,IAGnL,MAAO,IAAKyC,EAAO9C,QAAOC,cAAa,IAG3CgJ,EAAQ2D,GACRlP,EAAUqP,EAAkB,GAE7B,CAACjE,EAAqBS,EAAgBrS,KAEzCsH,EAAAA,EAAAA,YAAU,KACN,GAAe,OAAXtH,QAAW,IAAXA,GAAAA,EAAatD,OAAQ,CACrB,MAAMuZ,EAAc,CAAC,EACf,OAAN1P,QAAM,IAANA,GAAAA,EAAQ0N,SAAQ,CAACrI,EAAOjM,KAAW,IAAD6M,EAC9B,MAAM1D,GAAQzI,EAAAA,GAAAA,IAASV,EAAQ,GAC1B,OAALiM,QAAK,IAALA,GAAkB,QAAbY,EAALZ,EAAO7C,mBAAW,IAAAyD,GAAlBA,EAAoByH,SAAQ6B,IACxBG,EAAY,GAAGH,EAAI5M,OAAO4M,EAAI1M,cAAgBN,CAAK,GACrD,IAGNyJ,EAAsB0D,GACtBxE,GAAYnI,IAAM,IAAWA,EAAQ/C,YACzC,IACD,CAACA,KAIAhE,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,OAAO7C,MAAO,CAAEyU,UAAW,OAAQxT,MAAO,QAASF,UAC9DC,EAAAA,EAAAA,KAAC0T,EAAAA,GAAe,CAACC,UAlWV9X,IACf,MAAM,OAAE+X,EAAM,YAAEC,GAAgBhY,EAGhC,IAAKgY,EACD,OAGJ,MAAM1O,EAAOD,OAAOC,KAAKkC,GACnByM,EAAY3O,EAAKyO,EAAO1W,OACxB6W,EAAiB5O,EAAK0O,EAAY3W,OAExC,IAAK4W,IAAcC,EAEf,YADAhL,QAAQD,MAAM,sCAKlB,MAAMkL,EAAgBlY,MAAMmY,KAAK9O,IAC1B+O,GAAcF,EAAcG,OAAOP,EAAO1W,MAAO,GACxD8W,EAAcG,OAAON,EAAY3W,MAAO,EAAGgX,GAG3C,MAAME,EAAgBJ,EAAc5I,QAAO,CAAC2H,EAAKtM,KAC7CsM,EAAItM,GAAOY,EAAKZ,GACTsM,IACR,CAAC,GAEJzD,EAAQ8E,EAAc,EAsUwBrU,UAClCD,EAAAA,EAAAA,MAAA,SAAO+B,UAAU,+BAA8B9B,SAAA,EAC3CC,EAAAA,EAAAA,KAACiM,GAA8B,KAC/BjM,EAAAA,EAAAA,KAACqU,EAAAA,GAAS,CAACC,YAAY,uBAAsBvU,SACvC6M,IACE9M,EAAAA,EAAAA,MAAA,YAAW8M,EAAS2H,eAAgBnK,IAAKwC,EAASC,SAAS9M,SAAA,EACvDC,EAAAA,EAAAA,KAACkM,GAA8B,CAC3B7E,KAAMA,EACN8E,WAAYA,EACZC,UAAWA,EACX6C,gBAAiBA,EACjBrL,WAAYA,EACZC,cAAeA,EACfwI,mBAAoBA,EACpBC,aAAcpH,OAAOC,KAAKvB,GAE1B4I,UAAWA,EACXjP,YAAaA,EACbgP,uBAAwBA,IAGxB8D,IAAoBrQ,EAAAA,EAAAA,KAACH,EAA8B,KAGvDG,EAAAA,EAAAA,KAACuL,GAAkC,CAACC,KAAMtG,OAAOC,KAAKkC,GAAQ,CAAC,GAAGpN,OAAQsD,YAAaA,EAAaqD,aAAcA,IACjHgM,EAAS3F,yBAOlCnH,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gBAAgB7C,MAAO,CAAEgM,UAAW,OAAQzK,UAAW,QAASR,SAAA,EAC3EC,EAAAA,EAAAA,KAACwU,GAAsB,CAACpY,UAAWA,EAAWwH,WAAYA,EACtDC,cAAeA,EAAeC,OAAQA,EAAQC,UAAWA,EACzDiL,WAAYA,EAAY3G,QAASA,EAASwH,kBAAmBA,KAEjE7P,EAAAA,EAAAA,KAACyU,GAAqB,CAACrY,UAAWA,EAAW0H,OAAQA,EACjDC,UAAWA,EACXsE,QAASA,EACT2B,sBAAuBA,SAIhC,E,uFCptBX,MAqOA,GArOwBtJ,IAAsC,IAADgU,EAAAC,EAAAC,EAAAC,EAAA,IAApC,UAAEzE,EAAS,KAAE5T,EAAI,WAAEwS,GAAYtO,EACpD,MAAOoU,EAAcC,IAAmB7Q,EAAAA,EAAAA,UAAS,OAC1C8Q,EAAeC,IAAoB/Q,EAAAA,EAAAA,UAAS,OAC5CgR,EAAQC,IAAajR,EAAAA,EAAAA,WAAS,GAE/BkR,GAAc/K,EAAAA,EAAAA,QAAO,MACrBgL,GAAchL,EAAAA,EAAAA,QAAO,OACpBiL,EAASC,IAAcrR,EAAAA,EAAAA,UAAS,KAChCsR,EAAMC,IAAWvR,EAAAA,EAAAA,UAAS,IAC1BwR,EAAaC,IAAkBzR,EAAAA,EAAAA,WAAS,IACxC0R,EAASC,IAAc3R,EAAAA,EAAAA,WAAS,IAChC4R,EAAYC,EAAgBC,IAAiBC,EAAAA,GAAAA,IAAY,GAAI,KAG9DC,EAAc1Z,EAAK2Z,UAAU5C,MAAK6C,GAAWA,EAAQC,YAA2B,QAAd3B,EAAAlY,EAAK2Z,iBAAS,IAAAzB,GAAdA,EAAgBza,OAASuC,EAAK2Z,UAAU,GAAK,CAAC,GAChHG,EAAc9Z,EAAK+Z,gBAAgBhD,MAAKiD,GAAWA,EAAQH,YAAiC,QAApB1B,EAAAnY,EAAK+Z,uBAAe,IAAA5B,GAApBA,EAAsB1a,OAASuC,EAAK+Z,gBAAgB,GAAK,CAAC,GAElIE,GAAc1G,EAAAA,EAAAA,GAAS,CACzBC,SAAU,CAAC,KAAM8E,GACjB7E,QAASA,KAAMyG,EAAAA,GAAAA,IAAc5B,GAC7BxE,UAAWwE,EACXvE,MAAO,IAELoG,EAA6B,QAAnB/B,EAAG6B,EAAYja,YAAI,IAAAoY,OAAA,EAAhBA,EAAkBgC,YAE/BC,GAAiC,QAAhBhC,EAAA4B,EAAYja,YAAI,IAAAqY,OAAA,EAAhBA,EAAkB0B,kBAAmB,IAE5D1R,EAAAA,EAAAA,YAAU,KACN4Q,EAAQ,EAAE,GACX,CAACM,KAEJlR,EAAAA,EAAAA,YAAU,KACW3J,WACb2a,GAAW,GACX,MAAMrZ,QAAasa,EAAAA,GAAAA,IAAiBtB,EAtB9B,GAsB2CO,GAE3C,IAADgB,EADQ,IAATvB,EAAYD,EAAW/Y,EAAKwa,UAEpB,OAAJxa,QAAI,IAAJA,GAAa,QAATua,EAAJva,EAAMwa,eAAO,IAAAD,OAAT,EAAJA,EAAe9c,QAAS,GACxBsb,GAAWlE,IACP,MAAM4F,EAAoB,IAAI3F,IAAID,EAAK7T,KAAI0Z,GAAUA,EAAOtb,MACtDub,EAAa3a,EAAKwa,QAAQhb,QAAOkb,IAAWD,EAAkBG,IAAIF,EAAOtb,MAC/E,MAAO,IAAIyV,KAAS8F,EAAW,IAI3CxB,EAAenZ,EAAK6a,QAAU/B,EAAQrb,QACtC4b,GAAW,EAAM,EAGrByB,EAAU,GACX,CAAC9B,EAAMO,IAGV,MAAMwB,EAAgBA,KAClB,MAAMC,EAAUC,SAASC,cAAc,iDAEnCF,IAAYpC,EAAYuC,UACxBvC,EAAYuC,QAAU,IAAIC,sBAAqBlQ,IACvCA,EAAQ,GAAGmQ,gBACXpC,GAAQqC,GAAYA,EAAW,GACnC,GACD,CAAEC,UAAW,IAChB3C,EAAYuC,QAAQK,QAAQR,GAChC,GAGJ3S,EAAAA,EAAAA,YAAU,KACN,IAAKqQ,IAAWI,EAAQrb,SAAWyb,IAAgBL,EAAYsC,QAAS,OAGxE,MAAMM,EAAUC,WAAWX,EAAe,KAE1C,MAAO,KACHY,aAAaF,GACT7C,EAAYuC,UACZvC,EAAYuC,QAAQS,aACpBhD,EAAYuC,QAAU,KAC1B,CACH,GACF,CAACrC,EAASI,EAAaR,IA6C1B,OACIlV,EAAAA,EAAAA,KAAAS,EAAAA,SAAA,CAAAV,UACID,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,CACCmV,GACGpV,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACID,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAG/I,MAAO,CAAEqZ,UAAW,SAAUtY,SAAA,EACtCD,EAAAA,EAAAA,MAAA,KAAGd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAA,CAAC,WAAOC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAC5HC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLnO,IAAKiL,EACLpU,MAAO6T,EACPc,QAASA,EACT9J,SAAWsB,GAAM2H,EAAgB3H,EAAEnM,OACnC3E,QAASgZ,EACTkD,aAjCEC,IAEtB3Y,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC5CC,EAAAA,EAAAA,KAAC0Y,GAAAA,GAAW,CAACC,UAAWF,EAAOE,UAAWC,MAAOH,EAAOG,MAAOhC,YAAa6B,EAAO7B,eACnF5W,EAAAA,EAAAA,KAAA,OAAAD,SAAM0Y,EAAO5V,UA8BGgW,cAAe/D,GAzBX2D,KAC5B,GAAU,OAANA,QAAM,IAANA,GAAAA,EAAQ5V,KACR,OACI/C,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC5CC,EAAAA,EAAAA,KAAC0Y,GAAAA,GAAW,CAACC,UAAiB,OAANF,QAAM,IAANA,OAAM,EAANA,EAAQE,UAAWC,MAAa,OAANH,QAAM,IAANA,OAAM,EAANA,EAAQG,MAAOhC,YAAmB,OAAN6B,QAAM,IAANA,OAAM,EAANA,EAAQ7B,eACtF5W,EAAAA,EAAAA,KAAA,OAAAD,SAAY,OAAN0Y,QAAM,IAANA,OAAM,EAANA,EAAQ5V,SAG1B,GAkBwBiW,YAAY,OACZC,YAAY,KACZ9R,YAAY,gBACZjL,QAAM,EACNgd,eA9DLA,KAEflZ,EAAAA,EAAAA,MAACmZ,GAAAA,EAAS,CAACC,aAAa,OAAMnZ,SAAA,EAC1BC,EAAAA,EAAAA,KAACmZ,GAAAA,EAAS,CAAApZ,UAACC,EAAAA,EAAAA,KAACoZ,GAAAA,EAAM,CAACvX,UAAU,YAC7B7B,EAAAA,EAAAA,KAACqZ,GAAAA,EAAS,CACNrU,KAAK,OACL/D,MAAO6U,EACPhK,SAAWsB,GAAM4I,EAAc5I,EAAEzD,OAAO1I,OACxCY,UAAU,0BACVoF,YAAY,iBACZjI,MAAO,CAAEiB,MAAO,aAqDJqZ,uBAAwB,CAAEC,SAAU,GAAIC,MAAM,EAAMC,WAAYlC,GAChE1V,UAAU,QACV6X,sBAAsB,OAG7B/C,IACG7W,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAG/I,MAAO,CAAEqZ,UAAW,SAAUtY,SAAA,EACtCC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAC,kBAC1FC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLtX,MAAO+T,EACPlJ,SAAWsB,GAAM6H,EAAiB7H,EAAEnM,OACpC3E,QAASua,EACTiC,YAAcL,GAAW,GAAGA,EAAOkB,aAAalB,EAAOmB,WACvDb,YAAY,KACZ9R,YAAY,iBACZjL,QAAM,EACN4Z,QAASa,EAAYrG,UACrBvO,UAAU,QACV6X,sBAAsB,WAMtC5Z,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAEhI,SACNqQ,GACGtQ,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,gBAI5G9F,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAC,aAC1FC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAM,OAAJvD,QAAI,IAAJA,OAAI,EAAJA,EAAMqG,OAAQ,OACzG/C,EAAAA,EAAAA,MAAA,KAAGd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAA,CAAC,SAAU,OAAJvD,QAAI,IAAJA,OAAI,EAAJA,EAAMqd,MAAO,QAC7G7Z,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAM,OAAJvD,QAAI,IAAJA,OAAI,EAAJA,EAAMsd,QAAS,OAC1G9Z,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXmW,QAAW,IAAXA,OAAW,EAAXA,EAAaE,UAAW,YAI/HtW,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAEhI,SAAA,EACPC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAC,kBAC1FC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAE,IAAc,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAaqD,YAAa,QAAkB,OAAXrD,QAAW,IAAXA,OAAW,EAAXA,EAAasD,WAAY,SACxJ5Z,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAarU,WAAY,OACpHjC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAawD,QAAS,OACjH9Z,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAayD,QAAS,aAK7H/Z,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAGhI,SACPmV,GACGpV,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAQ9B,SAAA,EACnBC,EAAAA,EAAAA,KAAA,UAAQoD,QAjHP4W,KACrB,IAAKlF,EAAc,OAAOnM,EAAAA,GAAMG,MAAM,0BACtCkG,GAAYqC,IAAI,IAAWA,EAAM6F,OAAQpC,EAAcmF,eAAgBjF,MACvEG,GAAU,EAAM,EA8GuCtT,UAAU,WAAW7C,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,UAG1HC,EAAAA,EAAAA,KAAA,UAAQoD,QAASA,IAAM+R,GAAWD,GAASrT,UAAU,WAAW7C,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,eAKtIC,EAAAA,EAAAA,KAAA,UAAQoD,QAASA,IAAM+R,GAAWD,GAASrT,UAAU,UAAU7C,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,oBAM9I,ECPX,GA1NsBW,IAAsC,IAADiU,EAAAuF,EAAAtF,EAAAC,EAAA,IAApC,UAAEzE,EAAS,KAAE5T,EAAI,WAAEwS,GAAYtO,EAClD,MAAOoU,EAAcC,IAAmB7Q,EAAAA,EAAAA,UAAS,OAC1C8Q,EAAeC,IAAoB/Q,EAAAA,EAAAA,UAAS,OAC5CgR,EAAQC,IAAajR,EAAAA,EAAAA,WAAS,GAE/BkR,GAAc/K,EAAAA,EAAAA,QAAO,MACrBgL,GAAchL,EAAAA,EAAAA,QAAO,OACpBiL,EAASC,IAAcrR,EAAAA,EAAAA,UAAS,KAChCsR,EAAMC,IAAWvR,EAAAA,EAAAA,UAAS,IAC1BwR,EAAaC,IAAkBzR,EAAAA,EAAAA,WAAS,IACxC0R,EAASC,IAAc3R,EAAAA,EAAAA,WAAS,IAChC4R,EAAYC,EAAgBC,IAAiBC,EAAAA,GAAAA,IAAY,GAAI,KAG9DK,GAAkB,OAAJ9Z,QAAI,IAAJA,GAAqB,QAAjBmY,EAAJnY,EAAM+Z,uBAAe,IAAA5B,OAAjB,EAAJA,EAAuBpB,MAAKiD,GAAWA,EAAQH,aAAiB,OAAJ7Z,QAAI,IAAJA,GAAqB,QAAjB0d,EAAJ1d,EAAM+Z,uBAAe,IAAA2D,GAArBA,EAAuBjgB,OAAa,OAAJuC,QAAI,IAAJA,OAAI,EAAJA,EAAM+Z,gBAAgB,GAAK,CAAC,GAEtIE,GAAc1G,EAAAA,EAAAA,GAAS,CACzBC,SAAU,CAAC,KAAM8E,GACjB7E,QAASA,KAAMyG,EAAAA,GAAAA,IAAc5B,GAC7BxE,UAAWwE,EACXvE,MAAO,IAGLsG,GAAiC,QAAhBjC,EAAA6B,EAAYja,YAAI,IAAAoY,OAAA,EAAhBA,EAAkB2B,kBAAmB,GACtDI,EAA6B,QAAnB9B,EAAG4B,EAAYja,YAAI,IAAAqY,OAAA,EAAhBA,EAAkB+B,aAErC/R,EAAAA,EAAAA,YAAU,KACN4Q,EAAQ,EAAE,GACX,CAACM,KAEJlR,EAAAA,EAAAA,YAAU,KACW3J,WACb2a,GAAW,GACX,MAAMrZ,QAAasa,EAAAA,GAAAA,IAAiBtB,EArB9B,GAqB2CO,GAE3C,IAADgB,EADQ,IAATvB,EAAYD,EAAW/Y,EAAKwa,UAEpB,OAAJxa,QAAI,IAAJA,GAAa,QAATua,EAAJva,EAAMwa,eAAO,IAAAD,OAAT,EAAJA,EAAe9c,QAAS,GACxBsb,GAAWlE,IACP,MAAM4F,EAAoB,IAAI3F,IAAID,EAAK7T,KAAI0Z,GAAUA,EAAOtb,MACtDub,EAAa3a,EAAKwa,QAAQhb,QAAOkb,IAAWD,EAAkBG,IAAIF,EAAOtb,MAC/E,MAAO,IAAIyV,KAAS8F,EAAW,IAI3CxB,EAAenZ,EAAK6a,QAAU/B,EAAQrb,QACtC4b,GAAW,EAAM,EAGrByB,EAAU,GACX,CAAC9B,EAAMO,IAGV,MAAMwB,EAAgBA,KAClB,MAAMC,EAAUC,SAASC,cAAc,iDAEnCF,IAAYpC,EAAYuC,UACxBvC,EAAYuC,QAAU,IAAIC,sBAAqBlQ,IACvCA,EAAQ,GAAGmQ,gBACXpC,GAAQqC,GAAYA,EAAW,GACnC,GACD,CAAEC,UAAW,IAChB3C,EAAYuC,QAAQK,QAAQR,GAChC,GAGJ3S,EAAAA,EAAAA,YAAU,KACN,IAAKqQ,IAAWI,EAAQrb,SAAWyb,IAAgBL,EAAYsC,QAAS,OAGxE,MAAMM,EAAUC,WAAWX,EAAe,KAE1C,MAAO,KACHY,aAAaF,GACT7C,EAAYuC,UACZvC,EAAYuC,QAAQS,aACpBhD,EAAYuC,QAAU,KAC1B,CACH,GACF,CAACrC,EAASI,EAAaR,IA6C1B,OACIpV,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,CACCmV,GACGpV,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACID,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAG/I,MAAO,CAAEqZ,UAAW,SAAUtY,SAAA,EACtCD,EAAAA,EAAAA,MAAA,KAAGd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAA,CAAC,WAAOC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAC5HC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLnO,IAAKiL,EACLpU,MAAO6T,EACPc,QAASA,EACT9J,SAAWsB,GAAM2H,EAAgB3H,EAAEnM,OACnC3E,QAASgZ,EACTkD,aAhCMC,IAEtB3Y,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC5CC,EAAAA,EAAAA,KAAC0Y,GAAAA,GAAW,CAACC,UAAWF,EAAOE,UAAWC,MAAOH,EAAOG,MAAOhC,YAAa6B,EAAO7B,eACnF5W,EAAAA,EAAAA,KAAA,OAAAD,SAAM0Y,EAAO5V,UA6BDgW,cAAe/D,GAxBP2D,KAC5B,GAAU,OAANA,QAAM,IAANA,GAAAA,EAAQ5V,KACR,OACI/C,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC5CC,EAAAA,EAAAA,KAAC0Y,GAAAA,GAAW,CAACC,UAAiB,OAANF,QAAM,IAANA,OAAM,EAANA,EAAQE,UAAWC,MAAa,OAANH,QAAM,IAANA,OAAM,EAANA,EAAQG,MAAOhC,YAAmB,OAAN6B,QAAM,IAANA,OAAM,EAANA,EAAQ7B,eACtF5W,EAAAA,EAAAA,KAAA,OAAAD,SAAY,OAAN0Y,QAAM,IAANA,OAAM,EAANA,EAAQ5V,SAG1B,GAiBoBiW,YAAY,OACZC,YAAY,KACZ9R,YAAY,gBACZjL,QAAM,EACNgd,eA7DDA,KAEflZ,EAAAA,EAAAA,MAACmZ,GAAAA,EAAS,CAACC,aAAa,OAAMnZ,SAAA,EAC1BC,EAAAA,EAAAA,KAACmZ,GAAAA,EAAS,CAAApZ,UAACC,EAAAA,EAAAA,KAACoZ,GAAAA,EAAM,CAACvX,UAAU,YAC7B7B,EAAAA,EAAAA,KAACqZ,GAAAA,EAAS,CACNrU,KAAK,OACL/D,MAAO6U,EACPhK,SAAWsB,GAAM4I,EAAc5I,EAAEzD,OAAO1I,OACxCY,UAAU,0BACVoF,YAAY,iBACZjI,MAAO,CAAEiB,MAAO,aAoDRqZ,uBAAwB,CAAEC,SAAU,GAAIC,MAAM,EAAMC,WAAYlC,GAChE1V,UAAU,QACV6X,sBAAsB,OAI1B/C,IACA7W,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAG/I,MAAO,CAAEqZ,UAAW,SAAUtY,SAAA,EACtCC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAC,kBAC1FC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLtX,MAAO+T,EACPlJ,SAAWsB,GAAM6H,EAAiB7H,EAAEnM,OACpC3E,QAASua,EACTiC,YAAcL,GAAW,GAAGA,EAAOkB,aAAalB,EAAOmB,WACvDb,YAAY,KACZ9R,YAAY,iBACZjL,QAAM,EACN4Z,QAASa,EAAYrG,UACrBvO,UAAU,QACV6X,sBAAsB,WAMtC1Z,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAGhI,SACPqQ,GACGtQ,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAExG5F,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAOyB,UAAU,YAAW9B,UACtDC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,gBAI5G9F,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACIC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAC,kBAC1FC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,SAAE,IAAc,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAaqD,YAAa,QAAkB,OAAXrD,QAAW,IAAXA,OAAW,EAAXA,EAAasD,WAAY,SACxJ5Z,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAarU,WAAY,OACpHjC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAawD,QAAS,OACjH9Z,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQvY,UAAa,OAAXuW,QAAW,IAAXA,OAAW,EAAXA,EAAayD,QAAS,YAMjI/Z,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAGhI,SACPmV,GACGpV,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAQ9B,SAAA,EACnBC,EAAAA,EAAAA,KAAA,UAAQoD,QAxGH4W,KACrB,IAAKlF,EAAc,OAAOnM,EAAAA,GAAMG,MAAM,0BACtCkG,GAAYqC,IAAI,IAAWA,EAAM6F,OAAQpC,EAAcmF,eAAgBjF,MACvEG,GAAU,EAAM,EAqGmCtT,UAAU,WAAW7C,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,UAG1HC,EAAAA,EAAAA,KAAA,UAAQoD,QAASA,IAAM+R,GAAWD,GAASrT,UAAU,WAAW7C,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,eAKtIC,EAAAA,EAAAA,KAAA,UAAQoD,QAASA,IAAM+R,GAAWD,GAASrT,UAAU,UAAU7C,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,kBAKvI,EChNd,GAjB0BW,IAA0D,IAAzD,MAAEM,EAAK,KAAE6B,EAAI,MAAE5B,EAAK,QAAEkM,EAAO,SAAErB,EAAQ,SAAE7G,GAAUvE,EAC5E,OACEZ,EAAAA,EAAAA,MAAA,SAAO+B,UAAW,wBAAuBoD,EAAW,WAAa,IAAKlF,SAAA,EACpEC,EAAAA,EAAAA,KAAA,SACEgF,KAAK,QACLnC,KAAMA,EACN5B,MAAOA,EACPkM,QAASA,EACTrB,SAAUA,EACV7G,SAAUA,KAEZjF,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,mCACfb,IACK,ECGNmZ,GAAgBC,IAElBpa,EAAAA,EAAAA,KAACqa,EAAAA,EAAWC,OAAM,IAAKF,EAAKra,UAC1BD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA2B9B,SAAA,EACxCC,EAAAA,EAAAA,KAAC0Y,GAAAA,GAAW,CAACC,UAAgB,OAALyB,QAAK,IAALA,OAAK,EAALA,EAAO5d,KAAKmc,UAAWC,MAAOwB,EAAM5d,KAAK+d,MAAO3D,aAAa,IACpFwD,EAAM5d,KAAKwE,WA2fpB,GArfwB0B,EAAAA,MAAWhC,IAA2I,IAAD8Z,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAAzI,QAAEhV,EAAO,WAAE4I,EAAU,UAAED,EAAS,QAAE1G,EAAO,oBAAE8G,EAAmB,eAAES,EAAc,qBAAEP,EAAoB,kBAAEgM,EAAiB,UAAEC,GAAW5a,EACtK,MAAO6a,EAAmBC,IAAwBtX,EAAAA,EAAAA,UAAS,YACpDuX,EAAkBC,IAAuBxX,EAAAA,EAAAA,UAAS,KAClDyX,EAAiBC,IAAsB1X,EAAAA,EAAAA,UAAS,KAChD2X,EAAoBC,IAAyB5X,EAAAA,EAAAA,WAAS,IACtD6X,EAAmBC,IAAwB9X,EAAAA,EAAAA,UAAS,KACpD+X,EAAsBC,KAA2BhY,EAAAA,EAAAA,WAAS,IAC1DiY,GAAYC,KAAiBlY,EAAAA,EAAAA,UAAS,IAWvCmY,GAAoBjP,IACxBwO,EAAmBxO,EAAEzD,OAAO1I,OAC5B+a,EAAqB5O,EAAEzD,OAAO1I,MAAM,EAahCqb,IAAsBvM,EAAAA,EAAAA,GAAS,CAAEC,SAAU,CAAC,mBAAoBC,QAASsM,GAAAA,KACzE9F,IAAc1G,EAAAA,EAAAA,GAAS,CAC3BC,SAAU,CAAC,KAAM5J,EAAQ8Q,QACzBjH,QAASA,KAAMyG,EAAAA,GAAAA,IAActQ,EAAQ8Q,QACrC5G,UAAWlK,EAAQ8Q,OACnB3G,MAAO,IAiET,OA9DA1L,EAAAA,EAAAA,YAAU,KAAO,IAAD+P,EAAA4H,EACd,GAAoB,QAApB5H,EAAI6B,GAAYja,YAAI,IAAAoY,GAAiB,QAAjB4H,EAAhB5H,EAAkB2B,uBAAe,IAAAiG,GAAjCA,EAAmCviB,OAAQ,CAAC,IAAD4a,EAAA4H,EAAAC,EAC7C,IAAIC,EAAyB,QAAnB9H,EAAG4B,GAAYja,YAAI,IAAAqY,OAAA,EAAhBA,EAAkB0B,gBAAgB,GAC3ChD,EAAuB,QAAnBkJ,EAAGhG,GAAYja,YAAI,IAAAigB,OAAA,EAAhBA,EAAkBlG,gBAAgBhD,MAAMiD,IAAgC,IAApBA,EAAQH,UAErErH,EADEuE,EACU1M,IAAM,IAAWA,EAAQoT,eAAgB1G,EAAK3X,KAE9CiL,IAAM,IAAWA,EAAQoT,eAAgB0C,EAAO/gB,MAE9Dyf,EAAkC,QAAjBqB,EAACjG,GAAYja,YAAI,IAAAkgB,OAAA,EAAhBA,EAAkBnG,gBACtC,IACC,CAACE,GAAYja,QAEhBqI,EAAAA,EAAAA,YAAU,KACR,GAAIuB,EAAQwW,SAAU,CACpB,MAOMC,EAPiBzW,EAAQwW,SAASxR,QAAO,CAAC2H,EAAK+J,KAC9C/J,EAAIgK,MAAK9gB,GAAQA,EAAK6gB,UAAYA,EAAQA,WAC7C/J,EAAIvF,KAAKsP,GAEJ/J,IACN,IAEoCvV,KAAIsf,IAAO,IAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,MAAK,CACrDpc,MAAO6b,EAAQA,QACfnE,UAA8B,OAAnB2D,SAAmB,IAAnBA,IAAyB,QAANU,EAAnBV,GAAqB9f,YAAI,IAAAwgB,GAA2C,QAA3CC,EAAzBD,EAA2BzJ,MAAK+J,GAAQA,EAAK1hB,KAAOkhB,EAAQA,iBAAQ,IAAAG,OAAjD,EAAnBA,EAAsEtE,UACjF3X,OAA0B,OAAnBsb,SAAmB,IAAnBA,IAAyB,QAANY,EAAnBZ,GAAqB9f,YAAI,IAAA0gB,GAA2C,QAA3CC,EAAzBD,EAA2B3J,MAAK+J,GAAQA,EAAK1hB,KAAOkhB,EAAQA,iBAAQ,IAAAK,OAAjD,EAAnBA,EAAsEta,OAAQ,UACrF0X,OAA0B,OAAnB+B,SAAmB,IAAnBA,IAAyB,QAANc,EAAnBd,GAAqB9f,YAAI,IAAA4gB,GAA2C,QAA3CC,EAAzBD,EAA2B7J,MAAK+J,GAAQA,EAAK1hB,KAAOkhB,EAAQA,iBAAQ,IAAAO,OAAjD,EAAnBA,EAAsEzE,QAAS,6CACvF,IACD8C,EAAoBmB,EACtB,IACC,CAACzW,EAAQwW,SAAUN,GAAoB9f,QAE1CqI,EAAAA,EAAAA,YAAU,KACR,GAAIuB,EAAQmX,WAA2B,cAAdjC,EAA2B,CAClD,MAAMkC,EAAYpX,EAAQmX,UAAUC,WAAa,KAC3CC,EAAa,IAAIle,KAAK6G,EAAQmX,UAAUE,YACxCC,EAAStX,EAAQmX,UAAUG,QAAU,EAG3C,GAFA3U,QAAQC,IAAI,WAAY0U,GAET,IAAXA,EAAc,CAChB,MAAMC,EAAW,IAAIpe,KAAK6G,EAAQmX,UAAUI,UAC5C,IAAIC,EAAU,EACI,MAAdJ,EAAmBI,EAAU,MACV,MAAdJ,EAAmBI,EAAU,OACf,MAAdJ,EAAmBI,EAAU,QACf,MAAdJ,GAAmC,MAAdA,EAAmBI,EAAU,OACpC,MAAdJ,EAAmBI,EAAU,QACf,MAAdJ,IAAmBI,EAAU,SACtC,MAAMC,EAAyBvjB,KAAKwjB,MAAMH,EAAWF,GAAcG,GACnE7U,QAAQC,IAAI,2BAA4B6U,GACxCzB,GAAcyB,EAChB,MAAO,GAAe,IAAXH,EAAc,CACvB,MAAMK,EAAc3X,EAAQmX,UAAUQ,aAAe,EACrD3B,GAAc2B,GACV3X,EAAQmX,UAAUS,iBAAmBD,GACzC/O,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWU,iBAAkBF,EAAaC,iBAAkBD,MACrH,MACE3B,GAAc,GAElB,IACC,CAAChW,EAAQmX,UAAWjC,KAGrBxb,EAAAA,EAAAA,MAAC4C,EAAAA,SAAc,CAAA3C,SAAA,EACbC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,yBAAyB7C,MAAO,CAAE0C,WAAY,OAAQmE,aAAc,MAAOrE,QAAS,OAAQ8W,aAAc,QAASvY,UAChID,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACFD,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACoW,GAAI,EAAGlf,MAAO,CAAEmf,YAAa,qBAAsBpe,SAAA,EACtDD,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAA,CAAC,eAAWC,EAAAA,EAAAA,KAACoe,EAAAA,EAAU,CAACxc,MAAM,UAAUG,KAAM,QAClH0U,GAAYrG,WACXpQ,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAClCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,QAAS2F,OAAQ,YAErGiW,GACF7b,EAAAA,EAAAA,KAAA,KAAAD,UACEC,EAAAA,EAAAA,KAAA,SACEgF,KAAK,OACL/D,MAAO0a,EACP7P,SAAUuQ,GACVtO,OAhGYsQ,KAC1BvC,GAAsB,GACtB9M,GAAYqC,IAAI,IAAWA,EAAMiN,UAAW3C,KAAmB,EA+FjD4C,WAAS,EACT1c,UAAU,gCAId7B,EAAAA,EAAAA,KAAA,OAAAD,UACED,EAAAA,EAAAA,MAAA,KAAGd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,OAAQrN,WAAY,YAAalL,SAAA,CAC/GqG,EAAQkY,WACTte,EAAAA,EAAAA,KAACwe,EAAAA,EAAY,CAACzc,KAAM,GAAIH,MAAM,UAAUwB,QAvH5Bqb,KAC1B3C,GAAsB,GACtBF,EAAmBxV,EAAQkY,WAAa,GAAG,EAqHyCzc,UAAU,OAAO7C,MAAO,CAAEyC,OAAQ,mBAM9GzB,EAAAA,EAAAA,KAAA,MAAIhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAC,gBACrE0W,GAAYrG,WACXpQ,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACC,GAAG,IAAIC,UAAU,OAAML,UAClCC,EAAAA,EAAAA,KAACE,EAAAA,EAAW,CAACG,GAAI,GAAIC,GAAG,YAAYuB,UAAU,YAAYE,KAAK,KAAK/C,MAAO,CAAEiB,MAAO,QAAS2F,OAAQ,YAErGqW,GACFjc,EAAAA,EAAAA,KAAA,KAAAD,UACEC,EAAAA,EAAAA,KAAA,YACEgF,KAAK,OACL/D,MAAO8a,EACPjQ,SAAUuQ,GACVtO,OAtHc2Q,KAC5BxC,IAAwB,GACxBlN,GAAYqC,IAAI,IAAWA,EAAM7N,YAAauY,KAAqB,EAqHrDwC,WAAS,EACT1c,UAAU,qBACV7C,MAAO,CAAE4M,OAAQ,OAAQ3L,MAAO,OAAQ2F,OAAQ,cAIpD9F,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAM9B,SAAA,EACnBC,EAAAA,EAAAA,KAAA,KAAGhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,MAAOuS,aAAc,MAAOrN,WAAY,WAAYhI,UAAW,QAASjB,SAAU,QAASjC,SACpJqG,EAAQ5C,eAEXxD,EAAAA,EAAAA,KAACwe,EAAAA,EAAY,CAACzc,KAAM,GAAIH,MAAM,UAAUwB,QA/IxBub,KAC5BzC,IAAwB,GACxBF,EAAqB5V,EAAQ5C,aAAe,GAAG,EA6IqC3B,UAAU,OAAO7C,MAAO,CAAEyC,OAAQ,oBAKhH3B,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACoW,GAAI,EAAEne,SAAA,EACTD,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQC,WAAY,OAAQhG,SAAA,CAAC,cAAUC,EAAAA,EAAAA,KAACoe,EAAAA,EAAU,CAACxc,MAAM,UAAUG,KAAM,SAClH/B,EAAAA,EAAAA,KAAC6H,EAAAA,EAAG,CAAA9H,SAEW,OAAX0W,SAAW,IAAXA,IAAiB,QAAN+D,EAAX/D,GAAaja,YAAI,IAAAge,GAAjBA,EAAmB5D,aACjB5W,EAAAA,EAAAA,KAAC4e,GAAe,CAACxO,UAAsB,OAAXqG,SAAW,IAAXA,QAAW,EAAXA,GAAarG,UAAW5T,KAAiB,OAAXia,SAAW,IAAXA,QAAW,EAAXA,GAAaja,KAAMwS,WAAYA,KAEzFhP,EAAAA,EAAAA,KAAC6e,GAAa,CAACzO,UAAsB,OAAXqG,SAAW,IAAXA,QAAW,EAAXA,GAAarG,UAAW5T,KAAiB,OAAXia,SAAW,IAAXA,QAAW,EAAXA,GAAaja,KAAMwS,WAAYA,eAMnGlP,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,uBAAuB7C,MAAO,CAAE0C,WAAY,OAAQmE,aAAc,MAAOrE,QAAS,OAAQvB,MAAO,QAASF,SAAA,EAEvHC,EAAAA,EAAAA,KAAC8e,GAA0B,CAAC/P,UAAWA,EAAWC,WAAYA,EAAYE,SAAU9I,EAAQ8I,SAAUD,iBAA4B,OAAXwH,SAAW,IAAXA,IAAiB,QAANgE,EAAXhE,GAAaja,YAAI,IAAAie,GAAU,QAAVC,EAAjBD,EAAmBsE,gBAAQ,IAAArE,OAAhB,EAAXA,EAA6BzZ,QAAS,EAAGkO,oBAAqBA,EAAqBC,UAAWQ,EAAgBvH,QAASA,EAASgH,qBAAsBA,KAE7QvP,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACFC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACoW,GAAI,EAAEne,UACTD,EAAAA,EAAAA,MAACmG,EAAAA,EAAKa,MAAK,CAACjF,UAAU,gCAAgCuF,UAAU,+BAA8BrH,SAAA,EAC5FC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKc,MAAK,CAAC/H,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,QAAS/F,SAAC,gCAC3DC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKe,QAAO,CACX7G,GAAG,WACHkH,KAAM,EACNJ,YAAY,yBACZhG,MAAOmF,EAAQ4Y,MAAQ,GACvBlT,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAMwiB,KAAM5R,EAAEzD,OAAO1I,UACjEsC,UAAQ,EACR1B,UAAU,WACV7C,MAAO,CAAE4G,OAAQ,QAASpE,QAAS,YAAaoK,OAAQ,gBAI9D5L,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACoW,GAAI,EAAEne,UACTD,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACFC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAAA/H,UACFD,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACFC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,aAAY9B,UACjCD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,0BAAyB9B,SAAA,EACtCD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQzE,QAAS,QAASiX,aAAc,OAAQvY,SAAA,CAAC,mBAAeC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UACvIC,EAAAA,EAAAA,KAAA,OAAK6B,UAAW,iBAAkB7C,MAAO,CAAEqZ,UAAW,OAAQzS,OAAQ,cAAepE,QAAS,YAAazB,UACzGC,EAAAA,EAAAA,KAACif,EAAAA,GAAO,CACNhY,YAAY,iBACZpF,UAAU,oCACVqd,mBAAmB,EACnB7E,WAAY,CAAEC,OAAQH,IACtBlZ,MAAOwa,EACP3P,SAAWqT,IACT,MAAMvC,EAAWuC,EACb,IAAI,IAAIC,IAAID,EAAS3hB,KAAK6hB,GAAQ,CAACA,EAAIpe,MAAO,CAAE6b,QAASuC,EAAIpe,WAAWsF,UACxE,GAEJmV,EAAoByD,GACpBnQ,GAAYnI,IAAM,IAAWA,EAAQ+V,SAAUA,GAAY,MAAM,EAEnE0C,SAAO,EACPC,OAAQ,CACNC,QAAUD,IAAM,IACXA,EAAQhY,UAAW,SAExBkY,iBAAmBF,IACV,IACFA,EACH,SAAU,CACRG,gBAAiB,OACjBje,OAAQ,aAIdke,WAAYA,CAACJ,EAAM5X,KAAgB,IAAd,KAAEnL,GAAMmL,EAC3B,MAAO,IACF4X,EACHG,gBAAiB,OACjB/d,OAAQ,oBACRkE,aAAc,MACd,UAAW,CACTA,aAAc,MACd+Z,QAAS,MACTC,gBAAqB,OAAJrjB,QAAI,IAAJA,GAAAA,EAAMmc,UAAY,OAAOnc,EAAK+d,SAAW,whBAC1DuF,eAAgB,QAChBC,mBAAoB,SACpBC,iBAAkB,YAClB3e,QAAS,QACT6L,YAAa,EACbjL,SAAU,WACVyL,IAAK,MACLxD,KAAM,MACNtE,OAAQ,GACR3F,MAAO,GACP0B,OAAQ,uBAEX,GAGLrF,QAA4B,OAAnBggB,SAAmB,IAAnBA,IAAyB,QAAN3B,EAAnB2B,GAAqB9f,YAAI,IAAAme,OAAN,EAAnBA,EAA2Bnd,KAAK8f,IAAI,CAC3Crc,MAAOqc,EAAK1hB,GACZoF,MAAOsc,EAAKza,KACZ0X,MAAO+C,EAAK1E,MACZD,UAAW2E,EAAK3E,wBAO1B3Y,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,aAAY9B,UACjCD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,qBAAoB9B,SAAA,EACjCC,EAAAA,EAAAA,KAAA,SAAOhB,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAC,QAC3EC,EAAAA,EAAAA,KAAA,OAAK6B,UAAW,iBAAkB7C,MAAO,CAAE4G,OAAQ,QAAS7F,UAC1DC,EAAAA,EAAAA,KAACiG,EAAAA,EAAKe,QAAO,CACXzD,UAAQ,EACRyB,KAAK,OACLiC,YAAY,mBACZhG,OAAc,OAAPmF,QAAO,IAAPA,OAAO,EAAPA,EAAS6Z,iBAAkB,GAClCjhB,MAAO,CAAE4C,MAAO,WAChBC,UAAU,uCACViK,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAMyjB,eAAgB7S,EAAEzD,OAAO1I,oBAKnFjB,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,aAAY9B,UACjCD,EAAAA,EAAAA,MAACmG,EAAAA,EAAKa,MAAK,CAACjF,UAAU,yBAAwB9B,SAAA,EAC5CD,EAAAA,EAAAA,MAACmG,EAAAA,EAAKc,MAAK,CAAC/H,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAA,CAAC,eAAWC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UACtHC,EAAAA,EAAAA,KAACkgB,EAAAA,EAAW,CAACC,GAAI,CAAEC,EAAG,EAAGhY,SAAU,OAAQxG,MAAO,WAAY7B,UAC5DD,EAAAA,EAAAA,MAACugB,EAAAA,EAAM,CACLpf,OAAc,OAAPmF,QAAO,IAAPA,OAAO,EAAPA,EAAS8I,WAAY,GAC5BpD,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM0S,SAAU9B,EAAEzD,OAAO1I,UACrEqf,cAAY,EACZC,WAAY,CAAE,aAAc,iBAC5BC,cAAe1e,EAAAA,EAAY/B,SAAA,EAE3BC,EAAAA,EAAAA,KAACmD,EAAAA,EAAQ,CAAClC,MAAO,KAAKlB,SAAC,mBACvBC,EAAAA,EAAAA,KAACmD,EAAAA,EAAQ,CAAClC,MAAO,KAAKlB,SAAC,mBACvBC,EAAAA,EAAAA,KAACmD,EAAAA,EAAQ,CAAClC,MAAO,KAAKlB,SAAC,2BAOnCC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAAA/H,UACFD,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACFC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,eAAc9B,UACnCD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,0BAAyB9B,SAAA,EACtCC,EAAAA,EAAAA,KAACygB,GAAiB,CAChBzf,OAAOlB,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EAAEC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,qBAAoB,KAACD,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,kCAA8BC,EAAAA,EAAAA,KAAA,SAAS,mCAC9E6C,KAAK,UACL5B,MAAM,UACNkM,QAA+B,YAAtBoO,EACTzP,SAAUA,IAAM0P,EAAqB,cAEvCxb,EAAAA,EAAAA,KAACygB,GAAiB,CAChBzf,OAAOlB,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EAAEC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,yBAAwB,KAACD,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,mCAA+BC,EAAAA,EAAAA,KAAA,SAAS,wBACnF6C,KAAK,UACL5B,MAAM,OACNkM,QAA+B,SAAtBoO,EACTzP,SAAUA,IAAM0P,EAAqB,gBAI3Cxb,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAGhI,UACVD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,qBAAoB9B,SAAA,EACjCD,EAAAA,EAAAA,MAAA,SAAO+B,UAAU,gBAAe9B,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,SACEgF,KAAK,WACLmI,QAASuT,QAAQta,EAAQua,kBACzB7U,SAAWsB,GAAM4B,GAAY4R,IAAW,IACnCA,EACHD,iBAAkBvT,EAAEzD,OAAOwD,eAG/BnN,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,eAElB7B,EAAAA,EAAAA,KAAA,MAAAD,SAAI,2CAUL,cAAdub,IACCxb,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAE0C,WAAY,OAAQmE,aAAc,MAAOrE,QAAS,OAAQvB,MAAO,QAASF,SAAA,EACtFD,EAAAA,EAAAA,MAAA,MAAId,MAAO,CAAE4C,MAAO,kBAAmBkE,SAAU,OAAQC,WAAY,MAAOxF,UAAW,QAASR,SAAA,CAAC,qBAC5E,IAClB,CAAC,OAAOvC,KAAKqjB,IACZ7gB,EAAAA,EAAAA,KAAC8gB,EAAAA,EAAc,CAEbD,UAAWA,EACXE,SACE/gB,EAAAA,EAAAA,KAACghB,EAAAA,EAAO,CAACnf,UAAU,2BAA2BjG,GAAI,WAAWilB,IAAY9gB,UACvED,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,aAAY9B,SAAA,CAAC,0BACJC,EAAAA,EAAAA,KAAA,SAAM,2CACWA,EAAAA,EAAAA,KAAA,SAAM,6CACJA,EAAAA,EAAAA,KAAA,SAAM,iCAClBA,EAAAA,EAAAA,KAAA,SAAM,+CACQA,EAAAA,EAAAA,KAAA,SAAM,mCAClBA,EAAAA,EAAAA,KAAA,SAAM,6BAK1CD,UAEDD,EAAAA,EAAAA,MAACiF,EAAAA,EAAM,CAAClD,UAAU,mCAAkC9B,SAAA,EAACC,EAAAA,EAAAA,KAACoe,EAAAA,EAAU,CAACrc,KAAM,GAAIH,MAAM,YAAY,QAjBxFif,SAsBX/gB,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,kCAAiC9B,SAAA,EAC9CD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gCAA+B9B,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,MAAOjX,QAAS,SAAUtB,SAAA,CAAC,cAAUC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAClIC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACPvZ,MAAO,CAAE4G,OAAQ,OAASwC,SAAU,QAASsC,SAAU,SACvDzJ,OAAc,OAAPmF,QAAO,IAAPA,GAAkB,QAAXwU,EAAPxU,EAASmX,iBAAS,IAAA3C,OAAX,EAAPA,EAAoB4C,YAAa,KACxC1R,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWC,UAAWpQ,EAAEnM,WAChG3E,QAAS,CACP,CAAE0E,MAAO,QAASC,MAAO,KACzB,CAAED,MAAO,SAAUC,MAAO,KAC1B,CAAED,MAAO,WAAYC,MAAO,KAC5B,CAAED,MAAO,UAAWC,MAAO,KAC3B,CAAED,MAAO,wBAAyBC,MAAO,KACzC,CAAED,MAAO,YAAaC,MAAO,KAC7B,CAAED,MAAO,SAAUC,MAAO,MAE5BY,UAAU,qBACVoF,YAAY,mBACZyS,sBAAsB,QAI1B5Z,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gCAA+B9B,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAA,CAAC,UAAMC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAC5GC,EAAAA,EAAAA,KAACihB,EAAAA,EAAQ,CACPhgB,OAAc,OAAPmF,QAAO,IAAPA,GAAkB,QAAXyU,EAAPzU,EAASmX,iBAAS,IAAA1C,OAAX,EAAPA,EAAoB4C,aAAc,KACzC3R,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWE,WAAYrQ,EAAEnM,WACjGigB,eAAa,EACbja,YAAY,WACZ/H,WAAW,WACXiiB,OAAO,KACPniB,MAAO,CAAE4G,OAAQ,QACjB/D,UAAU,0CAId/B,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gCAA+B9B,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAA,CAAC,QAAIC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAC1GC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACPtX,MAAc,OAAPmF,QAAO,IAAPA,GAAkB,QAAX0U,EAAP1U,EAASmX,iBAAS,IAAAzC,OAAX,EAAPA,EAAoB4C,OAC3B5R,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWG,OAAQtQ,EAAEnM,WAC7F3E,QAAS,CACP,CAAE0E,MAAO,SAAUC,MAAO,GAC1B,CAAED,MAAO,wBAAyBC,MAAO,GACzC,CAAED,MAAO,UAAWC,MAAO,IAE7BjC,MAAO,CAAE4G,OAAQ,OAAQwC,SAAU,SACnCvG,UAAU,qBACVoF,YAAY,gBACZyS,sBAAsB,OAKO,KAAxB,OAAPtT,QAAO,IAAPA,GAAkB,QAAX2U,EAAP3U,EAASmX,iBAAS,IAAAxC,OAAX,EAAPA,EAAoB2C,SAClB5d,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gCAA+B9B,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAA,CAAC,0BAAsBC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAC5HC,EAAAA,EAAAA,KAACgO,EAAAA,EAAW,CACV/M,OAAc,OAAPmF,QAAO,IAAPA,GAAkB,QAAX4U,EAAP5U,EAASmX,iBAAS,IAAAvC,OAAX,EAAPA,EAAoB+C,cAAe,EAC1C5P,cAAgBf,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWQ,YAAa3Q,EAAEzD,OAAO1I,WAC9GjC,MAAO,CAAE4G,OAAQ,QACjBqB,YAAY,8BACZsH,WAAY,CAAEtO,MAAO,QACrB4B,UAAU,yCAGmB,KAAxB,OAAPuE,QAAO,IAAPA,GAAkB,QAAX6U,EAAP7U,EAASmX,iBAAS,IAAAtC,OAAX,EAAPA,EAAoByC,SACpB5d,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gCAA+B9B,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAA,CAAC,YAAQC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UAC9GC,EAAAA,EAAAA,KAACihB,EAAAA,EAAQ,CACPhgB,OAAc,OAAPmF,QAAO,IAAPA,GAAkB,QAAX8U,EAAP9U,EAASmX,iBAAS,IAAArC,OAAX,EAAPA,EAAoByC,WAAY,KACvC7R,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWI,SAAUvQ,EAAEnM,WAC/FigB,eAAa,EACbja,YAAY,WACZ/H,WAAW,WACXkiB,SAAgB,OAAPhb,QAAO,IAAPA,GAAkB,QAAX+U,EAAP/U,EAASmX,iBAAS,IAAApC,OAAX,EAAPA,EAAoBsC,aAAc,KAC3C0D,OAAO,KACPniB,MAAO,CAAE4G,OAAQ,QACjB/D,UAAU,yCAGZ,MAGR/B,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gCAA+B9B,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,SAAOd,MAAO,CAAE4C,MAAO,UAAWkE,SAAU,OAAQwS,aAAc,OAAQvY,SAAA,CAAC,qBAAiBC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,WAAU9B,SAAC,UACvHC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACPtX,OAAc,OAAPmF,QAAO,IAAPA,GAAkB,QAAXgV,EAAPhV,EAASmX,iBAAS,IAAAnC,OAAX,EAAPA,EAAoB4C,mBAAoB,EAC/ClS,SAAWsB,GAAM4B,GAAYxS,IAAI,IAAWA,EAAM+gB,UAAW,IAAS,OAAJ/gB,QAAI,IAAJA,OAAI,EAAJA,EAAM+gB,UAAWS,iBAAkB5Q,EAAEnM,MAAOgd,iBAAkB,OAChI3hB,QAAS,CACP,CAAE0E,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,IAAKC,MAAO,EAAGgE,SAAUkX,GAAa,GAC/C,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,IACjD,CAAEnb,MAAO,KAAMC,MAAO,GAAIgE,SAAUkX,GAAa,KAEnDnd,MAAO,CAAE4G,OAAQ,OAAQwC,SAAU,SACnCvG,UAAU,qBACVoF,YAAY,0BACZyS,sBAAsB,eAQjB,I,wFC7gBrB,UAAgB,UAAY,mCAAmC,YAAc,qCAAqC,YAAc,qCAAqC,aAAe,sCAAsC,eAAiB,wCAAwC,UAAY,mCAAmC,MAAQ,+BAA+B,sBAAsB,6CAA6C,UAAY,mCAAmC,SAAW,kCAAkC,aAAe,sCAAsC,WAAa,oCAAoC,SAAW,mC,+DCAznB,UAAgB,YAAc,yCAAyC,YAAc,yCAAyC,aAAe,0CAA0C,IAAM,iCAAiC,MAAQ,mCAAmC,eAAiB,4CAA4C,gBAAkB,6CAA6C,aAAe,0CAA0C,IAAM,iCAAiC,IAAM,iCAAiC,OAAS,oCAAoC,SAAW,uCCgB9jB2H,IACFrhB,EAAAA,EAAAA,KAAA,OAAK6B,UAAW,GAAG7C,GAAMsiB,cAAcvhB,UACnCC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,wCAAuC9B,UAClDC,EAAAA,EAAAA,KAAA,QAAM6B,UAAW,gCAAgC7C,GAAMuiB,cAAcxhB,SAAC,wBA6C5EyhB,IArCF1hB,EAAAA,EAAAA,MAAA,QAAM+B,UAAU,aAAY9B,SAAA,EACxBC,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,UAAU,aAAW,UACvC7B,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,YAAY,aAAW,YACzC7B,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,eAAe,aAAW,eAC5C7B,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,YAAY,aAAW,mBACzC7B,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,gBAAgB,aAAW,gBAC7C7B,EAAAA,EAAAA,KAAA,UACI6B,UAAU,UACVZ,MAAM,UACN,aAAW,kBAEfjB,EAAAA,EAAAA,KAAA,UACI6B,UAAU,UACVZ,MAAM,SACN,aAAW,iBAEfjB,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,WAAWZ,MAAM,GAAG,aAAW,gBACjDjB,EAAAA,EAAAA,KAAA,UACI6B,UAAU,WACVZ,MAAM,SACN,aAAW,kBAEfjB,EAAAA,EAAAA,KAAA,UACI6B,UAAU,WACVZ,MAAM,QACN,aAAW,iBAEfjB,EAAAA,EAAAA,KAAA,UACI6B,UAAU,WACVZ,MAAM,UACN,aAAW,aAEfjB,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,UAAU,aAAW,iBACvC7B,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,WAAW,aAAW,kBACxC7B,EAAAA,EAAAA,KAAA,UAAQ6B,UAAU,gBAAgB,aAAW,kBAmoBrD,GA9nB8BnB,IAA0D,IAAD+gB,EAAAC,EAAAC,EAAAC,EAAA,IAAxD,KAAE5d,EAAI,QAAEC,EAAO,eAAE4d,EAAc,WAAE7S,EAAU,KAAE8S,GAAMphB,EAC9E,MAAMqhB,GAAK1X,EAAAA,EAAAA,QAAO,MACZ2X,EAAcC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,gBAAkB,OACtEpO,EAAMqO,IAAWpe,EAAAA,EAAAA,UAAS,KAC1Bqe,EAAIC,IAASte,EAAAA,EAAAA,UAAS,KACtBue,EAAIC,IAASxe,EAAAA,EAAAA,UAAS,KACtBye,EAAKC,IAAU1e,EAAAA,EAAAA,UAAS,KACxB2e,EAASC,IAAc5e,EAAAA,EAAAA,UAAS,OAChC6e,EAAMC,IAAW9e,EAAAA,EAAAA,UAAS,OAC1B+e,EAAWC,IAAgBhf,EAAAA,EAAAA,UAAS,OAEpCO,EAAQ0e,IAAajf,EAAAA,EAAAA,UAAS,CAAC,IAC/Bkf,EAAgBC,IAAqBnf,EAAAA,EAAAA,UAAS,IAC/Cof,GAAkBjZ,EAAAA,EAAAA,QAAO,MACzBkZ,GAAmBlZ,EAAAA,EAAAA,QAAO,MAC1BmZ,GAAmBnZ,EAAAA,EAAAA,QAAO,OACzBoZ,EAAQC,IAAaxf,EAAAA,EAAAA,WAAS,IAC9Byf,EAASC,IAAc1f,EAAAA,EAAAA,WAAS,IAChCkM,EAAWyT,IAAgB3f,EAAAA,EAAAA,WAAS,GAIrC4f,GAAeC,EAAAA,EAAAA,cAAahK,GACX,6BACDiK,KAAKjK,EAAMkK,SAC9B,IAGGC,GAAqBH,EAAAA,EAAAA,cAAaI,IAC/BA,GAAoC,IAAtBA,EAAWlqB,QACvBkqB,EAAWC,OAAMrK,GAAS+J,EAAa/J,MAC/C,CAAC+J,IAGEO,GAAmBN,EAAAA,EAAAA,cAAaI,GAC7BA,GAAoC,IAAtBA,EAAWlqB,OACvBkqB,EAAWnoB,QAAO+d,IAAU+J,EAAa/J,KADG,IAEpD,CAAC+J,IAGEQ,GAAkBP,EAAAA,EAAAA,cAAaI,GAC5BA,GAAoC,IAAtBA,EAAWlqB,OACvBkqB,EAAWnoB,QAAO+d,GAAS+J,EAAa/J,KADI,IAEpD,CAAC+J,IAGES,GAA4BR,EAAAA,EAAAA,cAAY,KAC1C,IAAIS,GAAY,EAGhB,GAAIjC,EAAGtoB,OAAS,EAAG,CACf,MAAMwqB,EAAkBJ,EAAiB9B,GACrCkC,EAAgBxqB,OAAS,IACzB8O,QAAQC,IAAI,2BAA4Byb,GACxCjC,EAAM8B,EAAgB/B,IACtBiC,GAAY,EAEpB,CAGA,GAAI/B,EAAGxoB,OAAS,EAAG,CACf,MAAMyqB,EAAkBL,EAAiB5B,GACrCiC,EAAgBzqB,OAAS,IACzB8O,QAAQC,IAAI,2BAA4B0b,GACxChC,EAAM4B,EAAgB7B,IACtB+B,GAAY,EAEpB,CAGA,GAAI7B,EAAI1oB,OAAS,EAAG,CAChB,MAAM0qB,EAAmBN,EAAiB1B,GACtCgC,EAAiB1qB,OAAS,IAC1B8O,QAAQC,IAAI,4BAA6B2b,GACzC/B,EAAO0B,EAAgB3B,IACvB6B,GAAY,EAEpB,CAEA,OAAQA,CAAS,GAClB,CAACjC,EAAIE,EAAIE,EAAK0B,EAAkBC,KAE5BM,GAAiBC,KAAuB3gB,EAAAA,EAAAA,UAAS,MAClD4gB,IAAqB/U,EAAAA,EAAAA,GAAS,CAChCC,SAAU,CAAC,iBACXC,QAAS8U,GAAAA,KAEPC,IAAiBjV,EAAAA,EAAAA,GAAS,CAC5BC,SAAU,CAAC,yBACXC,QAASgV,GAAAA,KAEPC,IAA6BnV,EAAAA,EAAAA,GAAS,CACxCC,SAAU,CAAC,oBACXC,QAASkV,GAAAA,KAEPC,IAAarV,EAAAA,EAAAA,GAAS,CACxBC,SAAU,CAAC,aAAc4U,IACzB3U,QAASA,KAAMoV,EAAAA,GAAAA,IAAST,IACxBtU,UAAWsU,GACXrU,MAAO,KAGX1L,EAAAA,EAAAA,YAAU,KACiC,IAADygB,EAAAC,EAAAC,EAAR,OAA1BN,SAA0B,IAA1BA,IAAAA,GAA4B1oB,OACE,OAA1B0oB,SAA0B,IAA1BA,IAAgC,QAANI,EAA1BJ,GAA4B1oB,YAAI,IAAA8oB,GAAhCA,EAAkCG,gBAA4C,OAA1BP,SAA0B,IAA1BA,IAAgC,QAANK,EAA1BL,GAA4B1oB,YAAI,IAAA+oB,GAAhCA,EAAkCG,wBACtFpD,EAAkC,OAA1B4C,SAA0B,IAA1BA,IAAgC,QAANM,EAA1BN,GAA4B1oB,YAAI,IAAAgpB,OAAN,EAA1BA,EAAkCC,gBAE1CnD,EAAQ,2BAGhB,IAAKsC,IAAqC,OAAlBE,SAAkB,IAAlBA,IAAAA,GAAoBtoB,KAAM,CAAC,IAADmpB,EAC9C,MAAMC,EAAqC,OAAlBd,SAAkB,IAAlBA,IAAwB,QAANa,EAAlBb,GAAoBtoB,YAAI,IAAAmpB,OAAN,EAAlBA,EAA0BpS,MAAMsS,GAA+B,aAAlBA,EAAS7gB,OAC3D,OAAhB4gB,QAAgB,IAAhBA,GAAAA,EAAkBhqB,IAAIipB,GAAoBe,EAAiBhqB,GACnE,IAED,CAACwpB,GAAYF,GAA4BN,GAAmC,OAAlBE,SAAkB,IAAlBA,QAAkB,EAAlBA,GAAoBtoB,OAEjF,MAuDMspB,IACFhmB,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,mCAAkC9B,SAAA,EAC7CC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAAClD,UAAU,iBAAiBuB,QAASA,IAAMa,GAAQ,GAAOlE,SAAC,YAGlED,EAAAA,EAAAA,MAACiF,EAAAA,EAAM,CAAClD,UAAU,eAAeoD,SAAUmL,EAAWhN,QA5D7ClI,UACb,IAAI6qB,EAAa,EACjB5C,EAAU,CAAC,GAaX,GAVuBoB,KAEnBxb,QAAQC,IAAI,kDAGXiL,MACC8R,EACF5C,GAAWtc,IAAM,IAAWA,EAAQoN,MAAM,OAG3B,KAAb,OAAFsO,QAAE,IAAFA,OAAE,EAAFA,EAAItoB,UACF8rB,EACF5C,GAAWtc,IAAM,IAAWA,EAAQ0b,IAAI,WACrC,IAAK2B,EAAmB3B,GAAK,GAC9BwD,EACF,MAAMC,EAAgB3B,EAAiB9B,GACvCxZ,QAAQC,IAAI,qBAAsBgd,GAClC7C,GAAWtc,IAAM,IAAWA,EAAQ0b,IAAI,EAAM0D,WAAW,EAAMxB,gBAAiBuB,KACpF,CAEA,GAAIvD,EAAGxoB,OAAS,IAAMiqB,EAAmBzB,GAAK,GACxCsD,EACF,MAAMC,EAAgB3B,EAAiB5B,GACvC1Z,QAAQC,IAAI,qBAAsBgd,GAClC7C,GAAWtc,IAAM,IAAWA,EAAQ4b,IAAI,EAAMiC,gBAAiBsB,KACnE,CAEA,GAAIrD,EAAI1oB,OAAS,IAAMiqB,EAAmBvB,GAAM,GAC1CoD,EACF,MAAMC,EAAgB3B,EAAiB1B,GACvC5Z,QAAQC,IAAI,sBAAuBgd,GACnC7C,GAAWtc,IAAM,IAAWA,EAAQ8b,KAAK,EAAMgC,iBAAkBqB,KACrE,CAEKnD,MACCkD,EACF5C,GAAWtc,IAAM,IAAWA,EAAQgc,SAAS,OAG5CE,MACCgD,EACF5C,GAAWtc,IAAM,IAAWA,EAAQkc,MAAM,OAG1CgD,IACJlC,GAAa,SACP/B,IACN+B,GAAa,GAAM,EAQyD9jB,SAAA,CAAC,OAChE,IACJqQ,IACGpQ,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CACZlnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQhE,MAAO,gBAO7DukB,GAAU1c,IAAW,IAAD2c,EAAAC,EACtB,MAAMC,GAAa,OAAL7c,QAAK,IAALA,GAAY,QAAP2c,EAAL3c,EAAO6c,aAAK,IAAAF,OAAP,EAALA,EAAcG,gBAAiB,GAC7C,IAAIC,EAAmD,QAA7CH,EAAGxE,EAAerkB,KAAKhB,GAAUA,EAAKud,eAAO,IAAAsM,OAAA,EAA1CA,EAA4CrqB,QAAO+d,GAASA,IACzEyM,EAASA,EAAOxqB,QAAQ+d,IAAWwI,EAAGxV,SAASgN,KAC/CyM,EAASA,EAAOxqB,QAAQ+d,IAAW0I,EAAG1V,SAASgN,KAC/CyM,EAASA,EAAOxqB,QAAQ+d,IAAW4I,EAAI5V,SAASgN,KAEhDyM,EAASA,EAAOxqB,QAAQ+d,GACpBA,EAAMwM,cAAcxZ,SAASuZ,KAGjCjD,EAAkBmD,EAAO,EAgDvB1Y,GAAUA,KACZqY,KACI7C,EAAgB3L,SAAS2L,EAAgB3L,QAAQ3T,MAAM,EAGzDyiB,GAAWA,KACbN,KACI5C,EAAiB5L,SAAS4L,EAAiB5L,QAAQ3T,MAAM,EAG3D0iB,GAAWA,KACbP,KACI3C,EAAiB7L,SAAS6L,EAAiB7L,QAAQ3T,MAAM,EAsEjE,OAnEAa,EAAAA,EAAAA,YAAU,KACN,GAAkB,OAAdgd,QAAc,IAAdA,GAAAA,EAAgB5nB,OAAQ,CAAC,IAAD0sB,EACxB,IAAIH,EAAmD,QAA7CG,EAAG9E,EAAerkB,KAAKhB,GAAUA,EAAKud,eAAO,IAAA4M,OAAA,EAA1CA,EAA4C3qB,QAAO+d,GAASA,IACzEsJ,EAAkBmD,EACtB,IACD,CAAC3E,KAGJhd,EAAAA,EAAAA,YAAU,KACN,GAAI0d,EAAGtoB,OAAS,EAAG,CACf,MAAMwqB,EAAkBJ,EAAiB9B,GACzC,GAAIkC,EAAgBxqB,OAAS,EAAG,CAC5B8O,QAAQC,IAAI,mCAAoCyb,GAChD,MAAMmC,EAActC,EAAgB/B,GACpCC,EAAMoE,EACV,CACJ,IACD,CAACrE,EAAI8B,EAAkBC,KAE1Bzf,EAAAA,EAAAA,YAAU,KACN,GAAI4d,EAAGxoB,OAAS,EAAG,CACf,MAAMyqB,EAAkBL,EAAiB5B,GACzC,GAAIiC,EAAgBzqB,OAAS,EAAG,CAC5B8O,QAAQC,IAAI,mCAAoC0b,GAChD,MAAMkC,EAActC,EAAgB7B,GACpCC,EAAMkE,EACV,CACJ,IACD,CAACnE,EAAI4B,EAAkBC,KAE1Bzf,EAAAA,EAAAA,YAAU,KACN,GAAI8d,EAAI1oB,OAAS,EAAG,CAChB,MAAM0qB,EAAmBN,EAAiB1B,GAC1C,GAAIgC,EAAiB1qB,OAAS,EAAG,CAC7B8O,QAAQC,IAAI,oCAAqC2b,GACjD,MAAMiC,EAActC,EAAgB3B,GACpCC,EAAOgE,EACX,CACJ,IACD,CAACjE,EAAK0B,EAAkBC,KAE3Bzf,EAAAA,EAAAA,YAAU,KACNmK,GAAYqC,IAAI,IACTA,EACHwR,QAASA,EACTgE,WAAY9D,EACZ+D,WAAY7S,EACZsO,GAAM,OAAFA,QAAE,IAAFA,OAAE,EAAFA,EAAI9mB,cACJgnB,EAAGxoB,OAAS,GAAK,CAAEwoB,GAAIA,EAAGhnB,eAC1BknB,EAAI1oB,OAAS,GAAK,CAAE0oB,IAAKA,EAAIlnB,eAC7BwnB,GAAa,CAAEA,UAAWA,MAC/B,GACJ,CAACJ,EAASE,EAAM9O,EAAMsO,EAAIE,EAAIE,EAAKM,EAAWjU,KAEjDnK,EAAAA,EAAAA,YAAU,KAAO,IAADkiB,EAAAC,EACZhE,GAAkB,OAAVoC,SAAU,IAAVA,IAAgB,QAAN2B,EAAV3B,GAAY5oB,YAAI,IAAAuqB,OAAN,EAAVA,EAAkBxqB,OAAQ,IAClCumB,EAAqB,OAAVsC,SAAU,IAAVA,IAAgB,QAAN4B,EAAV5B,GAAY5oB,YAAI,IAAAwqB,OAAN,EAAVA,EAAkBnE,SAC7BM,GAAWtc,IAAM,IAAWA,EAAQgc,SAAS,MAC7CM,GAAWtc,IAAM,IAAWA,EAAQkc,MAAM,KAAS,GACpD,CAAW,OAAVqC,SAAU,IAAVA,QAAU,EAAVA,GAAY5oB,QAEhBqI,EAAAA,EAAAA,YAAU,KACqB,IAADoiB,EAAAC,EAAR,OAAdlC,SAAc,IAAdA,IAAAA,GAAgBxoB,MAChB0mB,EAA2B,OAAd8B,SAAc,IAAdA,IAAoB,QAANiC,EAAdjC,GAAgBxoB,YAAI,IAAAyqB,GAAiE,QAAjEC,EAApBD,EAAsB1T,MAAMsS,GAAaA,EAASjqB,KAAOomB,EAAYmF,yBAAgB,IAAAD,OAAvE,EAAdA,EAAuFtrB,GACxG,GACD,CAAe,OAAdopB,SAAc,IAAdA,QAAc,EAAdA,GAAgBxoB,KAAMwlB,EAAYmF,mBAGlCrnB,EAAAA,EAAAA,MAACsnB,GAAAA,EAAM,CACHC,QAASrjB,EACTsjB,OAAO,EACP9F,OAAQH,GACRkG,OAAQzB,GACRjkB,UAAW,GAAG7C,GAAMsoB,qBACpBtoB,MAAO,CAAEiB,MAAO,SAChBuF,OA9TYV,IAAMb,GAAQ,GA8TNlE,SAAA,EAEpBD,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACAD,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,OAAM9B,SAAA,EACxBD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,UAC3CC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLjc,QACK4oB,KAAwD,OAA1BA,SAA0B,IAA1BA,QAA0B,EAA1BA,GAA4B1oB,OAAS,CAAC,CACjEyE,MAAiC,OAA1BikB,SAA0B,IAA1BA,IAAgC,QAANzD,EAA1ByD,GAA4B1oB,YAAI,IAAAilB,OAAN,EAA1BA,EAAkCgE,eACzCzkB,MAAO,GAA6B,OAA1BkkB,SAA0B,IAA1BA,IAAgC,QAANxD,EAA1BwD,GAA4B1oB,YAAI,IAAAklB,OAAN,EAA1BA,EAAkC+D,oBAEhD,GAEJ5jB,WAAWwD,EAAAA,EAAAA,GACPrG,GAAMyoB,eACN,+BAEJzoB,MAAO,CAAE4G,OAAQ,OAAQ8hB,YAAa,QACtCzgB,YAAY,oBACZ6E,SAAWsB,IACPkV,EAAQlV,EAAEnM,OACVkiB,GAAWtc,IAAM,IAAWA,EAAQoN,MAAM,KAAS,EAEvDhT,MAAOgT,EACPyF,sBAAsB,QAGvB,OAANjV,QAAM,IAANA,OAAM,EAANA,EAAQwP,QACLjU,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,+BAG3CC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,OAAM9B,UACxBD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,eAC3CC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLjc,QACKwoB,KAC0B,QADRnD,EACfmD,GAAmBtoB,YAAI,IAAAmlB,OAAA,EAAvBA,EAAyBnkB,KAAKmqB,IAAa,CACvC1mB,MAAO0mB,EAAc/rB,GACrBoF,MAAO,GAAG2mB,EAAc9kB,aAEhC,GAEJhB,WAAWwD,EAAAA,EAAAA,GACPrG,GAAMyoB,eACN,+BAEJzoB,MAAO,CAAE4G,OAAQ,OAAQ8hB,YAAa,QACtCzgB,YAAY,kBACZ6E,SAAWsB,IACPyX,GAAoBzX,EAAEnM,MAAM,EAEhCA,MAAO2jB,GACPhP,QAA2B,OAAlBkP,SAAkB,IAAlBA,QAAkB,EAAlBA,GAAoB8C,WAC7BlO,sBAAsB,KAE1B1Z,EAAAA,EAAAA,KAAA,OAAK6B,UAAW7C,GAAM6oB,aAAczkB,QAAUgK,GAAM2U,EAAGpK,QAAQmQ,OAAO1a,GAAGrN,UACrEC,EAAAA,EAAAA,KAACoe,EAAAA,EAAU,CAACrc,KAAM,GAAIH,MAAM,iBAEhC9B,EAAAA,EAAAA,MAACioB,GAAAA,EAAY,CAAC3d,IAAK2X,EAAGhiB,SAAA,EAClBC,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,UAAU7C,MAAO,CAAE4C,MAAO,UAAWomB,WAAY,QAASjoB,SAAC,+CACxED,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,UAAU7C,MAAO,CAAE4C,MAAO,UAAWomB,WAAY,QAASjoB,SAAA,CAAC,uCAAmCC,EAAAA,EAAAA,KAAA,SAAM,4CAA8CA,EAAAA,EAAAA,KAAA,SAAM,6BAKvLF,EAAAA,EAAAA,MAAC+H,EAAAA,EAAG,CAAA9H,SAAA,EACAD,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,OAAM9B,SAAA,EACzBD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,qBAAoB9B,SAAA,EAC/BD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAcJ,UAAW7C,GAAMipB,gBAAgBloB,SAAA,EACnEC,EAAAA,EAAAA,KAAA,OAAKhB,MAAO,CAAEiB,MAAO,QAAU4B,UAAW7C,GAAMkpB,OAChDloB,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,QAC3CC,EAAAA,EAAAA,KAACmoB,GAAAA,EAAY,CACT/d,IAAKkZ,EACLriB,MAAOshB,EACP6F,eAAgBjC,GAChBra,SAAWsB,IACPoV,EAAMpV,EAAEnM,OACRkiB,GAAWtc,IAAM,IAAWA,EAAQ0b,IAAI,EAAO0D,WAAW,KAAS,EAEvEoC,UAAQ,EACRC,YAAalF,EACbhgB,QAAS0K,GACTA,QAASA,GACTya,QA5NLnb,IACnB,MAAMob,EAAepb,EAAEzD,OAAO1I,MAC9B,GAAIunB,EAAazb,SAAS,MAAkB,UAAVK,EAAE3G,IAAiB,CACjD,MAAM+f,EAASgC,EAAaC,MAAM,UAAUzsB,QAAQ+d,GAAUA,IAExD6M,EAAcJ,EAAOxqB,QAAO+d,GAAS+J,EAAa/J,KACxDyI,GAAOnR,GAAS,IAAI,IAAIC,IAAI,IAAID,KAASuV,OAErCA,EAAY3sB,SAAWusB,EAAOvsB,QAAU2sB,EAAY3sB,OAAS,GAC7DkpB,GAAWtc,IAAM,IAAWA,EAAQ0b,IAAI,EAAO0D,WAAW,MAE9D7Y,EAAEzD,OAAO1I,MAAQ,EACrB,GAiNwB8M,OAASX,IACL,MAAMob,EAAepb,EAAEzD,OAAO1I,MAAMgjB,OAChCuE,IACI1E,EAAa0E,IACbhG,GAAOnR,GAAS,IAAI,IAAIC,IAAI,IAAID,EAAMmX,OACtCrF,GAAWtc,IAAM,IAAWA,EAAQ0b,IAAI,EAAO0D,WAAW,OAE1D9C,GAAWtc,IAAM,IAAWA,EAAQof,WAAW,MAEnD7Y,EAAEzD,OAAO1I,MAAQ,GACrB,EAEJY,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMmpB,aAAc,SACpClhB,YAAY,WAGpBjH,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CACHlD,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM0pB,IAAK,CAAE,CAAC1pB,GAAM2pB,QAASlF,IAC7CrgB,QAASA,KAAQsgB,GAAWD,GAASf,EAAM,GAAG,EAAI3iB,SACrD,QAGDC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CACHlD,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM0pB,IAAK,CAAE,CAAC1pB,GAAM2pB,QAAShF,IAC7CvgB,QAASA,KAAQwgB,GAAYD,GAAUf,EAAO,GAAG,EAAI7iB,SACxD,YAIE,OAAN0E,QAAM,IAANA,OAAM,EAANA,EAAQ8d,OAAa,OAAN9d,QAAM,IAANA,GAAAA,EAAQwhB,aACpBjmB,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,0BAEhC,OAAN0E,QAAM,IAANA,OAAM,EAANA,EAAQwhB,aACLnmB,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,+CAC5B,OAAN0E,QAAM,IAANA,OAAM,EAANA,EAAQggB,kBAAmBhgB,EAAOggB,gBAAgBxqB,OAAS,IACxD6F,EAAAA,EAAAA,MAAA,KAAG+B,UAAU,0BAA0B7C,MAAO,CAAE8G,SAAU,OAAQlE,MAAO,WAAY7B,SAAA,CAAC,mBACjE0E,EAAOggB,gBAAgBmE,KAAK,eAO7DnF,IACA3jB,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,OAAM9B,SAAA,EACxBD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,OAAKhB,MAAO,CAAEiB,MAAO,QAAU4B,UAAW7C,GAAMkpB,OAChDloB,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,QAC3CC,EAAAA,EAAAA,KAACmoB,GAAAA,EAAY,CACT/d,IAAKmZ,EACLtiB,MAAOwhB,EACP2F,eAAgBjC,GAChBra,SAAWsB,IACPsV,EAAMtV,EAAEnM,OACRkiB,GAAWtc,IAAM,IAAWA,EAAQ4b,IAAI,KAAS,EAErD4F,UAAQ,EACRC,YAAalF,EACbhgB,QAASqjB,GACT3Y,QAAS2Y,GACT8B,QA3QJnb,IACpB,MAAMob,EAAepb,EAAEzD,OAAO1I,MAC9B,GAAIunB,EAAazb,SAAS,MAAkB,UAAVK,EAAE3G,IAAiB,CACjD,MAAM+f,EAASgC,EAAaC,MAAM,UAAUzsB,QAAQ+d,GAAUA,IAExD6M,EAAcJ,EAAOxqB,QAAO+d,GAAS+J,EAAa/J,KACxD2I,GAAOrR,GAAS,IAAI,IAAIC,IAAI,IAAID,KAASuV,OAErCA,EAAY3sB,SAAWusB,EAAOvsB,QAC9BkpB,GAAWtc,IAAM,IAAWA,EAAQ4b,IAAI,MAE5CrV,EAAEzD,OAAO1I,MAAQ,EACrB,GAgQwB8M,OAASX,IACL,MAAMob,EAAepb,EAAEzD,OAAO1I,MAAMgjB,OAChCuE,IACI1E,EAAa0E,IACb9F,GAAOrR,GAAS,IAAI,IAAIC,IAAI,IAAID,EAAMmX,OACtCrF,GAAWtc,IAAM,IAAWA,EAAQ4b,IAAI,OAExCU,GAAWtc,IAAM,IAAWA,EAAQ4b,IAAI,MAE5CrV,EAAEzD,OAAO1I,MAAQ,GACrB,EAEJY,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMmpB,aAAc,SACpClhB,YAAY,WAGb,OAANxC,QAAM,IAANA,OAAM,EAANA,EAAQge,MACL3iB,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,+CAC5B,OAAN0E,QAAM,IAANA,OAAM,EAANA,EAAQigB,kBAAmBjgB,EAAOigB,gBAAgBzqB,OAAS,IACxD6F,EAAAA,EAAAA,MAAA,KAAG+B,UAAU,0BAA0B7C,MAAO,CAAE8G,SAAU,OAAQlE,MAAO,WAAY7B,SAAA,CAAC,mBACjE0E,EAAOigB,gBAAgBkE,KAAK,eASjEjF,IAAW7jB,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,EAAGlG,UAAU,OAAM9B,SAAA,EACnCD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,OAAKhB,MAAO,CAAEiB,MAAO,QAAU4B,UAAW7C,GAAMkpB,OAChDloB,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,SAC3CC,EAAAA,EAAAA,KAACmoB,GAAAA,EAAY,CACT/d,IAAKoZ,EACLviB,MAAO0hB,EACPyF,eAAgBjC,GAChBra,SAAWsB,IACPwV,EAAOxV,EAAEnM,OACTkiB,GAAWtc,IAAM,IAAWA,EAAQ8b,KAAK,KAAS,EAEtD0F,UAAQ,EACRC,YAAalF,EACbhgB,QAASsjB,GACT5Y,QAAS4Y,GACT6B,QA3SJnb,IACpB,MAAMob,EAAepb,EAAEzD,OAAO1I,MAC9B,GAAIunB,EAAazb,SAAS,MAAkB,UAAVK,EAAE3G,IAAiB,CACjD,MAAM+f,EAASgC,EAAaC,MAAM,UAAUzsB,QAAQ+d,GAAUA,IAExD6M,EAAcJ,EAAOxqB,QAAO+d,GAAS+J,EAAa/J,KACxD6I,GAAQvR,GAAS,IAAI,IAAIC,IAAI,IAAID,KAASuV,OAEtCA,EAAY3sB,SAAWusB,EAAOvsB,QAC9BkpB,GAAWtc,IAAM,IAAWA,EAAQ8b,KAAK,MAE7CvV,EAAEzD,OAAO1I,MAAQ,EACrB,GAgSwB8M,OAASX,IACL,MAAMob,EAAepb,EAAEzD,OAAO1I,MAAMgjB,OAChCuE,IACI1E,EAAa0E,IACb5F,GAAQvR,GAAS,IAAI,IAAIC,IAAI,IAAID,EAAMmX,OACvCrF,GAAWtc,IAAM,IAAWA,EAAQ8b,KAAK,OAEzCQ,GAAWtc,IAAM,IAAWA,EAAQ8b,KAAK,MAE7CvV,EAAEzD,OAAO1I,MAAQ,GACrB,EAEJY,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMmpB,aAAcnpB,GAAM2jB,IAAK,SAC/C1b,YAAY,YAGb,OAANxC,QAAM,IAANA,OAAM,EAANA,EAAQke,OACL7iB,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,gDAC5B,OAAN0E,QAAM,IAANA,OAAM,EAANA,EAAQkgB,mBAAoBlgB,EAAOkgB,iBAAiB1qB,OAAS,IAC1D6F,EAAAA,EAAAA,MAAA,KAAG+B,UAAU,0BAA0B7C,MAAO,CAAE8G,SAAU,OAAQlE,MAAO,WAAY7B,SAAA,CAAC,mBACjE0E,EAAOkgB,iBAAiBiE,KAAK,gBAOtE9oB,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,OAAM9B,SAAA,EACzBD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,OAAKhB,MAAO,CAAEiB,MAAO,QAAU4B,UAAW7C,GAAMkpB,OAChDloB,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,aAC3CD,EAAAA,EAAAA,MAACmZ,GAAAA,EAAS,CAAAlZ,SAAA,EACNC,EAAAA,EAAAA,KAACmZ,GAAAA,EAAS,CAAApZ,UACK,OAAVqlB,SAAU,IAAVA,QAAU,EAAVA,GAAYwC,cAAc5nB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQ3D,SAAU,WAAYyL,IAAK,aAEnH1N,EAAAA,EAAAA,KAACqZ,GAAAA,EAAS,CACNpY,MAAO4hB,EACPhhB,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM6pB,SAAU,SAChC7pB,MAAO,CAAE0oB,YAAa,SACtB5b,SAAWsB,IACP0V,EAAW1V,EAAEzD,OAAO1I,OACpBkiB,GAAWtc,IAAM,IAAWA,EAAQgc,SAAS,KAAS,EAE1D5b,YAAY,8DAIjB,OAANxC,QAAM,IAANA,OAAM,EAANA,EAAQoe,WACL7iB,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,4BAG3CD,EAAAA,EAAAA,MAACgI,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,OAAM9B,SAAA,EACzBD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,2BAA2B7C,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACtEC,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM8pB,OAAO/oB,SAAC,aACrCC,EAAAA,EAAAA,KAACmZ,GAAAA,EAAS,CAACna,MAAO,CAAEiD,SAAU,WAAY8J,MAAO,OAAQ2B,IAAK,OAAQqb,OAAQ,GAAIhpB,UACnE,OAAVqlB,SAAU,IAAVA,QAAU,EAAVA,GAAYwC,cAAc5nB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQ3D,SAAU,WAAYyL,IAAK,aAEnH1N,EAAAA,EAAAA,KAACgpB,GAAAA,EAAM,CACHhqB,MAAO,CAAEqZ,UAAW,SACpB4Q,eAAgBzH,GAChBvgB,MAAO8hB,EACP9b,YAAY,yBACZiiB,aAAe9b,IACX4V,EAAQ5V,EAAE+b,WACVhG,GAAWtc,IAAM,IAAWA,EAAQkc,MAAM,KAAS,QAIxD,OAANte,QAAM,IAANA,OAAM,EAANA,EAAQse,QACL/iB,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,4BAG3CC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAGhI,UACRD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,eAC3CC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLjc,QACK0oB,KACsB,QADRpD,EACXoD,GAAexoB,YAAI,IAAAolB,OAAA,EAAnBA,EAAqBpkB,KAAKqoB,IAAQ,CAC9B5kB,MAAO4kB,EAASjqB,GAChBoF,MAAO,GAAG6kB,EAAShjB,aAE3B,GAEJumB,eAAe,sBACfvnB,WAAWwD,EAAAA,EAAAA,GACPrG,GAAMyoB,eACN,+BAEJzoB,MAAO,CAAE4G,OAAQ,OAAQ8hB,YAAa,QACtCzgB,YAAY,mBACZ6E,SAAWsB,IACP8V,EAAa9V,EAAEnM,MAAM,EAEzBA,MAAOgiB,EACPrN,QAAuB,OAAdoP,SAAc,IAAdA,QAAc,EAAdA,GAAgB4C,WACzBlO,sBAAsB,cAKjC,EC/qBjB,GAXqBhZ,IAA2E,IAA1E,KAAEsD,EAAI,QAAEC,EAAO,eAAE4d,EAAc,WAAE7S,EAAU,SAAE9I,EAAQ,YAAEpB,GAAapE,EAMxF,OACEV,EAAAA,EAAAA,KAACqpB,GAAqB,CAACrlB,KAAMA,EAAMC,QAASA,EAAS4d,eAAgBA,EAAgB7S,WAAYA,EAAY8S,KANlG5mB,eACOgL,EAAS,QAK8FojB,iBAAkBxkB,GAAe,ECaxJuc,IACFrhB,EAAAA,EAAAA,KAAA,OAAK6B,UAAW,GAAG7C,GAAMsiB,cAAcvhB,UACnCD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,wCAAuC9B,SAAA,EAClDC,EAAAA,EAAAA,KAAA,KAAG6B,UAAW7C,GAAMuqB,UAAUxpB,UAACC,EAAAA,EAAAA,KAACwpB,GAAAA,EAAY,CAACznB,KAAM,GAAIH,MAAM,eAC7D5B,EAAAA,EAAAA,KAAA,QAAM6B,UAAW,gCAAgC7C,GAAMuiB,cAAcxhB,SAAC,kBAiclF,GAjZuBW,IAA0D,IAAD+oB,EAAAC,EAAAC,EAAA,IAAxD,KAAE3lB,EAAI,QAAEC,EAAO,QAAEoE,EAAO,eAAEwZ,EAAc,QAAE+H,GAASlpB,EACvE,MAAM,UAAEtE,IAAckM,EAAAA,EAAAA,KAChByZ,EAAKrf,EAAAA,OAAa,OACjB0N,EAAWyT,IAAgB3f,EAAAA,EAAAA,WAAS,IACpC2lB,EAAWC,IAAgB5lB,EAAAA,EAAAA,WAAS,IACpCO,EAAQ0e,IAAajf,EAAAA,EAAAA,UAAS,CAAC,IAC/B6lB,EAAUC,IAAe9lB,EAAAA,EAAAA,UAAS,KAClC+lB,EAAeC,IAAoBhmB,EAAAA,EAAAA,WAAS,IAC5CkC,EAAS4I,IAAc9K,EAAAA,EAAAA,UAAS,CAAC,IAEjCimB,EAAYC,IAAkBlmB,EAAAA,EAAAA,UAAS,OACvCmmB,EAAUC,IAAepmB,EAAAA,EAAAA,UAAS,KAClCqW,EAAOgQ,IAAYrmB,EAAAA,EAAAA,UAAS,OAC5BsmB,EAAmBC,IAAwBvmB,EAAAA,EAAAA,WAAS,GAErDwmB,GAAwB3a,EAAAA,EAAAA,GAAS,CACnCC,SAAU,CAAC,oBACXC,QAAS0a,GAAAA,KAGPC,GAAoB7a,EAAAA,EAAAA,GAAS,CAC/BC,SAAU,CAAC,eAAgB5T,GAC3B6T,QAASA,KAAM4a,EAAAA,GAAAA,IAAqBzuB,GACpCkU,UAAWlU,GAAawtB,EACxBrZ,MAAO,KAGX1L,EAAAA,EAAAA,YAAU,KACwB,IAADimB,EAAR,OAAjBF,QAAiB,IAAjBA,GAAAA,EAAmBpuB,MACnB4tB,EAAgC,OAAjBQ,QAAiB,IAAjBA,GAAuB,QAANE,EAAjBF,EAAmBpuB,YAAI,IAAAsuB,OAAN,EAAjBA,EAAyBjF,SAC5C,GACD,CAAkB,OAAjB+E,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBpuB,OAEvB,MAAMuuB,GAAgBhb,EAAAA,EAAAA,GAAS,CAC3BC,SAAU,CAAC,cAAema,GAC1Bla,QAASA,KAAM+a,EAAAA,GAAAA,IAAqBb,GACpC7Z,UAAW6Z,EACX5Z,MAAO,IA+BLrK,EAAWhL,UAAmB,IAAD+vB,EAE/B,IAAK7uB,EAAW,OAAOuM,EAAAA,GAAMG,MAAM,gBACnC,IAAIoiB,EAA6B,OAARb,QAAQ,IAARA,OAAQ,EAARA,EAAUruB,QAAOmvB,IAAYA,EAAQC,SAC9D,GAAuB,OAAlBF,QAAkB,IAAlBA,IAAAA,EAAoBjxB,OAAQ,OAAO0O,EAAAA,GAAMG,MAAM,+BACpDqa,EAAU,CAAC,GAEX,MAAMkI,EAAY,CAAC,EACbC,EAAwB,OAARjB,QAAQ,IAARA,GAA4C,QAApCY,EAARZ,EAAUruB,QAAOmvB,IAAYA,EAAQC,gBAAO,IAAAH,OAApC,EAARA,EAA8CztB,KAAK2tB,IACrE,MAAMI,EAAe,CAAC,EAItB,OAFKJ,EAAQtqB,QAAO0qB,EAAa1qB,OAAQ,GACpCsqB,EAAQ3nB,cAAa+nB,EAAa/nB,aAAc,GAC9C+nB,CAAY,IAWvB,GATID,EAAcvO,MAAKwO,GAAgBrmB,OAAOC,KAAKomB,GAActxB,OAAS,MACtEoxB,EAAUhB,SAAWiB,GAGpB/Q,IACD8Q,EAAU9Q,OAAQ,GAGtB4I,EAAUkI,GAC4B,IAAlCnmB,OAAOC,KAAKkmB,GAAWpxB,OAAc,CACrC,MAAMuxB,EAAW,IAAIC,SAuBrB,GArBApB,EAAS7Y,SAAQ,CAAC2Z,EAASjuB,KACvBsuB,EAASjwB,OAAO,YAAY2B,UAAeiuB,EAAQtqB,OACnD2qB,EAASjwB,OAAO,YAAY2B,gBAAqBiuB,EAAQ3nB,aACzDgoB,EAASjwB,OAAO,YAAY2B,aAAkBiuB,EAAQC,QACjC,OAAjBR,QAAiB,IAAjBA,GAAAA,EAAmBpuB,MAAQ2uB,EAAQvvB,IAAI4vB,EAASjwB,OAAO,YAAY2B,OAAYiuB,EAAQvvB,GAAG,IAE9FuuB,EAAYqB,EAASjwB,OAAO,WAAY4uB,GACvCqB,EAASjwB,OAAO,WAAY,IAElB,SAAXmwB,GACAF,EAASjwB,OAAO,SAAU,QAC1BiwB,EAASjwB,OAAO,UAAkB,OAAP6K,QAAO,IAAPA,OAAO,EAAPA,EAASyc,SACpC2I,EAASjwB,OAAO,aAAqB,OAAP6K,QAAO,IAAPA,OAAO,EAAPA,EAASygB,YACvC2E,EAASjwB,OAAO,aAAqB,OAAP6K,QAAO,IAAPA,OAAO,EAAPA,EAAS0gB,YACvC0E,EAASjwB,OAAO,KAAa,OAAP6K,QAAO,IAAPA,OAAO,EAAPA,EAASmc,IACpB,OAAPnc,QAAO,IAAPA,GAAAA,EAASqc,IAAI+I,EAASjwB,OAAO,KAAa,OAAP6K,QAAO,IAAPA,OAAO,EAAPA,EAASqc,IACrC,OAAPrc,QAAO,IAAPA,GAAAA,EAASuc,KAAK6I,EAASjwB,OAAO,MAAc,OAAP6K,QAAO,IAAPA,OAAO,EAAPA,EAASuc,MAElD6I,EAASjwB,OAAO,SAAU,UAGrB,OAALgf,QAAK,IAALA,GAAAA,EAAOoR,iBAAkB,CACzB,MAAMC,GAAcna,EAAAA,EAAAA,IAAO,GAC3B+Z,EAASjwB,OAAO,QAAc,OAALgf,QAAK,IAALA,OAAK,EAALA,EAAOoR,iBAAkB,GAAGC,QACzD,CACA,MAAMC,EAAczJ,aAAaC,QAAQ,gBAEzCwB,GAAa,GACb,IAAInoB,EAAS,OACTN,EAAM,kDAA0DgB,KACpE2M,QAAQC,IAAI,4BAA8C,OAAjB4hB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBpuB,MACvC,OAAjBouB,QAAiB,IAAjBA,GAAAA,EAAmBpuB,OACnBd,EAAS,MACTN,EAAM,qDAA6DgB,MAEvE,IACIynB,GAAa,GAEb,MAAMiI,QAAiBC,MAAM3wB,EAAK,CAC9BM,OAAQA,EACRswB,QAAS,CACL,cAAiB,UAAUH,KAE/BtvB,KAAMivB,UAGSM,EAASG,OAG5B,OAFApI,GAAa,GAETiI,EAASI,IACTpnB,IACA6D,EAAAA,GAAMC,QAAQ,YAAuB,SAAX8iB,EAAoB,mBAAqB,2BACnErjB,IACAuiB,EAAkBviB,UACX,YAEPM,EAAAA,GAAMG,MAAM,aAAwB,SAAX4iB,EAAoB,kBAAoB,4CAC1D,QAEf,CAAE,MAAO5iB,GAIL,OAHA+a,GAAa,GACb9a,QAAQD,MAAM,2BAA4BA,GAC1CH,EAAAA,GAAMG,MAAM,aAAwB,SAAX4iB,EAAoB,kBAAoB,4CAC1D,OACX,CAAC,QACG7H,GAAa,EACjB,CACJ,GAEE/e,EAAcA,KAChBb,GAAQ,GAKRimB,GAAiB,EAAM,EAmBrBpE,GACFhmB,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,iCAAgC9B,SAAA,EAC3CC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAAClD,UAAU,0BAA0BuB,QAAS0B,EAAY/E,SAAC,YAClED,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,mCAAkC9B,SAAA,EAC7CD,EAAAA,EAAAA,MAACiF,EAAAA,EAAM,CAAClD,UAAU,kBAAkBuB,QArBvB+oB,KACrB7B,EAAY,IAAID,EAAU,CAAExpB,MAAO,GAAI2C,YAAa,KAAM,EAoBYzD,SAAA,CAAC,qBAC1CC,EAAAA,EAAAA,KAACosB,GAAAA,EAAM,CAACxqB,MAAM,gBAEnC9B,EAAAA,EAAAA,MAACiF,EAAAA,EAAM,CAAClD,UAAU,iBAAiBoD,SAAUmL,EAAWhN,QAAS8C,EAASnG,SAAA,CAAC,gBAEtEqQ,IACGpQ,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CACZlnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQhE,MAAO,cAI3D5B,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAAClD,UAAU,eAAeuB,QArKlBipB,KAAO,IAADC,EAE7B,IAAKlwB,EAAW,OAAOuM,EAAAA,GAAMG,MAAM,gBACnC,IAAIoiB,EAA6B,OAARb,QAAQ,IAARA,OAAQ,EAARA,EAAUruB,QAAOmvB,IAAYA,EAAQC,SAC9D,GAAuB,OAAlBF,QAAkB,IAAlBA,IAAAA,EAAoBjxB,OAAQ,OAAO0O,EAAAA,GAAMG,MAAM,+BAEpD,MAAMuiB,EAAY,CAAC,EACbC,EAAwB,OAARjB,QAAQ,IAARA,GAA4C,QAApCiC,EAARjC,EAAUruB,QAAOmvB,IAAYA,EAAQC,gBAAO,IAAAkB,OAApC,EAARA,EAA8C9uB,KAAK2tB,IACrE,MAAMI,EAAe,CAAC,EAItB,OAFKJ,EAAQtqB,QAAO0qB,EAAa1qB,OAAQ,GACpCsqB,EAAQ3nB,cAAa+nB,EAAa/nB,aAAc,GAC9C+nB,CAAY,IAEnBD,EAAcvO,MAAKwO,GAAgBrmB,OAAOC,KAAKomB,GAActxB,OAAS,MACtEoxB,EAAUhB,SAAWiB,GAOzBnI,EAAUkI,GAE4B,IAAlCnmB,OAAOC,KAAKkmB,GAAWpxB,SACvBgK,GAAQ,GACRimB,GAAiB,GACrB,EA0IqEnqB,SAAC,wBA0B1E,OAnBA8E,EAAAA,EAAAA,YAAU,KAAO,IAAD0nB,EACZ,GAAIpC,GAAcK,EAAmB,CAAC,IAADgC,EAAAC,EAAAC,EAAAC,EAAAC,EACDC,EAAhC,GAAiB,OAAb9B,QAAa,IAAbA,GAAmB,QAANyB,EAAbzB,EAAevuB,YAAI,IAAAgwB,GAAnBA,EAAqBjS,MACrBgQ,EAAS,CAAEuC,mBAAiC,OAAb/B,QAAa,IAAbA,GAAmB,QAAN8B,EAAb9B,EAAevuB,YAAI,IAAAqwB,OAAN,EAAbA,EAAqBtS,QAExD+P,EAAY,KACY,OAAjBM,QAAiB,IAAjBA,GAAuB,QAAN6B,EAAjB7B,EAAmBpuB,YAAI,IAAAiwB,GAAU,QAAVC,EAAvBD,EAAyBpC,gBAAQ,IAAAqC,OAAhB,EAAjBA,EAAmClvB,KAAI2tB,IAAO,IAAUA,EAASC,QAAQ,QAAY,OACxE,OAAbL,QAAa,IAAbA,GAAmB,QAAN4B,EAAb5B,EAAevuB,YAAI,IAAAmwB,GAAU,QAAVC,EAAnBD,EAAqBtC,gBAAQ,IAAAuC,OAAhB,EAAbA,EAA+BpvB,KAAImK,IAAA,IAAC,GAAE/L,KAAO8W,GAAM/K,EAAA,MAAM,IAAK+K,EAAM,MAAM,IAErF,MAAO,GAAIyX,KAAgC,OAAjBS,QAAiB,IAAjBA,GAAuB,QAAN2B,EAAjB3B,EAAmBpuB,YAAI,IAAA+vB,OAAN,EAAjBA,EAAyB1G,UAAU,CAAC,IAADkH,EAAAC,EAAAC,EACrBC,EAApC,GAAqB,OAAjBtC,QAAiB,IAAjBA,GAAuB,QAANmC,EAAjBnC,EAAmBpuB,YAAI,IAAAuwB,GAAvBA,EAAyBxS,MACzBgQ,EAAS,CAAEuC,mBAAqC,OAAjBlC,QAAiB,IAAjBA,GAAuB,QAANsC,EAAjBtC,EAAmBpuB,YAAI,IAAA0wB,OAAN,EAAjBA,EAAyB3S,aACrD,GAAiB,OAAbwQ,QAAa,IAAbA,GAAmB,QAANiC,EAAbjC,EAAevuB,YAAI,IAAAwwB,GAAnBA,EAAqBzS,MAAO,CAAC,IAAD4S,EACnC5C,EAAS,CAAEuC,mBAAiC,OAAb/B,QAAa,IAAbA,GAAmB,QAANoC,EAAbpC,EAAevuB,YAAI,IAAA2wB,OAAN,EAAbA,EAAqB5S,OACxD,CACA+P,EAA6B,OAAjBM,QAAiB,IAAjBA,GAAuB,QAANqC,EAAjBrC,EAAmBpuB,YAAI,IAAAywB,OAAN,EAAjBA,EAAyB5C,SACzC,IACD,CAACF,EAAyB,OAAbY,QAAa,IAAbA,OAAa,EAAbA,EAAevuB,KAAuB,OAAjBouB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBpuB,QAGpDsD,EAAAA,EAAAA,MAAAW,EAAAA,SAAA,CAAAV,SAAA,EACID,EAAAA,EAAAA,MAACsnB,GAAAA,EAAM,CACHC,QAASrjB,EACTsjB,OAAO,EACP9F,OAAQH,GACRkG,OAAQzB,EACRjkB,UAAW,GAAG7C,GAAMsoB,yBACpBtoB,MAAO,CAAEiB,MAAO,SAChBuF,OAAQV,EAAY/E,SAAA,EAEpBC,EAAAA,EAAAA,KAAC6H,EAAAA,EAAG,CAAChG,UAAU,wCAAuC9B,UAClDC,EAAAA,EAAAA,KAAC8H,EAAAA,EAAG,CAACC,GAAI,GAAIlG,UAAU,OAAM9B,UACzBD,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwoB,aAAaznB,SAAC,eAC3CC,EAAAA,EAAAA,KAACuY,EAAAA,EAAQ,CACLjc,QACKouB,IAC6B,QADRjB,EAClBiB,EAAsBluB,YAAI,IAAAitB,OAAA,EAA1BA,EAA4BjsB,KAAKqoB,IAAQ,CACrC5kB,MAAO4kB,EAASjqB,GAChBoF,MAAO,GAAG6kB,EAAShjB,aAE3B,GAEJhB,WAAWwD,EAAAA,EAAAA,GACPrG,GAAMyoB,eACN,+BAEJzoB,MAAO,CAAE4G,OAAQ,OAAQ8hB,YAAa,QACtCzgB,YAAY,kBACZ6E,SAAWsB,IACPgd,EAAehd,EAAEnM,OACjBspB,EAAS,MACTE,GAAqB,EAAK,EAE9BxpB,MAAOkpB,EACPvU,QAA8B,OAArB8U,QAAqB,IAArBA,OAAqB,EAArBA,EAAuB9C,WAChCwF,WAAS,EACTvf,aAAa,QACb7R,QAAM,EACN0d,sBAAsB,KAE1B1Z,EAAAA,EAAAA,KAAA,OAAK6B,UAAW7C,GAAM6oB,aAAczkB,QAAUgK,GAAM2U,EAAGpK,QAAQmQ,OAAO1a,GAAGrN,UACrEC,EAAAA,EAAAA,KAACoe,EAAAA,EAAU,CAACrc,KAAM,GAAIH,MAAM,iBAEhC9B,EAAAA,EAAAA,MAACioB,GAAAA,EAAY,CAAC3d,IAAK2X,EAAGhiB,SAAA,EAClBC,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,UAAU7C,MAAO,CAAE4C,MAAO,UAAWomB,WAAY,QAASjoB,SAAC,+CACxED,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,UAAU7C,MAAO,CAAE4C,MAAO,UAAWomB,WAAY,QAASjoB,SAAA,CAAC,uCAAmCC,EAAAA,EAAAA,KAAA,SAAM,4CAA8CA,EAAAA,EAAAA,KAAA,SAAM,4BAKvLF,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,0BAAyB9B,SAAA,EACpCC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,8DAA6D9B,SAE/D,OAALwa,QAAK,IAALA,GAAAA,EAAOuS,oBAEHhtB,EAAAA,EAAAA,MAAA,OAAKd,MAAO,CAAEiD,SAAU,WAAYR,OAAQ,WAAa2B,QAASA,IAAM0mB,GAAa,GAAM/pB,SAAA,EACvFC,EAAAA,EAAAA,KAAA,OAAK6B,UAAW7C,GAAMquB,SAAUruB,MAAO,CAAEgD,SAAU,SAAUzB,UAAW,UAAWR,UAC/EC,EAAAA,EAAAA,KAAA,OACIstB,IAAI,gBACJC,IAAU,OAALhT,QAAK,IAALA,OAAK,EAALA,EAAOuS,mBACZ9tB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,aAGxC5F,EAAAA,EAAAA,KAAA,OAAK6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAMwuB,SAAU,kBAAmBpqB,QAAUgK,IAAQA,EAAEqgB,kBAAmBlD,EAAS,KAAK,EAAIxqB,UAC7GC,EAAAA,EAAAA,KAACmI,EAAAA,EAAK,CAACvG,MAAM,UAAUG,KAAM,WAGnCjC,EAAAA,EAAAA,MAAA,OAAK+B,UAAW7C,GAAM0uB,UAAW1uB,MAAO,CAAEyC,OAAQ,WAAa2B,QAASA,IAAM0mB,GAAa,GAAM/pB,SAAA,EAC/FC,EAAAA,EAAAA,KAAA,OAAK6B,UAAW7C,GAAM2uB,aAAa5tB,UAC/BC,EAAAA,EAAAA,KAAC4tB,GAAAA,EAAW,CAAChsB,MAAM,UAAUG,KAAM,QAEvC/B,EAAAA,EAAAA,KAAA,KAAG6B,UAAW7C,GAAM6uB,WAAW9tB,SAAC,0BAIhDC,EAAAA,EAAAA,KAAC8tB,GAAAA,EAAY,CAAC9pB,KAAM6lB,EAAW5lB,QAAS6lB,EAAciE,SAAUxD,KACzD,OAAN9lB,QAAM,IAANA,OAAM,EAANA,EAAQ8V,SACLva,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,6BAA4B9B,SAAE,uBA0B/CC,EAAAA,EAAAA,KAACguB,GAAAA,EAAS,CAACC,YAAa,EAAGpsB,UAAU,OAAM9B,SAC9B,OAARsqB,QAAQ,IAARA,GAA0E,QAAlEX,EAARW,EAAU7sB,KAAI,CAAC2tB,EAAS+C,KAAa,IAAW/C,EAAS+C,2BAAiB,IAAAxE,GAAoC,QAApCC,EAA1ED,EAA4E1tB,QAAOmvB,IAAYA,EAAQC,gBAAO,IAAAzB,OAAtG,EAARA,EAAgHnsB,KAAI,CAAC2tB,EAASjuB,KAAK,IAAAixB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAChI5uB,EAAAA,EAAAA,MAAC6uB,GAAAA,EAAY,CAA2C9sB,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM4vB,UAAW,CAAE,CAAC5vB,GAAM8J,UAAe,OAANrE,QAAM,IAANA,GAAgB,QAAV0pB,EAAN1pB,EAAQ4lB,gBAAQ,IAAA8D,GAAS,QAATC,EAAhBD,EAAmBjxB,UAAM,IAAAkxB,GAAzBA,EAA2BvtB,OAAe,OAAN4D,QAAM,IAANA,GAAgB,QAAV4pB,EAAN5pB,EAAQ4lB,gBAAQ,IAAAgE,GAAS,QAATC,EAAhBD,EAAmBnxB,UAAM,IAAAoxB,GAAzBA,EAA2B9qB,cAA+B,sBAAuBge,OAAQ,aAAatkB,EAAQ,IAAI6C,SAAA,EAC7PD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,+BAA+B7C,MAAO,CAAEsZ,aAAc,QAASvY,SAAA,EAC1EC,EAAAA,EAAAA,KAAA,SAAO6B,UAAW7C,GAAMgC,MAAMjB,SAAC,qBAC/BD,EAAAA,EAAAA,MAACmZ,GAAAA,EAAS,CAAAlZ,SAAA,EACNC,EAAAA,EAAAA,KAACmZ,GAAAA,EAAS,CAAApZ,UACQ,OAAbgrB,QAAa,IAAbA,OAAa,EAAbA,EAAenD,cAAc5nB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQ3D,SAAU,WAAYyL,IAAK,aAEtH1N,EAAAA,EAAAA,KAACqZ,GAAAA,EAAS,CACNpY,MAAc,OAAPkqB,QAAO,IAAPA,OAAO,EAAPA,EAAStqB,MAChBgB,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM6pB,SAAU,qBAChC/c,SAAWsB,IACPkd,GAAYuE,IACR,MAAMC,EAAc,IAAID,GAExB,OADAC,EAAmB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS+C,eAAiB,IAAKY,EAAmB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS+C,eAAgBrtB,MAAOuM,EAAEzD,OAAO1I,OACzF6tB,CAAW,GACpB,EAEN7nB,YAAY,sBAGb,OAANxC,QAAM,IAANA,GAAgB,QAAV8pB,EAAN9pB,EAAQ4lB,gBAAQ,IAAAkE,GAAS,QAATC,EAAhBD,EAAmBrxB,UAAM,IAAAsxB,OAAnB,EAANA,EAA2B3tB,SACxBb,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,0BAG3CD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,sCAAsC7C,MAAO,CAAEiD,SAAU,YAAalC,SAAA,EACjFC,EAAAA,EAAAA,KAAA,SAAO6B,WAAWwD,EAAAA,EAAAA,GAAKrG,GAAM8pB,OAAO/oB,SAAC,eACrCC,EAAAA,EAAAA,KAACmZ,GAAAA,EAAS,CAACna,MAAO,CAAEiD,SAAU,WAAY8J,MAAO,OAAQ2B,IAAK,OAAQqb,OAAQ,GAAIhpB,UAChE,OAAbgrB,QAAa,IAAbA,OAAa,EAAbA,EAAenD,cAAc5nB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,OAAQ3D,SAAU,WAAYyL,IAAK,aAEtH1N,EAAAA,EAAAA,KAAC+uB,GAAAA,EAAkB,CACf9tB,MAAOkqB,EAAQ3nB,YACfsI,SAAW8T,IACP0K,GAAYuE,IACR,MAAMC,EAAc,IAAID,GAExB,OADAC,EAAmB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS+C,eAAiB,IAAKY,EAAmB,OAAP3D,QAAO,IAAPA,OAAO,EAAPA,EAAS+C,eAAgB1qB,YAAaoc,GACtFkP,CAAW,GACpB,EAEN7nB,YAAY,yBACZrB,OAAQ,IACRopB,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,cAAc,EACdC,gBAAgB,EAChBC,SAAUjzB,KAEP,OAANqI,QAAM,IAANA,GAAgB,QAAVgqB,EAANhqB,EAAQ4lB,gBAAQ,IAAAoE,GAAS,QAATC,EAAhBD,EAAmBvxB,UAAM,IAAAwxB,OAAnB,EAANA,EAA2BlrB,eACxBxD,EAAAA,EAAAA,KAAA,KAAG6B,UAAU,qBAAoB9B,SAAE,4BAG3CC,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,gDAA+C9B,UAC1DC,EAAAA,EAAAA,KAAC+E,EAAAA,EAAM,CAAClD,UAAU,wBAAwBuB,QAASA,IAtNvDksB,EAACpyB,EAAOtB,KAE5B0uB,EADA1uB,EACaizB,GACTA,EAAarxB,KAAI,CAAC2tB,EAASttB,IACvBA,IAAMX,EAAQ,IAAKiuB,EAASC,QAAQ,GAASD,IAIxC0D,GACTA,EAAa7yB,QAAO,CAACmvB,EAASttB,IAAMA,IAAMX,IAElD,EA2MqFoyB,CAA2B,OAAPnE,QAAO,IAAPA,OAAO,EAAPA,EAAS+C,cAAsB,OAAP/C,QAAO,IAAPA,OAAO,EAAPA,EAASvvB,IAAImE,SAAC,0BApDjG,OAAPorB,QAAO,IAAPA,OAAO,EAAPA,EAASvvB,KAAM,aAAasB,IAsDhC,aAK/B8C,EAAAA,EAAAA,KAACuvB,GAAY,CAACvrB,KAAMimB,EAAehmB,QAASimB,EAAkBrI,eAAgBA,EAAgB7S,WAAYA,EAAY9I,SAAUA,EAAUpB,YAAaA,MACxJ,E,gBCrdX,MAUA,GAVkBpE,IAAsE,IAArE,KAAEsD,EAAI,QAAEC,EAAO,eAAE4d,EAAc,WAAE7S,EAAU,iBAAEwgB,GAAkB9uB,EAKhF,OACEV,EAAAA,EAAAA,KAACyvB,GAAAA,EAAa,CAACzrB,KAAMA,EAAMC,QAASA,EAAS4d,eAAgBA,EAAgB7S,WAAYA,EAAY8S,KAL1F5mB,gBACLs0B,EAAiB,OAAO,GAIqF,EC2avH,GApauBE,KAAO,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACzB,MAAMC,GAAWC,EAAAA,EAAAA,OACX,YAAEC,IAAgBC,EAAAA,GAAAA,MACjB9O,EAAgBxG,IAAqBnX,EAAAA,EAAAA,UAAS,KAC9C0sB,EAAgBC,IAAqB3sB,EAAAA,EAAAA,WAAS,IAC9C4sB,EAAmBC,IAAwB7sB,EAAAA,EAAAA,WAAS,IACpDkM,EAAWyT,IAAgB3f,EAAAA,EAAAA,WAAS,IACpCoX,EAAW0V,IAAgB9sB,EAAAA,EAAAA,UAAS,aACpCkC,EAAS4I,IAAc9K,EAAAA,EAAAA,UAAS,CAAC,IACjC+sB,EAAmB5hB,IAAwBnL,EAAAA,EAAAA,UAAS,KACpDgtB,EAAQniB,IAAa7K,EAAAA,EAAAA,UAAS,CAAE8N,OAAQ,EAAGI,kBAAmB,EAAG1B,SAAU,EAAGyB,IAAK,EAAGvL,MAAO,KAC9F,UAAExK,IAAckM,EAAAA,EAAAA,KAChB6oB,GAAkBphB,EAAAA,EAAAA,GAAS,CAC7BC,SAAU,CAAC,YAAa5T,GACxB6T,QAASA,KAAM9T,EAAAA,EAAAA,IAAmBC,GAClCkU,UAAWlU,EACXmU,MAAO,EACP6gB,UAAW,EACXlhB,UAAW,EACXC,sBAAsB,KAG1BtL,EAAAA,EAAAA,YAAU,KACN,GAAKzI,GAmBE,GAAmB,OAAf+0B,QAAe,IAAfA,GAAAA,EAAiB30B,KAAM,CAAC,IAAD60B,EAAAC,EAC9B,IAAIhW,EAA2B,OAAf6V,QAAe,IAAfA,GAAqB,QAANE,EAAfF,EAAiB30B,YAAI,IAAA60B,GAAW,QAAXC,EAArBD,EAAuB9T,iBAAS,IAAA+T,GAAhCA,EAAkC9T,UAAY,YAAc,WAC5EwT,EAAa1V,GACb,MAAMiW,EAAU,IAAoB,OAAfJ,QAAe,IAAfA,OAAe,EAAfA,EAAiB30B,MACtC,GAAkB,cAAd8e,EAA2B,CAC3B,MAAMkW,EAAkB,IAAIh3B,KAAKi3B,eAAe,QAAS,CACrDC,SAAU,mBACV/xB,KAAM,UACND,MAAO,UACPD,IAAK,UACLkyB,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,QAAQ,IAINC,GAAkBR,EAAQhU,UAAUE,WAQ1C,GAPA8T,EAAQhU,UAAUE,WAAa,IAAIle,KAAKwyB,EAAiB,KAAwB,IAAjBA,EAAwBA,GACxFhpB,QAAQC,IAAI,uBAAwBwoB,EAAgB12B,OAAOy2B,EAAQhU,UAAUE,aAE7E8T,EAAQhU,UAAUG,QAAU6T,EAAQhU,UAAUG,OAC9C6T,EAAQhU,UAAUS,kBAAoBuT,EAAQhU,UAAUS,iBACxDuT,EAAQhU,UAAUU,kBAAoBsT,EAAQhU,UAAUU,iBAEvB,IAA7BsT,EAAQhU,UAAUG,OAAc,CAChC,MAAMsU,GAAgBT,EAAQhU,UAAUI,SACxC4T,EAAQhU,UAAUI,SAAW,IAAIpe,KAAKyyB,EAAe,KAAsB,IAAfA,EAAsBA,GAClFjpB,QAAQC,IAAI,qBAAsBwoB,EAAgB12B,OAAOy2B,EAAQhU,UAAUI,UAC/E,CACJ,MACI4T,EAAQhU,UAAY,CAChBC,UAAW,IACXC,WAAY,IAAIle,KAChBme,OAAQ,EACRM,iBAAkB,EAClBC,iBAAkB,GAG1BjP,GAAYnI,IAAM,IAAWA,KAAW0qB,KAC5C,MA3DgB,CACZ,MAAMU,EAAoBhQ,KAAKC,MAAMC,OAAO+P,eAAe7P,QAAQ,gBAAkB,MAC/EL,EAAcC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,gBAAkB,MAC7ErT,GAAYnI,IAAM,IACXA,EACHqI,SAAU,KACVyR,kBAAkB,EAClB/D,SAAU,CAAC,CAAEE,QAAoB,OAAXkF,QAAW,IAAXA,OAAW,EAAXA,EAAamQ,kBACnCjb,QAAyB,OAAjB+a,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBr2B,KAAM,GACjC0iB,WAA4B,OAAjB2T,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmB3T,YAAa,GAC3C9a,aAA8B,OAAjByuB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBG,eAAgB,GAChD7U,UAAW,CACPC,UAAW,IACXC,WAAY,IAAIle,KAChBme,OAAQ,EACRM,iBAAkB,EAClBC,iBAAkB,MAG9B,CAwCA,GACD,CAAC7hB,EAA0B,OAAf+0B,QAAe,IAAfA,OAAe,EAAfA,EAAiB30B,OAEhC,MAAM61B,GAAqB7pB,EAAAA,EAAAA,GAAY,CACnCC,WAAajM,IAASH,EAAAA,EAAAA,IAAiCG,GACvDkM,UAAYojB,IACHA,GACDnjB,EAAAA,GAAMG,MAAM,4DAChB,EAEJD,QAAUC,IACN+a,GAAa,GACb9a,QAAQD,MAAM,wCAAyCA,GACvDH,EAAAA,GAAMG,MAAM,4DAA4D,IAI1EwpB,GAAwB9pB,EAAAA,EAAAA,GAAY,CACtCC,WAAajM,IAASC,EAAAA,EAAAA,IAAiCL,EAAWI,GAClEkM,UAAYojB,IACHA,IACDjI,GAAa,GACblb,EAAAA,GAAMG,MAAM,yDAChB,EAEJD,QAAUC,IAAW,IAADypB,EAAAC,EAIhB,GAHA3O,GAAa,GACb9a,QAAQC,IAAI,wCAAyCF,EAAY,OAALA,QAAK,IAALA,GAAW,QAANypB,EAALzpB,EAAOtM,YAAI,IAAA+1B,GAAQ,QAARC,EAAXD,EAAarb,cAAM,IAAAsb,OAAd,EAALA,EAAsB,IAE5D,OAAb,OAAL1pB,QAAK,IAALA,OAAK,EAALA,EAAO2pB,QAAgB,CAAC,IAADC,EAAAC,EACvB,MAAMC,EAAW,OAAL9pB,QAAK,IAALA,GAAW,QAAN4pB,EAAL5pB,EAAOtM,YAAI,IAAAk2B,GAAQ,QAARC,EAAXD,EAAaxb,cAAM,IAAAyb,OAAd,EAALA,EAAsB,GAClC,GAAO,OAAHC,QAAG,IAAHA,GAAAA,EAAK7lB,SAAS,eAAoB,OAAH6lB,QAAG,IAAHA,GAAAA,EAAK7lB,SAAS,yBAC7C,OAAOpE,EAAAA,GAAMG,MAAM,qEAE3B,CAEAH,EAAAA,GAAMG,MAAM,wDAAwD,IAI5E,SAAS+pB,EAAgBvzB,GACrB,IAAKA,EAAM,MAAO,GAKlB,MAAO,IAJPA,EAAO,IAAIC,KAAKD,IACEwzB,iBACJC,OAAOzzB,EAAK0zB,WAAa,GAAGC,SAAS,EAAG,QAC1CF,OAAOzzB,EAAK4zB,WAAWD,SAAS,EAAG,MAEnD,CAEA,MAAMzD,EAAmBt0B,UAAmB,IAADi4B,EAAAvY,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAYvC,GAXA9U,EAAQslB,OAASA,EACF,SAAXA,WACOtlB,EAAQyc,eACRzc,EAAQygB,kBACRzgB,EAAQmc,UACRnc,EAAQqc,UACRrc,EAAQuc,WACRvc,EAAQ0gB,kBACR1gB,EAAQ6c,WAGJ,gBAAXyI,EACA,OAAa,OAAPtlB,QAAO,IAAPA,GAAAA,EAASkM,cAAiBlM,EAAQkM,aAAarY,QAAsB,UAAXyxB,OAChEmF,GAAkB,GADyEloB,EAAAA,GAAMG,MAAM,wCAK5F,mBAAX4iB,GAA0C,oBAAXA,IAC/BtlB,EAAQslB,OAAS,QAGrB,MAAM5nB,EAASsC,EAAQtC,OAGvB,GAFIsC,EAAQtC,eAAesC,EAAQtC,OAEvB,OAAPsC,QAAO,IAAPA,IAAAA,EAAS8Q,OAAQ,OAAOvO,EAAAA,GAAMG,MAAM,sBAEzC,IAAa,OAAP1C,QAAO,IAAPA,IAAAA,EAASwW,UAA6B,QAAjBuW,EAAC/sB,EAAQwW,gBAAQ,IAAAuW,IAAhBA,EAAkBl5B,SAAsB,UAAXyxB,EAAoB,OAAO/iB,EAAAA,GAAMG,MAAM,+BAChG,IAAa,OAAP1C,QAAO,IAAPA,IAAAA,EAASkM,eAAiBlM,EAAQkM,aAAarY,SAAsB,UAAXyxB,EAAoB,OAAO/iB,EAAAA,GAAMG,MAAM,wCACvG,IAAY,OAAP1C,QAAO,IAAPA,IAAAA,EAAS8I,WAAuB,UAAXwc,EAAoB,OAAO/iB,EAAAA,GAAMG,MAAM,2BACjE,IAAY,OAAP1C,QAAO,IAAPA,IAAAA,EAASuM,UAAsB,UAAX+Y,EAAoB,OAAO/iB,EAAAA,GAAMG,MAAM,uBAEhE,GAAkB,cAAdwS,IAAqC,OAAPlV,QAAO,IAAPA,IAAAA,EAASmX,WAAW,OAAO5U,EAAAA,GAAMG,MAAM,iCACzE,GAAkB,cAAdwS,IAAqC,OAAPlV,QAAO,IAAPA,GAAkB,QAAXwU,EAAPxU,EAASmX,iBAAS,IAAA3C,IAAlBA,EAAoB4C,WAAW,OAAO7U,EAAAA,GAAMG,MAAM,mCACpF,GAAkB,cAAdwS,IAAqC,OAAPlV,QAAO,IAAPA,GAAkB,QAAXyU,EAAPzU,EAASmX,iBAAS,IAAA1C,IAAlBA,EAAoB4C,YAAY,OAAO9U,EAAAA,GAAMG,MAAM,oCACrF,GAAkB,cAAdwS,IAA+B,CAAC,EAAG,EAAG,GAAGvO,SAAgB,OAAP3G,QAAO,IAAPA,GAAkB,QAAX0U,EAAP1U,EAASmX,iBAAS,IAAAzC,OAAX,EAAPA,EAAoB4C,QAAU,OAAO/U,EAAAA,GAAMG,MAAM,gCACvG,GAAkB,cAAdwS,GAA4D,KAAxB,OAAPlV,QAAO,IAAPA,GAAkB,QAAX2U,EAAP3U,EAASmX,iBAAS,IAAAxC,OAAX,EAAPA,EAAoB2C,UAAwB,OAAPtX,QAAO,IAAPA,GAAkB,QAAX4U,EAAP5U,EAASmX,iBAAS,IAAAvC,IAAlBA,EAAoB2C,UAAU,OAAOhV,EAAAA,GAAMG,MAAM,kCACvH,GAAkB,cAAdwS,GAA4D,KAAxB,OAAPlV,QAAO,IAAPA,GAAkB,QAAX6U,EAAP7U,EAASmX,iBAAS,IAAAtC,OAAX,EAAPA,EAAoByC,UAAwB,OAAPtX,QAAO,IAAPA,GAAkB,QAAX8U,EAAP9U,EAASmX,iBAAS,IAAArC,IAAlBA,EAAoB6C,aAAa,OAAOpV,EAAAA,GAAMG,MAAM,kCAa1H,IAAIjN,EAEJ,GAdkB,cAAdyf,GACIlV,EAAQmX,UAAUE,aAClBrX,EAAQmX,UAAUE,WAAaoV,EAAgBzsB,EAAQmX,UAAUE,aACjErX,EAAQmX,UAAUI,UAAyC,IAA7BvX,EAAQmX,UAAUG,OAChDtX,EAAQmX,UAAUI,SAAWkV,EAAgBzsB,EAAQmX,UAAUI,iBAExDvX,EAAQmX,UAAUI,UAG7BvX,EAAQmX,UAAY,KAIxBsG,GAAa,GACToN,EAAkBh3B,OAClB,IAAK,MAAM2B,KAAMq1B,EACb,IACQr1B,SAAUgB,EAAAA,EAAAA,IAAiBhB,EACnC,CAAE,MAAOkN,GACLC,QAAQC,IAAI,qCAAsCF,EACtD,CAGR,GAAI1M,EAAW,CAAC,IAADg3B,EACXv3B,QAAey2B,EAAsBe,YAAYjtB,GACjD,IAAIktB,EAAiB,QAATF,EAAGv3B,SAAM,IAAAu3B,OAAA,EAANA,EAAQh3B,UAEvB,GAAI0H,GAAgB,OAANA,QAAM,IAANA,GAAAA,EAAQ7J,OAAQ,CAAC,IAADs5B,EAC1B,IAAIC,EAAmC,QAAtBD,EAAG13B,EAAOyW,oBAAY,IAAAihB,OAAA,EAAnBA,EAAqBnoB,QAAO,CAAC5N,EAAKvB,KAClDuB,EAAIvB,EAAKyK,UAAYzK,EAAKL,GACnB4B,IACR,CAAC,GAEJ,MAAMi2B,EAAqB,OAAN3vB,QAAM,IAANA,OAAM,EAANA,EAAQtG,KAAIvB,IAAI,IAC9BA,EACHG,UAAWk3B,EACXhhB,aAAcrW,EAAKqK,YAAY9I,KAAI4T,IAAI,CACnCzK,WAAY6sB,EAAcpiB,EAAK1K,kBAIvC,IAAK,MAAMyC,KAASsqB,EAChB,IACQtqB,EAAMvN,UAAUgB,EAAAA,EAAAA,IAAiBuM,EAAMvN,UACrCe,EAAAA,EAAAA,IAAoBwM,EAC9B,CAAE,MAAOL,GACL+a,GAAa,GACb9a,QAAQC,IAAI,qCAAsCF,EACtD,CAEJH,EAAAA,GAAMC,QAAQ,qDAClB,MACID,EAAAA,GAAMC,QAAQ,qCAGtB,KAAO,CAAC,IAAD8qB,EACH73B,QAAew2B,EAAmBgB,YAAYjtB,GAC9C,IAAIktB,EAAiB,QAATI,EAAG73B,SAAM,IAAA63B,OAAA,EAANA,EAAQt3B,UAEvB,GAAI0H,GAAgB,OAANA,QAAM,IAANA,GAAAA,EAAQ7J,OAAQ,CAAC,IAAD05B,EAC1B,IAAIH,EAAmC,QAAtBG,EAAG93B,EAAOyW,oBAAY,IAAAqhB,OAAA,EAAnBA,EAAqBvoB,QAAO,CAAC5N,EAAKvB,KAClDuB,EAAIvB,EAAKyK,UAAYzK,EAAKL,GACnB4B,IACR,CAAC,IAEuB,OAANsG,QAAM,IAANA,OAAM,EAANA,EAAQtG,KAAIvB,IAAI,IAC9BA,EACHG,UAAWk3B,EACXhhB,aAAcrW,EAAKqK,YAAY9I,KAAI4T,IAAI,CACnCzK,WAAY6sB,EAAcpiB,EAAK1K,mBAI1B8K,SAAQtW,UACjB,UACUyB,EAAAA,EAAAA,IAAoBwM,EAC9B,CAAE,MAAOL,GACL+a,GAAa,GACb9a,QAAQC,IAAI,qCAAsCF,EACtD,KAEJH,EAAAA,GAAMC,QAAQ,yDAClB,MACID,EAAAA,GAAMC,QAAQ,qCAEtB,CAEkC,IAADgrB,EAAjC,GAAe,mBAAXlI,EACU,QAAVkI,EAAI/3B,SAAM,IAAA+3B,GAANA,EAAQC,UACR1R,OAAO2R,KAAK,4BAA+Bj4B,EAAOg4B,YAAa,UAE/DlrB,EAAAA,GAAMG,MAAM,6BAEb,GAAe,oBAAX4iB,EAA8B,CAAC,IAADqI,EACrC,IAAIT,EAAiB,QAATS,EAAGl4B,SAAM,IAAAk4B,OAAA,EAANA,EAAQ33B,UACnBk3B,GAAU9C,EAAS,4BAA4B8C,KACnDvC,GAAqB,EACzB,MACIP,EAAS,UAGb3M,GAAa,GACbgN,GAAkB,EAAM,EAG5B,OACI/wB,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,eAAc9B,SAAA,EACzBD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,wCAAwC7C,MAAO,CAAEwC,QAAS,YAAaoE,OAAQ,OAAQ3D,SAAU,WAAYsF,UAAW,uCAAwCxH,SAAA,EAC3KC,EAAAA,EAAAA,KAACg0B,EAAAA,GAAO,CAACzR,GAAI,GAAGxiB,UACZD,EAAAA,EAAAA,MAAA,UAAQ+B,UAAU,cAAc7C,MAAO,CAAEwC,QAAS,aAAe4B,QAASA,KAAQotB,GAAU,EAAE,EAAIzwB,SAAA,EAC9FC,EAAAA,EAAAA,KAACi0B,EAAAA,EAAW,CAACryB,MAAM,UAAUG,KAAM,KAAM,qBAGjD/B,EAAAA,EAAAA,KAAA,MAAI6B,UAAU,MAAM7C,MAAO,CAAE8G,SAAU,OAAQC,WAAY,MAAO9D,SAAU,WAAYiI,KAAM,SAAUnK,UACpGD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,8CAA6C9B,SAAA,EACxDD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA2B9B,SAAA,EAACC,EAAAA,EAAAA,KAACk0B,EAAAA,EAAc,CAACtyB,MAAM,UAAUG,KAAM,KAAM,6BACvE,OAAfovB,QAAe,IAAfA,GAAqB,QAANxB,EAAfwB,EAAiB30B,YAAI,IAAAmzB,OAAN,EAAfA,EAAuB7wB,UAAUkB,EAAAA,EAAAA,KAAA,SAAO6B,UAAU,mCAAmC7C,MAAO,CAAEiB,MAAO,eAAgBF,SAAiB,OAAfoxB,QAAe,IAAfA,GAAqB,QAANvB,EAAfuB,EAAiB30B,YAAI,IAAAozB,OAAN,EAAfA,EAAuB9wB,eAGvJgB,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,gDAA+C9B,SAAA,EAC1DC,EAAAA,EAAAA,KAACygB,GAAiB,CACdzf,MAAM,WACN6B,KAAK,cACL5B,MAAM,WACNkM,QAAuB,aAAdmO,EACTxP,SAAWsB,GAAM4jB,EAAa5jB,EAAEzD,OAAO1I,OACvCgE,UAAU,KAEdjF,EAAAA,EAAAA,KAACygB,GAAiB,CACdzf,MAAM,YACN6B,KAAK,cACL5B,MAAM,YACNkM,QAAuB,cAAdmO,EACTxP,SAAWsB,GAAM4jB,EAAa5jB,EAAEzD,OAAO1I,UAE3CjB,EAAAA,EAAAA,KAACygB,GAAiB,CACdzf,MAAM,eACN6B,KAAK,cACL5B,MAAM,eACNkM,QAAuB,iBAAdmO,EACTxP,SAAWsB,GAAM4jB,EAAa5jB,EAAEzD,OAAO1I,OACvCgE,UAAU,KAEdjF,EAAAA,EAAAA,KAACygB,GAAiB,CACdzf,MAAM,WACN6B,KAAK,cACL5B,MAAM,WACNkM,QAAuB,aAAdmO,EACTxP,SAAWsB,GAAM4jB,EAAa5jB,EAAEzD,OAAO1I,OACvCgE,UAAU,WAKtBjF,EAAAA,EAAAA,KAAA,OAAK6B,UAAU,QAAQ7C,MAAO,CAAEgD,SAAU,OAAQ4D,OAAQ,uBAAuB8qB,OAAkBlvB,QAAS,aAAczB,UACtHC,EAAAA,EAAAA,KAACm0B,GAAe,CAAC/tB,QAASA,EAAS4I,WAAYA,EAAYkiB,OAAQA,EAAQniB,UAAWA,EAAW1G,QAAwB,OAAf8oB,QAAe,IAAfA,OAAe,EAAfA,EAAiB9oB,QAASuH,gBAA+B,OAAfuhB,QAAe,IAAfA,GAAqB,QAANtB,EAAfsB,EAAiB30B,YAAI,IAAAqzB,OAAN,EAAfA,EAAuB/rB,SAAU,GAAIqL,qBAAoC,OAAfgiB,QAAe,IAAfA,GAAqB,QAANrB,EAAfqB,EAAiB30B,YAAI,IAAAszB,OAAN,EAAfA,EAAuBxd,eAAgB,GAAIjD,qBAAsBA,EAAsBgM,kBAAmBA,EAAmBC,UAAWA,OAG1Vxb,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,iCAAiC7C,MAAO,CAAEwC,QAAS,WAAYoE,OAAQ,QAASlE,WAAY,OAAQ0yB,UAAW,oBAAqB7sB,UAAW,6CAA8CxH,SAAA,EACxMD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,yDAAyD7C,MAAO,CAAEq1B,IAAK,OAAQp0B,MAAO,OAAQwT,UAAW,QAAS1T,SAAA,EAC7HD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA4B7C,MAAO,CAAEq1B,IAAK,QAASt0B,SAAA,EAC9DD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAM9B,SAAA,EACjBC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,YACPD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAQ9B,SAAA,CAAC,KAAElG,EAAAA,EAAAA,GAAUq3B,EAAOlf,eAE/ClS,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAM9B,SAAA,EACjBC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,wBACPD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAS7C,MAAO,CAAE4C,MAAO,WAAY7B,SAAA,CAAC,KAAElG,EAAAA,EAAAA,GAAUq3B,EAAO9e,6BAGhFtS,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA4B7C,MAAO,CAAEq1B,IAAK,QAASt0B,SAAA,EAC9DD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAM9B,SAAA,EACjBC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,cACPD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAQ9B,SAAA,CAAC,KAAElG,EAAAA,EAAAA,GAAUq3B,EAAOxgB,iBAE/C5Q,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAM9B,SAAA,EACjBC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,eACPD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAQ9B,SAAA,CAAC,KAAElG,EAAAA,EAAAA,GAAUq3B,EAAO/e,YAE/CrS,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,OAAO7C,MAAO,CAAEoJ,SAAU,eAAgBrI,SAAA,EACrDC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,WACPD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,SAAQ9B,SAAA,CAAC,KAAElG,EAAAA,EAAAA,GAAUq3B,EAAOtqB,oBAIvD9G,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,oDAAmD9B,SAAA,EAC9DD,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA4B7C,MAAO,CAAEq1B,IAAK,OAAQt0B,SAAA,EAC7DC,EAAAA,EAAAA,KAAA,KAAGs0B,KAAK,SAAStvB,KAAK,SAASnD,UAAU,uDAAuD7C,MAAO,CAAE4C,MAAO,WAAY7B,SAAC,YAIzHC,EAAAA,EAAAA,KAAA,KAAGs0B,KAAK,IAAIlxB,QAASA,IAAMosB,EAAiB,kBAAmBxqB,KAAK,SAASnD,UAAU,iCAAgC9B,SAAC,cAKzG,OAAfoxB,QAAe,IAAfA,GAAqB,QAANpB,EAAfoB,EAAiB30B,YAAI,IAAAuzB,GAArBA,EAAuBwE,cACnBz0B,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA2B9B,SAAA,EACtCC,EAAAA,EAAAA,KAAA,UAAQgF,KAAK,SAASnD,UAAU,cAAcuB,QAASA,IAAM2tB,GAAqB,GAAMhxB,SAAC,mBAGzFC,EAAAA,EAAAA,KAACw0B,EAAAA,GAAI,CAACjS,GAAI,4BAA8C,OAAf4O,QAAe,IAAfA,GAAqB,QAANnB,EAAfmB,EAAiB30B,YAAI,IAAAwzB,OAAN,EAAfA,EAAuBuE,eAAgB5qB,OAAO,SAAS8qB,IAAI,aAAaz1B,MAAO,CAAEiD,SAAU,WAAYyL,IAAK,OAAQxD,KAAM,QAASnK,UACxKC,EAAAA,EAAAA,KAAC00B,EAAAA,EAAW,CAAC9yB,MAAM,UAAUG,KAAM,WAI3C/B,EAAAA,EAAAA,KAAA,UAAQgF,KAAK,SAASnD,UAAU,iCAAiCuB,QAASA,IAAMosB,EAAiB,mBAAmBzvB,SAAC,wBAMjID,EAAAA,EAAAA,MAAA,OAAK+B,UAAU,4BAA4B7C,MAAO,CAAEq1B,IAAK,OAAQt0B,SAAA,EAC7DD,EAAAA,EAAAA,MAAA,UAAQkF,KAAK,SAASC,SAAUotB,EAAmB/oB,WAAagpB,EAAsBhpB,UAAWlG,QAASA,IAAMosB,EAAiB,SAAU3tB,UAAU,4BAA2B9B,SAAA,CAAC,cAE3KsyB,EAAmB/oB,WAAagpB,EAAsBhpB,aACN,WAAxB,OAAlB+oB,QAAkB,IAAlBA,GAA6B,QAAXpC,EAAlBoC,EAAoBsC,iBAAS,IAAA1E,OAAX,EAAlBA,EAA+BvE,SAAmE,WAAxB,OAArB4G,QAAqB,IAArBA,GAAgC,QAAXpC,EAArBoC,EAAuBqC,iBAAS,IAAAzE,OAAX,EAArBA,EAAkCxE,WACxF1rB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,cAE5D9F,EAAAA,EAAAA,MAAA,UAAQkF,KAAK,SAASC,SAAUotB,EAAmB/oB,WAAagpB,EAAsBhpB,UAAWlG,QAASA,IAAMosB,EAAiB,QAAS3tB,UAAU,oCAAmC9B,SAAA,CAAC,QAElLsyB,EAAmB/oB,WAAagpB,EAAsBhpB,aACN,UAAxB,OAAlB+oB,QAAkB,IAAlBA,GAA6B,QAAXlC,EAAlBkC,EAAoBsC,iBAAS,IAAAxE,OAAX,EAAlBA,EAA+BzE,SAAkE,UAAxB,OAArB4G,QAAqB,IAArBA,GAAgC,QAAXlC,EAArBkC,EAAuBqC,iBAAS,IAAAvE,OAAX,EAArBA,EAAkC1E,WACvF1rB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,cAE5D9F,EAAAA,EAAAA,MAAA,UAAQkF,KAAK,SAASC,SAAUotB,EAAmB/oB,WAAagpB,EAAsBhpB,UAAWlG,QAASA,IAAMosB,EAAiB,eAAgB3tB,UAAU,gBAAe9B,SAAA,CAAC,iBAErKsyB,EAAmB/oB,WAAagpB,EAAsBhpB,aACN,UAAxB,OAAlB+oB,QAAkB,IAAlBA,GAA6B,QAAXhC,EAAlBgC,EAAoBsC,iBAAS,IAAAtE,OAAX,EAAlBA,EAA+B3E,SAAkE,UAAxB,OAArB4G,QAAqB,IAArBA,GAAgC,QAAXhC,EAArBgC,EAAuBqC,iBAAS,IAAArE,OAAX,EAArBA,EAAkC5E,WACvF1rB,EAAAA,EAAAA,KAACkmB,EAAAA,EAAe,CAAClnB,MAAO,CAAEiB,MAAO,OAAQ2F,OAAQ,uBAMxE5F,EAAAA,EAAAA,KAAC40B,GAAS,CAAC5wB,KAAM4sB,EAAgB3sB,QAAS4sB,EAAmBhP,eAAgBA,EAAgB7S,WAAYA,EAAYwgB,iBAAkBA,KACvIxvB,EAAAA,EAAAA,KAAC60B,GAAc,CAAC7wB,KAAM8sB,EAAmB7sB,QAAS8sB,EAAsB1oB,QAAwB,OAAf8oB,QAAe,IAAfA,OAAe,EAAfA,EAAiB9oB,QAASwZ,eAAgBA,EAAgB+H,UAA0B,OAAfuH,QAAe,IAAfA,GAAqB,QAANZ,EAAfY,EAAiB30B,YAAI,IAAA+zB,IAArBA,EAAuBgE,iBAGxKlC,EAAmB/oB,WAAa6nB,EAAgBvJ,YAAcxX,KAAcpQ,EAAAA,EAAAA,KAAA,OAAKhB,MAAO,CAAEiD,SAAU,WAAYyL,IAAK,MAAOxD,KAAM,MAAOxI,WAAY,QAASzB,MAAO,OAAQ2F,OAAQ,OAAQC,aAAc,MAAOxE,QAAS,OAAQE,eAAgB,SAAUD,WAAY,SAAUynB,OAAQ,IAAMlnB,UAAU,YAAW9B,UACnTC,EAAAA,EAAAA,KAACuJ,EAAAA,EAAO,CAACnJ,UAAU,SAASoJ,KAAK,SAAQzJ,UACrCC,EAAAA,EAAAA,KAAA,QAAM6B,UAAU,kBAAiB9B,SAAC,qBAI3C,C,oGC7af,QAA4B,gC,eCG5B,MAea+0B,EAAgBntB,IAA8C,IAA7C,UAAEgR,EAAS,MAAEC,EAAK,YAAEhC,EAAW,KAAE7U,GAAM4F,EACjE,MAAOotB,EAAUC,IAAe9wB,EAAAA,EAAAA,WAAS,GACnC+wB,EAAOre,EAAcse,EAAAA,EAAWC,EAAAA,EAEtC,OAAOn1B,EAAAA,EAAAA,KAAAS,EAAAA,SAAA,CAAAV,SACF4Y,GAAaC,IAAUmc,GACpB/0B,EAAAA,EAAAA,KAAA,OAAKutB,IAAK3U,EAAO0U,IAAI,gBAAgBzrB,UAAU,QAAQgH,QAASA,IAAMmsB,GAAY,MAElFh1B,EAAAA,EAAAA,KAACi1B,EAAI,CAACrzB,MAAM,UAAUG,KAAMA,KAEjC,EAGMqzB,EAA4B3oB,IAAiC,IAAD4oB,EAAAC,EAAAC,EAAA,IAA/B,UAAE5c,EAAS,MAAEC,EAAK,KAAE/V,GAAM4J,EAChE,MAAOsoB,EAAUC,IAAe9wB,EAAAA,EAAAA,WAAS,GACnCsxB,EAAW3yB,IAAY,OAAJA,QAAI,IAAJA,GAAgB,QAAZwyB,EAAJxyB,EAAM4lB,MAAM,YAAI,IAAA4M,GAAgB,QAAhBC,EAAhBD,EAAkB73B,KAAIi4B,GAAKA,EAAE,YAAG,IAAAH,GAAU,QAAVC,EAAhCD,EAAkC1M,KAAK,WAAG,IAAA2M,OAAtC,EAAJA,EAA4CG,gBAAiB,GAEtF,OAAO11B,EAAAA,EAAAA,KAAAS,EAAAA,SAAA,CAAAV,SACF4Y,GAAaC,IAAUmc,GACpB/0B,EAAAA,EAAAA,KAAA,OAAKutB,IAAK3U,EAAO0U,IAAI,gBAAgBzrB,UAAU,QAAQgH,QAASA,IAAMmsB,GAAY,KAClFQ,GACL,EAGMG,EAAiB7mB,IAA0B,IAAzB,KAAEjM,EAAI,KAAEd,EAAO,IAAI+M,EAC9C,MAAM0mB,EAAW3yB,EAAK4lB,MAAM,KAAKjrB,KAAIi4B,GAAKA,EAAE,KAAI7M,KAAK,IAAI8M,cAEzD,OACI11B,EAAAA,EAAAA,KAAA,QAAMhB,MAAO,CAAE8G,SAAU,GAAG/D,OAAWhC,SAClCy1B,GACE,EAIf,EAjDoB90B,IAAwC,IAAvC,UAAEiY,EAAS,MAAEC,EAAK,YAAEhC,GAAalW,EAClD,MAAOq0B,EAAUC,IAAe9wB,EAAAA,EAAAA,WAAS,GACnC+wB,EAAOre,EAAcse,EAAAA,EAAWC,EAAAA,EAEtC,OACIn1B,EAAAA,EAAAA,KAAA,OAAK6B,UAAW,oDAAoD7C,KAAmB4X,EAAc,GAAK,mBAAoB5X,MAAO,CAAEgD,SAAU,UAAWjC,SACvJ4Y,GAAaC,IAAUmc,GACpB/0B,EAAAA,EAAAA,KAAA,OAAKutB,IAAK3U,EAAO0U,IAAI,gBAAgBzrB,UAAU,QAAQgH,QAASA,IAAMmsB,GAAY,MAElFh1B,EAAAA,EAAAA,KAACi1B,EAAI,CAACrzB,MAAM,aAEd,C","sources":["shared/lib/format-aud.js","APIs/CalApi.js","components/Business/shared/utils/helper.js","components/Business/Pages/sales/new-request/department-quote/department-quote-table-row-loading.js","components/Business/Pages/sales/new-request/department-quote/select-component.js","webpack://memateapp/./src/components/Business/features/sales-features/merges-calculation/create-merge-calculation/create-merge-calculation.module.scss?7822","components/Business/features/sales-features/merges-calculation/create-merge-calculation/index.js","webpack://memateapp/./src/components/Business/features/sales-features/merges-calculation/list-merge-calculations/list-merge-calculation.module.scss?7117","components/Business/features/sales-features/merges-calculation/delete-merge-calculation/index.js","webpack://memateapp/./src/components/Business/features/sales-features/merges-calculation/edit-merge-calculation/edit-merge-calculation.module.scss?eb01","components/Business/features/sales-features/merges-calculation/edit-merge-calculation/index.js","components/Business/features/sales-features/merges-calculation/view-merge-calculation/index.js","components/Business/features/sales-features/merges-calculation/list-merge-calculations/index.js","components/Business/Pages/sales/new-request/department-quote/department-calculation-table.js","components/Business/Pages/sales/new-request/department-quote/quote-to-business.js","components/Business/Pages/sales/new-request/department-quote/quote-to-client.js","components/Business/Pages/sales/new-request/ui/custom-radio-button.js","components/Business/Pages/sales/new-request/department-quote/index.js","webpack://memateapp/./src/components/Business/features/sales-features/create-proposal/create-proposal.module.scss?17ba","webpack://memateapp/./src/ui/send-proposal/send-proposal-email.module.scss?e126","ui/send-proposal/send-proposal-email-form.jsx","components/Business/features/sales-features/send-proposal/send-proposal.jsx","components/Business/features/sales-features/create-proposal/create-proposal.js","components/Business/features/sales-features/send-quote/send-quote.jsx","components/Business/Pages/sales/new-request/calculate-quote.js","webpack://memateapp/./src/ui/image-with-fallback/image-avatar.module.scss?81d4","ui/image-with-fallback/image-avatar.jsx"],"sourcesContent":["export function formatAUD(amount, shorten = false) {\n    const num = parseFloat(amount);\n\n    if (isNaN(num)) {\n        return \"0.00\";\n    }\n\n    if (shorten && Math.abs(num) >= 1000.00) {\n        return new Intl.NumberFormat('en-AU', {\n            notation: \"compact\",\n            compactDisplay: \"short\",\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        }).format(num);\n    }\n\n    return new Intl.NumberFormat('en-AU', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n    }).format(num);\n}","import { fetchAPI } from \"./base-api\";\nconst API_BASE_URL = process.env.REACT_APP_BACKEND_API_URL;\n\nexport const getDepartments = async (all) => {\n  const endpoint = `/references/calc-indexes/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  if (all === 1) url.searchParams.append('all', 1);\n\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getCalculationByReferenceId = async (id) => {\n  const endpoint = `/references/calculators/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  const result = await fetchAPI(url.toString(), options);\n  return Array.isArray(result)\n    ? result.filter(item => !item.deleted)\n    : result && !result.deleted ? result : null;\n};\n\nexport const getQuoteByUniqueId = async (unique_id) => {\n  const endpoint = `/projects/${unique_id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createNewCalculationQuoteRequest = async (data) => {\n  const endpoint = '/sales/new-request/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateNewCalculationQuoteRequest = async (unique_id, data) => {\n  if (!unique_id) throw new Error(\"No id found\");\n\n  const endpoint = `/sales/projects/${unique_id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createNewMergeQuote = async (data) => {\n  const endpoint = '/projects/merges/new/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteMergeQuote = async (id) => {\n  const endpoint = `/projects/merges/${id}/delete/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getMergeItemsByUniqueId = async (unique_id) => {\n  const endpoint = `/projects/merges/${unique_id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createDepartment = async (data) => {\n  const endpoint = '/settings/departments/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateDepartment = async (id, data) => {\n  if (!id) return;\n\n  const endpoint = `/settings/departments/update/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createSubDepartment = async (data) => {\n  const endpoint = '/settings/sub-departments/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateSubDepartment = async (id, data) => {\n  if (!id) return;\n\n  const endpoint = `/settings/sub-departments/update/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createCalculator = async (index, data) => {\n  const endpoint = `/references/calculators/${index}/new/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateCalculator = async (index, id, data) => {\n  const endpoint = `/references/calculators/${index}/update/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteSettingCalculator = async (endpoint) => {\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createQuoteProposal = async (id, data) => {\n  const endpoint = `/proposals/new/${id}/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const reorderDepartments = async (departments) => {\n  const endpoint = '/settings/departments/order/';\n  const options = {\n    method: 'POST',\n    body: departments.map((d, idx) => ({ id: d.id, order: idx + 1 })),\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n","export function adjustColor(color, amount) {\n  if (!color) return;\n  let usePound = false;\n\n  if (color[0] === \"#\") {\n    color = color.slice(1);\n    usePound = true;\n  }\n\n  let num = parseInt(color, 16);\n\n  let r = (num >> 16) + amount;\n  let g = ((num >> 8) & 0x00ff) + amount;\n  let b = (num & 0x0000ff) + amount;\n\n  return (\n    (usePound ? \"#\" : \"\") +\n    (r > 255 ? 255 : r < 0 ? 0 : r).toString(16).padStart(2, \"0\") +\n    (g > 255 ? 255 : g < 0 ? 0 : g).toString(16).padStart(2, \"0\") +\n    (b > 255 ? 255 : b < 0 ? 0 : b).toString(16).padStart(2, \"0\")\n  );\n}\n\nexport function romanize(num) {\n  var lookup = { M: 1000, CM: 900, D: 500, CD: 400, C: 100, XC: 90, L: 50, XL: 40, X: 10, IX: 9, V: 5, IV: 4, I: 1 }, roman = '', i;\n  for (i in lookup) {\n    while (num >= lookup[i]) {\n      roman += i;\n      num -= lookup[i];\n    }\n  }\n  return roman;\n}\n\nexport function formatMoney(number) {\n  return number.toLocaleString('en-US', { style: 'currency', currency: 'USD' });\n}\n\n\nexport const dateFormat = (dateInMiliSec, isDotformate) => {\n  if (!dateInMiliSec) return \"-\";\n\n  const options = { year: 'numeric', month: 'short', day: 'numeric' };\n  const date = new Date(1000 * +dateInMiliSec);\n\n  if(isDotformate) {\n    const dotFormattedDate = date.toLocaleDateString('en-GB', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    }).replace(/\\//g, '.');\n    return dotFormattedDate;\n  }\n\n  const formattedDate = date.toLocaleDateString('en-US', options)?.replace(/,/g, '');\n  return formattedDate;\n};","import React from 'react';\nimport Placeholder from 'react-bootstrap/Placeholder';\n\nexport const DepartmentQuoteTableRowLoading = () => {\n    return (\n        <tr>\n            <td style={{ width: \"24px\" }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '64px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '192px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '600px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n\n            <td style={{ width: '128px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '185px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '166px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '83px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '32px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n        </tr>\n    );\n};\n\nexport const DepartmentRowChangeLoading = () => {\n    return (\n        <>\n            <td style={{ width: '64px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '192px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '600px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n\n            <td style={{ width: '128px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '185px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '166px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '83px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '32px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n        </>\n    );\n};","import React from 'react';\nimport { ChevronDown } from 'react-bootstrap-icons';\nimport { Menu, MenuItem, MenuButton, SubMenu } from '@szhsin/react-menu';\nimport '@szhsin/react-menu/dist/index.css';\n\nconst SelectComponent = ({ departments, handleChange, title, keyValue }) => {\n    const handleSubMenuClick = (label, value) => {\n        handleChange(value, label, keyValue);\n    };\n\n    return (\n        <Menu\n            menuButton={\n                <MenuButton style={{\n                    width: '150px',\n                    display: 'inline-flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    padding: '8px 0px',\n                    cursor: 'pointer',\n                    background: 'transparent',\n                    border: 'none',\n                    color: title ? '#101828' : '#98A2B3'\n                }}>\n                    <div className='ellipsis-width' title={title || \"Department\"}>\n                        {title || \"Department\"}\n                    </div>\n                    <span>\n                        <ChevronDown color=\"#98A2B3\" size={15} />\n                    </span>\n                </MenuButton>\n            }\n            overflow=\"auto\"\n            position=\"anchor\"\n            portal\n            className='departmentSelect'\n        >\n            {departments?.filter((data) => !data?.deleted)?.sort((a, b) => a.order - b.order).map((department) => (\n                <React.Fragment key={department.id}>\n                    {department?.subindexes?.length ? (\n                        <SubMenu\n                            key={department.id}\n                            label={department?.name}\n                            direction=\"right\"\n                            align=\"start\"\n                            menuStyle={{\n                                maxHeight: '500px',\n                                overflow: 'auto',\n                                textAlign: 'left'\n                            }}\n                        >\n                            {department.subindexes?.filter((data) => !data?.deleted)?.sort((a, b) => a.order - b.order).map((subitem) => (\n                                <MenuItem\n                                    key={subitem.id}\n                                    onClick={() => handleSubMenuClick(subitem?.name, subitem?.id)}\n                                >\n                                    {subitem?.name}\n                                </MenuItem>\n                            ))}\n                        </SubMenu>\n                    ) : (\n                        <MenuItem\n                            style={{ textAlign: 'left' }}\n                            key={department.id}\n                            onClick={() => handleSubMenuClick(department?.name, department?.id)}\n                        >\n                            {department?.name}\n                        </MenuItem>\n                    )}\n                </React.Fragment>\n            ))}\n        </Menu>\n    );\n};\n\nexport default SelectComponent;\n","// extracted by mini-css-extract-plugin\nexport default {\"mergeButton\":\"create-merge-calculation_mergeButton__A2lWg\",\"disabled\":\"create-merge-calculation_disabled__-KWur\",\"cancelButton\":\"create-merge-calculation_cancelButton__5g1vU\",\"deleteButton\":\"create-merge-calculation_deleteButton__AA6vR\"};","import React, { useEffect, useState } from 'react';\nimport { Button, Col, ListGroup, Modal, Row } from 'react-bootstrap';\nimport { Trash } from 'react-bootstrap-icons';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport clsx from 'clsx';\nimport Form from 'react-bootstrap/Form';\nimport * as yup from 'yup';\nimport style from './create-merge-calculation.module.scss';\nimport { romanize } from '../../../../shared/utils/helper';\n\n\n// Validation schema\nconst schema = yup\n  .object({\n    title: yup.string().required(\"Title is required\"),\n    description: yup.string().required(\"Description is required\"),\n  })\n  .required();\n\nconst CreateMergeCalculation = ({ selectItem, setSelectItem, merges, setMerges }) => {\n  const [show, setShow] = useState(false);\n  const romanNo = romanize((merges?.length || 0) + 1);\n  const [defaultValues,] = useState({\n    title: '',\n    description: ''\n  });\n  const { register, reset, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema), defaultValues\n  });\n\n  useEffect(() => { reset(); }, [selectItem]);\n\n  const onSubmit = (data) => {\n    const payload = {\n      ...data,\n      alias: romanNo,\n      calculators: Object.values(selectItem)?.flat().map((value) => ({\n        key: value.key,\n        merge_id: value.merge_id,\n        calculator: value.calculator,\n        label: value.label,\n        total: value.total,\n        description: value.description\n      }))\n    };\n    setMerges((others) => ([...others, payload]));\n    handleClose();\n    setSelectItem({});\n  };\n\n  const deleteAndCancel = () => {\n    setShow(false);\n    setSelectItem({});\n  };\n  const handleClose = () => setShow(false);\n  const handleOpen = () => setShow(true);\n\n  return (\n    <React.Fragment>\n      <Button type='button' disabled={Object.keys(selectItem)?.length < 2} onClick={handleOpen} className={clsx(style.mergeButton, 'text-button', { [style.disabled]: Object.keys(selectItem)?.length < 2 })}>Merge Items</Button>\n      <Modal\n        size=\"lg\"\n        show={show}\n        centered\n        onHide={handleClose}\n        className={clsx('task-form', 'mergeForm')}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className='d-flex align-items-center'>\n            <div className='d-flex justify-content-center align-items-center' style={{ width: '36px', height: '36px', borderRadius: '50%', border: '1px solid #EAECF0', background: '#F2F4F7', color: '#344054', fontSize: '14px', fontWeight: 600 }}>\n              {romanNo}\n            </div>\n            <span className='modal-task-title'>Merge Items</span>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body className='px-0'>\n          <Form onSubmit={handleSubmit(onSubmit)}>\n            <div className='px-4' style={{ maxHeight: '450px', overflow: 'auto', }}>\n              <Form.Group className=\"mb-3\">\n                <Form.Label>Task Title</Form.Label>\n                <Form.Control\n                  {...register(\"title\")}\n                  type=\"text\"\n                  placeholder=\"Merge items title\"\n                  className={`${errors.title ? 'border border-danger' : ''}`}\n                />\n                {errors.title && <Form.Text className=\"text-danger\">{errors.title.message}</Form.Text>}\n              </Form.Group>\n\n              <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n                <Form.Label>Describe merging items</Form.Label>\n                <Form.Control\n                  as=\"textarea\"\n                  rows={2}\n                  placeholder='Enter a description...'\n                  {...register(\"description\")}\n                  style={{ height: '80px', outline: 'none', boxShadow: 'none' }}\n                  className={`${errors.description ? 'border border-danger' : ''}`}\n                />\n                {errors.description && <Form.Text className=\"text-danger\">{errors.description.message}</Form.Text>}\n              </Form.Group>\n              <ListGroup variant=\"flush border rounded mb-4\" style={{ border: \"1px solid var(--Gray-100, #F2F4F7)\" }}>\n                {\n                  Object.entries(selectItem)?.map(([key, values]) =>\n                    values?.map((value) =>\n                      <ListGroup.Item key={`${key}-${value.id}`} className='d-flex justify-content-between'>\n                        <Row className='w-100'>\n                          <Col sm={4} className='text-start'>\n                            <span style={{ color: '#101828', fontSize: '16px' }}>\n                              {value?.label || \"\"}\n                            </span>\n                          </Col>\n                          <Col sm={6}>\n                            <span style={{ color: '#101828', fontSize: '16px' }}>\n                              {value?.description || \"\"}\n                            </span>\n                          </Col>\n                          <Col sm={2} className='text-end text-nowrap'>\n                            <span style={{ color: '#101828', fontSize: '16px', textAlign: 'end' }}>\n                              $ {parseFloat(value?.total).toFixed(2)}\n                            </span>\n                          </Col>\n                        </Row>\n                      </ListGroup.Item>\n                    )\n                  )\n                }\n              </ListGroup>\n            </div>\n            <Modal.Footer className='d-flex justify-content-between align-items-center'>\n              <Button type='button' onClick={deleteAndCancel} className={style.deleteButton}>\n                <Trash color='#B42318' size={18} />\n              </Button>\n              <div className='d-flex align-items-center gap-3'>\n                <Button type='button' onClick={handleClose} className='outline-button' style={{ minWidth: '67px' }}>Cancel</Button>\n                <Button type='submit' className='solid-button' style={{ minWidth: '67px' }}>Save</Button>\n              </div>\n            </Modal.Footer>\n          </Form>\n        </Modal.Body>\n      </Modal>\n    </React.Fragment>\n  );\n};\n\nexport default CreateMergeCalculation;","// extracted by mini-css-extract-plugin\nexport default {\"mergeListItem\":\"list-merge-calculation_mergeListItem__lMMHT\",\"mergeListSrBox\":\"list-merge-calculation_mergeListSrBox__Pg9x-\",\"divider\":\"list-merge-calculation_divider__uLh55\",\"divider2\":\"list-merge-calculation_divider2__ixjfs\"};","import React from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { Trash } from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { useMutation } from '@tanstack/react-query';\nimport { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\nimport { toast } from 'sonner';\nimport { deleteMergeQuote } from '../../../../../../APIs/CalApi';\n\nconst DeleteMerge = ({ id, alias, refetch, setMerges }) => {\n  const { unique_id } = useParams();\n  const deleteMutation = useMutation({\n    mutationFn: () => deleteMergeQuote(id),\n    onSuccess: () => {\n      toast.success(`Merge item deleted successfully`);\n      refetch();\n    },\n    onError: (error) => {\n      console.log('error: ', error);\n      toast.error(`Failed to delete merge item. Please try again.`);\n    }\n  });\n\n  const accept = () => {\n    if (unique_id) {\n      if (!id) return toast.error(\"Id not found\");\n      deleteMutation.mutate();\n    } else {\n      setMerges((merges) => {\n        let updatedMerges = merges.filter((merge) => merge.alias !== alias);\n        return updatedMerges;\n      });\n    }\n  };\n  const reject = () => { };\n\n  const deleteMergeItem = (event) => {\n    confirmPopup({\n      target: event.currentTarget,\n      message: 'Do you want to delete this record?',\n      defaultFocus: 'reject',\n      acceptClassName: 'p-button-danger',\n      accept,\n      reject,\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <ConfirmPopup />\n      {\n        deleteMutation.isPending ? (\n          <Spinner animation=\"border\" role=\"status\" size=\"sm\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </Spinner>\n        ) : <Trash onClick={deleteMergeItem} color=\"#98A2B3\" size={16} className='cursor-pointer' />\n      }\n    </React.Fragment>\n  );\n};\n\nexport default DeleteMerge;","// extracted by mini-css-extract-plugin\nexport default {\"mergeButton\":\"edit-merge-calculation_mergeButton__MJN7A\",\"disabled\":\"edit-merge-calculation_disabled__mjeA+\",\"cancelButton\":\"edit-merge-calculation_cancelButton__e50P9\",\"deleteButton\":\"edit-merge-calculation_deleteButton__5ACo9\"};","import React, { useEffect, useState } from 'react';\nimport { Button, Col, ListGroup, Modal, Row } from 'react-bootstrap';\nimport { Trash } from 'react-bootstrap-icons';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport clsx from 'clsx';\nimport Form from 'react-bootstrap/Form';\nimport * as yup from 'yup';\nimport style from './edit-merge-calculation.module.scss';\n\n\n// Validation schema\nconst schema = yup\n  .object({\n    title: yup.string().required(\"Title is required\"),\n    description: yup.string().required(\"Description is required\"),\n  })\n  .required();\n\nconst EditMergeCalculation = ({ merge, alias, setMerges, refetch, deleteMergeCalculator }) => {\n  const [show, setShow] = useState(false);\n  const romanNo = alias;\n  const [defaultValues,] = useState({\n    title: merge?.title || \"\",\n    description: merge?.description || \"\"\n  });\n  const { register, reset, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema), defaultValues\n  });\n\n  useEffect(() => { reset(); }, [alias]);\n\n  const onSubmit = (data) => {\n    const payload = {\n      ...data,\n      alias: romanNo,\n      calculators: merge?.calculators?.map((value) => ({\n        key: value.key,\n        merge_id: value.merge_id,\n        calculator: value.calculator,\n        label: value.label,\n        total: value.total,\n        description: value.description\n      }))\n    };\n    setMerges((merges) =>\n      merges.map((item) =>\n        item.alias === romanNo ? { ...item, ...payload } : item\n      )\n    );\n    handleClose();\n  };\n\n  const deleteAndCancel = () => {\n    setShow(false);\n  };\n  const handleClose = () => setShow(false);\n  const handleOpen = () => setShow(true);\n\n  return (\n    <React.Fragment>\n      <Button type='button' onClick={handleOpen} className={clsx(style.mergeButton, 'text-button')}>Edit</Button>\n      <Modal\n        size=\"lg\"\n        show={show}\n        centered\n        onHide={handleClose}\n        className={clsx('task-form', 'mergeForm')}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className='d-flex align-items-center'>\n            <div className='d-flex justify-content-center align-items-center' style={{ width: '36px', height: '36px', borderRadius: '50%', border: '1px solid #EAECF0', background: '#F2F4F7', color: '#344054', fontSize: '14px', fontWeight: 600 }}>\n              {romanNo}\n            </div>\n            <span className='modal-task-title'>Edit Merge Items</span>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body className='px-0'>\n          <Form onSubmit={handleSubmit(onSubmit)}>\n            <div className='px-4' style={{ maxHeight: '450px', overflow: 'auto', }}>\n              <Form.Group className=\"mb-3\">\n                <Form.Label>Task Title</Form.Label>\n                <Form.Control\n                  {...register(\"title\")}\n                  type=\"text\"\n                  placeholder=\"Merge items title\"\n                  className={`${errors.title ? 'border border-danger' : ''}`}\n                />\n                {errors.title && <Form.Text className=\"text-danger\">{errors.title.message}</Form.Text>}\n              </Form.Group>\n\n              <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n                <Form.Label>Describe merging items</Form.Label>\n                <Form.Control\n                  as=\"textarea\"\n                  rows={2}\n                  placeholder='Enter a description...'\n                  {...register(\"description\")}\n                  style={{ height: '80px', outline: 'none', boxShadow: 'none' }}\n                  className={`${errors.description ? 'border border-danger' : ''}`}\n                />\n                {errors.description && <Form.Text className=\"text-danger\">{errors.description.message}</Form.Text>}\n              </Form.Group>\n              <ListGroup variant=\"flush border rounded mb-4\" style={{ border: \"1px solid var(--Gray-100, #F2F4F7)\" }}>\n                {\n                  merge?.calculators?.map((value, index) =>\n                    <ListGroup.Item key={`${index}-${value.id}`} className='d-flex justify-content-between'>\n                      <Row className='w-100'>\n                        <Col sm={4} className='text-start'>\n                          <span style={{ color: '#101828', fontSize: '16px' }}>\n                            {value?.label || \"\"}\n                          </span>\n                        </Col>\n                        <Col sm={6}>\n                          <span style={{ color: '#101828', fontSize: '16px' }}>\n                            {value?.description || \"\"}\n                          </span>\n                        </Col>\n                        <Col sm={2} className='text-end text-nowrap'>\n                          <span style={{ color: '#101828', fontSize: '16px', textAlign: 'end' }}>\n                            $ {parseFloat(value?.total).toFixed(2)}\n                          </span>\n                          <Trash onClick={() => deleteMergeCalculator(value.calculator, value.key)} color='#98A2B3' size={16} className='ms-2' style={{ position: 'relative', left: '20px', cursor: 'pointer' }} />\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n                  )\n                }\n              </ListGroup>\n            </div>\n            <Modal.Footer className='d-flex justify-content-between align-items-center'>\n              <Button type='button' onClick={deleteAndCancel} className={style.deleteButton}>\n                <Trash color='#B42318' size={18} />\n              </Button>\n              <div className='d-flex align-items-center gap-3'>\n                <Button type='button' onClick={handleClose} className='outline-button' style={{ minWidth: '67px' }}>Cancel</Button>\n                <Button type='submit' className='solid-button' style={{ minWidth: '67px' }}>Save</Button>\n              </div>\n            </Modal.Footer>\n          </Form>\n        </Modal.Body>\n      </Modal>\n    </React.Fragment>\n  );\n};\n\nexport default EditMergeCalculation;","import React from 'react';\nimport { useRef, useState } from 'react';\nimport { CloseButton, ListGroup } from 'react-bootstrap';\nimport { ControlledMenu, useClick } from '@szhsin/react-menu';\nimport '@szhsin/react-menu/dist/index.css';\n\nconst ViewMerge = ({ title, alias, items }) => {\n    const ref = useRef(null);\n    const [isOpen, setOpen] = useState(false);\n    const anchorProps = useClick(isOpen, setOpen);\n    return (\n        <React.Fragment>\n            <button type=\"button\" className=\"btn p-0 ellipsis-width\" style={{ maxWidth: '450px' }} ref={ref} {...anchorProps}>{title}</button>\n\n            <ControlledMenu\n                state={isOpen ? 'open' : 'closed'}\n                anchorRef={ref}\n                onClose={() => setOpen(false)}\n                menuStyle={{ padding: '24px 24px 20px 24px', width: '365px' }}\n            >\n                <div className='d-flex justify-content-between'>\n                    <div className='BoxNo'>\n                        <div className='no'>{alias}</div>\n                    </div>\n                    <CloseButton onClick={() => setOpen(false)}/>\n                </div>\n\n                <ListGroup variant=\"flush border\" style={{ marginTop: '16px' }}>\n                    {\n                        items?.map((data, index) =>\n                            <ListGroup.Item key={index} className='d-flex justify-content-between border-0'>\n                                <span style={{ color: '#475467', fontSize: '14px', fontWeight: 400 }}>{data?.label}</span>\n                                <span style={{ color: '#475467', fontSize: '14px', fontWeight: 600, whiteSpace: 'nowrap' }}>$ {data?.total || \"0.00\"}</span>\n                            </ListGroup.Item>\n                        )\n                    }\n                </ListGroup>\n            </ControlledMenu>\n        </React.Fragment>\n    );\n};\n\nexport default ViewMerge;","import React from 'react';\nimport clsx from 'clsx';\nimport style from './list-merge-calculation.module.scss';\nimport DeleteMerge from '../delete-merge-calculation';\nimport EditMergeCalculation from '../edit-merge-calculation';\nimport ViewMerge from '../view-merge-calculation';\n\nconst ListMergeCalculations = ({ merges, setMerges, refetch, deleteMergeCalculator }) => {\n    return (\n        <>\n            <div className={clsx('w-100', style.divider)} style={{}}></div>\n\n            {(merges?.length && <p className='mb-0' style={{ fontSize: '14px', fontWeight: '500', color: '#475467' }}>Merged Items</p>) || ''}\n\n            {\n                merges.map((merge, index) => (\n                    <div key={`${index}-${merge.id}`} className={clsx('d-flex align-items-center gap-3', style.mergeListItem)}>\n                        <div className={clsx('d-flex justify-content-center align-items-center', style.mergeListSrBox)}>\n                            {merge?.alias}\n                        </div>\n                        <div className='d-flex align-items-center gap-3' style={{ width: '317px' }}>\n                            <ViewMerge title={merge.title} alias={merge?.alias} items={merge.calculators} />\n                            <EditMergeCalculation merge={merge} setMerges={setMerges} alias={merge?.alias} deleteMergeCalculator={deleteMergeCalculator} />\n                        </div>\n                        <span style={{ minWidth: '120px', color: '#667085' }}>$ {merge?.calculators?.reduce((sum, item) => sum + parseFloat(item.total), 0).toFixed(2) || \"0.00\"}</span>\n                        <DeleteMerge id={merge.id} alias={merge?.alias} refetch={refetch} setMerges={setMerges} />\n                    </div>\n                ))\n            }\n\n            {(merges?.length && <div className={clsx('w-100', style.divider2)}></div>) || \"\"}\n        </>\n    );\n};\n\nexport default ListMergeCalculations;","import React, { useEffect, useState } from 'react';\nimport { Check, GripVertical, Trash } from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\nimport { useQuery } from '@tanstack/react-query';\nimport { nanoid } from \"nanoid\";\nimport { InputNumber } from 'primereact/inputnumber';\nimport { toast } from 'sonner';\nimport { DepartmentQuoteTableRowLoading, DepartmentRowChangeLoading } from './department-quote-table-row-loading';\nimport SelectComponent from './select-component';\nimport { getCalculationByReferenceId, getDepartments } from '../../../../../../APIs/CalApi';\nimport { formatAUD } from '../../../../../../shared/lib/format-aud';\nimport CreateMergeCalculation from '../../../../features/sales-features/merges-calculation/create-merge-calculation';\nimport ListMergeCalculations from '../../../../features/sales-features/merges-calculation/list-merge-calculations';\nimport { romanize } from '../../../../shared/utils/helper';\n\nconst DepartmentCalculationTableEmptyRow = ({ srNo, departments, handleChange }) => {\n    return (\n        <tr>\n            <td style={{ width: '24px' }} className='shadowRight-'></td>\n            <td style={{ width: '64px', textAlign: 'left' }}>{srNo + 1}</td>\n            <td style={{ width: '192px' }}>\n                <SelectComponent departments={departments} handleChange={handleChange} isShowlabel={false} />\n            </td>\n            <td style={{ width: '100%', paddingTop: '10px' }}>\n                <textarea disabled rows={1} placeholder='Enter a description...' style={{ background: 'transparent', border: '0px solid #fff', resize: 'none', boxSizing: 'border-box' }} onChange={() => { }}></textarea>\n            </td>\n            <td style={{ width: '128px' }}>\n                <div className='d-flex align-items-center'>\n                    <span style={{ color: 'rgb(152, 162, 179)' }}>$</span>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ padding: '4px', width: '100px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${'0.00'}`}\n                        onChange={() => { }}\n                    />\n                </div>\n            </td>\n            <td style={{ width: '185px' }}>\n                <div className='d-flex align-items-center'>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ padding: '4px', width: '60px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${'0.00'}`}\n                        onChange={() => { }}\n                    />\n                    <select value={\"MRG\"} disabled style={{ border: '0px solid #fff', background: 'transparent' }} onChange={() => { }}>\n                        <option value={\"MRG\"}>MRG %</option>\n                        <option value={\"AMN\"}>AMT $</option>\n                        <option value={\"MRK\"}>MRK %</option>\n                    </select>\n                </div>\n            </td>\n            <td style={{ width: '118px', textAlign: 'left', color: 'rgb(152, 162, 179)' }}>$ {\"0.00\"}</td>\n            <td style={{ width: '166px' }}>\n                <div className='d-flex align-items-center'>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ padding: '4px', width: '60px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${'0.00'}`}\n                        onChange={() => { }}\n                    />\n                    {/* <select value={\"Cost\"} disabled style={{ border: '0px solid #fff', background: 'transparent' }} onChange={() => { }}>\n                        <option value=\"Cost\">1/Q</option>\n                        <option value=\"Hourly\">1/H</option>\n                    </select> */}\n                </div>\n            </td>\n            <td style={{ width: '83px' }}>\n                <div className='d-flex align-items-center'>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ width: '60px', padding: '4px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${\"0.00%\"}`}\n                        onChange={() => { }}\n                    />\n                </div>\n            </td>\n            <td style={{ width: '118px', textAlign: 'left', color: 'rgb(152, 162, 179)' }}>$ {\"0.00\"}</td>\n            <td style={{ width: '32px', position: 'sticky', right: '0px' }} className='shadowLeft-'>\n                <Trash color=\"#98A2B3\" style={{ cursor: 'not-allowed', opacity: '.5' }} onClick={() => { }} />\n            </td>\n        </tr>\n    );\n};\n\nconst DepartmentCalculationTableHead = () => {\n    return (\n        <thead>\n            <tr>\n                <th style={{ width: '24px' }}></th>\n                <th style={{ width: '64px', textAlign: 'left' }}>Order</th>\n                <th style={{ width: '192px' }}>Department</th>\n                <th style={{ width: '100%' }}>Description</th>\n                <th style={{ width: '128px' }}>Cost</th>\n                <th style={{ width: '185px' }}>Markup / Margin</th>\n                <th style={{ width: '118px' }}>Unit Price</th>\n                <th style={{ width: '166px' }}>Qty / Unit</th>\n                <th style={{ width: '83px' }}>Discount</th>\n                <th style={{ width: '118px' }}>Amount</th>\n                <th style={{ width: '32px' }}></th>\n            </tr>\n        </thead>\n    );\n};\n\nconst DepartmentCalculationTableBody = ({ rows, updateData, deleteRow, selectItem, setSelectItem, mapMergeItemWithNo, checkedItems = [], departments, handleDepartmentChange, selectKey }) => {\n    const handleChange = (event, value, key) => {\n        const mergeKey = `${key}-${value.id}`;\n\n        setSelectItem((oldItems) => {\n            if (event.target.checked) {\n                const items = {\n                    label: value.label,\n                    description: value?.description,\n                    calculator: value?.calculator,\n                    index: value?.index,\n                    total: value?.total,\n                    key: key,\n                    merge_id: value?.merge_id\n                };\n\n                let newItems = oldItems[mergeKey] || [];\n                newItems.push(items);\n\n                return {\n                    ...oldItems,\n                    [mergeKey]: newItems\n                };\n            } else {\n                const updatedItems = { ...oldItems };\n                if (updatedItems[mergeKey]) delete updatedItems[mergeKey];\n                return updatedItems;\n            }\n        });\n    };\n\n    return (\n        <>\n            {Object.entries(rows).map(([key, values], id) => (\n                <React.Fragment key={key}>\n                    {\n                        values?.map((value, index) =>\n                            <Draggable draggableId={`row-${key}-${value.id}`} key={`${key}-${value.id}`} index={id}>\n                                {(provided) => (\n                                    <tr\n                                        key={`tr-${key}-${value.id}`}\n                                        ref={provided.innerRef}\n                                        {...provided.draggableProps}\n                                        style={{\n                                            ...provided.draggableProps.style,\n                                            cursor: 'default',\n                                        }}\n                                        className={`calculation-tr ${checkedItems.includes(key) ? 'selected' : ''}`}\n                                    >\n\n                                        {\n                                            selectKey === key ? (\n                                                <>\n                                                    <td {...provided.dragHandleProps} style={{ width: '24px' }}>\n                                                        {\n                                                            index === 0 && <GripVertical color=\"#98A2B3\" style={{ cursor: 'move' }} />\n                                                        }\n                                                    </td>\n                                                    <DepartmentRowChangeLoading />\n                                                </>\n                                            )\n                                                : (\n                                                    <>\n                                                        <td {...provided.dragHandleProps} style={{ width: '24px' }} className='shadowRight-'>\n                                                            {\n                                                                index === 0 && <GripVertical color=\"#98A2B3\" style={{ cursor: 'move' }} />\n                                                            }\n                                                        </td>\n                                                        <td style={{ width: '64px', textAlign: 'left' }}>\n\n                                                            <div className='d-flex align-items-center justify-content-end gap-2'>\n                                                                {index === 0 && (<span>{id + 1}</span>)}\n                                                                {\n                                                                    mapMergeItemWithNo[`${key}-${value.calculator}`] ? (\n                                                                        <div className='d-flex justify-content-center align-items-center' style={{ width: '20px', height: '20px', borderRadius: '24px', background: '#F2F4F7', border: '1px solid #EAECF0', color: '#344054', fontSize: '10px', marginRight: '0px' }}>\n                                                                            {mapMergeItemWithNo[`${key}-${value.calculator}`]}\n                                                                        </div>\n                                                                    ) : (\n                                                                        <label className=\"customCheckBox checkbox\" style={{ marginRight: '0px' }}>\n                                                                            <input type=\"checkbox\" checked={selectItem[`${key}-${value.id}`] ? true : false} onChange={(e) => handleChange(e, value, key)} />\n                                                                            <span className=\"checkmark\" style={{ top: '0px' }}>\n                                                                                <Check color=\"#1AB2FF\" size={20} />\n                                                                            </span>\n                                                                        </label>\n                                                                    )\n                                                                }\n                                                            </div>\n                                                        </td>\n                                                        <td style={{ width: '192px' }}>\n                                                            {\n                                                                index === 0 && (\n                                                                    <SelectComponent departments={departments} handleChange={handleDepartmentChange} title={value.label} keyValue={key} />\n                                                                )\n                                                            }\n                                                        </td>\n                                                        <td style={{ width: '300px', textAlign: 'left' }}>\n                                                            <textarea rows={1} className=\"auto-expand\" style={{ background: 'transparent', border: '0px solid #fff', fontSize: '14px' }} value={value.description}\n                                                                onChange={(e) => updateData(key, value.id, 'description', e.target.value)}\n                                                                onInput={(e) => {\n                                                                    e.target.style.height = 'auto';\n                                                                    e.target.style.height = `${e.target.scrollHeight}px`;\n                                                                }}\n                                                                onFocus={(e) => {\n                                                                    e.target.style.height = 'auto';\n                                                                    e.target.style.height = `${e.target.scrollHeight}px`;\n                                                                }}\n                                                                onBlur={(e) => {\n                                                                    e.target.style.height = '50px';\n                                                                }}\n                                                                onClick={(e) => {\n                                                                    e.target.style.height = 'auto';\n                                                                    e.target.style.height = `${e.target.scrollHeight}px`;\n                                                                }}\n                                                            ></textarea>\n                                                        </td>\n                                                        <td style={{ width: '128px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    prefix=\"$\"\n                                                                    value={value.cost}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'cost', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='$0.00'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '120px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                            </div>\n                                                        </td>\n                                                        <td style={{ width: '185px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    value={value.profit_type_value}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'profit_type_value', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='0.00'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '60px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                                <select value={value.profit_type} style={{ border: '0px solid #fff', background: 'transparent', fontSize: '14px' }} onChange={(e) => updateData(key, value.id, 'profit_type', e.target.value)}>\n                                                                    <option value={\"MRG\"}>MRG %</option>\n                                                                    <option value={\"AMN\"}>AMT $</option>\n                                                                    <option value={\"MRK\"}>MRK %</option>\n                                                                </select>\n                                                            </div>\n                                                        </td>\n                                                        <td style={{ width: '100%', textAlign: 'left', fontSize: '14px' }}>${formatAUD(value.unit_price || \"0.00\")}</td>\n                                                        <td style={{ width: '166px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    value={value.quantity}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'quantity', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='0.00'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '60px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                                {/* <select value={value.type} style={{ border: '0px solid #fff', background: 'transparent', fontSize: '14px' }} onChange={(e) => updateData(key, value.id, 'type', e.target.value)}>\n                                                                    <option value=\"Cost\">1/Q</option>\n                                                                    <option value=\"Hourly\">1/H</option>\n                                                                </select> */}\n                                                            </div>\n                                                        </td>\n\n                                                        <td style={{ width: '60px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    suffix=\"%\"\n                                                                    value={value.discount}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'discount', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='0.00%'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '60px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                            </div>\n                                                        </td>\n\n                                                        <td style={{ textAlign: 'left', fontSize: '14px' }}>$ {formatAUD(value.total || 0.00)}</td>\n                                                        <td style={{ width: '32px', position: 'sticky', right: '0px' }} className='shadowLeft-'>\n                                                            <Trash color=\"#98A2B3\" style={{ cursor: 'pointer' }} onClick={() => deleteRow(key, value.id, value.calculator)} />\n                                                        </td>\n                                                    </>\n                                                )\n                                        }\n\n                                    </tr>\n                                )}\n                            </Draggable>\n                        )\n                    }\n                </React.Fragment>\n            ))}\n        </>\n    );\n};\n\nconst DepartmentCalculationTable = ({ setTotals, setPayload, defaultDiscount, xero_tax, preExistCalculation, preMerges, refetch, setMergeDeletedItems }) => {\n    const { unique_id } = useParams();\n    const [rows, setRows] = useState({});\n    const [subItem, setSubItem] = useState(null);\n    const [subItemLabel, setSubItemLabel] = useState(null);\n    const [selectKey, setSelectKey] = useState(null);\n    const [preExistMerges, setPreExistMerges] = useState([]);\n\n    const [merges, setMerges] = useState([]);\n    const [selectItem, setSelectItem] = useState({});\n    const [mapMergeItemWithNo, setMapMergeItemWithNo] = useState({});\n\n    const { data: departments } = useQuery({\n        queryKey: ['departments'],\n        queryFn: getDepartments,\n        staleTime: 0,\n        refetchOnWindowFocus: true\n    });\n    const { isLoading: isLoadingSubItem, data } = useQuery({\n        queryKey: ['calcReferenceId', subItem],\n        queryFn: () => getCalculationByReferenceId(subItem),\n        enabled: !!subItem,\n        retry: 1,\n    });\n\n    const onDragEnd = (result) => {\n        const { source, destination } = result;\n\n        // Dropped outside the list\n        if (!destination) {\n            return;\n        }\n\n        const keys = Object.keys(rows);\n        const sourceKey = keys[source.index];\n        const destinationKey = keys[destination.index];\n\n        if (!sourceKey || !destinationKey) {\n            console.error('Invalid source or destination key.');\n            return;\n        }\n\n        // Reorder keys\n        const reorderedKeys = Array.from(keys);\n        const [removedKey] = reorderedKeys.splice(source.index, 1);\n        reorderedKeys.splice(destination.index, 0, removedKey);\n\n        // Rebuild the rows object with reordered keys\n        const reorderedRows = reorderedKeys.reduce((acc, key) => {\n            acc[key] = rows[key];\n            return acc;\n        }, {});\n\n        setRows(reorderedRows);\n    };\n\n    const handleChange = (subitemId, label) => {\n        if (subitemId) setSubItem(subitemId);\n        if (label) setSubItemLabel(label);\n    };\n\n    const calculateTotal = (item) => {\n        let cost = parseFloat(item.cost) || 0;\n        let quantity = parseFloat(item.quantity) || 0;\n        let subtotal = cost * quantity;\n\n        let margin = parseFloat(item.profit_type_value) || 0;\n        if (item.profit_type === \"MRK\") {\n            subtotal += (subtotal * margin) / 100;\n        } else if (item.profit_type === \"MRG\") {\n            subtotal = subtotal / (1 - margin / 100);\n        } else if (item.profit_type === \"AMN\") {\n            subtotal += margin;\n        }\n\n        let discount = parseFloat(item.discount) || 0;\n        let total = subtotal - (subtotal * discount) / 100;\n\n        return parseFloat(total).toFixed(2);\n    };\n\n    const calculateUnitPrice = (item) => {\n        let cost = parseFloat(item.cost) || 0;\n        let unit_price = 0.00;\n\n        let margin = parseFloat(item.profit_type_value) || 0;\n        if (item.profit_type === \"MRK\") {\n            unit_price = cost + (cost * (margin / 100));\n        } else if (item.profit_type === \"MRG\") {\n            unit_price = cost / (1 - (margin / 100));\n        } else if (item.profit_type === \"AMN\") {\n            unit_price = cost + margin;\n        }\n\n        return parseFloat(unit_price).toFixed(2);\n    };\n\n    const updateData = (key, id, type, value) => {\n        setRows(prevRows => {\n            const updatedRows = {\n                ...prevRows,\n                [key]: prevRows[key].map(item => {\n                    if (item.id === id) {\n                        const updatedItem = { ...item, [type]: value };\n                        if (updatedItem.profit_type === \"MRG\" && updatedItem.profit_type_value >= 100) {\n                            updatedItem.profit_type_value = 99.99;\n                        }\n                        updatedItem.unit_price = calculateUnitPrice(updatedItem);\n                        updatedItem.total = calculateTotal(updatedItem);\n                        return updatedItem;\n                    }\n                    return item;\n                })\n            };\n            return updatedRows;\n        });\n    };\n\n    const deleteMergeCalculator = (calcReferenceId, key) => {\n        let idsToDelete = [], mergeCount = 0;\n\n        const updatedMerges = merges.reduce((result, item) => {\n            const updatedCalculators = item.calculators.filter(\n                calc => !(calc.calculator === calcReferenceId && calc.key === key)\n            );\n\n            if (updatedCalculators.length < 2) {\n                if (item.id && unique_id) idsToDelete.push(item.id);\n                return result;\n            }\n\n            mergeCount++;\n            const alias = romanize(mergeCount);\n            result.push({ ...item, calculators: updatedCalculators, alias });\n            return result;\n        }, []);\n        setMerges(updatedMerges);\n        setMergeDeletedItems((prev) => [...new Set([...prev, ...idsToDelete])]);\n    };\n\n    const deleteRow = (key, id, calcReferenceId) => {\n        setRows(prevRows => {\n            const updatedRows = {\n                ...prevRows,\n                [key]: prevRows[key].filter(item => item.id !== id)\n            };\n\n            if (updatedRows[key].length === 0) delete updatedRows[key];\n\n            return updatedRows;\n        });\n        deleteMergeCalculator(calcReferenceId, key);\n    };\n\n    useEffect(() => {\n        if (data && data.length && subItem) {\n            if (data.length) {\n                data.forEach((item) => {\n                    item.label = subItemLabel;\n                    item.calculator = item.id;\n                    item.index = subItem;\n                    item.merge_id = nanoid(6);\n                    item.discount = defaultDiscount;\n                    item.quantity = parseFloat(parseFloat(item.quantity) || 1).toFixed(2);\n                    item.unit_price = calculateUnitPrice(item);\n                    item.total = calculateTotal(item);\n                });\n            } else {\n                data.push({\n                    label: subItemLabel,\n                    calculator: data.id,\n                    index: subItem,\n                    merge_id: nanoid(6),\n                    discount: defaultDiscount,\n                    quantity: parseFloat(parseFloat(data.quantity) || 1).toFixed(2),\n                });\n            }\n\n            let filteredData = data.filter((item, index, self) =>\n                index === self.findIndex((t) => t.id === item.id)\n            );\n\n            let key = `${nanoid(6)}`;\n            setRows((prevRows) => ({\n                ...prevRows,\n                [`${key}`]: filteredData,\n            }));\n\n            setSubItem(\"\");\n        }\n\n        if (subItem && data?.length === 0) {\n            toast.error(`No calculation found inside ${subItemLabel}`);\n        }\n\n    }, [data, subItem, defaultDiscount, subItemLabel]);\n\n    const handleDepartmentChange = async (value, label, keyValue) => {\n        if (!value || !keyValue) return;\n\n        try {\n            setSelectKey(keyValue);\n            const calculators = await getCalculationByReferenceId(value);\n            if (calculators?.length) {\n                calculators.forEach((item) => {\n                    item.label = label;\n                    item.calculator = item.id;\n                    item.index = value;\n                    item.merge_id = nanoid(6);\n                    item.discount = defaultDiscount;\n                    item.quantity = parseFloat(parseFloat(item.quantity) || 1).toFixed(2);\n                    item.unit_price = calculateUnitPrice(item);\n                    item.total = calculateTotal(item);\n                });\n\n                let filteredData = calculators.filter((item, index, self) =>\n                    index === self.findIndex((t) => t.id === item.id)\n                );\n\n                setRows((prevRows) => ({\n                    ...prevRows,\n                    [`${keyValue}`]: filteredData,\n                }));\n\n            } else {\n                toast.error(`No calculation found inside ${label}`);\n            }\n        } catch (error) {\n            console.error('Error in handleDepartmentChange:', error);\n        } finally {\n            setSelectKey(null);\n        }\n    };\n\n    const calculateSummary = (taxType) => {\n        let budget = 0;\n        let subtotal = 0;\n\n        Object.values(rows)?.forEach(departmentRows => {\n            departmentRows?.forEach(item => {\n                let rate = parseFloat(item.cost) || 0;\n                let quantity = parseFloat(item.quantity) || 0;\n                let cost = rate * quantity;\n                budget += parseFloat(cost || 0);\n                subtotal += parseFloat(item.total || 0);\n            });\n        });\n\n        let tax = 0;\n        let total = 0;\n\n        if (taxType === 'ex') {\n            tax = subtotal * 0.10;\n            total = subtotal + tax;\n        } else if (taxType === 'in') {\n            total = subtotal;\n            tax = total * 0.10 / 1.10;\n            subtotal = total - tax;\n        } else if (taxType === 'no') {\n            tax = 0;\n            total = subtotal;\n        }\n\n        const operationalProfit = subtotal - budget;\n\n        return {\n            budget: parseFloat(budget || 0.00).toFixed(2),\n            operationalProfit: parseFloat(operationalProfit).toFixed(2),\n            subtotal: parseFloat(subtotal).toFixed(2),\n            tax: parseFloat(tax).toFixed(2),\n            total: parseFloat(total).toFixed(2),\n        };\n    };\n\n    useEffect(() => {\n        const summary = calculateSummary(xero_tax);\n        setTotals(summary);\n\n        const calculations = Object.entries(rows).flatMap(([key, items], parentIndex) => {\n            return items.map((item) => {\n                const { id, ...rest } = item;\n                return {\n                    ...rest,\n                    cost: parseFloat(rest.cost || 0.00).toFixed(2),\n                    profit_type_value: parseFloat(rest.profit_type_value || 0.00).toFixed(2),\n                    unit_price: parseFloat(rest.unit_price || 0.00).toFixed(2),\n                    quantity: parseFloat(rest.quantity || 0.00).toFixed(2),\n                    discount: parseFloat(rest.discount || 0.00).toFixed(2),\n                    order: parentIndex + 1, // Use the parent's index as the order\n                };\n            });\n        });\n        setPayload((others) => ({ ...others, expense: summary.total || \"\", calculations }));\n    }, [rows, xero_tax]);\n\n    useEffect(() => {\n        setPreExistMerges(preMerges);\n    }, [preMerges]);\n\n    useEffect(() => {\n        if (!preExistCalculation?.length || !departments?.length) return;\n\n        // Build a map of subindex id to subindex name\n        const subindexMap = departments.reduce((map, department) => {\n            department.subindexes.forEach(subindex => {\n                map[subindex.id] = subindex.name;\n            });\n            return map;\n        }, {});\n\n        // Add merge id to preExistCalculation\n        preExistCalculation.forEach(item => {\n            if (!item.merge_id) item.merge_id = nanoid(6);\n        });\n\n        // Group by order first, then assign nanoid keys\n        const orderGroups = preExistCalculation.reduce((acc, { order, index, ...item }) => {\n            acc[order] = acc[order] || [];\n            let unit_price = item.unit_price;\n            if (unit_price === \"0.00\" || !unit_price) {\n                unit_price = calculateUnitPrice(item);\n            } else if (unit_price) {\n                unit_price = calculateUnitPrice(item);\n            }\n            acc[order].push({ ...item, unit_price, label: subindexMap[index] || \"Unknown\", index });\n            return acc;\n        }, {});\n\n        const reformattedData = Object.keys(orderGroups).reduce((acc, order) => {\n            const key = nanoid(6);\n            acc[key] = orderGroups[order];\n            return acc;\n        }, {});\n\n        // Build a mapping of calculator IDs to reformattedData keys\n        const calculatorKeyMap = {};\n        Object.entries(reformattedData).forEach(([key, items]) => {\n            items.forEach(item => {\n                calculatorKeyMap[item.id] = key;\n            });\n        });\n\n        // Create key-index map and reformat preExistMerges data\n        const reformattedMerges = preExistMerges.map((merge, index) => {\n            const alias = romanize(index + 1);\n\n            const calculators = merge?.calculators?.map(cal => {\n                const findData = preExistCalculation.find(data => data.id === cal.calculator);\n                const key = calculatorKeyMap[findData?.id];\n                return { label: subindexMap[findData?.index], description: findData?.description, total: findData?.total, calculator: findData?.calculator, key, merge_id: findData?.merge_id };\n            });\n\n            return { ...merge, alias, calculators };\n        });\n\n        setRows(reformattedData);\n        setMerges(reformattedMerges);\n\n    }, [preExistCalculation, preExistMerges, departments]);\n\n    useEffect(() => {\n        if (departments?.length) {\n            const keyIndexMap = {};\n            merges?.forEach((merge, index) => {\n                const alias = romanize(index + 1);\n                merge?.calculators?.forEach(cal => {\n                    keyIndexMap[`${cal.key}-${cal.calculator}`] = alias;\n                });\n            });\n\n            setMapMergeItemWithNo(keyIndexMap);\n            setPayload((others) => ({ ...others, merges }));\n        }\n    }, [merges]);\n\n\n    return (\n        <>\n            <div className=\"pb-3\" style={{ overflowX: 'auto', width: '100%' }}>\n                <DragDropContext onDragEnd={onDragEnd}>\n                    <table className='w-100 department-calculation'>\n                        <DepartmentCalculationTableHead />\n                        <Droppable droppableId=\"departmentQuoteTable\">\n                            {(provided) => (\n                                <tbody {...provided.droppableProps} ref={provided.innerRef}>\n                                    <DepartmentCalculationTableBody\n                                        rows={rows}\n                                        updateData={updateData}\n                                        deleteRow={deleteRow}\n                                        defaultDiscount={defaultDiscount}\n                                        selectItem={selectItem}\n                                        setSelectItem={setSelectItem}\n                                        mapMergeItemWithNo={mapMergeItemWithNo}\n                                        checkedItems={Object.keys(selectItem)}\n\n                                        selectKey={selectKey}\n                                        departments={departments}\n                                        handleDepartmentChange={handleDepartmentChange}\n                                    />\n                                    {\n                                        isLoadingSubItem && <DepartmentQuoteTableRowLoading />\n                                    }\n\n                                    <DepartmentCalculationTableEmptyRow srNo={Object.keys(rows || {}).length} departments={departments} handleChange={handleChange} />\n                                    {provided.placeholder}\n                                </tbody>\n                            )}\n                        </Droppable>\n                    </table>\n                </DragDropContext>\n            </div>\n            <div className='merge-section' style={{ marginTop: '20px', textAlign: 'left' }}>\n                <CreateMergeCalculation unique_id={unique_id} selectItem={selectItem}\n                    setSelectItem={setSelectItem} merges={merges} setMerges={setMerges}\n                    setPayload={setPayload} refetch={refetch} setPreExistMerges={setPreExistMerges}\n                />\n                <ListMergeCalculations unique_id={unique_id} merges={merges}\n                    setMerges={setMerges}\n                    refetch={refetch}\n                    deleteMergeCalculator={deleteMergeCalculator}\n                />\n            </div>\n\n        </>\n    );\n};\n\nexport default DepartmentCalculationTable;","import React, { useEffect, useRef, useState } from 'react';\nimport { Col, Placeholder, Row } from 'react-bootstrap';\nimport { Search } from 'react-bootstrap-icons';\nimport { useQuery } from '@tanstack/react-query';\nimport { Dropdown } from 'primereact/dropdown';\nimport { useDebounce } from 'primereact/hooks';\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from 'primereact/inputtext';\nimport { toast } from 'sonner';\nimport { getClientById, getListOfClients } from '../../../../../../APIs/ClientsApi';\nimport ImageAvatar from '../../../../../../ui/image-with-fallback/image-avatar';\n\nconst QuoteToBusiness = ({ isLoading, data, setPayload }) => {\n    const [selectClient, setSelectClient] = useState(null);\n    const [selectContact, setSelectContact] = useState(null);\n    const [isEdit, setIsEdit] = useState(false);\n\n    const observerRef = useRef(null);\n    const dropdownRef = useRef(null);\n    const [clients, setClients] = useState([]);\n    const [page, setPage] = useState(1);\n    const [hasMoreData, setHasMoreData] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const [inputValue, debouncedValue, setInputValue] = useDebounce('', 400);\n    const limit = 25;\n\n    const mainAddress = data.addresses.find(address => address.is_main) || (data.addresses?.length ? data.addresses[0] : {});\n    const mainContact = data.contact_persons.find(contact => contact.is_main) || (data.contact_persons?.length ? data.contact_persons[0] : {});\n\n    const clientQuery = useQuery({\n        queryKey: ['id', selectClient],\n        queryFn: () => getClientById(selectClient),\n        enabled: !!selectClient,\n        retry: 1,\n    });\n    const isBusiness = clientQuery.data?.is_business;\n\n    const contactOptions = clientQuery.data?.contact_persons || [];\n\n    useEffect(() => {\n        setPage(1);\n    }, [debouncedValue]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            setLoading(true);\n            const data = await getListOfClients(page, limit, debouncedValue);\n            if (page === 1) setClients(data.results);\n            else {\n                if (data?.results?.length > 0) {\n                    setClients(prev => {\n                        const existingClientIds = new Set(prev.map(client => client.id));\n                        const newClients = data.results.filter(client => !existingClientIds.has(client.id));\n                        return [...prev, ...newClients];\n                    });\n                }\n            }\n            setHasMoreData(data.count !== clients.length);\n            setLoading(false);\n        };\n\n        loadData();\n    }, [page, debouncedValue]);\n\n    // Wait for the dropdown to render its items\n    const setupObserver = () => {\n        const lastRow = document.querySelector('.p-dropdown-items .p-dropdown-item:last-child');\n\n        if (lastRow && !observerRef.current) {\n            observerRef.current = new IntersectionObserver(entries => {\n                if (entries[0].isIntersecting) {\n                    setPage(prevPage => prevPage + 1);\n                }\n            }, { threshold: 1.0 });\n            observerRef.current.observe(lastRow);\n        }\n    };\n\n    useEffect(() => {\n        if (!isEdit || !clients.length || !hasMoreData || !dropdownRef.current) return;\n\n        // Use a small delay or MutationObserver to ensure DOM is ready\n        const timeout = setTimeout(setupObserver, 100);\n\n        return () => {\n            clearTimeout(timeout);\n            if (observerRef.current) {\n                observerRef.current.disconnect();\n                observerRef.current = null;\n            }\n        };\n    }, [clients, hasMoreData, isEdit]);\n\n    const filterTemplate = () => {\n        return (\n            <IconField iconPosition=\"left\">\n                <InputIcon><Search className='mb-2' /></InputIcon>\n                <InputText\n                    type=\"text\"\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    className=\"p-inputtext p-component\"\n                    placeholder=\"Search clients\"\n                    style={{ width: '100%' }}\n\n                />\n            </IconField>\n        );\n    };\n\n    const handleChangeSave = () => {\n        if (!selectClient) return toast.error('Please select a client');\n        setPayload((prev) => ({ ...prev, client: selectClient, contact_person: selectContact }));\n        setIsEdit(false);\n    };\n\n    const clientOptionTemplate = (option) => {\n        return (\n            <div className=\"d-flex align-items-center gap-1\">\n                <ImageAvatar has_photo={option.has_photo} photo={option.photo} is_business={option.is_business} />\n                <div>{option.name}</div>\n            </div>\n        );\n    };\n\n    const selectedOptionTemplate = (option) => {\n        if (option?.name) {\n            return (\n                <div className=\"d-flex align-items-center gap-1\">\n                    <ImageAvatar has_photo={option?.has_photo} photo={option?.photo} is_business={option?.is_business} />\n                    <div>{option?.name}</div>\n                </div>\n            );\n        }\n    };\n\n    return (\n        <>\n            <Row>\n                {isEdit ? (\n                    <>\n                        <Col sm={6} style={{ minHeight: '190px' }}>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Company<span className='required'>*</span></p>\n                            <Dropdown\n                                ref={dropdownRef}\n                                value={selectClient}\n                                loading={loading}\n                                onChange={(e) => setSelectClient(e.value)}\n                                options={clients}\n                                itemTemplate={clientOptionTemplate}\n                                valueTemplate={selectClient && selectedOptionTemplate}\n                                optionLabel=\"name\"\n                                optionValue=\"id\"\n                                placeholder=\"Select client\"\n                                filter\n                                filterTemplate={filterTemplate}\n                                virtualScrollerOptions={{ itemSize: 46, lazy: true, onLazyLoad: setupObserver }}\n                                className=\"w-100\"\n                                filterInputAutoFocus={true}\n                            />\n                        </Col>\n                        {isBusiness &&\n                            <Col sm={6} style={{ minHeight: '190px' }}>\n                                <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                                <Dropdown\n                                    value={selectContact}\n                                    onChange={(e) => setSelectContact(e.value)}\n                                    options={contactOptions}\n                                    optionLabel={(option) => `${option.firstname} ${option.lastname}`}\n                                    optionValue='id'\n                                    placeholder=\"Select contact\"\n                                    filter\n                                    loading={clientQuery.isLoading}\n                                    className=\"w-100\"\n                                    filterInputAutoFocus={true}\n                                />\n                            </Col>\n                        }\n                    </>\n                ) : (\n                    <>\n                        <Col sm={6}>\n                            {isLoading ? (\n                                <>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                </>\n                            ) : (\n                                <>\n                                    <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Company</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{data?.name || '-'}</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>ABN: {data?.abn || '-'}</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{data?.phone || '-'}</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '8px' }}>{mainAddress?.address || '-'}</p>\n                                </>\n                            )}\n                        </Col>\n                        <Col sm={6}>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{`${mainContact?.firstname || '-'} ${mainContact?.lastname || '-'}`}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.position || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.phone || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.email || '-'}</p>\n                        </Col>\n                    </>\n                )}\n\n                <Col sm={12}>\n                    {isEdit ? (\n                        <div className=\"d-flex\">\n                            <button onClick={handleChangeSave} className=\"btn py-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                                Save\n                            </button>\n                            <button onClick={() => setIsEdit(!isEdit)} className=\"btn py-0\" style={{ color: '#B42318', fontSize: '14px', fontWeight: '600' }}>\n                                Cancel\n                            </button>\n                        </div>\n                    ) : (\n                        <button onClick={() => setIsEdit(!isEdit)} className=\"btn p-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                            Edit info\n                        </button>\n                    )}\n                </Col>\n            </Row>\n        </>\n    );\n};\n\nexport default QuoteToBusiness;","import React, { useEffect, useRef, useState } from 'react';\nimport { Col, Placeholder, Row } from 'react-bootstrap';\nimport { Search } from 'react-bootstrap-icons';\nimport { useQuery } from '@tanstack/react-query';\nimport { Dropdown } from 'primereact/dropdown';\nimport { useDebounce } from 'primereact/hooks';\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from 'primereact/inputtext';\nimport { toast } from 'sonner';\nimport { getClientById, getListOfClients } from '../../../../../../APIs/ClientsApi';\nimport ImageAvatar from '../../../../../../ui/image-with-fallback/image-avatar';\n\nconst QuoteToClient = ({ isLoading, data, setPayload }) => {\n    const [selectClient, setSelectClient] = useState(null);\n    const [selectContact, setSelectContact] = useState(null);\n    const [isEdit, setIsEdit] = useState(false);\n\n    const observerRef = useRef(null);\n    const dropdownRef = useRef(null);\n    const [clients, setClients] = useState([]);\n    const [page, setPage] = useState(1);\n    const [hasMoreData, setHasMoreData] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const [inputValue, debouncedValue, setInputValue] = useDebounce('', 400);\n    const limit = 25;\n\n    const mainContact = data?.contact_persons?.find(contact => contact.is_main) || (data?.contact_persons?.length ? data?.contact_persons[0] : {});\n\n    const clientQuery = useQuery({\n        queryKey: ['id', selectClient],\n        queryFn: () => getClientById(selectClient),\n        enabled: !!selectClient,\n        retry: 1,\n    });\n\n    const contactOptions = clientQuery.data?.contact_persons || [];\n    const isBusiness = clientQuery.data?.is_business;\n\n    useEffect(() => {\n        setPage(1);\n    }, [debouncedValue]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            setLoading(true);\n            const data = await getListOfClients(page, limit, debouncedValue);\n            if (page === 1) setClients(data.results);\n            else {\n                if (data?.results?.length > 0) {\n                    setClients(prev => {\n                        const existingClientIds = new Set(prev.map(client => client.id));\n                        const newClients = data.results.filter(client => !existingClientIds.has(client.id));\n                        return [...prev, ...newClients];\n                    });\n                }\n            }\n            setHasMoreData(data.count !== clients.length);\n            setLoading(false);\n        };\n\n        loadData();\n    }, [page, debouncedValue]);\n\n    // Wait for the dropdown to render its items\n    const setupObserver = () => {\n        const lastRow = document.querySelector('.p-dropdown-items .p-dropdown-item:last-child');\n\n        if (lastRow && !observerRef.current) {\n            observerRef.current = new IntersectionObserver(entries => {\n                if (entries[0].isIntersecting) {\n                    setPage(prevPage => prevPage + 1);\n                }\n            }, { threshold: 1.0 });\n            observerRef.current.observe(lastRow);\n        }\n    };\n\n    useEffect(() => {\n        if (!isEdit || !clients.length || !hasMoreData || !dropdownRef.current) return;\n\n        // Use a small delay or MutationObserver to ensure DOM is ready\n        const timeout = setTimeout(setupObserver, 100);\n\n        return () => {\n            clearTimeout(timeout);\n            if (observerRef.current) {\n                observerRef.current.disconnect();\n                observerRef.current = null;\n            }\n        };\n    }, [clients, hasMoreData, isEdit]);\n\n    const filterTemplate = () => {\n        return (\n            <IconField iconPosition=\"left\">\n                <InputIcon><Search className='mb-2' /></InputIcon>\n                <InputText\n                    type=\"text\"\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    className=\"p-inputtext p-component\"\n                    placeholder=\"Search clients\"\n                    style={{ width: '100%' }}\n\n                />\n            </IconField>\n        );\n    };\n\n    const handleChangeSave = () => {\n        if (!selectClient) return toast.error('Please select a client');\n        setPayload((prev) => ({ ...prev, client: selectClient, contact_person: selectContact }));\n        setIsEdit(false);\n    };\n\n    const clientOptionTemplate = (option) => {\n        return (\n            <div className=\"d-flex align-items-center gap-1\">\n                <ImageAvatar has_photo={option.has_photo} photo={option.photo} is_business={option.is_business} />\n                <div>{option.name}</div>\n            </div>\n        );\n    };\n\n    const selectedOptionTemplate = (option) => {\n        if (option?.name) {\n            return (\n                <div className=\"d-flex align-items-center gap-1\">\n                    <ImageAvatar has_photo={option?.has_photo} photo={option?.photo} is_business={option?.is_business} />\n                    <div>{option?.name}</div>\n                </div>\n            );\n        }\n    };\n\n    return (\n        <Row>\n            {isEdit ? (\n                <>\n                    <Col sm={6} style={{ minHeight: '190px' }}>\n                        <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Company<span className='required'>*</span></p>\n                        <Dropdown\n                            ref={dropdownRef}\n                            value={selectClient}\n                            loading={loading}\n                            onChange={(e) => setSelectClient(e.value)}\n                            options={clients}\n                            itemTemplate={clientOptionTemplate}\n                            valueTemplate={selectClient && selectedOptionTemplate}\n                            optionLabel=\"name\"\n                            optionValue=\"id\"\n                            placeholder=\"Select client\"\n                            filter\n                            filterTemplate={filterTemplate}\n                            virtualScrollerOptions={{ itemSize: 46, lazy: true, onLazyLoad: setupObserver }}\n                            className=\"w-100\"\n                            filterInputAutoFocus={true}\n                        />\n                    </Col>\n                    {\n                        isBusiness &&\n                        <Col sm={6} style={{ minHeight: '190px' }}>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                            <Dropdown\n                                value={selectContact}\n                                onChange={(e) => setSelectContact(e.value)}\n                                options={contactOptions}\n                                optionLabel={(option) => `${option.firstname} ${option.lastname}`}\n                                optionValue='id'\n                                placeholder=\"Select contact\"\n                                filter\n                                loading={clientQuery.isLoading}\n                                className=\"w-100\"\n                                filterInputAutoFocus={true}\n                            />\n                        </Col>\n                    }\n                </>\n            ) : (\n                <Col sm={12}>\n                    {isLoading ? (\n                        <>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                        </>\n                    ) : (\n                        <>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{`${mainContact?.firstname || '-'} ${mainContact?.lastname || '-'}`}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.position || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.phone || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.email || '-'}</p>\n                        </>\n                    )}\n                </Col>\n            )}\n\n            <Col sm={12}>\n                {isEdit ? (\n                    <div className=\"d-flex\">\n                        <button onClick={handleChangeSave} className=\"btn py-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                            Save\n                        </button>\n                        <button onClick={() => setIsEdit(!isEdit)} className=\"btn py-0\" style={{ color: '#B42318', fontSize: '14px', fontWeight: '600' }}>\n                            Cancel\n                        </button>\n                    </div>\n                ) : (\n                    <button onClick={() => setIsEdit(!isEdit)} className=\"btn p-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                        Edit info\n                    </button>\n                )}\n            </Col>\n        </Row>\n    );\n};\n\nexport default QuoteToClient;\n","import React from 'react';\n\nconst CustomRadioButton = ({ label, name, value, checked, onChange, disabled }) => {\n  return (\n    <label className={`custom-radio-button ${disabled ? 'disabled' : ''}`}>\n      <input\n        type=\"radio\"\n        name={name}\n        value={value}\n        checked={checked}\n        onChange={onChange}\n        disabled={disabled}\n      />\n      <span className=\"custom-radio-button__checkmark\"></span>\n      {label}\n    </label>\n  );\n};\n\nexport default CustomRadioButton;\n","import React, { useEffect, useState } from 'react';\nimport { Col, Row, Placeholder, OverlayTrigger, Tooltip, Button } from 'react-bootstrap';\nimport { ChevronDown, InfoCircle, PencilSquare } from 'react-bootstrap-icons';\nimport { components } from 'react-select';\nimport Select1 from 'react-select';\nimport { FormControl, MenuItem, Select } from '@mui/material';\nimport { useQuery } from '@tanstack/react-query';\nimport { Calendar } from 'primereact/calendar';\nimport { Dropdown } from 'primereact/dropdown';\nimport { InputNumber } from 'primereact/inputnumber';\nimport Form from 'react-bootstrap/Form';\nimport DepartmentCalculationTable from './department-calculation-table';\nimport QuoteToBusiness from './quote-to-business';\nimport QuoteToClient from './quote-to-client';\nimport { getClientById, getProjectManager } from '../../../../../../APIs/ClientsApi';\nimport ImageAvatar from '../../../../../../ui/image-with-fallback/image-avatar';\nimport CustomRadioButton from '../ui/custom-radio-button';\n\nconst CustomOption = (props) => {\n  return (\n    <components.Option {...props}>\n      <div className='d-flex align-items-center'>\n        <ImageAvatar has_photo={props?.data.has_photo} photo={props.data.image} is_business={false} />\n        {props.data.label}\n      </div>\n    </components.Option>\n  );\n};\n\nconst DepartmentQuote = React.memo(({ payload, setPayload, setTotals, refetch, preExistCalculation, preExistMerges, setMergeDeletedItems, setContactPersons, quoteType }) => {\n  const [paymentCollection, setPaymentCollection] = useState('request');\n  const [selectedManagers, setSelectedManagers] = useState([]);\n  const [editedReference, setEditedReference] = useState('');\n  const [isEditingReference, setIsEditingReference] = useState(false);\n  const [editedDescription, setEditedDescription] = useState('');\n  const [isEditingDescription, setIsEditingDescription] = useState(false);\n  const [maxUpfront, setMaxUpfront] = useState(21);\n\n  const handleEditReference = () => {\n    setIsEditingReference(true);\n    setEditedReference(payload.reference || '');\n  };\n  const handleEditDescription = () => {\n    setIsEditingDescription(true);\n    setEditedDescription(payload.description || '');\n  };\n\n  const handleDataChange = (e) => {\n    setEditedReference(e.target.value);\n    setEditedDescription(e.target.value);\n  };\n\n  const handleSaveReference = () => {\n    setIsEditingReference(false);\n    setPayload((prev) => ({ ...prev, reference: editedReference }));\n  };\n  const handleSaveDescription = () => {\n    setIsEditingDescription(false);\n    setPayload((prev) => ({ ...prev, description: editedDescription }));\n  };\n\n\n  const projectManagerQuery = useQuery({ queryKey: ['project-manager'], queryFn: getProjectManager });\n  const clientQuery = useQuery({\n    queryKey: ['id', payload.client],\n    queryFn: () => getClientById(payload.client),\n    enabled: !!payload.client,\n    retry: 1,\n  });\n\n  useEffect(() => {\n    if (clientQuery.data?.contact_persons?.length) {\n      let person = clientQuery.data?.contact_persons[0];\n      let find = clientQuery.data?.contact_persons.find((contact) => contact.is_main === true);\n      if (find) {\n        setPayload((others) => ({ ...others, contact_person: find.id }));\n      } else {\n        setPayload((others) => ({ ...others, contact_person: person.id }));\n      }\n      setContactPersons(clientQuery.data?.contact_persons);\n    }\n  }, [clientQuery.data]);\n\n  useEffect(() => {\n    if (payload.managers) {\n      const uniqueManagers = payload.managers.reduce((acc, manager) => {\n        if (!acc.some(item => item.manager === manager.manager)) {\n          acc.push(manager);\n        }\n        return acc;\n      }, []);\n\n      const initialManagers = uniqueManagers.map(manager => ({\n        value: manager.manager,\n        has_photo: projectManagerQuery?.data?.find(user => user.id === manager.manager)?.has_photo,\n        label: projectManagerQuery?.data?.find(user => user.id === manager.manager)?.name || 'Unknown',\n        image: projectManagerQuery?.data?.find(user => user.id === manager.manager)?.photo || 'https://dev.memate.com.au/media/no_org.png'\n      }));\n      setSelectedManagers(initialManagers);\n    }\n  }, [payload.managers, projectManagerQuery.data]);\n\n  useEffect(()=> {\n    if (payload.recurring && quoteType === 'Recurring') {\n      const frequency = payload.recurring.frequency || null;\n      const start_date = new Date(payload.recurring.start_date);\n      const end_by = payload.recurring.end_by || 0;\n      console.log('end_by: ', end_by);\n\n      if (end_by === 1) {\n        const end_date = new Date(payload.recurring.end_date);\n        let divider = 1;\n        if (frequency === 'D') divider = 1000 * 60 * 60 * 24; // Daily\n        else if (frequency === 'W') divider = 1000 * 60 * 60 * 24 * 7; // Weekly\n        else if (frequency === 'B') divider = 1000 * 60 * 60 * 24 * 14; // Biweekly\n        else if (frequency === 'M' || frequency === 'L') divider = 1000 * 60 * 60 * 24 * 30; // Monthly or Last Day of the Month\n        else if (frequency === 'Q') divider = 1000 * 60 * 60 * 24 * 91; // Quarterly\n        else if (frequency === 'Y') divider = 1000 * 60 * 60 * 24 * 365; // Yearly\n        const daysBetweenStartAndEnd = Math.ceil((end_date - start_date) / divider); \n        console.log('daysBetweenStartAndEnd: ', daysBetweenStartAndEnd);\n        setMaxUpfront(daysBetweenStartAndEnd);\n      } else if (end_by === 2) {\n        const occurrences = payload.recurring.occurrences || 0;\n        setMaxUpfront(occurrences);\n        if (payload.recurring.upfront_projects > occurrences)\n        setPayload((data) => ({ ...data, recurring: { ...data?.recurring, initial_projects: occurrences, upfront_projects: occurrences } }));\n      } else {\n        setMaxUpfront(21);\n      }\n    }\n  }, [payload.recurring, quoteType]);\n\n  return (\n    <React.Fragment>\n      <div className='company-info text-left' style={{ background: '#fff', borderRadius: '4px', padding: '16px', marginBottom: '16px' }}>\n        <Row>\n          <Col md={8} style={{ borderRight: '1px solid #F2F4F7' }}>\n            <h3 style={{ color: '#344054', fontSize: '16px', fontWeight: '600' }}>Reference  <InfoCircle color=\"#667085\" size={16} /></h3>\n            {clientQuery.isLoading ? (\n              <Placeholder as=\"p\" animation=\"wave\">\n                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '120px', height: '20px' }} />\n              </Placeholder>\n            ) : isEditingReference ? (\n              <p>\n                <input\n                  type=\"text\"\n                  value={editedReference}\n                  onChange={handleDataChange}\n                  onBlur={handleSaveReference}\n                  autoFocus\n                  className=\"border rounded p-2 w-100\"\n                />\n              </p>\n            ) : (\n              <div>\n                <p style={{ color: '#475467', fontSize: '16px', fontWeight: '400', marginBottom: '16px', whiteSpace: \"pre-line\" }}>\n                  {payload.reference}\n                  <PencilSquare size={16} color=\"#106B99\" onClick={handleEditReference} className='ms-2' style={{ cursor: 'pointer' }} />\n                </p>\n              </div>\n            )}\n\n\n            <h3 style={{ color: '#344054', fontSize: '16px', fontWeight: '600' }}>Description</h3>\n            {clientQuery.isLoading ? (\n              <Placeholder as=\"p\" animation=\"wave\">\n                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '120px', height: '20px' }} />\n              </Placeholder>\n            ) : isEditingDescription ? (\n              <p>\n                <textarea\n                  type=\"text\"\n                  value={editedDescription}\n                  onChange={handleDataChange}\n                  onBlur={handleSaveDescription}\n                  autoFocus\n                  className=\"border rounded p-2\"\n                  style={{ resize: 'none', width: '100%', height: '120px' }}\n                ></textarea>\n              </p>\n            ) : (\n              <div className='mb-4'>\n                <p style={{ color: '#475467', fontSize: '16px', fontWeight: '400', marginBottom: '0px', whiteSpace: \"pre-line\", maxHeight: '200px', overflow: 'auto' }}>\n                  {payload.description}\n                </p>\n                <PencilSquare size={16} color=\"#106B99\" onClick={handleEditDescription} className='ms-1' style={{ cursor: 'pointer' }} />\n              </div>\n            )}\n\n          </Col>\n          <Col md={4}>\n            <h3 style={{ color: '#344054', fontSize: '16px', fontWeight: '600' }}>Quote To  <InfoCircle color=\"#667085\" size={16} /></h3>\n            <Row>\n              {\n                clientQuery?.data?.is_business ?\n                  <QuoteToBusiness isLoading={clientQuery?.isLoading} data={clientQuery?.data} setPayload={setPayload} />\n                  :\n                  <QuoteToClient isLoading={clientQuery?.isLoading} data={clientQuery?.data} setPayload={setPayload} />\n              }\n            </Row>\n          </Col>\n        </Row>\n      </div>\n      <div className='DepartmentQuote mb-3' style={{ background: '#fff', borderRadius: '4px', padding: '16px', width: '100%' }}>\n\n        <DepartmentCalculationTable setTotals={setTotals} setPayload={setPayload} xero_tax={payload.xero_tax} defaultDiscount={clientQuery?.data?.category?.value || 0} preExistCalculation={preExistCalculation} preMerges={preExistMerges} refetch={refetch} setMergeDeletedItems={setMergeDeletedItems} />\n\n        <Row>\n          <Col md={6}>\n            <Form.Group className=\"mb-3 text-start note-textarea\" controlId=\"exampleForm.ControlTextarea1\">\n              <Form.Label style={{ color: '#475467', fontSize: '14px' }}>Notes on the quote/invoice</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                placeholder='Enter a description...'\n                value={payload.note || \"\"}\n                onChange={(e) => setPayload((data) => ({ ...data, note: e.target.value }))}\n                required\n                className='textarea'\n                style={{ height: '229px', padding: '12px 14px', resize: 'none' }}\n              />\n            </Form.Group>\n          </Col>\n          <Col md={6}>\n            <Row>\n              <Col>\n                <Row>\n                  <Col sm={12} className='text-start'>\n                    <div className='formgroupboxs mb-3 mt-1'>\n                      <label style={{ color: '#475467', fontSize: '14px', display: 'block', marginBottom: '6px' }}>Project Manager<span className='required'>*</span></label>\n                      <div className={`inputInfo px-0`} style={{ minHeight: '46px', height: 'fit-content', padding: '0px 14px' }}>\n                        <Select1\n                          placeholder=\"Select Manager\"\n                          className=\"basic-multi-select w-100 border-0\"\n                          closeMenuOnSelect={false}\n                          components={{ Option: CustomOption }}\n                          value={selectedManagers}\n                          onChange={(selected) => {\n                            const managers = selected\n                              ? [...new Map(selected.map((obj) => [obj.value, { manager: obj.value }])).values()]\n                              : [];\n\n                            setSelectedManagers(selected);\n                            setPayload((others) => ({ ...others, managers: managers || [] }));\n                          }}\n                          isMulti\n                          styles={{\n                            control: (styles) => ({\n                              ...styles, boxShadow: 'none',\n                            }),\n                            multiValueRemove: (styles) => {\n                              return {\n                                ...styles,\n                                ':hover': {\n                                  backgroundColor: '#fff',\n                                  cursor: 'pointer'\n                                },\n                              };\n                            },\n                            multiValue: (styles, { data }) => {\n                              return {\n                                ...styles,\n                                backgroundColor: '#fff',\n                                border: '1px solid #D0D5DD',\n                                borderRadius: '4px',\n                                ':before': {\n                                  borderRadius: '50%',\n                                  content: '\" \"',\n                                  backgroundImage: data?.has_photo ? `url(${data.image})` : 'url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjFlbSIgaGVpZ2h0PSIxZW0iIGZpbGw9IiM2NjcwODUiIGNsYXNzPSJiaSBiaS1wZXJzb24iPjxwYXRoIGQ9Ik04IDhhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTItM2EyIDIgMCAxIDEtNCAwIDIgMiAwIDEgMSA0IDBtNCA4YzAgMS0xIDEtMSAxSDMscy0xIDAtMS0xIDEtNCA2LTQgNiAzIDYgNG0tMS0uMDA0Yy0uMDAxLS4yNDYtLjE1NC0uOTg2LS44MzItMS42NjRDMTEuNTE2IDEwLjY4IDEwLjI4OSAxMCA4IDEwcy0zLjUxNi42OC00LjE2OCAxLjMzMmMtLjY3OC42NzgtLjgzIDEuNDE4LS44MzIgMS42NjR6Ij48L3BhdGg+PC9zdmc+\")',\n                                  backgroundSize: 'cover',\n                                  backgroundPosition: 'center',\n                                  backgroundRepeat: 'no-repeat',\n                                  display: 'block',\n                                  marginRight: 8,\n                                  position: 'relative',\n                                  top: '5px',\n                                  left: '5px',\n                                  height: 16,\n                                  width: 16,\n                                  border: '0.3px solid #101828'\n                                },\n                              };\n                            },\n                          }}\n                          options={projectManagerQuery?.data?.map((user) => ({\n                            value: user.id,\n                            label: user.name,\n                            image: user.photo,\n                            has_photo: user.has_photo\n                          }))}\n                        />\n                      </div>\n                    </div>\n\n                  </Col>\n                  <Col sm={12} className='text-start'>\n                    <div className=\"formgroupboxs mb-3\">\n                      <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>PO</label>\n                      <div className={`inputInfo px-0`} style={{ height: '46px' }}>\n                        <Form.Control\n                          required\n                          type=\"text\"\n                          placeholder=\"Purchase Order #\"\n                          value={payload?.purchase_order || \"\"}\n                          style={{ color: '#101828' }}\n                          className='w-100 m-0 border-0 no-border-outline'\n                          onChange={(e) => setPayload((data) => ({ ...data, purchase_order: e.target.value }))}\n                        />\n                      </div>\n                    </div>\n                  </Col>\n                  <Col sm={12} className='text-start'>\n                    <Form.Group className=\"mb-3 mui-select-custom\">\n                      <Form.Label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Amounts are<span className='required'>*</span></Form.Label>\n                      <FormControl sx={{ m: 0, minWidth: `100%`, color: '#101828' }}>\n                        <Select\n                          value={payload?.xero_tax || \"\"}\n                          onChange={(e) => setPayload((data) => ({ ...data, xero_tax: e.target.value }))}\n                          displayEmpty\n                          inputProps={{ 'aria-label': 'Without label' }}\n                          IconComponent={ChevronDown}\n                        >\n                          <MenuItem value={\"ex\"}>Tax exclusive</MenuItem>\n                          <MenuItem value={\"in\"}>Tax Inclusive</MenuItem>\n                          <MenuItem value={\"no\"}>No tax</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Form.Group>\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row>\n                  <Col sm={12} className='quoteInvoice'>\n                    <div className=\"radio-buttons mt-4 pt-3\">\n                      <CustomRadioButton\n                        label={<><b>Request Payment </b> <span> Create an invoice requesting <br></br>payment on a specific date</span></>}\n                        name=\"payment\"\n                        value=\"request\"\n                        checked={paymentCollection === 'request'}\n                        onChange={() => setPaymentCollection(\"request\")}\n                      />\n                      <CustomRadioButton\n                        label={<><b>Autocharge Customer </b> <span> Automatically charge a payment<br></br> method on file</span></>}\n                        name=\"payment\"\n                        value=\"auto\"\n                        checked={paymentCollection === 'auto'}\n                        onChange={() => setPaymentCollection(\"auto\")}\n                      />\n                    </div>\n                  </Col>\n                  <Col sm={12}>\n                    <div className=\"toggle-switch-wrap\">\n                      <label className=\"toggle-switch\">\n                        <input\n                          type=\"checkbox\"\n                          checked={Boolean(payload.display_discount)}\n                          onChange={(e) => setPayload((prevPayload) => ({\n                            ...prevPayload,\n                            display_discount: e.target.checked\n                          }))}\n                        />\n                        <span className=\"switch\" />\n                      </label>\n                      <em>Display Discounts</em>\n                    </div>\n                  </Col>\n                </Row>\n              </Col>\n            </Row>\n          </Col>\n        </Row>\n      </div>\n\n      {quoteType === 'Recurring' &&\n        <div style={{ background: '#fff', borderRadius: '4px', padding: '16px', width: '100%' }} >\n          <h3 style={{ color: 'rgb(52, 64, 84)', fontSize: '16px', fontWeight: '600', textAlign: 'left' }}>\n            Recurring Details {\" \"}\n            {['top'].map((placement) => (\n              <OverlayTrigger\n                key={placement}\n                placement={placement}\n                overlay={\n                  <Tooltip className='TooltipOverlay width-300' id={`tooltip-${placement}`}>\n                    <div className='text-start'>\n                      1. Daily - 15 Upfront <br />\n                      2. Weekly - Day of the Week - 5 Upfront<br />\n                      3. Biweekly - Day of the week - 4 Upfront<br />\n                      4. Monthly - Date - 3 Upfront<br />\n                      5. Last Day of the Month - Date - 3 Upfront<br />\n                      6. Quarterly - Date - 4 Upfront<br />\n                      7. Yearly - 2 Upfront\n                    </div>\n\n                  </Tooltip>\n                }\n              >\n                <Button className='ms-1 bg-transparent border-0 p-0'><InfoCircle size={16} color=\"#667085\" /> </Button>\n              </OverlayTrigger>\n            ))}\n          </h3>\n\n          <div className='d-flex align-items-center gap-3'>\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px', display: 'block' }}>Frequency <span className='required'>*</span></label>\n              <Dropdown\n                style={{ height: '46px',  minWidth: '250px', maxWidth: '250px'  }}\n                value={payload?.recurring?.frequency || null}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, frequency: e.value } }))}\n                options={[\n                  { label: \"Daily\", value: \"D\" },\n                  { label: \"Weekly\", value: \"W\" },\n                  { label: \"Biweekly\", value: \"B\" },\n                  { label: \"Monthly\", value: \"M\" },\n                  { label: \"Last Day of the Month\", value: \"L\" },\n                  { label: \"Quarterly\", value: \"Q\" },\n                  { label: \"Yearly\", value: \"Y\" },\n                ]}\n                className=\"w-100 outline-none\"\n                placeholder=\"Select frequency\"\n                filterInputAutoFocus={true}\n              />\n            </div>\n\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Start <span className='required'>*</span></label>\n              <Calendar\n                value={payload?.recurring?.start_date || null}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, start_date: e.value } }))}\n                showButtonBar\n                placeholder='DD/MM/YY'\n                dateFormat=\"dd/mm/yy\"\n                locale=\"en\"\n                style={{ height: '46px' }}\n                className='w-100 outline-none border rounded'\n              />\n            </div>\n\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>End <span className='required'>*</span></label>\n              <Dropdown\n                value={payload?.recurring?.end_by}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, end_by: e.value } }))}\n                options={[\n                  { label: \"No end\", value: 0 },\n                  { label: \"Number of Occurrences\", value: 2 },\n                  { label: \"By date\", value: 1 },\n                ]}\n                style={{ height: '46px', minWidth: '260px' }}\n                className=\"w-100 outline-none\"\n                placeholder=\"Select an end\"\n                filterInputAutoFocus={true}\n              />\n            </div>\n\n            {\n              payload?.recurring?.end_by === 2 ?\n                <div className=\"formgroupboxs mb-3 text-start\">\n                  <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Number of Occurrences <span className='required'>*</span></label>\n                  <InputNumber\n                    value={payload?.recurring?.occurrences || 0}\n                    onValueChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, occurrences: e.target.value } }))}\n                    style={{ height: '46px' }}\n                    placeholder='Enter number of occurrences'\n                    inputStyle={{ width: '80px' }}\n                    className='w-100 outline-none border rounded'\n                  />\n                </div>\n                : payload?.recurring?.end_by === 1 ?\n                  <div className=\"formgroupboxs mb-3 text-start\">\n                    <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>By Date <span className='required'>*</span></label>\n                    <Calendar\n                      value={payload?.recurring?.end_date || null}\n                      onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, end_date: e.value } }))}\n                      showButtonBar\n                      placeholder='DD/MM/YY'\n                      dateFormat=\"dd/mm/yy\"\n                      minDate={payload?.recurring?.start_date || null}\n                      locale=\"en\"\n                      style={{ height: '46px' }}\n                      className='w-100 outline-none border rounded'\n                    />\n                  </div>\n                  : null\n            }\n\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Upfront Projects <span className='required'>*</span></label>\n              <Dropdown\n                value={payload?.recurring?.upfront_projects || 0}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, upfront_projects: e.value, initial_projects: 1 } }))}\n                options={[\n                  { label: \"0\", value: 0, disabled: maxUpfront < 0 },\n                  { label: \"1\", value: 1, disabled: maxUpfront < 1 },\n                  { label: \"2\", value: 2, disabled: maxUpfront < 2 },\n                  { label: \"3\", value: 3, disabled: maxUpfront < 3 },\n                  { label: \"4\", value: 4, disabled: maxUpfront < 4 },\n                  { label: \"5\", value: 5, disabled: maxUpfront < 5 },\n                  { label: \"6\", value: 6, disabled: maxUpfront < 6 },\n                  { label: \"7\", value: 7, disabled: maxUpfront < 7 },\n                  { label: \"8\", value: 8, disabled: maxUpfront < 8 },\n                  { label: \"9\", value: 9, disabled: maxUpfront < 9 },\n                  { label: \"10\", value: 10, disabled: maxUpfront < 10 },\n                  { label: \"11\", value: 11, disabled: maxUpfront < 11 },\n                  { label: \"12\", value: 12, disabled: maxUpfront < 12 },\n                  { label: \"13\", value: 13, disabled: maxUpfront < 13 },\n                  { label: \"14\", value: 14, disabled: maxUpfront < 14 },\n                  { label: \"15\", value: 15, disabled: maxUpfront < 15 },\n                  { label: \"16\", value: 16, disabled: maxUpfront < 16 },\n                  { label: \"17\", value: 17, disabled: maxUpfront < 17 },\n                  { label: \"18\", value: 18, disabled: maxUpfront < 18 },\n                  { label: \"19\", value: 19, disabled: maxUpfront < 19 },\n                  { label: \"20\", value: 20, disabled: maxUpfront < 20 },\n                  { label: \"21\", value: 21, disabled: maxUpfront < 21 },\n                ]}\n                style={{ height: '46px', minWidth: '260px' }}\n                className=\"w-100 outline-none\"\n                placeholder=\"Select upfront projects\"\n                filterInputAutoFocus={true}\n              />\n            </div>\n\n          </div>\n        </div>\n      }\n\n    </React.Fragment>\n  );\n});\n\nexport default DepartmentQuote;","// extracted by mini-css-extract-plugin\nexport default {\"iconStyle\":\"create-proposal_iconStyle__Q0cmV\",\"headerTitle\":\"create-proposal_headerTitle__vMyBv\",\"customLabel\":\"create-proposal_customLabel__vKXkN\",\"templateInfo\":\"create-proposal_templateInfo__ce6V9\",\"dropdownSelect\":\"create-proposal_dropdownSelect__uAoBl\",\"accordion\":\"create-proposal_accordion__WM+iT\",\"error\":\"create-proposal_error__QxGLm\",\"p-accordion-content\":\"create-proposal_p-accordion-content__om9Aa\",\"uploadBox\":\"create-proposal_uploadBox__KxAAF\",\"imageBox\":\"create-proposal_imageBox__-Eh-d\",\"uploadButton\":\"create-proposal_uploadButton__jHShw\",\"uploadText\":\"create-proposal_uploadText__mWPJf\",\"trashBox\":\"create-proposal_trashBox__A3WDp\"};","// extracted by mini-css-extract-plugin\nexport default {\"headerTitle\":\"send-proposal-email_headerTitle__Z8dTz\",\"customLabel\":\"send-proposal-email_customLabel__BN+xG\",\"templateInfo\":\"send-proposal-email_templateInfo__fabRO\",\"bag\":\"send-proposal-email_bag__a-GeD\",\"lable\":\"send-proposal-email_lable__PQY4a\",\"dropdownSelect\":\"send-proposal-email_dropdownSelect__WENZ5\",\"autoCompleteBox\":\"send-proposal-email_autoCompleteBox__la62D\",\"AutoComplete\":\"send-proposal-email_AutoComplete__55Bdi\",\"bcc\":\"send-proposal-email_bcc__G5naH\",\"box\":\"send-proposal-email_box__CiEmC\",\"active\":\"send-proposal-email_active__ERNoo\",\"inputBox\":\"send-proposal-email_inputBox__-sHnD\"};","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { InfoCircle } from 'react-bootstrap-icons';\nimport { useQuery } from \"@tanstack/react-query\";\nimport clsx from 'clsx';\nimport { AutoComplete } from \"primereact/autocomplete\";\nimport { Dialog } from \"primereact/dialog\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Editor } from \"primereact/editor\";\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from \"primereact/inputtext\";\nimport { OverlayPanel } from 'primereact/overlaypanel';\nimport { ProgressSpinner } from \"primereact/progressspinner\";\nimport style from \"./send-proposal-email.module.scss\";\nimport { getEmail, getEmailTemplates, getOutgoingEmail, getSignatureTemplates } from '../../APIs/email-template';\n\nconst headerElement = (\n    <div className={`${style.modalHeader}`}>\n        <div className=\"w-100 d-flex align-items-center gap-2\">\n            <span className={`white-space-nowrap mt-2 mb-2 ${style.headerTitle}`}>\n                Send a Proposal\n            </span>\n        </div>\n    </div>\n);\n\nconst renderHeader = () => (\n    <span className=\"ql-formats\">\n        <button className=\"ql-bold\" aria-label=\"Bold\"></button>\n        <button className=\"ql-italic\" aria-label=\"Italic\"></button>\n        <button className=\"ql-underline\" aria-label=\"Underline\"></button>\n        <button className=\"ql-strike\" aria-label=\"Strikethrough\"></button>\n        <button className=\"ql-blockquote\" aria-label=\"Blockquote\"></button>\n        <button\n            className=\"ql-list\"\n            value=\"ordered\"\n            aria-label=\"Ordered List\"\n        ></button>\n        <button\n            className=\"ql-list\"\n            value=\"bullet\"\n            aria-label=\"Bullet List\"\n        ></button>\n        <button className=\"ql-align\" value=\"\" aria-label=\"Align Left\"></button>\n        <button\n            className=\"ql-align\"\n            value=\"center\"\n            aria-label=\"Align Center\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"right\"\n            aria-label=\"Align Right\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"justify\"\n            aria-label=\"Justify\"\n        ></button>\n        <button className=\"ql-link\" aria-label=\"Insert Link\"></button>\n        <button className=\"ql-image\" aria-label=\"Insert Image\"></button>\n        <button className=\"ql-code-block\" aria-label=\"Code Block\"></button>\n    </span>\n);\nconst header = renderHeader();\n\nconst SendProposalEmailForm = ({ show, setShow, contactPersons, setPayload, save }) => {\n    const op = useRef(null);\n    const profileData = JSON.parse(window.localStorage.getItem('profileData') || '{}');\n    const [from, setFrom] = useState('');\n    const [to, setTo] = useState([]);\n    const [cc, setCC] = useState([]);\n    const [bcc, setBCC] = useState([]);\n    const [subject, setSubject] = useState(null);\n    const [text, setText] = useState(null);\n    const [signature, setSignature] = useState(null);\n\n    const [errors, setErrors] = useState({});\n    const [filteredEmails, setFilteredEmails] = useState([]);\n    const autoCompleteRef = useRef(null);\n    const autoCompleteRef2 = useRef(null);\n    const autoCompleteRef3 = useRef(null);\n    const [showCC, setShowCC] = useState(false);\n    const [showBCC, setShowBCC] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const handleClose = () => setShow(false);\n\n    // Email validation function\n    const isValidEmail = useCallback((email) => {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email.trim());\n    }, []);\n\n    // Validate array of emails\n    const validateEmailArray = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return true; // Empty array is valid\n        return emailArray.every(email => isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Get invalid emails from array\n    const getInvalidEmails = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return [];\n        return emailArray.filter(email => !isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Clean email array by removing invalid emails\n    const cleanEmailArray = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return [];\n        return emailArray.filter(email => isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Validate and clean all email fields\n    const validateAndCleanAllEmails = useCallback(() => {\n        let hasErrors = false;\n        \n        // Check TO emails\n        if (to.length > 0) {\n            const invalidToEmails = getInvalidEmails(to);\n            if (invalidToEmails.length > 0) {\n                console.log('Found invalid TO emails:', invalidToEmails);\n                setTo(cleanEmailArray(to));\n                hasErrors = true;\n            }\n        }\n        \n        // Check CC emails\n        if (cc.length > 0) {\n            const invalidCcEmails = getInvalidEmails(cc);\n            if (invalidCcEmails.length > 0) {\n                console.log('Found invalid CC emails:', invalidCcEmails);\n                setCC(cleanEmailArray(cc));\n                hasErrors = true;\n            }\n        }\n        \n        // Check BCC emails\n        if (bcc.length > 0) {\n            const invalidBccEmails = getInvalidEmails(bcc);\n            if (invalidBccEmails.length > 0) {\n                console.log('Found invalid BCC emails:', invalidBccEmails);\n                setBCC(cleanEmailArray(bcc));\n                hasErrors = true;\n            }\n        }\n        \n        return !hasErrors; // Return true if no errors found\n    }, [to, cc, bcc, getInvalidEmails, cleanEmailArray]);\n\n    const [emailTemplateId, setEmailTemplatedId] = useState(null);\n    const emailTemplateQuery = useQuery({\n        queryKey: [\"emailTemplate\"],\n        queryFn: getEmailTemplates,\n    });\n    const signatureQuery = useQuery({\n        queryKey: [\"getSignatureTemplates\"],\n        queryFn: getSignatureTemplates,\n    });\n    const outgoingEmailTemplateQuery = useQuery({\n        queryKey: [\"getOutgoingEmail\"],\n        queryFn: getOutgoingEmail,\n    });\n    const emailQuery = useQuery({\n        queryKey: [\"emailQuery\", emailTemplateId],\n        queryFn: () => getEmail(emailTemplateId),\n        enabled: !!emailTemplateId,\n        retry: 1,\n    });\n\n    useEffect(() => {\n        if (outgoingEmailTemplateQuery?.data) {\n            if (outgoingEmailTemplateQuery?.data?.outgoing_email && outgoingEmailTemplateQuery?.data?.outgoing_email_verified)\n                setFrom(outgoingEmailTemplateQuery?.data?.outgoing_email);\n            else\n                setFrom('no-reply@memate.com.au');\n        }\n\n        if (!emailTemplateId && emailTemplateQuery?.data) {\n            const activeTemplateId = emailTemplateQuery?.data?.find((template) => template.type === 'Proposal');\n            if (activeTemplateId?.id) setEmailTemplatedId(activeTemplateId.id);\n        }\n\n    }, [emailQuery, outgoingEmailTemplateQuery, emailTemplateId, emailTemplateQuery?.data]);\n\n    const onSubmit = async () => {\n        let errorCount = 0;\n        setErrors({});\n\n        // First, validate and clean all email arrays\n        const allEmailsValid = validateAndCleanAllEmails();\n        if (!allEmailsValid) {\n            console.log('Some emails were invalid and have been cleaned');\n        }\n\n        if (!from) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, from: true }));\n        }\n\n        if (to?.length === 0) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, to: true }));\n        } else if (!validateEmailArray(to)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(to);\n            console.log('Invalid TO emails:', invalidEmails);\n            setErrors((others) => ({ ...others, to: true, toInvalid: true, invalidToEmails: invalidEmails }));\n        }\n\n        if (cc.length > 0 && !validateEmailArray(cc)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(cc);\n            console.log('Invalid CC emails:', invalidEmails);\n            setErrors((others) => ({ ...others, cc: true, invalidCcEmails: invalidEmails }));\n        }\n\n        if (bcc.length > 0 && !validateEmailArray(bcc)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(bcc);\n            console.log('Invalid BCC emails:', invalidEmails);\n            setErrors((others) => ({ ...others, bcc: true, invalidBccEmails: invalidEmails }));\n        }\n\n        if (!subject) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, subject: true }));\n        }\n\n        if (!text) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, text: true }));\n        }\n\n        if (errorCount) return;\n        setIsLoading(true);\n        await save();\n        setIsLoading(false);\n    };\n\n    const footerContent = (\n        <div className=\"d-flex justify-content-end gap-2\">\n            <Button className=\"outline-button\" onClick={() => setShow(false)}>\n                Cancel\n            </Button>\n            <Button className=\"solid-button\" disabled={isLoading} onClick={onSubmit}>\n                Send{\" \"}\n                {isLoading && (\n                    <ProgressSpinner\n                        style={{ width: \"20px\", height: \"20px\", color: \"#fff\" }}\n                    />\n                )}\n            </Button>\n        </div>\n    );\n\n    const search = (event) => {\n        const query = event?.query?.toLowerCase() || '';\n        let emails = contactPersons.map((data) => (data.email))?.filter(email => email);\n        emails = emails.filter((email) => !to.includes(email));\n        emails = emails.filter((email) => !cc.includes(email));\n        emails = emails.filter((email) => !bcc.includes(email));\n\n        emails = emails.filter((email) =>\n            email.toLowerCase().includes(query)\n        );\n\n        setFilteredEmails(emails);\n    };\n\n    const onInputChange = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setTo((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length && validEmails.length > 0) {\n                setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onInputChange2 = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setCC((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length) {\n                setErrors((others) => ({ ...others, cc: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onInputChange3 = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setBCC((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length) {\n                setErrors((others) => ({ ...others, bcc: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onFocus = () => {\n        search();\n        if (autoCompleteRef.current) autoCompleteRef.current.show();\n    };\n\n    const onFocus2 = () => {\n        search();\n        if (autoCompleteRef2.current) autoCompleteRef2.current.show();\n    };\n\n    const onFocus3 = () => {\n        search();\n        if (autoCompleteRef3.current) autoCompleteRef3.current.show();\n    };\n\n    useEffect(() => {\n        if (contactPersons?.length) {\n            let emails = contactPersons.map((data) => (data.email))?.filter(email => email);\n            setFilteredEmails(emails);\n        }\n    }, [contactPersons]);\n\n    // Auto-clean invalid emails from arrays\n    useEffect(() => {\n        if (to.length > 0) {\n            const invalidToEmails = getInvalidEmails(to);\n            if (invalidToEmails.length > 0) {\n                console.log('Auto-cleaning invalid TO emails:', invalidToEmails);\n                const validEmails = cleanEmailArray(to);\n                setTo(validEmails);\n            }\n        }\n    }, [to, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        if (cc.length > 0) {\n            const invalidCcEmails = getInvalidEmails(cc);\n            if (invalidCcEmails.length > 0) {\n                console.log('Auto-cleaning invalid CC emails:', invalidCcEmails);\n                const validEmails = cleanEmailArray(cc);\n                setCC(validEmails);\n            }\n        }\n    }, [cc, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        if (bcc.length > 0) {\n            const invalidBccEmails = getInvalidEmails(bcc);\n            if (invalidBccEmails.length > 0) {\n                console.log('Auto-cleaning invalid BCC emails:', invalidBccEmails);\n                const validEmails = cleanEmailArray(bcc);\n                setBCC(validEmails);\n            }\n        }\n    }, [bcc, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        setPayload((prev) => ({\n            ...prev,\n            subject: subject,\n            email_body: text,\n            from_email: from,\n            to: to?.toString(),\n            ...(cc.length > 0 && { cc: cc.toString() }),\n            ...(bcc.length > 0 && { bcc: bcc.toString() }),\n            ...(signature && { signature: signature })\n        }));\n    }, [subject, text, from, to, cc, bcc, signature, setPayload]);\n\n    useEffect(() => {\n        setText(emailQuery?.data?.body || \"\");\n        setSubject(emailQuery?.data?.subject);\n        setErrors((others) => ({ ...others, subject: false }));\n        setErrors((others) => ({ ...others, text: false }));\n    }, [emailQuery?.data]);\n\n    useEffect(() => {\n        if (signatureQuery?.data) {\n            setSignature(signatureQuery?.data?.find((template) => template.id === profileData.email_signature)?.id);\n        }\n    }, [signatureQuery?.data, profileData.email_signature]);\n\n    return (\n        <Dialog\n            visible={show}\n            modal={true}\n            header={headerElement}\n            footer={footerContent}\n            className={`${style.modal} custom-modal`}\n            style={{ width: \"896px\" }}\n            onHide={handleClose}\n        >\n            <Row>\n                <Col sm={6} className='mb-3'>\n                    <div style={{ position: 'relative' }}>\n                        <label className={clsx(style.customLabel)}>FROM</label>\n                        <Dropdown\n                            options={\n                                (outgoingEmailTemplateQuery && outgoingEmailTemplateQuery?.data && ([{\n                                    value: outgoingEmailTemplateQuery?.data?.outgoing_email,\n                                    label: `${outgoingEmailTemplateQuery?.data?.outgoing_email}`,\n                                }])) ||\n                                []\n                            }\n                            className={clsx(\n                                style.dropdownSelect,\n                                \"dropdown-height-fixed w-100\"\n                            )}\n                            style={{ height: \"46px\", paddingLeft: '60px' }}\n                            placeholder=\"Select from email\"\n                            onChange={(e) => {\n                                setFrom(e.value);\n                                setErrors((others) => ({ ...others, from: false }));\n                            }}\n                            value={from}\n                            filterInputAutoFocus={true}\n                        />\n                    </div>\n                    {errors?.from && (\n                        <p className=\"error-message mb-0\">{\"From email is required\"}</p>\n                    )}\n                </Col>\n                <Col sm={6} className='mb-3'>\n                    <div style={{ position: 'relative' }}>\n                        <label className={clsx(style.customLabel)}>Templates</label>\n                        <Dropdown\n                            options={\n                                (emailTemplateQuery &&\n                                    emailTemplateQuery.data?.map((emailTemplate) => ({\n                                        value: emailTemplate.id,\n                                        label: `${emailTemplate.name}`,\n                                    }))) ||\n                                []\n                            }\n                            className={clsx(\n                                style.dropdownSelect,\n                                \"dropdown-height-fixed w-100\"\n                            )}\n                            style={{ height: \"46px\", paddingLeft: '88px' }}\n                            placeholder=\"Select template\"\n                            onChange={(e) => {\n                                setEmailTemplatedId(e.value);\n                            }}\n                            value={emailTemplateId}\n                            loading={emailTemplateQuery?.isFetching}\n                            filterInputAutoFocus={true}\n                        />\n                        <div className={style.templateInfo} onClick={(e) => op.current.toggle(e)}>\n                            <InfoCircle size={16} color='#737374ff' />\n                        </div>\n                        <OverlayPanel ref={op}>\n                            <p className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>Choose from your existing templates here.</p>\n                            <div className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>To edit or add new templates, go to<br /> Profile Settings &gt; Templates &gt; Proposal<br /> Templates.</div>\n                        </OverlayPanel>\n                    </div>\n                </Col>\n            </Row>\n            <Row>\n                <Col sm={12} className='mb-3'>\n                    <div className=\"d-flex gap-3 w-100\">\n                        <div style={{ position: 'relative' }} className={style.autoCompleteBox}>\n                            <div style={{ width: '50px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>TO</label>\n                            <AutoComplete\n                                ref={autoCompleteRef}\n                                value={to}\n                                completeMethod={search}\n                                onChange={(e) => {\n                                    setTo(e.value);\n                                    setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n                                }}\n                                multiple\n                                suggestions={filteredEmails}\n                                onClick={onFocus}\n                                onFocus={onFocus}\n                                onKeyUp={onInputChange}\n                                onBlur={(e) => {\n                                    const currentValue = e.target.value.trim();\n                                    if (currentValue) {\n                                        if (isValidEmail(currentValue)) {\n                                            setTo((prev) => [...new Set([...prev, currentValue])]);\n                                            setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n                                        } else {\n                                            setErrors((others) => ({ ...others, toInvalid: true }));\n                                        }\n                                        e.target.value = '';\n                                    }\n                                }}\n                                className={clsx(style.AutoComplete, \"w-100\")}\n                                placeholder=\"TO\"\n                            />\n                        </div>\n                        <Button\n                            className={clsx(style.box, { [style.active]: showCC })}\n                            onClick={() => { setShowCC(!showCC); setCC([]); }}\n                        >\n                            CC\n                        </Button>\n                        <Button\n                            className={clsx(style.box, { [style.active]: showBCC })}\n                            onClick={() => { setShowBCC(!showBCC); setBCC([]); }}\n                        >\n                            BCC\n                        </Button>\n                    </div>\n                    {errors?.to && !errors?.toInvalid && (\n                        <p className=\"error-message mb-0\">{\"To email is required\"}</p>\n                    )}\n                    {errors?.toInvalid && (\n                        <div>\n                            <p className=\"error-message mb-0\">{\"Please enter valid email addresses for TO\"}</p>\n                            {errors?.invalidToEmails && errors.invalidToEmails.length > 0 && (\n                                <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                    Invalid emails: {errors.invalidToEmails.join(', ')}\n                                </p>\n                            )}\n                        </div>\n                    )}\n                </Col>\n                {\n                    showCC &&\n                    <Col sm={6} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <div style={{ width: '50px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>CC</label>\n                            <AutoComplete\n                                ref={autoCompleteRef2}\n                                value={cc}\n                                completeMethod={search}\n                                onChange={(e) => { \n                                    setCC(e.value);\n                                    setErrors((others) => ({ ...others, cc: false }));\n                                }}\n                                multiple\n                                suggestions={filteredEmails}\n                                onClick={onFocus2}\n                                onFocus={onFocus2}\n                                onKeyUp={onInputChange2}\n                                onBlur={(e) => {\n                                    const currentValue = e.target.value.trim();\n                                    if (currentValue) {\n                                        if (isValidEmail(currentValue)) {\n                                            setCC((prev) => [...new Set([...prev, currentValue])]);\n                                            setErrors((others) => ({ ...others, cc: false }));\n                                        } else {\n                                            setErrors((others) => ({ ...others, cc: true }));\n                                        }\n                                        e.target.value = '';\n                                    }\n                                }}\n                                className={clsx(style.AutoComplete, \"w-100\")}\n                                placeholder=\"CC\"\n                            />\n                        </div>\n                        {errors?.cc && (\n                            <div>\n                                <p className=\"error-message mb-0\">{\"Please enter valid email addresses for CC\"}</p>\n                                {errors?.invalidCcEmails && errors.invalidCcEmails.length > 0 && (\n                                    <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                        Invalid emails: {errors.invalidCcEmails.join(', ')}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </Col>\n                }\n\n                {\n                    showBCC && <Col sm={6} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <div style={{ width: '60px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>BCC</label>\n                            <AutoComplete\n                                ref={autoCompleteRef3}\n                                value={bcc}\n                                completeMethod={search}\n                                onChange={(e) => { \n                                    setBCC(e.value);\n                                    setErrors((others) => ({ ...others, bcc: false }));\n                                }}\n                                multiple\n                                suggestions={filteredEmails}\n                                onClick={onFocus3}\n                                onFocus={onFocus3}\n                                onKeyUp={onInputChange3}\n                                onBlur={(e) => {\n                                    const currentValue = e.target.value.trim();\n                                    if (currentValue) {\n                                        if (isValidEmail(currentValue)) {\n                                            setBCC((prev) => [...new Set([...prev, currentValue])]);\n                                            setErrors((others) => ({ ...others, bcc: false }));\n                                        } else {\n                                            setErrors((others) => ({ ...others, bcc: true }));\n                                        }\n                                        e.target.value = '';\n                                    }\n                                }}\n                                className={clsx(style.AutoComplete, style.bcc, \"w-100\")}\n                                placeholder=\"BCC\"\n                            />\n                        </div>\n                        {errors?.bcc && (\n                            <div>\n                                <p className=\"error-message mb-0\">{\"Please enter valid email addresses for BCC\"}</p>\n                                {errors?.invalidBccEmails && errors.invalidBccEmails.length > 0 && (\n                                    <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                        Invalid emails: {errors.invalidBccEmails.join(', ')}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </Col>\n                }\n                <Col sm={12} className='mb-2'>\n                    <div style={{ position: 'relative' }}>\n                        <div style={{ width: '60px' }} className={style.bag}></div>\n                        <label className={clsx(style.customLabel)}>SUBJECT</label>\n                        <IconField>\n                            <InputIcon>\n                                {emailQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                            </InputIcon>\n                            <InputText\n                                value={subject}\n                                className={clsx(style.inputBox, 'w-100')}\n                                style={{ paddingLeft: '100px' }}\n                                onChange={(e) => {\n                                    setSubject(e.target.value);\n                                    setErrors((others) => ({ ...others, subject: false }));\n                                }}\n                                placeholder=\"{Organization} | Quotation: {number} | {reference}\"\n                            />\n                        </IconField>\n                    </div>\n                    {errors?.subject && (\n                        <p className=\"error-message mb-0\">{\"Subject is required\"}</p>\n                    )}\n                </Col>\n                <Col sm={12} className='mb-3'>\n                    <div className=\"d-flex flex-column gap-1\" style={{ position: 'relative' }}>\n                        <label className={clsx(style.lable)}>Message</label>\n                        <InputIcon style={{ position: 'absolute', right: '15px', top: '40px', zIndex: 1 }}>\n                            {emailQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                        </InputIcon>\n                        <Editor\n                            style={{ minHeight: \"150px\" }}\n                            headerTemplate={header}\n                            value={text}\n                            placeholder='Enter a description...'\n                            onTextChange={(e) => {\n                                setText(e.htmlValue);\n                                setErrors((others) => ({ ...others, text: false }));\n                            }}\n                        />\n                    </div>\n                    {errors?.text && (\n                        <p className=\"error-message mb-0\">{\"Message is required\"}</p>\n                    )}\n                </Col>\n                <Col sm={12}>\n                    <div style={{ position: 'relative' }}>\n                        <label className={clsx(style.customLabel)}>Signature</label>\n                        <Dropdown\n                            options={\n                                (signatureQuery &&\n                                    signatureQuery.data?.map((template) => ({\n                                        value: template.id,\n                                        label: `${template.name}`,\n                                    }))) ||\n                                []\n                            }\n                            panelClassName='px880-dropdown-item'\n                            className={clsx(\n                                style.dropdownSelect,\n                                \"dropdown-height-fixed w-100\"\n                            )}\n                            style={{ height: \"46px\", paddingLeft: '88px' }}\n                            placeholder=\"Select signature\"\n                            onChange={(e) => {\n                                setSignature(e.value);\n                            }}\n                            value={signature}\n                            loading={signatureQuery?.isFetching}\n                            filterInputAutoFocus={true}\n                        />\n                    </div>\n                </Col>\n            </Row>\n        </Dialog>\n    );\n};\n\nexport default SendProposalEmailForm;","import React from 'react';\nimport SendProposalEmailForm from '../../../../../ui/send-proposal/send-proposal-email-form';\n\nconst SendProposal = ({ show, setShow, contactPersons, setPayload, onSubmit, handleClose }) => {\n  const save = async () => {\n    const res = await onSubmit('send');\n    return res;\n  };\n\n  return (\n    <SendProposalEmailForm show={show} setShow={setShow} contactPersons={contactPersons} setPayload={setPayload} save={save} handleOtherClose={handleClose} />\n  );\n};\n\nexport default SendProposal;","import React, { useEffect, useState } from 'react';\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { Check2Circle, CloudUpload, InfoCircle, PlusLg, Trash } from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { useQuery } from \"@tanstack/react-query\";\nimport clsx from 'clsx';\nimport { nanoid } from 'nanoid';\nimport { Accordion, AccordionTab } from 'primereact/accordion';\nimport { Dialog } from \"primereact/dialog\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from \"primereact/inputtext\";\nimport { OverlayPanel } from 'primereact/overlaypanel';\nimport { ProgressSpinner } from \"primereact/progressspinner\";\nimport { toast } from 'sonner';\nimport style from './create-proposal.module.scss';\nimport FileUploader from './file-uploader/file-uploader';\nimport { getProposalBySalesId, getProposalsTemplate, getProposalsTemplates } from '../../../../../APIs/email-template';\nimport { SunEditorComponent } from '../../../../../shared/ui/editor';\nimport SendProposal from '../send-proposal/send-proposal';\n\n\nconst headerElement = (\n    <div className={`${style.modalHeader}`}>\n        <div className=\"w-100 d-flex align-items-center gap-2\">\n            <b className={style.iconStyle}><Check2Circle size={24} color=\"#079455\" /></b>\n            <span className={`white-space-nowrap mt-2 mb-2 ${style.headerTitle}`}>\n                Proposal\n            </span>\n        </div>\n    </div>\n);\n\nconst renderHeader = () => (\n    <span className=\"ql-formats\">\n        <button className=\"ql-bold\" aria-label=\"Bold\"></button>\n        <button className=\"ql-italic\" aria-label=\"Italic\"></button>\n        <button className=\"ql-underline\" aria-label=\"Underline\"></button>\n        <button className=\"ql-strike\" aria-label=\"Strikethrough\"></button>\n        <button className=\"ql-blockquote\" aria-label=\"Blockquote\"></button>\n        <button\n            className=\"ql-list\"\n            value=\"ordered\"\n            aria-label=\"Ordered List\"\n        ></button>\n        <button\n            className=\"ql-list\"\n            value=\"bullet\"\n            aria-label=\"Bullet List\"\n        ></button>\n        <button className=\"ql-align\" value=\"\" aria-label=\"Align Left\"></button>\n        <button\n            className=\"ql-align\"\n            value=\"center\"\n            aria-label=\"Align Center\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"right\"\n            aria-label=\"Align Right\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"justify\"\n            aria-label=\"Justify\"\n        ></button>\n        <button className=\"ql-link\" aria-label=\"Insert Link\"></button>\n        <button className=\"ql-image\" aria-label=\"Insert Image\"></button>\n        <button className=\"ql-code-block\" aria-label=\"Code Block\"></button>\n    </span>\n);\n\nconst header = renderHeader();\n\nconst CreateProposal = ({ show, setShow, refetch, contactPersons, isExist }) => {\n    const { unique_id } = useParams();\n    const op = React.useRef(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [isVisible, setIsVisible] = useState(false);\n    const [errors, setErrors] = useState({});\n    const [fileName, setFileName] = useState('');\n    const [showSendModal, setShowSendModal] = useState(false);\n    const [payload, setPayload] = useState({});\n\n    const [templateId, setTemplatedId] = useState(null);\n    const [sections, setSections] = useState([]);\n    const [image, setImage] = useState(null);\n    const [isTemplateChanged, setIsTemplateChanged] = useState(false);\n\n    const proposalTemplateQuery = useQuery({\n        queryKey: [\"proposalTemplate\"],\n        queryFn: getProposalsTemplates,\n    });\n\n    const readProposalQuery = useQuery({\n        queryKey: [\"readProposal\", unique_id],\n        queryFn: () => getProposalBySalesId(unique_id),\n        enabled: !!unique_id && isExist,\n        retry: 0,\n    });\n\n    useEffect(() => {\n        if (readProposalQuery?.data) {\n            setTemplatedId(readProposalQuery?.data?.template);\n        }\n    }, [readProposalQuery?.data]);\n\n    const proposalQuery = useQuery({\n        queryKey: [\"getProposal\", templateId],\n        queryFn: () => getProposalsTemplate(templateId),\n        enabled: !!templateId,\n        retry: 0,\n    });\n    const sendProposalAction = () => {\n        // if (!templateId) return toast.error('Template is required');\n        if (!unique_id) return toast.error('Id not found');\n        let notdeletedSections = sections?.filter(section => !section.delete);\n        if (!notdeletedSections?.length) return toast.error('Please add proposal content');\n\n        const newErrors = {};\n        const sectionErrors = sections?.filter(section => !section.delete)?.map((section) => {\n            const sectionError = {};\n\n            if (!section.title) sectionError.title = true;\n            if (!section.description) sectionError.description = true;\n            return sectionError;\n        });\n        if (sectionErrors.some(sectionError => Object.keys(sectionError).length > 0)) {\n            newErrors.sections = sectionErrors;\n        }\n\n        // if (!image) {\n        //     newErrors.image = true;\n        // }\n\n        setErrors(newErrors);\n\n        if (Object.keys(newErrors).length === 0) {\n            setShow(false);\n            setShowSendModal(true);\n        }\n    };\n    const onSubmit = async (action) => {\n        // if (!templateId) return toast.error('Template is required');\n        if (!unique_id) return toast.error('Id not found');\n        let notdeletedSections = sections?.filter(section => !section.delete);\n        if (!notdeletedSections?.length) return toast.error('Please add proposal content');\n        setErrors({});\n\n        const newErrors = {};\n        const sectionErrors = sections?.filter(section => !section.delete)?.map((section) => {\n            const sectionError = {};\n\n            if (!section.title) sectionError.title = true;\n            if (!section.description) sectionError.description = true;\n            return sectionError;\n        });\n        if (sectionErrors.some(sectionError => Object.keys(sectionError).length > 0)) {\n            newErrors.sections = sectionErrors;\n        }\n\n        if (!image) {\n            newErrors.image = true;\n        }\n\n        setErrors(newErrors);\n        if (Object.keys(newErrors).length === 0) {\n            const formData = new FormData();\n\n            sections.forEach((section, index) => {\n                formData.append(`sections[${index}]title`, section.title);\n                formData.append(`sections[${index}]description`, section.description);\n                formData.append(`sections[${index}]delete`, !!section.delete);\n                if (readProposalQuery?.data && section.id) formData.append(`sections[${index}]id`, section.id);\n            });\n            if (templateId) formData.append('template', templateId);\n            else formData.append('template', \"\");\n\n            if (action === \"send\") {\n                formData.append('action', 'send');\n                formData.append('subject', payload?.subject);\n                formData.append('email_body', payload?.email_body);\n                formData.append('from_email', payload?.from_email);\n                formData.append('to', payload?.to);\n                if (payload?.cc) formData.append('cc', payload?.cc);\n                if (payload?.bcc) formData.append('bcc', payload?.bcc);\n            } else {\n                formData.append('action', 'create');\n            }\n\n            if (image?.croppedImageBlob) {\n                const photoHintId = nanoid(6);\n                formData.append('image', image?.croppedImageBlob, `${photoHintId}.jpg`);\n            }\n            const accessToken = localStorage.getItem(\"access_token\");\n\n            setIsLoading(true);\n            let method = \"POST\";\n            let URL = `${process.env.REACT_APP_BACKEND_API_URL}/proposals/new/${unique_id}/`;\n            console.log('readProposalQuery?.data: ', readProposalQuery?.data);\n            if (readProposalQuery?.data) {\n                method = \"PUT\";\n                URL = `${process.env.REACT_APP_BACKEND_API_URL}/proposals/update/${unique_id}/`;\n            }\n            try {\n                setIsLoading(true);\n\n                const response = await fetch(URL, {\n                    method: method,\n                    headers: {\n                        'Authorization': `Bearer ${accessToken}`,\n                    },\n                    body: formData,\n                });\n\n                const data = await response.json();\n                setIsLoading(false);\n\n                if (response.ok) {\n                    handleClose();\n                    toast.success(`Proposal ${action === 'send' ? 'created and send' : 'created'} successfully!`);\n                    refetch();\n                    readProposalQuery.refetch();\n                    return \"success\";\n                } else {\n                    toast.error(`Failed to ${action === 'send' ? 'create and send' : 'create'} the proposal. Please try again.`);\n                    return \"error\";\n                }\n            } catch (error) {\n                setIsLoading(false);\n                console.error(\"Error creating proposal:\", error);\n                toast.error(`Failed to ${action === 'send' ? 'create and send' : 'create'} the proposal. Please try again.`);\n                return \"error\";\n            } finally {\n                setIsLoading(false);\n            }\n        }\n    };\n    const handleClose = () => {\n        setShow(false);\n        // setTemplatedId(null);\n        // setSections([]);\n        // setImage(null);\n        // setFileName('');\n        setShowSendModal(false);\n    };\n    const handleAddSection = () => {\n        setSections([...sections, { title: \"\", description: \"\" }]);\n    };\n    const handleDeleteSection = (index, id) => {\n        if (id) {\n            setSections((prevSections) =>\n                prevSections.map((section, i) =>\n                    i === index ? { ...section, delete: true } : section\n                )\n            );\n        } else {\n            setSections((prevSections) =>\n                prevSections.filter((section, i) => i !== index)\n            );\n        }\n    };\n    \n    const footerContent = (\n        <div className='d-flex justify-content-between'>\n            <Button className='text-button text-danger' onClick={handleClose}>Cancel</Button>\n            <div className=\"d-flex justify-content-end gap-2\">\n                <Button className=\"btn info-button\" onClick={handleAddSection}>\n                    Add  New Section <PlusLg color='#106B99' />\n                </Button>\n                <Button className=\"outline-button\" disabled={isLoading} onClick={onSubmit}>\n                    Create & Save\n                    {isLoading && (\n                        <ProgressSpinner\n                            style={{ width: \"20px\", height: \"20px\", color: \"#fff\" }}\n                        />\n                    )}\n                </Button>\n                <Button className=\"solid-button\" onClick={sendProposalAction}>\n                    Send Proposal\n                </Button>\n            </div>\n        </div>\n    );\n\n    useEffect(() => {\n        if (templateId && isTemplateChanged) {\n            if (proposalQuery?.data?.image) {\n                setImage({ croppedImageBase64: proposalQuery?.data?.image });\n            }\n            setSections([\n                ...readProposalQuery?.data?.sections?.map(section => ({ ...section, delete: true })) || [],\n                ...proposalQuery?.data?.sections?.map(({ id, ...rest }) => ({ ...rest })) || []\n            ]);\n        } else if (templateId === readProposalQuery?.data?.template) {\n            if (readProposalQuery?.data?.image) {\n                setImage({ croppedImageBase64: readProposalQuery?.data?.image });\n            } else if (proposalQuery?.data?.image) {\n                setImage({ croppedImageBase64: proposalQuery?.data?.image });\n            }\n            setSections(readProposalQuery?.data?.sections);\n        }\n    }, [templateId, proposalQuery?.data, readProposalQuery?.data]);\n\n    return (\n        <>\n            <Dialog\n                visible={show}\n                modal={true}\n                header={headerElement}\n                footer={footerContent}\n                className={`${style.modal} custom-modal p-0`}\n                style={{ width: \"896px\" }}\n                onHide={handleClose}\n            >\n                <Row className='px-4 pt-4 border-bottom mb-3 bg-white'>\n                    <Col sm={12} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <label className={clsx(style.customLabel)}>Templates</label>\n                            <Dropdown\n                                options={\n                                    (proposalTemplateQuery &&\n                                        proposalTemplateQuery.data?.map((template) => ({\n                                            value: template.id,\n                                            label: `${template.name}`,\n                                        }))) ||\n                                    []\n                                }\n                                className={clsx(\n                                    style.dropdownSelect,\n                                    \"dropdown-height-fixed w-100\"\n                                )}\n                                style={{ height: \"46px\", paddingLeft: '88px' }}\n                                placeholder=\"Select template\"\n                                onChange={(e) => {\n                                    setTemplatedId(e.value);\n                                    setImage(null);\n                                    setIsTemplateChanged(true);\n                                }}\n                                value={templateId}\n                                loading={proposalTemplateQuery?.isFetching}\n                                showClear\n                                scrollHeight=\"380px\"\n                                filter\n                                filterInputAutoFocus={true}\n                            />\n                            <div className={style.templateInfo} onClick={(e) => op.current.toggle(e)}>\n                                <InfoCircle size={16} color='#737374ff' />\n                            </div>\n                            <OverlayPanel ref={op}>\n                                <p className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>Choose from your existing templates here.</p>\n                                <div className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>To edit or add new templates, go to<br /> Profile Settings &gt; Templates &gt; Proposal<br /> Templates.</div>\n                            </OverlayPanel>\n                        </div>\n                    </Col>\n                </Row>\n                <div className='d-flex flex-column px-4'>\n                    <div className='d-flex gap-3 justify-content-center align-items-center mb-1'>\n                        {\n                            image?.croppedImageBase64\n                                ?\n                                <div style={{ position: 'relative', cursor: 'pointer' }} onClick={() => setIsVisible(true)}>\n                                    <div className={style.imageBox} style={{ overflow: 'hidden', textAlign: 'center' }}>\n                                        <img\n                                            alt=\"uploaded-file\"\n                                            src={image?.croppedImageBase64}\n                                            style={{ width: \"100%\", height: \"100#\" }}\n                                        />\n                                    </div>\n                                    <div className={clsx(style.trashBox, 'cursor-pointer')} onClick={(e) => { e.stopPropagation(); setImage(null); }}>\n                                        <Trash color='#F04438' size={16} />\n                                    </div>\n                                </div>\n                                : <div className={style.uploadBox} style={{ cursor: 'pointer' }} onClick={() => setIsVisible(true)}>\n                                    <div className={style.uploadButton}>\n                                        <CloudUpload color='#475467' size={20} />\n                                    </div>\n                                    <p className={style.uploadText}>Click to upload</p>\n                                </div>\n                        }\n                    </div>\n                    <FileUploader show={isVisible} setShow={setIsVisible} setPhoto={setImage} />\n                    {errors?.image && (\n                        <p className=\"error-message mb-2 mx-auto\">{\"Image is required\"}</p>\n                    )}\n\n                    {/* <div className='d-flex gap-3 align-items-center mb-1'>\n                        <Button className='outline-button w-fit' style={{ position: 'relative', cursor: 'pointer' }}>\n                            Upload Image <Upload />\n                            <input\n                                type=\"file\"\n                                accept=\"image/*\"\n                                onChange={handleImageUpload}\n                                style={{\n                                    position: 'absolute',\n                                    opacity: 0,\n                                    width: '100%',\n                                    height: '100%',\n                                    cursor: 'pointer',\n                                }}\n                            />\n                        </Button>\n                        {fileName && (\n                            <span>{fileName}</span>\n                        )}\n                    </div>\n                    {errors?.image && (\n                        <p className=\"error-message mb-2\">{\"Image is required\"}</p>\n                    )} */}\n                    <Accordion activeIndex={0} className='mt-3'>\n                        {sections?.map((section, originalIndex) => ({ ...section, originalIndex }))?.filter(section => !section.delete)?.map((section, index) => (\n                            <AccordionTab key={section?.id || `accordion-${index}`} className={clsx(style.accordion, { [style.error]: (errors?.sections?.[index]?.title || errors?.sections?.[index]?.description) ? true : false }, 'proposal-accordion')} header={`Paragraph ${index + 1}`}>\n                                <div className=\"flex flex-column gap-2 w-100\" style={{ marginBottom: '16px' }}>\n                                    <label className={style.label}>Paragraph title</label>\n                                    <IconField>\n                                        <InputIcon>\n                                            {proposalQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                                        </InputIcon>\n                                        <InputText\n                                            value={section?.title}\n                                            className={clsx(style.inputBox, 'w-100 border mt-2')}\n                                            onChange={(e) => {\n                                                setSections(prevSections => {\n                                                    const newSections = [...prevSections];\n                                                    newSections[section?.originalIndex] = { ...newSections[section?.originalIndex], title: e.target.value };\n                                                    return newSections;\n                                                });\n                                            }}\n                                            placeholder=\"Section Title\"\n                                        />\n                                    </IconField>\n                                    {errors?.sections?.[index]?.title && (\n                                        <p className=\"error-message mb-0\">{\"Title is required\"}</p>\n                                    )}\n                                </div>\n                                <div className=\"d-flex flex-column gap-1 w-100 pb-2\" style={{ position: 'relative' }}>\n                                    <label className={clsx(style.lable)}>Paragraph</label>\n                                    <InputIcon style={{ position: 'absolute', right: '15px', top: '40px', zIndex: 1 }}>\n                                        {proposalQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                                    </InputIcon>\n                                    <SunEditorComponent\n                                        value={section.description}\n                                        onChange={(content) => {\n                                            setSections(prevSections => {\n                                                const newSections = [...prevSections];\n                                                newSections[section?.originalIndex] = { ...newSections[section?.originalIndex], description: content };\n                                                return newSections;\n                                            });\n                                        }}\n                                        placeholder=\"Enter a description...\"\n                                        height={299}\n                                        showTable={true}\n                                        showImage={true}\n                                        showLink={true}\n                                        showCodeView={true}\n                                        enableS3Upload={true}\n                                        uploadId={unique_id}\n                                    />\n                                    {errors?.sections?.[index]?.description && (\n                                        <p className=\"error-message mb-0\">{\"Message is required\"}</p>\n                                    )}\n                                </div>\n                                <div className='bg-white mt-2 pt-2 d-flex justify-content-end'>\n                                    <Button className='danger-outline-button' onClick={() => handleDeleteSection(section?.originalIndex, section?.id)}>Delete Paragraph</Button>\n                                </div>\n                            </AccordionTab>\n                        ))}\n                    </Accordion>\n                </div>\n            </Dialog >\n            <SendProposal show={showSendModal} setShow={setShowSendModal} contactPersons={contactPersons} setPayload={setPayload} onSubmit={onSubmit} handleClose={handleClose} />\n        </>\n    );\n};\n\nexport default CreateProposal;","import React from 'react';\nimport SendEmailForm from '../../../../../ui/send-email/send-email-form';\n\nconst SendQuote = ({ show, setShow, contactPersons, setPayload, createNewRequest }) => {\n  const save = async () => {\n    await createNewRequest('send');\n  };\n\n  return (\n    <SendEmailForm show={show} setShow={setShow} contactPersons={contactPersons} setPayload={setPayload} save={save} />\n  );\n};\n\nexport default SendQuote;","import React, { useEffect, useState } from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { ChevronLeft, FiletypePdf, PlusSlashMinus } from 'react-bootstrap-icons';\nimport { Link, NavLink, useNavigate, useParams } from 'react-router-dom';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { toast } from 'sonner';\nimport DepartmentQuote from './department-quote';\nimport CustomRadioButton from './ui/custom-radio-button';\nimport { createNewCalculationQuoteRequest, createNewMergeQuote, deleteMergeQuote, getQuoteByUniqueId, updateNewCalculationQuoteRequest } from '../../../../../APIs/CalApi';\nimport { useTrialHeight } from '../../../../../app/providers/trial-height-provider';\nimport { formatAUD } from '../../../../../shared/lib/format-aud';\nimport CreateProposal from '../../../features/sales-features/create-proposal/create-proposal';\nimport SendQuote from '../../../features/sales-features/send-quote/send-quote';\n\n\nconst CalculateQuote = () => {\n    const navigate = useNavigate();\n    const { trialHeight } = useTrialHeight();\n    const [contactPersons, setContactPersons] = useState([]);\n    const [showQuoteModal, setShowQuoteModal] = useState(false);\n    const [showProposalModal, setShowProposalModal] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [quoteType, setQuoteType] = useState('Standard');\n    const [payload, setPayload] = useState({});\n    const [mergeDeletedItems, setMergeDeletedItems] = useState([]);\n    const [totals, setTotals] = useState({ budget: 0, operationalProfit: 0, subtotal: 0, tax: 0, total: 0 });\n    const { unique_id } = useParams();\n    const newRequestQuery = useQuery({\n        queryKey: ['unique_id', unique_id],\n        queryFn: () => getQuoteByUniqueId(unique_id),\n        enabled: !!unique_id,\n        retry: 1,\n        cacheTime: 0,\n        staleTime: 0,\n        refetchOnWindowFocus: false,\n    });\n\n    useEffect(() => {\n        if (!unique_id) {\n            const storedSessionData = JSON.parse(window.sessionStorage.getItem(`new-request`) || \"{}\");\n            const profileData = JSON.parse(window.localStorage.getItem('profileData') || \"{}\");\n            setPayload((others) => ({\n                ...others,\n                xero_tax: \"ex\",\n                display_discount: true,\n                managers: [{ manager: profileData?.desktop_user_id }],\n                client: storedSessionData?.id || \"\",\n                reference: storedSessionData?.reference || \"\",\n                description: storedSessionData?.requirements || \"\",\n                recurring: {\n                    frequency: \"M\",\n                    start_date: new Date(),\n                    end_by: 0,\n                    upfront_projects: 0,\n                    initial_projects: 0\n                }\n            }));\n        } else if (newRequestQuery?.data) {\n            let quoteType = newRequestQuery?.data?.recurring?.frequency ? 'Recurring' : 'Standard';\n            setQuoteType(quoteType);\n            const newData = { ...newRequestQuery?.data };\n            if (quoteType === 'Recurring') {\n                const sydneyFormatter = new Intl.DateTimeFormat('en-AU', {\n                    timeZone: 'Australia/Sydney',\n                    year: 'numeric',\n                    month: '2-digit',\n                    day: '2-digit',\n                    hour: '2-digit',\n                    minute: '2-digit',\n                    second: '2-digit',\n                    hour12: false,\n                });\n\n                // Check if timestamp is in seconds, then multiply by 1000\n                const startTimestamp = +newData.recurring.start_date;\n                newData.recurring.start_date = new Date(startTimestamp < 1e12 ? startTimestamp * 1000 : startTimestamp);\n                console.log(\"Start Date (Sydney):\", sydneyFormatter.format(newData.recurring.start_date));\n\n                newData.recurring.end_by = +newData.recurring.end_by;\n                newData.recurring.upfront_projects = +newData.recurring.upfront_projects;\n                newData.recurring.initial_projects = +newData.recurring.initial_projects;\n\n                if (newData.recurring.end_by === 1) {\n                    const endTimestamp = +newData.recurring.end_date;\n                    newData.recurring.end_date = new Date(endTimestamp < 1e12 ? endTimestamp * 1000 : endTimestamp);\n                    console.log(\"End Date (Sydney):\", sydneyFormatter.format(newData.recurring.end_date));\n                }\n            } else {\n                newData.recurring = {\n                    frequency: \"M\",\n                    start_date: new Date(),\n                    end_by: 0,\n                    upfront_projects: 0,\n                    initial_projects: 0\n                };\n            }\n            setPayload((others) => ({ ...others, ...newData }));\n        }\n    }, [unique_id, newRequestQuery?.data]);\n\n    const newRequestMutation = useMutation({\n        mutationFn: (data) => createNewCalculationQuoteRequest(data),\n        onSuccess: (response) => {\n            if (!response) {\n                toast.error(`Failed to create new calculation quote. Please try again.`);\n            }\n        },\n        onError: (error) => {\n            setIsLoading(false);\n            console.error('Error creating new calculation quote:', error);\n            toast.error(`Failed to create new calculation quote. Please try again.`);\n        }\n    });\n\n    const updateRequestMutation = useMutation({\n        mutationFn: (data) => updateNewCalculationQuoteRequest(unique_id, data),\n        onSuccess: (response) => {\n            if (!response) {\n                setIsLoading(false);\n                toast.error(`Failed to update calculation quote. Please try again.`);\n            }\n        },\n        onError: (error) => {\n            setIsLoading(false);\n            console.log('Error updating new calculation quote:', error, error?.data?.client?.[0]);\n\n            if (error?.status === 400) {\n                const msg = error?.data?.client?.[0];\n                if (msg?.includes('Invalid pk') && msg?.includes('object does not exist')) {\n                    return toast.error(\"This client has been deleted. Please restore it before continuing.\");\n                }\n            }\n\n            toast.error(`Failed to update calculation quote. Please try again.`);\n        }\n    });\n\n    function formatDateToYMD(date) {\n        if (!date) return '';\n        date = new Date(date);\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    }\n\n    const createNewRequest = async (action) => {\n        payload.action = action;\n        if (action !== \"send\") {\n            delete payload.subject;\n            delete payload.email_body;\n            delete payload.to;\n            delete payload.cc;\n            delete payload.bcc;\n            delete payload.from_email;\n            delete payload.signature;\n        }\n\n        if (action === \"saveAndsend\") {\n            if ((!payload?.calculations || !payload.calculations.length) && action !== \"draft\") return toast.error('At least one calculation is required');\n            setShowQuoteModal(true);\n            return;\n        }\n\n        if (action === \"quote-pdf-open\" || action === \"create-proposal\") {\n            payload.action = \"save\";\n        }\n\n        const merges = payload.merges;\n        if (payload.merges) delete payload.merges;\n\n        if (!payload?.client) return toast.error('Client is required');\n        // if (!payload?.contact_person && action !== \"draft\") return toast.error('Contact person is required');\n        if ((!payload?.managers || !payload.managers?.length) && action !== \"draft\") return toast.error('Project manager is required');\n        if ((!payload?.calculations || !payload.calculations.length) && action !== \"draft\") return toast.error('At least one calculation is required');\n        if (!payload?.xero_tax && action !== \"draft\") return toast.error('Tax details is required');\n        if (!payload?.expense && action !== \"draft\") return toast.error('Expense is required');\n\n        if (quoteType === 'Recurring' && !payload?.recurring) return toast.error('Recurring details is required');\n        if (quoteType === 'Recurring' && !payload?.recurring?.frequency) return toast.error('Recurring frequency is required');\n        if (quoteType === 'Recurring' && !payload?.recurring?.start_date) return toast.error('Recurring start date is required');\n        if (quoteType === 'Recurring' && !([0, 1, 2].includes(payload?.recurring?.end_by))) return toast.error('Recurring end by is required');\n        if (quoteType === 'Recurring' && payload?.recurring?.end_by === 1 && !payload?.recurring?.end_date) return toast.error('Recurring end date is required');\n        if (quoteType === 'Recurring' && payload?.recurring?.end_by === 2 && !payload?.recurring?.occurrences) return toast.error('Recurring projects is required');\n        if (quoteType === 'Recurring') {\n            if (payload.recurring.start_date)\n                payload.recurring.start_date = formatDateToYMD(payload.recurring.start_date);\n            if (payload.recurring.end_date && payload.recurring.end_by === 1)\n                payload.recurring.end_date = formatDateToYMD(payload.recurring.end_date);\n            else {\n                delete payload.recurring.end_date;\n            }\n        } else {\n            payload.recurring = null;\n        }\n\n        let result;\n        setIsLoading(true);\n        if (mergeDeletedItems.length) {\n            for (const id of mergeDeletedItems) {\n                try {\n                    if (id) await deleteMergeQuote(id);\n                } catch (error) {\n                    console.log('Error during with deleting merge: ', error);\n                }\n            }\n        }\n        if (unique_id) {\n            result = await updateRequestMutation.mutateAsync(payload);\n            let uniqueid = result?.unique_id;\n\n            if (merges && merges?.length) {\n                let calculatorMap = result.calculations?.reduce((map, item) => {\n                    map[item.merge_id] = item.id;\n                    return map;\n                }, {});\n\n                const updateMerges = merges?.map(item => ({\n                    ...item,\n                    unique_id: uniqueid,\n                    calculations: item.calculators.map(calc => ({\n                        calculator: calculatorMap[calc.merge_id]\n                    }))\n                }));\n\n                for (const merge of updateMerges) {\n                    try {\n                        if (merge.id) await deleteMergeQuote(merge.id);\n                        await createNewMergeQuote(merge);\n                    } catch (error) {\n                        setIsLoading(false);\n                        console.log('Error during with creating merge: ', error);\n                    }\n                }\n                toast.success(`Calculations and merge items updated successfully.`);\n            } else {\n                toast.success(`Calculations updated successfully.`);\n            }\n\n        } else {\n            result = await newRequestMutation.mutateAsync(payload);\n            let uniqueid = result?.unique_id;\n\n            if (merges && merges?.length) {\n                let calculatorMap = result.calculations?.reduce((map, item) => {\n                    map[item.merge_id] = item.id;\n                    return map;\n                }, {});\n\n                const updateMerges = merges?.map(item => ({\n                    ...item,\n                    unique_id: uniqueid,\n                    calculations: item.calculators.map(calc => ({\n                        calculator: calculatorMap[calc.merge_id]\n                    }))\n                }));\n\n                updateMerges.forEach(async (merge) => {\n                    try {\n                        await createNewMergeQuote(merge);\n                    } catch (error) {\n                        setIsLoading(false);\n                        console.log('Error during with creating merge: ', error);\n                    }\n                });\n                toast.success(`Calculations and new merge items created successfully.`);\n            } else {\n                toast.success(`Calculations created successfully.`);\n            }\n        }\n\n        if (action === \"quote-pdf-open\") {\n            if (result?.quote_url) {\n                window.open(`${process.env.REACT_APP_URL}${result.quote_url}`, '_blank');\n            } else {\n                toast.error('Quote PDF not found.');\n            }\n        } else if (action === \"create-proposal\") {\n            let uniqueid = result?.unique_id;\n            if (uniqueid) navigate(`/sales/quote-calculation/${uniqueid}`);\n            setShowProposalModal(true);\n        } else {\n            navigate(`/sales`);\n        }\n\n        setIsLoading(false);\n        setShowQuoteModal(false);\n    };\n\n    return (\n        <div className='newQuotePage'>\n            <div className='topbar d-flex justify-content-between' style={{ padding: '16px 32px', height: '72px', position: 'relative', boxShadow: \"rgba(0, 0, 0, 0.05) 0px 1px 2px 0px\" }}>\n                <NavLink to={\"\"}>\n                    <button className='back-button' style={{ padding: \"10px 16px\" }} onClick={() => { navigate(-1); }}>\n                        <ChevronLeft color=\"#000000\" size={17} /> &nbsp;Go Back\n                    </button>\n                </NavLink>\n                <h2 className='m-0' style={{ fontSize: '22px', fontWeight: '600', position: 'absolute', left: '42.5%' }}>\n                    <div className='d-flex flex-column align-items-center gap-1'>\n                        <div className='d-flex align-items-center'><PlusSlashMinus color=\"#1D2939\" size={16} />&nbsp; Calculate a Quote</div>\n                        {newRequestQuery?.data?.number && <small className='font-14 border px-3 py-1 rounded' style={{ width: 'fit-content' }}>{newRequestQuery?.data?.number}</small>}\n                    </div>\n                </h2>\n                <div className='d-flex align-items-center justify-content-end'>\n                    <CustomRadioButton\n                        label=\"Standard\"\n                        name=\"customRadio\"\n                        value=\"Standard\"\n                        checked={quoteType === 'Standard'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                        disabled={false}\n                    />\n                    <CustomRadioButton\n                        label=\"Recurring\"\n                        name=\"customRadio\"\n                        value=\"Recurring\"\n                        checked={quoteType === 'Recurring'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                    />\n                    <CustomRadioButton\n                        label=\"Subscription\"\n                        name=\"customRadio\"\n                        value=\"Subscription\"\n                        checked={quoteType === 'Subscription'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                        disabled={true}\n                    />\n                    <CustomRadioButton\n                        label=\"Retainer\"\n                        name=\"customRadio\"\n                        value=\"Retainer\"\n                        checked={quoteType === 'Retainer'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                        disabled={true}\n                    />\n                </div>\n            </div>\n\n            <div className='w-100' style={{ overflow: 'auto', height: `calc(100% - 208px - ${trialHeight}px)`, padding: '16px 32px' }}>\n                <DepartmentQuote payload={payload} setPayload={setPayload} totals={totals} setTotals={setTotals} refetch={newRequestQuery?.refetch} preExistMerges={newRequestQuery?.data?.merges || []} preExistCalculation={newRequestQuery?.data?.calculations || []} setMergeDeletedItems={setMergeDeletedItems} setContactPersons={setContactPersons} quoteType={quoteType} />\n            </div>\n\n            <div className='calculation-quote-bottom w-100' style={{ padding: '8px 24px', height: '136px', background: '#fff', borderTop: '1px solid #f2f2f2', boxShadow: 'rgba(0, 0, 0, 0.06) 0px 0px 4px 0px inset' }}>\n                <div className='d-flex justify-content-between align-items-center pb-3' style={{ gap: '20px', width: '100%', overflowX: 'auto' }}>\n                    <div className='d-flex align-items-center' style={{ gap: '16px' }}>\n                        <div className='item'>\n                            <label>Budget</label>\n                            <div className='amount'>${formatAUD(totals.budget)}</div>\n                        </div>\n                        <div className='item'>\n                            <label>Operational Profit</label>\n                            <div className='amount' style={{ color: '#079455' }}>${formatAUD(totals.operationalProfit)}</div>\n                        </div>\n                    </div>\n                    <div className='d-flex align-items-center' style={{ gap: '16px' }}>\n                        <div className='item'>\n                            <label>Subtotal</label>\n                            <div className='amount'>${formatAUD(totals.subtotal)}</div>\n                        </div>\n                        <div className='item'>\n                            <label>Tax (10%)</label>\n                            <div className='amount'>${formatAUD(totals.tax)}</div>\n                        </div>\n                        <div className='item' style={{ minWidth: 'fit-content' }}>\n                            <label>Total</label>\n                            <div className='amount'>${formatAUD(totals.total)}</div>\n                        </div>\n                    </div>\n                </div>\n                <div className='d-flex justify-content-between align-items-center'>\n                    <div className='d-flex align-items-center' style={{ gap: '0px' }}>\n                        <a href='/sales' type=\"button\" className=\"button-custom text-button text-danger padding-left-0\" style={{ color: '#B42318' }}>\n                            Cancel\n                        </a>\n                        {\n                            <a href='#' onClick={() => createNewRequest('quote-pdf-open')} type=\"button\" className=\"button-custom text-button px-0\">\n                                Quote PDF\n                            </a>\n                        }\n                        {\n                            newRequestQuery?.data?.proposal_pdf ? (\n                                <div className='d-flex align-items-center'>\n                                    <button type=\"button\" className=\"text-button\" onClick={() => setShowProposalModal(true)}>\n                                        Edit Proposal\n                                    </button>\n                                    <Link to={`${process.env.REACT_APP_URL}${newRequestQuery?.data?.proposal_pdf}`} target='_blank' rel=\"noreferrer\" style={{ position: 'relative', top: '-2px', left: '-8px' }}>\n                                        <FiletypePdf color='#106B99' size={20} />\n                                    </Link>\n                                </div>\n                            ) : (\n                                <button type=\"button\" className=\"button-custom text-button px-2\" onClick={() => createNewRequest('create-proposal')}>\n                                    Create Proposal\n                                </button>\n                            )\n                        }\n                    </div>\n                    <div className='d-flex align-items-center' style={{ gap: '8px' }}>\n                        <button type=\"button\" disabled={newRequestMutation.isPending || updateRequestMutation.isPending} onClick={() => createNewRequest('draft')} className=\"button-custom text-button\">\n                            Save Draft\n                            {(newRequestMutation.isPending || updateRequestMutation.isPending)\n                                && (newRequestMutation?.variables?.action === \"draft\" || updateRequestMutation?.variables?.action === \"draft\")\n                                && <ProgressSpinner style={{ width: '20px', height: '20px' }} />}\n                        </button>\n                        <button type=\"button\" disabled={newRequestMutation.isPending || updateRequestMutation.isPending} onClick={() => createNewRequest('save')} className=\"button-custom submit-button-light\">\n                            Save\n                            {(newRequestMutation.isPending || updateRequestMutation.isPending)\n                                && (newRequestMutation?.variables?.action === \"save\" || updateRequestMutation?.variables?.action === \"save\")\n                                && <ProgressSpinner style={{ width: '20px', height: '20px' }} />}\n                        </button>\n                        <button type=\"button\" disabled={newRequestMutation.isPending || updateRequestMutation.isPending} onClick={() => createNewRequest('saveAndsend')} className=\"submit-button\">\n                            Save and Send\n                            {(newRequestMutation.isPending || updateRequestMutation.isPending)\n                                && (newRequestMutation?.variables?.action === \"send\" || updateRequestMutation?.variables?.action === \"send\")\n                                && <ProgressSpinner style={{ width: '20px', height: '20px' }} />}\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <SendQuote show={showQuoteModal} setShow={setShowQuoteModal} contactPersons={contactPersons} setPayload={setPayload} createNewRequest={createNewRequest} />\n            <CreateProposal show={showProposalModal} setShow={setShowProposalModal} refetch={newRequestQuery?.refetch} contactPersons={contactPersons} isExist={!!newRequestQuery?.data?.proposal_pdf} />\n\n            {\n                (newRequestMutation.isPending || newRequestQuery.isFetching || isLoading) && <div style={{ position: 'absolute', top: '50%', left: '50%', background: 'white', width: '60px', height: '60px', borderRadius: '4px', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 10 }} className=\"shadow-lg\">\n                    <Spinner animation=\"border\" role=\"status\">\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </Spinner>\n                </div>\n            }\n        </div >\n    );\n};\n\n\n\nexport default CalculateQuote;","// extracted by mini-css-extract-plugin\nexport default {\"clientImg\":\"image-avatar_clientImg__-nnRU\"};","import React, { useState } from 'react';\nimport { Building, Person } from 'react-bootstrap-icons';\nimport style from './image-avatar.module.scss';\n\nconst ImageAvatar = ({ has_photo, photo, is_business }) => {\n    const [imgError, setImgError] = useState(false);\n    const Icon = is_business ? Building : Person;\n\n    return (\n        <div className={`d-flex justify-content-center align-items-center ${style.clientImg} ${is_business ? \"\" : \"rounded-circle\"}`} style={{ overflow: 'hidden' }}>\n            {has_photo && photo && !imgError ? (\n                <img src={photo} alt=\"client avatar\" className=\"w-100\" onError={() => setImgError(true)} />\n            ) : (\n                <Icon color=\"#667085\" />\n            )}\n        </div>\n    );\n};\n\nexport const FallbackImage = ({ has_photo, photo, is_business, size }) => {\n    const [imgError, setImgError] = useState(false);\n    const Icon = is_business ? Building : Person;\n\n    return <>\n        {has_photo && photo && !imgError ? (\n            <img src={photo} alt=\"client avatar\" className=\"w-100\" onError={() => setImgError(true)} />\n        ) : (\n            <Icon color=\"#667085\" size={size} />\n        )}\n    </>;\n};\n\nexport const FallbackImageWithInitials = ({ has_photo, photo, name }) => {\n    const [imgError, setImgError] = useState(false);\n    const initials = name && name?.split(' ')?.map(n => n[0])?.join('')?.toUpperCase() || \"\";\n\n    return <>\n        {has_photo && photo && !imgError ? (\n            <img src={photo} alt=\"client avatar\" className=\"w-100\" onError={() => setImgError(true)} />\n        ) : initials}\n    </>;\n};\n\nexport const InitialsAvatar = ({ name, size = 14 }) => {\n    const initials = name.split(' ').map(n => n[0]).join('').toUpperCase();\n\n    return (\n        <span style={{ fontSize: `${size}px` }}>\n            {initials}\n        </span>\n    );\n};\n\nexport default ImageAvatar;\n"],"names":["formatAUD","amount","shorten","arguments","length","undefined","num","parseFloat","isNaN","Math","abs","Intl","NumberFormat","notation","compactDisplay","minimumFractionDigits","maximumFractionDigits","format","API_BASE_URL","process","getDepartments","async","url","URL","all","searchParams","append","fetchAPI","toString","method","getCalculationByReferenceId","id","result","Array","isArray","filter","item","deleted","getQuoteByUniqueId","unique_id","createNewCalculationQuoteRequest","options","body","data","updateNewCalculationQuoteRequest","Error","createNewMergeQuote","deleteMergeQuote","createDepartment","updateDepartment","createSubDepartment","updateSubDepartment","createCalculator","index","updateCalculator","deleteSettingCalculator","endpoint","reorderDepartments","departments","map","d","idx","order","romanize","i","lookup","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","roman","formatMoney","number","toLocaleString","style","currency","dateFormat","dateInMiliSec","isDotformate","_date$toLocaleDateStr","date","Date","toLocaleDateString","day","month","year","replace","DepartmentQuoteTableRowLoading","_jsxs","children","_jsx","width","Placeholder","as","animation","xs","bg","textAlign","DepartmentRowChangeLoading","_Fragment","_ref","_departments$filter","handleChange","title","keyValue","handleSubMenuClick","label","value","Menu","menuButton","MenuButton","display","alignItems","justifyContent","padding","cursor","background","border","color","className","ChevronDown","size","overflow","position","portal","sort","a","b","department","_department$subindexe","_department$subindexe2","_department$subindexe3","React","subindexes","SubMenu","name","direction","align","menuStyle","maxHeight","subitem","MenuItem","onClick","schema","yup","required","description","_Object$keys","_Object$keys2","_Object$entries","selectItem","setSelectItem","merges","setMerges","show","setShow","useState","romanNo","defaultValues","register","reset","handleSubmit","formState","errors","useForm","resolver","yupResolver","useEffect","handleClose","Button","type","disabled","Object","keys","handleOpen","clsx","Modal","centered","onHide","Header","closeButton","Title","height","borderRadius","fontSize","fontWeight","Body","Form","onSubmit","_Object$values","payload","alias","calculators","values","flat","key","merge_id","calculator","total","others","Group","Label","Control","placeholder","Text","message","controlId","rows","outline","boxShadow","ListGroup","variant","entries","_ref2","Item","Row","Col","sm","toFixed","Footer","deleteAndCancel","Trash","minWidth","refetch","useParams","deleteMutation","useMutation","mutationFn","onSuccess","toast","success","onError","error","console","log","accept","mutate","merge","reject","ConfirmPopup","isPending","Spinner","role","event","confirmPopup","target","currentTarget","defaultFocus","acceptClassName","_merge$calculators2","deleteMergeCalculator","_merge$calculators","left","items","ref","useRef","isOpen","setOpen","anchorProps","useClick","maxWidth","ControlledMenu","state","anchorRef","onClose","CloseButton","marginTop","whiteSpace","ViewMerge","EditMergeCalculation","reduce","sum","DeleteMerge","DepartmentCalculationTableEmptyRow","srNo","SelectComponent","isShowlabel","paddingTop","resize","boxSizing","onChange","right","opacity","DepartmentCalculationTableHead","DepartmentCalculationTableBody","updateData","deleteRow","mapMergeItemWithNo","checkedItems","handleDepartmentChange","selectKey","_ref3","Draggable","draggableId","provided","innerRef","draggableProps","includes","dragHandleProps","GripVertical","marginRight","checked","e","mergeKey","oldItems","newItems","push","updatedItems","top","Check","onInput","scrollHeight","onFocus","onBlur","InputNumber","prefix","cost","onValueChange","maxFractionDigits","minFractionDigits","inputId","inputStyle","profit_type_value","profit_type","unit_price","quantity","suffix","discount","_ref4","setTotals","setPayload","defaultDiscount","xero_tax","preExistCalculation","preMerges","setMergeDeletedItems","setRows","subItem","setSubItem","subItemLabel","setSubItemLabel","setSelectKey","preExistMerges","setPreExistMerges","setMapMergeItemWithNo","useQuery","queryKey","queryFn","staleTime","refetchOnWindowFocus","isLoading","isLoadingSubItem","enabled","retry","subitemId","calculateTotal","subtotal","margin","calculateUnitPrice","prevRows","updatedItem","calcReferenceId","idsToDelete","mergeCount","updatedMerges","updatedCalculators","calc","prev","Set","updatedRows","forEach","nanoid","filteredData","self","findIndex","t","summary","taxType","budget","departmentRows","rate","tax","operationalProfit","calculateSummary","calculations","flatMap","_ref5","parentIndex","rest","expense","subindexMap","subindex","orderGroups","acc","_ref6","reformattedData","calculatorKeyMap","_ref7","reformattedMerges","cal","findData","find","keyIndexMap","overflowX","DragDropContext","onDragEnd","source","destination","sourceKey","destinationKey","reorderedKeys","from","removedKey","splice","reorderedRows","Droppable","droppableId","droppableProps","CreateMergeCalculation","ListMergeCalculations","_data$addresses","_data$contact_persons","_clientQuery$data","_clientQuery$data2","selectClient","setSelectClient","selectContact","setSelectContact","isEdit","setIsEdit","observerRef","dropdownRef","clients","setClients","page","setPage","hasMoreData","setHasMoreData","loading","setLoading","inputValue","debouncedValue","setInputValue","useDebounce","mainAddress","addresses","address","is_main","mainContact","contact_persons","contact","clientQuery","getClientById","isBusiness","is_business","contactOptions","getListOfClients","_data$results","results","existingClientIds","client","newClients","has","count","loadData","setupObserver","lastRow","document","querySelector","current","IntersectionObserver","isIntersecting","prevPage","threshold","observe","timeout","setTimeout","clearTimeout","disconnect","minHeight","marginBottom","Dropdown","itemTemplate","option","ImageAvatar","has_photo","photo","valueTemplate","optionLabel","optionValue","filterTemplate","IconField","iconPosition","InputIcon","Search","InputText","virtualScrollerOptions","itemSize","lazy","onLazyLoad","filterInputAutoFocus","firstname","lastname","abn","phone","email","handleChangeSave","contact_person","_data$contact_persons2","CustomOption","props","components","Option","image","_clientQuery$data5","_clientQuery$data6","_clientQuery$data6$ca","_projectManagerQuery$7","_payload$recurring","_payload$recurring2","_payload$recurring3","_payload$recurring4","_payload$recurring5","_payload$recurring6","_payload$recurring7","_payload$recurring8","_payload$recurring9","setContactPersons","quoteType","paymentCollection","setPaymentCollection","selectedManagers","setSelectedManagers","editedReference","setEditedReference","isEditingReference","setIsEditingReference","editedDescription","setEditedDescription","isEditingDescription","setIsEditingDescription","maxUpfront","setMaxUpfront","handleDataChange","projectManagerQuery","getProjectManager","_clientQuery$data$con","_clientQuery$data3","_clientQuery$data4","person","managers","initialManagers","manager","some","_projectManagerQuery$","_projectManagerQuery$2","_projectManagerQuery$3","_projectManagerQuery$4","_projectManagerQuery$5","_projectManagerQuery$6","user","recurring","frequency","start_date","end_by","end_date","divider","daysBetweenStartAndEnd","ceil","occurrences","upfront_projects","initial_projects","md","borderRight","InfoCircle","handleSaveReference","reference","autoFocus","PencilSquare","handleEditReference","handleSaveDescription","handleEditDescription","QuoteToBusiness","QuoteToClient","DepartmentCalculationTable","category","note","Select1","closeMenuOnSelect","selected","Map","obj","isMulti","styles","control","multiValueRemove","backgroundColor","multiValue","content","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","purchase_order","FormControl","sx","m","Select","displayEmpty","inputProps","IconComponent","CustomRadioButton","Boolean","display_discount","prevPayload","placement","OverlayTrigger","overlay","Tooltip","Calendar","showButtonBar","locale","minDate","headerElement","modalHeader","headerTitle","header","_outgoingEmailTemplat4","_outgoingEmailTemplat5","_emailTemplateQuery$d2","_signatureQuery$data2","contactPersons","save","op","profileData","JSON","parse","window","localStorage","getItem","setFrom","to","setTo","cc","setCC","bcc","setBCC","subject","setSubject","text","setText","signature","setSignature","setErrors","filteredEmails","setFilteredEmails","autoCompleteRef","autoCompleteRef2","autoCompleteRef3","showCC","setShowCC","showBCC","setShowBCC","setIsLoading","isValidEmail","useCallback","test","trim","validateEmailArray","emailArray","every","getInvalidEmails","cleanEmailArray","validateAndCleanAllEmails","hasErrors","invalidToEmails","invalidCcEmails","invalidBccEmails","emailTemplateId","setEmailTemplatedId","emailTemplateQuery","getEmailTemplates","signatureQuery","getSignatureTemplates","outgoingEmailTemplateQuery","getOutgoingEmail","emailQuery","getEmail","_outgoingEmailTemplat","_outgoingEmailTemplat2","_outgoingEmailTemplat3","outgoing_email","outgoing_email_verified","_emailTemplateQuery$d","activeTemplateId","template","footerContent","errorCount","invalidEmails","toInvalid","ProgressSpinner","search","_event$query","_contactPersons$map","query","toLowerCase","emails","onFocus2","onFocus3","_contactPersons$map2","validEmails","email_body","from_email","_emailQuery$data","_emailQuery$data2","_signatureQuery$data","_signatureQuery$data$","email_signature","Dialog","visible","modal","footer","customLabel","dropdownSelect","paddingLeft","emailTemplate","isFetching","templateInfo","toggle","OverlayPanel","lineHeight","autoCompleteBox","bag","AutoComplete","completeMethod","multiple","suggestions","onKeyUp","currentValue","split","box","active","join","inputBox","lable","zIndex","Editor","headerTemplate","onTextChange","htmlValue","panelClassName","SendProposalEmailForm","handleOtherClose","iconStyle","Check2Circle","_proposalTemplateQuer","_sections$map","_sections$map$filter","isExist","isVisible","setIsVisible","fileName","setFileName","showSendModal","setShowSendModal","templateId","setTemplatedId","sections","setSections","setImage","isTemplateChanged","setIsTemplateChanged","proposalTemplateQuery","getProposalsTemplates","readProposalQuery","getProposalBySalesId","_readProposalQuery$da","proposalQuery","getProposalsTemplate","_sections$filter2","notdeletedSections","section","delete","newErrors","sectionErrors","sectionError","formData","FormData","action","croppedImageBlob","photoHintId","accessToken","response","fetch","headers","json","ok","handleAddSection","PlusLg","sendProposalAction","_sections$filter","_readProposalQuery$da4","_proposalQuery$data","_readProposalQuery$da2","_readProposalQuery$da3","_proposalQuery$data3","_proposalQuery$data3$","_proposalQuery$data2","croppedImageBase64","_readProposalQuery$da5","_proposalQuery$data4","_readProposalQuery$da7","_readProposalQuery$da6","_proposalQuery$data5","showClear","imageBox","alt","src","trashBox","stopPropagation","uploadBox","uploadButton","CloudUpload","uploadText","FileUploader","setPhoto","Accordion","activeIndex","originalIndex","_errors$sections","_errors$sections$inde","_errors$sections2","_errors$sections2$ind","_errors$sections3","_errors$sections3$ind","_errors$sections4","_errors$sections4$ind","AccordionTab","accordion","prevSections","newSections","SunEditorComponent","showTable","showImage","showLink","showCodeView","enableS3Upload","uploadId","handleDeleteSection","SendProposal","createNewRequest","SendEmailForm","CalculateQuote","_newRequestQuery$data3","_newRequestQuery$data4","_newRequestQuery$data5","_newRequestQuery$data6","_newRequestQuery$data7","_newRequestQuery$data8","_newRequestMutation$v","_updateRequestMutatio","_newRequestMutation$v2","_updateRequestMutatio2","_newRequestMutation$v3","_updateRequestMutatio3","_newRequestQuery$data9","navigate","useNavigate","trialHeight","useTrialHeight","showQuoteModal","setShowQuoteModal","showProposalModal","setShowProposalModal","setQuoteType","mergeDeletedItems","totals","newRequestQuery","cacheTime","_newRequestQuery$data","_newRequestQuery$data2","newData","sydneyFormatter","DateTimeFormat","timeZone","hour","minute","second","hour12","startTimestamp","endTimestamp","storedSessionData","sessionStorage","desktop_user_id","requirements","newRequestMutation","updateRequestMutation","_error$data","_error$data$client","status","_error$data2","_error$data2$client","msg","formatDateToYMD","getFullYear","String","getMonth","padStart","getDate","_payload$managers","_result","mutateAsync","uniqueid","_result$calculations","calculatorMap","updateMerges","_result2","_result$calculations2","_result3","quote_url","open","_result4","NavLink","ChevronLeft","PlusSlashMinus","DepartmentQuote","borderTop","gap","href","proposal_pdf","Link","rel","FiletypePdf","variables","SendQuote","CreateProposal","FallbackImage","imgError","setImgError","Icon","Building","Person","FallbackImageWithInitials","_name$split","_name$split$map","_name$split$map$join","initials","n","toUpperCase","InitialsAvatar"],"sourceRoot":""}