"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[2828],{1690:(e,s,l)=>{l.d(s,{A:()=>i});l(65043);const i=l.p+"static/media/Featured icon.f0452deecdd8a0600a95469561a90cfe.svg"},13507:(e,s,l)=>{l.d(s,{A:()=>o});var i=l(65043),t=l(11740),a=l(70579);const o=e=>{let{attachments:s=[],label:l}=e;const o=(0,i.useRef)(null),[n,r]=(0,i.useState)(0),d=(0,i.useMemo)((()=>s.filter((e=>{return s=e.extension,["png","jpg","jpeg","webp"].includes(null===s||void 0===s?void 0:s.toLowerCase());var s})).map((e=>({itemImageSrc:e.link,thumbnailImageSrc:e.link,alt:e.name,title:e.name})))),[s]);if(!d.length)return null;return(0,a.jsxs)("div",{className:"mb-2",children:[l&&(0,a.jsx)("label",{style:{color:"#98a2b3",fontSize:"14px",fontWeight:400,marginBottom:"2px"},children:l}),(0,a.jsxs)("div",{className:"w-100",children:[(0,a.jsx)(t.a,{ref:o,value:d,activeIndex:n,onItemChange:e=>r(e.index),circular:!0,fullScreen:!0,showItemNavigators:!0,showThumbnails:!1,item:e=>(0,a.jsx)("img",{src:e.itemImageSrc,alt:e.alt,style:{width:"100%",display:"block"}}),style:{maxWidth:"850px"}}),(0,a.jsx)("div",{className:"d-flex gap-2 flex-wrap",children:d.map(((e,s)=>(0,a.jsx)("img",{src:e.thumbnailImageSrc,alt:e.alt,style:{width:80,height:80,objectFit:"cover",cursor:"pointer",borderRadius:6},onClick:()=>{r(s),o.current.show()}},s)))})]})]})}},34558:(e,s,l)=>{l.d(s,{A:()=>g});var i=l(65043),t=l(69956),a=l(56741),o=l(75329),n=l(94819),r=l(89488),d=l(35475),c=l(47097),m=l(86213),h=l(72018),x=l(55797),u=l(93740),p=l(56328),j=l(93137),v=l(38391),b=l(33296),_=l(11281),f=l(70579);const g=e=>{let{jobId:s,show:l,setShow:g,attachments:A=[],onRefetch:y}=e;const[N,C]=(0,i.useState)([]),w=localStorage.getItem("access_token"),F=(0,i.useMemo)((()=>{const e=new Map;return A.forEach((s=>{null!==s&&void 0!==s&&s.link&&e.set(s.link,s)})),Array.from(e.values())}),[A]),S=(0,i.useCallback)((async(e,s,l)=>{try{return await m.A.put(s,e,{headers:{"Content-Type":""},onUploadProgress:e=>{const i=Math.round(e.loaded/e.total*100);C((e=>e.map((e=>e.id===l?{...e,progress:i,url:s.split("?")[0]}:e))))}}),C((e=>e.map((e=>e.id===l?{...e,progress:100,uploaded:!0}:e)))),{success:!0}}catch(i){let e="Upload failed";return e=i.response?403===i.response.status?"Permission denied":`Server error: ${i.response.status}`:i.request?"No response from server":i.message,C((s=>s.map((s=>s.id===l?{...s,progress:0,error:!0,errorMessage:e}:s)))),{success:!1,error:e}}}),[]),E=(0,i.useCallback)((async(e,l)=>{try{const i={name:e.name,link:l,size:e.size};return await m.A.post(`https://app.memate.com.au/api/v1/jobs/attachments/${s}/`,{attachments:[i]},{headers:{Authorization:`Bearer ${w}`}}),i}catch(i){throw console.error("Error updating attachments in DB:",i),i}}),[s,w]),k=(0,i.useCallback)((async e=>{try{const l=await m.A.post(`https://app.memate.com.au/api/v1/jobs/attachments/url/${s}/`,{filename:e.name},{headers:{Authorization:`Bearer ${w}`}}),{url:i}=l.data;if(!i)throw new Error("No URL received from server");if((await S(e.file,i,e.id)).success){const s=i.split("?")[0],l=await E(e,s);return p.oR.success(`Successfully uploaded ${e.name}`),setTimeout((()=>{C((s=>s.filter((s=>s.id!==e.id))))}),1e3),y&&y(),l}return null}catch(l){return console.error("Error uploading file:",e.name,l),p.oR.error(`Failed to upload ${e.name}`),C((s=>s.map((s=>s.id===e.id?{...s,error:!0,errorMessage:l.message}:s)))),null}}),[s,w,S,E,y]),R=(0,i.useCallback)((async e=>{if(!s)return void p.oR.error("Job ID not found");const l=e.map(((e,s)=>({id:Date.now()+s,file:e,name:e.name,size:e.size,progress:0,uploaded:!1,error:!1,errorMessage:""})));C((e=>[...e,...l]));for(const s of l)await k(s)}),[s,k]),I=(0,c.n)({mutationFn:e=>(0,v.CE)(s,e),onSuccess:()=>{p.oR.success("File deleted successfully"),y&&y()},onError:()=>{p.oR.error("Failed to delete file")}}),D=()=>{g(!1),C([])},{getRootProps:B,getInputProps:H,isDragActive:T}=(0,r.VB)({onDrop:R,multiple:!0}),$=(0,f.jsxs)("div",{className:`${j.A.modalHeader}`,children:[(0,f.jsx)("span",{className:`white-space-nowrap ${j.A.headerTitle}`,children:"Documents"}),(0,f.jsxs)("span",{className:"font-14",style:{color:"#667085"},children:[F.length," file",1!==F.length?"s":""]})]}),L=(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)(h.$,{className:"outline-button",onClick:D,style:{borderRadius:"30px"},children:"Close"})});return(0,f.jsxs)(x.l,{visible:l,modal:!1,header:$,footer:L,className:`${j.A.modal} custom-modal`,onHide:D,children:[(0,f.jsxs)("div",{...B(),className:`${j.A.dropzone} ${T?j.A.dropzoneActive:""}`,style:{border:"2px dashed "+(T?"#158ECC":"#D0D5DD"),borderRadius:"8px",padding:"24px",textAlign:"center",cursor:"pointer",marginBottom:"16px",background:T?"#F0F9FF":"#FAFAFA",transition:"all 0.2s ease"},children:[(0,f.jsx)("input",{...H()}),(0,f.jsxs)("div",{className:"d-flex flex-column align-items-center gap-2",children:[(0,f.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#EBF8FF",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(t.A,{size:20,color:"#158ECC"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{style:{color:"#158ECC",fontWeight:600},children:"Click to upload"}),(0,f.jsx)("span",{style:{color:"#667085"},children:" or drag and drop"})]}),(0,f.jsx)("span",{style:{color:"#98A2B3",fontSize:"12px"},children:"PDF, DOC, XLS, JPG, PNG (max. 10MB)"})]})]}),N.length>0&&(0,f.jsxs)("div",{className:"mb-3",children:[(0,f.jsx)("span",{className:"font-14",style:{color:"#344054",fontWeight:500,marginBottom:"8px",display:"block"},children:"Uploading..."}),(0,f.jsx)("div",{className:"d-flex flex-column gap-2",children:N.map((e=>(0,f.jsxs)("div",{className:j.A.attachmentBox,style:{width:"100%",position:"relative"},children:[(0,f.jsxs)("div",{className:"d-flex align-items-center gap-2",style:{flex:1,minWidth:0},children:[e.error?(0,f.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#FEF3F2",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(a.A,{size:16,color:"#B42318"})}):e.uploaded?(0,_.I)(e.name.split(".").pop()):(0,f.jsx)(b.A,{progress:e.progress,size:32}),(0,f.jsxs)("div",{className:"d-flex flex-column",style:{minWidth:0},children:[(0,f.jsx)("span",{className:"text-dark ellipsis-width",style:{fontSize:"14px"},children:e.name}),e.error&&(0,f.jsx)("span",{style:{color:"#B42318",fontSize:"12px"},children:e.errorMessage||"Upload failed"}),!e.error&&!e.uploaded&&(0,f.jsxs)("span",{style:{color:"#667085",fontSize:"12px"},children:[e.progress,"% uploaded"]})]})]}),e.error&&(0,f.jsx)("button",{className:"border-0 p-1 bg-none",onClick:()=>{return s=e.id,void C((e=>e.filter((e=>e.id!==s))));var s},title:"Remove",children:(0,f.jsx)(a.A,{size:16,color:"#667085"})})]},e.id)))})]}),(0,f.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[F.map((e=>{var s;return(0,f.jsxs)("div",{className:j.A.attachmentBox,style:{position:"relative"},children:[(0,f.jsxs)("div",{className:"d-flex align-items-center gap-2",style:{flex:1,minWidth:0},children:[(0,_.I)((null===e||void 0===e?void 0:e.extension)||(null===e||void 0===e||null===(s=e.link)||void 0===s?void 0:s.split(".").pop())),(0,f.jsx)(d.N_,{to:null===e||void 0===e?void 0:e.link,target:"_blank",style:{minWidth:0},children:(0,f.jsx)("span",{className:"text-dark ellipsis-width",style:{display:"block",maxWidth:"150px"},children:null===e||void 0===e?void 0:e.name})})]}),(0,f.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[(0,f.jsx)("button",{className:"border-0 p-1 bg-none",onClick:()=>window.open(null===e||void 0===e?void 0:e.link,"_blank"),title:"Download",style:{borderRadius:"4px",transition:"background 0.2s ease"},children:(0,f.jsx)(o.A,{size:16,color:"#667085"})}),(0,f.jsx)("button",{className:"border-0 p-1 bg-none",onClick:()=>(e=>{null!==e&&void 0!==e&&e.id?I.mutate(e.id):p.oR.error("Cannot delete: attachment ID not found")})(e),disabled:I.isPending&&I.variables===e.id,title:"Delete",style:{borderRadius:"4px",transition:"background 0.2s ease",opacity:I.isPending&&I.variables===e.id?.5:1},children:I.isPending&&I.variables===e.id?(0,f.jsx)(u.p,{style:{width:"14px",height:"14px"},strokeWidth:"4"}):(0,f.jsx)(n.A,{size:14,color:"#B42318"})})]})]},null===e||void 0===e?void 0:e.link)})),0===F.length&&0===N.length&&(0,f.jsx)("div",{className:"w-100 text-center py-4",children:(0,f.jsx)("span",{style:{color:"#98A2B3",fontSize:"14px"},children:"No documents uploaded yet"})})]})]})}},36766:(e,s,l)=>{l.d(s,{A:()=>i});const i={active:"jobs_active__ZiLB1",selectedCount:"jobs_selectedCount__ylTL-",filterBox:"jobs_filterBox__Fm1C9",newButton:"jobs_newButton__CoaUb",total:"jobs_total__tYu52",totalCount:"jobs_totalCount__c5FC+",shadowRight:"jobs_shadowRight__smZo7",payment:"jobs_payment__i+7WA",paymentHours:"jobs_paymentHours__e2Axb",paymentFix:"jobs_paymentFix__1tRgO",paymentTracker:"jobs_paymentTracker__sK5GM",time:"jobs_time__v7zI9",tracker:"jobs_tracker__aGhTF",clientImg:"jobs_clientImg__9499y",square:"jobs_square__5EeYW",clientName:"jobs_clientName__5iKeN",defaultStatus:"jobs_defaultStatus__XVACp",status:"jobs_status__EX7Lm",DRAFT:"jobs_DRAFT__+2Rds",OPEN:"jobs_OPEN__TRxzq",ASSIGNED:"jobs_ASSIGNED__vzQof",CONFIRMED:"jobs_CONFIRMED__VW8Jd",DECLINED:"jobs_DECLINED__XEbSy",SUBMITTED:"jobs_SUBMITTED__YBG-G",FINISHED:"jobs_FINISHED__AuxJC",IN_PROGRESS:"jobs_IN_PROGRESS__7pb65",type:"jobs_type__DW5S-",shift:"jobs_shift__6lLPh",fix:"jobs_fix__Jz8DC",hours:"jobs_hours__w07yY",timeFrame:"jobs_timeFrame__w+GZ5",timeTracker:"jobs_timeTracker__JTEx0",timeFrame2:"jobs_timeFrame2__mCys0",linkToProjectCard:"jobs_linkToProjectCard__9PXHf"}},46229:(e,s,l)=>{l.d(s,{A:()=>G,Y:()=>J});var i=l(65043),t=l(27498),a=l(46679),o=l(50565),n=l(73898),r=l(88578),d=l(94819),c=l(35475),m=l(90688),h=l(88120),x=l(47097),u=l(72018),p=l(75218),j=l(9642),v=l(64824),b=l(93740),_=l(56328),f=l(36766),g=l(38391),A=l(48417),y=l(14834),N=l(58027),C=l(27734),w=l(99868),F=l(77918),S=l(55797);const E="job-dialog_modal__6ffnW",k="job-dialog_modalHeader__j1WfV",R="job-dialog_headerTitle__sUBzz",I="job-dialog_weekNames__7amIz",D="job-dialog_weekName__H3JqX",B="job-dialog_iconJobstyle__ze7N8";var H=l(1690),T=l(70579);function $(e){let{visible:s,setVisible:l}=e;const i=(0,T.jsxs)("div",{className:`${k}`,children:[(0,T.jsx)("img",{src:H.A,alt:"task-details",style:{width:"48px",height:"48px"}}),(0,T.jsx)("span",{className:`white-space-nowrap ${R}`,children:"Are you sure you want to stop cycle?"})]}),t=(0,T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,T.jsx)(u.$,{label:"Stop Cycle",className:"danger-button",onClick:()=>l(!1),autoFocus:!0}),(0,T.jsx)(u.$,{label:"Cancel",className:"outline-button",onClick:()=>l(!1),autoFocus:!0})]});return(0,T.jsx)(S.l,{visible:s,modal:!0,header:i,footer:t,className:`${E} custom-modal`,onHide:()=>{s&&l(!1)},children:(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,T.jsx)("h6",{style:{fontSize:"18px",color:"#101828",fontWeight:600,marginBottom:"16px"},children:"Job Details"}),(0,T.jsx)("p",{className:"font-14 mb-0",style:{color:"#475467"},children:"Job ID: 031-240003"})]}),(0,T.jsx)("p",{className:"font-14 mb-1",style:{color:"#667085"},children:"Job Reference"}),(0,T.jsx)("h6",{style:{fontSize:"16px",color:"#475467",fontWeight:600,marginBottom:"16px"},children:"Enter the detailed quote for the client contract here. Include all relevant "})]})})}function L(e){let{visible:s,setVisible:l}=e;const[t,a]=(0,i.useState)(!1),o=(0,T.jsxs)("div",{className:`${k}`,children:[(0,T.jsx)("b",{className:B,children:(0,T.jsx)(F.A,{size:24,color:"#106B99"})}),(0,T.jsx)("span",{className:`white-space-nowrap ${R}`,children:"Job Details"})]}),n=(0,T.jsx)("div",{children:(0,T.jsx)(u.$,{label:"Stop Cycle",className:"danger-button",onClick:()=>a(!0),autoFocus:!0})});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(S.l,{visible:s,modal:!1,header:o,footer:n,className:`${E} custom-modal`,onHide:()=>{s&&l(!1)},children:(0,T.jsxs)("div",{className:"",children:[(0,T.jsx)("p",{className:"font-14 mb-1",style:{color:"#667085"},children:"Repeat"}),(0,T.jsx)("h6",{className:"font-16",style:{color:"#101828",fontWeight:600,marginBottom:"16px"},children:"Every Week"}),(0,T.jsx)("p",{className:"font-14 mb-1",style:{color:"#667085"},children:"Repeat on"}),(0,T.jsxs)("div",{className:`d-flex ${I}`,children:[(0,T.jsx)(p.v,{className:`status ${D}`,label:"Monday"}),(0,T.jsx)(p.v,{className:`status ${D}`,label:"Wednesday"}),(0,T.jsx)(p.v,{className:`status ${D}`,label:"Thursday"})]}),(0,T.jsxs)("div",{className:"d-flex",children:[(0,T.jsxs)("div",{style:{width:"280px"},children:[(0,T.jsx)("p",{className:"font-14 mb-1",style:{color:"#667085"},children:"Starts"}),(0,T.jsx)("p",{className:"font-16 mb-0",style:{color:"#101828",fontWeight:600},children:"12 Jul 2025"})]}),(0,T.jsxs)("div",{style:{width:"280px"},children:[(0,T.jsx)("p",{className:"font-14 mb-1",style:{color:"#667085"},children:"Ends"}),(0,T.jsx)("p",{className:"font-16 mb-0",style:{color:"#101828",fontWeight:600},children:"12 Jul 2025"})]})]})]})}),(0,T.jsx)($,{visible:t,setVisible:a})]})}var V=l(47663);const M="show-job-declined_modal__4txtg",z="show-job-declined_modalHeader__1+kdQ",P="show-job-declined_headerTitle__FKgix",W="show-job-declined_iconStyle__A0wYR",O=e=>{let{showDeclined:s,setShowDeclined:l,message:i}=e;const t=(0,T.jsxs)("div",{className:`${z}`,children:[(0,T.jsx)("div",{className:W,children:(0,T.jsx)(V.A,{color:"#F04438",size:16})}),(0,T.jsx)("span",{className:`white-space-nowrap ${P}`,children:"Job Declined"})]});return(0,T.jsx)(S.l,{visible:s,modal:!1,header:t,contentClassName:"border-0 bg-transparent",className:`${M} custom-modal`,onHide:()=>{l(!1)},children:(0,T.jsxs)("div",{className:"",children:[(0,T.jsx)("p",{className:"font-14 mb-1",style:{color:"#667085"},children:"Note:"}),(0,T.jsx)("h6",{style:{fontSize:"16px",color:"#475467",fontWeight:600,marginBottom:"16px"},children:i})]})})};var Z=l(56008);const J=e=>{try{const s=new Date(1e3*e),l=s.getDate(),i=new Intl.DateTimeFormat("en-US",{month:"short"}).format(s);return`${l} ${i} ${s.getFullYear()}`}catch(s){return console.error("Error formatting date:",s),""}},G=(0,i.forwardRef)(((e,s)=>{let{searchValue:l,setTotal:F,selected:S,setSelected:E,refetch:k,setRefetch:R,createJobVisible:I,isCreateJobVisible:D,isFilterEnabled:B,filters:H}=e;const{trialHeight:$}=(0,A.$)(),V=(0,i.useRef)(null),[M,z]=(0,i.useState)(!1),[P,W]=(0,i.useState)(!1),[G,U]=(0,i.useState)(""),[q,X]=(0,i.useState)({visible:!1,jobId:null}),[K,Y]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)({}),[se,le]=(0,i.useState)([]),[ie,te]=(0,i.useState)(1),[ae,oe]=(0,i.useState)({sortField:"id",sortOrder:-1}),[ne,re]=(0,i.useState)({sortField:"id",sortOrder:-1}),[de,ce]=(0,i.useState)(!0),[me,he]=(0,i.useState)(!1),xe=i.useMemo((()=>window.location.href),[]),ue=i.useMemo((()=>new URL(xe)),[xe]),pe=i.useMemo((()=>new URLSearchParams(ue.search)),[ue]);(0,i.useEffect)((()=>{te(1)}),[l,k,H]),(0,i.useEffect)((()=>{pe.get("jobId")&&(X({visible:!0,jobId:pe.get("jobId")}),ue.searchParams.delete("jobId"),window.history.replaceState({},"",ue))}),[pe]),(0,i.useEffect)((()=>{(async()=>{he(!0);let e="";1===(null===ne||void 0===ne?void 0:ne.sortOrder)?e=`${ne.sortField}`:-1===(null===ne||void 0===ne?void 0:ne.sortOrder)&&(e=`-${ne.sortField}`);const s=await(0,g.Gj)(ie,25,l,e,H);var i;(F((()=>(null===s||void 0===s?void 0:s.count)||0)),1===ie)?le(s.results):(null===s||void 0===s||null===(i=s.results)||void 0===i?void 0:i.length)>0&&le((e=>{const l=new Set(e.map((e=>e.id))),i=s.results.filter((e=>!l.has(e.id)));return[...e,...i]}));oe(ne),ce(s.count!==se.length),he(!1)})()}),[ie,l,ne,k,H]),(0,i.useEffect)((()=>{if(se.length>0&&de){V.current=new IntersectionObserver((e=>{e[0].isIntersecting&&te((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&V.current.observe(e)}return()=>{V.current&&V.current.disconnect()}}),[se,de]),(0,i.useEffect)((()=>{D&&(Y(!1),X({jobId:null,visible:!1}))}),[D]);const je=(0,x.n)({mutationFn:e=>(0,g.XX)(e),onSuccess:()=>{_.oR.success("Job deleted successfully"),je.reset(),R(!k)},onError:e=>{je.reset(),console.log("error: ",e),_.oR.error("Failed to delete job. Please try again.")}}),ve=(0,x.n)({mutationFn:e=>(0,g.r3)(e),onSuccess:()=>{_.oR.success("Job has been successfully duplicated"),ve.reset(),R(!k)},onError:e=>{ve.reset(),console.log("error: ",e),_.oR.error("Failed to duplicate job. Please try again.")}});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(v.b,{ref:s,value:se,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${$}px - ${B?56:0}px)`,className:"border",selection:S,onSelectionChange:e=>E(e.value),loading:me,loadingIcon:C.A,emptyMessage:(0,T.jsx)(w.A,{isDataExist:!!l}),sortField:null===ae||void 0===ae?void 0:ae.sortField,sortOrder:null===ae||void 0===ae?void 0:ae.sortOrder,onSort:e=>{const{sortField:s,sortOrder:l}=e;re({sortField:s,sortOrder:l}),te(1)},rowClassName:e=>{const s=[];return null!==e&&void 0!==e&&e.deleted&&s.push(f.A.deletedRow),null!==e&&void 0!==e&&e.id&&s.push(`row-id-${e.id}`),s.join(" ")},children:[(0,T.jsx)(j.V,{selectionMode:"multiple",headerClassName:"ps-4 border-end-0",bodyClassName:"show-on-hover border-end-0 ps-4",headerStyle:{width:"3rem",textAlign:"center"},frozen:!0}),(0,T.jsx)(j.V,{field:"number",header:"Job ID",body:e=>(0,T.jsxs)("div",{className:"d-flex gap-2 align-items-center justify-content-center show-on-hover",children:[(0,T.jsxs)("div",{className:"d-flex flex-column",style:{lineHeight:"1.385"},children:[(0,T.jsx)("span",{children:e.number}),(0,T.jsx)("span",{className:"font-12",style:{color:"#98A2B3"},children:J(e.created)})]}),(null===e||void 0===e?void 0:e.is_recurring)&&(0,T.jsx)(t.A,{color:"#158ECC"}),(0,T.jsx)(u.$,{label:"Open",onClick:()=>{I(!1),Y(!1),X({jobId:e.id,visible:!0})},className:"primary-text-button ms-3 show-on-hover-element",text:!0})]}),style:{minWidth:"100px"},className:"ps-0",headerClassName:"ps-0",frozen:!0,sortable:!0}),(0,T.jsx)(j.V,{field:"type",header:"Job Type",body:e=>"Fix"===e.type_display&&"Shift"===e.time_type_display?(0,T.jsxs)("div",{className:f.A.type,children:[(0,T.jsx)("div",{className:f.A.shift,children:"Shift"}),(0,T.jsx)("div",{className:f.A.fix,children:"Fix"})]}):"Fix"===e.type_display&&"Time frame"===e.time_type_display?(0,T.jsxs)("div",{className:f.A.type,children:[(0,T.jsx)("div",{className:f.A.timeFrame,children:"Time Frame"}),(0,T.jsx)("div",{className:f.A.fix,children:"Fix"})]}):"Hours"===e.type_display&&"Shift"===e.time_type_display?(0,T.jsxs)("div",{className:f.A.type,children:[(0,T.jsx)("div",{className:f.A.shift,children:"Shift"}),(0,T.jsx)("div",{className:f.A.hours,children:"Hours"})]}):"Hours"===e.type_display&&"Time frame"===e.time_type_display?(0,T.jsxs)("div",{className:f.A.type,children:[(0,T.jsx)("div",{className:f.A.timeFrame,children:"Time Frame"}),(0,T.jsx)("div",{className:f.A.hours,children:"Hours"})]}):"Time Tracker"===e.type_display&&"Time frame"===e.time_type_display?(0,T.jsxs)("div",{className:f.A.type,children:[(0,T.jsx)("div",{className:f.A.timeTracker,children:"Time Tracker"}),(0,T.jsx)("div",{className:f.A.timeFrame2,children:"Time Frame"})]}):"",style:{minWidth:"100px"},bodyClassName:`${f.A.shadowRight}`,headerClassName:`${f.A.shadowRight}`,frozen:!0,sortable:!0}),(0,T.jsx)(j.V,{field:"start_date",header:"Start",body:e=>(0,T.jsx)("span",{style:{color:"#667085"},children:J(e.start_date)}),style:{minWidth:"122px"},sortable:!0}),(0,T.jsx)(j.V,{field:"end_date",header:"Finish",body:e=>(0,T.jsx)("span",{style:{color:"#667085"},children:J(e.end_date)}),style:{minWidth:"122px"},sortable:!0}),(0,T.jsx)(j.V,{field:"worker.firstname",header:"Name A\u2192Z",body:e=>{var s,l,i,t;if("1"===e.status)return(0,T.jsxs)("div",{className:"d-flex align-items-center",children:[(0,T.jsx)("div",{className:`d-flex justify-content-center align-items-center ${f.A.clientName}`,children:(0,T.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 20 20",fill:"none",children:[(0,T.jsx)("path",{d:"M7.14307 6.57171C6.82748 6.57171 6.57164 6.82754 6.57164 7.14314C6.57164 7.45873 6.82748 7.71457 7.14307 7.71457H12.8574C13.1729 7.71457 13.4288 7.45873 13.4288 7.14314C13.4288 6.82754 13.1729 6.57171 12.8574 6.57171H7.14307Z",fill:"#475467"}),(0,T.jsx)("path",{d:"M7.14307 8.85742C6.82748 8.85742 6.57164 9.11326 6.57164 9.42885C6.57164 9.74444 6.82748 10.0003 7.14307 10.0003H10.5716C10.8872 10.0003 11.1431 9.74444 11.1431 9.42885C11.1431 9.11326 10.8872 8.85742 10.5716 8.85742H7.14307Z",fill:"#475467"}),(0,T.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 3.14314C11.2626 3.14314 12.2859 2.11979 12.2859 0.857422H15.1431C16.0898 0.857422 16.8574 1.62493 16.8574 2.57171V17.4289C16.8574 18.3756 16.0898 19.1431 15.1431 19.1431H4.85735C3.91058 19.1431 3.14307 18.3756 3.14307 17.4289V2.57171C3.14307 1.62493 3.91058 0.857422 4.85735 0.857422H7.7145C7.7145 2.11979 8.73784 3.14314 10.0002 3.14314ZM10.0002 4.28599C11.493 4.28599 12.763 3.33193 13.2337 2.00028H15.1431C15.4587 2.00028 15.7145 2.25612 15.7145 2.57171V17.4289C15.7145 17.7444 15.4587 18.0003 15.1431 18.0003H4.85735C4.54176 18.0003 4.28592 17.7444 4.28592 17.4289V2.57171C4.28592 2.25612 4.54176 2.00028 4.85735 2.00028H6.76673C7.2374 3.33193 8.50739 4.28599 10.0002 4.28599Z",fill:"#475467"})]})}),"Open Jobs"]});const a=`${null===e||void 0===e||null===(s=e.worker)||void 0===s?void 0:s.first_name} ${null===e||void 0===e||null===(l=e.worker)||void 0===l?void 0:l.last_name}`;return(0,T.jsxs)("div",{className:"d-flex align-items-center",children:[(0,T.jsx)("div",{className:`d-flex justify-content-center align-items-center ${f.A.clientName}`,children:(0,T.jsx)(N.A,{photo:null===e||void 0===e||null===(i=e.worker)||void 0===i?void 0:i.photo,is_business:!1,has_photo:!(null===e||void 0===e||null===(t=e.worker)||void 0===t||!t.photo)||!1})}),a]})},style:{minWidth:"205px"}}),(0,T.jsx)(j.V,{field:"reference",header:"Job Reference",style:{minWidth:"270px"}}),(0,T.jsx)(j.V,{field:"status",header:"Status",body:e=>{const s=e.status;if(!e.published)return(0,T.jsx)(p.v,{className:`status ${f.A.DRAFT} font-14`,label:"Draft"});if("a"===s&&e.action_status)return(0,T.jsx)(p.v,{className:`status ${f.A.IN_PROGRESS} font-14`,label:"In Progress"});switch(s){case"1":return(0,T.jsx)(p.v,{className:`status ${f.A.OPEN} font-14`,label:"Open"});case"2":return(0,T.jsx)(p.v,{className:`status ${f.A.ASSIGNED} font-14`,label:"Assigned"});case"3":return(0,T.jsx)(p.v,{className:`status ${f.A.SUBMITTED} font-14`,label:"Submitted"});case"4":return(0,T.jsx)(p.v,{className:`status ${f.A.FINISHED} font-14`,label:"Finished"});case"6":return(0,T.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,T.jsx)(p.v,{className:`status ${f.A.DECLINED} font-14`,label:"Declined"}),(0,T.jsx)(a.A,{color:"#158ECC",className:"cursor-pointer",onClick:()=>{W(!0),U(e.decline_message)}})]});case"a":return(0,T.jsx)(p.v,{className:`status ${f.A.CONFIRMED} font-14`,label:"Confirmed"});default:return(0,T.jsx)(p.v,{className:`status ${f.A.defaultStatus} font-14`,label:s})}},style:{minWidth:"120px"}}),(0,T.jsx)(j.V,{field:"project.number",header:"Linked To Project",body:e=>{var s,l,i,t,a,o,n,r,d,m;return null!==e&&void 0!==e&&e.project?(0,T.jsxs)("div",{className:"d-flex align-items-center",children:[(0,T.jsx)("div",{className:`d-flex justify-content-center align-items-center ${f.A.clientImg} ${null!==e&&void 0!==e&&null!==(s=e.client)&&void 0!==s&&s.is_business?f.A.square:"rounded-circle"}`,children:(0,T.jsx)(N.A,{photo:null===e||void 0===e||null===(l=e.client)||void 0===l?void 0:l.photo,is_business:(null===e||void 0===e||null===(i=e.client)||void 0===i?void 0:i.is_business)||!1,has_photo:(null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.has_photo)||!1})}),(0,T.jsxs)("div",{className:"d-flex flex-column",style:{lineHeight:"1.385"},children:[(0,T.jsx)("span",{children:null===e||void 0===e||null===(a=e.project)||void 0===a?void 0:a.reference}),(0,T.jsxs)("span",{className:"font-12",style:{color:"#98A2B3"},children:[(0,T.jsx)(c.N_,{className:`${f.A.linkToProjectCard}`,to:`/management?unique_id=${null===e||void 0===e||null===(o=e.project)||void 0===o?void 0:o.unique_id}&reference=${null===e||void 0===e||null===(n=e.project)||void 0===n?void 0:n.reference}&number=${null===e||void 0===e||null===(r=e.project)||void 0===r?void 0:r.number}`,children:null===e||void 0===e||null===(d=e.project)||void 0===d?void 0:d.number})," | ",null===e||void 0===e||null===(m=e.client)||void 0===m?void 0:m.name]})]})]}):"-"},style:{minWidth:"105px"}}),(0,T.jsx)(j.V,{field:"time_assigned",header:"Time Assigned",body:e=>(0,T.jsxs)("span",{style:{color:"#667085"},children:[parseFloat(e.time_assigned).toFixed(2),"h"]}),style:{minWidth:"117px"}}),(0,T.jsx)(j.V,{field:"real_time",header:"Real Time",body:e=>{var s;const[l,i,t]=null===e||void 0===e||null===(s=e.real_time)||void 0===s?void 0:s.split(":").map(Number);return(0,T.jsxs)("span",{style:{color:"#667085"},children:[parseFloat(l+i/60+t/3600).toFixed(2),"h"]})},bodyClassName:"text-end",headerClassName:"text-center",style:{minWidth:"88px"}}),(0,T.jsx)(j.V,{field:"variations",header:"Variation",body:e=>(0,T.jsx)("span",{style:{color:"#667085"},children:parseFloat(e.variations||0)<0?`-$${e.variations||0}`:`$${e.variations}`}),style:{minWidth:"88px"},sortable:!0}),(0,T.jsx)(j.V,{field:"total",header:"Total",body:e=>(0,T.jsxs)("span",{style:{color:"#667085"},children:["$",(0,y.m)(e.total||0)]}),style:{minWidth:"105px"},sortable:!0}),(0,T.jsx)(j.V,{field:"actions",header:"Actions",body:e=>{const s=(0,i.useRef)(null),[l,t]=(0,i.useState)(!1),a=(0,m.k)(l,t);return(0,T.jsx)(i.Fragment,{children:(0,T.jsxs)("div",{style:{position:"relative"},children:[(0,T.jsx)(o.A,{size:24,color:"#667085",className:"cursor-pointer",ref:s,...a}),(0,T.jsx)(h.k,{state:l?"open":"closed",anchorRef:s,onClose:()=>t(!1),menuClassName:"action-menu-portal",menuStyle:{padding:"4px",width:"200px",textAlign:"left"},portal:{target:document.body},align:"end",position:"anchor",direction:"bottom",overflow:"auto",children:(0,T.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,T.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-3 hover-greay px-2 py-2",onClick:()=>{I(!1),Y(!0),X({jobId:e.id,visible:!0}),t(!1)},children:[(0,T.jsx)(n.A,{color:"#667085",size:20}),(0,T.jsx)("span",{style:{color:"#101828",fontSize:"16px",fontWeight:500},children:"Edit job"})]}),(0,T.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-3 hover-greay px-2 py-2",onClick:async()=>{await ve.mutateAsync(e.id),t(!1)},children:[(0,T.jsx)(r.A,{color:"#667085",size:20}),(0,T.jsx)("span",{style:{color:"#101828",fontSize:"16px",fontWeight:500},children:"Duplicate job"}),(null===ve||void 0===ve?void 0:ve.variables)===e.id?(0,T.jsx)(b.p,{style:{width:"20px",height:"20px"}}):""]}),(0,T.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-3 hover-greay px-2 py-2",onClick:async()=>{await je.mutateAsync(e.id),t(!1)},children:[(0,T.jsx)(d.A,{color:"#B42318",size:20}),(0,T.jsx)("span",{style:{color:"#B42318",fontSize:"16px",fontWeight:500},children:"Delete job"}),(null===je||void 0===je?void 0:je.variables)===e.id?(0,T.jsx)(b.p,{style:{width:"20px",height:"20px"}}):""]})]})})]})})},style:{minWidth:"75px",maxWidth:"75px",width:"75px",textAlign:"center"},bodyStyle:{color:"#667085"}})]}),(0,T.jsx)(L,{visible:M,setVisible:z,jobDetails:Q}),(0,T.jsx)(O,{showDeclined:P,setShowDeclined:W,message:G}),(0,T.jsx)(Z.A,{visible:null===q||void 0===q?void 0:q.visible,jobId:null===q||void 0===q?void 0:q.jobId,setVisible:e=>X((s=>({...s,visible:e}))),setRefetch:R,editMode:K,setEditMode:Y})]})}))},56008:(e,s,l)=>{l.d(s,{A:()=>k});var i=l(65043),t=l(14282),a=l(13846),o=l(65975),n=l(61072),r=l(78602),d=l(56741),c=l(9634),m=l(93257),h=l(73216),x=l(28261),u=l(47097),p=l(58387),j=l(75218),v=l(93740),b=l(20288),_=l(56328),f=l(34558),g=l(93137),A=l(38391),y=l(57189),N=l(42767),C=l(51012),w=l(13507),F=l(46229),S=l(11281),E=l(70579);const k=e=>{var s,l,k,R;let{visible:I,setVisible:D,jobId:B,setRefetch:H,editMode:T,setEditMode:$}=e;const[L,V]=(0,i.useState)(!1),[M,z]=(0,i.useState)(!1),{socket:P,isConnected:W,emit:O}=(0,C.A)(),Z=(0,h.Zp)(),{session:J}=(0,y.As)(),G=null===J||void 0===J?void 0:J.desktop_user_id;let U={7:"WEEK",14:"TWO_WEEKS",28:"FOUR_WEEKS",1:"MONTH"};const q=(0,x.I)({queryKey:["jobRead",B],queryFn:()=>(0,A.ax)(B),enabled:!!B,retry:1,staleTime:0,cacheTime:0}),X=null===q||void 0===q?void 0:q.data,K=null===q||void 0===q?void 0:q.isFetching,Y=()=>{if(P&&W){var e,s;const l=`${null===J||void 0===J?void 0:J.first_name}${null===J||void 0===J?void 0:J.last_name}-${null===X||void 0===X||null===(e=X.worker)||void 0===e?void 0:e.full_name}`;O("create_chat_group",{name:l,userId:G,participants:[null===X||void 0===X||null===(s=X.worker)||void 0===s?void 0:s.id],project_id:null,job_id:null},(e=>{"success"===e.status&&e.chat_group_id?window.location.href=`/chat?id=${e.chat_group_id}`:(console.log("Error during creation chat group: ",e),_.oR.error("Chat group already exists or Failed to create chat group"))}))}},Q=()=>{D(!1),$(!0)},ee=e=>{const s=new Date(1e3*+e.start_date),l=(new Date(1e3*+e.end_date)-s)/864e5,i=Number(e.duration)||0;return(l>0?Math.round(i/l*100)/100:0).toFixed(2)},se=e=>{const s=e.status;if(!e.published)return(0,E.jsx)(j.v,{className:`status ${g.A.DRAFT} font-14`,label:"Draft"});if("a"===s&&e.action_status)return(0,E.jsx)(j.v,{className:`status ${g.A.IN_PROGRESS} font-14`,label:"In Progress"});switch(s){case"1":return(0,E.jsx)(j.v,{className:`status ${g.A.OPEN} font-14`,label:"Open"});case"2":return(0,E.jsx)(j.v,{className:`status ${g.A.ASSIGNED} font-14`,label:"Assigned"});case"3":return(0,E.jsx)(j.v,{className:`status ${g.A.SUBMITTED} font-14`,label:"Submitted"});case"4":return(0,E.jsx)(j.v,{className:`status ${g.A.FINISHED} font-14`,label:"Finished"});case"6":return(0,E.jsx)(j.v,{className:`status ${g.A.DECLINED} font-14`,label:"Declined"});case"a":return(0,E.jsx)(j.v,{className:`status ${g.A.CONFIRMED} font-14`,label:"Confirmed"});default:return(0,E.jsx)(j.v,{className:`status ${g.A.defaultStatus} font-14`,label:s})}},le=(0,u.n)({mutationFn:()=>(0,A.XX)(B),onSuccess:()=>{D(!1),H((e=>!e)),_.oR.success("Job deleted successfully")},onError:e=>{console.error("Error deleting job:",e),_.oR.error("Failed to delete job")}}),ie=(null===X||void 0===X||null===(s=X.attachments)||void 0===s?void 0:s.filter((e=>"0"===e.type)))||[],te=(null===X||void 0===X||null===(l=X.attachments)||void 0===l?void 0:l.filter((e=>"1"===e.type)))||[],ae=(null===X||void 0===X||null===(k=X.attachments)||void 0===k?void 0:k.filter((e=>"2"===e.type)))||[],oe=(null===X||void 0===X||null===(R=X.attachments)||void 0===R?void 0:R.filter((e=>"3"===e.type)))||[];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(b.B,{visible:I,position:"right",onHide:()=>D(!1),modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{var s,l,i,h,x,u,j,b,_,f;let{closeIconRef:A,hide:y}=e;return(0,E.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"12px"},children:[(0,E.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,E.jsx)("div",{className:g.A.viewBox,children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,E.jsx)("path",{d:"M9.75 1.5C8.5076 1.5 7.5 2.50675 7.5 3.74963V4.5H2.25C1.00736 4.5 0 5.50736 0 6.75V18.75C0 19.9926 1.00736 21 2.25 21H21.75C22.9926 21 24 19.9926 24 18.75V6.75C24 5.50736 22.9926 4.5 21.75 4.5H16.5V3.74963C16.5 2.50675 15.4924 1.5 14.25 1.5H9.75ZM9.75 3H14.25C14.6645 3 15 3.33695 15 3.75092V4.5H9V3.74963C9 3.33566 9.33555 3 9.75 3ZM12.5797 13.3716L22.5 10.7262V18.75C22.5 19.1642 22.1642 19.5 21.75 19.5H2.25C1.83579 19.5 1.5 19.1642 1.5 18.75V10.7262L11.4203 13.3716C11.8001 13.4729 12.1999 13.4729 12.5797 13.3716ZM2.25 6H21.75C22.1642 6 22.5 6.33579 22.5 6.75V9.17379L12.1932 11.9223C12.0666 11.956 11.9334 11.956 11.8068 11.9223L1.5 9.17379V6.75C1.5 6.33579 1.83579 6 2.25 6Z",fill:"#079455"})})}),(0,E.jsx)("span",{className:g.A.viewHeading,children:"Job Details"}),X&&se(X)]}),(0,E.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,E.jsxs)(t.A,{className:g.A.chatButton,onClick:Y,children:["See Chat  ",(0,E.jsx)("img",{src:N.A,alt:"chat",width:"20px",height:"20px",style:{width:"20px",height:"20px"}})]}),(0,E.jsx)(t.A,{type:"button",className:"text-button",ref:A,onClick:e=>y(e),children:(0,E.jsx)(d.A,{size:24,color:"#667085"})})]})]}),(0,E.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 68px - 102px)",overflow:"auto"},children:[(0,E.jsxs)("div",{className:(0,p.A)("d-flex justify-content-between align-items-center mb-3"),children:[(0,E.jsx)("h1",{className:g.A.heading,children:"Job Details"}),(0,E.jsx)("div",{className:"d-flex align-items-center gap-2",children:(0,E.jsxs)("span",{className:"font-14",children:["Job ID: ",B]})})]}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsxs)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0"),children:[(0,E.jsxs)("div",{className:"form-group mb-3",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Job Reference"}),K?(0,E.jsx)(o.A,{as:"p",animation:"wave",style:{marginBottom:"0px"},children:(0,E.jsx)(o.A,{bg:"secondary",style:{height:"20px",width:"50%",borderRadius:"4px"},size:"lg"})}):(0,E.jsx)("p",{className:(0,p.A)(g.A.text),children:(null===X||void 0===X?void 0:X.short_description)||"-"})]}),(0,E.jsxs)("div",{className:"form-group mb-3",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Job Description"}),K?(0,E.jsx)(o.A,{as:"p",animation:"wave",style:{marginBottom:"0px"},children:(0,E.jsx)(o.A,{bg:"secondary",style:{height:"40px",width:"100%",borderRadius:"4px"},size:"lg"})}):(0,E.jsx)("p",{className:(0,p.A)(g.A.text,!M&&g.A.description,"mb-0"),children:(null===X||void 0===X?void 0:X.long_description)||"-"}),!K&&(null===X||void 0===X||null===(s=X.long_description)||void 0===s?void 0:s.length)>200&&(0,E.jsx)("button",{onClick:()=>z(!M),className:g.A.toggleButton,children:M?"Show Less":"Show More"})]})]})}),(0,E.jsx)("h1",{className:(0,p.A)(g.A.heading,"mb-3"),children:"Assigned to"}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsx)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0 py-4"),children:"1"===(null===X||void 0===X?void 0:X.status)?(0,E.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,E.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 20 20",fill:"none",children:[(0,E.jsx)("path",{d:"M7.14307 6.57171C6.82748 6.57171 6.57164 6.82754 6.57164 7.14314C6.57164 7.45873 6.82748 7.71457 7.14307 7.71457H12.8574C13.1729 7.71457 13.4288 7.45873 13.4288 7.14314C13.4288 6.82754 13.1729 6.57171 12.8574 6.57171H7.14307Z",fill:"#475467"}),(0,E.jsx)("path",{d:"M7.14307 8.85742C6.82748 8.85742 6.57164 9.11326 6.57164 9.42885C6.57164 9.74444 6.82748 10.0003 7.14307 10.0003H10.5716C10.8872 10.0003 11.1431 9.74444 11.1431 9.42885C11.1431 9.11326 10.8872 8.85742 10.5716 8.85742H7.14307Z",fill:"#475467"}),(0,E.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 3.14314C11.2626 3.14314 12.2859 2.11979 12.2859 0.857422H15.1431C16.0898 0.857422 16.8574 1.62493 16.8574 2.57171V17.4289C16.8574 18.3756 16.0898 19.1431 15.1431 19.1431H4.85735C3.91058 19.1431 3.14307 18.3756 3.14307 17.4289V2.57171C3.14307 1.62493 3.91058 0.857422 4.85735 0.857422H7.7145C7.7145 2.11979 8.73784 3.14314 10.0002 3.14314ZM10.0002 4.28599C11.493 4.28599 12.763 3.33193 13.2337 2.00028H15.1431C15.4587 2.00028 15.7145 2.25612 15.7145 2.57171V17.4289C15.7145 17.7444 15.4587 18.0003 15.1431 18.0003H4.85735C4.54176 18.0003 4.28592 17.7444 4.28592 17.4289V2.57171C4.28592 2.25612 4.54176 2.00028 4.85735 2.00028H6.76673C7.2374 3.33193 8.50739 4.28599 10.0002 4.28599Z",fill:"#475467"})]})}),"Open Jobs"]}):(0,E.jsxs)(n.A,{className:(0,p.A)(g.A.chooseUserBox,"flex-nowrap","w-75"),children:[(0,E.jsx)(r.A,{sm:2,className:"p-0",children:K?(0,E.jsx)(o.A,{as:"p",animation:"wave",style:{marginBottom:"0px"},children:(0,E.jsx)(o.A,{bg:"secondary",style:{height:"62px",width:"62px",borderRadius:"50%"},size:"lg"})}):(0,E.jsx)("div",{className:"d-flex justify-content-center align-items-center border",style:{width:"62px",height:"62px",borderRadius:"50%",overflow:"hidden"},children:null!==X&&void 0!==X&&null!==(l=X.worker)&&void 0!==l&&l.has_photo?(0,E.jsx)("img",{src:null===X||void 0===X||null===(i=X.worker)||void 0===i?void 0:i.photo,style:{width:"62px",height:"62px",borderRadius:"50%"}}):(0,E.jsx)("span",{className:"font-16",children:null===X||void 0===X||null===(h=X.worker)||void 0===h?void 0:h.alias})})}),(0,E.jsxs)(r.A,{sm:5,className:"pe-0 ps-0",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.assignedUser,"text-nowrap"),children:K?(0,E.jsx)(o.A,{as:"p",animation:"wave",style:{marginBottom:"0px"},children:(0,E.jsx)(o.A,{bg:"secondary",style:{height:"20px",width:"150px",borderRadius:"4px"},size:"lg"})}):(0,E.jsx)(E.Fragment,{children:(null===X||void 0===X||null===(x=X.worker)||void 0===x?void 0:x.full_name)||"-"})}),(0,E.jsx)("div",{style:{background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center"},children:"Employee"})]}),(0,E.jsxs)(r.A,{sm:5,className:"",children:[(0,E.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,E.jsx)("div",{style:{width:"16px",height:"16px",background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"$"}),K?(0,E.jsx)(o.A,{as:"p",animation:"wave",style:{marginBottom:"0px"},children:(0,E.jsx)(o.A,{bg:"secondary",style:{height:"20px",width:"100px",borderRadius:"4px"},size:"lg"})}):(0,E.jsxs)("span",{children:[(null===X||void 0===X||null===(u=X.worker)||void 0===u?void 0:u.hourly_rate)||"-"," AUD"]})]}),(0,E.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,E.jsx)("div",{style:{width:"16px",height:"16px",background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,E.jsx)(c.A,{color:"#158ECC",size:16})}),(0,E.jsx)("span",{children:U[null===X||void 0===X||null===(j=X.worker)||void 0===j?void 0:j.payment_cycle]||"-"})]})]})]})})}),(0,E.jsx)("h1",{className:(0,p.A)(g.A.heading,"mb-3"),children:"Time / Money"}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsxs)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0 d-flex flex-column gap-3"),children:[(0,E.jsxs)("div",{className:"d-flex gap-3",children:[(0,E.jsxs)("div",{className:g.A.paymentType,children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Payment Type"}),"2"===(null===X||void 0===X?void 0:X.type)&&(0,E.jsxs)("div",{className:`flex align-items-center ${g.A.RadioButton}`,children:[(0,E.jsx)("input",{type:"radio",id:"fix",value:"2",checked:!0,className:g.A.customRadio}),(0,E.jsx)("label",{htmlFor:"fix",className:(0,p.A)(g.A.radioLabel,g.A.fix),children:"Fix"})]}),"3"===(null===X||void 0===X?void 0:X.type)&&(0,E.jsxs)("div",{className:`flex align-items-center ${g.A.RadioButton}`,children:[(0,E.jsx)("input",{type:"radio",id:"fix",value:"3",checked:!0,className:g.A.customRadio}),(0,E.jsx)("label",{htmlFor:"hours",className:(0,p.A)(g.A.radioLabel,g.A.hours),children:"Hours"})]}),"4"===(null===X||void 0===X?void 0:X.type)&&(0,E.jsxs)("div",{className:`flex align-items-center ${g.A.RadioButton}`,children:[(0,E.jsx)("input",{type:"radio",id:"fix",value:"4",checked:!0,className:g.A.customRadio}),(0,E.jsx)("label",{htmlFor:"timetracker",className:(0,p.A)(g.A.radioLabel,g.A.timetracker),children:"Time Tracker"})]})]}),(0,E.jsxs)("div",{className:"d-flex align-items-center gap-3",children:["2"!==(null===X||void 0===X?void 0:X.type)&&(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Hours"}),(0,E.jsxs)("div",{className:g.A.paymentBox,children:[(0,E.jsx)("div",{className:g.A.dollarBox,children:(0,E.jsx)("span",{style:{fontSize:"14px",color:"#158ECC"},children:"H"})}),null===X||void 0===X?void 0:X.duration]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Payment"}),(0,E.jsxs)("div",{className:g.A.paymentBox,children:[(0,E.jsx)("div",{className:g.A.dollarBox,children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,E.jsx)("path",{d:"M4 10.7813C4.14782 12.4484 5.51294 13.6306 7.59107 13.7837V15H8.63448V13.7837C10.9039 13.6051 12.3125 12.3463 12.3125 10.4836C12.3125 8.89307 11.3647 7.97448 9.35617 7.45565L8.63448 7.26853V3.46659C9.75615 3.57716 10.5126 4.18104 10.7039 5.08262H12.1734C12.0082 3.4836 10.6343 2.33536 8.63448 2.20778V1H7.59107V2.23329C5.65207 2.46294 4.32172 3.70474 4.32172 5.38882C4.32172 6.84326 5.28687 7.87242 6.98241 8.3062L7.59107 8.4678V12.4994C6.44332 12.3293 5.65207 11.6999 5.46077 10.7813H4ZM7.39108 6.94532C6.34767 6.68165 5.79119 6.12029 5.79119 5.32928C5.79119 4.38518 6.49549 3.68773 7.59107 3.50061V6.99635L7.39108 6.94532ZM8.98228 8.81652C10.2692 9.13973 10.8343 9.67558 10.8343 10.5857C10.8343 11.6829 10.0083 12.4143 8.63448 12.5249V8.73147L8.98228 8.81652Z",fill:"#158ECC"})})}),null===X||void 0===X?void 0:X.cost," AUD"]})]})]})]}),(0,E.jsxs)("div",{className:"d-flex gap-3",children:[(0,E.jsxs)("div",{className:g.A.paymentType,children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Time"}),"1"===(null===X||void 0===X?void 0:X.time_type)&&(0,E.jsxs)("div",{className:`flex align-items-center ${g.A.RadioButton}`,children:[(0,E.jsx)("input",{type:"radio",id:"shift",value:"1",checked:!0,className:g.A.customRadio}),(0,E.jsx)("label",{htmlFor:"shift",className:(0,p.A)(g.A.radioLabel,g.A.shift),children:"Shift"})]}),"T"===(null===X||void 0===X?void 0:X.time_type)&&(0,E.jsxs)("div",{className:`flex align-items-center ${g.A.RadioButton}`,children:[(0,E.jsx)("input",{type:"radio",id:"shift",value:"T",checked:!0,className:g.A.customRadio}),(0,E.jsx)("label",{htmlFor:"timeframe",className:(0,p.A)(g.A.radioLabel,g.A.timeFrame),children:"Time Frame"})]})]}),(0,E.jsxs)("div",{className:"",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Starts"}),(0,E.jsxs)("div",{className:g.A.paymentBox,children:[(0,E.jsx)("div",{className:g.A.dollarBox,children:(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,E.jsx)("path",{d:"M8.51496 1.01896C8.34401 1.00635 8.17225 1 8 1V0C8.19685 0 8.39314 0.00726199 8.58852 0.0216722L8.51496 1.01896ZM10.5193 1.46905C10.1985 1.34533 9.86912 1.2454 9.53371 1.17008L9.75282 0.194382C10.1361 0.280463 10.5126 0.394665 10.8792 0.536055L10.5193 1.46905ZM11.889 2.17971C11.7458 2.08402 11.5994 1.99388 11.4503 1.90939L11.9432 1.0393C12.1136 1.13586 12.2809 1.23888 12.4446 1.34824C12.6082 1.4576 12.7674 1.5727 12.9219 1.69322L12.3066 2.48158C12.1715 2.37612 12.0322 2.27541 11.889 2.17971ZM13.7231 3.96934C13.5252 3.68829 13.3068 3.42218 13.0697 3.17321L13.794 2.48368C14.0649 2.76821 14.3145 3.07233 14.5407 3.39353L13.7231 3.96934ZM14.4672 5.32122C14.4012 5.16208 14.3296 5.00583 14.2526 4.85271L15.1458 4.40311C15.2339 4.5781 15.3157 4.75667 15.391 4.93853C15.4664 5.12039 15.5348 5.30453 15.5962 5.49054L14.6467 5.80423C14.5929 5.64147 14.5331 5.48035 14.4672 5.32122ZM14.9979 7.82822C14.9895 7.48455 14.9557 7.14197 14.8969 6.80326L15.8822 6.63231C15.9494 7.01939 15.988 7.41092 15.9976 7.80367L14.9979 7.82822ZM14.8655 9.36563C14.8991 9.1967 14.9264 9.02699 14.9474 8.85687L15.9398 8.97929C15.9159 9.17372 15.8847 9.36766 15.8463 9.56072C15.8079 9.75378 15.7625 9.94489 15.7102 10.1337L14.7464 9.867C14.7922 9.70179 14.8319 9.53457 14.8655 9.36563ZM13.914 11.745C14.0979 11.4546 14.2602 11.151 14.3995 10.8367L15.3137 11.2419C15.1545 11.6011 14.969 11.9481 14.7588 12.28L13.914 11.745ZM12.9497 12.9497C13.0715 12.828 13.1885 12.702 13.3005 12.5722L14.0577 13.2254C13.9297 13.3737 13.796 13.5177 13.6569 13.6569L12.9497 12.9497Z",fill:"#158ECC"}),(0,E.jsx)("path",{d:"M8 1C6.84885 1 5.71545 1.2839 4.70022 1.82655C3.68499 2.3692 2.81926 3.15386 2.17971 4.11101C1.54017 5.06816 1.14654 6.16827 1.03371 7.31388C0.920876 8.45949 1.09232 9.61525 1.53285 10.6788C1.97337 11.7423 2.66939 12.6808 3.55925 13.4111C4.44911 14.1414 5.50533 14.6409 6.63437 14.8655C7.76341 15.0901 8.93041 15.0327 10.032 14.6986C11.1336 14.3644 12.1358 13.7637 12.9497 12.9497L13.6569 13.6569C12.7266 14.5871 11.5812 15.2736 10.3223 15.6555C9.06332 16.0374 7.72961 16.1029 6.43928 15.8463C5.14895 15.5896 3.94183 15.0187 2.92486 14.1841C1.90788 13.3495 1.11243 12.2769 0.608966 11.0615C0.105504 9.846 -0.0904279 8.52514 0.0385242 7.21586C0.167476 5.90659 0.617333 4.64933 1.34825 3.55544C2.07916 2.46155 3.06857 1.5648 4.22883 0.94463C5.38909 0.324457 6.68439 0 8 0V1Z",fill:"#158ECC"}),(0,E.jsx)("path",{d:"M7.5 3C7.77614 3 8 3.22386 8 3.5V8.70984L11.2481 10.5659C11.4878 10.7029 11.5711 11.0083 11.4341 11.2481C11.2971 11.4878 10.9917 11.5711 10.7519 11.4341L7.25193 9.43412C7.09615 9.3451 7 9.17943 7 9V3.5C7 3.22386 7.22386 3 7.5 3Z",fill:"#158ECC"})]})}),"1"===(null===X||void 0===X?void 0:X.time_type)&&(0,F.Y)(null===X||void 0===X?void 0:X.start_date),"T"===(null===X||void 0===X?void 0:X.time_type)&&(0,E.jsxs)(E.Fragment,{children:[(0,F.Y)(null===X||void 0===X?void 0:X.start_date)," - ",(0,F.Y)(null===X||void 0===X?void 0:X.end_date)," "]})]})]}),"2"===(null===X||void 0===X?void 0:X.type)&&"T"!==(null===X||void 0===X?void 0:X.time_type)?(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Hours"}),(0,E.jsxs)("div",{className:g.A.paymentBox,children:[(0,E.jsx)("div",{className:g.A.dollarBox,children:(0,E.jsx)("span",{style:{fontSize:"14px",color:"#158ECC"},children:"H"})}),null===X||void 0===X?void 0:X.duration]})]}):"1"===(null===X||void 0===X?void 0:X.time_type)||"1"!==(null===X||void 0===X?void 0:X.time_type)&&"4"===(null===X||void 0===X?void 0:X.type)?(0,E.jsxs)("div",{className:"",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Hours"}),(0,E.jsxs)("div",{className:g.A.paymentBox,children:[(0,E.jsx)("div",{className:g.A.dollarBox,children:(0,E.jsx)("span",{style:{fontSize:"14px",color:"#158ECC"},children:"H"})}),ee(X)]})]}):null]})]})}),(0,E.jsx)("h1",{className:(0,p.A)(g.A.heading,"mb-3"),children:"Link to Project"}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsxs)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0"),children:[(0,E.jsxs)("div",{className:"form-group mb-3",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Project"}),(0,E.jsxs)("p",{className:(0,p.A)(g.A.text,"d-flex align-items-center gap-1"),children:[(null===X||void 0===X||null===(b=X.project)||void 0===b?void 0:b.number)||"-"," ",(0,E.jsx)(t.A,{className:"text-button p-0",onClick:()=>{var e,s,l;return Z(`/management?unique_id=${null===X||void 0===X||null===(e=X.project)||void 0===e?void 0:e.unique_id}&reference=${null===X||void 0===X||null===(s=X.project)||void 0===s?void 0:s.reference}&number=${null===X||void 0===X||null===(l=X.project)||void 0===l?void 0:l.number}`)},children:(0,E.jsx)(m.A,{size:16,color:"#158ECC"})})]})]}),(0,E.jsxs)("div",{className:"form-group mb-3",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Reference"}),(0,E.jsx)("p",{className:(0,p.A)(g.A.text,g.A.description),children:(null===X||void 0===X||null===(_=X.project)||void 0===_?void 0:_.reference)||"-"})]}),(0,E.jsxs)("div",{className:"form-group mb-3",children:[(0,E.jsx)("label",{className:(0,p.A)(g.A.customLabel),children:"Description"}),(0,E.jsx)("p",{className:(0,p.A)(g.A.text,g.A.description),children:(null===X||void 0===X||null===(f=X.project)||void 0===f?void 0:f.description)||"-"})]})]})}),(null===X||void 0===X?void 0:X.project_photos)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("h1",{className:(0,p.A)(g.A.heading,"mb-3"),children:"Project Photos"}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsx)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0"),children:(0,E.jsxs)("div",{className:"d-flex flex-column gap-1",style:{overflowX:"auto"},children:[(0,E.jsx)(w.A,{attachments:te,label:"Before"}),(0,E.jsx)(w.A,{attachments:ae,label:"In Process"}),(0,E.jsx)(w.A,{attachments:oe,label:"After"})]})})})]}),(0,E.jsx)("h1",{className:(0,p.A)(g.A.heading,"mb-3"),children:"Documents"}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsx)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0"),children:(0,E.jsxs)(t.A,{className:"outline-button d-flex gap-2",onClick:()=>V(!0),style:{borderRadius:"40px"},children:["Viw All Documents",(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,E.jsx)("path",{d:"M1.25 4.375C1.25 3.33947 2.08947 2.5 3.125 2.5H6.57992C7.77713 2.5 8.78091 3.19995 9.46927 3.97997C9.98156 4.56048 10.5984 5 11.25 5H16.8759C17.912 5 18.75 5.84003 18.75 6.875V15.625C18.75 16.6605 17.9105 17.5 16.875 17.5H3.125C2.08947 17.5 1.25 16.6605 1.25 15.625V4.375ZM3.125 3.75C2.77982 3.75 2.5 4.02982 2.5 4.375V7.5H17.5V6.875C17.5 6.52926 17.2205 6.25 16.8759 6.25H11.25C10.0451 6.25 9.11184 5.46409 8.53203 4.80706C7.96726 4.16709 7.27657 3.75 6.57992 3.75H3.125ZM17.5 8.75H2.5V15.625C2.5 15.9702 2.77982 16.25 3.125 16.25H16.875C17.2202 16.25 17.5 15.9702 17.5 15.625V8.75Z",fill:"#344054"})})]})})}),(0,E.jsx)("h1",{className:(0,p.A)(g.A.heading,"mb-3"),children:"History"}),(0,E.jsx)(a.A,{className:(0,p.A)(g.A.border,"mb-3"),children:(0,E.jsx)(a.A.Header,{className:(0,p.A)(g.A.background,"border-0"),children:(0,E.jsxs)("table",{className:"w-100 table table-bordered rounded",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:"Date"}),(0,E.jsx)("td",{children:"User"}),(0,E.jsx)("td",{children:"Status"})]})}),(0,E.jsx)("tbody",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:"-"}),(0,E.jsx)("td",{children:"-"}),(0,E.jsx)("td",{children:"-"})]})})]})})})]}),(0,E.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,E.jsx)("div",{children:(0,E.jsxs)(t.A,{className:"danger-text-button",disabled:le.isPending,onClick:()=>le.mutate(),children:["Delete",le.isPending&&(0,E.jsx)(v.p,{style:{width:"20px",height:"20px"}})]})}),(0,E.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,E.jsx)(t.A,{type:"button",onClick:e=>{e.stopPropagation(),D(!1)},className:"outline-button",children:"Cancel"}),(0,E.jsxs)(t.A,{type:"button",disabled:"3"===(null===X||void 0===X?void 0:X.status)||"a"===(null===X||void 0===X?void 0:X.status),onClick:Q,className:"solid-button",style:{minWidth:"75px"},children:["Edit ",!1]})]})]})]})}}),(0,E.jsx)(f.A,{jobId:B,attachments:ie||[],show:L,setShow:V,onRefetch:()=>q.refetch()}),T&&(0,E.jsx)(S.A,{visible:T,setVisible:$,setRefetch:H,isEditMode:!0,jobData:X,jobId:B,refetch:()=>q.refetch()})]})}},93137:(e,s,l)=>{l.d(s,{A:()=>i});const i={newJobTag:"view-job_newJobTag__EyCAF",chatButton:"view-job_chatButton__QAF61",border:"view-job_border__KnprQ",borderBottom:"view-job_borderBottom__Ag9Vk",background:"view-job_background__eeiN9",customLabel:"view-job_customLabel__6I5W6",lightText:"view-job_lightText__1nbTX",customText:"view-job_customText__oK3GU",text:"view-job_text__Vqm2T",assignedUser:"view-job_assignedUser__lgKW+",toggleButton:"view-job_toggleButton__wFHGc",description:"view-job_description__0rHSF",chooseUserBox:"view-job_chooseUserBox__hIESK",heading:"view-job_heading__XPFer",paymentType:"view-job_paymentType__BE0T5",typeBorder:"view-job_typeBorder__R7jQm",paymentmain:"view-job_paymentmain__ejYfy",customRadio:"view-job_customRadio__C9Z8H",fix:"view-job_fix__NRFOO",hours:"view-job_hours__s1kVw",timetracker:"view-job_timetracker__ut0cZ",shift:"view-job_shift__2dlSR",timeFrame:"view-job_timeFrame__j+Q-T",radioLabel:"view-job_radioLabel__19vAG",RadioButton:"view-job_RadioButton__F21av",paymentBox:"view-job_paymentBox__PS9jL",dollarBox:"view-job_dollarBox__CmYGa",jobGalleri:"view-job_jobGalleri__Lc+x4",viewBox:"view-job_viewBox__04ZW0",viewHeading:"view-job_viewHeading__rzJVa",defaultStatus:"view-job_defaultStatus__sF7Uc",status:"view-job_status__p9QvE",open:"view-job_open__-y1qk",Accepted:"view-job_Accepted__SPymV",CONFIRMED:"view-job_CONFIRMED__LIoTK",ASSIGN:"view-job_ASSIGN__Rf5vD",NotConfirmed:"view-job_NotConfirmed__hK3lN",COMPLETED:"view-job_COMPLETED__LQaDi",DECLINED:"view-job_DECLINED__JzIeY",MANAGER_DECLINED:"view-job_MANAGER_DECLINED__ZLLTf",finished:"view-job_finished__21gzC",assign:"view-job_assign__uRJ2w",modal:"view-job_modal__9jVc+",modalHeader:"view-job_modalHeader__-AqYp",headerTitle:"view-job_headerTitle__kcd8H",attachmentBox:"view-job_attachmentBox__El24C",DRAFT:"view-job_DRAFT__LOCkb",OPEN:"view-job_OPEN__3dI+K",ASSIGNED:"view-job_ASSIGNED__XUJmX",SUBMITTED:"view-job_SUBMITTED__I7lhc",FINISHED:"view-job_FINISHED__x3dht",IN_PROGRESS:"view-job_IN_PROGRESS__9B2VZ"}}}]);
//# sourceMappingURL=2828.c92081eb.chunk.js.map