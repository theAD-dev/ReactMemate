"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[74],{50074:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(65043),a=n(14282),s=n(76420),i=n(84494),o=n(65173),l=n.n(o),c=["color","size","title","className"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}var p=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,s=e.size,i=void 0===s?"1em":s,o=e.title,l=void 0===o?null:o,p=e.className,f=void 0===p?"":p,m=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c);return r.createElement("svg",d({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:a,className:["bi","bi-collection",f].filter(Boolean).join(" ")},m),l?r.createElement("title",null,l):null,r.createElement("path",{d:"M2.5 3.5a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1zm2-2a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zM0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6zm1.5.5A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5z"}))}));p.propTypes={color:l().string,size:l().oneOfType([l().string,l().number]),title:l().string,className:l().string};const f=p;var m=n(34602),u=n(49367),h=n(35475),x=n(58387),g=n(2028),b=n(95332),v=n(87201),w=n(70579);function j(){const[e,t]=(0,r.useState)(null),[n,o,l]=(0,g.d7)("",400),c="undefined"!==typeof window?new URL(window.location.href):null,d=c?c.searchParams.get("id"):null,p=null===c||void 0===c?void 0:c.pathname.match(/forms\/(\d+)/),j=(null===p||void 0===p?void 0:p[1])||d||"",[A,O]=(0,r.useState)(j),[C,z]=(0,r.useState)(!1),[S,E]=(0,r.useState)(""),[_,k]=(0,r.useState)([]),[T,M]=(0,r.useState)(""),[$,P]=(0,r.useState)("All"),L=r.useRef(new Set);function q(e,t){if(!e)return"";if(Array.isArray(e.fields)){const n={};e.fields.forEach((e=>{var t,r;const a=(e.name||e.label||"").toLowerCase();n[a]=null!==(t=null!==(r=e.value)&&void 0!==r?r:e.answer)&&void 0!==t?t:""}));for(const e of t){const t=n[e];if(t)return t}for(const e in n)if(t.some((t=>e.includes(t))))return n[e];return""}const n=e.payload||e.data||e||{};for(const a of t)if(null!=n[a])return n[a];const r=Object.keys(n).find((e=>t.some((t=>e.toLowerCase().includes(t)))));return r?n[r]:""}(0,r.useEffect)((()=>{A&&(L.current.has(A)||(L.current.add(A),async function(){E(""),z(!0);try{const e=await(0,v.Mb)(A);k(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.results)||[])}catch(e){E(e.message||"Failed to load")}finally{z(!1)}}()))}),[A]);const B=(0,r.useMemo)((()=>{const e=T.trim().toLowerCase();return e?_.filter((t=>[q(t,["name","full_name"]),q(t,["email"]),q(t,["phone","mobile","tel"]),q(t,["message","note","comments"])].join(" ").toLowerCase().includes(e))):_}),[_,T]);return(0,w.jsxs)("div",{className:"mf-inquiries-page",children:[(0,w.jsx)(u.mg,{children:(0,w.jsx)("title",{children:"MeMate - Enquiries"})}),(0,w.jsxs)("div",{className:`topbar ${null!==e&&void 0!==e&&e.length?b.A.active:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,w.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:(0,w.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,w.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,w.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,w.jsx)("input",{type:"text",placeholder:"Search",value:n,onChange:e=>l(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})}),(0,w.jsxs)("div",{className:"featureName d-flex align-items-center gap-3",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[(0,w.jsx)(h.N_,{to:"/enquiries",className:(0,x.A)("d-flex align-items-center px-2 py-1",b.A.subMenuLink),children:(0,w.jsx)("span",{className:b.A.topBarText,children:"All"})}),(0,w.jsxs)(h.N_,{to:"/enquiries",className:(0,x.A)("d-flex align-items-center px-2 py-1",b.A.subMenuLink),children:[(0,w.jsx)(s.A,{color:"#9E77ED",size:16,className:"me-2"}),(0,w.jsx)("span",{className:b.A.topBarText,children:"Web"})]}),(0,w.jsxs)(h.N_,{to:"/enquiries",className:(0,x.A)("d-flex align-items-center px-2 py-1",b.A.subMenuLink),children:[(0,w.jsx)(i.A,{color:"#F79009",size:16,className:"me-2"}),(0,w.jsx)("span",{className:b.A.topBarText,children:"Form"})]}),(0,w.jsxs)(h.N_,{to:"/enquiries",className:(0,x.A)("d-flex align-items-center px-2 py-1",b.A.subMenuLink),children:[(0,w.jsx)(f,{color:"#084095",size:16,className:"me-2"}),(0,w.jsx)("span",{className:b.A.topBarText,children:"Fb/In"})]})]}),(0,w.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,w.jsx)(h.N_,{to:"/enquiries/form-builder/new",children:(0,w.jsx)(a.A,{className:"solid-button py-1 font-14",children:"New"})}),(0,w.jsx)(h.N_,{to:"/enquiries/forms",children:(0,w.jsxs)(a.A,{className:"info-button py-1 font-14",children:["Set Up ",(0,w.jsx)(m.A,{color:"#158ECC",size:20})]})})]})]}),(0,w.jsx)("div",{className:"mf-table-wrap",children:(0,w.jsxs)("table",{className:"mf-table",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:"Lead Source"}),(0,w.jsx)("th",{children:"Name"}),(0,w.jsx)("th",{children:"Message"}),(0,w.jsx)("th",{children:"Phone"}),(0,w.jsx)("th",{children:"Email"}),(0,w.jsx)("th",{children:"Assign To"}),(0,w.jsx)("th",{children:"Spam"}),(0,w.jsx)("th",{children:"No Go"}),(0,w.jsx)("th",{children:"Move to Quote"})]})}),(0,w.jsxs)("tbody",{children:[C&&(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:9,className:"mf-empty",children:"Loading\u2026"})}),!C&&0===B.length&&(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:9,className:"mf-empty",children:"No inquiries"})}),!C&&B.map(((e,t)=>{return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"mf-cell-lead",children:[(0,w.jsx)("span",{className:"mf-chip",children:e.source||"Form"}),(0,w.jsx)("div",{className:"mf-subtext",children:N(e.created)})]})}),(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"mf-cell-name",children:[(0,w.jsx)("div",{className:"mf-avatar",children:y(q(e,["name","full_name"])||"U")}),(0,w.jsx)("span",{children:q(e,["name","full_name"])||"Unknown"})]})}),(0,w.jsx)("td",{className:"mf-ellipsis",title:q(e,["message","note","comments"]),children:q(e,["message","note","comments"])||"\u2014"}),(0,w.jsx)("td",{children:(n=q(e,["phone","mobile","tel"]),n||"")}),(0,w.jsx)("td",{className:"mf-ellipsis",children:q(e,["email"])}),(0,w.jsx)("td",{children:(0,w.jsxs)("div",{className:"mf-cell-name muted",children:[(0,w.jsx)("div",{className:"mf-avatar small",children:y(e.assignee_name||"")}),(0,w.jsx)("span",{children:e.assignee_name||"\u2014"})]})}),(0,w.jsx)("td",{className:"mf-icon-col",children:"\ud83e\uddf9"}),(0,w.jsx)("td",{className:"mf-icon-col",children:"\ud83d\udeab"}),(0,w.jsx)("td",{children:(0,w.jsx)("button",{className:"mf-btn small",children:"Move"})})]},e.id||t);var n}))]})]})}),(0,w.jsx)("style",{children:"\n        .mf-inquiries-page {font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}\n        .mf-toolbar {display:flex; align-items:center; justify-content:space-between; gap:12px; margin:12px 0;}\n        .mf-toolbar-left, .mf-toolbar-right {display:flex; gap:8px; align-items:center;}\n        .mf-toolbar-mid {display:flex; align-items:center; gap:12px; flex:1;}\n        .mf-input {height:36px; border:1px solid #e5e7eb; border-radius:8px; padding:0 10px; background:#fff;}\n        .mf-search {flex:1; height:36px; border:1px solid #e5e7eb; border-radius:18px; padding:0 14px;}\n        .mf-tabs {display:flex; gap:6px;}\n        .mf-tab {height:30px; padding:0 12px; border-radius:16px; border:1px solid #e5e7eb; background:#fff;}\n        .mf-tab.active {background:#eef2ff; border-color:#c7d2fe; color:#3730a3;}\n        .mf-btn {height:32px; padding:0 12px; border-radius:8px; border:1px solid #e5e7eb; background:#fff; cursor:pointer;}\n        .mf-btn.primary {background:#2563eb; color:#fff; border-color:#2563eb;}\n        .mf-btn.ghost {background:transparent;}\n        .mf-btn.small {height:28px; padding:0 10px;}\n        .mf-error {margin:8px 0; color:#b91c1c;}\n        .mf-table-wrap {background:#fff; border:1px solid #e5e7eb; border-radius:12px; overflow:hidden;}\n        table.mf-table {width:100%; border-collapse:separate; border-spacing:0;}\n        .mf-table th {text-align:left; font-weight:600; font-size:12px; color:#6b7280; padding:12px; background:#f9fafb; border-bottom:1px solid #eef2f7;}\n        .mf-table td {padding:14px 12px; border-bottom:1px solid #f3f4f6; vertical-align:middle;}\n        .mf-empty {text-align:center; padding:24px; color:#6b7280;}\n        .mf-cell-lead {display:flex; flex-direction:column; gap:4px;}\n        .mf-chip {display:inline-block; font-size:12px; background:#eef2ff; color:#3730a3; padding:4px 8px; border-radius:999px;}\n        .mf-subtext {font-size:11px; color:#9ca3af;}\n        .mf-cell-name {display:flex; align-items:center; gap:10px;}\n        .mf-cell-name.muted span {color:#6b7280}\n        .mf-avatar {width:28px; height:28px; border-radius:50%; background:#e5e7eb; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:600; color:#374151;}\n        .mf-avatar.small {width:22px; height:22px; font-size:10px;}\n        .mf-ellipsis {max-width:420px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}\n        .mf-icon-col {text-align:center;}\n      "})]})}function y(e){const t=String(e||"").trim();if(!t)return"\u2014";return t.split(/\s+/).slice(0,2).map((e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toUpperCase()})).join("")}function N(e){if(!e)return"";const t=Number(e),n=Number.isFinite(t)&&t>1e10?new Date(t):new Date(1e3*t),r=isNaN(n.getTime())?new Date(e):n;return isNaN(r.getTime())?"":r.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}},76420:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(65043),a=n(65173),s=n.n(a),i=["color","size","title","className"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}var l=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,s=e.size,l=void 0===s?"1em":s,c=e.title,d=void 0===c?null:c,p=e.className,f=void 0===p?"":p,m=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return r.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:l,height:l,fill:a,className:["bi","bi-window-sidebar",f].filter(Boolean).join(" ")},m),d?r.createElement("title",null,d):null,r.createElement("path",{d:"M2.5 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1m2-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1 .5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"}),r.createElement("path",{d:"M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v2H1V3a1 1 0 0 1 1-1zM1 13V6h4v8H2a1 1 0 0 1-1-1m5 1V6h9v7a1 1 0 0 1-1 1z"}))}));l.propTypes={color:s().string,size:s().oneOfType([s().string,s().number]),title:s().string,className:s().string};const c=l},84494:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(65043),a=n(65173),s=n.n(a),i=["color","size","title","className"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}var l=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,s=e.size,l=void 0===s?"1em":s,c=e.title,d=void 0===c?null:c,p=e.className,f=void 0===p?"":p,m=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return r.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:l,height:l,fill:a,className:["bi","bi-input-cursor-text",f].filter(Boolean).join(" ")},m),d?r.createElement("title",null,d):null,r.createElement("path",{fillRule:"evenodd",d:"M5 2a.5.5 0 0 1 .5-.5c.862 0 1.573.287 2.06.566.174.099.321.198.44.286.119-.088.266-.187.44-.286A4.17 4.17 0 0 1 10.5 1.5a.5.5 0 0 1 0 1c-.638 0-1.177.213-1.564.434a3.5 3.5 0 0 0-.436.294V7.5H9a.5.5 0 0 1 0 1h-.5v4.272c.1.08.248.187.436.294.387.221.926.434 1.564.434a.5.5 0 0 1 0 1 4.17 4.17 0 0 1-2.06-.566A5 5 0 0 1 8 13.65a5 5 0 0 1-.44.285 4.17 4.17 0 0 1-2.06.566.5.5 0 0 1 0-1c.638 0 1.177-.213 1.564-.434.188-.107.335-.214.436-.294V8.5H7a.5.5 0 0 1 0-1h.5V3.228a3.5 3.5 0 0 0-.436-.294A3.17 3.17 0 0 0 5.5 2.5.5.5 0 0 1 5 2"}),r.createElement("path",{d:"M10 5h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4v1h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4zM6 5V4H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v-1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1z"}))}));l.propTypes={color:s().string,size:s().oneOfType([s().string,s().number]),title:s().string,className:s().string};const c=l},87201:(e,t,n)=>{n.d(t,{Jy:()=>i,Mb:()=>l,bJ:()=>a,i6:()=>c,lI:()=>o,sk:()=>s});const r="https://app.memate.com.au/api/v1/inquiries/form/";async function a(e){const t=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text().catch((()=>""));let r=`API ${t.status}: ${e||t.statusText}`;try{const t=JSON.parse(e);if(t&&"object"===typeof t){const e=[];for(const[n,r]of Object.entries(t)){const t=n.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),a=Array.isArray(r)?r:[r];e.push(`${t}: ${a.join(", ")}`)}e.length>0&&(r=e.join("\n"))}}catch(n){}throw new Error(r)}return t.json()}async function s(e){const t=`https://app.memate.com.au/api/v1/inquiries/forms/?organization=${encodeURIComponent(e)}`,n=await fetch(t);if(!n.ok){const e=await n.text().catch((()=>""));throw new Error(`API ${n.status}: ${e||n.statusText}`)}return n.json()}async function i(e){const t=`https://app.memate.com.au/api/v1/inquiries/form/${e}/`,n=await fetch(t);if(!n.ok){const e=await n.text().catch((()=>""));throw new Error(`API ${n.status}: ${e||n.statusText}`)}return n.json()}async function o(e,t){const n=`https://app.memate.com.au/api/v1/inquiries/form/${e}/update/`,r=await fetch(n,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const e=await r.text().catch((()=>""));let t=`API ${r.status}: ${e||r.statusText}`;try{const n=JSON.parse(e);if(n&&"object"===typeof n){const e=[];for(const[t,r]of Object.entries(n)){const n=t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),a=Array.isArray(r)?r:[r];e.push(`${n}: ${a.join(", ")}`)}e.length>0&&(t=e.join("\n"))}}catch(a){}throw new Error(t)}return r.json()}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("formId is required");const n=`https://app.memate.com.au/api/v1/inquiries/form/${encodeURIComponent(e)}/submissions/`,r=new URLSearchParams;t.page&&r.set("page",t.page),t.page_size&&r.set("page_size",t.page_size),null!=t.status&&r.set("status",t.status),t.assigned_to&&r.set("assigned_to",t.assigned_to),t.search&&r.set("search",t.search),t.ordering&&r.set("ordering",t.ordering);const a=r.toString()?`${n}?${r.toString()}`:n,s=await fetch(a);if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return s.json()}async function c(e){const t=`https://app.memate.com.au/api/v1/inquiries/form/${e}/delete/`,n=await fetch(t,{method:"DELETE"});if(!n.ok){const e=await n.text().catch((()=>""));throw new Error(`API ${n.status}: ${e||n.statusText}`)}return!0}},95332:(e,t,n)=>{n.d(t,{A:()=>r});const r={topBarText:"forms_topBarText__Tbo0a",subMenuLink:"forms_subMenuLink__7OVdH",activeForm:"forms_activeForm__o1KKd",newButton:"forms_newButton__aX1-r"}}}]);
//# sourceMappingURL=74.76acaa34.chunk.js.map