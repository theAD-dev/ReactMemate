"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3074],{20685:(e,s,l)=>{l.d(s,{A:()=>n});const n={circledesignstyle:"new-client-create_circledesignstyle__sG0j7",out:"new-client-create_out__UsInp",tab:"new-client-create_tab__IdlaT",iconBox:"new-client-create_iconBox__AupEc",tabText:"new-client-create_tabText__RSTYW",active:"new-client-create_active__2eoaJ",bgGreay:"new-client-create_bgGreay__y1jMx",fileUploadBox:"new-client-create_fileUploadBox__n9KJX",uploadedImgBox:"new-client-create_uploadedImgBox__rHsYh",uploadedText1:"new-client-create_uploadedText1__9ZZMJ",uploadedText2:"new-client-create_uploadedText2__PeAVp",lable:"new-client-create_lable__mDL9D",inputText:"new-client-create_inputText__Y-va7",error:"new-client-create_error__YI1Tz",phoneInput:"new-client-create_phoneInput__oIg7A",countrySelector:"new-client-create_countrySelector__fLpJG",headingInputs:"new-client-create_headingInputs__X8li4",dropdownSelect:"new-client-create_dropdownSelect__CZFIr",tempDelete:"new-client-create_tempDelete__q+CA0",tempAdd:"new-client-create_tempAdd__PhaaR"}},33074:(e,s,l)=>{l.d(s,{A:()=>T});var n=l(65043),a=l(61072),t=l(78602),i=l(14282),r=l(44541),o=l(96141),d=l(24858),c=l(17380),m=l(18403),u=l(28261),p=l(58387),h=l(54972),x=l(88060),g=l(28676),v=l(74532),j=l(72052),A=l(27932),f=l(93740),y=l(80899),b=l(20685),w=l(59638),N=l(88780),_=l(57189),S=l(27472),I=l(63882),C=l(70579);const $=y.Ik({name:y.Yj().required("Company name is required"),abn:y.Yj().nullable().transform((e=>""===e?null:e)).matches(/^\d{11}$/,"ABN must be an 11-digit number").notRequired(),email:y.Yj().nullable().transform((e=>""===e?null:e)).matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Invalid email address").notRequired(),payment_terms:y.ai().typeError("Enter a valid payment terms").required("Payment terms are required"),category:y.ai().typeError("Enter a valid category").required("Category is required"),contact_persons:y.YO().of(y.Ik({email:y.Yj().nullable().email("Invalid contact email format").test("is-valid","Contact email must be a valid email if provided",(e=>!e||y.Yj().email().isValidSync(e)))})),add_to_mailchimp:y.zM(),mailchimp_list_id:y.Yj().when("add_to_mailchimp",{is:!0,then:e=>e.required("Please select a mailing list"),otherwise:e=>e.notRequired()})}).required(),T=(0,n.forwardRef)(((e,s)=>{var l;let{photo:y,setPhoto:T,onSubmit:P,defaultValues:E,deleteAddress:R,deleteContact:L}=e;const{session:U}=(0,_.As)(),[F,B]=(0,n.useState)(!1),[q,G]=(0,n.useState)(!1),[k,D]=(0,n.useState)(0),[z,Y]=(0,n.useState)({type:null,index:null}),O=(0,u.I)({queryKey:["categories"],queryFn:w.Ql}),V=(0,u.I)({queryKey:["industries"],queryFn:w.OF}),H=(0,u.I)({queryKey:["mailchimp-lists"],queryFn:N.Yn,enabled:q&&(null===U||void 0===U?void 0:U.has_mailchimp)}),[K,M]=(0,n.useState)(""),[Z,J]=(0,n.useState)(""),[W,Q]=(0,n.useState)({}),X=(0,u.I)({queryKey:["countries"],queryFn:w.X6,enabled:!0}),ee=(0,u.I)({queryKey:["states",K],queryFn:()=>(0,w.nP)(K),enabled:!!K,retry:1}),se=(0,u.I)({queryKey:["cities",Z],queryFn:async()=>(0,w.i6)(Z),enabled:!!Z,keepPreviousData:!0});(0,n.useEffect)((()=>{Z&&(async e=>{if(e&&!W[e]){const s=await(0,w.i6)(e);Q((l=>({...l,[e]:s})))}})(Z)}),[Z]);const{control:le,register:ne,handleSubmit:ae,watch:te,formState:{errors:ie},setValue:re}=(0,d.mN)({resolver:(0,m.t)($),defaultValues:E}),{fields:oe,append:de,remove:ce}=(0,d.jz)({control:le,name:"contact_persons"}),{fields:me,append:ue,remove:pe}=(0,d.jz)({control:le,name:"addresses"}),he=te("email");return(0,n.useEffect)((()=>{var e;if(null!==E&&void 0!==E&&null!==(e=E.addresses)&&void 0!==e&&e.length&&k<E.addresses.length){const e=E.addresses[k],s=e.country,l=e.state;s!==K?M(s):l!==Z?J(l):D((e=>e+1))}}),[E,k,K,Z]),(0,n.useEffect)((()=>{var e;if(null!==O&&void 0!==O&&null!==(e=O.data)&&void 0!==e&&e.length&&!E.category){var s;let e=null===(s=O.data)||void 0===s?void 0:s.find((e=>"regular"===e.name.toLowerCase()));e.name&&re("category",e.id)}}),[null===O||void 0===O?void 0:O.data,E,re]),(0,C.jsxs)("form",{ref:s,onSubmit:ae(P),children:[(0,C.jsxs)(a.A,{className:(0,p.A)(b.A.bgGreay,"pt-0"),children:[(0,C.jsxs)(t.A,{sm:12,children:[(0,C.jsxs)("div",{className:(0,p.A)(b.A.fileUploadBox),onClick:()=>B(!0),children:[(0,C.jsx)("div",{className:(0,p.A)(b.A.uploadedImgBox,"rounded"),children:y?(0,C.jsx)("img",{src:(null===y||void 0===y?void 0:y.croppedImageBase64)||y,alt:"img"}):(0,C.jsx)(r.A,{size:32,color:"#667085"})}),(0,C.jsx)("p",{className:(0,p.A)("mb-0",b.A.uploadedText1),children:(0,C.jsx)("span",{className:(0,p.A)("mb-0",b.A.uploadedText2),children:"Click to upload"})}),(0,C.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]}),(0,C.jsx)(I.A,{show:F,setShow:B,setPhoto:T})]}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsxs)("label",{className:(0,p.A)(b.A.lable),children:["Company Name",(0,C.jsx)("span",{className:"required",children:"*"})]}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:ie.name&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne("name"),className:(0,p.A)(b.A.inputText,{[b.A.error]:ie.name}),placeholder:"Enter company name"})]}),ie.name&&(0,C.jsx)("p",{className:"error-message",children:ie.name.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Industry"}),(0,C.jsx)(d.xI,{name:"industry",control:le,render:e=>{var s;let{field:l}=e;return(0,C.jsx)(x.m,{...l,options:V&&(null===(s=V.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{l.onChange(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed",{[b.A.error]:ie.industry}),style:{height:"46px"},scrollHeight:"380px",value:l.value,loading:null===V||void 0===V?void 0:V.isFetching,placeholder:"Select Industry",filter:!0,filterInputAutoFocus:!0})}}),ie.industry&&(0,C.jsx)("p",{className:"error-message",children:null===(l=ie.industry)||void 0===l?void 0:l.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"ABN"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:ie.abn&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne("abn",{onChange:e=>{const s=e.target.value.replace(/\D/g,"");re("abn",s,{shouldValidate:!0})},onPaste:e=>{e.preventDefault();const s=e.clipboardData.getData("text").replace(/\D/g,"");re("abn",s,{shouldValidate:!0})}}),className:(0,p.A)(b.A.inputText,{[b.A.error]:ie.abn}),placeholder:"32 635 443 221"})]}),ie.abn&&(0,C.jsx)("p",{className:"error-message",children:ie.abn.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Phone number"}),(0,C.jsx)(d.xI,{name:"phone",control:le,render:e=>{let{field:s}=e;return(0,C.jsx)(c.LR,{defaultCountry:"au",value:"string"===typeof s.value?s.value:"",className:"phoneInput rounded",containerClass:b.A.countrySelector,onChange:s.onChange,style:{border:"1px solid "+(ie.phone?"red":"#dedede")}})}}),ie.phone&&(0,C.jsx)("p",{className:"error-message",children:ie.phone.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Email"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:ie.email&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne("email"),className:(0,p.A)(b.A.inputText,{[b.A.error]:ie.email}),placeholder:"example@email.com"})]}),ie.email&&(0,C.jsx)("p",{className:"error-message",children:ie.email.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Website"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:ie.website&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne("website"),className:(0,p.A)(b.A.inputText,{[b.A.error]:ie.website}),placeholder:"www.example.com"})]}),ie.website&&(0,C.jsx)("p",{className:"error-message",children:ie.website.message})]})})]}),(0,C.jsx)("h2",{className:(0,p.A)(b.A.headingInputs,"mt-4"),children:"Payment Terms"}),(0,C.jsxs)(a.A,{className:(0,p.A)(b.A.bgGreay),children:[(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsxs)("label",{className:(0,p.A)(b.A.lable),children:["Payment Terms",(0,C.jsx)("span",{className:"required",children:"*"})]}),(0,C.jsx)(d.xI,{name:"payment_terms",control:le,render:e=>{let{field:s}=e;return(0,C.jsx)(x.m,{...s,options:[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}]||0,onChange:e=>{s.onChange(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed",{[b.A.error]:ie.payment_terms}),style:{height:"46px"},value:s.value,scrollHeight:"380px",placeholder:"Select payment terms",filterInputAutoFocus:!0})}}),ie.payment_terms&&(0,C.jsx)("p",{className:"error-message",children:ie.payment_terms.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsxs)("label",{className:(0,p.A)(b.A.lable),children:["Customers Discount Category",(0,C.jsx)("span",{className:"required",children:"*"})]}),(0,C.jsx)(d.xI,{name:"category",control:le,render:e=>{var s;let{field:l}=e;return(0,C.jsx)(x.m,{...l,options:[...O&&(null===(s=O.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:`${e.name} - ${e.value}%`}))))||[]],onChange:e=>{l.onChange(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed",{[b.A.error]:ie.category}),style:{height:"46px"},value:l.value,loading:null===O||void 0===O?void 0:O.isFetching,placeholder:"Select a category",scrollHeight:"380px",filterInputAutoFocus:!0})}}),ie.category&&(0,C.jsx)("p",{className:"error-message",children:ie.category.message})]})})]}),(0,C.jsx)("h2",{className:(0,p.A)(b.A.headingInputs,"mt-4"),children:"Contact Person"}),(0,C.jsx)(a.A,{children:oe.map(((e,s)=>{var l,n,r,m,u,h,x,A,y,w,N,_,I,$,T,P,E,R,U,F,B,q,G,k,D,O,V,H,K,M,Z,J,W,Q,X,ee,se,ae,te,re;return(0,C.jsxs)("div",{children:[(0,C.jsx)("input",{type:"hidden",...ne(`contact_persons.${s}.is_main`),value:0===s}),(0,C.jsxs)(a.A,{className:(0,p.A)(b.A.bgGreay),children:[(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"First Name"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{style:{top:"40%"},children:(null===(l=ie.contact_persons)||void 0===l||null===(n=l[s])||void 0===n?void 0:n.firstname)&&(0,C.jsx)("img",{src:S.A,alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`contact_persons.${s}.firstname`),rows:5,cols:30,className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(r=ie.contact_persons)||void 0===r||null===(m=r[s])||void 0===m?void 0:m.firstname}),style:{resize:"none"},placeholder:"Jhon"})]}),(null===(u=ie.contact_persons)||void 0===u||null===(h=u[s])||void 0===h?void 0:h.firstname)&&(0,C.jsx)("p",{className:"error-message",children:null===(x=ie.contact_persons)||void 0===x||null===(A=x[s])||void 0===A||null===(y=A.firstname)||void 0===y?void 0:y.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Last Name"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{style:{top:"40%"},children:(null===(w=ie.contact_persons)||void 0===w||null===(N=w[s])||void 0===N?void 0:N.lastname)&&(0,C.jsx)("img",{src:S.A,alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`contact_persons.${s}.lastname`),rows:5,cols:30,className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(_=ie.contact_persons)||void 0===_||null===(I=_[s])||void 0===I?void 0:I.lastname}),style:{resize:"none"},placeholder:"Doe"})]}),(null===($=ie.contact_persons)||void 0===$||null===(T=$[s])||void 0===T?void 0:T.lastname)&&(0,C.jsx)("p",{className:"error-message",children:null===(P=ie.contact_persons)||void 0===P||null===(E=P[s])||void 0===E||null===(R=E.lastname)||void 0===R?void 0:R.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Email"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{style:{top:"40%"},children:(null===(U=ie.contact_persons)||void 0===U||null===(F=U[s])||void 0===F?void 0:F.email)&&(0,C.jsx)("img",{src:S.A,alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`contact_persons.${s}.email`),rows:5,cols:30,className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(B=ie.contact_persons)||void 0===B||null===(q=B[s])||void 0===q?void 0:q.email}),style:{resize:"none"},placeholder:"golden@harvest.com"})]}),(null===(G=ie.contact_persons)||void 0===G||null===(k=G[s])||void 0===k?void 0:k.email)&&(0,C.jsx)("p",{className:"error-message",children:null===(D=ie.contact_persons)||void 0===D||null===(O=D[s])||void 0===O||null===(V=O.email)||void 0===V?void 0:V.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Phone number"}),(0,C.jsx)(d.xI,{name:`contact_persons.${s}.phone`,control:le,render:e=>{var l,n;let{field:a}=e;return(0,C.jsx)(c.LR,{defaultCountry:"au",value:a.value||"",className:"phoneInput rounded",containerClass:b.A.countrySelector,onChange:e=>a.onChange(e),style:{border:"1px solid "+(null!==(l=ie.contact_persons)&&void 0!==l&&null!==(n=l[s])&&void 0!==n&&n.phone?"red":"#dedede")}})}}),(null===(H=ie.contact_persons)||void 0===H||null===(K=H[s])||void 0===K?void 0:K.phone)&&(0,C.jsx)("p",{className:"error-message",children:null===(M=ie.contact_persons)||void 0===M||null===(Z=M[s])||void 0===Z?void 0:Z.phone.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Position"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{style:{top:"40%"},children:(null===(J=ie.contact_persons)||void 0===J||null===(W=J[s])||void 0===W?void 0:W.position)&&(0,C.jsx)("img",{src:S.A,alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`contact_persons.${s}.position`),rows:5,cols:30,className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(Q=ie.contact_persons)||void 0===Q||null===(X=Q[s])||void 0===X?void 0:X.position}),style:{resize:"none"},placeholder:"Manager"})]}),(null===(ee=ie.contact_persons)||void 0===ee||null===(se=ee[s])||void 0===se?void 0:se.position)&&(0,C.jsx)("p",{className:"error-message",children:null===(ae=ie.contact_persons)||void 0===ae||null===(te=ae[s])||void 0===te||null===(re=te.position)||void 0===re?void 0:re.message})]})}),(0,C.jsx)(t.A,{sm:6})]}),(0,C.jsxs)(t.A,{sm:12,className:"d-flex justify-content-end gap-3 mb-4",children:[0!==s&&(0,C.jsxs)(i.A,{type:"button",className:(0,p.A)(b.A.tempDelete),onClick:()=>(async(e,s)=>{Y({type:"contact",index:e}),s&&await L(s),ce(e),Y({type:null,index:null})})(s,e.uniqeId),disabled:!("contact"!==(null===z||void 0===z?void 0:z.type)||z.index!==s),children:["Delete ","contact"===(null===z||void 0===z?void 0:z.type)&&z.index===s?(0,C.jsx)(f.p,{style:{width:"20px",height:"20px"}}):""]}),s===oe.length-1&&(0,C.jsxs)(i.A,{type:"button",className:(0,p.A)(b.A.tempAdd),onClick:()=>de({}),children:["Add New ",(0,C.jsx)(o.A,{size:24,color:"#106b99"})]})]})]},e.id)}))}),(0,C.jsx)("h2",{className:(0,p.A)(b.A.headingInputs,"mt-4"),children:"Locations"}),(0,C.jsx)(a.A,{children:me.map(((e,s)=>{var l,n,r,c,m,u,h,A,y,w,N,_,I,$,T,P,E,L,U,F,B,q,G,k,D,O,V,H,K,Q,ae,re,oe,de,ce,he,xe,ge,ve,je,Ae,fe;return(0,C.jsxs)("div",{children:[(0,C.jsx)("input",{type:"hidden",...ne(`addresses.${s}.is_main`),value:0===s}),(0,C.jsxs)(a.A,{className:(0,p.A)(b.A.bgGreay),children:[(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Location Name"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:(null===(l=ie.addresses)||void 0===l||null===(n=l[s])||void 0===n?void 0:n.title)&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`addresses.${s}.title`),className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(r=ie.addresses)||void 0===r||null===(c=r[s])||void 0===c?void 0:c.title}),placeholder:"Enter location name"})]}),(null===(m=ie.addresses)||void 0===m||null===(u=m[s])||void 0===u?void 0:u.title)&&(0,C.jsx)("p",{className:"error-message",children:null===(h=ie.addresses)||void 0===h||null===(A=h[s])||void 0===A||null===(y=A.title)||void 0===y?void 0:y.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Country"}),(0,C.jsx)(d.xI,{name:`addresses.${s}.country`,control:le,defaultValue:"",render:e=>{var s;let{field:l}=e;return(0,C.jsx)(x.m,{...l,options:X&&(null===(s=X.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{l.onChange(e.value),M(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:l.value,loading:null===X||void 0===X?void 0:X.isFetching,placeholder:"Select a country",scrollHeight:"380px",filterInputAutoFocus:!0})}}),(null===(w=ie.addresses)||void 0===w||null===(N=w[s])||void 0===N?void 0:N.country)&&(0,C.jsx)("p",{className:"error-message",children:null===(_=ie.addresses)||void 0===_||null===(I=_[s])||void 0===I||null===($=I.country)||void 0===$?void 0:$.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"State"}),(0,C.jsx)(d.xI,{name:`addresses.${s}.state`,control:le,defaultValue:"",render:e=>{var s;let{field:l}=e;return(0,C.jsx)(x.m,{...l,options:ee&&(null===(s=ee.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{l.onChange(e.value),J(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:l.value,loading:null===ee||void 0===ee?void 0:ee.isFetching,placeholder:"Select a state",scrollHeight:"380px",filter:!0,filterInputAutoFocus:!0})}}),(null===(T=ie.addresses)||void 0===T||null===(P=T[s])||void 0===P?void 0:P.state)&&(0,C.jsx)("p",{className:"error-message",children:null===(E=ie.addresses)||void 0===E||null===(L=E[s])||void 0===L||null===(U=L.state)||void 0===U?void 0:U.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"City/Suburb"}),(0,C.jsx)(d.xI,{name:`addresses.${s}.city`,control:le,defaultValue:"",render:e=>{var l;let{field:n}=e;const a=te(`addresses.${s}.state`);return(0,C.jsx)(x.m,{...n,options:(null===(l=W[a])||void 0===l?void 0:l.map((e=>({value:e.id,label:e.name}))))||[],onChange:e=>{n.onChange(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed"),style:{height:"46px"},value:n.value,loading:a===Z&&(null===se||void 0===se?void 0:se.isFetching),disabled:null===se||void 0===se?void 0:se.isFetching,placeholder:"Select a city",emptyMessage:a?"No cities found":"Select a state first",scrollHeight:"380px",filter:!0,filterInputAutoFocus:!0})}}),(null===(F=ie.addresses)||void 0===F||null===(B=F[s])||void 0===B?void 0:B.city)&&(0,C.jsx)("p",{className:"error-message",children:null===(q=ie.addresses)||void 0===q||null===(G=q[s])||void 0===G||null===(k=G.city)||void 0===k?void 0:k.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Street Address"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:(null===(D=ie.addresses)||void 0===D||null===(O=D[s])||void 0===O?void 0:O.address)&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`addresses.${s}.address`),className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(V=ie.addresses)||void 0===V||null===(H=V[s])||void 0===H?void 0:H.address}),placeholder:"Enter street address"})]}),(null===(K=ie.addresses)||void 0===K||null===(Q=K[s])||void 0===Q?void 0:Q.address)&&(0,C.jsx)("p",{className:"error-message",children:null===(ae=ie.addresses)||void 0===ae||null===(re=ae[s])||void 0===re||null===(oe=re.address)||void 0===oe?void 0:oe.message})]})}),(0,C.jsx)(t.A,{sm:6,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Postcode"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{children:(null===(de=ie.addresses)||void 0===de||null===(ce=de[s])||void 0===ce?void 0:ce.postcode)&&(0,C.jsx)("img",{src:S.A,className:"mb-3",alt:"error-icon"})}),(0,C.jsx)(j.S,{...ne(`addresses.${s}.postcode`),keyfilter:"int",className:(0,p.A)(b.A.inputText,{[b.A.error]:null===(he=ie.addresses)||void 0===he||null===(xe=he[s])||void 0===xe?void 0:xe.postcode}),placeholder:"Enter postcode"})]}),(null===(ge=ie.addresses)||void 0===ge||null===(ve=ge[s])||void 0===ve?void 0:ve.postcode)&&(0,C.jsx)("p",{className:"error-message",children:null===(je=ie.addresses)||void 0===je||null===(Ae=je[s])||void 0===Ae||null===(fe=Ae.postcode)||void 0===fe?void 0:fe.message})]})})]}),(0,C.jsxs)(t.A,{sm:12,className:"d-flex justify-content-end gap-3 mb-4",children:[0!==s&&(0,C.jsxs)(i.A,{type:"button",className:(0,p.A)(b.A.tempDelete),onClick:()=>(async(e,s)=>{Y({type:"address",index:e}),s&&await R(s),pe(e),Y({type:null,index:null})})(s,e.uniqeId),disabled:!("address"!==(null===z||void 0===z?void 0:z.type)||z.index!==s),children:["Delete ","address"===(null===z||void 0===z?void 0:z.type)&&z.index===s?(0,C.jsx)(f.p,{style:{width:"20px",height:"20px"}}):""]}),s===me.length-1&&(0,C.jsxs)(i.A,{type:"button",className:(0,p.A)(b.A.tempAdd),onClick:()=>ue({country:1}),children:["Add New ",(0,C.jsx)(o.A,{size:24,color:"#106b99"})]})]})]},e.id)}))}),(0,C.jsx)("h2",{className:(0,p.A)(b.A.headingInputs),children:"Client Description"}),(0,C.jsx)(a.A,{className:(0,p.A)(b.A.bgGreay),children:(0,C.jsx)(t.A,{sm:12,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,C.jsx)("label",{className:(0,p.A)(b.A.lable),children:"Description"}),(0,C.jsxs)(g.C,{children:[(0,C.jsx)(v.m,{style:{top:"75%"},children:ie.description&&(0,C.jsx)("img",{src:S.A,alt:"error-icon"})}),(0,C.jsx)(A.Z,{...ne("description"),rows:5,cols:30,className:(0,p.A)(b.A.inputText,{[b.A.error]:ie.description}),style:{resize:"none"},placeholder:"Enter a description..."})]}),ie.description&&(0,C.jsx)("p",{className:"error-message",children:ie.description.message})]})})}),(null===U||void 0===U?void 0:U.has_mailchimp)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("h2",{className:(0,p.A)(b.A.headingInputs),children:"Mailchimp Integration"}),(0,C.jsxs)(a.A,{className:(0,p.A)(b.A.bgGreay),children:[(0,C.jsxs)(t.A,{sm:12,children:[(0,C.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,C.jsx)(d.xI,{name:"add_to_mailchimp",control:le,render:e=>{let{field:s}=e;return(0,C.jsx)(h.S,{inputId:"add_to_mailchimp",checked:s.value||!1,onChange:e=>{s.onChange(e.checked),G(e.checked)},disabled:!he})}}),(0,C.jsx)("label",{htmlFor:"add_to_mailchimp",className:(0,p.A)(b.A.lable,"mb-0"),children:"Add to Mailchimp mailing list"})]}),!he&&(0,C.jsx)("p",{className:"text-muted",style:{fontSize:"12px",marginTop:"-8px",marginBottom:"12px"},children:"Please enter an email address to enable this option"})]}),q&&(0,C.jsx)(t.A,{sm:12,children:(0,C.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,C.jsxs)("label",{className:(0,p.A)(b.A.lable),children:["Mailing List",(0,C.jsx)("span",{className:"required",children:"*"})]}),(0,C.jsx)(d.xI,{name:"mailchimp_list_id",control:le,render:e=>{var s;let{field:l}=e;return(0,C.jsx)(x.m,{...l,options:Array.isArray(null===H||void 0===H||null===(s=H.data)||void 0===s?void 0:s.lists)?H.data.lists.map((e=>({value:e.id,label:e.name}))):[],onChange:e=>{l.onChange(e.value)},className:(0,p.A)(b.A.dropdownSelect,"dropdown-height-fixed",{[b.A.error]:ie.mailchimp_list_id}),style:{height:"46px"},value:l.value,loading:null===H||void 0===H?void 0:H.isFetching,placeholder:"Select a mailing list",scrollHeight:"380px",filterInputAutoFocus:!0,emptyMessage:null!==H&&void 0!==H&&H.isFetching?"Loading...":"No mailing lists found"})}}),ie.mailchimp_list_id&&(0,C.jsx)("p",{className:"error-message",children:ie.mailchimp_list_id.message})]})})]})]})]})}))},59638:(e,s,l)=>{l.d(s,{EZ:()=>i,F1:()=>j,Fl:()=>u,OF:()=>o,QK:()=>x,Ql:()=>r,X6:()=>d,Ye:()=>g,ab:()=>A,i6:()=>m,kB:()=>f,nP:()=>c,o6:()=>h,oO:()=>t,oo:()=>p,zZ:()=>v});var n=l(31342);const a="https://app.memate.com.au/api/v1",t=async e=>{const s=new URL(`${a}${`/clients/restore/${e}/`}`);return(0,n.f)(s.toString(),{method:"POST"})},i=async e=>{const s=new URL(`${a}${`/clients/${e}/`}`);return(0,n.f)(s.toString(),{method:"GET"})},r=async()=>{const e=new URL(`${a}/references/clients/categories/`);return(0,n.f)(e.toString(),{method:"GET"})},o=async()=>{const e=new URL(`${a}/references/clients/industries/`);return(0,n.f)(e.toString(),{method:"GET"})},d=async()=>{const e=new URL(`${a}/references/countries/`),s=await(0,n.f)(e.toString(),{method:"GET"},!1),l=[1];return(null===s||void 0===s?void 0:s.filter((e=>l.includes(e.id))))||[]},c=async e=>{const s=new URL(`${a}${`/references/states/${e}/`}`);return(0,n.f)(s.toString(),{method:"GET"},!1)},m=async e=>{const s=new URL(`${a}${`/references/cities/${e}/`}`);return(0,n.f)(s.toString(),{method:"GET"},!1)},u=async()=>{const e=new URL(`${a}/references/desktop-users/`);return(0,n.f)(e.toString(),{method:"GET"})},p=async function(e,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;const r=(e-1)*s,o=new URL(`${a}/clients/`);return o.searchParams.append("limit",s),o.searchParams.append("offset",r),l&&o.searchParams.append("search",l),t&&o.searchParams.append("ordering",t),i&&o.searchParams.append("deleted",1),(0,n.f)(o.toString(),{method:"GET"})},h=async function(e,s,l){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const r=(s-1)*l,o=new URL(`${a}${`/clients/${e}/orders/`}`);return o.searchParams.append("limit",l),o.searchParams.append("offset",r),t&&o.searchParams.append("number",t),i&&o.searchParams.append("ordering",i),(0,n.f)(o.toString(),{method:"GET"})},x=async e=>{const s=new URL(`${a}${`/clients/address/${e}/main`}`);return(0,n.f)(s.toString(),{method:"PUT"})},g=async e=>{const s=new URL(`${a}${`/clients/contact-persons/${e}/main`}`);return(0,n.f)(s.toString(),{method:"PUT"})},v=async e=>{const s=new URL(`${a}${`/clients/delete/${e}/`}`);return(0,n.f)(s.toString(),{method:"DELETE"})},j=async e=>{const s=new URL(`${a}${`/clients/contact-persons/${e}/delete/`}`);return(0,n.f)(s.toString(),{method:"DELETE"})},A=async e=>{const s=new URL(`${a}${`/clients/address/${e}/delete/`}`);return(0,n.f)(s.toString(),{method:"DELETE"})},f=async e=>{const s={method:"PUT",body:{unique_id:e}},l=new URL(`${a}/projects/back/`);return(0,n.f)(l.toString(),s)}},63882:(e,s,l)=>{l.d(s,{A:()=>h});var n=l(65043),a=l(32952),t=l(14282),i=l(76163),r=l(69956),o=l(89488),d=l(55683),c=l(58387),m=l(29853);const u={title:"file-uploader_title__+HTTy",previewSection:"file-uploader_previewSection__mnNRf",previewBox:"file-uploader_previewBox__j6psm",previewBoxImg1:"file-uploader_previewBoxImg1__SR-1w",rectangle:"file-uploader_rectangle__dFhi8",previewBoxImg2:"file-uploader_previewBoxImg2__zYCKK",previewBoxImg3:"file-uploader_previewBoxImg3__YNTWI",previewBoxImg4:"file-uploader_previewBoxImg4__cRl+e",previewBoxImg5:"file-uploader_previewBoxImg5__GzHFj",previewActions:"file-uploader_previewActions__UO1dp",label:"file-uploader_label__Udhfq",label2:"file-uploader_label2__cY-JF"};var p=l(70579);const h=e=>{let{show:s,setShow:l,setPhoto:h,additionalDesign:x,shape:g="rect",aspect:v=1}=e;const[j,A]=(0,n.useState)([]),[f,y]=(0,n.useState)({x:0,y:0}),[b,w]=(0,n.useState)(1),[N,_]=(0,n.useState)(0),[S,I]=(0,n.useState)(null),[C,$]=(0,n.useState)({}),T=(0,n.useCallback)(((e,s)=>{I(s)}),[]),P=(0,n.useCallback)((async()=>{if(!j.length||!S)return;const e=document.createElement("canvas"),s=e.getContext("2d"),l=new Image;l.src=j[0].preview,await new Promise((e=>l.onload=e)),e.width=S.width,e.height=S.height,s.translate(e.width/2,e.height/2),s.rotate(N*Math.PI/180),s.translate(-e.width/2,-e.height/2),s.drawImage(l,S.x,S.y,S.width,S.height,0,0,S.width,S.height);return e.toDataURL("image/jpeg")}),[j,S,N]),E=async()=>{const e=await P();e&&$({img2:e,img3:e,img4:e,img5:e})};(0,n.useEffect)((()=>{E()}),[b,f,N,j,S]);const{getRootProps:R,getInputProps:L}=(0,o.VB)({maxFiles:1,accept:{"image/*":[]},onDrop:e=>{A(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});return(0,p.jsxs)(a.A,{style:{zIndex:1111},show:s,centered:!0,onHide:()=>l(!1),onShow:E,children:[(0,p.jsx)(a.A.Header,{closeButton:!0,children:(0,p.jsx)(a.A.Title,{children:(0,p.jsx)("span",{className:`${u.title}`,children:"Edit Photo"})})}),(0,p.jsxs)(a.A.Body,{children:[x,(0,p.jsxs)("div",{className:`${u.previewSection}`,children:[(0,p.jsxs)("div",{className:`${u.previewBox}`,children:[(0,p.jsx)("div",{className:(0,c.A)(u.previewBoxImg1,"round"===g?"rounded-circle":"",1===v?u.square:u.rectangle),children:(0,p.jsx)(d.Ay,{image:j.length>0?j[0].preview:null,crop:f,zoom:b,cropShape:g,rotation:N,onCropChange:y,onZoomChange:w,onCropComplete:T,aspect:v,restrictPosition:!1,style:{containerStyle:{width:"100%",height:"100%",position:"relative"},cropAreaStyle:{width:"100%",height:"100%"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}})}),(0,p.jsx)("div",{className:(0,c.A)(u.previewBoxImg2,"round"===g?"rounded-circle":"",1===v?u.square:u.rectangle),children:C.img2&&(0,p.jsx)("img",{src:C.img2,alt:"Preview 2",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,p.jsx)("div",{className:(0,c.A)(u.previewBoxImg3,"round"===g?"rounded-circle":"",1===v?u.square:u.rectangle),children:C.img3&&(0,p.jsx)("img",{src:C.img3,alt:"Preview 3",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,p.jsx)("div",{className:(0,c.A)(u.previewBoxImg4,"round"===g?"rounded-circle":"",1===v?u.square:u.rectangle),children:C.img4&&(0,p.jsx)("img",{src:C.img4,alt:"Preview 4",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,p.jsx)("div",{className:(0,c.A)(u.previewBoxImg5,"round"===g?"rounded-circle":"",1===v?u.square:u.rectangle),children:C.img5&&(0,p.jsx)("img",{src:C.img5,alt:"Preview 5",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),(0,p.jsxs)("div",{className:`${u.previewActions}`,children:[(0,p.jsxs)(m.A.Group,{children:[(0,p.jsx)(m.A.Label,{className:`${u.label}`,children:"Zoom"}),(0,p.jsx)(m.A.Range,{value:b,min:1,max:3,step:.1,className:"custom-range",onChange:e=>w(e.target.value)})]}),(0,p.jsx)("div",{className:"d-flex align-item-center pt-4 ms-4",style:{gap:"8px"},children:(0,p.jsxs)(t.A,{className:"text-button",onClick:()=>{_((e=>(e+90)%360))},children:[(0,p.jsx)(i.A,{color:"#106B99",size:24}),"Rotate"]})})]})]}),(0,p.jsxs)("div",{...R({className:"dropzone d-flex justify-content-center align-items-center flex-column cursor-pointer"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,p.jsx)("input",{...L()}),(0,p.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,p.jsx)(r.A,{})}),(0,p.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,p.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,p.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})]}),(0,p.jsxs)(a.A.Footer,{className:"d-flex justify-content-end",children:[(0,p.jsx)(t.A,{className:"outline-button",onClick:e=>{e.stopPropagation(),A([]),$({}),h(null),l(!1)},children:"Cancel"}),(0,p.jsx)(t.A,{className:"solid-button",onClick:async()=>{const e=await P(),s=function(e,s){const l=atob(e.split(",")[1]),n=new ArrayBuffer(l.length),a=new Uint8Array(n);for(let t=0;t<l.length;t++)a[t]=l.charCodeAt(t);return new Blob([n],{type:s})}(e,"image/jpeg");h({croppedImageBase64:e,croppedImageBlob:s}),l(!1)},children:"Save Photo"})]})]})}},88780:(e,s,l)=>{l.d(s,{EG:()=>u,KQ:()=>h,M4:()=>m,Nz:()=>d,RA:()=>i,Yn:()=>j,ZR:()=>o,ZW:()=>v,cd:()=>A,cx:()=>r,o5:()=>c,oI:()=>g,qU:()=>x,sp:()=>p,uu:()=>f,x2:()=>t});var n=l(31342);const a="https://app.memate.com.au/api/v1",t=async()=>{const e=new URL(`${a}/settings/integrations/stripe/`);return(0,n.f)(e.toString(),{method:"GET"})},i=async e=>{const s={method:"PUT",body:e},l=new URL(`${a}/settings/integrations/stripe/`);return(0,n.f)(l.toString(),s)},r=async e=>{const s={method:"DELETE",body:e},l=new URL(`${a}/settings/integrations/stripe/disconnect/`);return(0,n.f)(l.toString(),s)},o=async()=>{const e=new URL(`${a}/settings/integrations/google/review/`);return(0,n.f)(e.toString(),{method:"GET"})},d=async e=>{const s={method:"PUT",body:e},l=new URL(`${a}/settings/integrations/google/review/`);return(0,n.f)(l.toString(),s)},c=async()=>{const e=new URL(`${a}/settings/integrations/twilio/`);return(0,n.f)(e.toString(),{method:"GET"})},m=async e=>{const s={method:"PUT",body:e},l=new URL(`${a}/settings/integrations/twilio/`);return(0,n.f)(l.toString(),s)},u=async()=>{const e=new URL(`${a}/references/outgoing-email/`);return(0,n.f)(e.toString(),{method:"GET"})},p=async e=>{const s={method:"PUT",body:e},l=new URL(`${a}/references/outgoing-email/`);return(0,n.f)(l.toString(),s)},h=async()=>{const e=new URL(`${a}/xero/status/`);return(0,n.f)(e.toString(),{method:"GET"})},x=async()=>{const e=new URL(`${a}/xero/disconnect/`);return(0,n.f)(e.toString(),{method:"POST"})},g=async e=>{const s={method:"PUT",body:e},l=new URL(`${a}/settings/integrations/mailchimp/`);return(0,n.f)(l.toString(),s)},v=async()=>{const e=new URL(`${a}/settings/integrations/mailchimp/disconnect/`);return(0,n.f)(e.toString(),{method:"DELETE"})},j=async()=>{const e=new URL(`${a}/settings/integrations/mailchimp/get-lists/`);return(0,n.f)(e.toString(),{method:"GET"})},A=async e=>{const s={method:"POST",body:e},l=new URL(`${a}/settings/integrations/mailchimp/add-users/`);return(0,n.f)(l.toString(),s)},f=async(e,s)=>{const l={method:"POST",body:e},t=new URL(`${a}${`/settings/integrations/mailchimp/add-users/${s}/`}`);return(0,n.f)(t.toString(),l)}}}]);
//# sourceMappingURL=3074.82991dde.chunk.js.map