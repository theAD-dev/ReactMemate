"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[2852,6731],{14834:(e,t,s)=>{function l(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=parseFloat(e);return isNaN(s)?"0.00":t&&Math.abs(s)>=1e3?new Intl.NumberFormat("en-AU",{notation:"compact",compactDisplay:"short",minimumFractionDigits:2,maximumFractionDigits:2}).format(s):new Intl.NumberFormat("en-AU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}s.d(t,{m:()=>l})},20793:(e,t,s)=>{e.exports=s.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},54967:(e,t,s)=>{s.d(t,{Ab:()=>r,dg:()=>d,fr:()=>c,Ay:()=>p});var l=s(65043),a=s(44541),o=s(95192);const i="image-avatar_clientImg__-nnRU";var n=s(70579);const r=e=>{let{has_photo:t,photo:s,is_business:i,size:r}=e;const[d,c]=(0,l.useState)(!1),p=i?a.A:o.A;return(0,n.jsx)(n.Fragment,{children:t&&s&&!d?(0,n.jsx)("img",{src:s,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):(0,n.jsx)(p,{color:"#667085",size:r})})},d=e=>{var t,s,a;let{has_photo:o,photo:i,name:r}=e;const[d,c]=(0,l.useState)(!1),p=r&&(null===r||void 0===r||null===(t=r.split(" "))||void 0===t||null===(s=t.map((e=>e[0])))||void 0===s||null===(a=s.join(""))||void 0===a?void 0:a.toUpperCase())||"";return(0,n.jsx)(n.Fragment,{children:o&&i&&!d?(0,n.jsx)("img",{src:i,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):p})},c=e=>{let{name:t,size:s=14}=e;const l=t.split(" ").map((e=>e[0])).join("").toUpperCase();return(0,n.jsx)("span",{style:{fontSize:`${s}px`},children:l})},p=e=>{let{has_photo:t,photo:s,is_business:r}=e;const[d,c]=(0,l.useState)(!1),p=r?a.A:o.A;return(0,n.jsx)("div",{className:`d-flex justify-content-center align-items-center ${i} ${r?"":"rounded-circle"}`,style:{overflow:"hidden"},children:t&&s&&!d?(0,n.jsx)("img",{src:s,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):(0,n.jsx)(p,{color:"#667085"})})}},83800:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_e});var l=s(65043),a=s(39759),o=s(64416),i=s(88166),n=s(49367),r=s(28261),d=s(58387),c=s(93740),p=s(27498),h=s(35475),u=s(72018),m=s(9642),x=s(64824),v=s(56328);const C={filterBox:"approval_filterBox__ystSi",total:"approval_total__t03q9",tabButton:"approval_tabButton__GxZip",activeReviewApprove:"approval_activeReviewApprove__D9v3k",activeApproved:"approval_activeApproved__SmaXq",totalCount:"approval_totalCount__hTTBc",shadowRight:"approval_shadowRight__X9zTG",payment:"approval_payment__YwghB",paymentHours:"approval_paymentHours__0t+W3",paymentFix:"approval_paymentFix__CXsuw",paymentTracker:"approval_paymentTracker__Zwjd2",time:"approval_time__EPrle",frame:"approval_frame__3wAOl",clientImg:"approval_clientImg__UHBLY",clientName:"approval_clientName__lw-Sd",inProgress:"approval_inProgress__WFpNd",approved:"approval_approved__oWI1u",defaultStatus:"approval_defaultStatus__sa3+W",finished:"approval_finished__tAhe6",linkToProjectCard:"approval_linkToProjectCard__1id7H",finishedAction:"approval_finishedAction__PNOct",assign:"approval_assign__EvOLi",assignAction:"approval_assignAction__ENiFC",shadowLeft:"approval_shadowLeft__Slbva",yearDropdown:"approval_yearDropdown__dYRYk",clientPhoto:"approval_clientPhoto__T0lPw",workerPhoto:"approval_workerPhoto__riwim",button:"approval_button__2omTf",type:"approval_type__oLNBi",shift:"approval_shift__ISvRP",fix:"approval_fix__NY-RK",hours:"approval_hours__xerN+",timeFrame:"approval_timeFrame__qEi71",timeTracker:"approval_timeTracker__kczU9",timeFrame2:"approval_timeFrame2__cKwrO",totalStyle:"approval_totalStyle__GsyY9",verticalTop:"approval_verticalTop__QfRqM"};var j=s(31342);const g="https://app.memate.com.au/api/v1",f=async()=>{const e=new URL(`${g}/jobs/to-approve/`);return(0,j.f)(e.toString(),{method:"GET"})};var b=s(48417),_=s(91352),y=s(14834),w=s(27734),N=s(54967),A=s(14282),k=s(13846),L=s(61072),T=s(78602),S=s(33817),B=s(56741),F=s(87677),D=s(9634),M=s(56682),R=s(51038),I=s(34062),$=s(35842),H=s(58753),Z=s(80955),z=s(8242),E=s(80718),W=s(97950),P=s(99419),U=s(12023),V=s(76036),J=s(13318),Y=s(73216),q=s(47097),O=s(80228),G=s.n(O),K=s(54972),X=s(55797),Q=s(79255),ee=s(27932),te=s(63263),se=s(20288),le=s(42104);const ae={heading:"approve-job_heading__NCGqc",viewBox:"approve-job_viewBox__ZnofC",border:"approve-job_border__pYPi2",borderBottom:"approve-job_borderBottom__73j1d",cardBody:"approve-job_cardBody__igMLE",jobDetailHeading:"approve-job_jobDetailHeading__RtqsC",customLabel:"approve-job_customLabel__5r9ok",text:"approve-job_text__VC0CF",plannedTable:"approve-job_plannedTable__QV7Mr",whiteTr:"approve-job_whiteTr__p+JS6",active1:"approve-job_active1__LwXX9",nonActive:"approve-job_nonActive__R5QLG",active0:"approve-job_active0__qKSoS",borderRightNone:"approve-job_borderRightNone__kqdzx",active2:"approve-job_active2__6XFPc",active3:"approve-job_active3__q5Ndq",plannedActive:"approve-job_plannedActive__Prq8U",rightColumn:"approve-job_rightColumn__uFMTx",leftColumn:"approve-job_leftColumn__NiXdP",lastRow:"approve-job_lastRow__0-xNd",fixRateBox:"approve-job_fixRateBox__53ez4",shiftBox:"approve-job_shiftBox__vzGQP",clockIcon:"approve-job_clockIcon__RE0Ne",moneyBox:"approve-job_moneyBox__l1MqE",bonusBox:"approve-job_bonusBox__kyT4P",deductionBox:"approve-job_deductionBox__xR-DE",InputTextarea:"approve-job_InputTextarea__KagCa",activeOutlineButton:"approve-job_activeOutlineButton__Gc88x",amountRow:"approve-job_amountRow__HNjds",dollar:"approve-job_dollar__cnrmS",helpIcon:"approve-job_helpIcon__BuOoR",buttonGroup:"approve-job_buttonGroup__zIyky",iconButton:"approve-job_iconButton__uf9jA",amountInputBox:"approve-job_amountInputBox__BQBK5",bonusInputBox:"approve-job_bonusInputBox__WGXb5",inputText:"approve-job_inputText__Dsfys",deductionInputBox:"approve-job_deductionInputBox__QdevW",feedbackLabel:"approve-job_feedbackLabel__uWw4+",chooseUserBox:"approve-job_chooseUserBox__2+6Kj",type:"approve-job_type__uk5tS",shift:"approve-job_shift__oX9uY",fix:"approve-job_fix__LylFK",hours:"approve-job_hours__MxhR2",timeFrame:"approve-job_timeFrame__t0xYc",timeTracker:"approve-job_timeTracker__RP34W",timeFrame2:"approve-job_timeFrame2__E7+WZ",historyTitle:"approve-job_historyTitle__dFOB2",historySubtitle:"approve-job_historySubtitle__AxJga",customToast:"approve-job_customToast__umipg",toastIcon:"approve-job_toastIcon__OysWT",outerToastIcon:"approve-job_outerToastIcon__rg2B8",toastTitle:"approve-job_toastTitle__t5jft",toastMessage:"approve-job_toastMessage__BUa2S",timeTrackingModal:"approve-job_timeTrackingModal__3h0Vf",timeTrackingHeader:"approve-job_timeTrackingHeader__nnJrI",timeTrackingCloseButton:"approve-job_timeTrackingCloseButton__eKrRX",timeTrackingTableWrapper:"approve-job_timeTrackingTableWrapper__i-OCL",timeTrackingContainer:"approve-job_timeTrackingContainer__7dGJp",timeTrackingHeaderRow:"approve-job_timeTrackingHeaderRow__RDW32",timeTrackingDataRows:"approve-job_timeTrackingDataRows__6jocz",timeTrackingRow:"approve-job_timeTrackingRow__VgUR5",timeTrackingEmptyRow:"approve-job_timeTrackingEmptyRow__pXDEK",timeTrackingCell:"approve-job_timeTrackingCell__LMYCN",timeTrackingCellAction:"approve-job_timeTrackingCellAction__c5jei",calendarButton:"approve-job_calendarButton__tn7PU",dateLabel:"approve-job_dateLabel__mIlMi",relativeContainer:"approve-job_relativeContainer__nqK-U",calendarDropdown:"approve-job_calendarDropdown__k+6cT",calendarPortal:"approve-job_calendarPortal__piiYh",calendarInline:"approve-job_calendarInline__Jbg-H",timeInput:"approve-job_timeInput__SA5Db",dayTotalPlaceholder:"approve-job_dayTotalPlaceholder__5VJDz",dayTotalCell:"approve-job_dayTotalCell__tI2le",dateCell:"approve-job_dateCell__py-+A",timeCell:"approve-job_timeCell__g-1JJ",actionButton:"approve-job_actionButton__QBFiM",deleteButton:"approve-job_deleteButton__h8szP",addButton:"approve-job_addButton__6f0Ki",totalHoursRow:"approve-job_totalHoursRow__YUo0X",totalHoursLabel:"approve-job_totalHoursLabel__UMNfr",loadingContainer:"approve-job_loadingContainer__8Owie",calendarInputWrapper:"approve-job_calendarInputWrapper__IyJHr",calendarIconButton:"approve-job_calendarIconButton__gKrI8",addEntryFooter:"approve-job_addEntryFooter__RF-WF",addEntryButton:"approve-job_addEntryButton__MpFWU",dateLabelClickable:"approve-job_dateLabelClickable__Si8bM",saveButton:"approve-job_saveButton__bl-2S"};var oe=s(38391),ie=s(57189),ne=s(13507),re=s(58027),de=s(32140),ce=s(46229),pe=(s(66433),s(34558)),he=s(70579);delete G().Icon.Default.prototype._getIconUrl,G().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const ue=e=>{let{jobId:t,variation:s,reason:a,isBonus:o,value:i,planned:n,actual:r,selectedColumn:p,refetch:h,resetAndClose:u,nextJobId:m,handleNextJob:x,refetchApprovedTotal:C}=e;const[j,g]=(0,l.useState)(!1),[f,b]=(0,l.useState)(null),[_,y]=(0,l.useState)(null),[w,N]=(0,l.useState)(null),[k,L]=(0,l.useState)(!1),T=(0,q.n)({mutationFn:e=>(0,oe.AO)(t,e),onSuccess:()=>{v.oR.success("Job approved successfully."),h(),C(),u(),g(!1),b(null),y(null),N(null),L(!1)},onError:e=>{console.error("Error approving job:",e),v.oR.error("Failed to approve job. Please try again.")}});return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,he.jsx)(A.A,{type:"button",onClick:()=>g(!0),className:"info-button",style:{minWidth:"75px"},children:"Approve"}),(0,he.jsx)(A.A,{type:"button",disabled:null===m||(null===T||void 0===T?void 0:T.isPending),onClick:()=>{L(!0),g(!0)},className:"solid-button",style:{minWidth:"75px"},children:"Approve & See Next"})]}),(0,he.jsxs)(X.l,{header:"Approve & Rate",visible:j,style:{width:"512px"},headerClassName:"border-bottom",headerStyle:{fontSize:"22px"},onHide:()=>g(!1),children:[(0,he.jsxs)("div",{className:"p-4",children:[(0,he.jsxs)("div",{className:"mb-4 text-center",children:[(0,he.jsx)("h5",{className:ae.feedbackLabel,children:"Quality"}),(0,he.jsx)("div",{className:"d-flex align-items-center justify-content-center gap-2",children:(0,he.jsx)(te.G,{value:f,size:40,onChange:e=>b(e.value),cancel:!1})})]}),(0,he.jsxs)("div",{className:"mb-4 text-center",children:[(0,he.jsx)("h5",{className:ae.feedbackLabel,children:"Speed"}),(0,he.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-4",children:[0!==_?(0,he.jsx)(A.A,{className:"px-2 py-2 rounded-circle bg-transparent border-0",onClick:()=>y(0),children:(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"27",viewBox:"0 0 26 27",fill:"none",children:[(0,he.jsx)("path",{d:"M5.33345 11.1301C6.70129 9.70661 8.31614 8.84008 10.1792 8.78564V11.1939L6.68545 12.5877L5.33345 11.1301Z",fill:"#98A2B3"}),(0,he.jsx)("path",{d:"M19.5729 5.74967C19.0329 5.74967 18.5951 5.2946 18.5951 4.73323C18.5951 4.17187 19.0329 3.7168 19.5729 3.7168C20.113 3.7168 20.5508 4.17187 20.5508 4.73323C20.5508 5.2946 20.113 5.74967 19.5729 5.74967Z",fill:"#98A2B3"}),(0,he.jsx)("path",{d:"M23.6982 5.07007L23.4228 4.93479L23.3196 4.61426L23.5946 4.74954L23.6982 5.07007Z",fill:"#98A2B3"}),(0,he.jsx)("path",{d:"M1.68146 17.4966C1.8464 17.3443 2.12346 17.1899 2.39809 17.1119C2.81084 14.9503 3.69849 13.0401 4.91237 11.5975L6.38868 13.1835L5.67043 17.025C5.85568 17.0392 6.03646 17.0567 6.20546 17.0741L6.84165 13.1859L10.4589 11.6576L14.0778 13.1859L14.714 17.0782C14.8922 17.0586 15.071 17.0456 15.2502 17.0392L14.5283 13.1835L15.39 12.2597C15.3737 12.1028 15.3583 11.9611 15.3489 11.8997C15.3087 11.7661 15.273 11.6381 15.2356 11.5069L14.2326 12.5875L10.7319 11.1908V8.78582C12.3256 8.83213 13.741 9.47644 14.974 10.5514C14.0327 6.88375 14.1277 4.36825 15.2669 3.07232C15.9973 2.24113 17.2786 1.78369 18.8744 1.78369C21.1965 1.78369 24.117 2.81028 24.9551 4.71235C25.2265 5.32863 25.4995 6.58029 24.2824 8.04685L23.8846 8.52582L23.7518 8.45188C23.6612 9.78641 22.9312 11.2343 20.1918 11.2343C20.0314 11.2343 19.9863 11.2834 19.9619 11.3107C19.5841 11.7242 19.6637 13.3257 19.7222 14.4953C19.8055 16.1645 19.8843 17.7408 19.1323 18.5643C19.0446 18.6605 18.9459 18.7393 18.8415 18.8092C18.7395 19.3215 18.514 19.7485 18.1504 20.1031C18.4653 20.9924 18.7001 21.9292 18.7663 22.7251C19.0507 22.9412 19.4033 23.7005 19.4033 24.9826C19.4033 25.4404 17.3968 25.4778 17.11 25.0342C16.9504 25.0488 16.7797 25.0569 16.5933 25.0569C15.3156 25.0569 13.8129 24.7267 13.7495 24.712L13.3628 24.6263L13.4595 24.2278C13.5342 23.9219 13.5744 23.5839 13.5935 23.2321C12.6636 23.2178 11.5944 23.0143 11.5944 23.0143C11.7166 22.5813 11.7317 22.0686 11.6943 21.5543C10.8574 21.5722 10.0202 21.5717 9.18327 21.5526C9.35349 21.9845 9.40143 22.3741 9.22065 22.6003C8.81805 23.1013 6.76243 23.2341 6.76243 23.2341C6.78234 22.9798 6.75105 22.7048 6.69418 22.4285L6.68077 22.4517C6.34277 22.9639 5.95318 23.3938 5.56074 23.7062C5.50102 24.0515 5.34543 24.4927 5.03749 24.9883C4.85509 25.2832 3.60059 24.3265 3.48399 23.8459C2.6589 23.1427 1.80293 21.7078 1.40034 20.9814L1.12815 20.4903L1.66562 20.3928C2.06699 20.3201 2.41312 20.199 2.70196 20.0324C2.36802 19.6806 2.16002 19.2626 2.06862 18.7625C1.9764 18.8685 1.8854 18.9827 1.79846 19.1123C1.32965 19.8123 0.9429 20.6142 0.834024 20.2266C0.724337 19.8391 1.04243 18.0869 1.68146 17.4966ZM3.3024 19.5161C3.33968 19.4701 3.37492 19.4226 3.40802 19.3735C3.59896 19.0786 3.69362 18.7576 3.73749 18.4663H2.79743C2.85024 18.8673 3.00137 19.2175 3.3024 19.5161ZM18.787 17.6742C19.5609 15.8359 17.8786 10.4413 20.1918 10.4413C22.4282 10.4413 22.9994 9.40819 22.9994 8.14638C22.9994 8.14638 22.8056 8.23738 22.4449 8.23738C21.8676 8.23738 20.863 8.0046 19.5414 6.79153C19.6304 6.78959 19.7194 6.78864 19.8083 6.78869C22.3653 6.78869 23.7055 7.52888 23.7055 7.52888C26.0816 4.66563 22.1171 2.57588 18.8744 2.57588C17.6109 2.57588 16.4568 2.89316 15.8307 3.60613C14.3284 5.31522 15.4907 9.72263 16.0871 11.695C16.0875 11.6966 16.0879 11.7003 16.0887 11.7019C16.6688 12.4384 17.1754 13.5365 17.9493 13.7953C18.6542 14.0313 18.4799 15.9996 16.8963 16.8332C16.9951 17.1558 17.106 17.4418 17.2299 17.6742H18.787ZM16.5937 24.2635C16.9508 24.2635 17.2018 24.2347 17.3842 24.1961C17.5651 23.8375 17.7796 23.4969 18.0249 23.1788C18.0379 21.4645 16.885 18.6776 16.1436 17.8403C16.0237 17.8322 15.8312 17.8224 15.602 17.8224C14.7188 17.8224 14.0371 17.9602 13.6788 18.2043C13.9128 19.066 14.6152 21.9219 14.2809 24.0104C14.7972 24.1071 15.7617 24.2635 16.5937 24.2635ZM13.4229 20.6824C13.3632 20.3002 13.2953 19.9374 13.2279 19.6136C13.1921 19.7172 13.1523 19.8196 13.1056 19.9187C12.9671 20.199 12.7887 20.4537 12.5742 20.6581C12.5458 20.6853 12.5153 20.7105 12.4861 20.7361C12.7986 20.7229 13.1109 20.705 13.4229 20.6824ZM8.74452 20.747C9.31675 20.7649 9.88923 20.7736 10.4617 20.773C11.0813 20.773 11.6504 20.7641 12.1777 20.747C12.2554 20.6545 12.3302 20.5597 12.402 20.4627C12.5675 20.2382 12.7118 19.9988 12.833 19.7477C12.9426 19.521 13.0322 19.2851 13.1007 19.0428C13.0447 18.8064 12.9955 18.6114 12.9569 18.4668H7.68706C7.71712 18.6321 7.75124 18.7938 7.79268 18.9502C7.86658 19.2247 7.966 19.4917 8.08965 19.7477C8.21117 19.9988 8.3556 20.2381 8.52109 20.4627C8.59137 20.5598 8.66774 20.6532 8.74452 20.747ZM8.43699 20.7361C8.40774 20.7105 8.37768 20.6853 8.34883 20.6581C8.13 20.4443 7.95006 20.1941 7.81705 19.9187C7.76505 19.8078 7.72118 19.692 7.68259 19.5754C7.6513 19.9467 7.58996 20.3172 7.4884 20.6812C7.80428 20.7047 8.12052 20.723 8.43699 20.7361ZM4.07062 23.334C4.53862 23.1 4.96477 22.9822 5.2268 22.9611C5.5433 22.6795 5.82103 22.3571 6.05271 22.0023C6.44474 21.4076 7.27715 19.8557 6.81402 17.9451C6.38746 17.8874 5.48437 17.7782 4.77831 17.7782C4.68812 17.7782 4.60443 17.7802 4.52765 17.7834C4.55609 18.2705 4.51302 19.0818 4.04584 19.8082C3.66599 20.3989 3.08952 20.8137 2.32659 21.0468C2.95952 22.1076 3.65218 23.0115 4.07062 23.334Z",fill:"#98A2B3"})]})}):(0,he.jsx)(A.A,{className:"info-button px-2 py-2",onClick:()=>y(null),children:(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"27",viewBox:"0 0 26 27",fill:"none",children:[(0,he.jsx)("path",{d:"M5.33345 11.1301C6.70129 9.70661 8.31614 8.84008 10.1792 8.78564V11.1939L6.68545 12.5877L5.33345 11.1301Z",fill:"#98A2B3"}),(0,he.jsx)("path",{d:"M19.5729 5.74967C19.0329 5.74967 18.5951 5.2946 18.5951 4.73323C18.5951 4.17187 19.0329 3.7168 19.5729 3.7168C20.113 3.7168 20.5508 4.17187 20.5508 4.73323C20.5508 5.2946 20.113 5.74967 19.5729 5.74967Z",fill:"#98A2B3"}),(0,he.jsx)("path",{d:"M23.6982 5.07007L23.4228 4.93479L23.3196 4.61426L23.5946 4.74954L23.6982 5.07007Z",fill:"#98A2B3"}),(0,he.jsx)("path",{d:"M1.68146 17.4966C1.8464 17.3443 2.12346 17.1899 2.39809 17.1119C2.81084 14.9503 3.69849 13.0401 4.91237 11.5975L6.38868 13.1835L5.67043 17.025C5.85568 17.0392 6.03646 17.0567 6.20546 17.0741L6.84165 13.1859L10.4589 11.6576L14.0778 13.1859L14.714 17.0782C14.8922 17.0586 15.071 17.0456 15.2502 17.0392L14.5283 13.1835L15.39 12.2597C15.3737 12.1028 15.3583 11.9611 15.3489 11.8997C15.3087 11.7661 15.273 11.6381 15.2356 11.5069L14.2326 12.5875L10.7319 11.1908V8.78582C12.3256 8.83213 13.741 9.47644 14.974 10.5514C14.0327 6.88375 14.1277 4.36825 15.2669 3.07232C15.9973 2.24113 17.2786 1.78369 18.8744 1.78369C21.1965 1.78369 24.117 2.81028 24.9551 4.71235C25.2265 5.32863 25.4995 6.58029 24.2824 8.04685L23.8846 8.52582L23.7518 8.45188C23.6612 9.78641 22.9312 11.2343 20.1918 11.2343C20.0314 11.2343 19.9863 11.2834 19.9619 11.3107C19.5841 11.7242 19.6637 13.3257 19.7222 14.4953C19.8055 16.1645 19.8843 17.7408 19.1323 18.5643C19.0446 18.6605 18.9459 18.7393 18.8415 18.8092C18.7395 19.3215 18.514 19.7485 18.1504 20.1031C18.4653 20.9924 18.7001 21.9292 18.7663 22.7251C19.0507 22.9412 19.4033 23.7005 19.4033 24.9826C19.4033 25.4404 17.3968 25.4778 17.11 25.0342C16.9504 25.0488 16.7797 25.0569 16.5933 25.0569C15.3156 25.0569 13.8129 24.7267 13.7495 24.712L13.3628 24.6263L13.4595 24.2278C13.5342 23.9219 13.5744 23.5839 13.5935 23.2321C12.6636 23.2178 11.5944 23.0143 11.5944 23.0143C11.7166 22.5813 11.7317 22.0686 11.6943 21.5543C10.8574 21.5722 10.0202 21.5717 9.18327 21.5526C9.35349 21.9845 9.40143 22.3741 9.22065 22.6003C8.81805 23.1013 6.76243 23.2341 6.76243 23.2341C6.78234 22.9798 6.75105 22.7048 6.69418 22.4285L6.68077 22.4517C6.34277 22.9639 5.95318 23.3938 5.56074 23.7062C5.50102 24.0515 5.34543 24.4927 5.03749 24.9883C4.85509 25.2832 3.60059 24.3265 3.48399 23.8459C2.6589 23.1427 1.80293 21.7078 1.40034 20.9814L1.12815 20.4903L1.66562 20.3928C2.06699 20.3201 2.41312 20.199 2.70196 20.0324C2.36802 19.6806 2.16002 19.2626 2.06862 18.7625C1.9764 18.8685 1.8854 18.9827 1.79846 19.1123C1.32965 19.8123 0.9429 20.6142 0.834024 20.2266C0.724337 19.8391 1.04243 18.0869 1.68146 17.4966ZM3.3024 19.5161C3.33968 19.4701 3.37492 19.4226 3.40802 19.3735C3.59896 19.0786 3.69362 18.7576 3.73749 18.4663H2.79743C2.85024 18.8673 3.00137 19.2175 3.3024 19.5161ZM18.787 17.6742C19.5609 15.8359 17.8786 10.4413 20.1918 10.4413C22.4282 10.4413 22.9994 9.40819 22.9994 8.14638C22.9994 8.14638 22.8056 8.23738 22.4449 8.23738C21.8676 8.23738 20.863 8.0046 19.5414 6.79153C19.6304 6.78959 19.7194 6.78864 19.8083 6.78869C22.3653 6.78869 23.7055 7.52888 23.7055 7.52888C26.0816 4.66563 22.1171 2.57588 18.8744 2.57588C17.6109 2.57588 16.4568 2.89316 15.8307 3.60613C14.3284 5.31522 15.4907 9.72263 16.0871 11.695C16.0875 11.6966 16.0879 11.7003 16.0887 11.7019C16.6688 12.4384 17.1754 13.5365 17.9493 13.7953C18.6542 14.0313 18.4799 15.9996 16.8963 16.8332C16.9951 17.1558 17.106 17.4418 17.2299 17.6742H18.787ZM16.5937 24.2635C16.9508 24.2635 17.2018 24.2347 17.3842 24.1961C17.5651 23.8375 17.7796 23.4969 18.0249 23.1788C18.0379 21.4645 16.885 18.6776 16.1436 17.8403C16.0237 17.8322 15.8312 17.8224 15.602 17.8224C14.7188 17.8224 14.0371 17.9602 13.6788 18.2043C13.9128 19.066 14.6152 21.9219 14.2809 24.0104C14.7972 24.1071 15.7617 24.2635 16.5937 24.2635ZM13.4229 20.6824C13.3632 20.3002 13.2953 19.9374 13.2279 19.6136C13.1921 19.7172 13.1523 19.8196 13.1056 19.9187C12.9671 20.199 12.7887 20.4537 12.5742 20.6581C12.5458 20.6853 12.5153 20.7105 12.4861 20.7361C12.7986 20.7229 13.1109 20.705 13.4229 20.6824ZM8.74452 20.747C9.31675 20.7649 9.88923 20.7736 10.4617 20.773C11.0813 20.773 11.6504 20.7641 12.1777 20.747C12.2554 20.6545 12.3302 20.5597 12.402 20.4627C12.5675 20.2382 12.7118 19.9988 12.833 19.7477C12.9426 19.521 13.0322 19.2851 13.1007 19.0428C13.0447 18.8064 12.9955 18.6114 12.9569 18.4668H7.68706C7.71712 18.6321 7.75124 18.7938 7.79268 18.9502C7.86658 19.2247 7.966 19.4917 8.08965 19.7477C8.21117 19.9988 8.3556 20.2381 8.52109 20.4627C8.59137 20.5598 8.66774 20.6532 8.74452 20.747ZM8.43699 20.7361C8.40774 20.7105 8.37768 20.6853 8.34883 20.6581C8.13 20.4443 7.95006 20.1941 7.81705 19.9187C7.76505 19.8078 7.72118 19.692 7.68259 19.5754C7.6513 19.9467 7.58996 20.3172 7.4884 20.6812C7.80428 20.7047 8.12052 20.723 8.43699 20.7361ZM4.07062 23.334C4.53862 23.1 4.96477 22.9822 5.2268 22.9611C5.5433 22.6795 5.82103 22.3571 6.05271 22.0023C6.44474 21.4076 7.27715 19.8557 6.81402 17.9451C6.38746 17.8874 5.48437 17.7782 4.77831 17.7782C4.68812 17.7782 4.60443 17.7802 4.52765 17.7834C4.55609 18.2705 4.51302 19.0818 4.04584 19.8082C3.66599 20.3989 3.08952 20.8137 2.32659 21.0468C2.95952 22.1076 3.65218 23.0115 4.07062 23.334Z",fill:"#1AB2FF"})]})}),1!==_?(0,he.jsx)(A.A,{className:"px-2 py-2 rounded-circle bg-transparent border-0",onClick:()=>y(1),children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"33",viewBox:"0 0 32 33",fill:"none",children:(0,he.jsx)("path",{d:"M24.0665 28.1587L20.4265 21.8387C20.4265 19.532 18.9998 18.052 17.2665 18.052C16.0665 18.052 15.0265 18.7187 14.4932 19.7054C14.9332 19.452 15.4532 19.3187 15.9998 19.3187C17.7332 19.3187 19.1465 20.732 19.1465 22.4654C19.1465 24.212 17.7465 25.6387 15.9998 25.6387H20.3998V28.1587H9.05316C8.73316 28.1587 8.39983 28.0387 8.15983 27.7854C7.92371 27.548 7.79116 27.2268 7.79116 26.892C7.79116 26.5572 7.92371 26.236 8.15983 25.9987L8.8265 25.332C8.37316 25.132 7.99983 24.8254 7.6265 24.5054C7.33316 25.172 6.6665 25.6387 5.89316 25.6387C5.38925 25.6387 4.90598 25.4385 4.54966 25.0822C4.19334 24.7259 3.99316 24.2426 3.99316 23.7387C3.99316 23.2348 4.19334 22.7515 4.54966 22.3952C4.90598 22.0389 5.38925 21.8387 5.89316 21.8387L6.51983 21.9454V19.3187C6.51807 18.4882 6.68034 17.6656 6.99733 16.8981C7.31432 16.1305 7.77978 15.4331 8.367 14.8459C8.95421 14.2586 9.65162 13.7932 10.4192 13.4762C11.1868 13.1592 12.0094 12.9969 12.8398 12.9987H12.8665C15.6932 13.012 17.8932 14.1187 17.8932 12.372C17.8932 11.132 18.1598 10.6387 18.6132 9.94536C17.6398 9.49202 16.5332 9.21202 15.3732 9.21202C14.6665 9.21202 14.1065 8.65203 14.1065 7.94536C14.1065 7.37203 14.4798 6.89202 14.9998 6.73202L14.1065 6.67869C13.4132 6.67869 12.8398 6.11869 12.8398 5.42536C12.8398 4.71869 13.4132 4.15869 14.1065 4.15869H15.3732C18.1732 4.15869 20.6265 5.69202 21.9465 7.95869L22.3198 7.94536C23.2665 7.94536 24.1465 8.25202 24.8665 8.75869L25.4665 9.26536C28.3598 11.8654 27.9998 13.6254 27.9998 13.6387C27.9998 15.3454 26.5865 16.7454 24.8665 16.7454L24.2132 16.6787V16.7854C24.2132 18.2654 23.5732 19.5854 22.5732 20.5187L26.9865 28.1587H24.0665ZM24.2132 10.4787C23.5065 10.4787 22.9465 11.0387 22.9465 11.732C22.9465 12.4387 23.5065 12.9987 24.2132 12.9987C24.9065 12.9987 25.4798 12.4387 25.4798 11.732C25.4798 11.0387 24.9065 10.4787 24.2132 10.4787Z",fill:"#98A2B3"})})}):(0,he.jsx)(A.A,{className:"info-button px-2 py-2",onClick:()=>y(null),children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"33",viewBox:"0 0 32 33",fill:"none",children:(0,he.jsx)("path",{d:"M24.0665 28.1587L20.4265 21.8387C20.4265 19.532 18.9998 18.052 17.2665 18.052C16.0665 18.052 15.0265 18.7187 14.4932 19.7054C14.9332 19.452 15.4532 19.3187 15.9998 19.3187C17.7332 19.3187 19.1465 20.732 19.1465 22.4654C19.1465 24.212 17.7465 25.6387 15.9998 25.6387H20.3998V28.1587H9.05316C8.73316 28.1587 8.39983 28.0387 8.15983 27.7854C7.92371 27.548 7.79116 27.2268 7.79116 26.892C7.79116 26.5572 7.92371 26.236 8.15983 25.9987L8.8265 25.332C8.37316 25.132 7.99983 24.8254 7.6265 24.5054C7.33316 25.172 6.6665 25.6387 5.89316 25.6387C5.38925 25.6387 4.90598 25.4385 4.54966 25.0822C4.19334 24.7259 3.99316 24.2426 3.99316 23.7387C3.99316 23.2348 4.19334 22.7515 4.54966 22.3952C4.90598 22.0389 5.38925 21.8387 5.89316 21.8387L6.51983 21.9454V19.3187C6.51807 18.4882 6.68034 17.6656 6.99733 16.8981C7.31432 16.1305 7.77978 15.4331 8.367 14.8459C8.95421 14.2586 9.65162 13.7932 10.4192 13.4762C11.1868 13.1592 12.0094 12.9969 12.8398 12.9987H12.8665C15.6932 13.012 17.8932 14.1187 17.8932 12.372C17.8932 11.132 18.1598 10.6387 18.6132 9.94536C17.6398 9.49202 16.5332 9.21202 15.3732 9.21202C14.6665 9.21202 14.1065 8.65203 14.1065 7.94536C14.1065 7.37203 14.4798 6.89202 14.9998 6.73202L14.1065 6.67869C13.4132 6.67869 12.8398 6.11869 12.8398 5.42536C12.8398 4.71869 13.4132 4.15869 14.1065 4.15869H15.3732C18.1732 4.15869 20.6265 5.69202 21.9465 7.95869L22.3198 7.94536C23.2665 7.94536 24.1465 8.25202 24.8665 8.75869L25.4665 9.26536C28.3598 11.8654 27.9998 13.6254 27.9998 13.6387C27.9998 15.3454 26.5865 16.7454 24.8665 16.7454L24.2132 16.6787V16.7854C24.2132 18.2654 23.5732 19.5854 22.5732 20.5187L26.9865 28.1587H24.0665ZM24.2132 10.4787C23.5065 10.4787 22.9465 11.0387 22.9465 11.732C22.9465 12.4387 23.5065 12.9987 24.2132 12.9987C24.9065 12.9987 25.4798 12.4387 25.4798 11.732C25.4798 11.0387 24.9065 10.4787 24.2132 10.4787Z",fill:"#1AB2FF"})})}),2!==_?(0,he.jsx)(A.A,{className:"px-2 py-2 rounded-circle bg-transparent border-0",onClick:()=>y(2),children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"33",viewBox:"0 0 32 33",fill:"none",children:(0,he.jsx)("path",{d:"M24.5019 4.15874C24.3437 4.15874 24.2025 4.18868 24.0951 4.24687C24.2476 5.35185 24.355 5.6055 25.2306 6.18962C24.0499 8.36399 24.8126 9.01364 18.7736 8.2623C16.1072 7.929 14.0904 8.40918 12.1471 9.87232C9.41857 11.9286 8.5147 13.081 7.08546 16.849C6.06578 19.5381 7.09111 25.0629 3.24007 23.1083C2.87626 22.984 2.48986 22.9615 2.79604 23.4812C3.33441 24.3116 4.34166 24.8991 5.61724 24.385C7.61648 23.5716 7.45266 20.8374 8.92144 17.5382C9.42987 16.3802 10.5879 13.6234 11.6782 14.9001C12.0511 15.3407 12.4578 16.2446 12.2488 16.6739C11.3506 18.5551 10.8139 19.8714 9.40727 20.9503C9.61629 23.3343 9.5372 25.9103 8.25484 27.7689L8.75197 28.1587C9.49766 27.6333 10.345 27.0854 10.5879 26.3227C10.6444 25.2211 10.8083 25.0799 10.7179 22.7524C11.7008 21.7695 12.712 20.9729 13.5877 19.3121C15.2146 18.8432 16.2032 17.5213 17.576 16.2446C17.8245 16.013 18.0336 15.7757 18.2369 15.5497C18.6889 14.6572 18.4177 13.5895 18.0787 12.567C18.9826 13.0472 19.3724 13.855 19.4571 14.6063C20.1802 14.5724 20.7847 14.499 21.4118 14.3069C21.214 13.2505 21.5756 12.5557 22.4456 11.8269C21.9315 13.1827 21.7564 13.5443 22.1744 14.0471C22.18 14.0414 22.1913 14.0358 22.197 14.0358C22.4682 14.5837 22.4625 15.1147 22.4738 15.6966C22.18 16.0977 21.7451 15.9904 21.344 15.996L20.474 17.0976C21.2253 17.0016 23.389 16.5666 23.4003 16.2276C23.4455 15.2899 23.6488 14.2843 23.3438 13.4143C23.9256 12.985 24.4567 12.3636 24.8973 11.7535C25.5187 10.8835 25.7108 10.1548 26.4056 8.93455C26.5525 8.67469 28.2416 9.35824 28.5523 9.26221C29.0438 9.10968 29.3601 8.90066 29.3093 8.36964C29.298 8.22276 28.5354 7.74258 28.1286 7.43752C28.1286 7.43752 28.1964 6.8952 28.0439 6.68788C27.8066 6.36305 26.9254 6.15573 26.9254 6.15573C26.7615 4.9355 25.3605 4.1514 24.5019 4.15874ZM27.462 6.8534C27.6259 6.8534 27.7558 6.98107 27.7558 7.13586C27.7558 7.2929 27.6259 7.41493 27.462 7.41493C27.2982 7.41493 27.1683 7.2929 27.1683 7.13586C27.1683 6.98107 27.2982 6.85453 27.462 6.8534Z",fill:"#98A2B3"})})}):(0,he.jsx)(A.A,{className:"info-button px-2 py-2",onClick:()=>y(null),children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"33",viewBox:"0 0 32 33",fill:"none",children:(0,he.jsx)("path",{d:"M24.5019 4.15874C24.3437 4.15874 24.2025 4.18868 24.0951 4.24687C24.2476 5.35185 24.355 5.6055 25.2306 6.18962C24.0499 8.36399 24.8126 9.01364 18.7736 8.2623C16.1072 7.929 14.0904 8.40918 12.1471 9.87232C9.41857 11.9286 8.5147 13.081 7.08546 16.849C6.06578 19.5381 7.09111 25.0629 3.24007 23.1083C2.87626 22.984 2.48986 22.9615 2.79604 23.4812C3.33441 24.3116 4.34166 24.8991 5.61724 24.385C7.61648 23.5716 7.45266 20.8374 8.92144 17.5382C9.42987 16.3802 10.5879 13.6234 11.6782 14.9001C12.0511 15.3407 12.4578 16.2446 12.2488 16.6739C11.3506 18.5551 10.8139 19.8714 9.40727 20.9503C9.61629 23.3343 9.5372 25.9103 8.25484 27.7689L8.75197 28.1587C9.49766 27.6333 10.345 27.0854 10.5879 26.3227C10.6444 25.2211 10.8083 25.0799 10.7179 22.7524C11.7008 21.7695 12.712 20.9729 13.5877 19.3121C15.2146 18.8432 16.2032 17.5213 17.576 16.2446C17.8245 16.013 18.0336 15.7757 18.2369 15.5497C18.6889 14.6572 18.4177 13.5895 18.0787 12.567C18.9826 13.0472 19.3724 13.855 19.4571 14.6063C20.1802 14.5724 20.7847 14.499 21.4118 14.3069C21.214 13.2505 21.5756 12.5557 22.4456 11.8269C21.9315 13.1827 21.7564 13.5443 22.1744 14.0471C22.18 14.0414 22.1913 14.0358 22.197 14.0358C22.4682 14.5837 22.4625 15.1147 22.4738 15.6966C22.18 16.0977 21.7451 15.9904 21.344 15.996L20.474 17.0976C21.2253 17.0016 23.389 16.5666 23.4003 16.2276C23.4455 15.2899 23.6488 14.2843 23.3438 13.4143C23.9256 12.985 24.4567 12.3636 24.8973 11.7535C25.5187 10.8835 25.7108 10.1548 26.4056 8.93455C26.5525 8.67469 28.2416 9.35824 28.5523 9.26221C29.0438 9.10968 29.3601 8.90066 29.3093 8.36964C29.298 8.22276 28.5354 7.74258 28.1286 7.43752C28.1286 7.43752 28.1964 6.8952 28.0439 6.68788C27.8066 6.36305 26.9254 6.15573 26.9254 6.15573C26.7615 4.9355 25.3605 4.1514 24.5019 4.15874ZM27.462 6.8534C27.6259 6.8534 27.7558 6.98107 27.7558 7.13586C27.7558 7.2929 27.6259 7.41493 27.462 7.41493C27.2982 7.41493 27.1683 7.2929 27.1683 7.13586C27.1683 6.98107 27.2982 6.85453 27.462 6.8534Z",fill:"#1AB2FF"})})})]})]}),(0,he.jsxs)("div",{className:"mb-4 text-center",children:[(0,he.jsx)("h5",{className:ae.feedbackLabel,children:"Customer Feedback"}),(0,he.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-5",children:[0!==w?(0,he.jsx)(I.A,{size:20,className:(0,d.A)("cursor-pointer"),onClick:()=>N(0)}):(0,he.jsx)($.A,{size:20,color:"#FFCB45",onClick:()=>N(null),className:(0,d.A)("cursor-pointer")}),1!==w?(0,he.jsx)(H.A,{size:20,className:(0,d.A)("cursor-pointer"),onClick:()=>N(1)}):(0,he.jsx)(Z.A,{size:20,color:"#FFCB45",onClick:()=>N(null),className:(0,d.A)("cursor-pointer")}),2!==w?(0,he.jsx)(z.A,{size:20,className:(0,d.A)("cursor-pointer"),onClick:()=>N(2)}):(0,he.jsx)(E.A,{size:20,color:"#FFCB45",onClick:()=>N(null),className:(0,d.A)("cursor-pointer")})]})]})]}),(0,he.jsxs)("div",{className:"d-flex justify-content-end gap-2 border-top pt-4",children:[(0,he.jsx)(A.A,{className:"outline-button",disabled:null===T||void 0===T?void 0:T.isPending,onClick:()=>g(!1),children:"Cancel"}),(0,he.jsxs)(A.A,{className:"solid-button",disabled:null===T||void 0===T?void 0:T.isPending,onClick:async()=>{await T.mutateAsync({quality_rating:f,speed_rating:_,feedback_rating:w,deduction:o?0:s,deduction_reason:o?"":a,bonus:o?s:0,bonus_reason:o?a:"",is_bonus:o,planned:n,actual:r,value:i,type:p}),k&&x(m)},autoFocus:!0,children:["Approve Job",(null===T||void 0===T?void 0:T.isPending)&&(0,he.jsx)(c.p,{style:{width:"20px",height:"20px",color:"#fff"}})]})]})]})]})},me=e=>{let{locations:t}=e;if(!t||0===t.length)return null;const s=[parseFloat(t[0].latitude),parseFloat(t[0].longitude)];return(0,he.jsxs)(P.W,{center:s,zoom:10,scrollWheelZoom:!0,style:{height:"400px",width:"100%"},children:[(0,he.jsx)(U.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"\xa9 OpenStreetMap contributors"}),t.map(((e,t)=>(0,he.jsx)(V.p,{position:[parseFloat(e.latitude),parseFloat(e.longitude)],children:(0,he.jsxs)(J.z,{children:["\ud83d\udccd Latitude: ",e.latitude," ",(0,he.jsx)("br",{}),"\ud83d\udccd Longitude: ",e.longitude," ",(0,he.jsx)("br",{}),"\ud83d\udd52 Timestamp: ",new Date(1e3*e.date).toLocaleString()]})},t)))]})},xe=e=>{var t;let{showTimeTracking:s,setShowTimeTracking:a,jobId:o,refetchJob:i}=e;const[n,d]=(0,l.useState)("00:00:00 h"),[p,h]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),[x,C]=(0,l.useState)({startDate:null,endDate:null}),f=(0,l.useRef)(null),b=(0,l.useRef)(null),[_,y]=(0,l.useState)({top:-9999,left:-9999,ready:!1}),[w,N]=(0,l.useState)({top:-9999,left:-9999,ready:!1});(0,l.useEffect)((()=>{const e=e=>{const t=document.getElementById("start-calendar-portal"),s=document.getElementById("end-calendar-portal");e.target.closest(".time-popup, .time-popup-hour, .time-popup-minute")||(p&&f.current&&t&&(f.current.contains(e.target)||t.contains(e.target)||h(!1)),u&&b.current&&s&&(b.current.contains(e.target)||s.contains(e.target)||m(!1)))};return(p||u)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[p,u]);const A=e=>{if(!e.current)return{top:-9999,left:-9999,ready:!1};const t=e.current.getBoundingClientRect(),s=450,l=window.innerHeight,a=window.innerWidth,o=16;let i,n;const r=l-t.bottom-o,d=t.top-o;return i=r>=s?t.bottom+8:d>=s?t.top-s-8:o,i=Math.max(o,Math.min(i,l-s-o)),n=t.left,n+320>a-o&&(n=a-320-o),n=Math.max(o,n),{top:i,left:n,ready:!0}};(0,l.useEffect)((()=>{if(p&&f.current){const e=A(f);y(e)}else y({top:-9999,left:-9999,ready:!1})}),[p]),(0,l.useEffect)((()=>{if(u&&b.current){const e=A(b);N(e)}else N({top:-9999,left:-9999,ready:!1})}),[u]);const k=(0,r.I)({queryKey:["getJobTimers",o],queryFn:()=>(async e=>{const t=new URL(`${g}/jobs/approval/timer/${e}/`);return(0,j.f)(t.toString(),{method:"GET"})})(o),enabled:!!o&&s,retry:1}),L=(0,q.n)({mutationFn:e=>(async(e,t)=>{const{startId:s,endId:l}=t,a={method:"POST",body:{start_id:s,end_id:l}},o=new URL(`${g}/jobs/approval/timer/delete/${e}/`);return(0,j.f)(o.toString(),a)})(o,e),onSuccess:()=>{k.refetch(),i(),v.oR.success("Timer entry deleted successfully")},onError:e=>{v.oR.error("Failed to delete timer entry"),console.error("Delete timer error:",e)}}),T=(0,q.n)({mutationFn:e=>(async(e,t)=>{const s={method:"POST",body:t,headers:{"Content-Type":"application/json"}},l=new URL(`${g}/jobs/approval/timer/create/${e}/`);return(0,j.f)(l.toString(),s)})(o,e),onSuccess:()=>{k.refetch(),i(),v.oR.success("Timer entry added successfully"),C({startDate:null,endDate:null})},onError:e=>{v.oR.error("Failed to add timer entry"),console.error("Create timer error:",e)}}),S=e=>{if(!e)return"";const t=new Date(e);return`${t.getDate().toString().padStart(2,"0")} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${t.getFullYear()}`},F=e=>{if(!e)return"";const t=new Date(e);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},D=(e,t)=>{if(!e||!t)return"0:00h";const s=new Date(e).getTime(),l=new Date(t).getTime(),a=Math.abs(l-s);return`${Math.floor(a/36e5)}:${Math.floor(a%36e5/6e4).toString().padStart(2,"0")}h`};if((0,l.useEffect)((()=>{k.data&&Array.isArray(k.data)&&d((e=>{let t=0;e.forEach((e=>{var s,l;if(null!==(s=e.start)&&void 0!==s&&s.created&&null!==(l=e.end)&&void 0!==l&&l.created){const s=1e3*parseInt(e.start.created),l=1e3*parseInt(e.end.created);t+=Math.abs(s-l)}}));const s=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4),a=Math.floor(t%6e4/1e3);return`${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")} h`})(k.data))}),[k.data]),!s)return null;const M=()=>(0,he.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,he.jsx)("rect",{x:"1.5",y:"3",width:"15",height:"13.5",rx:"2",stroke:"#667085",strokeWidth:"1.5"}),(0,he.jsx)("path",{d:"M1.5 7.5H16.5",stroke:"#667085",strokeWidth:"1.5"}),(0,he.jsx)("path",{d:"M5.25 1.5V4.5",stroke:"#667085",strokeWidth:"1.5",strokeLinecap:"round"}),(0,he.jsx)("path",{d:"M12.75 1.5V4.5",stroke:"#667085",strokeWidth:"1.5",strokeLinecap:"round"}),(0,he.jsx)("rect",{x:"4.5",y:"10.5",width:"2.25",height:"1.5",fill:"#667085"}),(0,he.jsx)("rect",{x:"7.875",y:"10.5",width:"2.25",height:"1.5",fill:"#667085"}),(0,he.jsx)("rect",{x:"11.25",y:"10.5",width:"2.25",height:"1.5",fill:"#667085"}),(0,he.jsx)("rect",{x:"4.5",y:"13.125",width:"2.25",height:"1.5",fill:"#667085"}),(0,he.jsx)("rect",{x:"7.875",y:"13.125",width:"2.25",height:"1.5",fill:"#667085"})]}),R=()=>(0,he.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,he.jsx)("circle",{cx:"10",cy:"10",r:"9",stroke:"#12B76A",strokeWidth:"1.5"}),(0,he.jsx)("path",{d:"M6.5 10L9 12.5L13.5 7.5",stroke:"#12B76A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),I=()=>(0,he.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,he.jsx)("circle",{cx:"10",cy:"10",r:"9",stroke:"#F04438",strokeWidth:"1.5"}),(0,he.jsx)("path",{d:"M6.5 10H13.5",stroke:"#F04438",strokeWidth:"1.5",strokeLinecap:"round"})]});return(0,he.jsxs)("div",{className:ae.timeTrackingModal,children:[(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h5",{className:ae.timeTrackingHeader,children:"Time Tracking"}),(0,he.jsx)("button",{type:"button",onClick:()=>a(!1),className:ae.timeTrackingCloseButton,children:(0,he.jsx)(B.A,{size:20})})]}),k.isLoading?(0,he.jsxs)("div",{className:ae.loadingContainer,children:[(0,he.jsx)(c.p,{style:{width:"40px",height:"40px"}}),(0,he.jsx)("p",{children:"Loading timer data..."})]}):(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)("div",{className:ae.timeTrackingContainer,children:[(0,he.jsxs)("div",{className:ae.timeTrackingHeaderRow,children:[(0,he.jsx)("div",{className:ae.timeTrackingCell,children:"Start Date"}),(0,he.jsx)("div",{className:ae.timeTrackingCell,children:"End Date"}),(0,he.jsx)("div",{className:ae.timeTrackingCell,children:"Total Hours"}),(0,he.jsx)("div",{className:ae.timeTrackingCellAction,children:"Action"})]}),(0,he.jsx)("div",{className:ae.timeTrackingDataRows,children:(null===(t=k.data)||void 0===t?void 0:t.length)>0?k.data.map(((e,t)=>{var s,l,a;const o=1e3*parseInt(null===(s=e.end)||void 0===s?void 0:s.created),i=1e3*parseInt(null===(l=e.start)||void 0===l?void 0:l.created),n=new Date(Math.min(o,i)),r=new Date(Math.max(o,i));return(0,he.jsxs)("div",{className:ae.timeTrackingRow,children:[(0,he.jsx)("div",{className:ae.timeTrackingCell,children:(0,he.jsxs)("span",{className:ae.dateCell,children:[S(n)," ",F(n)]})}),(0,he.jsx)("div",{className:ae.timeTrackingCell,children:(0,he.jsxs)("span",{className:ae.dateCell,children:[S(r)," ",F(r)]})}),(0,he.jsx)("div",{className:ae.timeTrackingCell,children:(0,he.jsx)("span",{className:ae.dayTotalCell,children:D(n,r)})}),(0,he.jsx)("div",{className:ae.timeTrackingCellAction,children:(0,he.jsx)("button",{type:"button",onClick:()=>{var t,s;return L.mutate({startId:null===(t=e.start)||void 0===t?void 0:t.id,endId:null===(s=e.end)||void 0===s?void 0:s.id})},disabled:L.isPending,className:ae.deleteButton,children:(0,he.jsx)(I,{})})})]},(null===(a=e.start)||void 0===a?void 0:a.id)||t)})):null}),(0,he.jsxs)("div",{className:ae.timeTrackingRow,children:[(0,he.jsx)("div",{className:ae.timeTrackingCell,children:(0,he.jsxs)("div",{className:ae.calendarInputWrapper,ref:f,children:[x.startDate?(0,he.jsxs)("span",{className:ae.dateLabelClickable,onClick:()=>h(!p),children:[S(x.startDate)," ",F(x.startDate)]}):(0,he.jsx)("button",{type:"button",className:ae.calendarIconButton,onClick:()=>h(!p),children:(0,he.jsx)(M,{})}),p&&_.ready&&(0,W.createPortal)((0,he.jsx)("div",{id:"start-calendar-portal",className:ae.calendarPortal,style:{top:_.top,left:_.left},onMouseDown:e=>e.stopPropagation(),children:(0,he.jsx)(de.s,{value:x.startDate,onChange:e=>{C({...x,startDate:e.value})},hourFormat:"24",popupId:"start-time-picker",inline:!0,onDone:()=>h(!1)})}),document.body)]})}),(0,he.jsx)("div",{className:ae.timeTrackingCell,children:(0,he.jsxs)("div",{className:ae.calendarInputWrapper,ref:b,children:[x.endDate?(0,he.jsxs)("span",{className:ae.dateLabelClickable,onClick:()=>m(!u),children:[S(x.endDate)," ",F(x.endDate)]}):(0,he.jsx)("button",{type:"button",className:ae.calendarIconButton,onClick:()=>m(!u),children:(0,he.jsx)(M,{})}),u&&w.ready&&(0,W.createPortal)((0,he.jsx)("div",{id:"end-calendar-portal",className:ae.calendarPortal,style:{top:w.top,left:w.left},onMouseDown:e=>e.stopPropagation(),children:(0,he.jsx)(de.s,{value:x.endDate,onChange:e=>{C({...x,endDate:e.value})},hourFormat:"24",popupId:"end-time-picker",inline:!0,onDone:()=>m(!1)})}),document.body)]})}),(0,he.jsx)("div",{className:ae.timeTrackingCell}),(0,he.jsx)("div",{className:ae.timeTrackingCellAction,children:(0,he.jsx)("button",{type:"button",className:ae.saveButton,onClick:()=>{if(!x.startDate||!x.endDate)return void v.oR.error("Please select start and end dates");const e={start:x.startDate.toISOString(),pause:x.endDate.toISOString()};T.mutate(e)},disabled:T.isPending,children:(0,he.jsx)(R,{})})})]}),(0,he.jsxs)("div",{className:ae.addEntryFooter,children:[(0,he.jsx)("div",{}),(0,he.jsx)("span",{className:ae.totalHoursLabel,children:n})]})]})})]})},ve=e=>{var t,s,a,o,i,n;let{jobId:p=null,nextJobId:h=null,handleNextJob:u,visible:m=!1,setVisible:x,refetch:C,refetchApprovedTotal:j}=e;const g=(0,l.useRef)(null),{session:f}=(0,ie.As)(),b=(0,Y.Zp)(),_=null===f||void 0===f?void 0:f.desktop_user_id,[w,N]=(0,l.useState)(!0),[I,$]=(0,l.useState)(!1),[H,Z]=(0,l.useState)(!1),[z,E]=(0,l.useState)(!1),[W,P]=(0,l.useState)(!1),[U,V]=(0,l.useState)(!1),[J,O]=(0,l.useState)("planned"),[G,X]=(0,l.useState)(0),[te,de]=(0,l.useState)(!0),[ve,Ce]=(0,l.useState)(""),[je,ge]=(0,l.useState)(!1),[fe,be]=(0,l.useState)(!1),_e=(0,r.I)({queryKey:["getApprovedJob",p],queryFn:()=>(0,oe.z8)(p),enabled:!!p,retry:1}),ye=null===_e||void 0===_e?void 0:_e.data,we=e=>new Date(1e3*parseInt(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ne=e=>{if(!e)return"00:00:00";const t=Math.floor(3600*e),s=Math.floor(t/3600),l=Math.floor(t%3600/60),a=t%60,o=e=>e.toString().padStart(2,"0");return`${o(s)}:${o(l)}:${o(a)}`},Ae=e=>{if(!e)return"00:00:00";const t=Math.floor(e/3600),s=Math.floor(e%3600/60),l=e%60,a=e=>e.toString().padStart(2,"0");return`${a(t)}:${a(s)}:${a(l)}`},ke=parseFloat((null===ye||void 0===ye||null===(t=ye.worker)||void 0===t?void 0:t.hourly_rate)||0).toFixed(2),Le="Fix"===(null===ye||void 0===ye?void 0:ye.type_display)?parseFloat((null===ye||void 0===ye?void 0:ye.cost)||0):parseFloat((null===ye||void 0===ye||null===(s=ye.worker)||void 0===s?void 0:s.hourly_rate)||0)*parseFloat((null===ye||void 0===ye?void 0:ye.duration)||0),Te=parseFloat((null===ye||void 0===ye?void 0:ye.real_total)||0),Se=parseFloat(G||0),Be=te?Se:-Se,Fe=(Le+Be).toFixed(2),De=(Te+Be).toFixed(2),Me=()=>{O("planned")},Re=()=>{O("actual")},Ie=()=>{N(!0),$(!0),V(!0),O("planned"),X(0),de(!0),Ce(""),x(!1),$(!1),Z(!1),E(!1),P(!1),V(!1)},$e=(0,q.n)({mutationFn:e=>(0,oe.y8)(e),onSuccess:()=>{Ie(),C(),(()=>{if(_){if(!g.current)return v.oR.error("Failed to start chat due to no socket connection");var e;g.current&&g.current.emit("create_chat_group",{user_id:_,name:"Declined Job - "+(null===ye||void 0===ye?void 0:ye.short_description)+"("+(null===ye||void 0===ye?void 0:ye.number)+") - Review",participants:[null===ye||void 0===ye||null===(e=ye.worker)||void 0===e?void 0:e.id],project_id:null===ye||void 0===ye?void 0:ye.id,job_id:null},(e=>{"success"===e.status&&e.chat_group_id?v.oR.custom((t=>(0,he.jsxs)("div",{className:ae.customToast,children:[(0,he.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100 mb-3",children:[(0,he.jsx)("div",{className:ae.outerToastIcon,children:(0,he.jsx)("div",{className:ae.toastIcon,children:(0,he.jsx)(S.A,{color:"#DC6803",size:20})})}),(0,he.jsx)(A.A,{className:"close-button border-0",onClick:()=>v.oR.dismiss(t),children:(0,he.jsx)(B.A,{size:20,color:"#344054"})})]}),(0,he.jsxs)("div",{className:"ps-2",children:[(0,he.jsx)("p",{className:ae.toastTitle,children:"Job has been declined"}),(0,he.jsx)("p",{className:ae.toastMessage,children:"We created a chat group for you to discuss this job."}),(0,he.jsx)(A.A,{className:"text-button ps-0",onClick:()=>{b(`/chat?id=${e.chat_group_id}`)},children:"Go to chat"})]})]})),{position:"bottom-right"}):(console.log("Error during creation chat group: ",e),v.oR.error("Failed to create chat group"))}))}})(),v.oR.success("Job declined successfully")},onError:e=>{console.error("Error declining job:",e),v.oR.error("Failed to decline job. Please try again.")}}),He=()=>{if(!p)return v.oR.error("No job id found.");$e.mutate(p)};(0,l.useEffect)((()=>{var e;const t=(0,le.io)("https://chat.memate.com.au",{transports:["websocket"],autoConnect:!0});g.current=t,_&&t.emit("register_user",{user_id:_,org_id:null===f||void 0===f||null===(e=f.organization)||void 0===e?void 0:e.id},(e=>{"success"===e.status?console.log("User registered successfully"):v.oR.error("Failed to connect to chat server")}))}),[_,f]);const Ze=e=>{e.stopPropagation(),e.preventDefault(),be((e=>!e))},ze=(null===ye||void 0===ye||null===(a=ye.attachments)||void 0===a?void 0:a.filter((e=>"0"===e.type)))||[],Ee=(null===ye||void 0===ye||null===(o=ye.attachments)||void 0===o?void 0:o.filter((e=>"1"===e.type)))||[],We=(null===ye||void 0===ye||null===(i=ye.attachments)||void 0===i?void 0:i.filter((e=>"2"===e.type)))||[],Pe=(null===ye||void 0===ye||null===(n=ye.attachments)||void 0===n?void 0:n.filter((e=>"3"===e.type)))||[];return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(se.B,{visible:m,position:"right",onHide:Ie,modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{var t,s,l,a,o,i,n;let{closeIconRef:r,hide:m}=e;return(0,he.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,he.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"12px"},children:[(0,he.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,he.jsx)("div",{className:ae.viewBox,children:(0,he.jsx)(F.A,{size:24,color:"#079455"})}),(0,he.jsx)("span",{className:ae.heading,children:null===ye||void 0===ye?void 0:ye.number})]}),(0,he.jsx)("span",{children:(0,he.jsx)(A.A,{type:"button",className:"text-button",ref:r,onClick:e=>m(e),children:(0,he.jsx)(B.A,{size:24,color:"#667085"})})})]}),(0,he.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 68px - 102px)",overflow:"auto"},children:[(0,he.jsx)("h1",{className:(0,d.A)(ae.jobDetailHeading,"mb-3"),children:"Job Details"}),(0,he.jsx)(k.A,{className:(0,d.A)(ae.border,"mb-4"),children:(0,he.jsxs)(k.A.Header,{className:(0,d.A)(ae.background,"border-0",ae.borderBottom),children:[(0,he.jsx)("label",{className:(0,d.A)(ae.customLabel),children:"Job Reference"}),(0,he.jsx)("p",{className:(0,d.A)(ae.text),children:null===ye||void 0===ye?void 0:ye.short_description}),(0,he.jsx)("label",{className:(0,d.A)(ae.customLabel),children:"Description"}),(0,he.jsx)("p",{className:(0,d.A)(ae.text),children:null===ye||void 0===ye?void 0:ye.long_description})]})}),(0,he.jsx)(k.A,{className:(0,d.A)(ae.border,"mb-4"),children:(0,he.jsx)(k.A.Header,{className:(0,d.A)(ae.background,"border-0 px-4 py-3",ae.borderBottom),children:(0,he.jsxs)(L.A,{className:(0,d.A)(ae.chooseUserBox,"flex-nowrap"),children:[(0,he.jsx)(T.A,{sm:2,className:"p-0",children:(0,he.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"62px",height:"62px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,he.jsx)(re.A,{photo:null===ye||void 0===ye||null===(t=ye.worker)||void 0===t?void 0:t.photo,has_photo:null===ye||void 0===ye||null===(s=ye.worker)||void 0===s?void 0:s.has_photo,is_business:!1,size:40})})}),(0,he.jsxs)(T.A,{sm:5,className:"pe-0 ps-0",children:[(0,he.jsxs)("p",{className:(0,d.A)("text-nowrap font-16 mb-2"),style:{fontWeight:600},children:[null===ye||void 0===ye||null===(l=ye.worker)||void 0===l?void 0:l.first_name," ",null===ye||void 0===ye||null===(a=ye.worker)||void 0===a?void 0:a.last_name]}),(0,he.jsx)("div",{style:{background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center",width:"fit-content",padding:"4px 16px"},children:"Employee"})]}),(0,he.jsxs)(T.A,{sm:5,className:"",children:[(0,he.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,he.jsx)("div",{style:{width:"28px",height:"28px",background:"#EBF8FF",borderRadius:"23px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"$"}),(0,he.jsxs)("span",{children:[(null===ye||void 0===ye||null===(o=ye.worker)||void 0===o?void 0:o.hourly_rate)||"-"," AUD"]})]}),(0,he.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,he.jsx)("div",{style:{width:"28px",height:"28px",background:"#EBF8FF",borderRadius:"23px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,he.jsx)(D.A,{color:"#158ECC",size:16})}),(0,he.jsx)("span",{children:(null===ye||void 0===ye||null===(i=ye.worker)||void 0===i?void 0:i.payment_cycle)||"Weekly"})]})]})]})})}),(0,he.jsxs)(k.A,{className:(0,d.A)(ae.border,"mb-4"),children:[(0,he.jsx)(k.A.Body,{className:(0,d.A)(ae.borderBottom,ae.cardBody,"cursor-pointer"),onClick:()=>N(!w),children:(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:600,fontSize:"18px"},children:"Planned vs Actual"}),(0,he.jsx)("button",{className:"text-button p-0",children:w?(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),w&&(0,he.jsx)(k.A.Header,{className:(0,d.A)(ae.background,"border-0 d-flex justify-content-between px-0 py-0",ae.borderBottom),children:(0,he.jsxs)("table",{className:(0,d.A)("w-100",ae.plannedTable,{[ae.plannedActive]:"planned"===J},"approval-sidebar-table"),children:[(0,he.jsx)("thead",{children:(0,he.jsxs)("tr",{children:[(0,he.jsx)("th",{className:"planned"===J?ae.active0:"",children:(0,he.jsx)("div",{className:"d-flex text-nowrap",children:(x=ye,"Fix"===(null===x||void 0===x?void 0:x.type_display)&&"Shift"===(null===x||void 0===x?void 0:x.time_type_display)?(0,he.jsxs)("div",{className:ae.type,children:[(0,he.jsx)("div",{className:ae.shift,children:"Shift"}),(0,he.jsx)("div",{className:ae.fix,children:"Fix"})]}):"Fix"===(null===x||void 0===x?void 0:x.type_display)&&"Time frame"===(null===x||void 0===x?void 0:x.time_type_display)?(0,he.jsxs)("div",{className:ae.type,children:[(0,he.jsx)("div",{className:ae.timeFrame,children:"Time Frame"}),(0,he.jsx)("div",{className:ae.fix,children:"Fix"})]}):"Hours"===(null===x||void 0===x?void 0:x.type_display)&&"Shift"===(null===x||void 0===x?void 0:x.time_type_display)?(0,he.jsxs)("div",{className:ae.type,children:[(0,he.jsx)("div",{className:ae.shift,children:"Shift"}),(0,he.jsx)("div",{className:ae.hours,children:"Hours"})]}):"Hours"===(null===x||void 0===x?void 0:x.type_display)&&"Time frame"===(null===x||void 0===x?void 0:x.time_type_display)?(0,he.jsxs)("div",{className:ae.type,children:[(0,he.jsx)("div",{className:ae.timeFrame,children:"Time Frame"}),(0,he.jsx)("div",{className:ae.hours,children:"Hours"})]}):"Time Tracker"===(null===x||void 0===x?void 0:x.type_display)&&"Time frame"===(null===x||void 0===x?void 0:x.time_type_display)?(0,he.jsxs)("div",{className:ae.type,children:[(0,he.jsx)("div",{className:ae.timeTracker,children:"Time Tracker"}),(0,he.jsx)("div",{className:ae.timeFrame2,children:"Time Frame"})]}):"")})}),(0,he.jsx)("th",{className:"planned"===J?ae.active1:ae.nonActive,onClick:Me,children:(0,he.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,he.jsx)(K.S,{style:{display:"none"},checked:"planned"===J,onChange:()=>O("planned"===J?null:"planned")}),(0,he.jsx)("label",{className:(0,d.A)(ae.customLabel),style:{color:"#0A4766",fontWeight:600},children:"Planned"})]})}),(0,he.jsx)("th",{className:"actual"===J?ae.active1:"",onClick:Re,children:(0,he.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,he.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,he.jsx)(K.S,{style:{display:"none"},checked:"actual"===J,onChange:()=>O("actual"===J?null:"actual")}),(0,he.jsx)("label",{className:(0,d.A)(ae.customLabel),style:{color:"#0A4766",fontWeight:600},children:"Actual"})]}),(0,he.jsxs)("div",{style:{position:"relative"},children:[(0,he.jsx)("div",{className:ae.clockIcon,onClick:Ze,children:(0,he.jsx)(M.A,{color:"#475467",size:16})}),(0,he.jsx)(xe,{showTimeTracking:fe,setShowTimeTracking:be,jobId:p,refetchJob:()=>_e.refetch()})]})]})})]})}),(0,he.jsxs)("tbody",{children:[(0,he.jsxs)("tr",{className:ae.whiteTr,children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",children:(0,he.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Start"})}),(0,he.jsx)("td",{className:"planned"===J?ae.active1:ae.nonActive,onClick:Me,children:(0,he.jsxs)("span",{className:"font-14",children:[null!==ye&&void 0!==ye&&ye.start_date?we(ye.start_date):"N/A"," | ",null!==ye&&void 0!==ye&&ye.start_date?(0,ce.Y)(null===ye||void 0===ye?void 0:ye.start_date):"N/A"]})}),(0,he.jsx)("td",{className:"actual"===J?ae.active1:"",onClick:Re,children:(0,he.jsxs)("span",{className:"font-14",children:[null!==ye&&void 0!==ye&&ye.start?we(null===ye||void 0===ye?void 0:ye.start):"N/A"," | ",null!==ye&&void 0!==ye&&ye.start?(0,ce.Y)(null===ye||void 0===ye?void 0:ye.start):"N/A"]})})]}),(0,he.jsxs)("tr",{className:ae.whiteTr,children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",children:(0,he.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Finish"})}),(0,he.jsx)("td",{className:"planned"===J?ae.active1:ae.nonActive,onClick:Me,children:(0,he.jsxs)("span",{className:"font-14",children:[null!==ye&&void 0!==ye&&ye.end_date?we(null===ye||void 0===ye?void 0:ye.end_date):"N/A"," | ",null!==ye&&void 0!==ye&&ye.end_date?(0,ce.Y)(null===ye||void 0===ye?void 0:ye.end_date):"N/A"]})}),(0,he.jsx)("td",{className:"actual"===J?ae.active1:"",onClick:Re,children:(0,he.jsxs)("span",{className:"font-14",children:[null!==ye&&void 0!==ye&&ye.finish?we(null===ye||void 0===ye?void 0:ye.finish):"N/A"," | ",null!==ye&&void 0!==ye&&ye.finish?(0,ce.Y)(null===ye||void 0===ye?void 0:ye.finish):"N/A"]})})]}),(0,he.jsxs)("tr",{className:ae.whiteTr,children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",children:(0,he.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Hours"})}),(0,he.jsx)("td",{className:"planned"===J?ae.active1:ae.nonActive,onClick:Me,children:(0,he.jsx)("span",{className:"font-14",children:"Fix"===(null===ye||void 0===ye?void 0:ye.type_display)?Ne(parseFloat((null===ye||void 0===ye?void 0:ye.cost)/(null===ye||void 0===ye?void 0:ye.worker.hourly_rate)).toFixed(2)||0):Ne((null===ye||void 0===ye?void 0:ye.duration)||0)})}),(0,he.jsx)("td",{className:"actual"===J?ae.active1:"",onClick:Re,children:(0,he.jsx)("span",{className:"font-14",children:Ae((null===ye||void 0===ye?void 0:ye.spent_time)||0)})})]}),(0,he.jsxs)("tr",{className:ae.whiteTr,children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",children:(0,he.jsx)("span",{className:"font-16 text-nowrap",style:{color:"#344054"},children:"Rate per hour"})}),(0,he.jsxs)("td",{style:{position:"relative"},colSpan:2,className:(0,d.A)("planned"===J?ae.active1:ae.active3,"text-center","planned"!==J?"":ae.borderRightNone),children:[(0,he.jsxs)("div",{style:{zIndex:5},className:(0,d.A)(ae.moneyBox),children:["$",(0,y.m)(ke)]}),(0,he.jsx)("div",{className:(0,d.A)(ae.leftColumn),style:{position:"absolute",top:0,left:0,height:"100%",width:"266px",zIndex:3},onClick:Me}),(0,he.jsx)("div",{className:(0,d.A)(ae.rightColumn),style:{position:"absolute",top:0,right:0,height:"100%",width:"266px",zIndex:3},onClick:Re})]})]}),(0,he.jsxs)("tr",{children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",style:{background:"#F9FAFB"},children:(0,he.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Subtotal"})}),(0,he.jsx)("td",{className:(0,d.A)("planned"===J?ae.active1:ae.nonActive,"planned"===J?ae.active2:""),onClick:Me,children:(0,he.jsxs)("span",{className:"font-14",children:["$",(0,y.m)(Le)]})}),(0,he.jsx)("td",{className:(0,d.A)("actual"===J?ae.active1:"","actual"===J?ae.active2:""),onClick:Re,children:(0,he.jsxs)("span",{className:"font-14",children:["$",(0,y.m)(Te)]})})]}),(0,he.jsxs)("tr",{className:ae.whiteTr,children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",children:(0,he.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Variation"})}),(0,he.jsxs)("td",{style:{position:"relative"},colSpan:2,className:(0,d.A)("planned"===J?ae.active1:ae.active3,"text-center","planned"!==J?"":ae.borderRightNone),children:[(0,he.jsxs)("div",{style:{zIndex:5},className:(0,d.A)(ae.moneyBox,Se===parseFloat(0)?"":te?ae.bonusBox:ae.deductionBox),children:[te?"+":"-"," $",(0,y.m)(parseFloat(Se||0).toFixed(2))]}),(0,he.jsx)("div",{className:(0,d.A)(ae.leftColumn),style:{position:"absolute",top:0,left:0,height:"100%",width:"266px",zIndex:3},onClick:Me}),(0,he.jsx)("div",{className:(0,d.A)(ae.rightColumn),style:{position:"absolute",top:0,right:0,height:"100%",width:"266px",zIndex:3},onClick:Re})]})]}),(0,he.jsxs)("tr",{className:(0,d.A)(ae.lastRow),children:[(0,he.jsx)("td",{className:"planned"===J?ae.active0:"",style:{background:"#F9FAFB"},children:(0,he.jsx)("span",{className:"font-16",style:{color:"#344054"},children:"Total"})}),(0,he.jsx)("td",{className:(0,d.A)("planned"===J?ae.active1:ae.nonActive,"planned"===J?ae.active2:""),onClick:Me,children:(0,he.jsxs)(A.A,{className:(0,d.A)("outline-button px-3 py-1 font-14 mx-auto gap-2","planned"===J?ae.activeOutlineButton:""),children:["$",(0,y.m)(Fe),"planned"===J?(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:[(0,he.jsx)("path",{d:"M3.125 10.5C3.125 6.70304 6.20304 3.625 10 3.625C11.2533 3.625 12.4265 3.95978 13.437 4.54437C13.7358 4.71721 14.1182 4.61511 14.291 4.31632C14.4638 4.01753 14.3617 3.6352 14.063 3.46236C12.8672 2.77068 11.4789 2.375 10 2.375C5.51269 2.375 1.875 6.01269 1.875 10.5C1.875 14.9873 5.51269 18.625 10 18.625C14.4873 18.625 18.125 14.9873 18.125 10.5C18.125 10.1548 17.8452 9.875 17.5 9.875C17.1548 9.875 16.875 10.1548 16.875 10.5C16.875 14.297 13.797 17.375 10 17.375C6.20304 17.375 3.125 14.297 3.125 10.5Z",fill:"white"}),(0,he.jsx)("path",{d:"M19.1919 4.69194C19.436 4.44786 19.436 4.05214 19.1919 3.80806C18.9479 3.56398 18.5521 3.56398 18.3081 3.80806L10 12.1161L6.69194 8.80806C6.44786 8.56398 6.05214 8.56398 5.80806 8.80806C5.56398 9.05214 5.56398 9.44786 5.80806 9.69194L9.55806 13.4419C9.80214 13.686 10.1979 13.686 10.4419 13.4419L19.1919 4.69194Z",fill:"white"})]}):(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",children:[(0,he.jsx)("path",{d:"M3.625 10.5C3.625 6.70304 6.70304 3.625 10.5 3.625C11.7533 3.625 12.9265 3.95978 13.937 4.54437C14.2358 4.71721 14.6182 4.61511 14.791 4.31632C14.9638 4.01753 14.8617 3.6352 14.563 3.46236C13.3672 2.77068 11.9789 2.375 10.5 2.375C6.01269 2.375 2.375 6.01269 2.375 10.5C2.375 14.9873 6.01269 18.625 10.5 18.625C14.9873 18.625 18.625 14.9873 18.625 10.5C18.625 10.1548 18.3452 9.875 18 9.875C17.6548 9.875 17.375 10.1548 17.375 10.5C17.375 14.297 14.297 17.375 10.5 17.375C6.70304 17.375 3.625 14.297 3.625 10.5Z",fill:"#344054"}),(0,he.jsx)("path",{d:"M19.6919 4.69194C19.936 4.44786 19.936 4.05214 19.6919 3.80806C19.4479 3.56398 19.0521 3.56398 18.8081 3.80806L10.5 12.1161L7.19194 8.80806C6.94786 8.56398 6.55214 8.56398 6.30806 8.80806C6.06398 9.05214 6.06398 9.44786 6.30806 9.69194L10.0581 13.4419C10.3021 13.686 10.6979 13.686 10.9419 13.4419L19.6919 4.69194Z",fill:"#344054"})]})]})}),(0,he.jsx)("td",{className:"actual"===J?ae.active1:"",onClick:Re,children:(0,he.jsxs)(A.A,{className:(0,d.A)("outline-button px-3 py-1 font-14 mx-auto gap-2","actual"===J?ae.activeOutlineButton:""),children:["$",(0,y.m)(De),"actual"===J?(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:[(0,he.jsx)("path",{d:"M3.125 10.5C3.125 6.70304 6.20304 3.625 10 3.625C11.2533 3.625 12.4265 3.95978 13.437 4.54437C13.7358 4.71721 14.1182 4.61511 14.291 4.31632C14.4638 4.01753 14.3617 3.6352 14.063 3.46236C12.8672 2.77068 11.4789 2.375 10 2.375C5.51269 2.375 1.875 6.01269 1.875 10.5C1.875 14.9873 5.51269 18.625 10 18.625C14.4873 18.625 18.125 14.9873 18.125 10.5C18.125 10.1548 17.8452 9.875 17.5 9.875C17.1548 9.875 16.875 10.1548 16.875 10.5C16.875 14.297 13.797 17.375 10 17.375C6.20304 17.375 3.125 14.297 3.125 10.5Z",fill:"white"}),(0,he.jsx)("path",{d:"M19.1919 4.69194C19.436 4.44786 19.436 4.05214 19.1919 3.80806C18.9479 3.56398 18.5521 3.56398 18.3081 3.80806L10 12.1161L6.69194 8.80806C6.44786 8.56398 6.05214 8.56398 5.80806 8.80806C5.56398 9.05214 5.56398 9.44786 5.80806 9.69194L9.55806 13.4419C9.80214 13.686 10.1979 13.686 10.4419 13.4419L19.1919 4.69194Z",fill:"white"})]}):(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",children:[(0,he.jsx)("path",{d:"M3.625 10.5C3.625 6.70304 6.70304 3.625 10.5 3.625C11.7533 3.625 12.9265 3.95978 13.937 4.54437C14.2358 4.71721 14.6182 4.61511 14.791 4.31632C14.9638 4.01753 14.8617 3.6352 14.563 3.46236C13.3672 2.77068 11.9789 2.375 10.5 2.375C6.01269 2.375 2.375 6.01269 2.375 10.5C2.375 14.9873 6.01269 18.625 10.5 18.625C14.9873 18.625 18.625 14.9873 18.625 10.5C18.625 10.1548 18.3452 9.875 18 9.875C17.6548 9.875 17.375 10.1548 17.375 10.5C17.375 14.297 14.297 17.375 10.5 17.375C6.70304 17.375 3.625 14.297 3.625 10.5Z",fill:"#344054"}),(0,he.jsx)("path",{d:"M19.6919 4.69194C19.936 4.44786 19.936 4.05214 19.6919 3.80806C19.4479 3.56398 19.0521 3.56398 18.8081 3.80806L10.5 12.1161L7.19194 8.80806C6.94786 8.56398 6.55214 8.56398 6.30806 8.80806C6.06398 9.05214 6.06398 9.44786 6.30806 9.69194L10.0581 13.4419C10.3021 13.686 10.6979 13.686 10.9419 13.4419L19.6919 4.69194Z",fill:"#344054"})]})]})})]})]})]})})]}),(0,he.jsxs)(k.A,{className:(0,d.A)(ae.border,"mb-4"),children:[(0,he.jsx)(k.A.Body,{className:(0,d.A)(ae.borderBottom,ae.cardBody,"cursor-pointer"),onClick:()=>$(!I),children:(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:600,fontSize:"18px"},children:"Variation"}),(0,he.jsx)("button",{className:"text-button p-0",children:I?(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),I&&(0,he.jsxs)(k.A.Header,{className:(0,d.A)(ae.background,"border-0",ae.borderBottom),children:[(0,he.jsxs)("div",{className:"form-group mb-3 w-100",children:[(0,he.jsx)("label",{className:(0,d.A)(ae.customLabel),children:"Amount"}),(0,he.jsxs)("div",{className:ae.amountRow,children:[(0,he.jsxs)("div",{className:(0,d.A)(ae.amountInputBox,te?ae.bonusInputBox:ae.deductionInputBox),children:[(0,he.jsx)("span",{className:ae.dollar,children:"$"}),(0,he.jsx)(Q.Y,{className:(0,d.A)(ae.inputText),value:G,onChange:e=>X(parseFloat(e.value||0))}),(0,he.jsx)("span",{className:ae.helpIcon,children:(0,he.jsx)(R.A,{size:16,color:"#98A2B3"})})]}),(0,he.jsxs)("div",{className:ae.buttonGroup,children:[(0,he.jsx)("button",{className:(0,d.A)(te?"info-button":"outline-button","p-0"),style:{width:"44px",height:"44px"},onClick:()=>de(!0),children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0.5C8.34518 0.5 8.625 0.779822 8.625 1.125V7.375H14.875C15.2202 7.375 15.5 7.65482 15.5 8C15.5 8.34518 15.2202 8.625 14.875 8.625H8.625V14.875C8.625 15.2202 8.34518 15.5 8 15.5C7.65482 15.5 7.375 15.2202 7.375 14.875V8.625H1.125C0.779822 8.625 0.5 8.34518 0.5 8C0.5 7.65482 0.779822 7.375 1.125 7.375H7.375V1.125C7.375 0.779822 7.65482 0.5 8 0.5Z",fill:"#158ECC"})})}),(0,he.jsx)("button",{className:(0,d.A)(te?"outline-button":"danger-outline-button","p-0"),style:{width:"44px",height:"44px"},onClick:()=>de(!1),children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"2",viewBox:"0 0 10 2",fill:"none",children:(0,he.jsx)("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H9C9.55229 0 10 0.447715 10 1C10 1.55228 9.55229 2 9 2H1C0.447715 2 0 1.55228 0 1Z",fill:"#B42318"})})})]})]})]}),(0,he.jsxs)("div",{className:"form-group mb-3 w-100",children:[(0,he.jsx)("label",{className:(0,d.A)(ae.customLabel),children:"Reason"}),(0,he.jsx)(ee.Z,{className:(0,d.A)("w-100",ae.InputTextarea),rows:4,value:ve,onChange:e=>Ce(e.target.value),placeholder:"Enter a reason..."})]})]})]}),(0,he.jsxs)(k.A,{className:(0,d.A)(ae.border,"mb-4"),children:[(0,he.jsx)(k.A.Body,{className:(0,d.A)(ae.borderBottom,ae.cardBody,"cursor-pointer"),onClick:()=>Z(!H),children:(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:600,fontSize:"18px"},children:"History"}),(0,he.jsx)("button",{className:"text-button p-0",children:H?(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),H&&(0,he.jsx)(k.A.Header,{className:(0,d.A)(ae.background,"border-0 p-0",ae.borderBottom),style:{overflow:"auto",maxHeight:"250px"},children:(0,he.jsx)("div",{className:"d-flex flex-column gap-3 p-3",children:null===ye||void 0===ye?void 0:ye.history.map(((e,t)=>(0,he.jsxs)("div",{children:[(0,he.jsx)("h2",{className:ae.historyTitle,children:e.title}),(0,he.jsx)("p",{className:ae.historySubtitle,children:new Date(e.created).toLocaleDateString()||"N/A"})]},t)))})})]}),(null===ye||void 0===ye?void 0:ye.project_photos)&&(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)(k.A,{className:(0,d.A)(ae.border,"mb-3"),children:[(0,he.jsx)(k.A.Body,{className:(0,d.A)(ae.borderBottom,ae.cardBody,"cursor-pointer"),onClick:()=>E(!z),children:(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:600,fontSize:"18px"},children:"Project Photos"}),(0,he.jsx)("button",{className:"text-button p-0",children:z?(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),z&&(0,he.jsx)(k.A.Header,{className:(0,d.A)(ae.background,"border-0"),children:(0,he.jsxs)("div",{className:"d-flex flex-column gap-1",style:{overflowX:"auto"},children:[(0,he.jsx)(ne.A,{attachments:Ee,label:"Before"}),(0,he.jsx)(ne.A,{attachments:We,label:"In Process"}),(0,he.jsx)(ne.A,{attachments:Pe,label:"After"})]})})]})}),(0,he.jsxs)(k.A,{className:(0,d.A)(ae.border,"mb-3"),children:[(0,he.jsx)(k.A.Body,{className:(0,d.A)(ae.borderBottom,ae.cardBody,"cursor-pointer"),onClick:()=>P(!W),children:(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:600,fontSize:"18px"},children:"Documents"}),(0,he.jsx)("button",{className:"text-button p-0",children:W?(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),W&&(0,he.jsx)(k.A.Header,{className:(0,d.A)(ae.background,"border-0"),children:(0,he.jsxs)(A.A,{className:"outline-button d-flex gap-2",onClick:()=>ge(!0),style:{borderRadius:"40px"},children:["Viw All Documents",(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,he.jsx)("path",{d:"M1.25 4.375C1.25 3.33947 2.08947 2.5 3.125 2.5H6.57992C7.77713 2.5 8.78091 3.19995 9.46927 3.97997C9.98156 4.56048 10.5984 5 11.25 5H16.8759C17.912 5 18.75 5.84003 18.75 6.875V15.625C18.75 16.6605 17.9105 17.5 16.875 17.5H3.125C2.08947 17.5 1.25 16.6605 1.25 15.625V4.375ZM3.125 3.75C2.77982 3.75 2.5 4.02982 2.5 4.375V7.5H17.5V6.875C17.5 6.52926 17.2205 6.25 16.8759 6.25H11.25C10.0451 6.25 9.11184 5.46409 8.53203 4.80706C7.96726 4.16709 7.27657 3.75 6.57992 3.75H3.125ZM17.5 8.75H2.5V15.625C2.5 15.9702 2.77982 16.25 3.125 16.25H16.875C17.2202 16.25 17.5 15.9702 17.5 15.625V8.75Z",fill:"#344054"})})]})})]}),(null===ye||void 0===ye||null===(n=ye.locations)||void 0===n?void 0:n.length)&&(0,he.jsxs)(k.A,{className:(0,d.A)(ae.border,"mb-4"),children:[(0,he.jsx)(k.A.Body,{className:(0,d.A)(ae.borderBottom,ae.cardBody,"cursor-pointer"),onClick:()=>V(!U),children:(0,he.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,he.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:600,fontSize:"18px"},children:"Job Tracking"}),(0,he.jsx)("button",{className:"text-button p-0",children:U?(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),U&&(0,he.jsx)(k.A.Header,{className:(0,d.A)(ae.background,"border-0 p-0",ae.borderBottom),children:(0,he.jsx)(me,{locations:(null===ye||void 0===ye?void 0:ye.locations)||[]})})]})]}),(0,he.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-end gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,he.jsxs)(A.A,{type:"button",onClick:He,className:"danger-outline-button",disabled:null===$e||void 0===$e?void 0:$e.isPending,children:["Decline",(null===$e||void 0===$e?void 0:$e.isPending)&&(0,he.jsx)(c.p,{style:{width:"20px",height:"20px",color:"#fff"}})]}),(0,he.jsx)(ue,{jobId:p,variation:Se,reason:ve,isBonus:te,value:"planned"===J?Fe:De,planned:Le,actual:Te,selectedColumn:J,refetch:C,resetAndClose:Ie,nextJobId:h,handleNextJob:u,refetchApprovedTotal:j})]})]});var x}}),(0,he.jsx)(pe.A,{attachments:ze,show:je,setShow:ge})]})},Ce=l.memo((e=>{let{refetchApprovedTotal:t}=e;const{trialHeight:s}=(0,b.$)(),[a,o]=(0,l.useState)(null),[n,c]=(0,l.useState)(null),j=l.useMemo((()=>window.location.href),[]),g=l.useMemo((()=>new URL(j)),[j]),A=l.useMemo((()=>new URLSearchParams(g.search)),[g]),[k,L]=(0,l.useState)(!1),[T,S]=(0,l.useState)(null),{data:B=[],isLoading:F,error:D,refetch:M}=(0,r.I)({queryKey:["jobsToApprove"],queryFn:f,refetchOnWindowFocus:!1,onError:e=>{v.oR.error("Failed to load jobs to approve"),console.error("Error loading jobs to approve:",e)}}),R=l.useCallback((e=>{var t;S(e),L(!0);const s=B.findIndex((t=>t.id===e));c(null===(t=B[s+1])||void 0===t?void 0:t.id)}),[B]),I=l.useCallback((e=>{L(!1),M(),setTimeout((()=>{var t;L(!0),S(e);const s=B.findIndex((t=>t.id===e));c(null===(t=B[s+1])||void 0===t?void 0:t.id)}),300)}),[B]);(0,l.useEffect)((()=>{A.get("approval_id")&&(R(A.get("approval_id")),g.searchParams.delete("approval_id"),window.history.replaceState({},"",g))}),[A,R,g]);const $=l.useCallback((e=>{if(!e)return"N/A";try{const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return`${s} ${l} ${t.getFullYear()}`}catch(t){return console.error("Error formatting date:",t),e||"N/A"}}),[]),H=l.useMemo((()=>B&&0!==B.length?B.reduce(((e,t)=>e+parseFloat(t.total||0)),0):0),[B]),Z=l.useMemo((()=>B&&0!==B.length?B.reduce(((e,t)=>e+parseFloat(t.real_total||0)),0):0),[B]);return(0,l.useEffect)((()=>{D&&v.oR.error(`Error loading jobs to approve: ${D.message||"Please try again later"}`)}),[D]),(0,he.jsxs)(he.Fragment,{children:[(0,he.jsxs)(x.b,{value:B,scrollable:!0,selectionMode:"checkbox",removableSort:!0,columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${s}px)`,className:"border",selection:a,onSelectionChange:e=>o(e.value),emptyMessage:"No jobs to approve",loading:F,loadingIcon:w.A,children:[(0,he.jsx)(m.V,{selectionMode:"multiple",bodyClassName:"show-on-hover",headerStyle:{width:"3rem"},frozen:!0}),(0,he.jsx)(m.V,{field:"number",header:"Job ID",headerClassName:C.verticalTop,body:e=>(0,he.jsxs)("div",{className:"d-flex gap-2 align-items-center justify-content-center show-on-hover",children:[(0,he.jsxs)("div",{className:"d-flex flex-column",style:{lineHeight:"1.385"},children:[(0,he.jsx)("span",{children:e.number}),(0,he.jsx)("span",{className:"font-12",style:{color:"#98A2B3"},children:(0,_.Y)(e.created)})]}),(null===e||void 0===e?void 0:e.is_recurring)&&(0,he.jsx)(p.A,{color:"#158ECC"})]}),style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,he.jsx)(m.V,{field:"type",header:"Job Type",headerClassName:(0,d.A)(C.shadowRight,C.verticalTop),body:e=>"2"===e.type&&"1"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.shift,children:"Shift"}),(0,he.jsx)("div",{className:C.fix,children:"Fix"})]}):"2"===e.type&&"T"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.timeFrame,children:"Time Frame"}),(0,he.jsx)("div",{className:C.fix,children:"Fix"})]}):"3"===e.type&&"1"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.shift,children:"Shift"}),(0,he.jsx)("div",{className:C.hours,children:"Hours"})]}):"3"===e.type&&"T"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.timeFrame,children:"Time Frame"}),(0,he.jsx)("div",{className:C.hours,children:"Hours"})]}):"4"===e.type&&"T"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.timeTracker,children:"Time Tracker"}),(0,he.jsx)("div",{className:C.timeFrame2,children:"Time Frame"})]}):"",style:{minWidth:"100px"},bodyClassName:`${C.shadowRight}`,frozen:!0,sortable:!0}),(0,he.jsx)(m.V,{field:"submitted",header:"Submitted",headerClassName:C.verticalTop,style:{minWidth:"122px"},sortable:!0,body:e=>$(e.submitted)}),(0,he.jsx)(m.V,{field:"worker.first_name",header:()=>(0,he.jsxs)("div",{className:"d-flex align-items-center gap-1",children:["Name",(0,he.jsx)("small",{children:"A\u2192Z"})]}),headerClassName:C.verticalTop,body:e=>{var t,s,l,a,o;const i=`${(null===(t=e.worker)||void 0===t?void 0:t.first_name)||""} ${(null===(s=e.worker)||void 0===s?void 0:s.last_name)||""}`.trim(),n=i?i.split(" ").map((e=>e[0])).join(""):"N/A";return(0,he.jsxs)("div",{className:"d-flex align-items-center",children:[(0,he.jsx)("div",{className:`d-flex justify-content-center align-items-center ${C.clientName}`,children:null!==(l=e.worker)&&void 0!==l&&l.has_photo?(0,he.jsx)(N.Ab,{has_photo:null===(a=e.worker)||void 0===a?void 0:a.has_photo,photo:null===(o=e.worker)||void 0===o?void 0:o.photo,is_business:!1,size:16}):n}),i||"N/A"]})},style:{minWidth:"205px"}}),(0,he.jsx)(m.V,{field:"short_description",header:"Job Reference",headerClassName:C.verticalTop,style:{minWidth:"270px"}}),(0,he.jsx)(m.V,{field:"project.number",header:"Linked To Project",headerClassName:C.verticalTop,body:e=>{var t,s,l,a,o,i,n,r,d,c;return null!==e&&void 0!==e&&e.project?(0,he.jsxs)("div",{className:"d-flex align-items-center",children:[(0,he.jsx)("div",{className:`d-flex justify-content-center align-items-center ${C.clientImg} ${null!==e&&void 0!==e&&null!==(t=e.client)&&void 0!==t&&t.is_business?C.square:"rounded-circle"}`,children:(0,he.jsx)(N.Ab,{photo:null===e||void 0===e||null===(s=e.client)||void 0===s?void 0:s.photo,is_business:(null===e||void 0===e||null===(l=e.client)||void 0===l?void 0:l.is_business)||!1,has_photo:(null===e||void 0===e||null===(a=e.client)||void 0===a?void 0:a.has_photo)||!1})}),(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:null===e||void 0===e||null===(o=e.project)||void 0===o?void 0:o.reference}),(0,he.jsxs)("span",{className:"font-12",style:{color:"#98A2B3"},children:[(0,he.jsx)(h.N_,{className:`${C.linkToProjectCard}`,to:`/management?unique_id=${null===e||void 0===e||null===(i=e.project)||void 0===i?void 0:i.unique_id}&reference=${null===e||void 0===e||null===(n=e.project)||void 0===n?void 0:n.reference}&number=${null===e||void 0===e||null===(r=e.project)||void 0===r?void 0:r.number}`,children:null===e||void 0===e||null===(d=e.project)||void 0===d?void 0:d.number})," | ",null===e||void 0===e||null===(c=e.client)||void 0===c?void 0:c.name]})]})]}):"-"},style:{minWidth:"105px"}}),(0,he.jsx)(m.V,{field:"total",header:()=>(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:"Planned Total"}),(0,he.jsxs)("p",{className:C.totalStyle,children:["$",(0,y.m)(H)]})]}),headerClassName:C.verticalTop,body:e=>`$${(0,y.m)(e.total)}`,style:{minWidth:"105px"},sortable:!0}),(0,he.jsx)(m.V,{field:"real_total",header:()=>(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:"Real Total"}),(0,he.jsxs)("p",{className:C.totalStyle,children:["$",(0,y.m)(Z)]})]}),headerClassName:C.verticalTop,body:e=>(0,he.jsxs)("span",{children:["$",(0,y.m)(e.real_total)]}),style:{minWidth:"105px"},sortable:!0}),(0,he.jsx)(m.V,{field:"id",header:()=>(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:"Actions"}),(0,he.jsx)("p",{className:"pb-2"})]}),body:e=>(0,he.jsx)("div",{className:"d-flex justify-content-center gap-2",children:(0,he.jsxs)(u.$,{onClick:()=>R(e.id),className:`gap-1 status ${C.finishedAction} cursor-pointer`,children:["Review & Action",(0,he.jsx)(i.A,{color:"#079455",size:16})]})}),style:{minWidth:"120px"},bodyClassName:`${C.shadowLeft}`,headerClassName:(0,d.A)(`${C.shadowLeft}`,"d-flex justify-content-center"),frozen:!0,alignFrozen:"right"})]}),(0,he.jsx)(ve,{visible:k,setVisible:L,jobId:T,handleNextJob:I,refetch:M,nextJobId:n,refetchApprovedTotal:t})]})}));var je=s(75218),ge=s(94802);const fe=e=>{let{onWeekChange:t}=e;const[s,a]=(0,l.useState)(null),[o,i]=(0,l.useState)((()=>new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})).getFullYear())),[n,r]=(0,l.useState)({start:"",end:""}),c=(new Date).getFullYear(),p=Array.from({length:5},((e,t)=>c-t)),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return new Date(e.toLocaleString("en-US",{timeZone:"Australia/Sydney"}))},u=e=>{const t=h(e),s=new Date(t);s.setHours(12,1,0,0),s.setDate(s.getDate()-(s.getDay()+6)%7),t<s&&t.setDate(t.getDate()-1);const l=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));l.setUTCDate(l.getUTCDate()+4-(l.getUTCDay()||7));const a=new Date(Date.UTC(l.getUTCFullYear(),0,1));return Math.ceil(((l-a)/864e5+1)/7)},m=(e,t)=>{const s=h(new Date(Date.UTC(t,0,4))),l=s.getDay()||7;s.setDate(s.getDate()-(l-1));const a=new Date(s);a.setDate(a.getDate()+7*(e-1)),a.setHours(12,0,0,0);const o=new Date(a);return o.setDate(o.getDate()+7),{start:a,end:o}},x=e=>e.toLocaleDateString("en-US",{day:"numeric",month:"short"});(0,l.useEffect)((()=>{const e=h(),t=u(e);a(t),v(t,o)}),[]),(0,l.useEffect)((()=>{if(v(s,o),t){const{start:e,end:l}=m(s,o);t({week:s,year:o,startDate:e,endDate:l})}}),[s,o]);const v=(e,t)=>{const{start:s,end:l}=m(e,t);r({start:x(s),end:x(l)})},j=()=>{const e=new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})),t=e.getFullYear();if(o>t)return!0;if(o===t){const t=u(e);if(s>=t)return!0}return!1};return(0,he.jsxs)("div",{className:"d-flex align-items-center w-100",style:{gap:"32px",position:"relative"},children:[(0,he.jsxs)(ge.A,{style:{position:"absolute",right:"16px"},children:[(0,he.jsxs)(ge.A.Toggle,{as:A.A,className:(0,d.A)(C.button,"outline-button mx-auto"),children:[(0,he.jsx)(D.A,{size:16,color:"#667085"}),o]}),(0,he.jsx)(ge.A.Menu,{children:p.map((e=>(0,he.jsx)(ge.A.Item,{onClick:()=>(e=>{const t=parseInt(e),l=new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})),o=l.getFullYear();if(!(t>o)){if(t===o){const e=u(l);s>e&&a(e)}i(t)}})(e),active:e===o,children:e},e)))})]}),(0,he.jsxs)("div",{className:"d-flex align-items-center mx-auto",children:[(0,he.jsx)("button",{className:"border-0",style:{background:"transparent",cursor:"pointer",opacity:1},onClick:()=>{s>1?a(s-1):(i(o-1),a(52))},children:(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:[(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.35355 1.80514C8.54882 2.0004 8.54882 2.31698 8.35355 2.51224L2.70711 8.15869L8.35355 13.8051C8.54882 14.0004 8.54882 14.317 8.35355 14.5122C8.15829 14.7075 7.84171 14.7075 7.64645 14.5122L1.64645 8.51224C1.45118 8.31698 1.45118 8.0004 1.64645 7.80514L7.64645 1.80514C7.84171 1.60988 8.15829 1.60988 8.35355 1.80514Z",fill:"#344054"}),(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.3536 1.80514C12.5488 2.0004 12.5488 2.31698 12.3536 2.51224L6.70711 8.15869L12.3536 13.8051C12.5488 14.0004 12.5488 14.317 12.3536 14.5122C12.1583 14.7075 11.8417 14.7075 11.6464 14.5122L5.64645 8.51224C5.45118 8.31698 5.45118 8.0004 5.64645 7.80514L11.6464 1.80514C11.8417 1.60988 12.1583 1.60988 12.3536 1.80514Z",fill:"#344054"})]})}),(0,he.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{gap:"4px",width:"200px"},children:(0,he.jsxs)("span",{className:"font-14",style:{color:"#344054"},children:["Week ",s," | ",n.start," - ",n.end]})}),(0,he.jsx)("button",{className:"border-0",style:{background:"transparent",cursor:j()?"not-allowed":"pointer",opacity:j()?.5:1},onClick:()=>{j()||(s<52?a(s+1):(i(o+1),a(1)))},disabled:j(),"aria-disabled":j(),children:(0,he.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:[(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.64645 1.80514C3.84171 1.60988 4.15829 1.60988 4.35355 1.80514L10.3536 7.80514C10.5488 8.0004 10.5488 8.31698 10.3536 8.51224L4.35355 14.5122C4.15829 14.7075 3.84171 14.7075 3.64645 14.5122C3.45118 14.317 3.45118 14.0004 3.64645 13.8051L9.29289 8.15869L3.64645 2.51224C3.45118 2.31698 3.45118 2.0004 3.64645 1.80514Z",fill:"#344054"}),(0,he.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64645 1.80514C7.84171 1.60988 8.15829 1.60988 8.35355 1.80514L14.3536 7.80514C14.5488 8.0004 14.5488 8.31698 14.3536 8.51224L8.35355 14.5122C8.15829 14.7075 7.84171 14.7075 7.64645 14.5122C7.45118 14.317 7.45118 14.0004 7.64645 13.8051L13.2929 8.15869L7.64645 2.51224C7.45118 2.31698 7.45118 2.0004 7.64645 1.80514Z",fill:"#344054"})]})})]})]})},be=l.memo((()=>{const{trialHeight:e}=(0,b.$)(),[t,s]=(0,l.useState)(null),[a,o]=(0,l.useState)({week:null,year:null,startDate:null,endDate:null}),i=(0,l.useCallback)((e=>{o(e)}),[]),n=l.useCallback((()=>null!==a&&void 0!==a&&a.week&&null!==a&&void 0!==a&&a.year?(async(e,t)=>{const s=new URL(`${g}/jobs/to-invoice/${e}/${t}/`);return(0,j.f)(s.toString(),{method:"GET"})})(a.year,a.week):Promise.resolve([])),[null===a||void 0===a?void 0:a.week,null===a||void 0===a?void 0:a.year]),{data:c=[],isLoading:u,error:f}=(0,r.I)({queryKey:["jobsToInvoice",null===a||void 0===a?void 0:a.week,null===a||void 0===a?void 0:a.year],queryFn:n,enabled:!(null===a||void 0===a||!a.week)&&!(null===a||void 0===a||!a.year),refetchOnWindowFocus:!0,staleTime:0,onError:e=>{v.oR.error("Failed to load approved jobs for invoicing"),console.error("Error loading jobs to invoice:",e)}}),A=l.useCallback((e=>{if(!e)return"N/A";try{const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return`${s} ${l} ${t.getFullYear()}`}catch(t){return console.error("Error formatting date:",t),e||"N/A"}}),[]),k=l.useMemo((()=>c&&0!==c.length?c.reduce(((e,t)=>e+parseFloat(t.total||0)),0):0),[c]),L=l.useMemo((()=>c&&0!==c.length?c.reduce(((e,t)=>e+parseFloat(t.real_total||0)),0):0),[c]);return(0,l.useEffect)((()=>{f&&v.oR.error(`Error loading jobs to invoice: ${f.message||"Please try again later"}`)}),[f]),(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)("div",{className:"topbar d-flex justify-content-center text-center w-100",style:{padding:"4px 0px",position:"relative",height:"48px",borderTop:"1px solid #dedede",borderBottom:"0px solid #dedede",background:"#F9FAFB"},children:(0,he.jsx)(fe,{onWeekChange:i})}),(0,he.jsxs)(x.b,{value:c||[],scrollable:!0,selectionMode:"checkbox",removableSort:!0,columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${e}px)`,className:"border-0",selection:t,onSelectionChange:e=>s(e.value),emptyMessage:"No approved jobs waiting to be invoiced",loading:u,loadingIcon:w.A,children:[(0,he.jsx)(m.V,{selectionMode:"multiple",bodyClassName:"show-on-hover",headerStyle:{width:"3rem"},frozen:!0}),(0,he.jsx)(m.V,{field:"number",header:"Job ID",headerClassName:C.verticalTop,body:e=>(0,he.jsxs)("div",{className:"d-flex gap-2 align-items-center justify-content-center show-on-hover",children:[(0,he.jsxs)("div",{className:"d-flex flex-column",style:{lineHeight:"1.385"},children:[(0,he.jsx)("span",{children:e.number}),(0,he.jsx)("span",{className:"font-12",style:{color:"#98A2B3"},children:(0,_.Y)(e.created)})]}),(null===e||void 0===e?void 0:e.is_recurring)&&(0,he.jsx)(p.A,{color:"#158ECC"})]}),style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,he.jsx)(m.V,{field:"type",header:"Job Type",headerClassName:(0,d.A)(C.shadowRight,C.verticalTop),body:e=>"2"===e.type&&"1"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.shift,children:"Shift"}),(0,he.jsx)("div",{className:C.fix,children:"Fix"})]}):"2"===e.type&&"T"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.timeFrame,children:"Time Frame"}),(0,he.jsx)("div",{className:C.fix,children:"Fix"})]}):"3"===e.type&&"1"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.shift,children:"Shift"}),(0,he.jsx)("div",{className:C.hours,children:"Hours"})]}):"3"===e.type&&"T"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.timeFrame,children:"Time Frame"}),(0,he.jsx)("div",{className:C.hours,children:"Hours"})]}):"4"===e.type&&"T"===e.time_type?(0,he.jsxs)("div",{className:C.type,children:[(0,he.jsx)("div",{className:C.timeTracker,children:"Time Tracker"}),(0,he.jsx)("div",{className:C.timeFrame2,children:"Time Frame"})]}):"",style:{minWidth:"100px"},bodyClassName:`${C.shadowRight}`,frozen:!0,sortable:!0}),(0,he.jsx)(m.V,{field:"submitted",header:"Approved",headerClassName:C.verticalTop,style:{minWidth:"122px"},sortable:!0,body:e=>A(e.submitted)}),(0,he.jsx)(m.V,{field:"worker.first_name",header:()=>(0,he.jsxs)("div",{className:"d-flex align-items-center gap-1",children:["Name",(0,he.jsx)("small",{children:"A\u2192Z"})]}),headerClassName:C.verticalTop,body:e=>{var t,s,l,a,o;const i=`${(null===(t=e.worker)||void 0===t?void 0:t.first_name)||""} ${(null===(s=e.worker)||void 0===s?void 0:s.last_name)||""}`.trim(),n=i?i.split(" ").map((e=>e[0])).join(""):"N/A";return(0,he.jsxs)("div",{className:"d-flex align-items-center",children:[(0,he.jsx)("div",{className:`d-flex justify-content-center align-items-center ${C.clientName}`,children:null!==(l=e.worker)&&void 0!==l&&l.has_photo?(0,he.jsx)(N.Ab,{has_photo:null===(a=e.worker)||void 0===a?void 0:a.has_photo,photo:null===(o=e.worker)||void 0===o?void 0:o.photo,is_business:!1,size:16}):n}),i||"N/A"]})},style:{minWidth:"205px"}}),(0,he.jsx)(m.V,{field:"short_description",header:"Job Reference",headerClassName:C.verticalTop,style:{minWidth:"270px"}}),(0,he.jsx)(m.V,{field:"project.number",header:"Linked To Project",headerClassName:C.verticalTop,body:e=>{var t,s,l,a,o,i,n,r,d,c;return null!==e&&void 0!==e&&e.project?(0,he.jsxs)("div",{className:"d-flex align-items-center",children:[(0,he.jsx)("div",{className:`d-flex justify-content-center align-items-center ${C.clientImg} ${null!==e&&void 0!==e&&null!==(t=e.client)&&void 0!==t&&t.is_business?C.square:"rounded-circle"}`,children:(0,he.jsx)(N.Ab,{photo:null===e||void 0===e||null===(s=e.client)||void 0===s?void 0:s.photo,is_business:(null===e||void 0===e||null===(l=e.client)||void 0===l?void 0:l.is_business)||!1,has_photo:(null===e||void 0===e||null===(a=e.client)||void 0===a?void 0:a.has_photo)||!1})}),(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:null===e||void 0===e||null===(o=e.project)||void 0===o?void 0:o.reference}),(0,he.jsxs)("span",{className:"font-12",style:{color:"#98A2B3"},children:[(0,he.jsx)(h.N_,{className:`${C.linkToProjectCard}`,to:`/management?unique_id=${null===e||void 0===e||null===(i=e.project)||void 0===i?void 0:i.unique_id}&reference=${null===e||void 0===e||null===(n=e.project)||void 0===n?void 0:n.reference}&number=${null===e||void 0===e||null===(r=e.project)||void 0===r?void 0:r.number}`,children:null===e||void 0===e||null===(d=e.project)||void 0===d?void 0:d.number})," | ",null===e||void 0===e||null===(c=e.client)||void 0===c?void 0:c.name]})]})]}):"-"},style:{minWidth:"105px"}}),(0,he.jsx)(m.V,{field:"real_total",header:()=>(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:"Real Total"}),(0,he.jsxs)("p",{className:C.totalStyle,children:["$",(0,y.m)(L)]})]}),headerClassName:C.verticalTop,body:e=>(0,he.jsxs)("span",{children:["$",(0,y.m)(e.real_total)]}),style:{minWidth:"105px"},sortable:!0}),(0,he.jsx)(m.V,{field:"total",header:()=>(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:"Planned Total"}),(0,he.jsxs)("p",{className:C.totalStyle,children:["$",(0,y.m)(k)]})]}),headerClassName:C.verticalTop,body:e=>`$${(0,y.m)(e.total)}`,style:{minWidth:"105px"},sortable:!0}),(0,he.jsx)(m.V,{field:"id",header:()=>(0,he.jsxs)("div",{className:"d-flex flex-column",children:[(0,he.jsx)("span",{children:"Actions"}),(0,he.jsx)("p",{className:"pb-2"})]}),body:()=>(0,he.jsx)(je.v,{className:`status ${C.approved}`,label:"Approved"}),style:{minWidth:"120px"},bodyClassName:(0,d.A)(`${C.shadowLeft}`,"text-center"),headerClassName:(0,d.A)(`${C.shadowLeft}`,"d-flex justify-content-center"),frozen:!0,alignFrozen:"right"})]})]})})),_e=()=>{var e;const[t,s]=(0,l.useState)("review-approve"),[p,h]=(0,l.useState)(null),[u,m]=(0,l.useState)((()=>new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})).getFullYear())),[x,v]=(0,l.useState)({start:"",end:""}),[f,b]=(0,l.useState)("");(0,l.useEffect)((()=>{if(null===x||void 0===x||!x.end)return;const e=setInterval((()=>{const t=new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})),s=x.end.getTime()-t.getTime();if(s<=0)return b("0d 0h 0m"),void clearInterval(e);const l=Math.floor(s/864e5),a=Math.floor(s%864e5/36e5),o=Math.floor(s%36e5/6e4);b(`${l}d ${a}h ${o}m`)}),6e4),t=new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})),s=x.end.getTime()-t.getTime(),l=Math.floor(s/864e5),a=Math.floor(s%864e5/36e5),o=Math.floor(s%36e5/6e4);return b(`${l}d ${a}h ${o}m`),()=>clearInterval(e)}),[x]);const _=(0,r.I)({queryKey:["toInvoice",u,p],queryFn:()=>(async(e,t)=>{const s=new URL(`${g}/jobs/to-invoice/total/${e}/${t}/`);return(0,j.f)(s.toString(),{method:"GET"})})(u,p),enabled:!!p&&!!u,retry:1,cacheTime:0,staleTime:0}),w=(0,l.useCallback)(((e,t)=>{const{start:s,end:l}=((e,t)=>{const s=new Date(new Date(Date.UTC(t,0,4)).toLocaleString("en-US",{timeZone:"Australia/Sydney"})),l=s.getDay()||7;s.setDate(s.getDate()-(l-1));const a=new Date(s);a.setDate(a.getDate()+7*(e-1)),a.setHours(12,0,0,0);const o=new Date(a);return o.setDate(o.getDate()+7),{start:a,end:o}})(e,t);v({start:s,end:l})}),[]),N=(0,l.useCallback)((e=>{const t=new Date(e.toLocaleString("en-US",{timeZone:"Australia/Sydney"})),s=new Date(t);s.setHours(12,1,0,0),s.setDate(s.getDate()-(s.getDay()+6)%7),t<s&&t.setDate(t.getDate()-1);const l=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));l.setUTCDate(l.getUTCDate()+4-(l.getUTCDay()||7));const a=new Date(Date.UTC(l.getUTCFullYear(),0,1));return Math.ceil(((l-a)/864e5+1)/7)}),[]);return(0,l.useEffect)((()=>{const e=new Date((new Date).toLocaleString("en-US",{timeZone:"Australia/Sydney"})),t=N(e);h(t),w(t,u)}),[u,N,w]),(0,he.jsxs)("div",{className:"approval-page",children:[(0,he.jsx)(n.mg,{children:(0,he.jsx)("title",{children:"MeMate - Approval"})}),(0,he.jsxs)("div",{className:"topbar",style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,he.jsxs)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:[(0,he.jsx)("div",{className:"filtered-box",children:(0,he.jsx)("button",{className:`${C.filterBox}`,children:(0,he.jsx)(a.A,{size:20})})}),(0,he.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,he.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,he.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,he.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,he.jsx)("input",{type:"text",placeholder:"Search",onChange:()=>{},className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]}),(0,he.jsx)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,he.jsxs)("div",{className:(0,d.A)(C.approvalTab,"d-flex align-items-center gap-2"),children:[(0,he.jsxs)("button",{className:(0,d.A)(C.tabButton,"review-approve"===t&&C.activeReviewApprove),onClick:()=>s("review-approve"),children:[(0,he.jsx)(o.A,{size:20,color:"#17B26A"})," Review & Approve"]}),(0,he.jsxs)("button",{className:(0,d.A)(C.tabButton,"approved"===t&&C.activeApproved),onClick:()=>s("approved"),children:[(0,he.jsx)(i.A,{size:20,color:"#1AB2FF"})," Approved Current Week:",(0,he.jsx)("div",{style:{minWidth:"50px",textAlign:"left"},children:null!==_&&void 0!==_&&_.isFetching?(0,he.jsx)(c.p,{style:{width:"18px",height:"18px"}}):(0,he.jsxs)("span",{style:{color:"#106B99",fontWeight:600},children:["$",(0,y.m)((null===_||void 0===_||null===(e=_.data)||void 0===e?void 0:e.total_amount)||0)]})})]})]})}),(0,he.jsx)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:(0,he.jsxs)("div",{className:"d-flex gap-1",children:[(0,he.jsx)("span",{className:"font-12",children:"This Week\u2019s Approval Period Closes In: "}),(0,he.jsx)("span",{className:"font-12",style:{fontWeight:600},children:f})]})})]}),"review-approve"===t&&(0,he.jsx)(Ce,{refetchApprovedTotal:()=>_.refetch()}),"approved"===t&&(0,he.jsx)(be,{})]})}},99868:(e,t,s)=>{s.d(t,{A:()=>x});var l=s(65043),a=s(14282),o=s(38294),i=s(35475),n=s(58387);const r="no-data-found-template_noDataBox__HgeT1",d="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",p="no-data-found-template_supportext__pHg2P";var h=s(20793),u=s(32808),m=s(70579);const x=e=>{let{isDataExist:t=!0}=e;const[s,x]=(0,l.useState)(!1);return(0,m.jsxs)("div",{className:(0,n.A)(r),children:[(0,m.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,m.jsx)("img",{src:h,alt:"no-data"})}),t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h2",{className:(0,n.A)(d),children:"There is no results"}),(0,m.jsxs)("p",{className:(0,n.A)(c),children:["The user you are looking for doesn't exist. ",(0,m.jsx)("br",{}),"Here are some helpful links:"]}),(0,m.jsx)(i.N_,{to:"/",children:(0,m.jsxs)(a.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,m.jsx)(o.A,{})," Go back"]})}),(0,m.jsx)(i.N_,{onClick:()=>x(!0),to:"#",children:(0,m.jsx)("span",{className:(0,n.A)(p),children:"Support"})})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("h2",{className:(0,n.A)(d),children:"No historical records yet."})}),(0,m.jsx)(u.A,{setVisible:x,visible:s})]})}}}]);
//# sourceMappingURL=2852.5cd15468.chunk.js.map