"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[126],{4488:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65043),l=s(98139),i=s.n(l),r=s(70579);const a=e=>n.forwardRef(((t,s)=>(0,r.jsx)("div",{...t,ref:s,className:i()(t.className,e)})))},10586:(e,t,s)=>{s.d(t,{$R:()=>o,Bu:()=>a,D3:()=>u,JP:()=>r,Rv:()=>d,Wz:()=>x,a_:()=>p,eY:()=>c,ik:()=>h,md:()=>i});var n=s(31342);const l="https://dev.memate.com.au/api/v1",i=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0;const a=(e-1)*t,o=new URL(`${l}/expenses/`);return o.searchParams.append("limit",t),o.searchParams.append("offset",a),s&&o.searchParams.append("search",s),i&&o.searchParams.append("ordering",i),r&&o.searchParams.append("status","not_paid"),(0,n.f)(o.toString(),{method:"GET"})},r=async()=>{const e=new URL(`${l}/references/xero-codes/`);return(0,n.f)(e.toString(),{method:"GET"})},a=async()=>{const e=new URL(`${l}/references/projects/`);return(0,n.f)(e.toString(),{method:"GET"})},o=async e=>{const t=new URL(`${l}${`/expenses/update/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},d=async e=>{const t={method:"POST",body:e},s=new URL(`${l}/expenses/new/`);return(0,n.f)(s.toString(),t)},c=async(e,t)=>{const s={method:"PUT",body:t},i=new URL(`${l}${`/expenses/update/${e}/`}`);return(0,n.f)(i.toString(),s)},u=async e=>{const t={method:"POST",body:e},s=new URL(`${l}/expenses/paid/`);return(0,n.f)(s.toString(),t)},h=async e=>{const t={method:"POST",body:e},s=new URL(`${l}/expenses/unpaid/`);return(0,n.f)(s.toString(),t)},p=async e=>{const t={method:"PUT",body:e},s=new URL(`${l}/expenses/to-xero/`);return(0,n.f)(s.toString(),t)},x=async e=>{const t=new URL(`${l}${`/expenses/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})}},19334:(e,t,s)=>{s.d(t,{A:()=>l});const n=s(65043).createContext(null);n.displayName="InputGroupContext";const l=n},20793:(e,t,s)=>{e.exports=s.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},22927:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(65043),l=s(65173),i=s.n(l),r=["color","size","title","className"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a.apply(null,arguments)}var o=(0,n.forwardRef)((function(e,t){var s=e.color,l=void 0===s?"currentColor":s,i=e.size,o=void 0===i?"1em":i,d=e.title,c=void 0===d?null:d,u=e.className,h=void 0===u?"":u,p=function(e,t){if(null==e)return{};var s,n,l=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,r);return n.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:o,height:o,fill:l,className:["bi","bi-file-text",h].filter(Boolean).join(" ")},p),c?n.createElement("title",null,c):null,n.createElement("path",{d:"M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5M5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"}),n.createElement("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"}))}));o.propTypes={color:i().string,size:i().oneOfType([i().string,i().number]),title:i().string,className:i().string};const d=o},31342:(e,t,s)=>{s.d(t,{f:()=>n});const n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{method:n="GET",headers:l={},body:i}=t,r=localStorage.getItem("access_token"),a=i instanceof FormData,o={"Content-Type":a?"multipart/form-data":"application/json",...l};s&&(o.Authorization=`Bearer ${r}`);const d={method:n,headers:o,body:a?i:JSON.stringify(i),redirect:"follow"};try{const t=new URL(e),s=await fetch(t,d),n=s.headers.get("Content-Type");if(!s.ok){var c;let e=null;e=n&&n.includes("application/json")?await s.json():await s.text(),401===s.status&&(localStorage.clear(),sessionStorage.clear(),window.location.replace("/login"));const t=new Error((null===(c=e)||void 0===c?void 0:c.message)||`HTTP error! Status: ${s.status}`);throw t.status=s.status,t.data=e,t}if(n&&n.includes("application/json"))return await s.json();return{message:"Non-JSON response",body:await s.text()}}catch(u){throw console.error("Fetch API error:",u),u}}},33183:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(65043),l=s(65173),i=s.n(l),r=["color","size","title","className"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a.apply(null,arguments)}var o=(0,n.forwardRef)((function(e,t){var s=e.color,l=void 0===s?"currentColor":s,i=e.size,o=void 0===i?"1em":i,d=e.title,c=void 0===d?null:d,u=e.className,h=void 0===u?"":u,p=function(e,t){if(null==e)return{};var s,n,l=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,r);return n.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:o,height:o,fill:l,className:["bi","bi-arrow-right",h].filter(Boolean).join(" ")},p),c?n.createElement("title",null,c):null,n.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"}))}));o.propTypes={color:i().string,size:i().oneOfType([i().string,i().number]),title:i().string,className:i().string};const d=o},47994:(e,t,s)=>{s.d(t,{A:()=>p});var n=s(98139),l=s.n(n),i=s(65043),r=s(67852),a=s(21068),o=s(19334),d=s(70579);const c=i.forwardRef(((e,t)=>{let{className:s,bsPrefix:n,as:i="span",...a}=e;return n=(0,r.oU)(n,"input-group-text"),(0,d.jsx)(i,{ref:t,className:l()(s,n),...a})}));c.displayName="InputGroupText";const u=c,h=i.forwardRef(((e,t)=>{let{bsPrefix:s,size:n,hasValidation:a,className:c,as:u="div",...h}=e;s=(0,r.oU)(s,"input-group");const p=(0,i.useMemo)((()=>({})),[]);return(0,d.jsx)(o.A.Provider,{value:p,children:(0,d.jsx)(u,{ref:t,...h,className:l()(c,s,n&&`${s}-${n}`,a&&"has-validation")})})}));h.displayName="InputGroup";const p=Object.assign(h,{Text:u,Radio:e=>(0,d.jsx)(u,{children:(0,d.jsx)(a.A,{type:"radio",...e})}),Checkbox:e=>(0,d.jsx)(u,{children:(0,d.jsx)(a.A,{type:"checkbox",...e})})})},63040:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(65043),l=s(65173),i=s.n(l),r=["color","size","title","className"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a.apply(null,arguments)}var o=(0,n.forwardRef)((function(e,t){var s=e.color,l=void 0===s?"currentColor":s,i=e.size,o=void 0===i?"1em":i,d=e.title,c=void 0===d?null:d,u=e.className,h=void 0===u?"":u,p=function(e,t){if(null==e)return{};var s,n,l=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,r);return n.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:o,height:o,fill:l,className:["bi","bi-calendar2-event",h].filter(Boolean).join(" ")},p),c?n.createElement("title",null,c):null,n.createElement("path",{d:"M11 7.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z"}),n.createElement("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"}),n.createElement("path",{d:"M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5z"}))}));o.propTypes={color:i().string,size:i().oneOfType([i().string,i().number]),title:i().string,className:i().string};const d=o},75329:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(65043),l=s(65173),i=s.n(l),r=["color","size","title","className"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a.apply(null,arguments)}var o=(0,n.forwardRef)((function(e,t){var s=e.color,l=void 0===s?"currentColor":s,i=e.size,o=void 0===i?"1em":i,d=e.title,c=void 0===d?null:d,u=e.className,h=void 0===u?"":u,p=function(e,t){if(null==e)return{};var s,n,l=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}(e,r);return n.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:o,height:o,fill:l,className:["bi","bi-download",h].filter(Boolean).join(" ")},p),c?n.createElement("title",null,c):null,n.createElement("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"}),n.createElement("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"}))}));o.propTypes={color:i().string,size:i().oneOfType([i().string,i().number]),title:i().string,className:i().string};const d=o},96440:e=>{var t=function(){};e.exports=t},97810:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var n=s(65043),l=s(14282),i=s(75329),r=s(39759),a=s(49367),o=s(2028),d=s(22927),c=s(58387),u=s(72018),h=s(9642),p=s(64824);const x={active:"task_active__XHjXL",selectedCount:"task_selectedCount__KCjbh",filterBox:"task_filterBox__Vl8TJ",newButton:"task_newButton__FgzVj",total:"task_total__iv2al",totalCount:"task_totalCount__g7jIX",shadowRight:"task_shadowRight__POYJ0",clientName:"task_clientName__bfmFM",complete:"task_complete__zEIDq",pending:"task_pending__4JfNO",projectImg:"task_projectImg__SdMAS",projectText:"task_projectText__2Lg5C",projectNumber:"task_projectNumber__bQcj7"};var m=s(79106),v=s(48417),g=s(58027),j=s(27734),f=s(99868),y=s(33183),b=s(93747),w=s(47097),N=s(32952),A=s(65975),_=s(72796),C=s(42265),k=s(42052),T=s(47994),S=s(51038),B=s(95192),O=s(88060),$=s(73722),E=s(56328),z=s(10586),F=s(57189),P=s(12532),R=s(84678),I=s(35470),L=s(70579);const D=e=>{if(!e)return null;return new Date(1e3*+e)},M=e=>{var t,s,i,r,a,o,d,c,u,h;let{show:p,setShow:x,refetch:v,taskId:j,setTaskId:f,defaultValue:y}=e;const A=(0,n.useRef)(null),{session:C}=(0,F.As)(),[k,M]=(0,n.useState)(!1),[V,U]=(0,n.useState)(""),[H,q]=(0,n.useState)(""),[G,W]=(0,n.useState)(""),[J,Z]=(0,n.useState)(null),[K,X]=(0,n.useState)(null),[Y,Q]=(0,n.useState)({taskTitle:!1,description:!1,project:!1,user:!1,date:!1});(0,n.useEffect)((()=>{var e,t;j&&y&&(U(null===y||void 0===y?void 0:y.title),q(null===y||void 0===y?void 0:y.description),W(null===y||void 0===y||null===(e=y.project)||void 0===e?void 0:e.id),Z(null===y||void 0===y||null===(t=y.user)||void 0===t?void 0:t.id),X({startDate:D(null===y||void 0===y?void 0:y.from_date),endDate:D(null===y||void 0===y?void 0:y.to_date)}))}),[j,y]);const ee=()=>{U(""),q(""),W(""),Z(null),X(null),M(!1),Q({taskTitle:!1,description:!1,project:!1,user:!1,date:!1})},te=(0,b.I)({queryKey:["getProjectsList"],queryFn:z.Bu}),se=(0,b.I)({queryKey:["getUserList"],queryFn:m.aU}),ne=(0,b.I)({queryKey:["getMobileUserList"],queryFn:m.gy});(0,n.useEffect)((()=>{p||ee()}),[p]);const le=(0,w.n)({mutationFn:e=>j?(0,m.lC)(j,e):(0,m.Af)(e),onSuccess:()=>{v(),x(!1),ee(),j&&f(null),E.oR.success(`Task ${j?"updated":"created"} successfully`)},onError:e=>{console.error(`Error ${j?"updating":"creating"} task:`,e),E.oR.error(`Failed to ${j?"update":"create"} client. Please try again.`)}});(0,n.useEffect)((()=>{if(k){Q({taskTitle:!V,description:!H,project:!G,user:!J,date:!K})}}),[V,H,G,J,K,k]);const ie=(0,w.n)({mutationFn:e=>(0,_.mM)(j),onSuccess:()=>{console.log("Delete success"),x(!1),v()},onError:e=>{console.error("Error creating task:",e)}});return(0,L.jsxs)(N.A,{show:p,centered:!0,onHide:()=>x(!1),className:"task-form",children:[(0,L.jsx)(N.A.Header,{closeButton:!0,children:(0,L.jsxs)(N.A.Title,{children:[(0,L.jsx)("img",{src:j?P.A:R.A,alt:"task-details",style:{width:"48px",height:"48px"}}),(0,L.jsxs)("span",{className:"modal-task-title",children:[j?"Edit":"New"," Task"]})]})}),(0,L.jsxs)(N.A.Body,{style:{background:"#f9fafb"},children:[(0,L.jsxs)($.A.Group,{className:"mb-3",children:[(0,L.jsx)($.A.Label,{children:"Task Title"}),(0,L.jsxs)(T.A,{children:[(0,L.jsx)($.A.Control,{required:!0,type:"text",placeholder:"Enter task title",value:V,onChange:e=>U(e.target.value)}),(0,L.jsx)(T.A.Text,{children:(0,L.jsx)(S.A,{})})]}),Y.taskTitle&&(0,L.jsx)($.A.Text,{className:"text-danger",children:"Task title is required"})]}),(0,L.jsxs)($.A.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,L.jsx)($.A.Label,{children:"Description"}),(0,L.jsx)($.A.Control,{as:"textarea",rows:3,placeholder:"Enter a description...",value:H,onChange:e=>q(e.target.value),required:!0}),Y.description&&(0,L.jsx)($.A.Text,{className:"text-danger",children:"Description is required"})]}),(0,L.jsxs)($.A.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,L.jsx)($.A.Label,{children:"Project Task"}),(0,L.jsx)(O.m,{options:(null===te||void 0===te||null===(t=te.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:`${e.number}: ${e.reference}`}))))||[],onChange:e=>{W(e.value),console.log("e.value: ",e.value)},className:"w-100 outline-none",style:{height:"46px"},value:G,loading:null===te||void 0===te?void 0:te.isFetching,placeholder:"Select project",filter:!0}),Y.project&&(0,L.jsx)($.A.Text,{className:"text-danger",children:"Project task is required"})]})]}),(0,L.jsxs)("div",{className:"d-flex align-items-center border-top px-3 py-2",children:[(0,L.jsxs)("div",{className:"d-flex align-items-center gap-4",children:[!J&&(0,L.jsx)(B.A,{color:null!==(s=A.current)&&void 0!==s&&null!==(i=s.panel)&&void 0!==i&&null!==(r=i.element)&&void 0!==r&&r.offsetParent?"#1AB2FF":"#475467",size:22,style:{position:"relative",left:"10px",zIndex:1},onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.show()},className:"me-3 cursor-pointer"}),(0,L.jsx)(O.m,{ref:A,options:[{label:"Desktop User",items:(null===se||void 0===se||null===(a=se.data)||void 0===a||null===(o=a.users)||void 0===o||null===(d=o.filter((e=>null===e||void 0===e?void 0:e.is_active)))||void 0===d?void 0:d.map((e=>({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}`||(null===e||void 0===e?void 0:e.first_name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]},...null!==C&&void 0!==C&&C.has_work_subscription?[{label:"Mobile User",items:(null===ne||void 0===ne||null===(c=ne.data)||void 0===c||null===(u=c.users)||void 0===u||null===(h=u.filter((e=>"disconnected"!==(null===e||void 0===e?void 0:e.status))))||void 0===h?void 0:h.map((e=>({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}`||(null===e||void 0===e?void 0:e.first_name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]}]:[]],onChange:e=>{Z(e.value)},valueTemplate:e=>(0,L.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,L.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"0px solid #dedede"},children:(0,L.jsx)(g.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}),itemTemplate:e=>(0,L.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,L.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,L.jsx)(g.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}),className:"outline-none border-0 p-0",style:{width:J?"fit-content":"0px",height:J?"46px":"0px",zIndex:J?"1":"0",position:"relative",left:J?"0px":"-60px",top:J?"0px":"-15px"},value:J,dropdownIcon:(0,L.jsx)(L.Fragment,{}),collapseIcon:(0,L.jsx)(L.Fragment,{}),placeholder:"Select project",filter:!0,optionGroupLabel:"label",optionGroupChildren:"items"})]}),(0,L.jsx)(I.A,{dateRange:K,setDateRange:X})]}),(Y.user||Y.date)&&(0,L.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"16px",padding:"0 30px 8px 30px"},children:[Y.user&&(0,L.jsx)($.A.Text,{className:"text-danger",children:"User is required"}),Y.date&&(0,L.jsx)($.A.Text,{className:"text-danger",children:"Date is required"})]}),(0,L.jsxs)(N.A.Footer,{className:"d-flex justify-content-between",children:[(0,L.jsx)(l.A,{type:"button",className:"delete-button",onClick:()=>{ie.mutate()},children:ie.isPending?"Loading...":"Delete Task"}),(0,L.jsx)(l.A,{type:"button",className:"save-button",onClick:()=>{M(!0);const e={taskTitle:!V,description:!H,project:!G,user:!J,date:!K};Q(e),e.taskTitle||e.description||e.user||e.date||le.mutate({title:V,description:H,project:G,user:J,from_date:K.startDate,to_date:K.endDate})},children:le.isPending?"Loading...":(j?"Update":"Create")+" Task"})]})]})},V=()=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary",size:"lg"})}),(0,L.jsx)(A.A,{as:"p",animation:"wave",children:(0,L.jsx)(A.A,{xs:12,bg:"secondary",style:{height:"80px"},size:"lg"})}),(0,L.jsx)("table",{className:"task-deatils-table w-100",children:(0,L.jsxs)("tbody",{children:[(0,L.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})}),(0,L.jsx)("td",{style:{paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})})]}),(0,L.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})}),(0,L.jsx)("td",{style:{paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})})]}),(0,L.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})}),(0,L.jsx)("td",{style:{paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})})]}),(0,L.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})}),(0,L.jsx)("td",{style:{paddingBottom:"12px"},children:(0,L.jsx)(A.A,{as:"p",animation:"wave",style:{marginBottom:"4px"},children:(0,L.jsx)(A.A,{xs:12,bg:"secondary"})})})]})]})})]}),U=e=>{var t,s;let{view:i,setView:r,taskId:a,setTaskId:o,reInitialize:d}=e;const[c,u]=(0,n.useState)(!1),{isFetching:h,data:p}=(0,b.I)({queryKey:["taskId",a],queryFn:()=>(0,m.gg)(a),enabled:!!a,retry:1,cacheTime:0}),x=(0,w.n)({mutationFn:e=>(0,_._x)(a,e),onSuccess:()=>{v(),o(null),d()},onError:e=>{console.error("Error updating task:",e)}}),v=()=>r(!1),g=e=>{var t;if(!e)return"-";return null===(t=new Date(1e3*+e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))||void 0===t?void 0:t.replace(/,/g,"")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(N.A,{show:i,centered:!0,onHide:v,children:[(0,L.jsx)(N.A.Header,{closeButton:!0,children:(0,L.jsxs)(N.A.Title,{children:[(0,L.jsx)("img",{src:k.A,alt:"task-details",style:{width:"48px",height:"48px"}}),(0,L.jsx)("span",{className:"modal-task-title",children:"Task Details"})]})}),(0,L.jsx)(N.A.Body,{children:h?(0,L.jsx)(V,{}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("p",{className:"task-title",children:(null===p||void 0===p?void 0:p.title)||"-"}),(0,L.jsx)("p",{className:"task-description",children:(null===p||void 0===p?void 0:p.description)||"-"}),(0,L.jsx)("table",{className:"task-deatils-table",children:(0,L.jsxs)("tbody",{children:[(0,L.jsxs)("tr",{style:{marginBottom:"12px"},children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"Project Task"}),(0,L.jsx)("td",{style:{paddingBottom:"12px"},children:null!==p&&void 0!==p&&p.project&&p.project.reference?p.project.reference:"-"})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"ID"}),(0,L.jsx)("td",{style:{paddingBottom:"12px"},children:(null===p||void 0===p?void 0:p.number)||"-"})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"Assigned"}),(0,L.jsxs)("td",{style:{paddingBottom:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[(0,L.jsx)("img",{src:null!==p&&void 0!==p&&null!==(t=p.user)&&void 0!==t&&t.has_photo?null===p||void 0===p?void 0:p.user.photo:C.A,alt:"img-assigned",style:{width:"24px",height:"24px",borderRadius:"50%"}}),(0,L.jsx)("span",{children:(null===p||void 0===p||null===(s=p.user)||void 0===s?void 0:s.full_name)||"-"})]})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{style:{width:"122px",paddingBottom:"12px"},children:"Date"}),(0,L.jsxs)("td",{style:{paddingBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,L.jsx)("span",{children:g(null===p||void 0===p?void 0:p.from_date)}),(0,L.jsx)(y.A,{size:20,color:"#475467"}),(0,L.jsx)("span",{children:g(null===p||void 0===p?void 0:p.to_date)})]})]})]})})]})}),h?(0,L.jsxs)(N.A.Footer,{children:[(0,L.jsx)(A.A,{as:"p",animation:"wave",children:(0,L.jsx)(A.A,{xs:12,bg:"secondary",style:{height:"40px",width:"93px",borderRadius:"4px"},size:"lg"})}),(0,L.jsx)(A.A,{as:"p",animation:"wave",children:(0,L.jsx)(A.A,{xs:12,bg:"secondary",style:{height:"40px",width:"93px",borderRadius:"4px"},size:"lg"})})]}):(0,L.jsxs)(N.A.Footer,{children:[(0,L.jsx)(l.A,{className:"edit-button",onClick:function(){v(),u(!0)},children:"Edit Task"}),null!==p&&void 0!==p&&p.finished?(0,L.jsx)(l.A,{className:"incomplete-button",onClick:()=>x.mutate(!1),children:x.isPending?(0,L.jsx)(L.Fragment,{children:"Loading..."}):(0,L.jsxs)(L.Fragment,{children:["Incomplete",(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,L.jsx)("path",{d:"M20 10.5C20 16.0228 15.5228 20.5 10 20.5C4.47715 20.5 0 16.0228 0 10.5C0 4.97715 4.47715 0.5 10 0.5C15.5228 0.5 20 4.97715 20 10.5ZM15.0379 6.71209C14.6718 6.34597 14.0782 6.34597 13.7121 6.71209C13.7032 6.72093 13.6949 6.73029 13.6872 6.74013L9.34674 12.2709L6.72985 9.65403C6.36373 9.28791 5.77014 9.28791 5.40402 9.65403C5.0379 10.0201 5.0379 10.6137 5.40402 10.9799L8.71208 14.2879C9.0782 14.654 9.67179 14.654 10.0379 14.2879C10.0461 14.2798 10.0538 14.2712 10.061 14.2622L15.0512 8.02434C15.404 7.65727 15.3995 7.07371 15.0379 6.71209Z",fill:"#F04438"})})]})}):(0,L.jsx)(l.A,{className:"complete-button",onClick:()=>x.mutate(!0),children:x.isPending?(0,L.jsx)(L.Fragment,{children:"Loading..."}):(0,L.jsxs)(L.Fragment,{children:["Complete",(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:(0,L.jsx)("path",{d:"M20 10.5C20 16.0228 15.5228 20.5 10 20.5C4.47715 20.5 0 16.0228 0 10.5C0 4.97715 4.47715 0.5 10 0.5C15.5228 0.5 20 4.97715 20 10.5ZM15.0379 6.71209C14.6718 6.34597 14.0782 6.34597 13.7121 6.71209C13.7032 6.72093 13.6949 6.73029 13.6872 6.74013L9.34674 12.2709L6.72985 9.65403C6.36373 9.28791 5.77014 9.28791 5.40402 9.65403C5.0379 10.0201 5.0379 10.6137 5.40402 10.9799L8.71208 14.2879C9.0782 14.654 9.67179 14.654 10.0379 14.2879C10.0461 14.2798 10.0538 14.2712 10.061 14.2622L15.0512 8.02434C15.404 7.65727 15.3995 7.07371 15.0379 6.71209Z",fill:"#17B26A"})})]})})]})]}),(0,L.jsx)(M,{show:c,setShow:u,taskId:a,setTaskId:o,defaultValue:p,refetch:d})]})},H=e=>{const t=new Date(1e3*e);return`${t.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(t)} ${t.getFullYear()}`},q=(0,n.forwardRef)(((e,t)=>{let{searchValue:s,setTotal:l,selected:i,setSelected:r,refetch:a,setRefetch:o}=e;const{trialHeight:y}=(0,v.$)(),b=(0,n.useRef)(null),[w,N]=(0,n.useState)(!1),[A,_]=(0,n.useState)(null),[C,k]=(0,n.useState)(1),[T,S]=(0,n.useState)([]),[B,O]=(0,n.useState)({sortField:"id",sortOrder:-1}),[$,E]=(0,n.useState)({sortField:"id",sortOrder:-1}),[z,F]=(0,n.useState)(!0),[P,R]=(0,n.useState)(!1);(0,n.useEffect)((()=>{k(1)}),[s,a]),(0,n.useEffect)((()=>{(async()=>{R(!0);let e="";1===(null===$||void 0===$?void 0:$.sortOrder)?e=`${$.sortField}`:-1===(null===$||void 0===$?void 0:$.sortOrder)&&(e=`-${$.sortField}`);const t=await(0,m.U9)(C,25,s,e);var n;(l((()=>(null===t||void 0===t?void 0:t.count)||0)),1===C)?S(t.results):(null===t||void 0===t||null===(n=t.results)||void 0===n?void 0:n.length)>0&&S((e=>{const s=new Set(e.map((e=>e.id))),n=t.results.filter((e=>!s.has(e.id)));return[...e,...n]}));O($),F(t.count!==T.length),R(!1)})()}),[C,s,$,a]),(0,n.useEffect)((()=>{if(T.length>0&&z){b.current=new IntersectionObserver((e=>{e[0].isIntersecting&&k((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&b.current.observe(e)}return()=>{b.current&&b.current.disconnect()}}),[T,z]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(p.b,{ref:t,value:T,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${y}px)`,className:"border",selection:i,onSelectionChange:e=>r(e.value),loading:P,loadingIcon:j.A,emptyMessage:(0,L.jsx)(f.A,{isDataExist:!!s}),sortField:null===B||void 0===B?void 0:B.sortField,sortOrder:null===B||void 0===B?void 0:B.sortOrder,onSort:e=>{const{sortField:t,sortOrder:s}=e;E({sortField:t,sortOrder:s}),k(1)},rowClassName:e=>null!==e&&void 0!==e&&e.deleted?x.deletedRow:"",children:[(0,L.jsx)(h.V,{selectionMode:"multiple",headerClassName:"ps-4 border-end-0",bodyClassName:"show-on-hover border-end-0 ps-4",headerStyle:{width:"3rem",textAlign:"center"},frozen:!0}),(0,L.jsx)(h.V,{field:"number",header:"Task ID",body:e=>(0,L.jsxs)("div",{className:"d-flex align-items-center justify-content-center show-on-hover",children:[(0,L.jsx)("div",{children:e.number}),(0,L.jsx)(u.$,{label:"Open",onClick:()=>{_(null===e||void 0===e?void 0:e.id),N(!0)},className:"primary-text-button ms-3 show-on-hover-element",text:!0})]}),style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,L.jsx)(h.V,{field:"title",header:"Task Title",body:e=>(0,L.jsx)("div",{className:"ellipsis-width",style:{maxWidth:"300px"},children:e.title}),style:{minWidth:"150px"},bodyClassName:`${x.shadowRight}`,headerClassName:`${x.shadowRight}`,frozen:!0}),(0,L.jsx)(h.V,{field:"user.full_name",header:"Assigne",body:e=>{var t,s,n,l;const i=`${null===e||void 0===e?void 0:e.user.full_name}`,r=`${null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.alias}`;return(0,L.jsxs)("div",{className:"d-flex align-items-center",children:[(0,L.jsx)("div",{className:`d-flex justify-content-center align-items-center ${x.clientName}`,style:{width:"30px",height:"30px",borderRadius:"50%",overflow:"hidden"},children:null!==e&&void 0!==e&&null!==(s=e.user)&&void 0!==s&&s.has_photo?(0,L.jsx)(g.A,{has_photo:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.has_photo,photo:null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.photo,is_business:!1}):r}),i]})},style:{minWidth:"208px"}}),(0,L.jsx)(h.V,{field:"finished",header:"Status",body:e=>(0,L.jsx)("div",{className:`${x.time} ${e.finished?x.complete:x.pending}`,children:e.finished?"Complete":"Not Complete"}),style:{minWidth:"120px"}}),(0,L.jsx)(h.V,{field:"project.reference",header:"Project",body:e=>{var t,s;return(0,L.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,L.jsx)("div",{className:(0,c.A)(x.projectImg,"d-flex align-items-center justify-content-center"),children:(0,L.jsx)(d.A,{color:"#475467",size:13})}),(0,L.jsxs)("div",{style:{lineHeight:"1.385"},children:[(0,L.jsx)("h1",{className:(0,c.A)(x.projectText,"mb-0"),children:null===e||void 0===e||null===(t=e.project)||void 0===t?void 0:t.reference}),(0,L.jsx)("h6",{className:(0,c.A)(x.projectNumber,"mb-0"),children:null===e||void 0===e||null===(s=e.project)||void 0===s?void 0:s.number})]})]})},style:{minWidth:"460px"}}),(0,L.jsx)(h.V,{field:"from_date",header:"Start Date",body:e=>H(e.from_date),style:{minWidth:"100px"},sortable:!0}),(0,L.jsx)(h.V,{field:"to_date",header:"Due Date",body:e=>H(e.to_date),style:{minWidth:"100px"},sortable:!0})]}),(0,L.jsx)(U,{view:w,setView:N,taskId:A,setTaskId:_,reInitialize:()=>o((e=>!e))})]})})),G=q,W=()=>{const e=(0,n.useRef)(null),[t,s]=(0,n.useState)(0),[d,c]=(0,n.useState)(!1),[u,h,p]=(0,o.d7)("",400),[m,v]=(0,n.useState)([]),[g,j]=(0,n.useState)(!1);return(0,L.jsxs)("div",{className:"jobs-page",children:[(0,L.jsx)(a.mg,{children:(0,L.jsx)("title",{children:"MeMate - Tasks"})}),(0,L.jsxs)("div",{className:`topbar ${null!==m&&void 0!==m&&m.length?x.active:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,L.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==m&&void 0!==m&&m.length?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("h6",{className:x.selectedCount,children:["Selected: ",null===m||void 0===m?void 0:m.length]}),(0,L.jsx)("div",{className:"filtered-box",children:(0,L.jsx)("button",{className:`${x.filterBox}`,onClick:()=>{return t=!0,void(e.current?e.current.exportCSV({selectionOnly:t}):console.error("DataTable ref is null"));var t},children:(0,L.jsx)(i.A,{})})})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:"filtered-box",children:(0,L.jsx)("button",{className:`${x.filterBox}`,onClick:()=>{},children:(0,L.jsx)(r.A,{size:20})})}),(0,L.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,L.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,L.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,L.jsx)("input",{type:"text",placeholder:"Search",value:u,onChange:e=>p(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),(0,L.jsxs)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[(0,L.jsx)("h1",{className:"title p-0",style:{marginRight:"16px"},children:"Tasks"}),(0,L.jsx)(l.A,{onClick:()=>c(!0),className:`${x.newButton}`,children:"New"})]}),(0,L.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,L.jsx)("h1",{className:`${x.total} mb-0`,children:"Total"}),(0,L.jsxs)("div",{className:`${x.totalCount}`,children:[t," Jobs"]})]})]}),(0,L.jsx)(G,{ref:e,searchValue:h,setTotal:s,selected:m,setSelected:v,refetch:g,setRefetch:j}),(0,L.jsx)(M,{show:d,setShow:c,refetch:()=>j((e=>!e))})]})}},99868:(e,t,s)=>{s.d(t,{A:()=>m});var n=s(65043),l=s(14282),i=s(38294),r=s(35475),a=s(58387);const o="no-data-found-template_noDataBox__HgeT1",d="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",u="no-data-found-template_supportext__pHg2P";var h=s(20793),p=s(63919),x=s(70579);const m=e=>{let{isDataExist:t=!0}=e;const[s,m]=(0,n.useState)(!1);return(0,x.jsxs)("div",{className:(0,a.A)(o),children:[(0,x.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,x.jsx)("img",{src:h,alt:"no-data"})}),t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h2",{className:(0,a.A)(d),children:"There is no results"}),(0,x.jsxs)("p",{className:(0,a.A)(c),children:["The user you are looking for doesn't exist. ",(0,x.jsx)("br",{}),"Here are some helpful links:"]}),(0,x.jsx)(r.N_,{to:"/",children:(0,x.jsxs)(l.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,x.jsx)(i.A,{})," Go back"]})}),(0,x.jsx)(r.N_,{onClick:()=>m(!0),to:"#",children:(0,x.jsx)("span",{className:(0,a.A)(u),children:"Support"})})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("h2",{className:(0,a.A)(d),children:"No historical records yet."})}),(0,x.jsx)(p.A,{setVisible:m,visible:s})]})}}}]);
//# sourceMappingURL=126.9a1c6d68.chunk.js.map