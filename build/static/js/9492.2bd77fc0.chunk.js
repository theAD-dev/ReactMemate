"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[9492],{20603:(e,s,i)=>{i.r(s),i.d(s,{default:()=>Le});var l=i(65043),t=i(84052),n=(i(26016),i(18091)),a=i(75329),o=i(25725),d=i(39759),r=i(6168),c=i(43908),x=i(2028);const u="invoice_filterBox__36jYC",p="invoice_menu__XnbN-",h="invoice_clientImg__aSRSR",m="invoice_ellipsis__MToPC",v="invoice_active__g3Bt5",j="invoice_selectedCount__5R4mY",f="invoice_deletedRow__iZM+L",g="invoice_paidRow__+-UAI",y="invoice_unpaidRow__7a9Tr",b="invoice_partialPaidRow__UIQwV",_="invoice_fontStanderdSize__sKilw",N="invoice_paid__8CgVs",A="invoice_plusIcon__paSYh",F="invoice_unpaid__HNSOb",w="invoice_partialPaid__YSX48",C="invoice_status__Zlf8W",S="invoice_inactive__mkKPg",$="invoice_actionButton__vFx0E",k="invoice_shakeText__KJ+lD";var R=i(62284),z=i(90818),D=i(58387),I=i(56328),P=i(47097),B=i(10586),E=i(93740),V=i(64824),q=i(9642),T=i(52572),O=i(72413),W=i(44541),L=i(95192),M=i(83627),H=i(77918),Z=i(19916),G=i(17707),X=i(50565),Y=i(88578),K=i(73728),U=i(94819),Q=i(76104),J=i(73216),ee=i(35475),se=i(99868),ie=i(85632),le=i(27417),te=i(20092),ne=i(36166),ae=i(41451),oe=i(99367),de=i(67046);const re="invoice-partial-payment_modal__Dbqcb",ce="invoice-partial-payment_modalHeader__O5yS9",xe="invoice-partial-payment_border__Iepxr",ue="invoice-partial-payment_inputText__CTim0",pe="invoice-partial-payment_error__RZeCG",he="invoice-partial-payment_box__r-bzO",me="invoice-partial-payment_box3__1L6cb",ve="invoice-partial-payment_box4__Hfap-",je="invoice-partial-payment_box5__6Wn2j",fe="invoice-partial-payment_box6__cjGiq",ge="invoice-partial-payment_box7__fQGnQ",ye="invoice-partial-payment_text__vazCt",be="invoice-partial-payment_borderTable__rNXbt";var _e=i(55797),Ne=i(13846),Ae=i(72018),Fe=i(67844),we=i(70882),Ce=i(93257),Se=i(15228),$e=i(72052),ke=i(59690),Re=i(28676),ze=i(74532),De=i(70579);const Ie=(0,De.jsx)("div",{className:`${ce}`,children:(0,De.jsx)("div",{className:"d-flex align-items-center gap-2",children:"Confirm Payment"})}),Pe=e=>{let{history:s}=e;const i=e=>{const s=new Date(1e3*e);return`${s.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(s)} ${s.getFullYear()}`};return(0,De.jsx)(Ne.A,{className:(0,D.A)(xe,"mb-3 mt-2"),children:(0,De.jsxs)(Ne.A.Body,{children:[(0,De.jsx)("h1",{style:{fontSize:"16px"},children:"History"}),(0,De.jsxs)(V.b,{value:s,className:be,showGridlines:!0,children:[(0,De.jsx)(q.V,{field:"",style:{width:"auto"},body:(e,s)=>{let{rowIndex:i}=s;return(0,De.jsxs)(De.Fragment,{children:["#",i+1]})},header:"ID"}),(0,De.jsx)(q.V,{field:"type",style:{width:"150px"},header:"Reference",body:e=>{let s=e.type;return 2===s?(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(Fe.A,{size:18}),(0,De.jsx)("span",{children:"Bank"})]}):1===s?(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(we.A,{size:18}),(0,De.jsx)("span",{children:"Cash"})]}):3===s?(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)(Se.A,{size:18}),(0,De.jsx)("span",{children:"Strip"})]}):void 0}}),(0,De.jsx)(q.V,{field:"deposit",style:{width:"210px",textAlign:"right"},body:e=>(0,De.jsxs)(De.Fragment,{children:["$",null===e||void 0===e?void 0:e.deposit]}),header:"Amount"}),(0,De.jsx)(q.V,{field:"manager.name",style:{width:"210px"},header:"Manager",body:e=>{var s,i;return(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden"},children:(0,De.jsx)("img",{src:null===e||void 0===e||null===(s=e.manager)||void 0===s?void 0:s.photo,style:{widows:"24px"}})}),(0,De.jsx)("span",{children:null===e||void 0===e||null===(i=e.manager)||void 0===i?void 0:i.name})]})}}),(0,De.jsx)(q.V,{field:"created",style:{width:"147px"},header:"Created at",body:e=>(0,De.jsx)("span",{children:i(null===e||void 0===e?void 0:e.created)})})]})]})})},Be=e=>{let{show:s,setShow:i,invoice:t,setRefetch:n}=e;const[a,o]=(0,l.useState)(!1),[d,r]=(0,l.useState)(0),[c,x]=(0,l.useState)(2),[u,p]=(0,l.useState)({}),h=[{icon:(0,De.jsx)(Fe.A,{size:20}),label:"Bank",value:2},{icon:(0,De.jsx)(we.A,{size:20}),label:"Cash",value:1}],m=(0,P.n)({mutationFn:e=>(0,ne.e0)(null===t||void 0===t?void 0:t.unique_id,e),onSuccess:e=>{i(!1),n((e=>!e)),I.oR.success("Partial payment is completed successfully.")},onError:e=>{console.error("Failed to payment:",e),I.oR.error("Failed to payment. Please try again.")}});return(0,l.useEffect)((()=>{p({})}),[s]),(0,De.jsxs)(_e.l,{visible:s,modal:!0,header:Ie,onHide:i,className:`${re} custom-modal custom-scroll-integration`,children:[(0,De.jsx)(Ne.A,{className:(0,D.A)(xe,"mb-3"),children:(0,De.jsxs)(Ne.A.Body,{children:[(0,De.jsx)("label",{children:"Select Payment Method"}),(0,De.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex flex-column pt-2",children:[(0,De.jsx)(ke.J,{className:"rounded",value:c,onChange:e=>x(e.value),itemTemplate:e=>(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[e.icon,e.label]}),optionLabel:"label",options:h}),(null===u||void 0===u?void 0:u.type)&&(0,De.jsx)("p",{className:"error-message mb-0",children:"Payment type is required"})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,De.jsx)(ee.N_,{to:`${null===t||void 0===t?void 0:t.invoice_url}`,target:"_blank",children:(0,De.jsx)(Ae.$,{className:"danger-outline-button px-3 py-2",children:(0,De.jsx)(T.A,{color:"#F04438",size:17})})}),(0,De.jsx)(ee.N_,{to:`/invoice/${null===t||void 0===t?void 0:t.unique_id}`,target:"_blank",children:(0,De.jsx)(Ae.$,{className:"info-button px-3 py-2",children:(0,De.jsx)(Ce.A,{color:"#158ECC",size:17})})})]})]})]})}),(0,De.jsx)(Ne.A,{className:(0,D.A)(xe,"mb-3"),children:(0,De.jsx)(Ne.A.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between gap-3 align-items-center",children:[(0,De.jsxs)("div",{className:"d-flex flex-column",children:[(0,De.jsx)("label",{children:"Enter Amount"}),(0,De.jsxs)(Re.C,{iconPosition:"left",children:[(0,De.jsx)(ze.m,{children:(0,De.jsx)("span",{style:{position:"relative",top:"-4px"},children:"$"})}),(0,De.jsx)($e.S,{value:d,onChange:e=>r(e.target.value),onBlur:e=>{var s;return r(parseFloat((null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)||0).toFixed(2))},style:{width:"380px",paddingLeft:"30px"},className:(0,D.A)(ue,{[pe]:null===u||void 0===u?void 0:u.deposit})})]}),(null===u||void 0===u?void 0:u.deposit)&&(0,De.jsx)("p",{className:"error-message mb-0",children:"Payment type is required"})]}),(0,De.jsxs)("div",{className:(0,D.A)(he,"d-flex flex-column"),onClick:()=>r(parseFloat((null===t||void 0===t?void 0:t.amount)||0).toFixed(2)),children:[(0,De.jsx)("label",{children:"Total invoice"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.amount)||0).toFixed(2)]})]}),(0,De.jsxs)("div",{className:(0,D.A)(he,"d-flex flex-column"),onClick:()=>r(parseFloat((null===t||void 0===t?void 0:t.to_be_paid)||0).toFixed(2)),children:[(0,De.jsx)("label",{children:"To Be Paid"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.to_be_paid)||0).toFixed(2)]})]})]})})}),(0,De.jsx)(Ne.A,{className:(0,D.A)(xe,"mb-3"),children:(0,De.jsx)(Ne.A.Body,{children:(0,De.jsxs)("div",{className:"d-flex justify-content-between gap-2 align-items-center",children:[(0,De.jsxs)("div",{className:(0,D.A)(me,"d-flex flex-column text-end"),children:[(0,De.jsx)("label",{children:"Budget"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.budget)||0).toFixed(2)]})]}),(0,De.jsxs)("div",{className:(0,D.A)(ve,"d-flex flex-column text-end"),children:[(0,De.jsx)("label",{children:"Real Cost"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.real_cost)||0).toFixed(2)]})]}),(0,De.jsxs)("div",{className:(0,D.A)(je,"d-flex flex-column text-end"),children:[(0,De.jsx)("label",{children:"Cost Of Sale"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.cost_of_sale)||0).toFixed(2)]})]}),(0,De.jsxs)("div",{className:(0,D.A)(fe,"d-flex flex-column text-end"),children:[(0,De.jsx)("label",{children:"Labour"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.labor_expenses)||0).toFixed(2)]})]}),(0,De.jsxs)("div",{className:(0,D.A)(ge,"d-flex flex-column text-end"),children:[(0,De.jsx)("label",{children:"Operational Profit"}),(0,De.jsxs)("h1",{className:(0,D.A)(ye,"mt-2"),children:["$",parseFloat((null===t||void 0===t?void 0:t.profit)||0).toFixed(2)]})]})]})})}),(0,De.jsxs)(Ne.A,{className:(0,D.A)(xe,"mb-3"),children:[(0,De.jsxs)(Ne.A.Body,{className:"d-flex justify-content-end gap-2",children:[(0,De.jsx)(Ae.$,{className:"outline-button",onClick:()=>i(!1),children:"Cancel"}),(0,De.jsxs)(Ae.$,{className:"success-button",onClick:()=>{let e=0;p({}),c||(e++,p((e=>({...e,type:!0})))),d||(e++,p((e=>({...e,deposit:!0})))),e||m.mutate({deposit:d,type:c})},children:["Process Payment",(null===m||void 0===m?void 0:m.isPending)&&(0,De.jsx)(E.p,{style:{width:"20px",height:"20px",color:"#fff"}})]})]}),(0,De.jsx)("div",{className:"mb-2 text-center",style:{borderTop:".5px solid #F2F4F7"},children:(0,De.jsxs)(Ae.$,{className:"text-button m-auto",onClick:()=>o(!a),children:[a?"Hide":"Show"," History"]})})]}),a&&(0,De.jsx)(Pe,{history:(null===t||void 0===t?void 0:t.billing_history)||[]})]})};i(19004);var Ee=i(93747),Ve=i(59638),qe=i(81242);const Te=e=>{var s;let{projectId:i,clientId:t,isAction:a}=e;const[o,d]=(0,l.useState)(!1),[r,c]=(0,l.useState)({}),x=(0,Ee.I)({queryKey:["id",t],queryFn:()=>(0,Ve.EZ)(t),enabled:!!t&&!!o,retry:1}),u=(0,P.n)({mutationFn:e=>(0,ne.LG)(i,e),onSuccess:e=>{d(!1),I.oR.success("Email resent successfully.")},onError:e=>{console.error("Error sending email:",e),I.oR.error("Failed to resent email. Please try again.")}});return(0,De.jsxs)(De.Fragment,{children:[a?(0,De.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-3 hover-greay px-2 py-2",onClick:()=>d(!0),children:[(0,De.jsx)(n.A,{color:"#667085",size:20}),(0,De.jsx)("span",{style:{color:"#101828",fontSize:"16px",fontWeight:500},children:"Resend invoice"})]}):(0,De.jsx)(Ae.$,{label:"Resend",style:{position:"static"},onClick:()=>d(!0),className:"primary-text-button ms-3 show-on-hover-element not-show-checked",text:!0}),(0,De.jsx)(qe.A,{show:o,setShow:d,setPayload:c,mutation:u,contactPersons:(null===x||void 0===x||null===(s=x.data)||void 0===s?void 0:s.contact_persons)||[],projectCardData:()=>{},defaultTemplateId:19})]})},Oe=e=>{const s=new Date(1e3*e);return`${s.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(s)} ${s.getFullYear()}`},We=(0,l.forwardRef)(((e,s)=>{let{searchValue:i,setTotal:t,selected:n,setSelected:a,isShowDeleted:o,refetch:d,setRefetch:r}=e;const c=(0,l.useRef)(null),x=(0,J.Zp)(),[u,p]=(0,l.useState)([]),[j,$]=(0,l.useState)(1),[R,z]=(0,l.useState)({sortField:"id",sortOrder:-1}),[B,re]=(0,l.useState)({sortField:"id",sortOrder:-1}),[ce,xe]=(0,l.useState)(!0),[ue,pe]=(0,l.useState)(!1),[he,me]=(0,l.useState)(!1),[ve,je]=(0,l.useState)(null);(0,l.useEffect)((()=>{$(1)}),[i,d]),(0,l.useEffect)((()=>{(async()=>{pe(!0);let e="";1===(null===B||void 0===B?void 0:B.sortOrder)?e=`${B.sortField}`:-1===(null===B||void 0===B?void 0:B.sortOrder)&&(e=`-${B.sortField}`);const s=await(0,ne.DX)(j,25,i,e,o);var l;(t((()=>(null===s||void 0===s?void 0:s.count)||0)),1===j)?p(s.results):(null===s||void 0===s||null===(l=s.results)||void 0===l?void 0:l.length)>0&&p((e=>{const i=new Set(e.map((e=>e.id))),l=s.results.filter((e=>!i.has(e.id)));return[...e,...l]}));z(B),xe(s.count!==u.length),pe(!1)})()}),[j,i,B,d]),(0,l.useEffect)((()=>{if(u.length>0&&ce){c.current=new IntersectionObserver((e=>{e[0].isIntersecting&&$((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&c.current.observe(e)}return()=>{c.current&&c.current.disconnect()}}),[u,ce]);const fe=(0,P.n)({mutationFn:e=>(0,ne.r$)(e),onSuccess:()=>{I.oR.success("Invoice deleted successfully"),fe.reset(),r(!d)},onError:e=>{fe.reset(),I.oR.error("Failed to delete invoice. Please try again.")}}),ge=(0,P.n)({mutationFn:e=>(0,de.CK)(e),onSuccess:()=>{I.oR.success("Project has been successfully duplicated"),ge.reset(),x("/sales")},onError:e=>{fe.reset(),I.oR.error("Failed to duplicate project. Please try again.")}});return(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)(V.b,{ref:s,value:u,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:"calc(100vh - 175px)",className:"border",selection:n,onSelectionChange:e=>a(e.value),loading:ue,loadingIcon:()=>(0,De.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",background:"white",width:"60px",height:"60px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},className:"shadow-lg",children:(0,De.jsx)(le.A,{animation:"border",role:"status",children:(0,De.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),emptyMessage:se.A,sortField:null===R||void 0===R?void 0:R.sortField,sortOrder:null===R||void 0===R?void 0:R.sortOrder,onSort:e=>{const{sortField:s,sortOrder:i}=e;re({sortField:s,sortOrder:i}),$(1)},rowClassName:e=>null!==e&&void 0!==e&&e.deleted?f:null!==e&&void 0!==e&&e.paid?g:"partial_payment"===(null===e||void 0===e?void 0:e.payment_status)?b:y,children:[(0,De.jsx)(q.V,{selectionMode:"multiple",headerClassName:"ps-4 border-end-0",bodyClassName:"show-on-hover border-end-0 ps-4",headerStyle:{width:"3rem",textAlign:"center"},frozen:!0}),(0,De.jsx)(q.V,{field:"id",header:"Invoice ID",body:e=>(0,De.jsxs)("div",{className:"d-flex align-items-center gap-2 justify-content-between show-on-hover",children:[(0,De.jsx)("span",{children:e.number}),(0,De.jsx)(Ae.$,{label:"Open",onClick:()=>x(`/management?unique_id=${e.unique_id}&reference=${null===e||void 0===e?void 0:e.reference}&number=${null===e||void 0===e?void 0:e.number}`),className:"primary-text-button ms-3 show-on-hover-element not-show-checked",text:!0})]}),headerClassName:"paddingLeftHide",bodyClassName:"paddingLeftHide",style:{minWidth:"100px"},frozen:!0,sortable:!0}),(0,De.jsx)(q.V,{field:"",header:"Invoice",body:e=>(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-around",children:[(0,De.jsx)(ee.N_,{to:`${null===e||void 0===e?void 0:e.invoice_url}`,target:"_blank",children:(0,De.jsx)(T.A,{color:"#FF0000",size:16})}),(0,De.jsx)(ee.N_,{to:`/invoice/${e.unique_id}`,target:"_blank",children:(0,De.jsx)(O.A,{color:"#3366CC",size:16})})]}),style:{minWidth:"114px"},frozen:!0}),(0,De.jsx)(q.V,{field:"client.name",header:"Customer A\u2192Z",body:e=>{var s,i,l,t;return(0,De.jsxs)("div",{className:"d-flex align-items-center",children:[(0,De.jsx)("div",{style:{overflow:"hidden"},className:`d-flex justify-content-center align-items-center ${h} ${e.is_business?"":"rounded-circle"}`,children:null!==e&&void 0!==e&&null!==(s=e.client)&&void 0!==s&&s.photo?(0,De.jsx)("img",{src:null===e||void 0===e||null===(i=e.client)||void 0===i?void 0:i.photo,alt:"clientImg",className:"w-100"}):null!==e&&void 0!==e&&null!==(l=e.client)&&void 0!==l&&l.is_business?(0,De.jsx)(W.A,{color:"#667085"}):(0,De.jsx)(L.A,{color:"#667085"})}),(0,De.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,De.jsx)("div",{className:`${m}`,children:null===(t=e.client)||void 0===t?void 0:t.name}),e.deleted?(0,De.jsx)(Q.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]})},headerClassName:"shadowRight",bodyClassName:"shadowRight",style:{minWidth:"224px"},frozen:!0,sortable:!0}),(0,De.jsx)(q.V,{field:"created",header:"Due Date",body:e=>{var s;return(0,De.jsxs)("div",{className:"d-flex align-items-center justify-content-start gap-2 show-on-hover",style:{color:"#98A2B3"},children:[e.paid?(0,De.jsxs)("div",{className:`${C} ${v}`,children:[(0,De.jsx)(te.E,{severity:"success"})," Paid"]}):(0,De.jsxs)("div",{className:`${C} ${S}`,children:["Overdue ",e.overdue," days ",(0,De.jsx)(te.E,{severity:"danger"})]}),Oe(e.created),(0,De.jsx)(Te,{projectId:e.unique_id,clientId:null===e||void 0===e||null===(s=e.client)||void 0===s?void 0:s.id,isAction:!1})]})},style:{minWidth:"56px"},className:"text-center",sortable:!0}),(0,De.jsx)(q.V,{field:"amount",header:"Amount + GST",body:e=>(0,De.jsx)("div",{className:`d-flex align-items-center justify-content-end ${_}`,children:(0,De.jsxs)("div",{className:"text-dark",children:["$ ",parseFloat((null===e||void 0===e?void 0:e.amount)||0).toFixed(2)]})}),style:{minWidth:"56px",textAlign:"end"}}),(0,De.jsx)(q.V,{field:"to_be_paid",header:"To be paid",body:e=>(0,De.jsx)("div",{className:`d-flex align-items-center justify-content-end show-on-hover ${_}`,children:(0,De.jsxs)("div",{className:"text-dark",children:["$ ",parseFloat((null===e||void 0===e?void 0:e.to_be_paid)||0).toFixed(2)]})}),style:{minWidth:"123px",textAlign:"right"},sortable:!0}),(0,De.jsx)(q.V,{field:"deposit",header:"Deposit/Payment",body:e=>(0,De.jsx)("div",{className:`d-flex align-items-center justify-content-end ${_}`,style:{position:"static"},children:(0,De.jsxs)("div",{className:`${"paid"===e.payment_status?N:"not_paid"!==e.payment_status?F:w}`,children:["$ ",parseFloat(e.deposit||0).toFixed(2),(0,De.jsx)("span",{onClick:()=>{me(!0),je(e)},className:(0,D.A)(A,"cursor-pointer"),style:{position:"relative",marginLeft:"10px",paddingLeft:"5px"},children:(0,De.jsx)(M.A,{size:12,color:"#079455"})})]})}),style:{minWidth:"114px",textAlign:"left"},sortable:!0}),(0,De.jsx)(q.V,{field:"total_requests",header:"Info",body:e=>{const s=(0,l.useRef)(null),[i,t]=(0,l.useState)(!1),n=(0,ae.k)(i,t);return(0,De.jsxs)(l.Fragment,{children:[(0,De.jsx)(H.A,{color:"#667085",size:18,className:"cursor-pointer",ref:s,...n}),(0,De.jsx)("div",{className:"fixedMenu",style:{position:"fixed",top:"40%",left:"40%"},children:(0,De.jsxs)(oe.k,{state:i?"open":"closed",anchorRef:s,onClose:()=>t(!1),menuStyle:{padding:"24px 24px 20px 24px",width:"555px",marginTop:"45px"},children:[(0,De.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,De.jsx)("div",{className:"BoxNo",children:(0,De.jsx)("div",{children:(0,De.jsx)(H.A,{color:"#FFFFFF",size:24})})}),(0,De.jsx)(ie.A,{onClick:()=>t(!1)})]}),null===e||void 0===e?void 0:e.billing_history.map((e=>{var s,i;return(0,De.jsxs)("div",{className:"d-flex gap-4 border justify-content-around py-1 px-2 rounded mb-2",children:[(0,De.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,De.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"20px",height:"20px",borderRadius:"50%",overflow:"hidden"},children:(0,De.jsx)("img",{src:null===e||void 0===e||null===(s=e.manager)||void 0===s?void 0:s.photo,style:{widows:"20px"}})}),(0,De.jsx)("span",{className:"font-14",children:null===e||void 0===e||null===(i=e.manager)||void 0===i?void 0:i.name})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,De.jsx)(Z.A,{color:"#98A2B3",size:14}),(0,De.jsxs)("span",{style:{fontWeight:600,fontSize:16},children:["$",parseFloat(e.deposit||0).toFixed(2)]})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,De.jsx)(Z.A,{color:"#98A2B3",size:14}),(0,De.jsx)("div",{className:"border rounded font-12 px-1",children:2===(null===e||void 0===e?void 0:e.type)?"Bank":1===e.type?"Cash":"Strip"})]}),(0,De.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,De.jsx)(G.A,{color:"#98A2B3",size:14}),(0,De.jsx)("div",{className:"font-14",children:Oe(e.created)})]})]})})),e.paid?(0,De.jsx)("div",{className:"d-flex gap-2 mt-3 justify-content-center align-items-center p-2 rounded",style:{background:"#ECFDF3"},children:(0,De.jsx)("span",{className:"font-14",style:{color:"#17B26A"},children:"Invoice Paid"})}):"partial_payment"===e.payment_status?(0,De.jsx)("div",{className:"d-flex gap-2 mt-3 justify-content-center align-items-center p-2 rounded",style:{background:"#fffaeb"},children:(0,De.jsx)("span",{className:"font-14",style:{color:"#b54708"},children:"Invoice Partialy Paid"})}):(0,De.jsx)("div",{className:"d-flex gap-2 mt-3 justify-content-center align-items-center p-2 rounded",style:{background:"#FEF3F2"},children:(0,De.jsx)("span",{className:"font-14",style:{color:"#B42318"},children:"Invoice Due"})})]})})]})},style:{minWidth:"89px",textAlign:"center"},sortable:!0}),(0,De.jsx)(q.V,{field:"xero",header:"Xero/Myob",body:e=>(0,De.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:"in_progress"===(null===e||void 0===e?void 0:e.xero_status)?(0,De.jsx)("span",{style:{color:"#158ECC"},className:k,children:"xero"}):"completed"===(null===e||void 0===e?void 0:e.xero_status)?(0,De.jsx)("span",{style:{color:"#158ECC"},children:"xero"}):(0,De.jsx)("span",{children:"xero"})}),style:{minWidth:"140px"},sortable:!0}),(0,De.jsx)(q.V,{field:"paid",header:"Actions",body:e=>{var s;const i=(0,l.useRef)(null),[t,n]=(0,l.useState)(!1),a=(0,ae.k)(t,n);return(0,De.jsxs)(l.Fragment,{children:[(0,De.jsx)(X.A,{size:24,color:"#667085",className:"cursor-pointer",ref:i,...a}),(0,De.jsx)(oe.k,{state:t?"open":"closed",anchorRef:i,onClose:()=>n(!1),className:"threeDots",menuStyle:{padding:"4px",width:"241px",textAlign:"left"},children:(0,De.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,De.jsx)(Te,{projectId:e.unique_id,clientId:null===e||void 0===e||null===(s=e.client)||void 0===s?void 0:s.id,isAction:!0}),(0,De.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-3 hover-greay px-2 py-2",onClick:async()=>{await ge.mutateAsync(e.unique_id),n(!1)},children:[(0,De.jsx)(Y.A,{color:"#667085",size:20}),(0,De.jsx)("span",{style:{color:"#101828",fontSize:"16px",fontWeight:500},children:"Duplicate project"}),(null===ge||void 0===ge?void 0:ge.variables)===e.unique_id?(0,De.jsx)(E.p,{style:{width:"20px",height:"20px"}}):""]}),(0,De.jsxs)("div",{className:"d-flex align-items-center gap-3 hover-greay px-2 py-2",style:{opacity:.5},children:[(0,De.jsx)(K.A,{color:"#667085",size:20}),(0,De.jsx)("span",{style:{color:"#101828",fontSize:"16px",fontWeight:500},children:"Create credit note"})]}),(0,De.jsxs)("div",{className:"d-flex align-items-center cursor-pointer gap-3 hover-greay px-2 py-2",onClick:async()=>{await fe.mutateAsync(e.unique_id),n(!1)},children:[(0,De.jsx)(U.A,{color:"#B42318",size:20}),(0,De.jsx)("span",{style:{color:"#B42318",fontSize:"16px",fontWeight:500},children:"Delete invoice"}),(null===fe||void 0===fe?void 0:fe.variables)===e.unique_id?(0,De.jsx)(E.p,{style:{width:"20px",height:"20px"}}):""]})]})})]})},style:{minWidth:"75px"},bodyStyle:{color:"#667085"}})]}),(0,De.jsx)(Be,{show:he,setShow:()=>me(!1),setRefetch:r,invoice:ve})]})})),Le=()=>{const e=(0,l.useRef)(null),s=(0,l.useRef)(null),[i,h]=(0,l.useState)(0),[m,f]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[b,_]=(0,l.useState)(!1),[N,A]=(0,l.useState)(null),[F,w,C]=(0,x.d7)("",400),S=((0,P.n)({mutationFn:e=>(0,B.D3)(e),onSuccess:()=>{y((e=>!e)),A(null),I.oR.success("Expenses have been successfully marked as paid.")},onError:e=>{I.oR.error("Failed to mark the expenses as paid. Please try again.")}}),(0,P.n)({mutationFn:e=>(0,ne.rf)(e),onSuccess:()=>{y((e=>!e)),A(null),I.oR.success("Invoice successfully sent to Xero!")},onError:e=>{I.oR.error("Failed to send the invoice to xero. Please try again.")}}));return(0,De.jsxs)(t.mD,{className:"peoples-page",children:[(0,De.jsxs)("div",{className:`topbar ${null!==N&&void 0!==N&&N.length?v:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,De.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==N&&void 0!==N&&N.length?(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("h6",{className:j,children:["Selected: ",null===N||void 0===N?void 0:N.length]}),(0,De.jsxs)("div",{className:"filtered-box d-flex align-items-center gap-2",children:[(0,De.jsxs)("button",{className:`outline-button ${$}`,onClick:()=>{const e=N.map((e=>e.unique_id));S.mutate({ids:e})},children:["Send to Xero/MYOB",S.isPending?(0,De.jsx)(E.p,{style:{width:"20px",height:"20px"}}):(0,De.jsx)(n.A,{color:"#1D2939",size:20})]}),(0,De.jsx)("button",{className:`${u}`,onClick:()=>{return s=!0,void(e.current?e.current.exportCSV({selectionOnly:s}):console.error("DataTable ref is null"));var s},children:(0,De.jsx)(a.A,{})}),(0,De.jsx)("button",{className:`${u}`,onClick:()=>{},children:(0,De.jsx)(o.A,{})})]})]}):(0,De.jsxs)(De.Fragment,{children:[(0,De.jsxs)("div",{className:"filtered-box",children:[(0,De.jsx)("button",{className:`${u}`,onClick:e=>s.current.toggle(e),children:(0,De.jsx)(d.A,{})}),(0,De.jsx)(z.b,{model:[{label:(0,De.jsx)("div",{onClick:()=>_(!b),className:"d-flex align-items-center text-nowrap gap-3 p",children:b?(0,De.jsxs)(De.Fragment,{children:["Hide Deleted ",(0,De.jsx)(r.A,{})]}):(0,De.jsxs)(De.Fragment,{children:["Show Deleted ",(0,De.jsx)(c.A,{})]})})}],className:(0,D.A)(p),popup:!0,ref:s,breakpoint:"767px"})]}),(0,De.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,De.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,De.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,De.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,De.jsx)("input",{type:"text",placeholder:"Search",value:F,onChange:e=>C(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#98A2B3",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),(0,De.jsx)("div",{className:"featureName d-flex align-items-center",style:{position:"absolute",left:"47%",top:"6px"},children:(0,De.jsx)("h1",{className:"title p-0 mt-1",style:{marginRight:"16px"},children:"Invoices"})}),(0,De.jsx)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"}})]}),(0,De.jsx)(We,{ref:e,searchValue:w,setTotal:h,selected:N,setSelected:A,isShowDeleted:b,refetch:g,setRefetch:y}),(0,De.jsx)(R.A,{visible:m,setVisible:f,setRefetch:y})]})}}}]);
//# sourceMappingURL=9492.2bd77fc0.chunk.js.map