"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[1068,6731],{31342:(e,s,t)=>{t.d(s,{f:()=>a});const a=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{method:a="GET",headers:n={},body:l}=s,r=localStorage.getItem("access_token"),o=l instanceof FormData,i={"Content-Type":o?"multipart/form-data":"application/json",...n};t&&(i.Authorization=`Bearer ${r}`);const c={method:a,headers:i,body:o?l:JSON.stringify(l),redirect:"follow"};try{const s=new URL(`${e}`),t=await fetch(s,c);if(!t.ok){if(404===t.status)throw new Error("Not found");throw new Error(`HTTP error! Status: ${t.status}`)}const a=t.headers.get("Content-Type");if(a&&a.includes("application/json"))return await t.json();return{message:"Non-JSON response",body:await t.text()}}catch(d){throw console.error("Fetch API error:",d),d}}},81047:(e,s,t)=>{t.d(s,{AO:()=>x,Ad:()=>b,Bz:()=>T,Hb:()=>h,IT:()=>k,Kb:()=>o,Mp:()=>f,Pf:()=>S,Rh:()=>N,SQ:()=>d,T6:()=>j,UM:()=>y,VQ:()=>_,Xm:()=>c,bd:()=>$,bj:()=>p,gY:()=>g,hS:()=>m,hx:()=>A,iS:()=>r,p4:()=>i,pJ:()=>C,rJ:()=>w,s:()=>u,sB:()=>v,tC:()=>l});var a=t(31342);const n="https://dev.memate.com.au/api/v1",l=async()=>{const e=new URL(`${n}/jobs/templates/`);return(0,a.f)(e.toString(),{method:"GET"})},r=async e=>{const s=new URL(`${n}${`/jobs/templates/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},o=async e=>{const s={method:"POST",body:e},t=new URL(`${n}/jobs/templates/`);return(0,a.f)(t.toString(),s)},i=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${n}${`/jobs/templates/${e}/`}`);return(0,a.f)(l.toString(),t)},c=async e=>{const s=new URL(`${n}${`/jobs/templates/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},d=async()=>{const e=new URL(`${n}/settings/templates/email-templates/`);return(0,a.f)(e.toString(),{method:"GET"})},h=async e=>{const s={method:"POST",body:e},t=new URL(`${n}/settings/templates/email-templates/`);return(0,a.f)(t.toString(),s)},u=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${n}${`/settings/templates/email-templates/${e}/`}`);return(0,a.f)(l.toString(),t)},m=async e=>{const s=new URL(`${n}${`/settings/templates/email-templates/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},x=async()=>{const e=new URL(`${n}/email-signatures/`);return(0,a.f)(e.toString(),{method:"GET"})},p=async e=>{const s=new URL(`${n}${`/email-signatures/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},j=async e=>{const s={method:"POST",body:e},t=new URL(`${n}/email-signatures/`);return(0,a.f)(t.toString(),s)},g=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${n}${`/email-signatures/${e}/`}`);return(0,a.f)(l.toString(),t)},v=async e=>{const s=new URL(`${n}${`/email-signatures/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},y=async e=>{const s=new URL(`${n}${`/settings/email-signatures/default/${e}/`}`);return(0,a.f)(s.toString(),{method:"PUT"})},C=async()=>{const e=new URL(`${n}/sms-templates/`);return(0,a.f)(e.toString(),{method:"GET"})},f=async e=>{const s=new URL(`${n}${`/sms-templates/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},b=async e=>{const s={method:"POST",body:e},t=new URL(`${n}/sms-templates/`);return(0,a.f)(t.toString(),s)},N=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${n}${`/sms-templates/${e}/`}`);return(0,a.f)(l.toString(),t)},w=async e=>{const s=new URL(`${n}${`/sms-templates/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},S=async e=>{const s=new URL(`${n}${`/proposals/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},A=async()=>{const e=new URL(`${n}/references/outgoing-email/`);return(0,a.f)(e.toString(),{method:"GET"})},$=async e=>{const s=new URL(`${n}${`/settings/templates/email-templates/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})},_=async()=>{const e=new URL(`${n}/settings/proposals/`);return(0,a.f)(e.toString(),{method:"GET"})},k=async e=>{const s=new URL(`${n}${`/settings/proposals/${e}/`}`);return(0,a.f)(s.toString(),{method:"GET"})},T=async e=>{const s=new URL(`${n}${`/settings/proposals/delete/${e}/`}`);return(0,a.f)(s.toString(),{method:"DELETE"})}},11520:(e,s,t)=>{t.d(s,{Mv:()=>g,Np:()=>r,OE:()=>v,SE:()=>u,ZE:()=>d,aj:()=>o,fi:()=>m,jE:()=>c,jy:()=>x,ky:()=>j,mw:()=>l,o2:()=>i,qm:()=>p,yE:()=>h});const a="https://dev.memate.com.au/api/v1",n=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{method:t="GET",headers:a={},body:n}=s,l={method:t,headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json",...a},body:JSON.stringify(n),redirect:"follow"};try{const s=new URL(`${e}`),t=await fetch(s,l);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const a=t.headers.get("Content-Type");if(a&&a.includes("application/json"))return await t.json();return{message:"Non-JSON response",body:await t.text()}}catch(r){throw console.error("Fetch API error:",r),r}},l=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${a}${`/project-card/schedule/${e}/`}`);return n(l.toString(),t)},r=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${a}${`/project-card/custom-status/${e}/`}`);return n(l.toString(),t)},o=async(e,s)=>{const t={method:"PUT",body:s},l=new URL(`${a}${`/project-card/reference/${e}/`}`);return n(l.toString(),t)},i=async(e,s)=>{const t={method:"POST",body:s},l=new URL(`${a}${`/project-card/note/${e}/`}`);return n(l.toString(),t)},c=async e=>{const s={method:"PUT",body:{unique_id:e}},t=new URL(`${a}/projects/back/`);return n(t.toString(),s)},d=async e=>{const s={method:"PUT",body:{unique_id:e}},t=new URL(`${a}/projects/decline/`);return n(t.toString(),s)},h=async e=>{const s={method:"PUT",body:{unique_id:e}},t=new URL(`${a}/projects/complete/`);return n(t.toString(),s)},u=async e=>{const s=new URL(`${a}${`/invoices/create/${e}/`}`);return n(s.toString(),{method:"POST"})},m=async(e,s)=>{const t={method:"POST",body:s},l=new URL(`${a}${`/invoices/send/${e}/`}`);return n(l.toString(),t)},x=async(e,s,t)=>{let l;l=s?`/custom/email/${e}/${s}/`:`/custom/email/${e}/`;const r={method:"POST",body:t},o=new URL(`${a}${l}`);return n(o.toString(),r)},p=async(e,s)=>{const t={method:"POST",body:s},l=new URL(`${a}${`/sms/${e}/`}`);return n(l.toString(),t)},j=async(e,s)=>{const t={method:"POST",body:s},l=new URL(`${a}${`/resend/quote/${e}/`}`);return n(l.toString(),t)},g=async()=>{const e=new Headers,s=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${s}`),e.append("Content-Type","application/json");const t={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${a}/management/`,t);return await e.json()}catch(n){throw console.error(n),n}},v=async e=>{const s=new Headers,t=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${t}`),s.append("Content-Type","application/json");const n={method:"GET",headers:s,redirect:"follow"};try{const s=await fetch(`${a}/project-card/${e}/`,n);return await s.json()}catch(l){throw console.error(l),l}}},48076:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Ss});var a=t(65043),n=t(27417),l=t(49367),r=t(64196),o=t(95192),i=t(22636),c=t(52572),d=t(72413),h=t(38161),u=t(55003),m=t(35475),x=t(65148),p=t(16484),j=t(18226),g=t(14282),v=t(18091),y=t(56682),C=t(44713),f=t(38345),b=t(1607),N=t(94819),w=t(50565),S=t(17392),A=t(64307),$=t(37970),_=t(93740),k=t(67046),T=t(47097),R=t(56328),L=t(20701);const F=()=>(0,T.n)({mutationFn:e=>(async e=>{const s=`/quotes/${e}/delete/`;return(0,L.y)(s,{method:"DELETE"})})(e),onSuccess:()=>{R.oR.success("Quotation deleted successfully")},onError:e=>{console.error("Error deleting sale quotation:",e),R.oR.error("Failed to delete deleteSaleQuotation. Please try again.")}});var E=t(93747),D=t(59638),P=t(11520),U=t(81242),I=t(70579);const H=e=>{var s;let{viewShow:t,setViewShow:n,clientId:l,projectId:r,projectCardData:o}=e;const[,i]=(0,a.useState)({}),c=(0,E.I)({queryKey:["getClientById",l],queryFn:()=>(0,D.EZ)(l),enabled:!!l&&t,retry:1}),d=(0,T.n)({mutationFn:e=>(0,P.ky)(r,e),onSuccess:()=>{n(!1),o(),R.oR.success("Email send successfully.")},onError:e=>{console.error("Error sending email:",e),R.oR.error("Failed to send email. Please try again.")}});return(0,I.jsx)(U.A,{show:t,setShow:n,mutation:d,contactPersons:(null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.contact_persons)||[],setPayload:i,defaultTemplateId:"Resend Quote"})};var B=t(58387),q=t(55797);const z="sale-history_modal__GF6MN",M="sale-history_modalHeader__WvZhi",V="sale-history_headerTitle__o4ot5",O="sale-history_title__K+lKo",Q="sale-history_historyBox__mPHuV";var W=t(20793);const G=e=>{let{history:s,setHistory:t}=e;const[n,l]=(0,a.useState)(!!s),r=(0,I.jsx)("div",{className:`${M}`,children:(0,I.jsx)("span",{className:`white-space-nowrap ${V}`,children:"History"})});return(0,I.jsx)(q.l,{visible:n,modal:!0,header:r,className:`${z} custom-modal`,onHide:()=>t(null),children:(0,I.jsxs)("div",{className:"d-flex justify-content-start flex-wrap gap-4 align-items-center",children:[Object.entries(s).map((e=>{let[s,t]=e;return(0,I.jsxs)("div",{className:(0,B.A)(Q,"d-flex align-items-center gap-1"),children:[(0,I.jsx)(c.A,{color:"#667085",size:18}),(0,I.jsx)(m.N_,{to:t,target:"_blank",children:s})]},s)})),0===Object.entries(s).length&&(0,I.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column w-100",children:[(0,I.jsx)("img",{src:W,alt:"no-data"}),(0,I.jsx)("h2",{className:(0,B.A)(O),children:"No history found"})]})]})})},Z=e=>{let{saleUniqueId:s,clientId:t,refreshData:n,status:l,salesHistory:r}=e;const[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[h,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),p=F(),j=()=>{i(null)},g=[{label:"Resend",icon:1===c?(0,I.jsx)(_.p,{style:{width:"20px",height:"20px"}}):(0,I.jsx)(v.A,{color:"#344054",size:20})},{label:"History",icon:(0,I.jsx)(y.A,{color:"#344054",size:20})},{label:"Print Label",icon:(0,I.jsx)(C.A,{color:"#344054",size:20})},{label:"Project Card",icon:(0,I.jsx)(f.A,{color:"#344054",size:20})},{label:"Replicate",icon:4===c?(0,I.jsx)(_.p,{style:{width:"20px",height:"20px",position:"absolute",right:"15px",top:"10px"}}):(0,I.jsx)(b.A,{color:"#344054",size:20})},..."Draft"===l?[{label:"Delete",icon:5===c?(0,I.jsx)(_.p,{style:{width:"20px",height:"20px",position:"absolute",right:"15px",top:"10px"}}):(0,I.jsx)(N.A,{size:20})}]:[]];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(S.A,{"aria-label":"more",id:"long-button","aria-controls":o?"long-menu":void 0,"aria-expanded":o?"true":void 0,"aria-haspopup":"true",onClick:e=>i(e.currentTarget),children:(0,I.jsx)(w.A,{size:24,color:"#667085"})}),(0,I.jsx)(A.A,{id:"long-menu",anchorEl:o,open:Boolean(o),onClose:j,PaperProps:{style:{borderBottom:"1px solid #EAECF0",width:"215px",padding:"0"}},children:g.map((e=>(0,I.jsxs)($.A,{className:"LmenuList d-flex justify-content-between",onClick:t=>(async(e,t)=>{if("Replicate"===t.label)try{d(4),await(0,k.CK)(s),n(),j()}catch(a){console.error("Error fetching duplicate data:",a)}finally{d(null)}else"Resend"===t.label?(x(!0),i(null)):"Print Label"===t.label?window.open(`/api/v1/sales/${s}/label/`,"_blank"):"Project Card"===t.label?window.open(`/api/v1/project-card/${s}/pdf/`,"_blank"):"Delete"===t.label&&s?(d(5),await p.mutateAsync(s),d(null),n()):"History"===t.label&&(u(r),i(null))})(0,e),children:[e.label,e.icon]},s+e.label)))}),(0,I.jsx)(H,{projectId:s,clientId:t,viewShow:m,setViewShow:x,projectCardData:n}),h&&(0,I.jsx)(G,{history:h,setHistory:u})]})};var Y=t(6091),K=t(40198),J=t(92719),X=t(56741),ee=t(37753),se=t(33361),te=t(77527),ae=t(83627),ne=t(66415),le=t(85865),re=t(89302),oe=t(97529),ie=t(58390),ce=t(60446),de=t.n(ce),he=t(599),ue=t(73722),me=t(61424),xe=t(88490);const pe=t.p+"static/media/sale-01.74c52636eaacc72e4c5a7a89e51203b5.svg",je=e=>{let{saleUniqueIdold:s,contactRefresh:t,step:n,created:l,type:r}=e;const[o,i]=(0,a.useState)("E"),[c,d]=(0,a.useState)(de()()),[h,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[p,j]=(0,a.useState)({}),[v,y]=(0,a.useState)(!1),C=500,f=(0,a.useCallback)((()=>{x(!1),j({}),u(""),d(de()()),i("E")}),[]),b=(0,a.useCallback)((()=>x(!0)),[]),N=(0,a.useCallback)((async()=>{if(!(()=>{const e={};return c&&de()(c).isValid()||(e.date="Please select a valid date"),h.trim()?h.length<3?e.note="Note must be at least 3 characters":h.length>C&&(e.note="Note must not exceed 500 characters"):e.note="Note is required",j(e),0===Object.keys(e).length})())return;if(!s)return void j({general:"Sale ID is missing"});y(!0);const e=de()(c).add(1,"day"),a={type:o,date:e.format("YYYY-MM-DD"),note:h.trim()};try{await(0,k.oe)(s,a),t(),f()}catch(n){console.error("Error while saving:",n),j({general:"Failed to save contact. Please try again."})}finally{y(!1)}}),[o,c,h,s,t,f]),w=[{name:"Email",value:"E",icon:(0,I.jsx)(se.A,{size:20})},{name:"Phone",value:"P",icon:(0,I.jsx)(ee.A,{size:20})},{name:"Meeting",value:"M",icon:(0,I.jsx)(te.A,{size:20})}],S=0===n?Date.now()-1e3*l>=2592e5:Date.now()-1e3*r[n-1].date>=2592e5;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(g.A,{variant:"ContactAdd",onClick:b,children:(0,I.jsx)(ae.A,{color:"#1AB2FF",className:""+(S?"vibrate":""),size:16,style:{width:"16px",height:"16px"}})}),(0,I.jsxs)(me.A,{show:m,onHide:f,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"SalesContact salesTableWrap",animation:!1,children:[(0,I.jsx)(me.A.Header,{className:"SalesContact mb-0 pb-0 border-0",closeButton:!0,children:(0,I.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,I.jsxs)("span",{children:[(0,I.jsx)("div",{className:"iconOutStyle",children:(0,I.jsx)("div",{className:"iconinStyle",children:(0,I.jsx)("div",{className:"iconinnerStyle",children:(0,I.jsx)("img",{src:pe,alt:"saleContact"})})})}),"Sales Contact"]})})}),(0,I.jsx)(me.A.Body,{children:(0,I.jsxs)("div",{className:"ContactModel",children:[(0,I.jsxs)("div",{className:"ContactModelIn",children:[(0,I.jsxs)(ue.A.Label,{children:["Contact Type",(0,I.jsx)("sup",{className:"required",children:"*"})]}),(0,I.jsx)(he.A,{className:"radioSelectButton",children:w.map(((e,s)=>(0,I.jsx)("div",{className:"radioSelectButtons",children:(0,I.jsxs)(xe.A,{id:`radio-${s}`,type:"radio",variant:o===e.value?"selectBox":"outlineBox",name:"radio",value:e.value,checked:o===e.value,onChange:e=>i(e.currentTarget.value),disabled:v,children:[e.name," ",e.icon]})},s)))}),(0,I.jsxs)(ie.$,{dateAdapter:re.R,children:[(0,I.jsxs)(ue.A.Label,{className:"flexRemove mt-3",children:["Date",(0,I.jsx)("sup",{className:"required",children:"*"})]}),(0,I.jsx)(oe.l,{className:"datepickerField w-100",value:c,onChange:e=>d(e),slots:{openPickerIcon:ne.A},disabled:v,minDate:de()(),slotProps:{textField:{error:!!p.date,helperText:p.date}}})]}),(0,I.jsxs)(ue.A.Label,{className:"mt-3",children:["Note",(0,I.jsx)("sup",{className:"required",children:"*"})]}),(0,I.jsxs)(le.A,{sx:{p:0},children:[(0,I.jsx)(ue.A.Control,{as:"textarea",placeholder:"Enter a description...",style:{height:"152px"},value:h,onChange:e=>u(e.target.value),maxLength:C,isInvalid:!!p.note}),(0,I.jsx)("div",{className:"d-flex justify-content-between mt-1",children:(0,I.jsx)("small",{className:p.note?"error-message":"text-muted",children:p.note||`${h.length}/500 characters`})})]}),p.general&&(0,I.jsx)("div",{className:"text-danger mt-2",children:p.general})]}),(0,I.jsxs)("div",{className:"popoverbottom mt-0 pt-4",children:[(0,I.jsx)(g.A,{className:"closebox",onClick:f,disabled:v,children:"Cancel"}),(0,I.jsx)(g.A,{className:"savebox",onClick:N,disabled:v,children:v?"Saving...":"Save"})]})]})})]})]})};const ge=t.p+"static/media/calendargradi.b3116ec64a97e5fef4c8d79e73c4993a.svg";const ve=t.p+"static/media/mailgradi.2164d17057c769448ddf96d8f89a722a.svg";const ye=t.p+"static/media/phonecallgra.20daa5d6965e95d0209bd3a0ffd66365.svg",Ce="sales_footerwrap__Ymbwg",fe="sales_cancelbut__BhO13",be="sales_editbut__GIA7A",Ne="sales_padding_24__nSSrM",we="sales_paddingLR_24__oXCU4",Se=e=>{const s=new Date(1e3*e);return`${s.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(s)} ${s.getFullYear()}`},Ae=e=>{let{saleUniqueId:s,type:t,refreshData:n,created:l}=e;const[r,o]=a.useState(null),i=()=>{o(null)};return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:"innerTableStyle",children:(0,I.jsxs)("ul",{children:[null===t||void 0===t?void 0:t.map(((e,s)=>(0,I.jsx)("li",{children:(0,I.jsx)(Y.A,{children:(0,I.jsx)(K.A,{trigger:"click",rootClose:!0,placement:"bottom",show:r===s,onHide:i,overlay:(0,I.jsx)(J.A,{id:`popover-trigger-click-root-close-${s}`,className:"salesTableWrap",title:"",children:(0,I.jsxs)("div",{className:"contactInfo",children:[(0,I.jsxs)("div",{className:`contactInfoflex ${Ne}`,children:[(0,I.jsxs)("div",{className:"iconStyle",children:["Phone"===e.type&&(0,I.jsx)("img",{src:ye,alt:"phonecallgra"}),"Email"===e.type&&(0,I.jsx)("img",{src:ve,alt:"mailgradi"}),"Meeting"===e.type&&(0,I.jsx)("img",{src:ge,alt:"calendargradi"})]}),(0,I.jsx)(g.A,{variant:"link",className:"ClosePopover",onClick:i,children:(0,I.jsx)(X.A,{color:"#667085",size:24})})]}),(0,I.jsxs)("div",{className:we,children:[(0,I.jsx)("p",{className:"contactdate",children:Se(e.date)}),(0,I.jsx)("p",{children:e.note})]}),(0,I.jsxs)("div",{className:Ce,children:[(0,I.jsx)(g.A,{onClick:i,className:fe,children:"Cancel"}),(0,I.jsx)(g.A,{className:be,children:"Edit"})]})]})}),children:(0,I.jsx)(g.A,{variant:"saleContacte",onClick:()=>(e=>{const s=document.querySelectorAll(".ClosePopover");s.length>0&&s.forEach((e=>e.click())),o(r===e?null:e)})(s),children:(0,I.jsxs)(I.Fragment,{children:["Phone"===e.type&&(0,I.jsx)(ee.A,{color:"#344054",size:16}),"Email"===e.type&&(0,I.jsx)(se.A,{color:"#344054",size:16}),"Meeting"===e.type&&(0,I.jsx)(te.A,{color:"#344054",size:16}),(0,I.jsx)("div",{children:Se(e.date)})]})})})},s)},s))),t&&t.length<3&&(0,I.jsx)("li",{children:(0,I.jsx)("span",{className:"contactButList",children:(0,I.jsx)("div",{className:"contactButListIn1",children:(0,I.jsx)("div",{className:"contactButListIn2",children:(0,I.jsx)(je,{step:t.length,created:l,type:t,saleUniqueIdold:s,contactRefresh:()=>{n()}})})})})})]})})})},$e=e=>{let{percentage:s,selectlabel:t}=e;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"progress","data-percentage":s,children:[(0,I.jsx)("span",{className:"progress-left",children:(0,I.jsx)("span",{className:"progress-bar"})}),(0,I.jsx)("span",{className:"progress-right",children:(0,I.jsx)("span",{className:"progress-bar"})}),(0,I.jsx)("div",{className:"progress-value",children:(0,I.jsx)("div",{children:null===s?"0%":s+"%"})})]}),(0,I.jsx)("span",{children:t})]})},_e=e=>{let{percentage:s,label:t,gradient:a,onSelect:n,isActive:l}=e;return(0,I.jsxs)("li",{className:"option "+(l?"active":""),"data-percentage":s,onClick:n,children:[(0,I.jsx)("input",{className:"radio-custom",name:"radio-group",type:"radio",checked:l,onChange:()=>{}}),(0,I.jsx)("em",{className:"radio-custom-label"}),(0,I.jsxs)("div",{className:"progressWrapper",children:[(0,I.jsxs)("div",{className:"labelInfo",children:[(0,I.jsx)("strong",{children:t}),(0,I.jsx)("div",{className:"progress-light-grey",children:(0,I.jsx)("div",{className:"progress-container progress-color progress-center","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100",style:{"--value":s,background:a},children:(0,I.jsxs)("span",{children:[s,"%"]})})})]}),(0,I.jsxs)("label",{children:[s,"%"]})]})]})},ke=e=>{let{progressName1:s,progressPercentage1:t,salesUniqId1:n,refreshData:l}=e;const[r,o]=(0,a.useState)({text:s,percentage:t,background:"linear-gradient(90deg, #9E77ED 10%, transparent 10%)"}),[i,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(r.percentage);return(0,I.jsxs)("div",{className:"select-menu",children:[(0,I.jsxs)("div",{className:"select-btn",onClick:()=>{document.querySelectorAll(".options.active").forEach((e=>e.classList.remove("active"))),c((e=>!e))},children:[(0,I.jsx)($e,{percentage:r.percentage,selectlabel:r.text}),(0,I.jsx)(ne.A,{color:"#98A2B3",size:16})]}),(0,I.jsx)("ul",{className:"options "+(i?"active":""),children:[{percentage:10,label:"Lead",gradient:"linear-gradient(90deg, #1AB2FF 10%, transparent 10%)"},{percentage:20,label:"Prospect",gradient:"linear-gradient(90deg, #1AB2FF 20%, transparent 20%)"},{percentage:40,label:"Proposal sent",gradient:"linear-gradient(90deg, #1AB2FF 40%, transparent 40%)"},{percentage:60,label:"Negotiation",gradient:"linear-gradient(90deg, #1AB2FF 60%, transparent 60%)"},{percentage:80,label:"Awaiting approval",gradient:"linear-gradient(90deg, #1AB2FF 80%, transparent 80%)"}].map((e=>{return(0,I.jsx)(_e,{percentage:e.percentage,label:e.label,gradient:e.gradient,onSelect:()=>(async e=>{try{const s=n,t=e.percentage;await(0,k.V3)(s,t),o({text:e.label,percentage:e.percentage,background:e.gradient}),h(t),l(),c(!1)}catch(s){console.error("Error updating sales lead:",s)}})(e),isActive:(s=e.percentage,s===d)},e.percentage);var s}))})]})};var Te=t(72970),Re=t(76083),Le=t(74802),Fe=t(96446),Ee=t(11906),De=t(71245);const Pe=t.p+"static/media/archive.a93d5d4bb5e805d41614288a785b8375.svg";var Ue=t(97483);const Ie=e=>{let{saleUniqueId:s,LostQuote:t,quoteType:n,onRemoveRow:l}=e;const[r,o]=a.useState(!1),[,i]=(0,a.useState)(!1),[c]=(0,a.useState)({content:"",type:"success"}),d=()=>{setTimeout((()=>{i(!1),o(!1)}),1e3)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ee.A,{onClick:()=>o(!0),className:`quoteLost message ${c.type}`,children:(0,I.jsx)(Te.A,{color:"#D92D20",size:16})}),(0,I.jsx)(De.A,{open:r,onClose:d,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,I.jsx)(Fe.A,{className:"modelStyleBox QuoteLost salesTableWrap  QuoteActionStyle",sx:{width:460},children:(0,I.jsxs)(le.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:[(0,I.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,I.jsxs)("span",{children:[(0,I.jsxs)("div",{className:"iconOutStyleflex",children:[(0,I.jsxs)("div",{className:"flexIconWrap",children:[(0,I.jsx)("div",{className:"iconOutStyle",children:(0,I.jsx)("div",{className:"iconinStyle",children:(0,I.jsx)("div",{className:"iconinnerStyle",children:(0,I.jsx)(Re.A,{color:"#F04438",size:24})})})}),(0,I.jsx)("div",{className:"quoteStyleHeading",children:"lost"===n&&(0,I.jsx)(I.Fragment,{children:`Quote Lost ${t}`})})]}),(0,I.jsx)(S.A,{edge:"end",color:"inherit",onClick:d,"aria-label":"close",children:(0,I.jsx)(Le.A,{color:"#667085",size:24})})]}),(0,I.jsxs)("div",{className:"stepBoxStyle",children:[(0,I.jsxs)("ul",{children:[(0,I.jsxs)("li",{children:[(0,I.jsx)("strong",{children:(0,I.jsx)("img",{src:Ue.A,alt:"SalesIcon"})}),(0,I.jsx)("span",{className:"lightColorStyle",children:"Sales"})]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("em",{className:"lineHor"}),(0,I.jsx)("strong",{children:(0,I.jsxs)("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("g",{clipPath:"url(#clip0_13244_72509)",children:(0,I.jsx)("path",{d:"M4.31518 0.577465C4.6602 0.577465 4.93493 0.727048 5.13939 1.02621C5.3481 1.31938 5.45246 1.75914 5.45246 2.3455V5.45975H4.31518V2.71346C4.31518 2.40832 4.27473 2.18694 4.1938 2.04933C4.11287 1.91172 3.9936 1.84291 3.836 1.84291C3.6784 1.84291 3.54636 1.93266 3.43988 2.11215C3.33765 2.28566 3.28654 2.54594 3.28654 2.89296V5.45975H2.15566V2.71346C2.15566 2.40832 2.1152 2.18694 2.03427 2.04933C1.95334 1.91172 1.83407 1.84291 1.67648 1.84291C1.51888 1.84291 1.38684 1.93266 1.28035 2.11215C1.17813 2.28566 1.12701 2.54594 1.12701 2.89296V5.45975H-0.0102539V0.694137H1.08228V1.34032H1.10784C1.35915 0.831748 1.70842 0.577465 2.15566 0.577465C2.38567 0.577465 2.58586 0.64627 2.75624 0.783889C2.92661 0.915517 3.05866 1.11595 3.15237 1.3852C3.30144 1.13989 3.46543 0.945429 3.64433 0.801836C3.82323 0.652252 4.04684 0.577465 4.31518 0.577465ZM9.16305 4.02378C9.12046 4.26909 9.03099 4.51141 8.8947 4.75074C8.7584 4.98408 8.5667 5.18153 8.3197 5.34307C8.07264 5.49864 7.77023 5.57642 7.4124 5.57642C6.84593 5.57642 6.40293 5.35504 6.08346 4.91229C5.76405 4.46953 5.6043 3.86224 5.6043 3.09041C5.6043 2.30661 5.76187 1.69333 6.07711 1.25058C6.39652 0.801836 6.83952 0.577465 7.40605 0.577465C7.96399 0.577465 8.40276 0.795854 8.72217 1.23262C9.04593 1.6694 9.20776 2.29763 9.20776 3.11733L9.2014 3.39555H6.77352C6.77352 3.74856 6.83099 4.02977 6.94599 4.23917C7.06528 4.44261 7.22076 4.54432 7.4124 4.54432C7.58705 4.54432 7.72123 4.48448 7.81493 4.36482C7.90864 4.24516 7.9704 4.09857 8.00023 3.92506L9.16305 4.02378ZM7.40605 1.58264C7.21864 1.58264 7.06952 1.66641 6.95881 1.83393C6.84805 1.99548 6.7884 2.21088 6.77987 2.48012H8.03858C8.03005 2.21088 7.96828 1.99548 7.85328 1.83393C7.74252 1.66641 7.59346 1.58264 7.40605 1.58264ZM4.31518 6.3615C4.6602 6.3615 4.93493 6.51109 5.13939 6.81024C5.3481 7.10342 5.45246 7.54316 5.45246 8.12957V11.2438H4.31518V8.49752C4.31518 8.19237 4.27473 7.97101 4.1938 7.83335C4.11287 7.69577 3.9936 7.62694 3.836 7.62694C3.6784 7.62694 3.54636 7.71668 3.43988 7.89623C3.33765 8.06967 3.28654 8.32995 3.28654 8.67699V11.2438H2.15566V8.49752C2.15566 8.19237 2.1152 7.97101 2.03427 7.83335C1.95334 7.69577 1.83407 7.62694 1.67648 7.62694C1.51888 7.62694 1.38684 7.71668 1.28035 7.89623C1.17813 8.06967 1.12701 8.32995 1.12701 8.67699V11.2438H-0.0102539V6.47817H1.08228V7.12436H1.10784C1.35915 6.61579 1.70842 6.3615 2.15566 6.3615C2.38567 6.3615 2.58586 6.43031 2.75624 6.56793C2.92661 6.69955 3.05866 6.89999 3.15237 7.16923C3.30144 6.92393 3.46543 6.72947 3.64433 6.58587C3.82323 6.43629 4.04684 6.3615 4.31518 6.3615ZM7.92358 11.2438C7.85964 11.1361 7.8277 10.9057 7.8277 10.5528C7.74681 10.804 7.60623 11.0014 7.40605 11.145C7.21011 11.2887 6.98434 11.3605 6.72876 11.3605C6.53287 11.3605 6.34758 11.3036 6.17293 11.1899C5.99828 11.0763 5.85776 10.9147 5.75123 10.7053C5.64476 10.4959 5.59152 10.2476 5.59152 9.96039C5.59152 9.47577 5.7044 9.11377 5.93017 8.87448C6.15587 8.6351 6.49876 8.47356 6.95881 8.38977C7.19305 8.34193 7.37193 8.29706 7.49546 8.25517C7.61899 8.20733 7.70417 8.15643 7.75105 8.10264C7.80217 8.04281 7.8277 7.96498 7.8277 7.86929C7.8277 7.71965 7.78511 7.60604 7.69993 7.5282C7.61899 7.4445 7.50399 7.4026 7.35493 7.4026C7.21864 7.4026 7.09934 7.4564 6.99711 7.56414C6.89487 7.67181 6.82252 7.82443 6.77987 8.02183L5.7257 7.86929C5.79811 7.39657 5.98128 7.02863 6.27517 6.76537C6.56905 6.49612 6.93534 6.3615 7.37411 6.3615C7.89799 6.3615 8.29411 6.5051 8.56246 6.79229C8.83081 7.0735 8.96499 7.47441 8.96499 7.99489V10.3553C8.96499 10.6126 8.96923 10.807 8.97776 10.9386C8.99052 11.0643 9.01611 11.166 9.0544 11.2438H7.92358ZM7.8277 9.00007C7.78087 9.04197 7.70417 9.08088 7.5977 9.11675C7.49123 9.14666 7.37411 9.17657 7.24628 9.20648C6.91405 9.29622 6.74793 9.50568 6.74793 9.83471C6.74793 9.99625 6.78417 10.1249 6.85658 10.2207C6.93323 10.3104 7.03334 10.3553 7.15687 10.3553C7.25911 10.3553 7.36128 10.3224 7.46352 10.2565C7.56576 10.1908 7.65093 10.089 7.71911 9.95138C7.79152 9.80785 7.8277 9.6283 7.8277 9.41289V9.00007ZM11.3669 10.0681V11.2438C11.2988 11.2558 11.0688 11.2617 10.6769 11.2617C10.4 11.2617 10.1828 11.2288 10.0252 11.163C9.87187 11.0913 9.75687 10.9656 9.68023 10.7861C9.60781 10.6065 9.57158 10.3433 9.57158 9.99625V7.47441H9.05411V6.47817H9.57158V5.16786H10.7025V6.47817H11.3797V7.47441H10.7025V9.61938C10.7025 9.81083 10.7302 9.93345 10.7855 9.98733C10.8452 10.0412 10.9559 10.0681 11.1178 10.0681H11.3669ZM14.9363 9.80785C14.8937 10.0531 14.8042 10.2954 14.6679 10.5347C14.5316 10.7681 14.3399 10.9656 14.0929 11.1271C13.8459 11.2827 13.5435 11.3605 13.1856 11.3605C12.6192 11.3605 12.1762 11.1391 11.8567 10.6963C11.5373 10.2536 11.3775 9.64623 11.3775 8.87448C11.3775 8.09066 11.5351 7.47738 11.8503 7.03462C12.1698 6.58587 12.6128 6.3615 13.1793 6.3615C13.7372 6.3615 14.176 6.57989 14.4954 7.01666C14.8192 7.45342 14.981 8.08165 14.981 8.90133L14.9746 9.17954H12.5468C12.5468 9.53262 12.6042 9.8138 12.7192 10.0232C12.8385 10.2266 12.994 10.3283 13.1856 10.3283C13.3603 10.3283 13.4945 10.2685 13.5882 10.1489C13.6819 10.0292 13.7436 9.88263 13.7735 9.70911L14.9363 9.80785ZM13.1793 7.36666C12.9919 7.36666 12.8428 7.45045 12.732 7.61794C12.6213 7.77956 12.5616 7.99489 12.5531 8.26418H13.8118C13.8033 7.99489 13.7415 7.77956 13.6265 7.61794C13.5158 7.45045 13.3667 7.36666 13.1793 7.36666Z",fill:"url(#paint0_radial_13244_72509)"})}),(0,I.jsxs)("defs",{children:[(0,I.jsxs)("radialGradient",{id:"paint0_radial_13244_72509",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(-0.195533 0.874516) rotate(33.8103) scale(16.7787 220.176)",children:[(0,I.jsx)("stop",{stopColor:"#1AB3FF"}),(0,I.jsx)("stop",{offset:"1",stopColor:"#FFB258"})]}),(0,I.jsx)("clipPath",{id:"clip0_13244_72509",children:(0,I.jsx)("rect",{width:"15",height:"10.8451",fill:"white",transform:"translate(0 0.577465)"})})]})]})}),(0,I.jsx)("em",{className:"lineHor"})]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("strong",{children:(0,I.jsx)("img",{src:Pe,alt:"Archive"})}),(0,I.jsx)("span",{children:"Archive"})]})]}),(0,I.jsx)("p",{children:"Sorry to see a lost opportunity. This quote will be stored in the client's history, should you need to refer to it in the future."})]})]})}),(0,I.jsx)("div",{className:"footerBorder text-center",children:(0,I.jsx)("button",{onClick:async()=>{try{if(s){(await(0,k.Op)([s])).length?(l(),R.oR.success("Sale request has been updated to Lost!")):R.oR.error("Failed to update the sale request to Lost. Please try again.")}}catch(e){console.error("Error:",e),R.oR.error("An error occurred. Please try again.")}d(),i(!0)},children:"Archive"})})]})})})]})};var He=t(88166),Be=t(99832),qe=t(6030),ze=t(15129);const Me=e=>{let{active:s,config:t}=e;return(0,I.jsx)(ze.A,{active:s,config:t})},Ve=e=>{let{saleUniqueId:s,wonQuote:t,quoteType:n,onRemoveRow:l}=e;const[r,o]=a.useState(!1),[i,c]=(0,a.useState)(!1),[d]=(0,a.useState)({content:"",type:"success"}),h=()=>{setTimeout((()=>{c(!1),o(!1)}),1e3)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ee.A,{onClick:()=>o(!0),className:`message quoteWon ${d.type} ${"Draft"===t}`,children:(0,I.jsx)(He.A,{color:"#079455",size:16})}),(0,I.jsx)(De.A,{open:r,onClose:h,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,I.jsx)(Fe.A,{className:"modelStyleBox QuoteWon salesTableWrap QuoteActionStyle",sx:{width:460},children:(0,I.jsxs)(le.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:[(0,I.jsx)("div",{className:"modelHeader justify-content-between align-items-start",children:(0,I.jsxs)("span",{children:[(0,I.jsxs)("div",{className:"iconOutStyleflex",children:[(0,I.jsxs)("div",{className:"flexIconWrap",children:[(0,I.jsx)("div",{className:"iconOutStyle",children:(0,I.jsx)("div",{className:"iconinStyle",children:(0,I.jsx)("div",{className:"iconinnerStyle",children:(0,I.jsx)(Be.A,{color:"#17B26A",size:24})})})}),(0,I.jsx)("div",{className:"quoteStyleHeading",children:"won"===n&&(0,I.jsx)(I.Fragment,{children:`Quote Won ${t}`})})]}),(0,I.jsx)(S.A,{edge:"end",color:"inherit",onClick:h,"aria-label":"close",children:(0,I.jsx)(Le.A,{color:"#667085",size:24})})]}),(0,I.jsxs)("div",{className:"stepBoxStyle",children:[(0,I.jsxs)("ul",{children:[(0,I.jsxs)("li",{children:[(0,I.jsx)("strong",{children:(0,I.jsx)("img",{src:Ue.A,alt:"SalesIcon"})}),(0,I.jsx)("span",{className:"lightColorStyle",children:"Sales"})]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("em",{className:"lineHor"}),(0,I.jsx)("strong",{children:(0,I.jsxs)("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,I.jsx)("g",{clipPath:"url(#clip0_13244_72509)",children:(0,I.jsx)("path",{d:"M4.31518 0.577465C4.6602 0.577465 4.93493 0.727048 5.13939 1.02621C5.3481 1.31938 5.45246 1.75914 5.45246 2.3455V5.45975H4.31518V2.71346C4.31518 2.40832 4.27473 2.18694 4.1938 2.04933C4.11287 1.91172 3.9936 1.84291 3.836 1.84291C3.6784 1.84291 3.54636 1.93266 3.43988 2.11215C3.33765 2.28566 3.28654 2.54594 3.28654 2.89296V5.45975H2.15566V2.71346C2.15566 2.40832 2.1152 2.18694 2.03427 2.04933C1.95334 1.91172 1.83407 1.84291 1.67648 1.84291C1.51888 1.84291 1.38684 1.93266 1.28035 2.11215C1.17813 2.28566 1.12701 2.54594 1.12701 2.89296V5.45975H-0.0102539V0.694137H1.08228V1.34032H1.10784C1.35915 0.831748 1.70842 0.577465 2.15566 0.577465C2.38567 0.577465 2.58586 0.64627 2.75624 0.783889C2.92661 0.915517 3.05866 1.11595 3.15237 1.3852C3.30144 1.13989 3.46543 0.945429 3.64433 0.801836C3.82323 0.652252 4.04684 0.577465 4.31518 0.577465ZM9.16305 4.02378C9.12046 4.26909 9.03099 4.51141 8.8947 4.75074C8.7584 4.98408 8.5667 5.18153 8.3197 5.34307C8.07264 5.49864 7.77023 5.57642 7.4124 5.57642C6.84593 5.57642 6.40293 5.35504 6.08346 4.91229C5.76405 4.46953 5.6043 3.86224 5.6043 3.09041C5.6043 2.30661 5.76187 1.69333 6.07711 1.25058C6.39652 0.801836 6.83952 0.577465 7.40605 0.577465C7.96399 0.577465 8.40276 0.795854 8.72217 1.23262C9.04593 1.6694 9.20776 2.29763 9.20776 3.11733L9.2014 3.39555H6.77352C6.77352 3.74856 6.83099 4.02977 6.94599 4.23917C7.06528 4.44261 7.22076 4.54432 7.4124 4.54432C7.58705 4.54432 7.72123 4.48448 7.81493 4.36482C7.90864 4.24516 7.9704 4.09857 8.00023 3.92506L9.16305 4.02378ZM7.40605 1.58264C7.21864 1.58264 7.06952 1.66641 6.95881 1.83393C6.84805 1.99548 6.7884 2.21088 6.77987 2.48012H8.03858C8.03005 2.21088 7.96828 1.99548 7.85328 1.83393C7.74252 1.66641 7.59346 1.58264 7.40605 1.58264ZM4.31518 6.3615C4.6602 6.3615 4.93493 6.51109 5.13939 6.81024C5.3481 7.10342 5.45246 7.54316 5.45246 8.12957V11.2438H4.31518V8.49752C4.31518 8.19237 4.27473 7.97101 4.1938 7.83335C4.11287 7.69577 3.9936 7.62694 3.836 7.62694C3.6784 7.62694 3.54636 7.71668 3.43988 7.89623C3.33765 8.06967 3.28654 8.32995 3.28654 8.67699V11.2438H2.15566V8.49752C2.15566 8.19237 2.1152 7.97101 2.03427 7.83335C1.95334 7.69577 1.83407 7.62694 1.67648 7.62694C1.51888 7.62694 1.38684 7.71668 1.28035 7.89623C1.17813 8.06967 1.12701 8.32995 1.12701 8.67699V11.2438H-0.0102539V6.47817H1.08228V7.12436H1.10784C1.35915 6.61579 1.70842 6.3615 2.15566 6.3615C2.38567 6.3615 2.58586 6.43031 2.75624 6.56793C2.92661 6.69955 3.05866 6.89999 3.15237 7.16923C3.30144 6.92393 3.46543 6.72947 3.64433 6.58587C3.82323 6.43629 4.04684 6.3615 4.31518 6.3615ZM7.92358 11.2438C7.85964 11.1361 7.8277 10.9057 7.8277 10.5528C7.74681 10.804 7.60623 11.0014 7.40605 11.145C7.21011 11.2887 6.98434 11.3605 6.72876 11.3605C6.53287 11.3605 6.34758 11.3036 6.17293 11.1899C5.99828 11.0763 5.85776 10.9147 5.75123 10.7053C5.64476 10.4959 5.59152 10.2476 5.59152 9.96039C5.59152 9.47577 5.7044 9.11377 5.93017 8.87448C6.15587 8.6351 6.49876 8.47356 6.95881 8.38977C7.19305 8.34193 7.37193 8.29706 7.49546 8.25517C7.61899 8.20733 7.70417 8.15643 7.75105 8.10264C7.80217 8.04281 7.8277 7.96498 7.8277 7.86929C7.8277 7.71965 7.78511 7.60604 7.69993 7.5282C7.61899 7.4445 7.50399 7.4026 7.35493 7.4026C7.21864 7.4026 7.09934 7.4564 6.99711 7.56414C6.89487 7.67181 6.82252 7.82443 6.77987 8.02183L5.7257 7.86929C5.79811 7.39657 5.98128 7.02863 6.27517 6.76537C6.56905 6.49612 6.93534 6.3615 7.37411 6.3615C7.89799 6.3615 8.29411 6.5051 8.56246 6.79229C8.83081 7.0735 8.96499 7.47441 8.96499 7.99489V10.3553C8.96499 10.6126 8.96923 10.807 8.97776 10.9386C8.99052 11.0643 9.01611 11.166 9.0544 11.2438H7.92358ZM7.8277 9.00007C7.78087 9.04197 7.70417 9.08088 7.5977 9.11675C7.49123 9.14666 7.37411 9.17657 7.24628 9.20648C6.91405 9.29622 6.74793 9.50568 6.74793 9.83471C6.74793 9.99625 6.78417 10.1249 6.85658 10.2207C6.93323 10.3104 7.03334 10.3553 7.15687 10.3553C7.25911 10.3553 7.36128 10.3224 7.46352 10.2565C7.56576 10.1908 7.65093 10.089 7.71911 9.95138C7.79152 9.80785 7.8277 9.6283 7.8277 9.41289V9.00007ZM11.3669 10.0681V11.2438C11.2988 11.2558 11.0688 11.2617 10.6769 11.2617C10.4 11.2617 10.1828 11.2288 10.0252 11.163C9.87187 11.0913 9.75687 10.9656 9.68023 10.7861C9.60781 10.6065 9.57158 10.3433 9.57158 9.99625V7.47441H9.05411V6.47817H9.57158V5.16786H10.7025V6.47817H11.3797V7.47441H10.7025V9.61938C10.7025 9.81083 10.7302 9.93345 10.7855 9.98733C10.8452 10.0412 10.9559 10.0681 11.1178 10.0681H11.3669ZM14.9363 9.80785C14.8937 10.0531 14.8042 10.2954 14.6679 10.5347C14.5316 10.7681 14.3399 10.9656 14.0929 11.1271C13.8459 11.2827 13.5435 11.3605 13.1856 11.3605C12.6192 11.3605 12.1762 11.1391 11.8567 10.6963C11.5373 10.2536 11.3775 9.64623 11.3775 8.87448C11.3775 8.09066 11.5351 7.47738 11.8503 7.03462C12.1698 6.58587 12.6128 6.3615 13.1793 6.3615C13.7372 6.3615 14.176 6.57989 14.4954 7.01666C14.8192 7.45342 14.981 8.08165 14.981 8.90133L14.9746 9.17954H12.5468C12.5468 9.53262 12.6042 9.8138 12.7192 10.0232C12.8385 10.2266 12.994 10.3283 13.1856 10.3283C13.3603 10.3283 13.4945 10.2685 13.5882 10.1489C13.6819 10.0292 13.7436 9.88263 13.7735 9.70911L14.9363 9.80785ZM13.1793 7.36666C12.9919 7.36666 12.8428 7.45045 12.732 7.61794C12.6213 7.77956 12.5616 7.99489 12.5531 8.26418H13.8118C13.8033 7.99489 13.7415 7.77956 13.6265 7.61794C13.5158 7.45045 13.3667 7.36666 13.1793 7.36666Z",fill:"url(#paint0_radial_13244_72509)"})}),(0,I.jsxs)("defs",{children:[(0,I.jsxs)("radialGradient",{id:"paint0_radial_13244_72509",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(-0.195533 0.874516) rotate(33.8103) scale(16.7787 220.176)",children:[(0,I.jsx)("stop",{stopColor:"#1AB3FF"}),(0,I.jsx)("stop",{offset:"1",stopColor:"#FFB258"})]}),(0,I.jsx)("clipPath",{id:"clip0_13244_72509",children:(0,I.jsx)("rect",{width:"15",height:"10.8451",fill:"white",transform:"translate(0 0.577465)"})})]})]})}),(0,I.jsx)("em",{className:"lineHor"})]}),(0,I.jsxs)("li",{children:[(0,I.jsx)("strong",{children:(0,I.jsx)("img",{src:qe.A,alt:"ManagementIcon"})}),(0,I.jsx)("span",{children:"Management"})]})]}),(0,I.jsx)("p",{children:"Great, another quote converted into a project."})]})]})}),(0,I.jsxs)("div",{className:"footerBorder text-center",children:[(0,I.jsx)("button",{onClick:async()=>{try{if(s){(await(0,k.WG)([s])).length?(l(),R.oR.success("Successfully moved to Management!")):R.oR.error("Failed to move to Management. Please try again.")}}catch(e){R.oR.error("An error occurred. Please try again.")}h(),c(!0)},children:"Move to the Management"}),(0,I.jsx)(Me,{active:i,config:{}})]})]})})})]})};var Oe=t(90239),Qe=t(76688),We=t(41020);const Ge=e=>{let{saleUniqueId:s,noteData:t,onNoteUpdate:n,refreshData:l}=e;const[r,o]=(0,a.useState)(null),[i,c]=(0,a.useState)(t||""),[d,h]=(0,a.useState)(!t),[u,m]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),j=500,g=e=>e.trim()?e.length<3?"Note must be at least 3 characters":e.length>j?"Note must not exceed 500 characters":"":"Note is required",v=()=>{o(null),c(t||""),m(""),h(!t)},y=async()=>{const e=g(i);if(e)m(e);else if(s){p(!0);try{await(0,k.cS)(s,i.trim()),await(0,k.j3)(),n&&n(i.trim()),h(!1),v(),l()}catch(u){console.error("Error saving note:",u),m(u.message||"Failed to save note. Please try again.")}finally{p(!1)}}else m("Sale ID is missing")},C=Boolean(r);return(0,a.useEffect)((()=>{t&&c(t)}),[t]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"saleNoteBorder noteInfo "+(i?"Yes":"No"),"aria-describedby":C?"simple-popover":void 0,onClick:e=>{o(e.currentTarget),m("")},children:i?(0,I.jsxs)("span",{style:{cursor:"pointer"},onClick:()=>h(!0),children:["Note ",(0,I.jsx)(Oe.A,{color:"#17B26A",size:16})]}):(0,I.jsx)("strong",{children:(0,I.jsxs)("span",{style:{cursor:"pointer"},children:["Note ",(0,I.jsx)(ae.A,{color:"#667085",size:16})]})})}),(0,I.jsx)(We.Ay,{id:"simple-popover",open:C,anchorEl:r,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{width:"460px"},id:"popoverStyleChange"},children:(0,I.jsxs)(ue.A,{onSubmit:e=>{e.preventDefault(),y()},children:[(0,I.jsxs)("div",{className:"popoverHead popoverHeadflex salesTableWrap",children:[(0,I.jsxs)("span",{children:[(0,I.jsx)("div",{className:"iconOutStyle",children:(0,I.jsx)("div",{className:"iconinStyle",children:(0,I.jsx)("div",{className:"iconinnerStyle",children:(0,I.jsx)(Qe.A,{color:"#17B26A",size:24})})})}),"Add Note"]}),(0,I.jsx)(S.A,{className:"popupcrossInfo",size:"small",onClick:v,disabled:x,children:(0,I.jsx)(Le.A,{})})]}),(0,I.jsx)("div",{className:"popupcrossInfomain",children:(0,I.jsxs)(le.A,{sx:{p:"16px 24px 24px 24px"},children:[(0,I.jsxs)("h3",{children:["Note ",(0,I.jsx)("span",{className:"required",children:"*"})]}),(0,I.jsx)(ue.A.Control,{id:"placeholderColor",as:"textarea",placeholder:"Enter a description...",style:{height:"157px"},value:i,onChange:e=>{const s=e.target.value;c(s);const t=g(s);m(t)},maxLength:j,className:u?"error-border":""}),(0,I.jsx)("div",{className:"d-flex justify-content-between mt-1",children:(0,I.jsx)("small",{className:u?"error-message":"text-muted",children:u||`${i.length}/500 characters`})})]})}),(0,I.jsxs)("div",{className:"popoverbottom popoverendflex",children:[(0,I.jsx)(Ee.A,{className:"closebox",onClick:v,disabled:x,children:"Cancel"}),(0,I.jsx)(Ee.A,{className:"savebox",onClick:y,disabled:x||!!u,children:x?"Saving...":"Save"})]})]})})]})};var Ze=t(39759),Ye=t(75329),Ke=t(62812),Je=t(39195),Xe=t(56052),es=t(2028),ss=t(78602),ts=t(53519),as=t(61072),ns=t(5328),ls=t(44621),rs=t(3098),os=t(73216);const is=t.p+"static/media/newQuote.9cbe4c1c556f514b424a.png",cs=()=>{const[e,s]=(0,a.useState)(!1),t=()=>s(!1),n=(0,os.Zp)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ee.A,{onClick:()=>s(!0),className:"addNewBilling",children:(0,I.jsxs)("div",{className:"styleGrey01 tabActive",children:["New  ",(0,I.jsx)(ae.A,{color:"#fff",size:16})]})}),(0,I.jsx)(De.A,{open:e,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,I.jsx)(Fe.A,{className:"modelStyleBoxstatus NewQuoteModal",sx:{width:732},children:(0,I.jsx)(le.A,{id:"modal-modal-title",className:"",variant:"h6",component:"h2",children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"modelHeader modelHeaderBillig d-flex justify-content-between align-items-start",children:[(0,I.jsxs)("span",{className:"modelHeadFlex",children:[(0,I.jsx)("div",{className:"iconinnerStyle1",children:(0,I.jsx)(rs.A,{color:"#F04438",size:24})}),(0,I.jsx)("h2",{children:"Complete Your Profile to Proceed"})]}),(0,I.jsx)(S.A,{edge:"end",color:"inherit",onClick:t,"aria-label":"close",children:(0,I.jsx)(Le.A,{color:"#667085",size:24})})]}),(0,I.jsxs)("div",{className:"stepBoxStyle ",children:[(0,I.jsx)("img",{src:is,alt:"NewQuoteImg"}),(0,I.jsxs)("div",{className:"newQuotewrap",children:[(0,I.jsx)("h3",{children:"Bank Details Required"}),(0,I.jsx)("p",{children:"Before creating a new request, please ensure you have filled in your bank details. This is necessary to process your transactions smoothly. You can add your bank information by navigating to your profile settings. "})]})]}),(0,I.jsxs)("div",{className:"footerButton",children:[(0,I.jsx)("button",{className:"Cancel",onClick:t,children:"Cancel and Return"}),(0,I.jsx)(Ee.A,{className:"save",onClick:()=>{n("/settings/generalinformation/bank-details"),t()},children:"Add Bank Details"})]})]})})})})]})};t(7245);var ds=t(27965);const hs=e=>{let{onDataApply:s}=e;const[t,n]=(0,a.useState)([]),l=(0,a.useRef)(null),[r,o]=(0,a.useState)(null),[i,c]=(0,a.useState)(null),[,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)("");(0,a.useEffect)((()=>{const e=new Date,s=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`;u(s)}),[]);(0,a.useEffect)((()=>{if(2===t.length){const e=t[0],s=t[1];o(e),c(s)}}),[t]);(0,a.useEffect)((()=>{if(r||i){if(r&&i){const e={year:"numeric",month:"short",day:"numeric"},s=`<p>${`${new Date(r).toLocaleDateString("en-US",e)} - ${new Date(i).toLocaleDateString("en-US",e)}`}</p><span class="today-span" style="cursor: pointer">Today</span>`,t=document.querySelector(".flatpickr-months");if(t){const e=document.querySelector(".custom-div");if(e)e.innerHTML=s;else{const e=document.createElement("div");e.className="custom-div",e.innerHTML=s,t.parentNode.insertBefore(e,t.nextSibling)}}}}else{const e=new Date;o(e),c(e)}}),[r,i]);const m=()=>{const e=new Date;n([e,e])};return(0,a.useEffect)((()=>{const e=document.querySelector(".today-span");return e&&e.addEventListener("click",m),()=>{e&&e.removeEventListener("click",m)}}),[r,i]),(0,I.jsxs)("div",{children:[(0,I.jsx)(ds.A,{options:{dateFormat:"Y-m-d",mode:"range",inline:!0},value:t,onChange:e=>{n(e)},ref:l}),(0,I.jsxs)("div",{className:"calenderBut",children:[(0,I.jsx)("button",{className:"tabCancel",onClick:()=>{n([]),o(null),c(null),d(!1);const e=document.querySelector(".custom-div p");e&&(e.textContent=`${h}`)},children:"Cancel"}),(0,I.jsx)("button",{className:"tabApply",onClick:()=>{(()=>{const e=document.querySelector(".custom-div p");r&&i&&e&&(e.textContent=`${r.toISOString().split("T")[0]} - ${i.toISOString().split("T")[0]}`)})(),d(!0),s({startDate:r,endDate:i});const e=document.querySelector(".tags-input-container .rangedatepicker .mainWrapperTags");e&&(e.textContent=`${r.toISOString().split("T")[0]} - ${i.toISOString().split("T")[0]}`)},children:"Apply"})]})]})};var us=t(25721);const ms=e=>{let{setInputValue:s,inputValue:t}=e;return(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"mr-3",children:(0,I.jsx)(us.A,{color:"#98A2B3",size:20})}),(0,I.jsx)("input",{type:"text",placeholder:"Search",value:t,onChange:e=>s(e.target.value)})]})};var xs=t(14834),ps=t(54967);const js=[{percentage:10,label:"Lead",gradient:"linear-gradient(90deg, #1AB2FF 10%, transparent 10%)"},{percentage:20,label:"Prospect",gradient:"linear-gradient(90deg, #1AB2FF 20%, transparent 20%)"},{percentage:40,label:"Proposal sent",gradient:"linear-gradient(90deg, #1AB2FF 40%, transparent 40%)"},{percentage:60,label:"Negotiation",gradient:"linear-gradient(90deg, #1AB2FF 60%, transparent 60%)"},{percentage:80,label:"Awaiting approval",gradient:"linear-gradient(90deg, #1AB2FF 80%, transparent 80%)"}],gs=e=>{var s,t,n;let{profileData:l,salesData:r,removeRowMulti:i,selectedUniqueIds:c,onRowsFilterChange:d,rows:u,setSelectedRows:x,selectedRow:p,selectedRowCount:j}=e;const[v,y]=(0,a.useState)(0),[C,f]=(0,a.useState)("DateRange"),[b,N]=(0,a.useState)({}),[w,S]=(0,a.useState)({}),[A,$]=(0,a.useState)(!1),[_,T]=(0,a.useState)(!1),L=(0,a.useRef)(null),[F,P,U]=(0,es.d7)("",400),H=(0,E.I)({queryKey:["project-manager"],queryFn:D.Fl}),q=e=>{var s,t;let a=Ns(r);if(null!==e&&void 0!==e&&e.dateRange){const[s,t]=e.dateRange;a=u.filter((e=>{const a=new Date(1e3*parseInt(e.created)).toLocaleDateString("en-CA");return a>=s&&a<=t}))}null!==e&&void 0!==e&&e.progress&&(a=a.filter((s=>{var t;return null===e||void 0===e||null===(t=e.progress)||void 0===t?void 0:t.includes(s.progressName)}))),(null===(s=e.statuses)||void 0===s?void 0:s.length)>0&&(a=a.filter((s=>{var t;return null===e||void 0===e||null===(t=e.statuses)||void 0===t?void 0:t.includes(null===s||void 0===s?void 0:s.Status)}))),(null===e||void 0===e||null===(t=e.projectManager)||void 0===t?void 0:t.length)>0&&(a=a.filter((s=>{var t;return null===s||void 0===s||null===(t=s.User)||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.full_name)).some((s=>{var t;return null===e||void 0===e||null===(t=e.projectManager)||void 0===t?void 0:t.includes(s)}))}))),a=a.filter((e=>{var s,t,a;return!!(null!==e&&void 0!==e&&null!==(s=e.Client)&&void 0!==s&&s.toLowerCase().includes(null===P||void 0===P?void 0:P.toLowerCase())||null!==e&&void 0!==e&&null!==(t=e.Quote)&&void 0!==t&&t.toLowerCase().includes(null===P||void 0===P?void 0:P.toLowerCase())||null!==e&&void 0!==e&&null!==(a=e.Reference)&&void 0!==a&&a.toLowerCase().includes(null===P||void 0===P?void 0:P.toLowerCase()))})),d(a)},z=(0,xs.m)(v);(0,a.useEffect)((()=>{if(null!==u&&void 0!==u&&u.length){const e=u.reduce(((e,s)=>e+s.amountData),0);y(e)}}),[u]);return(0,a.useEffect)((()=>{const e=e=>{L.current&&!L.current.contains(e.target)&&(e.target.closest(".tab-content,.nav-tabs")||$(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,a.useEffect)((()=>{q(w)}),[P]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:(j?"selected-row":"")+" flexbetween paddingLR tableTopBar tableTopBarSales",style:{borderBottom:"1px solid #f2f2f2"},children:p&&0!==(null===p||void 0===p?void 0:p.length)?(0,I.jsx)(ts.A,{fluid:!0,children:(0,I.jsxs)(as.A,{style:{display:"flex",alignItems:"center"},children:[(0,I.jsxs)(ss.A,{style:{textAlign:"left",display:"flex",alignItems:"center"},children:[(0,I.jsxs)("span",{className:"styleT4",children:["Selected: ",j]}),(0,I.jsxs)("ul",{className:"filterBtn",children:[(0,I.jsxs)("li",{children:[(0,I.jsxs)(g.A,{variant:"lostFilter",onClick:async()=>{try{if(c){await(0,k.HT)(c)?(x([]),i(),T(!0),R.oR.success("Sale request has been updated to Lost!")):R.oR.error("Failed to update to Lost. Please try again.")}}catch(e){R.oR.error("An error occurred. Please try again.")}},children:["Lost",(0,I.jsx)(Te.A,{color:"#D92D20",size:20})]}),(0,I.jsx)(Me,{active:_,config:{}})]}),(0,I.jsxs)("li",{children:[" ",(0,I.jsxs)(g.A,{variant:"wonFilter",onClick:async()=>{try{if(c){await(0,k.fW)(c)?(x([]),i(),T(!0),R.oR.success("Successfully moved to Management!")):R.oR.error("Failed to move to Management. Please try again.")}}catch(e){R.oR.error("An error occurred. Please try again.")}},children:["Won",(0,I.jsx)(He.A,{color:"#079455",size:20})]}),(0,I.jsx)(Me,{active:_,config:{}})]}),(0,I.jsx)("li",{children:(0,I.jsx)(g.A,{variant:"downloadBtn",children:(0,I.jsx)(Ye.A,{color:"#344054",size:20})})})]})]}),(0,I.jsx)(ss.A,{}),(0,I.jsx)(ss.A,{style:{textAlign:"right"},children:r&&(null===r||void 0===r?void 0:r.length)>0?(0,I.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total"," ",(0,I.jsxs)("span",{className:"styleT2",children:[null!==u&&void 0!==u&&u.length?(0,I.jsxs)(I.Fragment,{children:[" ",null===u||void 0===u?void 0:u.length]}):(0,I.jsxs)(I.Fragment,{children:[null===r||void 0===r?void 0:r.length," "]})," ","Sales"]}),(0,I.jsxs)("strong",{className:"styleT1",children:["$",(0,I.jsx)(I.Fragment,{children:z})]})]}):(0,I.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total ",(0,I.jsx)("span",{className:"styleT2",children:"0 Sales"})," ",(0,I.jsx)("strong",{className:"styleT1",children:"$0.00"})]})})]})}):(0,I.jsx)(ts.A,{fluid:!0,children:(0,I.jsxs)(as.A,{style:{display:"flex",alignItems:"center"},children:[(0,I.jsxs)(ss.A,{style:{textAlign:"left",display:"flex",alignItems:"center"},children:[(0,I.jsx)("div",{className:"filterDropDown",onClick:()=>{$(!A)},children:(0,I.jsx)(g.A,{ref:L,variant:"link",children:(0,I.jsx)(Ze.A,{color:"#344054",size:20})})}),(0,I.jsx)("div",{className:"filterSearch",children:(0,I.jsx)(ms,{setInputValue:U,inputValue:F})})]}),(0,I.jsx)(ss.A,{children:(0,I.jsx)("div",{className:"centerTabSales",children:(0,I.jsxs)("ul",{children:[(0,I.jsx)("li",{children:(0,I.jsx)(m.k2,{to:"#",children:"Sales"})}),(0,I.jsx)("li",{children:l&&l.bank_detail&&l.bank_detail.account_number?(0,I.jsx)(m.k2,{className:"tabActive",to:"/sales/newquote/selectyourclient",children:"New"}):(0,I.jsx)(cs,{})})]})})}),(0,I.jsx)(ss.A,{style:{textAlign:"right"},children:r&&(null===r||void 0===r?void 0:r.length)>0?(0,I.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total"," ",(0,I.jsxs)("span",{className:"styleT2",children:[null!==u&&void 0!==u&&u.length?(0,I.jsxs)(I.Fragment,{children:[" ",null===u||void 0===u?void 0:u.length]}):(0,I.jsxs)(I.Fragment,{children:[null===r||void 0===r?void 0:r.length," "]})," ","Sales"]}),(0,I.jsxs)("strong",{className:"styleT1",children:["$",(0,I.jsx)(I.Fragment,{children:z})]})]}):(0,I.jsxs)("p",{className:"flexEndStyle styleT3",children:["Total ",(0,I.jsx)("span",{className:"styleT2",children:"0 Sales"})," ",(0,I.jsx)("strong",{className:"styleT1",children:"$0.00"})]})})]})})}),A&&(0,I.jsxs)(ls.A,{id:"controlled-tab-example",activeKey:C,onSelect:e=>f(e),className:"filtterBoxWrapper",children:[(0,I.jsx)(ns.A,{eventKey:"DateRange",title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Ke.A,{color:"#667085",size:16})," Date Range"]}),children:(0,I.jsx)("ul",{children:(0,I.jsx)(hs,{onDataApply:e=>{const s=e=>e?new Date(e).toLocaleDateString("en-CA"):"",t=s(e.startDate),a=s(e.endDate),n=`${t} - ${a}`;N({...b,dateRange:[n]});let l={...w};l.dateRange=[t,a],S(l),q(l),$(!1)}})})}),(0,I.jsx)(ns.A,{eventKey:"Progress",title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Je.A,{color:"#667085",size:16})," Progress"]}),children:(0,I.jsxs)("ul",{children:[(0,I.jsx)("div",{style:{maxHeight:"350px",overflow:"auto"},children:js.map(((e,s)=>{var t,a;return(0,I.jsx)("li",{className:null!==w&&void 0!==w&&null!==(t=w.progress)&&void 0!==t&&t.includes(e.label)?"checkedList":"",children:(0,I.jsx)("label",{className:"customCheckBox",children:(0,I.jsx)("div",{className:"userName",children:(0,I.jsx)("div",{className:"ProgressTag",children:(0,I.jsxs)("div",{className:"option","data-percentage":e.percentage,children:[(0,I.jsx)("input",{type:"checkbox",value:e.label,checked:null===w||void 0===w||null===(a=w.progress)||void 0===a?void 0:a.includes(e.label),onChange:()=>{return s=e.label,void S((e=>{const t=e.progress||[];return null!==t&&void 0!==t&&t.includes(s)?{...e,progress:t.filter((e=>e!==s))}:{...e,progress:[...t,s]}}));var s}}),(0,I.jsx)("span",{className:"checkmark",children:(0,I.jsx)(h.A,{color:"#9E77ED",size:20})}),(0,I.jsxs)("div",{className:"progressWrapper",children:[(0,I.jsxs)("div",{className:"labelInfo",children:[(0,I.jsx)("strong",{children:e.label}),(0,I.jsx)("div",{className:"progress-light-grey",children:(0,I.jsx)("div",{className:"progress-container progress-color progress-center",style:{background:e.gradient},"aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100",children:(0,I.jsxs)("span",{children:[e.percentage,"%"]})})})]}),(0,I.jsxs)("label",{children:[e.percentage,"%"]})]})]})})})})},s)}))}),(0,I.jsxs)(as.A,{className:"buttomBottom d-flex justify-content-between align-items-center",children:[(0,I.jsx)(ss.A,{className:"pr-2",children:(0,I.jsx)(g.A,{variant:"tabContent tabCancel",onClick:()=>{S((e=>{const{progress:s,...t}=e;return t}))},children:"Cancel"})}),(0,I.jsx)(ss.A,{children:(0,I.jsx)(g.A,{variant:"tabContent tabApply",onClick:()=>{const e=w.progress||[];N({...b,progress:e}),q(w),$(!1)},children:"Apply"})})]})]})}),(0,I.jsx)(ns.A,{eventKey:"Status",title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Xe.A,{color:"#667085",size:16}),"Status"]}),children:(0,I.jsxs)("ul",{children:[(0,I.jsx)("div",{style:{maxHeight:"350px",overflow:"auto"},children:["Draft","Saved","Sent","Accepted","Recurring","Review","Declined","Required"].map(((e,s)=>{var t,a;return(0,I.jsx)("li",{className:null!==w&&void 0!==w&&null!==(t=w.statuses)&&void 0!==t&&t.includes(e)?"checkedList":"",children:(0,I.jsxs)("label",{className:`customCheckBox ${e}`,children:[(0,I.jsx)("input",{type:"checkbox",value:e,checked:null===w||void 0===w||null===(a=w.statuses)||void 0===a?void 0:a.includes(e),onChange:()=>{return s=e,void S((e=>{const t=e.statuses||[];return null!==t&&void 0!==t&&t.includes(s)?{...e,statuses:t.filter((e=>e!==s))}:{...e,statuses:[...t,s]}}));var s}}),(0,I.jsx)("span",{className:"checkmark",children:(0,I.jsx)(h.A,{color:"#9E77ED",size:20})}),(0,I.jsxs)("div",{className:"userName",children:[(0,I.jsx)("span",{className:(0,B.A)("statusInfo",e),children:(0,I.jsx)("a",{children:e})})," "]})]})},s)}))}),(0,I.jsxs)(as.A,{className:"buttomBottom d-flex justify-content-between align-items-center",children:[(0,I.jsx)(ss.A,{className:"pr-2",children:(0,I.jsx)(g.A,{variant:"tabContent tabCancel",onClick:()=>{S((e=>{const{statuses:s,...t}=e;return t}))},children:"Cancel"})}),(0,I.jsx)(ss.A,{children:(0,I.jsx)(g.A,{variant:"tabContent tabApply",onClick:()=>{const e={...w};S(e),q(e),N({...b,statuses:e.statuses}),$(!1)},children:"Apply"})})]})]})}),(0,I.jsx)(ns.A,{eventKey:"projectManager",title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.A,{color:"#667085",size:16}),"Project Manager"]}),children:(0,I.jsxs)("ul",{children:[(0,I.jsx)("div",{id:"controlled-tab-example-tabpane-Status",style:{maxHeight:"350px",overflow:"auto"},children:null===H||void 0===H||null===(s=H.data)||void 0===s?void 0:s.map(((e,s)=>{var t,a;return(0,I.jsx)("li",{className:null!==w&&void 0!==w&&null!==(t=w.projectManager)&&void 0!==t&&t.includes(e.name)?"checkedList":"",children:(0,I.jsxs)("label",{className:`customCheckBox ${e.name}`,children:[(0,I.jsx)("input",{type:"checkbox",value:e.name,checked:(null===w||void 0===w||null===(a=w.projectManager)||void 0===a?void 0:a.includes(e.name))||!1,onChange:()=>{return s=e.name,void S((e=>{const t=e.projectManager||[];return null!==t&&void 0!==t&&t.includes(s)?{...e,projectManager:t.filter((e=>e!==s))}:{...e,projectManager:[...t,s]}}));var s}}),(0,I.jsx)("span",{className:"checkmark",children:(0,I.jsx)(h.A,{color:"#9E77ED",size:20})}),(0,I.jsxs)("div",{className:"ms-3 d-flex justify-content-center align-items-center",children:[(0,I.jsx)(ps.h,{has_photo:e.has_photo,photo:e.photo,is_business:!1}),(0,I.jsx)("span",{className:"font-14",style:{color:"#374151"},children:(0,I.jsx)("a",{children:e.name})})]})]})},s)}))}),(0,I.jsxs)(as.A,{className:"buttomBottom d-flex justify-content-between align-items-center",children:[(0,I.jsx)(ss.A,{className:"pr-2",children:(0,I.jsx)(g.A,{variant:"tabContent tabCancel",onClick:()=>{console.log("..."),S((e=>{const{projectManager:s,...t}=e;return t}))},children:"Cancel"})}),(0,I.jsx)(ss.A,{children:(0,I.jsx)(g.A,{variant:"tabContent tabApply",onClick:()=>{const e={...w};S(e),q(e),N({...b,projectManager:e.projectManager}),$(!1)},children:"Apply"})})]})]})})]}),(null===(t=Object.keys(b))||void 0===t?void 0:t.length)>0&&(0,I.jsx)("div",{className:"mainTagsWrapper",children:null===(n=Object.entries(b))||void 0===n?void 0:n.map((e=>{let[s,t]=e;return(0,I.jsx)("div",{children:(null===t||void 0===t?void 0:t.length)>0&&(0,I.jsx)("div",{className:"tags-input-container",children:(0,I.jsxs)("ul",{children:[t.map(((e,a)=>(0,I.jsxs)("li",{className:"mainWrapperTags tag-item-wrap",children:[e,(null===t||void 0===t?void 0:t.length)>1&&(0,I.jsx)(g.A,{variant:"link",size:"sm",style:{marginLeft:"5px"},onClick:()=>((e,s)=>{const t={...b},a=t[e].filter((e=>e!==s));t[e]=a,N(t),S({...w,[e]:a}),q({...w,[e]:a})})(s,e),children:(0,I.jsx)(X.A,{color:"#F96969",size:15})})]},a))),(0,I.jsx)(g.A,{variant:"link",size:"sm",style:{marginLeft:"0px"},onClick:()=>(e=>{const s={...b};delete s[e],N(s);const t={...w};delete t[e],S(t),q(t)})(s),children:(0,I.jsx)(X.A,{color:"#F96969",size:20})})]})})},s)}))})]})};var vs=t(48417),ys=t(99868);const Cs=e=>{var s,t,n;let{params:l}=e;const r=(0,a.useRef)(null);return(0,I.jsxs)("div",{children:[(0,I.jsxs)(p.Z,{onClick:e=>{r.current.toggle(e)},style:{cursor:"pointer"},children:[null===l||void 0===l||null===(s=l.value)||void 0===s?void 0:s.slice(0,2).map(((e,s)=>(0,I.jsx)(x.e,{shape:"circle",image:e.has_photo&&e.photo?e.photo:null,icon:e.has_photo&&e.photo?null:(0,I.jsx)(o.A,{color:"#667085",size:20}),style:{background:"#fff",border:"1px solid #dedede"}},`${e.email}-${s}`))),(null===l||void 0===l||null===(t=l.value)||void 0===t?void 0:t.length)>2&&(0,I.jsx)(x.e,{label:"+"+(l.value.length-2),shape:"circle",size:"small",style:{fontSize:"14px"}})]}),(0,I.jsx)(j.j,{className:"salesOverlay",ref:r,children:null===l||void 0===l||null===(n=l.value)||void 0===n?void 0:n.map(((e,s)=>(0,I.jsxs)("div",{style:{padding:"0.5rem",display:"flex",alignItems:"center"},children:[(0,I.jsx)(x.e,{image:e.has_photo&&e.photo?e.photo:null,icon:e.has_photo&&e.photo?null:(0,I.jsx)(o.A,{color:"#667085",size:20}),style:{background:"#fff",border:"1px solid #dedede"},shape:"circle"}),(0,I.jsx)("div",{style:{marginLeft:"0.5rem"},children:(0,I.jsx)("div",{className:"fullnameText",children:null===e||void 0===e?void 0:e.full_name})})]},s)))})]})},fs=e=>{const s=new Date(1e3*e);return`${s.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(s)} ${s.getFullYear()}`},bs=(e,s,t)=>(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(Ge,{noteData:e,saleUniqueId:s,refreshData:t})}),Ns=(e,s)=>e.map((e=>({unique_id:e.unique_id,id:e.id,Quote:e.number,created:e.created,Client:e.client.name,clientId:e.client.id,photo:e.client.photo,is_business:e.client.is_business,hasPhoto:e.client.has_photo,Reference:e.reference,Status:e.status,Calculation:e.calculation,CalculationPDF:e.quote_url,CalculationURL:e.unique_url,Note:bs(e.sales_note,e.unique_id,s),User:e.managers,fullName:e.manager.full_name,Contact:e.sales_contacts,progressName:e.lead.name,progressPercentage:e.lead.percentage,saleUniqueId:e.unique_id,wonQuote:(e.number,e.status),LostQuote:(e.number,e.status),amountData:e.amount,Actions:"Actions",history:null===e||void 0===e?void 0:e.previous_versions}))),ws=e=>{let{profileData:s,salesData:t,fetchData:n,isLoading:l}=e;const{trialHeight:o}=(0,vs.$)(),[x,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),y=(0,a.useCallback)((async()=>{await n()}),[n]),C=(0,a.useCallback)((()=>{n()}),[n]),f=j.length,b=[{field:"Quote",width:144,headerName:(0,I.jsx)("div",{className:"styleColor1",children:(0,I.jsx)("span",{className:"ps-3",children:"Quote"})}),renderCell:e=>(0,I.jsxs)("div",{className:"innerFlex styleColor2 d-flex justify-content-between",children:[(0,I.jsxs)("div",{className:"styleColor1",children:[(0,I.jsx)("strong",{className:"ellipsis-width",style:{maxWidth:"85px"},title:e.value,children:e.value}),(0,I.jsx)("p",{children:fs(e.row.created)})]}),(0,I.jsx)(m.N_,{to:`/sales/quote-calculation/${e.row.unique_id}`,children:(0,I.jsx)(g.A,{className:"linkByttonStyle",variant:"link",children:"Open"})})]})},{field:"Client",width:270,headerName:(0,I.jsx)("div",{className:"styleColor1",children:(0,I.jsx)("span",{children:"Client"})}),renderCell:e=>{var s,t;return(0,I.jsx)("div",{className:"userImgStyle",children:(0,I.jsx)("div",{className:"innerFlex styleColor2 d-flex justify-content-between",children:(0,I.jsxs)("div",{className:"leftStyle d-flex align-items-center",children:[(0,I.jsx)(ps.h,{has_photo:e.row.hasPhoto,photo:null===(s=e.row)||void 0===s?void 0:s.photo,is_business:null===(t=e.row)||void 0===t?void 0:t.is_business}),(0,I.jsx)("div",{className:"ellipsis-width",style:{maxWidth:"200px"},title:e.value,children:e.value})]})})})}},{field:"Reference",sortable:!1,headerName:"Reference",renderCell:e=>(0,I.jsx)("div",{className:"mainStyle mainStyleMin",style:{whiteSpace:"normal",textAlign:"left"},children:e.value})},{field:"Status",sortable:!1,headerName:(0,I.jsx)("div",{className:"styleColor1",children:(0,I.jsx)("span",{children:"Status"})}),width:118,renderCell:e=>(0,I.jsx)("div",{className:`statusInfo ${e.value}`,children:(0,I.jsx)(m.N_,{to:"/",style:{pointerEvents:"none"},children:e.value})})},{field:"Calculation",sortable:!1,headerName:"Calculation",width:147,renderCell:e=>(0,I.jsx)("div",{children:(0,I.jsxs)("ul",{className:"disPlayInline disPlayInlineCenter",children:[(0,I.jsx)(m.N_,{to:`/sales/quote-calculation/${e.row.unique_id}`,children:(0,I.jsx)("li",{className:"plusminus",children:(0,I.jsx)(i.A,{color:"#FDB022",size:16})})}),(0,I.jsx)("li",{className:`${e.row.Status}`,children:(0,I.jsx)(m.N_,{to:e.row.CalculationPDF,target:"_blank",rel:"noopener noreferrer",children:(0,I.jsx)(c.A,{color:"#FF0000",size:16})})}),(0,I.jsx)("li",{className:`${e.row.Status}`,children:(0,I.jsx)(m.N_,{to:`/quote/${e.row.unique_id}`,target:"_blank",rel:"noopener noreferrer",children:(0,I.jsx)(d.A,{color:"#3366CC",size:16})})})]})})},{field:"Note",sortable:!1,headerName:"Note",width:94,renderCell:e=>(0,I.jsx)("div",{children:e.value})},{field:"User",sortable:!1,headerName:"User",width:56,renderCell:e=>(0,I.jsx)(Cs,{params:e})},{field:"Contact",sortable:!1,headerName:"Contact",width:183,renderCell:e=>(0,I.jsx)("div",{children:(0,I.jsx)(Ae,{type:e.value,saleUniqueId:e.row.saleUniqueId,refreshData:C,created:e.row.created})})},{field:"Progress",headerName:(0,I.jsx)("div",{className:"styleColor1",children:(0,I.jsx)("span",{children:"Progress"})}),width:232,renderCell:e=>(0,I.jsx)("div",{style:{width:"100%"},children:(0,I.jsx)(ke,{progressName1:e.row.progressName,progressPercentage1:e.row.progressPercentage,salesUniqId1:e.row.saleUniqueId,refreshData:()=>{}})})},{field:"W",sortable:!1,headerName:"Lost / Won",width:106,renderCell:e=>(0,I.jsx)("div",{children:(0,I.jsxs)("div",{className:"styleActionBtn",children:[(0,I.jsx)(Ie,{size:16,color:"#D92D20",LostQuote:e.row.LostQuote,saleUniqueId:e.row.saleUniqueId,saleId:e.row.id,status:e.row.status,onRemoveRow:y,fetchData1:p,quoteType:"lost"}),(0,I.jsx)(Ve,{size:16,color:"#079455",wonQuote:e.row.wonQuote,saleUniqueId:e.row.saleUniqueId,saleId:e.row.id,status:e.row.status,onRemoveRow:y,fetchData1:p,quoteType:"won"})]})})},{field:"Actions",sortable:!1,headerName:"Actions",width:72,className:"ActionBtn",renderCell:e=>(0,I.jsx)(Z,{saleUniqueId:e.row.saleUniqueId,clientId:e.row.clientId,refreshData:C,status:e.row.Status,salesHistory:e.row.history},e.row.saleUniqueId)}];(0,a.useEffect)((()=>{const e=Ns(t,C);p(e)}),[t,j]);return(0,I.jsxs)("div",{className:"salesTableWrap",children:[(0,I.jsx)(gs,{profileData:s,salesData:t,removeRowMulti:y,selectedUniqueIds:t.filter((e=>j.includes(e.id))).map((e=>e.unique_id)),onRowsFilterChange:e=>{p(e)},rows:x,setSelectedRows:v,selectedRow:j,selectedRowCount:f}),!l&&(0,I.jsxs)(r.A,{responsive:!0,style:{marginBottom:`${o}px`},children:[(0,I.jsx)("thead",{style:{position:"sticky",top:"0px",zIndex:9},children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{children:(0,I.jsxs)("label",{className:"customCheckBox",children:[(0,I.jsx)("input",{type:"checkbox",checked:j.length&&j.length===t.length,onChange:()=>{const e=t&&t.length&&t.map((e=>e.id))||[];j.length===e.length?v([]):v(e)}}),(0,I.jsx)("span",{className:"checkmark",children:(0,I.jsx)(h.A,{color:"#1AB2FF",size:20})})]})}),b.map((e=>(0,I.jsx)("th",{style:{width:e.width},children:(0,I.jsx)(u.Resizable,{width:e.width||100,height:0,children:(0,I.jsx)("div",{children:e.headerName})})},e.field)))]})}),(0,I.jsx)("tbody",{children:0===x.length?(0,I.jsx)("tr",{className:"nodataTableRow",children:(0,I.jsx)("td",{colSpan:b.length,style:{textAlign:"center",overflow:"auto"},children:(0,I.jsx)(ys.A,{isDataExist:!!t.length})})}):x.map((e=>(0,I.jsxs)("tr",{"data-saleuniqueid":e.saleUniqueId,className:j.includes(e.id)?"selected-row":"",children:[(0,I.jsx)("td",{children:(0,I.jsxs)("label",{className:"customCheckBox",children:[(0,I.jsx)("input",{type:"checkbox",checked:j.includes(e.id),onChange:()=>(e=>{const s=[...j];s.includes(e)?s.splice(s.indexOf(e),1):s.push(e),v(s||[])})(e.id)}),(0,I.jsx)("span",{className:"checkmark",children:(0,I.jsx)(h.A,{color:"#1AB2FF",size:20})})]})}),b.map((s=>(0,I.jsx)("td",{children:s.renderCell({value:e[s.field],row:e})},s.field+e.id)))]},e.id)))})]})]})},Ss=()=>{const[e,s]=(0,a.useState)(!0),t=JSON.parse(window.localStorage.getItem("profileData")||"{}"),[r,o]=(0,a.useState)([]),i=async()=>{try{s(!0);const e=await(0,k.j3)(),t=JSON.parse(e);o(t)}catch(e){console.error("Error fetching sales data:",e)}finally{s(!1)}};return(0,a.useEffect)((()=>{i()}),[]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(l.mg,{children:(0,I.jsx)("title",{children:"MeMate - Sales"})}),e&&(0,I.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",background:"white",width:"60px",height:"60px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},className:"shadow-lg",children:(0,I.jsx)(n.A,{animation:"border",role:"status",children:(0,I.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),(0,I.jsx)(ws,{profileData:t,salesData:r,fetchData:i,isLoading:e})]})}},20701:(e,s,t)=>{t.d(s,{y:()=>a});const a=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;const n=new URL(`https://dev.memate.com.au/api/v1${e}`),{method:l="GET",headers:r={},body:o}=s,i=localStorage.getItem("access_token"),c=o instanceof FormData,d=new AbortController,h=setTimeout((()=>d.abort()),a),u=new Headers({...c?{}:{"Content-Type":"application/json"},...r});t&&i&&u.set("Authorization",`Bearer ${i}`);const m={method:l,headers:u,body:c?o:o?JSON.stringify(o):null,redirect:"follow",signal:d.signal};try{const e=await fetch(n,m);if(!e.ok){const s=await e.text();throw new Error(`HTTP error! Status: ${e.status} - ${s}`)}return(e.headers.get("Content-Type")||"").includes("application/json")?e.json():e.text()}catch(x){if("AbortError"===x.name)throw console.error("Fetch request timed out."),new Error("Request timeout. Please try again.");throw console.error("Fetch API error:",x),x}finally{clearTimeout(h)}}},57092:(e,s,t)=>{t.d(s,{A:()=>x});var a=t(65043),n=t(52873),l=t(47097),r=t(58387),o=t(72018),i=t(55797),c=t(27932),d=t(56328);const h={form:"support_form__Uc3cv",content:"support_content__zZg6p",field:"support_field__hVjcM","p-button":"support_p-button__gjGEe",circleDesignStyle:"support_circleDesignStyle__rW1wm",out:"support_out__4vM8Q"};var u=t(20701);var m=t(70579);const x=e=>{let{visible:s,setVisible:t}=e;const[x,p]=(0,a.useState)(""),[j,g]=(0,a.useState)(""),v=()=>{t(!1),p(""),g("")},y=(0,l.n)({mutationFn:e=>(async e=>{const s={method:"POST",body:e};return(0,u.y)("/support/",s)})(e),onSuccess:()=>{t(!1),p(""),d.oR.success("Your message has been sent successfully.")},onError:e=>{console.error("Error sending message:",e),d.oR.error("Failed to sent your message. Please try again.")}}),C=(0,m.jsx)("div",{className:"d-flex flex-column",children:(0,m.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,m.jsx)("div",{className:h.circleDesignStyle,children:(0,m.jsx)("div",{className:h.out,children:(0,m.jsx)("div",{className:h.in,children:(0,m.jsx)(n.A,{size:24,color:"#17B26A"})})})}),(0,m.jsx)("div",{className:"d-flex flex-column",children:(0,m.jsx)("span",{style:{color:"#344054",fontSize:"20px",fontWeight:600},children:"How can we help?"})})]})}),f=(0,m.jsxs)("div",{className:"d-flex justify-content-end gap-3 pt-3",children:[(0,m.jsx)(o.$,{label:"Cancel",className:"outline-button",onClick:v}),(0,m.jsx)(o.$,{label:"Submit",loading:y.isPending,disabled:y.isPending,className:"solid-button",onClick:()=>{""!==x.trim()?(g(""),y.mutate({message:x})):g("Please enter message.")}})]});return(0,m.jsx)(i.l,{header:C,footer:f,headerClassName:"border-bottom py-3",contentClassName:(0,r.A)("px-0 border-bottom pb-4",h.content),visible:s,onHide:v,style:{width:"600px"},children:(0,m.jsx)("div",{className:h.form,children:(0,m.jsxs)("div",{className:h.field,children:[(0,m.jsxs)("label",{htmlFor:"description",children:["Message ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(c.Z,{id:"description",placeholder:"Enter a message here...",value:x,onChange:e=>p(e.target.value),rows:5,className:"border outline-none",style:{resize:"none"}}),(0,m.jsx)("small",{className:"error-message",children:j})]})})})}},54967:(e,s,t)=>{t.d(s,{A:()=>i,h:()=>c});var a=t(65043),n=t(44541),l=t(95192);const r="image-avatar_clientImg__-nnRU";var o=t(70579);const i=e=>{let{has_photo:s,photo:t,is_business:r,size:i}=e;const[c,d]=(0,a.useState)(!1),h=r?n.A:l.A;return(0,o.jsx)(o.Fragment,{children:s&&t&&!c?(0,o.jsx)("img",{src:t,alt:"client avatar",className:"w-100",onError:()=>d(!0)}):(0,o.jsx)(h,{color:"#667085",size:i})})},c=e=>{let{has_photo:s,photo:t,is_business:i}=e;const[c,d]=(0,a.useState)(!1),h=i?n.A:l.A;return(0,o.jsx)("div",{className:`d-flex justify-content-center align-items-center ${r} ${i?"":"rounded-circle"}`,style:{overflow:"hidden"},children:s&&t&&!c?(0,o.jsx)("img",{src:t,alt:"client avatar",className:"w-100",onError:()=>d(!0)}):(0,o.jsx)(h,{color:"#667085"})})}},99868:(e,s,t)=>{t.d(s,{A:()=>p});var a=t(65043),n=t(14282),l=t(38294),r=t(35475),o=t(58387);const i="no-data-found-template_noDataBox__HgeT1",c="no-data-found-template_title__P5uV2",d="no-data-found-template_subTitle__zMBB-",h="no-data-found-template_supportext__pHg2P";var u=t(20793),m=t(57092),x=t(70579);const p=e=>{let{isDataExist:s=!0}=e;const[t,p]=(0,a.useState)(!1);return(0,x.jsxs)("div",{className:(0,o.A)(i),children:[(0,x.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,x.jsx)("img",{src:u,alt:"no-data"})}),s?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h2",{className:(0,o.A)(c),children:"There is no results"}),(0,x.jsxs)("p",{className:(0,o.A)(d),children:["The user you are looking for doesn't exist. ",(0,x.jsx)("br",{}),"Here are some helpful links:"]}),(0,x.jsx)(r.N_,{to:"/",children:(0,x.jsxs)(n.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,x.jsx)(l.A,{})," Go back"]})}),(0,x.jsx)(r.N_,{onClick:()=>p(!0),to:"#",children:(0,x.jsx)("span",{className:(0,o.A)(h),children:"Support"})})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("h2",{className:(0,o.A)(c),children:"No historical records yet."})}),(0,x.jsx)(m.A,{setVisible:p,visible:t})]})}},20793:(e,s,t)=>{e.exports=t.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"}}]);
//# sourceMappingURL=1068.9593e550.chunk.js.map