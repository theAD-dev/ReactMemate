(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[9439],{32224:(e,t,s)=>{var a={"./ckb.js":23743,"./cs.js":7333,"./da.js":11664,"./de.js":30844,"./en.js":5460,"./es.js":6151,"./fa.js":96062,"./fr.js":27755,"./he.js":3296,"./hu.js":33776,"./index.js":70559,"./it.js":54762,"./ja.js":80074,"./km.js":27671,"./ko.js":20665,"./lv.js":90749,"./nl.js":66449,"./pl.js":48599,"./pt_br.js":48366,"./ro.js":73100,"./ru.js":34638,"./se.js":55111,"./tr.js":10057,"./ua.js":79657,"./ur.js":64640,"./zh_cn.js":25277};function n(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=32224},65425:(e,t,s)=>{"use strict";s.d(t,{R:()=>c});var a=s(65043),n=s(86213),o=s(56328),r=s(9266),l=s.n(r),i=(s(23475),s(70579));const c=e=>{let{value:t="",onChange:s,placeholder:r="Enter content...",height:c=299,showTable:d=!0,showLink:p=!0,disabled:u=!1,className:h="",customOptions:m={},onLoad:g,onFocus:x,onBlur:f,enableS3Upload:j=!1,s3UploadEndpoint:C=null,uploadId:b=null,...F}=e;const[E,w]=(0,a.useState)({}),[A,_]=(0,a.useState)(!1),v=(0,a.useRef)(new Map);(0,a.useEffect)((()=>{const e=setInterval((()=>{const e=v.current;if(e.size>50){const t=Array.from(e.entries()).slice(-25);v.current=new Map(t)}}),6e4);return()=>clearInterval(e)}),[]),(0,a.useEffect)((()=>{if(E.error||E.success){const e=setTimeout((()=>{w({})}),2e3);return()=>clearTimeout(e)}}),[E.error,E.success]);const y=(0,a.useRef)(null),S=(0,a.useRef)(t);(0,a.useEffect)((()=>{S.current=t}),[t]);const R=(0,a.useCallback)((e=>{if(!e||"string"!==typeof e)return!1;return[/^https?:\/\/.*\.s3\..*\.amazonaws\.com\//,/^https?:\/\/s3\..*\.amazonaws\.com\//,/^https?:\/\/.*\.s3\.amazonaws\.com\//,/^https?:\/\/.*\.digitaloceanspaces\.com\//,new RegExp(`^https?://${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_API_URL:"https://app.memate.com.au/api/v1",REACT_APP_URL:"https://app.memate.com.au",REACT_APP_CHAT_API_URL:"https://chat.memate.com.au",REACT_APP_STATIC_WEBSITE_URL:"https://memate.com.au/",REACT_APP_XERO_CLIENT_ID:"CF33702DD2CA4E49ADF22C2BE94C9EBB",REACT_APP_STRIPE_PUBLISH_KEY:"pk_live_51KGzf3BrpZbmIWreM2EqPPXT1fl5FCl0hd5RX0NGjmNKWkMrz4m3ydFDhFSqV2TGXOYcl3AOdhBEzXILYRajp1LI00MOA7DM31",REACT_APP_HUBSPOT_PORTAL_ID:"241966069",REACT_APP_HUBSPOT_FORM_ID:"39ad4b7b-9757-48e2-97d1-ac46aa95862c"}.REACT_APP_S3_BUCKET||".*"}\\.s3\\..*\\.amazonaws\\.com/`)].some((t=>t.test(e)))}),[]),P=(0,a.useCallback)((e=>{const t=/<img[^>]+src="([^"]+)"[^>]*>/gi,s=[],a=[],n=[];let o;for(;null!==(o=t.exec(e));){const e=o[0],t=o[1];if(t.startsWith("data:image/")){const a=t.match(/^data:image\/([^;]+);base64,(.+)$/);a&&s.push({fullMatch:e,format:a[1],base64Data:a[2],src:t,index:o.index})}else R(t)?a.push({fullMatch:e,src:t,index:o.index}):n.push({fullMatch:e,src:t,index:o.index})}return{base64Images:s,s3Images:a,otherImages:n}}),[R]),B=(0,a.useCallback)(((e,t,s)=>{const a=e.replace(/^data:image\/[a-z]+;base64,/,""),n=atob(a),o=new Array(n.length);for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);const r=new Uint8Array(o),l=new Blob([r],{type:`image/${t}`});return new File([l],s,{type:`image/${t}`})}),[]),N=(0,a.useCallback)((async(e,t)=>{if(!j)return null;const s=btoa(e.substring(0,100));if(v.current.has(s)){return v.current.get(s)}try{const a=`image-${Date.now()}.${t}`,o=B(e,t,a),r=localStorage.getItem("access_token"),l=C||`https://app.memate.com.au/api/v1/proposals/file/${b}/`,i=await n.A.post(l,{file_name:a},{headers:{Authorization:`Bearer ${r}`}}),{url:c}=i.data;if(!c)throw new Error("Failed to get upload URL");await n.A.put(c,o,{headers:{"Content-Type":""}});const d=c.split("?")[0]||"";return v.current.set(s,d),d}catch(a){throw console.error("Error uploading base64 image to S3:",a),a}}),[j,C,b,B]),I={buttonList:(()=>{const e=[["undo","redo"],["bold","italic","underline","strike"],["formatBlock"],["list"],["align"],["image"]];return p&&e.push(["link"]),d&&e.push(["table"]),e})(),height:c,placeholder:r,showPathLabel:!1,charCounter:!1,resizingBar:!1,disable:u,imageUploadUrl:j?null:void 0,table:{headerStyle:"background-color: #f8f9fa; font-weight: bold; padding: 8px; min-width: 50px; border: none;",cellStyle:"padding: 8px; min-width: 50px; border: none;"},imageUploadHeader:j?void 0:{Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},formats:["p","div","h1","h2","h3","h4","h5","h6"],font:["Arial","Helvetica","Georgia","Times New Roman","Courier New"],fontSize:[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72],colorList:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F3F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#FF9C63","#FFCE63","#9CDE9C","#63B5CE","#639CFF","#9C63E7","#CE639C"],["#E73131","#FF7031","#FFB531","#73DE73","#319CCE","#3173FF","#7331E7","#CE3173"],["#9C0000","#B56308","#9C9C00","#089C00","#008294","#0031FF","#4A0A77","#9C005A"],["#630000","#7B3900","#636300","#006300","#005A6B","#002173","#290A4A","#630039"]]},T={...I,...m,buttonList:m.buttonList||I.buttonList};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n                @keyframes spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n                .sun-editor-wrapper .se-wrapper-inner *,\n                .sun-editor .se-resizing-container {\n                    z-index: 0 !important;\n                }\n            "}),(0,i.jsxs)("div",{className:`sun-editor-wrapper ${h}`,style:{position:"relative"},children:[(0,i.jsx)(l(),{setOptions:T,setContents:t,onChange:async e=>{if(j&&e&&"string"===typeof e){const{base64Images:a,s3Images:n}=P(e);if(a.length>0){_(!0);try{let t=e;for(const e of a){const{fullMatch:s,format:a,base64Data:n}=e,o=await N(n,a);if(o){const e=s.replace(/src="data:image\/[^;]+;base64,[^"]+"/,`src="${o}"`);t=t.replace(s,e),console.log("Replaced base64 image with S3 URL:",o)}}if(_(!1),s&&t!==e)return void s(t)}catch(t){console.error("Error processing base64 images:",t),_(!1),o.oR.error("Failed to upload images. Please try again.")}}else n.length>0&&console.log("Content contains only S3 images, no upload needed")}s&&s(e)},onLoad:e=>{y.current=e,g&&g(e)},onFocus:(e,t)=>{x&&x(e,t)},onBlur:(e,t)=>{f&&f(e,t)},...F}),null!==E&&void 0!==E&&E.uploading||null!==E&&void 0!==E&&E.success||null!==E&&void 0!==E&&E.error||A?(0,i.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3,borderRadius:"4px"},children:[(E.uploading||A)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{width:"60px",height:"60px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"16px"}}),(0,i.jsx)("div",{style:{fontSize:"14px",fontWeight:"500",color:"#333",marginBottom:"8px"},children:A?"Processing images...":"Uploading image..."}),E.uploading&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{width:"200px",height:"6px",backgroundColor:"#f0f0f0",borderRadius:"3px",overflow:"hidden"},children:(0,i.jsx)("div",{style:{width:`${E.progress}%`,height:"100%",backgroundColor:"#3498db",transition:"width 0.3s ease"}})}),(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[E.progress,"%"]})]})]}),E.success&&(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsx)("div",{style:{width:"50px",height:"50px",backgroundColor:"#27ae60",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:(0,i.jsx)("span",{style:{color:"white",fontSize:"24px"},children:"\u2713"})}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"#27ae60"},children:"Upload completed!"})]}),E.error&&(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsx)("div",{style:{width:"50px",height:"50px",backgroundColor:"#e74c3c",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:(0,i.jsx)("span",{style:{color:"white",fontSize:"24px"},children:"\u2717"})}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"#e74c3c"},children:"Upload failed"})]})]}):null]})]})};s(95903)},87160:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var a=s(65043),n=s(32952),o=s(14282),r=s(76163),l=s(69956),i=s(89488),c=s(55683),d=s(58387),p=s(29853),u=s(56328);const h="file-uploader_title__MJFJ7",m="file-uploader_previewSection__ot4jI",g="file-uploader_previewBox__KC4if",x="file-uploader_previewBoxImg1__rKP04",f="file-uploader_previewActions__r3LWm",j="file-uploader_label__pWhYK";var C=s(70579);const b=e=>{let{show:t,setShow:s,setPhoto:b,additionalDesign:F,shape:E="rect"}=e;const[w,A]=(0,a.useState)([]),[_,v]=(0,a.useState)({x:0,y:0}),[y,S]=(0,a.useState)(1),[R,P]=(0,a.useState)(0),[B,N]=(0,a.useState)(null),[I,T]=(0,a.useState)({}),k=(0,a.useCallback)(((e,t)=>{N(t)}),[]),D=(0,a.useCallback)((async()=>{if(!w.length||!B)return;const e=document.createElement("canvas"),t=e.getContext("2d"),s=new Image;s.src=w[0].preview,await new Promise((e=>s.onload=e)),e.width=B.width,e.height=B.height,t.translate(e.width/2,e.height/2),t.rotate(R*Math.PI/180),t.translate(-e.width/2,-e.height/2),t.drawImage(s,B.x,B.y,B.width,B.height,0,0,B.width,B.height);return e.toDataURL("image/jpeg")}),[w,B,R]),L=async()=>{const e=await D();e&&T({img2:e,img3:e,img4:e,img5:e})};(0,a.useEffect)((()=>{L()}),[y,_,R,w,B]);const{getRootProps:z,getInputProps:U}=(0,i.VB)({maxFiles:1,accept:{"image/*":[]},onDrop:e=>{A(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});return(0,C.jsxs)(n.A,{style:{zIndex:1111},show:t,centered:!0,onHide:()=>s(!1),onShow:L,children:[(0,C.jsx)(n.A.Header,{closeButton:!0,children:(0,C.jsx)(n.A.Title,{children:(0,C.jsx)("span",{className:`${h}`,children:"Edit Photo"})})}),(0,C.jsxs)(n.A.Body,{children:[F,(0,C.jsxs)("div",{className:`${m}`,children:[(0,C.jsx)("div",{className:`${g}`,children:(0,C.jsx)("div",{className:(0,d.A)(x,"round"===E?"rounded-circle":""),children:(0,C.jsx)(c.Ay,{image:w.length>0?w[0].preview:null,crop:_,zoom:y,cropShape:E,rotation:R,onCropChange:v,onZoomChange:S,onCropComplete:k,aspect:1.5,restrictPosition:!1,style:{containerStyle:{width:"100%",height:"100%",position:"relative"},cropAreaStyle:{width:"100%",height:"100%"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}})})}),(0,C.jsxs)("div",{className:`${f}`,children:[(0,C.jsxs)(p.A.Group,{children:[(0,C.jsx)(p.A.Label,{className:`${j}`,children:"Zoom"}),(0,C.jsx)(p.A.Range,{value:y,min:1,max:3,step:.1,className:"custom-range",onChange:e=>S(e.target.value)})]}),(0,C.jsx)("div",{className:"d-flex align-item-center pt-4 ms-4",style:{gap:"8px"},children:(0,C.jsxs)(o.A,{className:"text-button",onClick:()=>{P((e=>(e+90)%360))},children:[(0,C.jsx)(r.A,{color:"#106B99",size:24}),"Rotate"]})})]})]}),(0,C.jsxs)("div",{...z({className:"dropzone d-flex justify-content-center align-items-center flex-column"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,C.jsx)("input",{...U()}),(0,C.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,C.jsx)(l.A,{})}),(0,C.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,C.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,C.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})]}),(0,C.jsxs)(n.A.Footer,{className:"d-flex justify-content-end",children:[(0,C.jsx)(o.A,{className:"outline-button",onClick:e=>{e.stopPropagation(),A([]),T({}),s(!1)},children:"Cancel"}),(0,C.jsx)(o.A,{className:"solid-button",onClick:async()=>{const e=await D();if(!e)return u.oR.error("Please select a photo");const t=function(e,t){const s=atob(e.split(",")[1]),a=new ArrayBuffer(s.length),n=new Uint8Array(a);for(let o=0;o<s.length;o++)n[o]=s.charCodeAt(o);return new Blob([a],{type:t})}(e,"image/jpeg");b({croppedImageBase64:e,croppedImageBlob:t}),s(!1),A([]),T({})},children:"Save Photo"})]})]})}},95903:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var a=s(70579);const n=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"ql-formats",children:[(0,a.jsx)("button",{className:"ql-bold me-1","aria-label":"Bold"}),(0,a.jsx)("button",{className:"ql-italic me-1","aria-label":"Italic"}),(0,a.jsx)("button",{className:"ql-underline me-1","aria-label":"Underline"})]}),(0,a.jsxs)("span",{className:"ql-formats",children:[(0,a.jsx)("button",{className:"ql-list me-1",value:"ordered","aria-label":"Ordered List"}),(0,a.jsx)("button",{className:"ql-list me-1",value:"bullet","aria-label":"Unordered List"}),(0,a.jsx)("button",{className:"ql-indent me-1",value:"-1","aria-label":"Indent"}),(0,a.jsx)("button",{className:"ql-indent me-1",value:"+1","aria-label":"Outdent"})]}),(0,a.jsxs)("span",{className:"ql-formats",children:[(0,a.jsxs)("select",{className:"ql-size me-1",children:[(0,a.jsx)("option",{value:"small",children:"Small"}),(0,a.jsx)("option",{value:"",selected:!0,children:"Normal"}),(0,a.jsx)("option",{value:"large",children:"Large"}),(0,a.jsx)("option",{value:"huge",children:"Huge"})]}),(0,a.jsx)("select",{className:"ql-color me-1"}),(0,a.jsx)("button",{className:"ql-link me-1",value:"+1","aria-label":"Outdent"})]})]})}}]);
//# sourceMappingURL=9439.392193f0.chunk.js.map