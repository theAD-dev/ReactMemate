"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3981],{33981:(e,t,s)=>{s.d(t,{A:()=>M});var n=s(65043),a=s(93202),o=s(56741),r=s(95192),l=s(28261),i=s(47097),d=s(58387),c=s(88060),m=s(27932),u=s(93740),h=s(20288),p=s(14282),x=s(78602),v=s(29853),f=s(61072),g=s(56328);const j="create-task_circleDesignStyle__vtKho",y="create-task_out__LG-iY",_="create-task_taskTitleInput__s+lNu",b="create-task_formLabel__04J0h",k="create-task_taskDescriptionInput__RZWSI",N="create-task_projectDropdown__qXb5+";var w=s(10586),D=s(79106),A=s(72796),T=s(57189),C=s(58027),S=s(63040),L=s(83738),R=s(70579);const E=(e,t)=>{const s={month:"short",day:"numeric"};return`${new Date(e).toLocaleDateString("en-US",s)} - ${new Date(t).toLocaleDateString("en-US",s)}`},$=e=>{let{startDate:t,endDate:s}=e;return(0,R.jsx)("div",{className:"dateSelectdTaskBar",children:E(t,s)})},I=e=>{let{setDateRange:t,dateRange:s}=e;console.log("dateRange: ",s);const[a,o]=(0,n.useState)(!1),r=(0,n.useRef)(null),l=e=>{r.current&&!r.current.contains(e.target)&&o(!1)};return(0,n.useEffect)((()=>(a?document.addEventListener("mousedown",l):document.removeEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)})),[a]),(0,R.jsxs)("div",{className:"select-date",style:{position:"relative"},ref:r,children:[(0,R.jsx)("div",{onClick:()=>o((e=>!e)),style:{cursor:"pointer"},children:null!==s&&void 0!==s&&s.startDate&&null!==s&&void 0!==s&&s.endDate?(0,R.jsx)($,{startDate:s.startDate,endDate:s.endDate}):(0,R.jsx)("div",{style:{border:"1px dashed #98A2B3",width:"24px",height:"24px",borderRadius:"50%"},className:"iconStyleCircle d-flex justify-content-center align-items-center iconStyleCircleRight "+(a?"active":""),children:(0,R.jsx)(S.A,{color:a?"#1AB2FF":"#475467",size:14})})}),a&&(0,R.jsx)("div",{className:"select-date-range",style:{position:"absolute",top:"-100px",background:"#fff",zIndex:1e3},children:(0,R.jsx)(L.s,{onDataApply:e=>{t(e),o(!1)},dateRange:s,onClose:()=>o(!1)})})]})};var P=s(75714);const F={commentsContainer:"task-comments_commentsContainer__9Qiud",commentsHeader:"task-comments_commentsHeader__SxVw0",commentsTitle:"task-comments_commentsTitle__f66k0",commentsList:"task-comments_commentsList__NBm+d",commentItem:"task-comments_commentItem__bv78f",deleteButton:"task-comments_deleteButton__XLlzH",userName:"task-comments_userName__EH9bR",commentTime:"task-comments_commentTime__4eCW6",commentText:"task-comments_commentText__rSHhj",addCommentSection:"task-comments_addCommentSection__-KvEG",avatar:"task-comments_avatar__GZ9fT",loadMoreWrapper:"task-comments_loadMoreWrapper__TLDxd",loadMoreBtn:"task-comments_loadMoreBtn__6oQeF",loading:"task-comments_loading__3LE67",commentAvatar:"task-comments_commentAvatar__Pc8rI",commentHeader:"task-comments_commentHeader__T9R4I",noComments:"task-comments_noComments__xAIGD"},U=e=>{var t,s,n,a,o;return{id:e.id,text:e.comment,created_at:e.created_at,user:{id:null===(t=e.created_by)||void 0===t?void 0:t.id,full_name:null===(s=e.created_by)||void 0===s?void 0:s.full_name,email:null===(n=e.created_by)||void 0===n?void 0:n.email,photo:null===(a=e.created_by)||void 0===a?void 0:a.avatar,role:null===(o=e.created_by)||void 0===o?void 0:o.role}}},B=e=>{const t=new Date,s=new Date(e),n=Math.floor((t-s)/6e4);return n<1?"Just now":n<60?`${n} min ago`:n<1440?`${Math.floor(n/60)} hours ago`:`${Math.floor(n/1440)} days ago`},H=(0,n.forwardRef)(((e,t)=>{let{taskId:s}=e;const{data:a,refetch:o,fetchNextPage:r,hasNextPage:l,isFetchingNextPage:d,isLoading:c}=(0,P.q)({queryKey:["task-comments",s],queryFn:e=>{let{pageParam:t}=e;return t?fetch(t).then((e=>e.json())):(0,D.Lb)(s)},enabled:!!s,getNextPageParam:e=>e.next});(0,n.useImperativeHandle)(t,(()=>({refetchComments:()=>o()})));const m=(0,i.n)({mutationFn:D.Co,onSuccess:()=>{g.oR.success("Comment deleted"),o()},onError:()=>{g.oR.error("Failed to delete comment")}}),u=a?a.pages.slice().flatMap((e=>e.results)).map(U).sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())).reverse():[];if(c)return(0,R.jsx)("div",{className:F.loading,children:"Loading comments\u2026"});if(!u.length)return(0,R.jsx)("div",{className:F.noComments,children:"No comments yet."});return(0,R.jsxs)("div",{className:F.commentsContainer,children:[l&&(0,R.jsx)("div",{className:F.loadMoreWrapper,children:(0,R.jsx)("button",{onClick:r,disabled:d,className:F.loadMoreBtn,children:d?"Loading\u2026":"Load older comments"})}),(0,R.jsx)("div",{className:F.commentsList,children:u.map((e=>{var t,s,n;return(0,R.jsx)("div",{className:F.commentItem,children:(0,R.jsxs)("div",{className:"d-flex gap-3",children:[(0,R.jsx)("div",{className:F.avatar,children:(0,R.jsx)(C.A,{photo:null===(t=e.user)||void 0===t?void 0:t.photo,has_photo:!(null===(s=e.user)||void 0===s||!s.photo),is_business:!1,size:18})}),(0,R.jsxs)("div",{className:"flex-grow-1",style:{width:"calc(100% - 50px)"},children:[(0,R.jsxs)("div",{className:F.header,children:[(0,R.jsx)("span",{className:F.userName,children:null===(n=e.user)||void 0===n?void 0:n.full_name}),(0,R.jsxs)("span",{className:F.commentTime,children:["\xb7 ",B(1e3*e.created_at)]}),(0,R.jsx)("button",{onClick:()=>{return t=e.id,void m.mutate(t);var t},disabled:m.isLoading,className:F.deleteButton,style:{marginLeft:"5px",background:"none",border:"none",color:"#D92D20",cursor:"pointer",fontSize:12},children:"Delete"})]}),(0,R.jsx)("p",{className:F.commentText,children:e.text})]})]})},e.id)}))})]})})),z=e=>{if(!e)return null;return new Date(1e3*+e)},M=e=>{let{show:t,setShow:s,refetch:S,taskId:L,setTaskId:E,defaultValue:$,projectId:P}=e;const F=(0,n.useRef)(null),U=(0,n.useRef)(null),B=(0,n.useRef)(null),M=(0,n.useRef)(null),q=(0,n.useRef)(null),{session:G}=(0,T.As)(),[W,K]=(0,n.useState)(!1),[O,Z]=(0,n.useState)(""),[V,J]=(0,n.useState)(""),[Q,X]=(0,n.useState)(""),[Y,ee]=(0,n.useState)(null),[te,se]=(0,n.useState)(null),[ne,ae]=(0,n.useState)(""),[oe,re]=(0,n.useState)(!1),[le,ie]=(0,n.useState)({taskTitle:!1,description:!1,project:!1,user:!1,date:!1});(0,n.useEffect)((()=>{var e,t;L&&$&&(Z(null===$||void 0===$?void 0:$.title),J(null===$||void 0===$?void 0:$.description),X(null===$||void 0===$||null===(e=$.project)||void 0===e?void 0:e.id),ee(null===$||void 0===$||null===(t=$.user)||void 0===t?void 0:t.id),se({startDate:z(null===$||void 0===$?void 0:$.from_date),endDate:z(null===$||void 0===$?void 0:$.to_date)}))}),[L,$]);const de=()=>{Z(""),J(""),X(""),ee(null),se(null),ae(""),K(!1),ie({taskTitle:!1,description:!1,project:!1,user:!1,date:!1})},ce=(0,l.I)({queryKey:["getProjectsList"],queryFn:w.Bu}),me=(0,l.I)({queryKey:["getUserList"],queryFn:D.aU}),ue=(0,l.I)({queryKey:["getMobileUserList"],queryFn:D.gy});(0,n.useEffect)((()=>{t||de()}),[t]);const he=(0,i.n)({mutationFn:e=>L?(0,D.lC)(L,e):(0,D.Af)(e),onSuccess:()=>{S(),s(!1),de(),L&&E(null),g.oR.success(`Task ${L?"updated":"created"} successfully`)},onError:e=>{console.error(`Error ${L?"updating":"creating"} task:`,e),g.oR.error(`Failed to ${L?"update":"create"} client. Please try again.`)}});(0,n.useEffect)((()=>{if(W){ie({taskTitle:!O,description:!V,project:!Q,user:!Y,date:!te})}}),[O,V,Q,Y,te,W]);const pe=()=>{K(!0);const e={taskTitle:!O,description:!V,project:!Q,user:!Y,date:!te};ie(e),e.taskTitle||e.description||e.user||e.date||e.project||he.mutate({title:O,description:V,project:Q,user:Y,from_date:te.startDate,to_date:te.endDate})},xe=(0,i.n)({mutationFn:()=>(0,A.mM)(L),onSuccess:()=>{console.log("Delete success"),s(!1),S()},onError:e=>{console.error("Error creating task:",e)}}),ve=()=>{xe.mutate()},fe=()=>{s(!1),de()},ge=(0,i.n)({mutationFn:e=>(0,D.Zi)(L,e),onSuccess:()=>{var e;ae(""),null===(e=B.current)||void 0===e||e.refetchComments(),setTimeout((()=>{q.current&&q.current.scrollIntoView({behavior:"smooth",block:"end"})}),1e3)},onError:e=>{console.error("Error adding comment:",e),g.oR.error("Failed to add comment. Please try again.")},onSettled:()=>{re(!1),setTimeout((()=>{var e;null===(e=M.current)||void 0===e||e.focus()}),0)}});return(0,n.useEffect)((()=>{setTimeout((()=>{U.current&&(U.current.style.height="auto",U.current.style.height=U.current.scrollHeight+"px")}),200)}),[V,L]),(0,n.useEffect)((()=>{P&&X(+P)}),[P]),(0,R.jsx)(h.B,{visible:t,position:"right",onHide:()=>{s(!1)},modal:!1,dismissable:!1,style:{width:"591px",height:"97vh",borderRadius:"10px",marginRight:"10px"},content:e=>{var t,s,n,l,i,h,w,D,A,T,S,E;let{closeIconRef:$,hide:P}=e;return(0,R.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,R.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,R.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,R.jsx)("div",{className:j,children:(0,R.jsx)("div",{className:y,children:(0,R.jsx)(a.A,{size:24,color:"#17B26A"})})}),(0,R.jsxs)("span",{style:{color:"344054",fontSize:"20px",fontWeight:600},children:[L?"Update":"Create New"," Task"]})]}),(0,R.jsx)("span",{children:(0,R.jsx)(p.A,{type:"button",className:"text-button",ref:$,onClick:e=>P(e),children:(0,R.jsx)(o.A,{size:24,color:"#667085"})})})]}),(0,R.jsxs)("div",{className:"modal-body",style:{padding:"24px 24px",height:"calc(100vh - 72px - 122px - 100px)",overflow:"auto"},children:[(0,R.jsx)(v.A.Control,{type:"text",name:"taskTitle",id:"taskTitle",placeholder:"Enter task title",value:O,onChange:e=>Z(e.target.value),className:_}),le.taskTitle&&(0,R.jsx)(v.A.Text,{className:"error-message",children:"Task title is required"}),(0,R.jsxs)(f.A,{className:"mt-3",children:[(0,R.jsx)(x.A,{sm:4,className:"d-flex flex-column justify-content-center pt-2",children:(0,R.jsx)(v.A.Label,{className:b,children:"Assignee"})}),(0,R.jsxs)(x.A,{sm:8,className:"d-flex flex-column justify-content-center",children:[!Y&&(0,R.jsx)("div",{className:"d-flex align-items-center justify-content-center",onClick:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.show()},style:{border:"1px dashed #98A2B3",width:"24px",height:"24px",borderRadius:"50%"},children:(0,R.jsx)(r.A,{color:null!==(t=F.current)&&void 0!==t&&null!==(s=t.panel)&&void 0!==s&&null!==(n=s.element)&&void 0!==n&&n.offsetParent?"#1AB2FF":"#475467",size:18,className:"cursor-pointer"})}),(0,R.jsx)(c.m,{ref:F,options:[{label:"Desktop User",items:(null===me||void 0===me||null===(l=me.data)||void 0===l||null===(i=l.users)||void 0===i||null===(h=i.filter((e=>null===e||void 0===e?void 0:e.is_active)))||void 0===h?void 0:h.map((e=>({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}`||(null===e||void 0===e?void 0:e.first_name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]},...null!==G&&void 0!==G&&G.has_work_subscription?[{label:"Mobile User",items:(null===ue||void 0===ue||null===(w=ue.data)||void 0===w||null===(D=w.users)||void 0===D||null===(A=D.filter((e=>"disconnected"!==(null===e||void 0===e?void 0:e.status))))||void 0===A?void 0:A.map((e=>({value:null===e||void 0===e?void 0:e.id,label:`${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}`||(null===e||void 0===e?void 0:e.first_name)||"-",photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]}]:[]],onChange:e=>{ee(e.value)},valueTemplate:e=>e?(0,R.jsxs)("div",{className:"d-flex gap-2 align-items-center",style:{position:"relative",left:"-10px"},children:[(0,R.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,R.jsx)(C.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}):null,itemTemplate:e=>(0,R.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,R.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,R.jsx)(C.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),null===e||void 0===e?void 0:e.label]}),className:"outline-none border-0 p-0",style:{width:Y?"fit-content":"0px",height:Y?"46px":"0px",zIndex:Y?"1":"0",position:"relative",left:Y?"-4px":"-60px",top:Y?"0px":"-15px"},value:Y,dropdownIcon:(0,R.jsx)(R.Fragment,{}),collapseIcon:(0,R.jsx)(R.Fragment,{}),placeholder:"Select project",filter:!0,filterInputAutoFocus:!0,optionGroupLabel:"label",optionGroupChildren:"items",scrollHeight:"400px"})]})]}),le.user&&(0,R.jsx)(v.A.Text,{className:"error-message",children:"User is required"}),(0,R.jsxs)(f.A,{className:"mt-3",children:[(0,R.jsx)(x.A,{sm:4,className:"d-flex flex-column justify-content-center",children:(0,R.jsx)(v.A.Label,{className:b,children:"Due Date"})}),(0,R.jsx)(x.A,{sm:8,className:"d-flex flex-column justify-content-center",children:(0,R.jsx)(I,{dateRange:te,setDateRange:se})})]}),le.date&&(0,R.jsx)(v.A.Text,{className:"error-message",children:"Date is required"}),(0,R.jsxs)(f.A,{className:"mt-3",children:[(0,R.jsx)(x.A,{sm:4,className:"d-flex flex-column justify-content-center pt-3",children:(0,R.jsx)(v.A.Label,{className:b,children:"Link to Project"})}),(0,R.jsx)(x.A,{sm:8,className:"d-flex flex-column justify-content-center",children:(0,R.jsx)(c.m,{options:(null===ce||void 0===ce||null===(T=ce.data)||void 0===T?void 0:T.map((e=>({value:e.id,label:`${e.number}: ${e.reference}`}))))||[],onChange:e=>{X(e.value)},className:(0,d.A)("outline-none",N),style:{height:"46px",maxWidth:"100%",width:"fit-content"},value:Q,loading:null===ce||void 0===ce?void 0:ce.isFetching,placeholder:"Select project",filter:!0,filterInputAutoFocus:!0})})]}),le.project&&(0,R.jsx)(v.A.Text,{className:"error-message",children:"Project task is required"}),(0,R.jsxs)(f.A,{className:"mt-3",children:[(0,R.jsx)(x.A,{sm:4,children:(0,R.jsx)(v.A.Label,{className:b,children:"Description"})}),(0,R.jsx)(x.A,{sm:12,children:(0,R.jsx)(v.A.Control,{name:"taskDescription",id:"taskDescription",as:"textarea",placeholder:"Enter a description...",value:V,rows:2,ref:U,onChange:e=>{J(e.target.value)},className:k,onInput:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"},onFocus:()=>{U.current&&(U.current.style.height="auto",U.current.style.height=U.current.scrollHeight+"px")}})})]}),le.description&&(0,R.jsx)(v.A.Text,{className:"error-message",children:"Description is required"}),L&&(0,R.jsxs)("div",{className:"border-top pt-2 mt-3",children:[(0,R.jsx)(v.A.Label,{className:b,children:"Comments"}),(0,R.jsx)("div",{ref:q,children:(0,R.jsx)(H,{taskId:L,ref:B})})]})]}),(0,R.jsxs)("div",{className:"modal-footer d-flex flex-column",style:{borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[(0,R.jsx)("div",{className:"d-flex w-100",style:{padding:"16px 24px"},children:(0,R.jsxs)("div",{className:"d-flex align-items-start gap-3 w-100",children:[(0,R.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",border:"1px solid #EAECF0",flexShrink:0},children:(0,R.jsx)(C.A,{photo:null===G||void 0===G||null===(S=G.user)||void 0===S?void 0:S.photo,has_photo:null===G||void 0===G||null===(E=G.user)||void 0===E?void 0:E.has_photo,is_business:!1,size:23})}),(0,R.jsx)("div",{className:"flex-grow-1",children:(0,R.jsx)(m.Z,{ref:M,id:"comment-input",as:"textarea",placeholder:"Add a comment...",rows:2,value:ne,onChange:e=>ae(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),(()=>{var e;ne.trim()?L?(re(!0),ge.mutate({comment:ne,attachment_url:null,attachment_type:null,created_by:{role:null===G||void 0===G||null===(e=G.user)||void 0===e?void 0:e.role}})):g.oR.error("Please save the task first before adding comments"):g.oR.error("Please enter a comment")})())},disabled:oe||!L,style:{width:"100%",border:"1px solid #D0D5DD",borderRadius:"8px",padding:"10px 14px",fontSize:"14px",resize:"none",minHeight:"44px",transition:"all 0.2s ease"}})})]})}),(0,R.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-between gap-3",style:{borderTop:"1px solid var(--Gray-200, #EAECF0)",padding:"12px 14px 6px 14px"},children:[(0,R.jsx)("div",{children:L&&(0,R.jsxs)(p.A,{className:"danger-text-button gap-2",onClick:ve,children:["Delete",xe.isPending&&(0,R.jsx)(u.p,{style:{width:"18px",height:"18px"}})]})}),(0,R.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,R.jsx)(p.A,{type:"button",onClick:fe,className:"outline-button",children:"Cancel"}),(0,R.jsxs)(p.A,{type:"button",onClick:pe,className:"solid-button",style:{minWidth:"70px"},disabled:he.isPending,children:[L?"Update Task":"Create Task"," ",he.isPending&&(0,R.jsx)(u.p,{style:{width:"18px",height:"18px"}})]})]})]})]})]})}})}},72796:(e,t,s)=>{s.d(t,{_x:()=>r,dd:()=>a,mM:()=>o});const n="https://app.memate.com.au/api/v1",a=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const a={method:"GET",headers:t};try{const t=new URL(`${n}/tasks/${e}/`),s=await fetch(t,a);return await s.json()}catch(o){throw console.error("Tasks fetch error:",o),o}},o=async e=>{const t=new Headers,s=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${s}`),t.append("Content-Type","application/json");const a={method:"DELETE",headers:t,redirect:"follow"};try{const t=new URL(`${n}/tasks/delete/${e}/`);if((await fetch(t,a)).ok)return{message:"Task deleted successfully"};throw new Error("Error during deleting")}catch(o){throw console.error("Tasks fetch error:",o),o}},r=async(e,t)=>{const s=new Headers,a=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${a}`),s.append("Content-Type","application/json");const o={method:"PATCH",headers:s,body:JSON.stringify({finished:t}),redirect:"follow"};try{const t=new URL(`${n}/tasks/complete/${e}/`),s=await fetch(t,o);return await s.json()}catch(r){throw console.error("Tasks fetch error:",r),r}}},79106:(e,t,s)=>{s.d(t,{Af:()=>l,Co:()=>h,Lb:()=>m,U9:()=>o,Zi:()=>u,aU:()=>d,gg:()=>r,gy:()=>c,lC:()=>i});var n=s(31342);const a="https://app.memate.com.au/api/v1",o=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0;const d=(e-1)*t,c=new URL(`${a}/tasks/`);return c.searchParams.append("limit",t),c.searchParams.append("offset",d),s&&c.searchParams.append("search",s),o&&c.searchParams.append("ordering",o),r&&c.searchParams.append("deleted",1),!0===l&&c.searchParams.append("finished",!1),!1===l&&c.searchParams.append("finished",!0),i&&c.searchParams.append("users",i),(0,n.f)(c.toString(),{method:"GET"})},r=async e=>{const t=new URL(`${a}${`/tasks/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},l=async e=>{const t={method:"POST",body:e},s=new URL(`${a}/tasks/new/`);return(0,n.f)(s.toString(),t)},i=async(e,t)=>{const s={method:"PUT",body:t},o=new URL(`${a}${`/tasks/update/${e}/`}`);return(0,n.f)(o.toString(),s)},d=async()=>{const e=new URL(`${a}/desktop-users/`);return(0,n.f)(e.toString(),{method:"GET"})},c=async()=>{const e=new URL(`${a}/team/mobile-users/`);return(0,n.f)(e.toString(),{method:"GET"})},m=async e=>{const t=new URL(`${a}${`/tasks/${e}/comments/`}`);return(0,n.f)(t.toString(),{method:"GET"})},u=async(e,t)=>{const s=new URL(`${a}${`/tasks/${e}/comments/`}`);return(0,n.f)(s.toString(),{method:"POST",body:t})},h=async e=>{const t=new URL(`${a}${`/tasks/comments/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})}},83738:(e,t,s)=>{s.d(t,{s:()=>d});var n=s(65043),a=s(58387),o=s(670),r=s(68767),l=s(32370),i=s(70579);const d=e=>{let{onDataApply:t,dateRange:s,onClose:d,className:c=""}=e;const[m,u]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(null!==s&&void 0!==s&&s.startDate&&null!==s&&void 0!==s&&s.endDate){const e=s.startDate instanceof Date?s.startDate:new Date(s.startDate),t=s.endDate instanceof Date?s.endDate:new Date(s.endDate);u([e,t])}}),[s]);const h=(0,n.useCallback)((()=>{m&&2===m.length&&m[0]&&m[1]?t({startDate:m[0],endDate:m[1]}):m&&1===m.length&&m[0]&&t({startDate:m[0],endDate:m[0]})}),[m,t]),p=(0,n.useCallback)((()=>{u(null),d&&d()}),[d]),x=(0,n.useCallback)((()=>{const e=new Date;e.setHours(0,0,0,0),u([e,e])}),[]),v=(0,n.useCallback)((()=>{const e=m&&m.length>=1&&m[0];return(0,i.jsxs)("div",{className:"date-range-footer",children:[(0,i.jsx)("button",{type:"button",className:"date-range-footer-btn date-range-footer-btn-today",onClick:x,children:"Today"}),(0,i.jsx)("button",{type:"button",className:"date-range-footer-btn date-range-footer-btn-cancel",onClick:p,children:"Cancel"}),(0,i.jsx)("button",{type:"button",className:"date-range-footer-btn date-range-footer-btn-apply",onClick:h,disabled:!e,children:"Apply"})]})}),[m,x,p,h]),f=(0,n.useCallback)((()=>{var e,t;if(!m||0===m.length)return"Select date range";const s={month:"short",day:"numeric",year:"numeric"},n=(null===(e=m[0])||void 0===e?void 0:e.toLocaleDateString("en-US",s))||"",a=(null===(t=m[1])||void 0===t?void 0:t.toLocaleDateString("en-US",s))||"";return n&&a?`${n} - ${a}`:n?`${n} - Select end date`:"Select date range"}),[m]);return(0,i.jsxs)("div",{className:(0,a.A)("date-range-picker-calendar",c),children:[(0,i.jsx)("div",{className:"date-range-header",children:(0,i.jsx)("span",{className:"date-range-header-text",children:f()})}),(0,i.jsx)(o.V,{value:m,onChange:e=>u(e.value),selectionMode:"range",inline:!0,numberOfMonths:1,locale:"en",dateFormat:"dd M yy",footerTemplate:v,firstDayOfWeek:1,showButtonBar:!1,prevIcon:(0,i.jsx)(r.Y,{}),nextIcon:(0,i.jsx)(l.v,{})})]})}}}]);
//# sourceMappingURL=3981.2f2404e7.chunk.js.map