"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3720],{568:(e,s,l)=>{l.d(s,{J:()=>i});const i=Object.freeze({CLIENTS:{CREATE:"CREATE_CLIENT",READ:"READ_CLIENT",UPDATE:"UPDATE_CLIENT",DELETE:"DELETE_CLIENT"},SUPPLIERS:{CREATE:"CREATE_SUPPLIER",READ:"READ_SUPPLIER",UPDATE:"UPDATE_SUPPLIER",DELETE:"DELETE_SUPPLIER"},SALES:{},MANAGEMENT:{},PROJECTS:{},STATISTIC:{},EXPENSE:{CREATE:"CREATE_EXPENSE",READ:"READ_EXPENSE",UPDATE:"UPDATE_EXPENSE",DELETE:"DELETE_EXPENSE"},INVOICE:{CREATE:"CREATE_INVOICE",READ:"READ_INVOICE",UPDATE:"UPDATE_INVOICE",DELETE:"DELETE_INVOICE"},SETTINGS:{SUBSCRIPTION:{BUY_BUSINESS_SUBSCRIPTION:"BUY_BUSINESS_SUBSCRIPTION",CANCEL_BUSINESS_SUBSCRIPTION:"CANCEL_BUSINESS_SUBSCRIPTION",BUY_COMPANY_USER_SUBSCRIPTION:"BUY_COMPANY_USER_SUBSCRIPTION",BUY_WORK_SUBSCRIPTION:"BUY_WORK_SUBSCRIPTION",CANCEL_WORK_SUBSCRIPTION:"CANCEL_WORK_SUBSCRIPTION",ACTIVE_WORK_SUBSCRIPTION:"ACTIVE_WORK_SUBSCRIPTION",BUY_WORK_USER_SUBSCRIPTION:"BUY_WORK_USER_SUBSCRIPTION",BUY_LOCATION_SUBSCRIPTION:"BUY_LOCATION_SUBSCRIPTION",REMOVE_LOCATION_SUBSCRIPTION:"REMOVE_LOCATION_SUBSCRIPTION",ACTIVE_INQUIRIES_SUBSCRIPTION:"ACTIVE_INQUIRIES_SUBSCRIPTION",CANCEL_INQUIRIES_SUBSCRIPTION:"CANCEL_INQUIRIES_SUBSCRIPTION",ACTIVE_ASSETS_SUBSCRIPTION:"ACTIVE_ASSETS_SUBSCRIPTION",CANCEL_ASSETS_SUBSCRIPTION:"CANCEL_ASSETS_SUBSCRIPTION",MANAGE_ASSET_SUBSCRIPTION:"MANAGE_ASSET_SUBSCRIPTION"},USERS:{MOBILE_APP:{ADD:"ADD_USER",READ:"READ_USER",UPDATE:"UPDATE_USER",DISCONNECT_USER:"DISCONNECT_USER",RECONNECT_USER:"RECONNECT_USER",SHOW_DISCONNECTED_USERS:"SHOW_DISCONNECTED_USERS"},DESKTOP:{ADD:"ADD_USER",READ:"READ_USER",DELETE:"DELETE_USER",UPDATE:"UPDATE_USER",RESTORE:"RESTORE_USER",SHOW_DELETED_USERS:"SHOW_DELETED_USERS"}},LOCATION:{ADD:"ADD_LOCATION",READ:"READ_LOCATION",UPDATE:"UPDATE_LOCATION",DELETE:"DELETE_LOCATION"}}})},23720:(e,s,l)=>{l.r(s),l.d(s,{default:()=>Y});var i=l(65043),t=l(49367),r=l(27417),n=l(96141),o=l(73216),a=l(35475),d=l(28261),c=l(47097),u=l(58387),m=l(72018),S=l(9642),p=l(64824),E=l(93740),h=l(56328),v=l(61072),N=l(78602),_=l(73898),x=l(93202),T=l(69956),I=l(33361),g=l(24858),A=l(17380),R=l(18403),j=l(63712),P=l(55797),f=l(88060),U=l(28676),C=l(74532),b=l(72052),O=l(74856),w=l(80899),y=l(24370),B=l(63882),D=l(84576),L=l(70579);const G=e=>{var s,l,t,r,n,o,a,c;let{visible:S,setVisible:p,id:G=null,setId:k,refetch:J,privilegeOptions:M}=e;const[$,F]=(0,i.useState)(!1),[V,Y]=(0,i.useState)(null),[q,K]=(0,i.useState)(!1),{control:H,register:W,reset:z,handleSubmit:X,formState:{errors:Q}}=(0,g.mN)({resolver:(0,R.t)((Z=!!G,w.Ik({firstName:w.Yj().required("First Name is required"),lastName:w.Yj().required("Last Name is required"),email:w.Yj().email("Invalid email address").required("Email is required"),phone:w.Yj().optional(),role:w.Yj().required("Role is required"),privilege:w.Yj().required("Privilege is required"),password:Z?w.Yj().notRequired():w.Yj().required("Password is required"),repeatPassword:w.Yj().when("password",{is:e=>!Z||!!e,then:e=>e.required("Repeat Password is required").oneOf([w.KR("password")],"Passwords must match"),otherwise:e=>e.notRequired().nullable()})}).required())),defaultValues:{firstName:"",lastName:"",email:"",phone:"",role:"",privilege:"",password:"",repeatPassword:""}});var Z;const ee=(0,d.I)({queryKey:["readDesktopUser",G],queryFn:()=>(0,y.mt)(G),enabled:!!G,retry:0}),se=()=>{p(!1),k(null),Y(null),z({firstName:"",lastName:"",email:"",phone:"",role:"",privilege:"",password:"",repeatPassword:""})},le=async e=>{console.log("data: ",e);const s=new FormData;if(s.append("first_name",e.firstName),s.append("last_name",e.lastName),s.append("email",e.email.toLowerCase()),s.append("phone",e.phone),s.append("role",e.role),s.append("privilege",e.privilege),e.password&&s.append("password",e.password),null!==V&&void 0!==V&&V.croppedImageBlob){const e=(0,j.Ak)(6);s.append("photo",V.croppedImageBlob,`${e}.jpg`)}let l="POST",i="https://app.memate.com.au/api/v1/desktop-users/new/";G&&(l="PUT",i=`https://app.memate.com.au/api/v1/desktop-users/update/${G}/`);const t=localStorage.getItem("access_token");try{K(!0);const e=await fetch(i,{method:l,headers:{Authorization:`Bearer ${t}`},body:s});return K(!1),e.ok?(se(),h.oR.success("Desktop user created successfully!"),J(),"success"):(h.oR.error("Failed to create the user. Please try again."),"error")}catch(r){K(!1),console.error("Error creating user:",r),h.oR.error("Failed to create the user. Please try again.")}finally{K(!1)}};(0,i.useEffect)((()=>{var e,s,l,i,t,r,n,o,a;null!==ee&&void 0!==ee&&ee.data&&G?(z({firstName:null===ee||void 0===ee||null===(e=ee.data)||void 0===e?void 0:e.first_name,lastName:null===ee||void 0===ee||null===(s=ee.data)||void 0===s?void 0:s.last_name,email:null===ee||void 0===ee||null===(l=ee.data)||void 0===l?void 0:l.email,phone:null===ee||void 0===ee||null===(i=ee.data)||void 0===i?void 0:i.phone,role:null===ee||void 0===ee||null===(t=ee.data)||void 0===t?void 0:t.role,privilege:null===ee||void 0===ee||null===(r=ee.data)||void 0===r?void 0:r.privilege}),null!==ee&&void 0!==ee&&null!==(n=ee.data)&&void 0!==n&&n.photo&&null!==ee&&void 0!==ee&&null!==(o=ee.data)&&void 0!==o&&o.has_photo&&Y(null===ee||void 0===ee||null===(a=ee.data)||void 0===a?void 0:a.photo)):(Y(""),z({firstName:"",lastName:"",email:"",phone:"",role:"",privilege:"",password:"",repeatPassword:""}))}),[null===ee||void 0===ee?void 0:ee.data,G,z]);const ie=(0,L.jsx)("div",{className:`${D.A.modalHeader}`,children:(0,L.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,L.jsx)("div",{className:D.A.circledesignstyle,children:(0,L.jsx)("div",{className:D.A.out,children:G?(0,L.jsx)(_.A,{size:24,color:"#17B26A",className:"mb-0"}):(0,L.jsx)(x.A,{size:24,color:"#17B26A",className:"mb-0"})})}),(0,L.jsxs)("span",{className:`white-space-nowrap ${D.A.headerTitle}`,children:[G?"Edit":"Add"," Desktop User"]})]})}),te=(0,L.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,L.jsx)("span",{}),(0,L.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,L.jsx)(m.$,{className:"outline-button",onClick:se,children:"Cancel"}),(0,L.jsxs)(m.$,{type:"submit",disabled:q,onClick:X(le),className:"solid-button",children:[G?"Update":"Save"," Details",q&&(0,L.jsx)(E.p,{style:{width:"20px",height:"20px"}})]})]})]}),re=null===M||void 0===M||null===(s=M.filter((e=>"Admin"!==(null===e||void 0===e?void 0:e.name))))||void 0===s?void 0:s.map((e=>({label:(null===e||void 0===e?void 0:e.name)||"",value:null===e||void 0===e?void 0:e.id})));return(0,L.jsx)(P.l,{visible:S,modal:!0,header:ie,footer:te,className:`${D.A.modal} custom-modal`,onHide:se,children:(0,L.jsx)("div",{className:"d-flex flex-column",children:(0,L.jsx)("form",{onSubmit:X(le),children:(0,L.jsxs)(v.A,{children:[(0,L.jsxs)(N.A,{sm:12,children:[(0,L.jsxs)("div",{className:(0,u.A)(D.A.fileUploadBox,"cursor-pointer"),onClick:()=>F(!0),children:[(0,L.jsx)("div",{className:(0,u.A)(D.A.uploadedImgBox),children:V?(0,L.jsx)("img",{src:(null===V||void 0===V?void 0:V.croppedImageBase64)||V,alt:"profile-img"}):(0,L.jsx)(T.A,{size:20,color:"#667085"})}),(0,L.jsx)("p",{className:(0,u.A)("mb-0",D.A.uploadedText1),children:(0,L.jsx)("span",{className:(0,u.A)("mb-0",D.A.uploadedText2),children:"Click to upload"})}),(0,L.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]}),(0,L.jsx)(B.A,{show:$,setShow:F,setPhoto:Y})]}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"First Name"}),(0,L.jsx)(b.S,{...W("firstName"),className:(0,u.A)(D.A.inputText,"outline-none",{[D.A.error]:null===Q||void 0===Q?void 0:Q.firstName}),placeholder:"Enter first name"}),(null===Q||void 0===Q?void 0:Q.firstName)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(l=Q.firstName)||void 0===l?void 0:l.message})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Last Name"}),(0,L.jsx)(b.S,{...W("lastName"),className:(0,u.A)(D.A.inputText,"outline-none",{[D.A.error]:null===Q||void 0===Q?void 0:Q.lastName}),placeholder:"Enter last name"}),(null===Q||void 0===Q?void 0:Q.lastName)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(t=Q.lastName)||void 0===t?void 0:t.message})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Email"}),(0,L.jsxs)(U.C,{iconPosition:"left",children:[(0,L.jsx)(C.m,{children:(0,L.jsx)(I.A,{style:{position:"relative",top:"-5px"},size:20,color:"#667085"})}),(0,L.jsx)(b.S,{...W("email"),disabled:!!G,style:{paddingLeft:"38px"},className:(0,u.A)(D.A.inputText,"outline-none",{[D.A.error]:null===Q||void 0===Q?void 0:Q.email}),placeholder:"company@email.com"})]}),(null===Q||void 0===Q?void 0:Q.email)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(r=Q.email)||void 0===r?void 0:r.message})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Phone (optional)"}),(0,L.jsx)(g.xI,{name:"phone",control:H,render:e=>{let{field:s}=e;return(0,L.jsx)(A.LR,{defaultCountry:"au",value:"string"===typeof s.value?s.value:"",className:"phoneInput rounded",onChange:s.onChange,placeholder:"Enter phone number"})}})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Role"}),(0,L.jsx)(b.S,{...W("role"),className:(0,u.A)(D.A.inputText,"outline-none"),placeholder:"Select role"}),(null===Q||void 0===Q?void 0:Q.role)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(n=Q.role)||void 0===n?void 0:n.message})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Privilege"}),(0,L.jsx)(g.xI,{name:"privilege",control:H,defaultValue:"",render:e=>{let{field:s}=e;return(0,L.jsx)(f.m,{...s,options:re,className:(0,u.A)(D.A.dropdownSelect,"dropdown-height-fixed","outline-none"),placeholder:"Select privilege",value:s.value,style:{height:"46px"},onChange:e=>s.onChange(e.value),filterInputAutoFocus:!0})}}),(null===Q||void 0===Q?void 0:Q.privilege)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(o=Q.privilege)||void 0===o?void 0:o.message})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Password"}),(0,L.jsx)(b.S,{type:"password",...W("password"),className:(0,u.A)(D.A.inputText,"outline-none",{[D.A.error]:null===Q||void 0===Q?void 0:Q.password}),placeholder:"Enter password"}),(null===Q||void 0===Q?void 0:Q.password)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(a=Q.password)||void 0===a?void 0:a.message})]})}),(0,L.jsx)(N.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.E,{width:"20%",className:"mb-2"}),(0,L.jsx)(O.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,L.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,L.jsx)("label",{className:(0,u.A)(D.A.label),children:"Repeat Password"}),(0,L.jsx)(b.S,{type:"password",...W("repeatPassword"),className:(0,u.A)(D.A.inputText,"outline-none",{[D.A.error]:null===Q||void 0===Q?void 0:Q.repeatPassword}),placeholder:"Repeat password"}),(null===Q||void 0===Q?void 0:Q.repeatPassword)&&(0,L.jsx)("p",{className:"error-message",children:null===Q||void 0===Q||null===(c=Q.repeatPassword)||void 0===c?void 0:c.message})]})})]})})})})};var k=l(57189),J=l(48417),M=l(568),$=l(74737),F=l(58027);const V=e=>{var s,l,t,v,N,_,x,T,I,g;let{visible:A,setVisible:R}=e;const{role:j}=(0,k.As)(),{trialHeight:P}=(0,J.$)(),f=(0,o.Zp)(),[U,C]=(0,i.useState)(null),[b,O]=(0,i.useState)(!1),w=(0,d.I)({queryKey:["desktop-users-list"],queryFn:y.MA}),B=(0,d.I)({queryKey:["privileges-list"],queryFn:y.rY});let V=(null===w||void 0===w||null===(s=w.data)||void 0===s||null===(l=s.users)||void 0===l?void 0:l.filter((e=>e.is_active)))||0;const Y=b?null===w||void 0===w||null===(t=w.data)||void 0===t||null===(v=t.users)||void 0===v?void 0:v.filter((e=>!e.is_active)):(null===w||void 0===w||null===(N=w.data)||void 0===N||null===(_=N.users)||void 0===_?void 0:_.filter((e=>e.is_active)))||[],q=(0,c.n)({mutationFn:e=>(0,y.V0)(e),onSuccess:()=>{null===w||void 0===w||w.refetch(),h.oR.success("User deleted successfully"),q.reset()},onError:e=>{console.log("error: ",e),h.oR.error("Failed to delete user. Please try again.")}}),K=(0,c.n)({mutationFn:e=>(0,y._S)(e),onSuccess:()=>{O(!1),null===w||void 0===w||w.refetch(),h.oR.success("User restored successfully"),K.reset()},onError:e=>{console.log("error: ",e),h.oR.error("Failed to restore user. Please try again.")}});console.log("restoreMutation: ",null===K||void 0===K?void 0:K.variables);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"settings-content setModalelBoots w-100",children:[(0,L.jsxs)("div",{className:"headSticky",children:[(0,L.jsx)("h1",{className:"mb-0",children:"Users"}),(0,L.jsxs)("div",{className:`contentMenuTab ${D.A.contentMenuTab}`,style:{height:"50px"},children:[(0,L.jsxs)("ul",{children:[(0,L.jsx)("li",{className:"menuActive",children:(0,L.jsx)(a.N_,{to:"/settings/users/desktop",children:"Desktop"})}),(0,L.jsx)("li",{children:(0,L.jsx)(a.N_,{to:"/settings/users/mobile-app",children:"Mobile App"})})]}),(0,$._)(j,M.J.SETTINGS.USERS.DESKTOP.ADD)&&(0,L.jsxs)(m.$,{disabled:(null===w||void 0===w||null===(x=w.data)||void 0===x||null===(T=x.limits)||void 0===T?void 0:T.total)<=(null===V||void 0===V?void 0:V.length),onClick:()=>R(!0),className:(0,u.A)(D.A.addUserBut,"outline-none"),children:["Add ",(0,L.jsx)(n.A,{size:20,color:"#000"})]})]})]}),(0,L.jsx)("div",{className:`content_wrap_main ${D.A.contentwrapmain}`,style:{paddingBottom:`${P}px`},children:(0,L.jsx)("div",{className:"content_wrapper border-top",children:(0,L.jsxs)("div",{className:"listwrapper",children:[(0,L.jsxs)("div",{className:"topHeadStyle pb-4",children:[(0,L.jsxs)("div",{className:D.A.userHead,children:[(0,L.jsx)("h2",{children:"Management - Desktop Access"}),(0,L.jsxs)("p",{className:"d-flex align-items-center gap-2",children:[(null===V||void 0===V?void 0:V.length)||0," / ",(null===w||void 0===w||null===(I=w.data)||void 0===I||null===(g=I.limits)||void 0===g?void 0:g.total)||0,(0,$._)(j,M.J.SETTINGS.SUBSCRIPTION.BUY_COMPANY_USER_SUBSCRIPTION)&&(0,L.jsx)(a.N_,{to:"/settings/generalinformation/subscription",className:"p-0 border-0",style:{background:"transparent"},children:(0,L.jsx)("span",{className:"cursor-pointer",children:"Buy More"})})]})]}),(0,$._)(j,M.J.SETTINGS.USERS.DESKTOP.RESTORE)&&(0,L.jsxs)(m.$,{onClick:()=>O(!b),className:(0,u.A)(D.A.showDeleteBut,"outline-none"),children:[b?"Hide":"Show"," Removed"]})]}),(0,L.jsx)("div",{className:`settings-wrap ${D.A.userSettingPage}`,children:(0,L.jsxs)(p.b,{value:Y,showGridlines:!0,tableStyle:{minWidth:"50rem"},children:[(0,L.jsx)(S.V,{field:"name",style:{width:"auto"},body:e=>(0,L.jsxs)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",children:[(0,L.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,L.jsx)(F.h,{has_photo:e.has_photo,photo:e.photo,is_business:!1}),(0,L.jsx)("div",{className:"d-flex flex-column gap-1",children:(0,L.jsxs)("div",{className:`${D.A.ellipsis}`,children:[e.first_name," ",e.last_name]})})]}),(0,$._)(j,M.J.SETTINGS.USERS.DESKTOP.UPDATE)&&(0,L.jsx)(m.$,{label:"Edit",onClick:()=>{"Admin"===(null===e||void 0===e?void 0:e.privilege_name)?f("/settings/generalinformation/profile"):(C(null===e||void 0===e?void 0:e.id),R(!0))},className:"primary-text-button ms-3 show-on-hover-element not-show-checked"})]}),header:"Name"}),(0,L.jsx)(S.V,{field:"email",style:{width:"267px"},header:"Email"}),(0,L.jsx)(S.V,{field:"phone",style:{width:"210px"},header:"Phone"}),(0,L.jsx)(S.V,{field:"role",style:{width:"210px"},header:"Role"}),(0,L.jsx)(S.V,{field:"privilege",body:e=>(0,L.jsx)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",children:(0,L.jsx)("div",{className:`styleGrey01  ${D.A.privilege}`,children:(null===e||void 0===e?void 0:e.privilege_name)||"-"})}),style:{width:"147px"},header:"Privilege"}),(0,$._)(j,M.J.SETTINGS.USERS.DESKTOP.DELETE)&&(0,L.jsx)(S.V,{style:{width:"210px"},header:"Actions",body:e=>"Admin"===(null===e||void 0===e?void 0:e.privilege_name)?"-":(0,L.jsx)(i.Fragment,{children:null!==e&&void 0!==e&&e.is_active?(0,L.jsxs)(m.$,{disabled:(null===q||void 0===q?void 0:q.variables)===(null===e||void 0===e?void 0:e.id),onClick:()=>{q.mutate(null===e||void 0===e?void 0:e.id)},className:(0,u.A)(D.A.dangerTextButton,"text-button"),style:{width:"120px"},children:["Remove",(null===q||void 0===q?void 0:q.variables)===(null===e||void 0===e?void 0:e.id)?(0,L.jsx)(E.p,{style:{width:"20px",height:"20px"}}):""]}):(0,L.jsxs)(m.$,{disabled:(null===K||void 0===K?void 0:K.variables)===(null===e||void 0===e?void 0:e.id),onClick:()=>(e=>{var s,l;(null===w||void 0===w||null===(s=w.data)||void 0===s||null===(l=s.limits)||void 0===l?void 0:l.total)<=(null===V||void 0===V?void 0:V.length)?h.oR.error("You have reached the maximum number of users allowed."):K.mutate(e)})(null===e||void 0===e?void 0:e.id),className:(0,u.A)(D.A.successTextButton,"text-button"),style:{width:"120px",color:"#067647"},children:["Restore",(null===K||void 0===K?void 0:K.variables)===(null===e||void 0===e?void 0:e.id)?(0,L.jsx)(E.p,{style:{width:"20px",height:"20px"}}):""]})})})]})})]})})})]}),w.isLoading&&(0,L.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",background:"white",width:"60px",height:"60px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},className:"shadow-lg",children:(0,L.jsx)(r.A,{animation:"border",role:"status",children:(0,L.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),(0,L.jsx)(G,{id:U,setId:C,visible:A,setVisible:R,refetch:()=>null===w||void 0===w?void 0:w.refetch(),privilegeOptions:(null===B||void 0===B?void 0:B.data)||[]})]})},Y=()=>{const[e,s]=(0,i.useState)(!1);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(t.mg,{children:(0,L.jsx)("title",{children:"MeMate - Desktop Users"})}),(0,L.jsx)("div",{className:`${D.A.userSettingPage}`,children:(0,L.jsx)(V,{visible:e,setVisible:s})})]})}},24370:(e,s,l)=>{l.d(s,{$S:()=>E,KI:()=>p,MA:()=>n,V0:()=>d,_S:()=>c,gy:()=>u,mr:()=>m,mt:()=>a,rY:()=>r,sf:()=>o,vm:()=>S});var i=l(31342);const t="https://app.memate.com.au/api/v1",r=async()=>{const e=new URL(`${t}/references/privileges/`);return(0,i.f)(e.toString(),{method:"GET"})},n=async()=>{const e=new URL(`${t}/desktop-users/`);return(0,i.f)(e.toString(),{method:"GET"})},o=async e=>{const s={method:"PUT",body:e},l=new URL(`${t}/settings/subscriptions/business/`);return(0,i.f)(l.toString(),s)},a=async e=>{const s=new URL(`${t}${`/desktop-users/update/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},d=async e=>{const s=new URL(`${t}${`/desktop-users/active/${e}/`}`);return(0,i.f)(s.toString(),{method:"PUT",body:{is_active:!1}})},c=async e=>{const s=new URL(`${t}${`/desktop-users/active/${e}/`}`);return(0,i.f)(s.toString(),{method:"PUT",body:{is_active:!0}})},u=async()=>{const e=new URL(`${t}/team/mobile-users/`);return(0,i.f)(e.toString(),{method:"GET"})},m=async e=>{const s={method:"PUT",body:e},l=new URL(`${t}/settings/subscriptions/work/`);return(0,i.f)(l.toString(),s)},S=async e=>{const s=new URL(`${t}${`/mobile-users/active/${e}/`}`);return(0,i.f)(s.toString(),{method:"PUT",body:{is_active:!1}})},p=async e=>{const s=new URL(`${t}${`/mobile-users/active/${e}/`}`);return(0,i.f)(s.toString(),{method:"PUT",body:{is_active:!0}})},E=async e=>{const s=new URL(`${t}${`/settings/mobile-users/resend/${e}/`}`);return(0,i.f)(s.toString(),{method:"POST"})}},63882:(e,s,l)=>{l.d(s,{A:()=>p});var i=l(65043),t=l(32952),r=l(14282),n=l(76163),o=l(69956),a=l(89488),d=l(55683),c=l(58387),u=l(29853);const m={title:"file-uploader_title__+HTTy",previewSection:"file-uploader_previewSection__mnNRf",previewBox:"file-uploader_previewBox__j6psm",previewBoxImg1:"file-uploader_previewBoxImg1__SR-1w",rectangle:"file-uploader_rectangle__dFhi8",previewBoxImg2:"file-uploader_previewBoxImg2__zYCKK",previewBoxImg3:"file-uploader_previewBoxImg3__YNTWI",previewBoxImg4:"file-uploader_previewBoxImg4__cRl+e",previewBoxImg5:"file-uploader_previewBoxImg5__GzHFj",previewActions:"file-uploader_previewActions__UO1dp",label:"file-uploader_label__Udhfq",label2:"file-uploader_label2__cY-JF"};var S=l(70579);const p=e=>{let{show:s,setShow:l,setPhoto:p,additionalDesign:E,shape:h="rect",aspect:v=1}=e;const[N,_]=(0,i.useState)([]),[x,T]=(0,i.useState)({x:0,y:0}),[I,g]=(0,i.useState)(1),[A,R]=(0,i.useState)(0),[j,P]=(0,i.useState)(null),[f,U]=(0,i.useState)({}),C=(0,i.useCallback)(((e,s)=>{P(s)}),[]),b=(0,i.useCallback)((async()=>{if(!N.length||!j)return;const e=document.createElement("canvas"),s=e.getContext("2d"),l=new Image;l.src=N[0].preview,await new Promise((e=>l.onload=e)),e.width=j.width,e.height=j.height,s.translate(e.width/2,e.height/2),s.rotate(A*Math.PI/180),s.translate(-e.width/2,-e.height/2),s.drawImage(l,j.x,j.y,j.width,j.height,0,0,j.width,j.height);return e.toDataURL("image/jpeg")}),[N,j,A]),O=async()=>{const e=await b();e&&U({img2:e,img3:e,img4:e,img5:e})};(0,i.useEffect)((()=>{O()}),[I,x,A,N,j]);const{getRootProps:w,getInputProps:y}=(0,a.VB)({maxFiles:1,accept:{"image/*":[]},onDrop:e=>{_(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});return(0,S.jsxs)(t.A,{style:{zIndex:1111},show:s,centered:!0,onHide:()=>l(!1),onShow:O,children:[(0,S.jsx)(t.A.Header,{closeButton:!0,children:(0,S.jsx)(t.A.Title,{children:(0,S.jsx)("span",{className:`${m.title}`,children:"Edit Photo"})})}),(0,S.jsxs)(t.A.Body,{children:[E,(0,S.jsxs)("div",{className:`${m.previewSection}`,children:[(0,S.jsxs)("div",{className:`${m.previewBox}`,children:[(0,S.jsx)("div",{className:(0,c.A)(m.previewBoxImg1,"round"===h?"rounded-circle":"",1===v?m.square:m.rectangle),children:(0,S.jsx)(d.Ay,{image:N.length>0?N[0].preview:null,crop:x,zoom:I,cropShape:h,rotation:A,onCropChange:T,onZoomChange:g,onCropComplete:C,aspect:v,restrictPosition:!1,style:{containerStyle:{width:"100%",height:"100%",position:"relative"},cropAreaStyle:{width:"100%",height:"100%"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}})}),(0,S.jsx)("div",{className:(0,c.A)(m.previewBoxImg2,"round"===h?"rounded-circle":"",1===v?m.square:m.rectangle),children:f.img2&&(0,S.jsx)("img",{src:f.img2,alt:"Preview 2",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,S.jsx)("div",{className:(0,c.A)(m.previewBoxImg3,"round"===h?"rounded-circle":"",1===v?m.square:m.rectangle),children:f.img3&&(0,S.jsx)("img",{src:f.img3,alt:"Preview 3",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,S.jsx)("div",{className:(0,c.A)(m.previewBoxImg4,"round"===h?"rounded-circle":"",1===v?m.square:m.rectangle),children:f.img4&&(0,S.jsx)("img",{src:f.img4,alt:"Preview 4",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,S.jsx)("div",{className:(0,c.A)(m.previewBoxImg5,"round"===h?"rounded-circle":"",1===v?m.square:m.rectangle),children:f.img5&&(0,S.jsx)("img",{src:f.img5,alt:"Preview 5",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),(0,S.jsxs)("div",{className:`${m.previewActions}`,children:[(0,S.jsxs)(u.A.Group,{children:[(0,S.jsx)(u.A.Label,{className:`${m.label}`,children:"Zoom"}),(0,S.jsx)(u.A.Range,{value:I,min:1,max:3,step:.1,className:"custom-range",onChange:e=>g(e.target.value)})]}),(0,S.jsx)("div",{className:"d-flex align-item-center pt-4 ms-4",style:{gap:"8px"},children:(0,S.jsxs)(r.A,{className:"text-button",onClick:()=>{R((e=>(e+90)%360))},children:[(0,S.jsx)(n.A,{color:"#106B99",size:24}),"Rotate"]})})]})]}),(0,S.jsxs)("div",{...w({className:"dropzone d-flex justify-content-center align-items-center flex-column cursor-pointer"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,S.jsx)("input",{...y()}),(0,S.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,S.jsx)(o.A,{})}),(0,S.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,S.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,S.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})]}),(0,S.jsxs)(t.A.Footer,{className:"d-flex justify-content-end",children:[(0,S.jsx)(r.A,{className:"outline-button",onClick:e=>{e.stopPropagation(),_([]),U({}),p(null),l(!1)},children:"Cancel"}),(0,S.jsx)(r.A,{className:"solid-button",onClick:async()=>{const e=await b(),s=function(e,s){const l=atob(e.split(",")[1]),i=new ArrayBuffer(l.length),t=new Uint8Array(i);for(let r=0;r<l.length;r++)t[r]=l.charCodeAt(r);return new Blob([i],{type:s})}(e,"image/jpeg");p({croppedImageBase64:e,croppedImageBlob:s}),l(!1)},children:"Save Photo"})]})]})}},74737:(e,s,l)=>{l.d(s,{_:()=>n});var i=l(568);const t=Object.freeze({ADMIN:"Admin",LOCATION_MANAGER:"Location Manager",GENERAL_MANAGER:"General Manager",DEVELOPER:"Developer",DESIGNER:"Designers",SMM_PR:"SMM/PR"}),r={[t.ADMIN]:{permissions:[i.J.CLIENTS.CREATE,i.J.CLIENTS.READ,i.J.CLIENTS.UPDATE,i.J.CLIENTS.DELETE,i.J.SUPPLIERS.CREATE,i.J.SUPPLIERS.READ,i.J.SUPPLIERS.UPDATE,i.J.SUPPLIERS.DELETE,i.J.EXPENSE.CREATE,i.J.EXPENSE.READ,i.J.EXPENSE.UPDATE,i.J.EXPENSE.DELETE,i.J.INVOICE.CREATE,i.J.INVOICE.READ,i.J.INVOICE.UPDATE,i.J.INVOICE.DELETE,i.J.SETTINGS.SUBSCRIPTION.BUY_BUSINESS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_BUSINESS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_COMPANY_USER_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_WORK_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_WORK_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.ACTIVE_WORK_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_WORK_USER_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_LOCATION_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.REMOVE_LOCATION_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.ACTIVE_INQUIRIES_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_INQUIRIES_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.ACTIVE_ASSETS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_ASSETS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.MANAGE_ASSET_SUBSCRIPTION,i.J.SETTINGS.LOCATION.ADD,i.J.SETTINGS.LOCATION.READ,i.J.SETTINGS.LOCATION.UPDATE,i.J.SETTINGS.LOCATION.DELETE,i.J.SETTINGS.USERS.DESKTOP.ADD,i.J.SETTINGS.USERS.DESKTOP.READ,i.J.SETTINGS.USERS.DESKTOP.DELETE,i.J.SETTINGS.USERS.DESKTOP.UPDATE,i.J.SETTINGS.USERS.DESKTOP.RESTORE,i.J.SETTINGS.USERS.DESKTOP.SHOW_DELETED_USERS,i.J.SETTINGS.USERS.MOBILE_APP.ADD,i.J.SETTINGS.USERS.MOBILE_APP.READ,i.J.SETTINGS.USERS.MOBILE_APP.UPDATE,i.J.SETTINGS.USERS.MOBILE_APP.DISCONNECT_USER,i.J.SETTINGS.USERS.MOBILE_APP.RECONNECT_USER,i.J.SETTINGS.USERS.MOBILE_APP.SHOW_DISCONNECTED_USERS]}},n=function(e,s){let l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!r[e])return!1;const i=r[e].permissions;return Array.isArray(s)?l?s.every((e=>i.includes(e))):s.some((e=>i.includes(e))):i.includes(s)}},74856:(e,s,l)=>{l.d(s,{E:()=>E});var i=l(65043),t=l(84052),r=l(41828),n=l(2028),o=l(4504);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function d(e){var s=function(e,s){if("object"!=a(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var i=l.call(e,s||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==a(s)?s:s+""}function c(e,s,l){return(s=d(s))in e?Object.defineProperty(e,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[s]=l,e}var u={root:function(e){var s=e.props;return(0,o.xW)("p-skeleton p-component",{"p-skeleton-circle":"circle"===s.shape,"p-skeleton-none":"none"===s.animation})}},m=r.x.extend({defaultProps:{__TYPE:"Skeleton",shape:"rectangle",size:null,width:"100%",height:"1rem",borderRadius:null,animation:"wave",style:null,className:null},css:{classes:u,inlineStyles:{root:{position:"relative"}},styles:'\n@layer primereact {\n    .p-skeleton {\n        position: relative;\n        overflow: hidden;\n    }\n    \n    .p-skeleton::after {\n        content: "";\n        animation: p-skeleton-animation 1.2s infinite;\n        height: 100%;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        transform: translateX(-100%);\n        z-index: 1;\n    }\n    \n    .p-skeleton-circle {\n        border-radius: 50%;\n    }\n    \n    .p-skeleton-none::after {\n        animation: none;\n    }\n}\n\n@keyframes p-skeleton-animation {\n    from {\n        transform: translateX(-100%);\n    }\n    to {\n        transform: translateX(100%);\n    }\n}\n'}});function S(e,s){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);s&&(i=i.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),l.push.apply(l,i)}return l}function p(e){for(var s=1;s<arguments.length;s++){var l=null!=arguments[s]?arguments[s]:{};s%2?S(Object(l),!0).forEach((function(s){c(e,s,l[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):S(Object(l)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(l,s))}))}return e}var E=i.memo(i.forwardRef((function(e,s){var l=(0,n.qV)(),a=i.useContext(t.UM),d=m.getProps(e,a),c=m.setMetaData({props:d}),u=c.ptm,S=c.cx,E=c.sx,h=c.isUnstyled;(0,r.j)(m.css.styles,h,{name:"skeleton"});var v=i.useRef(null);i.useImperativeHandle(s,(function(){return{props:d,getElement:function(){return v.current}}}));var N=d.size?{width:d.size,height:d.size,borderRadius:d.borderRadius}:{width:d.width,height:d.height,borderRadius:d.borderRadius},_=l({ref:v,className:(0,o.xW)(d.className,S("root")),style:p(p({},N),E("root")),"aria-hidden":!0},m.getOtherProps(d),u("root"));return i.createElement("div",_)})));E.displayName="Skeleton"},84576:(e,s,l)=>{l.d(s,{A:()=>i});const i={userSettingPage:"users_userSettingPage__KqRqG",userHead:"users_userHead__Qb-45",users_userHead:"users_users_userHead__66zxc",contentwrapmain:"users_contentwrapmain__9EuvG",ellipsis:"users_ellipsis__MtwMP",userImg:"users_userImg__-Ft5y",privilege:"users_privilege__yA6Qo",contentMenuTab:"users_contentMenuTab__Znvft",addUserBut:"users_addUserBut__H4HT5",showDeleteBut:"users_showDeleteBut__YDAwL",appSettingPage:"users_appSettingPage__urt2L",appaction:"users_appaction__vcXFf",connected:"users_connected__jXreM",invited:"users_invited__Rgnv8",disconnected:"users_disconnected__t2YHg",employee:"users_employee__JBQhw",contractor:"users_contractor__W0erB",defaultType:"users_defaultType__kNnsO",selectuserInput:"users_selectuserInput__YZrqN",modal:"users_modal__XmOaj",modalHeader:"users_modalHeader__q7QkG",headerTitle:"users_headerTitle__ZVL6h",circledesignstyle:"users_circledesignstyle__7Fx4h",out:"users_out__HXDgH",lable:"users_lable__Wc5bm",inputText:"users_inputText__U6PZ4",error:"users_error__vuT5H",td:"users_td__d5O9J",hoverShow:"users_hoverShow__+hAKM",borderNone:"users_borderNone__BKq3M",dangerTextButton:"users_dangerTextButton__pvNTe",fileUploadBox:"users_fileUploadBox__SSDRH",uploadedImgBox:"users_uploadedImgBox__Kal3a",uploadedText1:"users_uploadedText1__mtBeo",uploadedText2:"users_uploadedText2__5sLVb",successTextButton:"users_successTextButton__gV-ns",leftBoxParent:"users_leftBoxParent__HuTuY",leftbox:"users_leftbox__xpVNj",leftboxText:"users_leftboxText__T8ElD",active:"users_active__yxWuy"}}}]);
//# sourceMappingURL=3720.71162c5c.chunk.js.map