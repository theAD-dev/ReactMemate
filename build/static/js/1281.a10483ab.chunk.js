"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[1281],{10586:(e,t,s)=>{s.d(t,{$R:()=>r,Bu:()=>i,D3:()=>u,E4:()=>x,JP:()=>a,Rv:()=>d,Wz:()=>h,a_:()=>m,eY:()=>c,ik:()=>p,md:()=>l,oP:()=>g,sr:()=>v});var n=s(31342);const o="https://app.memate.com.au/api/v1",l=async function(e,t){var s;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;const d=(e-1)*t,c=[];c.push(`limit=${t}`),c.push(`offset=${d}`),l&&c.push(`search=${encodeURIComponent(l)}`),a&&c.push(`ordering=${encodeURIComponent(a)}`),i&&c.push("status=not_paid");let u="";var p;null!==r&&void 0!==r&&r.suppliers&&(u=null===r||void 0===r||null===(p=r.suppliers)||void 0===p?void 0:p.map((e=>e.id)).join(","),console.log("Suppliers filter string:",u),u&&c.push(`suppliers=${u}`));let m="";var h;null!==r&&void 0!==r&&r.departments&&(m=null===r||void 0===r||null===(h=r.departments)||void 0===h?void 0:h.map((e=>e.id)).join(","),m&&c.push(`departments=${m}`));let x="";var g;null!==r&&void 0!==r&&r.status&&1===(null===r||void 0===r||null===(s=r.status)||void 0===s?void 0:s.length)?(console.log("Status filter array:",r.status),null===r||void 0===r||null===(g=r.status)||void 0===g||g.forEach((e=>{console.log("Processing status element:",e),"paid"===(null===e||void 0===e?void 0:e.name)?x="paid":"not_paid"===(null===e||void 0===e?void 0:e.name)&&(x="not_paid")})),x&&(console.log("Applied status filter:",x),c.push(`status=${x}`))):null!==r&&void 0!==r&&r.status&&console.log("Status filter not applied - length:",r.status.length,"values:",r.status);if(null!==r&&void 0!==r&&r.date){var v,f,b,j;const e=null===r||void 0===r||null===(v=r.date[0])||void 0===v||null===(f=v.value)||void 0===f?void 0:f[0];if(e){const t=new Date(e),s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");c.push(`date_after=${s}-${n}-${o}`)}const t=null===r||void 0===r||null===(b=r.date[0])||void 0===b||null===(j=b.value)||void 0===j?void 0:j[1];if(t){const e=new Date(t),s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");c.push(`date_before=${s}-${n}-${o}`)}}const y=`${o}/expenses/?${c.join("&")}`;return console.log("Final expenses API URL:",y),(0,n.f)(y,{method:"GET"})},a=async()=>{const e=new URL(`${o}/references/xero-codes/`);return(0,n.f)(e.toString(),{method:"GET"})},i=async()=>{const e=new URL(`${o}/references/projects/expenses/`);return(0,n.f)(e.toString(),{method:"GET"})},r=async e=>{const t=new URL(`${o}${`/expenses/update/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},d=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/expenses/new/`);return(0,n.f)(s.toString(),t)},c=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/expenses/update/${e}/`}`);return(0,n.f)(l.toString(),s)},u=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/expenses/paid/`);return(0,n.f)(s.toString(),t)},p=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/expenses/unpaid/`);return(0,n.f)(s.toString(),t)},m=async e=>{const t={method:"PUT",body:e},s=new URL(`${o}/expenses/to-xero/`);return(0,n.f)(s.toString(),t)},h=async e=>{const t=new URL(`${o}${`/expenses/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},x=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/clients/statement/pdf/`);return(0,n.f)(s.toString(),t)},g=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/clients/statement/send/`);return(0,n.f)(s.toString(),t)},v=async(e,t)=>{const s={method:"PUT",body:{code:t}},l=new URL(`${o}${`/suppliers/service-update/${e}/`}`);return(0,n.f)(l.toString(),s)}},11281:(e,t,s)=>{s.d(t,{A:()=>q,I:()=>W});var n=s(65043),o=s(14282),l=s(13846),a=s(61072),i=s(78602),r=s(88578),d=s(56741),c=s(9634),u=s(56682),p=s(69956),m=s(55850),h=s(75329),x=s(94819),g=s(35690),v=s(66415),f=s(89488),b=s(28261),j=s(47097),y=s(86213),w=s(58387),N=s(670),A=s(54972),S=s(88060),C=s(28676),k=s(74532),$=s(72052),F=s(27932),E=s(93740),R=s(31892),_=s(20288),B=s(56328);const P={newJobTag:"create-job_newJobTag__fPJdn",border:"create-job_border__hGK6q",borderBottom:"create-job_borderBottom__KJ5iU",background:"create-job_background__dGbHa",customLabel:"create-job_customLabel__I8dZw",inputBox:"create-job_inputBox__yF5TW",chooseUserBox:"create-job_chooseUserBox__xDARH",paymentType:"create-job_paymentType__oiVO6",typeBorder:"create-job_typeBorder__O8Hp4",paymentmain:"create-job_paymentmain__SXRTF",customRadio:"create-job_customRadio__OfCn+",fix:"create-job_fix__GX+LF",hours:"create-job_hours__ZBMQO",timetracker:"create-job_timetracker__pDwPP",shift:"create-job_shift__yhUPp",timeFrame:"create-job_timeFrame__V+Ijt",radioLabel:"create-job_radioLabel__RPn7y",RadioButton:"create-job_RadioButton__0hySC",fileBox:"create-job_fileBox__zkj0v",imgBox:"create-job_imgBox__Fi0m-",fileType:"create-job_fileType__kElHf",fileTypeSmall:"create-job_fileTypeSmall__tBXk4",fileNameBox:"create-job_fileNameBox__0Vs4a",deleteBox:"create-job_deleteBox__ZgDq5",openTransition:"create-job_openTransition__KZ-SQ",publishButtonWrapper:"create-job_publishButtonWrapper__A6wis",publishButtonGroup:"create-job_publishButtonGroup__789gt",publishMainButton:"create-job_publishMainButton__vck-W",publishDropdownToggle:"create-job_publishDropdownToggle__FmVdu",publishDropdownMenu:"create-job_publishDropdownMenu__Oy5-D",publishDropdownItem:"create-job_publishDropdownItem__gxdB4"};var L=s(81047),T=s(10586),I=s(38391),U=s(90386),D=s(33296),H=s(58027),M=s(32140),z=s(70579);function W(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2?arguments[2]:void 0;e&&(e=null===(t=e)||void 0===t?void 0:t.toLowerCase());const o={"application/pdf":{name:"PDF",color:"#D92D20"},"application/vnd.ms-excel":{name:"Excel",color:"#22A746"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{name:"Excel",color:"#22A746"},"application/msword":{name:"Word",color:"#2368E1"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{name:"Word",color:"#2368E1"},"image/jpeg":{name:"JPEG",color:"#FFAA00"},"image/png":{name:"PNG",color:"#00ADEF"},"image/gif":{name:"GIF",color:"#F64A8A"},"video/mp4":{name:"MP4",color:"#9C27B0"},"audio/mp3":{name:"MP3",color:"#4CAF50"},"audio/wav":{name:"WAV",color:"#795548"},"text/plain":{name:"Text",color:"#8E8E8E"},"application/zip":{name:"ZIP",color:"#FFD700"},"application/json":{name:"JSON",color:"#22A746"},"image/svg+xml":{name:"SVG",color:"#FF5722"},"application/x-rar-compressed":{name:"RAR",color:"#F44336"},"application/vnd.ms-powerpoint":{name:"PPT",color:"#FF9800"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{name:"PPT",color:"#FF9800"},"application/vnd.ms-publisher":{name:"Publisher",color:"#4CAF50"},"application/x-shockwave-flash":{name:"SWF",color:"#FFEB3B"},"application/x-tar":{name:"TAR",color:"#FFC107"},zip:{name:"ZIP",color:"#FFD700"},rar:{name:"RAR",color:"#F44336"},ppt:{name:"PPT",color:"#FF9800"},pub:{name:"Publisher",color:"#4CAF50"},swf:{name:"SWF",color:"#FFEB3B"},tar:{name:"TAR",color:"#FFC107"},pdf:{name:"PDF",color:"#D92D20"},doc:{name:"Word",color:"#2368E1"},docx:{name:"Word",color:"#2368E1"},xls:{name:"Excel",color:"#22A746"},xlsx:{name:"Excel",color:"#22A746"},jpg:{name:"JPEG",color:"#FFAA00"},jpeg:{name:"JPEG",color:"#FFAA00"},png:{name:"PNG",color:"#00ADEF"},gif:{name:"GIF",color:"#F64A8A"},mp4:{name:"MP4",color:"#9C27B0"},mp3:{name:"MP3",color:"#4CAF50"},wav:{name:"WAV",color:"#795548"},txt:{name:"Text",color:"#8E8E8E"},json:{name:"JSON",color:"#22A746"},svg:{name:"SVG",color:"#FF5722"},pptx:{name:"PPT",color:"#FF9800"}};var l;"black"===n&&(o[e]={name:(null===(l=o[e])||void 0===l?void 0:l.name)||"Unknown",color:"#000000"});const a=o[e]||{name:"Unknown",color:"#000000"};return(0,z.jsxs)("div",{className:P.imgBox,children:[(0,z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 32 41",fill:"none",children:[(0,z.jsx)("path",{d:"M0 4.5874C0 2.37826 1.79086 0.587402 4 0.587402H20L32 12.5874V36.5874C32 38.7965 30.2091 40.5874 28 40.5874H4C1.79086 40.5874 0 38.7965 0 36.5874V4.5874Z",fill:a.color}),(0,z.jsx)("path",{opacity:"0.3",d:"M20 0.587402L32 12.5874H24C21.7909 12.5874 20 10.7965 20 8.5874V0.587402Z",fill:"white"})]}),(0,z.jsx)("div",{className:`${P.fileType} ${32!=s?P.fileTypeSmall:""}`,children:a.name})]})}const q=e=>{var t;let{visible:s,setVisible:q,setRefetch:O=()=>{},workerId:G,isEditMode:J=!1,jobData:V=null,jobId:Z=null,jobProjectId:K,projectReference:X,refetch:Q=()=>{},onDuplicate:Y=null,startInDuplicateMode:ee=!1}=e;const te=localStorage.getItem("access_token"),se=(0,n.useRef)(null),ne=(0,n.useRef)(!1),oe=(0,n.useRef)(!1),[le,ae]=(0,n.useState)(ee),[ie,re]=(0,n.useState)(!1),de=(0,n.useRef)(null),ce=n.useMemo((()=>window.location.href),[]),ue=n.useMemo((()=>new URL(ce)),[ce]),pe=n.useMemo((()=>new URLSearchParams(ue.search)),[ue]),[me,he]=(0,n.useState)(""),[xe,ge]=(0,n.useState)(!1),[ve,fe]=(0,n.useState)(!1),[be,je]=(0,n.useState)(!1),[ye,we]=(0,n.useState)(""),[Ne,Ae]=(0,n.useState)(""),[Se,Ce]=(0,n.useState)(""),[ke,$e]=(0,n.useState)({}),[Fe,Ee]=(0,n.useState)("0.00"),[Re,_e]=(0,n.useState)(""),[Be,Pe]=(0,n.useState)(""),[Le,Te]=(0,n.useState)("Weekly"),[Ie,Ue]=(0,n.useState)([]),[De,He]=(0,n.useState)([]),[Me,ze]=(0,n.useState)(""),[We,qe]=(0,n.useState)([]),[Oe,Ge]=(0,n.useState)(""),[Je,Ve]=(0,n.useState)(""),[Ze,Ke]=(0,n.useState)(""),[Xe,Qe]=(0,n.useState)(!1),[Ye,et]=(0,n.useState)([]),{getRootProps:tt,getInputProps:st}=(0,f.VB)({onDrop:e=>{const t=e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e),progress:0,isPending:!0,fileId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`})));et((e=>[...e,...t]))}}),[nt,ot]=(0,n.useState)("2"),[lt,at]=(0,n.useState)("1"),[it,rt]=(0,n.useState)(0),dt=new Date,[ct,ut]=(0,n.useState)(dt),[pt,mt]=(0,n.useState)(""),[ht,xt]=(0,n.useState)("1.00"),[gt,vt]=(0,n.useState)("1.00"),[ft,bt]=(0,n.useState)({}),jt=(0,b.I)({queryKey:["jobTemplate"],queryFn:L.tC}),yt=(0,b.I)({queryKey:["templateId",me],queryFn:()=>(0,L.iS)(me),enabled:!!me,retry:1}),wt=(0,b.I)({queryKey:["mobileuser"],queryFn:U.tD}),Nt=(0,b.I)({queryKey:["getProjectsList"],queryFn:T.Bu,staleTime:0}),At=e=>(0,z.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,z.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:"openJob"===(null===e||void 0===e?void 0:e.image)?(0,z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 20 20",fill:"none",children:[(0,z.jsx)("path",{d:"M7.14307 6.57171C6.82748 6.57171 6.57164 6.82754 6.57164 7.14314C6.57164 7.45873 6.82748 7.71457 7.14307 7.71457H12.8574C13.1729 7.71457 13.4288 7.45873 13.4288 7.14314C13.4288 6.82754 13.1729 6.57171 12.8574 6.57171H7.14307Z",fill:"#475467"}),(0,z.jsx)("path",{d:"M7.14307 8.85742C6.82748 8.85742 6.57164 9.11326 6.57164 9.42885C6.57164 9.74444 6.82748 10.0003 7.14307 10.0003H10.5716C10.8872 10.0003 11.1431 9.74444 11.1431 9.42885C11.1431 9.11326 10.8872 8.85742 10.5716 8.85742H7.14307Z",fill:"#475467"}),(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 3.14314C11.2626 3.14314 12.2859 2.11979 12.2859 0.857422H15.1431C16.0898 0.857422 16.8574 1.62493 16.8574 2.57171V17.4289C16.8574 18.3756 16.0898 19.1431 15.1431 19.1431H4.85735C3.91058 19.1431 3.14307 18.3756 3.14307 17.4289V2.57171C3.14307 1.62493 3.91058 0.857422 4.85735 0.857422H7.7145C7.7145 2.11979 8.73784 3.14314 10.0002 3.14314ZM10.0002 4.28599C11.493 4.28599 12.763 3.33193 13.2337 2.00028H15.1431C15.4587 2.00028 15.7145 2.25612 15.7145 2.57171V17.4289C15.7145 17.7444 15.4587 18.0003 15.1431 18.0003H4.85735C4.54176 18.0003 4.28592 17.7444 4.28592 17.4289V2.57171C4.28592 2.25612 4.54176 2.00028 4.85735 2.00028H6.76673C7.2374 3.33193 8.50739 4.28599 10.0002 4.28599Z",fill:"#475467"})]}):(0,z.jsx)(H.A,{photo:null===e||void 0===e?void 0:e.image,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),(0,z.jsx)("div",{children:e.label})]}),St=(e,t)=>e?(0,z.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,z.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:"openJob"===(null===e||void 0===e?void 0:e.image)?(0,z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 20 20",fill:"none",children:[(0,z.jsx)("path",{d:"M7.14307 6.57171C6.82748 6.57171 6.57164 6.82754 6.57164 7.14314C6.57164 7.45873 6.82748 7.71457 7.14307 7.71457H12.8574C13.1729 7.71457 13.4288 7.45873 13.4288 7.14314C13.4288 6.82754 13.1729 6.57171 12.8574 6.57171H7.14307Z",fill:"#475467"}),(0,z.jsx)("path",{d:"M7.14307 8.85742C6.82748 8.85742 6.57164 9.11326 6.57164 9.42885C6.57164 9.74444 6.82748 10.0003 7.14307 10.0003H10.5716C10.8872 10.0003 11.1431 9.74444 11.1431 9.42885C11.1431 9.11326 10.8872 8.85742 10.5716 8.85742H7.14307Z",fill:"#475467"}),(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 3.14314C11.2626 3.14314 12.2859 2.11979 12.2859 0.857422H15.1431C16.0898 0.857422 16.8574 1.62493 16.8574 2.57171V17.4289C16.8574 18.3756 16.0898 19.1431 15.1431 19.1431H4.85735C3.91058 19.1431 3.14307 18.3756 3.14307 17.4289V2.57171C3.14307 1.62493 3.91058 0.857422 4.85735 0.857422H7.7145C7.7145 2.11979 8.73784 3.14314 10.0002 3.14314ZM10.0002 4.28599C11.493 4.28599 12.763 3.33193 13.2337 2.00028H15.1431C15.4587 2.00028 15.7145 2.25612 15.7145 2.57171V17.4289C15.7145 17.7444 15.4587 18.0003 15.1431 18.0003H4.85735C4.54176 18.0003 4.28592 17.7444 4.28592 17.4289V2.57171C4.28592 2.25612 4.54176 2.00028 4.85735 2.00028H6.76673C7.2374 3.33193 8.50739 4.28599 10.0002 4.28599Z",fill:"#475467"})]}):(0,z.jsx)(H.A,{photo:null===e||void 0===e?void 0:e.image,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),(0,z.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.label})]}):(0,z.jsx)("span",{children:t.placeholder}),Ct=()=>{he(""),ge(!1),fe(!1),je(!1),we(""),Ae(""),Ce(""),$e({}),Ee("0.00"),_e(""),Pe(""),Te("Weekly"),Ue([]),He([]),ze(""),qe([]),Ge(""),Ve(""),Ke(""),Qe(!1),et([]),ot("2"),rt(0),at("1"),ut(dt),mt(""),xt("1.00"),vt("1.00"),bt({}),ae(!1),oe.current=!1},kt=()=>{et([]),Ce(""),$e({}),Ee("0.00"),ae(!0),oe.current||(oe.current=!0,B.oR.info("Duplicating job - assign a worker and save as new job")),Y&&Y()};(0,n.useEffect)((()=>{ee&&s&&(et([]),Ce(""),$e({}),Ee("0.00"),ae(!0),oe.current||(oe.current=!0,B.oR.info("Duplicating job - assign a worker and save as new job")))}),[ee,s]),(0,n.useEffect)((()=>{const e=e=>{de.current&&!de.current.contains(e.target)&&re(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,n.useEffect)((()=>{if(null!==yt&&void 0!==yt&&yt.data){var e,t;const s=(null===yt||void 0===yt||null===(e=yt.data)||void 0===e?void 0:e.title)||"";we(s.substring(0,50)),Ae((null===yt||void 0===yt||null===(t=yt.data)||void 0===t?void 0:t.description)||""),bt((e=>({...e,jobReference:!1}))),bt((e=>({...e,description:!1})))}}),[null===yt||void 0===yt?void 0:yt.data]),(0,n.useEffect)((()=>{const e=pe.get("projectId"),t=pe.get("reference");t&&(we(t),ue.searchParams.delete("reference"),window.history.replaceState({},"",ue)),e&&(q(!0),Pe(+e),ue.searchParams.delete("projectId"),window.history.replaceState({},"",ue))}),[q,pe,ue]);const $t=async(e,t)=>{const s=e.fileId||e.name;try{const n=await y.A.put(t,e,{headers:{"Content-Type":""},onUploadProgress:e=>{const n=Math.round(e.loaded/e.total*100);et((e=>e.map((e=>(e.fileId||e.name)===s?Object.assign(e,{progress:n,url:t}):e))))}});return et((e=>e.map((e=>(e.fileId||e.name)===s?Object.assign(e,{progress:100,uploaded:!0,isPending:!1}):e)))),n}catch(n){let t="Upload failed";return t=n.response?403===n.response.status?"Permission denied (403 Forbidden)":`Server error: ${n.response.status}`:n.request?"No response from server":n.message,console.error(`Error uploading ${e.name}:`,t),et((e=>e.map((e=>(e.fileId||e.name)===s?Object.assign(e,{progress:0,error:!0,errorMessage:t,uploadFailed:!0,isPending:!1}):e)))),{error:!0,message:t}}},Ft=(0,j.n)({mutationFn:e=>(0,I.CE)(Z,e),onSuccess:(e,t)=>{B.oR.success("File deleted successfully"),et((e=>e.filter((e=>e.attachmentId!==t))))},onError:()=>{B.oR.error("Failed to delete file")}}),Et=e=>{const t=e.fileId||e.name;e.isExisting&&e.attachmentId?Ft.mutate(e.attachmentId):et((e=>e.filter((e=>(e.fileId||e.name)!==t))))},Rt=(0,j.n)({mutationFn:e=>le?(0,I.El)(e):J&&Z?(0,I.lh)(Z,e):(0,I.El)(e),onSuccess:async e=>{const t=J&&!le?Z:e.id;Ye.filter((e=>!e.isExisting&&e.isPending)).length>0&&(await(async e=>{const t=Ye.filter((e=>!e.isExisting&&e.isPending));if(!t.length)return;if(!e)return B.oR.error("Job id not found");let s=0,n=0;for(const l of t)try{const t=await y.A.post(`https://app.memate.com.au/api/v1/jobs/attachments/url/${e}/`,{filename:l.name},{headers:{Authorization:`Bearer ${te}`}}),{url:o}=t.data;if(!o){console.error(`No URL returned for file: ${l.name}`),n++;continue}const a=await $t(l,o);a&&!a.error?s++:n++}catch(o){console.error("Error uploading file:",l.name,o);const e=l.fileId||l.name;et((t=>t.map((t=>(t.fileId||t.name)===e?Object.assign(t,{progress:0,error:!0,errorMessage:o.message||"Failed to get upload URL",uploadFailed:!0,isPending:!1}):t)))),n++}s>0&&B.oR.success(`Successfully uploaded ${s} file(s)`),n>0&&B.oR.error(`Failed to upload ${n} file(s)`)})(t),await(async e=>{let t=[];for(const o of Ye){var s;if(o.isExisting||o.error||!o.url)continue;let e={name:null===o||void 0===o?void 0:o.name,link:(null===o||void 0===o||null===(s=o.url)||void 0===s?void 0:s.split("?")[0])||"",size:null===o||void 0===o?void 0:o.size};t.push(e)}if(0!==t.length)try{const s=await y.A.post(`https://app.memate.com.au/api/v1/jobs/attachments/${e}/`,{attachments:t||[]},{headers:{Authorization:`Bearer ${te}`}});console.log("response",s)}catch(n){console.error("Error uploading file:",n),B.oR.error("Failed to update attachments in DB. Please try again.")}})(t)),V&&Q(),O((e=>!e));const s=le?"duplicated":J?"updated":"created";if(B.oR.success(`Job ${s} successfully`),ne.current)return ne.current=!1,et([]),Ce(""),$e({}),Ee("0.00"),ae(!0),B.oR.info("Duplicating job - assign a worker and save as new job"),void(se.current=null);q(!1),Ct(),se.current=null},onError:e=>{se.current=null,console.error(`Error ${J?"updating":"creating"} job:`,e),B.oR.error(`Failed to ${J?"update":"create"} job. Please try again.`)}}),_t=e=>{const t={jobReference:!1,description:!1,userId:!1,type:!1,cost:!1,duration:!1,time_type:!1,start:!1,end:!1,projectId:!1},s={};if(ye?s.short_description=ye:t.jobReference=!0,Ne&&(s.long_description=Ne),!Se&&e?t.userId=!0:Se&&"0"!=Se&&(s.worker=Se),nt?s.type=nt:t.type=!0,!ht||Number(ht)<=0?t.duration=!0:ht&&(s.duration=+ht),lt?s.time_type=lt:t.time_type=!0,ct?s.start_date=new Date(ct).toISOString():t.start=!0,"1"===lt||pt?pt&&(s.end_date=new Date(pt).toISOString()):t.end=!0,"1"!==lt||"3"!==nt||gt){if("1"===lt&&"3"===nt&&gt){const e=gt||0,t=24*(e>0?(ht||0)/e:0);s.end_date=new Date(new Date(ct).getTime()+60*t*60*1e3).toISOString()}}else t.dayShiftHours=!0;if(Be){var n;const e=null===Nt||void 0===Nt||null===(n=Nt.data)||void 0===n?void 0:n.find((e=>e.id===Be));e&&(s.project=e.unique_id)}"2"!==nt||it&&"0.00"!=it?"2"===nt?s.cost=it:s.duration&&Fe&&(s.cost=parseFloat(+s.duration*+Fe).toFixed(2)):t.cost=!0,Ze&&(s.project_photos=Ze),s.show_project_attachments=Xe,s.published=e,se.current=e,bt(t),console.log("payload: ",s),Object.values(t).includes(!0)||Rt.mutate(s)},Bt=(0,n.useCallback)((e=>{var t,s;let n=null===wt||void 0===wt||null===(t=wt.data)||void 0===t||null===(s=t.users)||void 0===s?void 0:s.find((t=>t.id===e)),o={7:"WEEK",14:"TWO_WEEKS",28:"FOUR_WEEKS",1:"MONTH"};n?(Ee(parseFloat((null===n||void 0===n?void 0:n.hourly_rate)||0).toFixed(2)),$e({hourlyRate:parseFloat((null===n||void 0===n?void 0:n.hourly_rate)||0).toFixed(2),paymentCycle:o[null===n||void 0===n?void 0:n.payment_cycle]||"",image:(null===n||void 0===n?void 0:n.photo)||"",has_photo:null===n||void 0===n?void 0:n.has_photo,name:`${n.first_name} ${n.last_name}`})):Ee(0)}),[null===wt||void 0===wt||null===(t=wt.data)||void 0===t?void 0:t.users]);return(0,n.useEffect)((()=>{G&&(Ce(+G||"0"),Bt(+G||""))}),[G,Bt]),(0,n.useEffect)((()=>{K&&Pe(+K),X&&we(X)}),[K,X]),(0,n.useEffect)((()=>{if(J&&V&&null!==Nt&&void 0!==Nt&&Nt.data){if(we(V.short_description||""),Ae(V.long_description||""),V.worker&&!ee&&(Ce(V.worker.id),Bt(V.worker.id)),V.project){var e;const t=null===Nt||void 0===Nt||null===(e=Nt.data)||void 0===e?void 0:e.find((e=>e.unique_id===V.project.unique_id));Pe((null===t||void 0===t?void 0:t.id)||"")}if(ot(V.type||"2"),rt(V.cost||0),at(V.time_type||""),xt(V.duration||""),V.start_date){const e=new Date(1e3*+V.start_date);ut(e)}if(V.end_date){const e=new Date(1e3*+V.end_date);mt(e)}const t=new Date(1e3*+V.start_date),s=(new Date(1e3*+V.end_date)-t)/864e5,n=Number(V.duration)||0,o=s>0?Math.round(n/s*100)/100:0;vt(o.toFixed(2)),Ke(V.project_photos||"3"),Qe(V.show_project_attachments||!1),V.attachments&&V.attachments.length>0&&!ee&&et(V.attachments.map(((e,t)=>{var s,n;return{name:e.name,size:e.size,url:e.link,type:(null===(s=e.name)||void 0===s||null===(n=s.split(".").pop())||void 0===n?void 0:n.toLowerCase())||"",progress:100,isExisting:!0,isPending:!1,fileId:`existing-${e.id||t}`,attachmentId:e.id}})))}}),[J,V,Bt,null===Nt||void 0===Nt?void 0:Nt.data,ee]),(0,n.useEffect)((()=>{if(null!==wt&&void 0!==wt&&wt.data&&Se&&("1"===lt&&"2"===nt||"T"===lt&&"4"===nt)){var e;const t=null===wt||void 0===wt||null===(e=wt.data)||void 0===e?void 0:e.users.find((e=>e.id===Se));if(t){let e=it/(null===t||void 0===t?void 0:t.hourly_rate);xt(parseFloat(e).toFixed(2))}}if("0"===Se&&+Fe&&("1"===lt&&"2"===nt||"T"===lt&&"4"===nt)){xt(parseFloat(it/Fe).toFixed(2))}}),[it,null===wt||void 0===wt?void 0:wt.data,Se,lt,nt,Fe]),(0,n.useEffect)((()=>{"4"===nt&&at("T")}),[nt]),(0,z.jsx)(_.B,{visible:s,position:"right",onHide:()=>{q(!1),Ct()},modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{var t,s,n,f,b;let{closeIconRef:j,hide:y}=e;return(0,z.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,z.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"12px"},children:[(0,z.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(!J||le)&&(0,z.jsx)("div",{style:{position:"relative",textAlign:"start"},children:(0,z.jsx)(S.m,{options:jt&&(null===(t=jt.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:`${e.name}`}))))||[],className:(0,w.A)(P.dropdownSelect,"dropdown-height-fixed","outline-none"),style:{height:"44px",width:le?"450px":"606px"},placeholder:"Select template",onChange:e=>{he(e.value)},value:me,loading:null===jt||void 0===jt?void 0:jt.isFetching,filter:!0,filterInputAutoFocus:!0})}),J&&!le&&(0,z.jsxs)("h2",{className:"mb-0",style:{fontSize:"18px",fontWeight:"500"},children:["Edit Job #",Z]}),le&&(0,z.jsxs)("div",{className:"d-flex align-items-center gap-2",style:{background:"#EBF8FF",padding:"6px 12px",borderRadius:"6px"},children:[(0,z.jsx)(r.A,{size:14,color:"#0E7490"}),(0,z.jsx)("span",{style:{fontSize:"13px",fontWeight:500,color:"#0E7490"},children:"Duplicating Job"})]})]}),(0,z.jsx)("span",{children:(0,z.jsx)(o.A,{type:"button",className:"text-button",ref:j,onClick:e=>y(e),children:(0,z.jsx)(d.A,{size:24,color:"#667085"})})})]}),(0,z.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 62px - 102px)",overflow:"auto"},children:[(0,z.jsxs)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:[(0,z.jsxs)(l.A.Body,{className:(0,w.A)("d-flex justify-content-between align-items-center",P.borderBottom),children:[(0,z.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Job Details"}),(0,z.jsx)("div",{className:(0,w.A)(P.newJobTag,"mb-0"),children:J&&!le?"Edit Job":"New Job"})]}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0"),children:[(0,z.jsxs)("div",{className:"form-group mb-3",children:[(0,z.jsxs)("label",{className:(0,w.A)(P.customLabel),children:["Job Reference",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsx)("div",{style:{position:"relative"},children:(0,z.jsxs)(C.C,{children:[(0,z.jsx)(k.m,{children:(null===yt||void 0===yt?void 0:yt.isFetching)&&(0,z.jsx)(E.p,{style:{width:"20px",height:"20px",position:"relative",top:"-5px"}})}),(0,z.jsx)($.S,{value:ye,className:(0,w.A)(P.inputBox,"w-100"),onChange:e=>{const t=e.target.value;t.length<=50&&(we(t),t&&bt((e=>({...e,jobReference:!1}))))},maxLength:50,placeholder:"Enter job reference"})]})}),(0,z.jsxs)("div",{className:"d-flex justify-content-between",children:[(null===ft||void 0===ft?void 0:ft.jobReference)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Job reference is required"}),(0,z.jsxs)("small",{className:"text-muted ms-auto",children:[ye.length,"/50"]})]})]}),(0,z.jsxs)("div",{className:"form-group mb-3",children:[(0,z.jsx)("label",{className:(0,w.A)(P.customLabel),children:"Job Description"}),(0,z.jsx)("div",{style:{position:"relative"},children:(0,z.jsxs)(C.C,{children:[(0,z.jsx)(k.m,{children:(null===yt||void 0===yt?void 0:yt.isFetching)&&(0,z.jsx)(E.p,{style:{width:"20px",height:"20px",position:"relative",top:"-5px"}})}),(0,z.jsx)(F.Z,{value:Ne,className:(0,w.A)(P.inputBox,"w-100 outline-none"),onChange:e=>{Ae(e.target.value),e.target.value&&bt((e=>({...e,description:!1})))},style:{height:"126px"},placeholder:"Enter a description..."})]})}),(null===ft||void 0===ft?void 0:ft.description)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Description is required"})]})]})]}),(0,z.jsx)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0 py-4"),children:[(0,z.jsx)("h1",{className:"font-16 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Assigned to"}),(0,z.jsxs)(a.A,{children:[(0,z.jsx)(i.A,{sm:5,className:"d-flex align-items-center",children:(0,z.jsxs)("div",{style:{position:"relative",textAlign:"start"},children:[(0,z.jsx)("label",{className:(0,w.A)(P.customLabel),children:"Choose User"}),(0,z.jsx)(S.m,{options:[{value:"0",label:"Open job",image:"openJob",has_photo:!1},...(null===wt||void 0===wt||null===(s=wt.data)||void 0===s||null===(n=s.users)||void 0===n||null===(f=n.filter((e=>"disconnected"!==e.status)))||void 0===f?void 0:f.map((e=>({value:e.id,label:`${e.first_name} ${e.last_name}`,image:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo}))))||[]],itemTemplate:At,className:(0,w.A)(P.dropdownSelect,"dropdown-height-fixed","outline-none"),style:{height:"44px",width:"245px"},placeholder:"Select user",onChange:e=>{Ce(e.value),Bt(e.value),e.value&&bt((e=>({...e,userId:!1})))},value:Se,valueTemplate:St,loading:null===wt||void 0===wt?void 0:wt.isFetching,scrollHeight:"350px",filter:!0,filterInputAutoFocus:!0,showClear:!!Se}),(null===ft||void 0===ft?void 0:ft.userId)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Please assign a user before publishing"})]})}),(0,z.jsx)(i.A,{sm:7,children:Se&&"0"!=Se&&(0,z.jsxs)(a.A,{className:(0,w.A)(P.chooseUserBox,"flex-nowrap"),children:[(0,z.jsx)(i.A,{sm:2,className:"p-0",children:(0,z.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"62px",height:"62px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,z.jsx)(H.A,{photo:null===ke||void 0===ke?void 0:ke.image,has_photo:null===ke||void 0===ke?void 0:ke.has_photo,is_business:!1,size:40})})}),(0,z.jsxs)(i.A,{sm:5,className:"pe-0 ps-0",children:[(0,z.jsx)("label",{className:(0,w.A)(P.customLabel,"text-nowrap"),children:(null===ke||void 0===ke?void 0:ke.name)||"-"}),(0,z.jsx)("div",{style:{background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center"},children:"Employee"})]}),(0,z.jsxs)(i.A,{sm:5,className:"",children:[(0,z.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,z.jsx)("div",{style:{width:"16px",height:"16px",background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"$"}),(0,z.jsxs)("span",{children:[(null===ke||void 0===ke?void 0:ke.hourlyRate)||"-"," AUD"]})]}),(0,z.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,z.jsx)("div",{style:{width:"16px",height:"16px",background:"#EBF8FF",border:"1px solid #A3E0FF",borderRadius:"23px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,z.jsx)(c.A,{color:"#158ECC",size:16})}),(0,z.jsx)("span",{children:(null===ke||void 0===ke?void 0:ke.paymentCycle)||"-"})]})]})]})})]})]})}),(0,z.jsxs)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:[(0,z.jsx)(l.A.Body,{className:(0,w.A)(P.borderBottom),children:(0,z.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Time / Money"})}),(0,z.jsx)(l.A.Header,{className:(0,w.A)(P.background,"border-0 pt-2",P.borderBottom),children:(0,z.jsxs)("div",{className:P.paymentType,children:[(0,z.jsx)("label",{className:(0,w.A)(P.lable),children:"Payment Type"}),(0,z.jsxs)("div",{className:P.paymentmain,children:[(0,z.jsxs)("div",{className:`flex align-items-center ${P.RadioButton}`,children:[(0,z.jsx)("input",{type:"radio",id:"fix",name:"paymentype",value:"2",onChange:e=>{ot(e.target.value),"2"===e.target.value&&bt((e=>({...e,type:!1})))},checked:"2"===nt,className:P.customRadio}),(0,z.jsx)("label",{htmlFor:"fix",className:(0,w.A)(P.radioLabel,P.fix),children:"Fix"})]}),(0,z.jsx)("span",{children:"OR"}),(0,z.jsxs)("div",{className:`flex align-items-center ${P.RadioButton}`,children:[(0,z.jsx)("input",{type:"radio",id:"hours",name:"paymentype",value:"3",onChange:e=>{ot(e.target.value),"3"===e.target.value&&bt((e=>({...e,type:!1})))},checked:"3"===nt,className:P.customRadio}),(0,z.jsx)("label",{htmlFor:"hours",className:(0,w.A)(P.radioLabel,P.hours),children:"Hours"})]}),(0,z.jsx)("span",{children:"OR"}),(0,z.jsxs)("div",{className:`flex align-items-center ${P.RadioButton}`,children:[(0,z.jsx)("input",{type:"radio",id:"timetracker",name:"paymentype",value:"4",onChange:e=>{ot(e.target.value),"4"===e.target.value&&bt((e=>({...e,type:!1})))},checked:"4"===nt,className:P.customRadio}),(0,z.jsx)("label",{htmlFor:"timetracker",className:(0,w.A)(P.radioLabel,P.timetracker),children:"Time Tracker"})]})]}),(null===ft||void 0===ft?void 0:ft.type)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Payment Type is required"}),"2"===nt?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable,"mt-4 mb-2"),children:["Payment",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsxs)(C.C,{iconPosition:"left",children:[(0,z.jsx)(k.m,{children:(0,z.jsx)("span",{style:{position:"relative",top:"-4px"},children:"$"})}),(0,z.jsx)($.S,{value:it,onChange:e=>{rt(e.target.value),e.target.value&&bt((e=>({...e,cost:!1})))},keyfilter:"num",onBlur:e=>{var t;return rt(parseFloat((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||0).toFixed(2))},style:{paddingLeft:"28px",width:"230px"},className:(0,w.A)(P.inputBox,"outline-none"),placeholder:"20"})]}),(null===ft||void 0===ft?void 0:ft.cost)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Payment is required and must be greater than zero."})]}):(0,z.jsxs)("div",{style:{width:"fit-content"},children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable,"mt-4 mb-2 d-block"),children:["3"===nt?"Hours":"Time Estimation",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsxs)(C.C,{iconPosition:"left",children:[(0,z.jsx)(k.m,{children:(0,z.jsx)("span",{style:{position:"relative",top:"-4px"},children:"H"})}),(0,z.jsx)($.S,{value:ht,onChange:e=>{xt(e.target.value),vt(e.target.value),e.target.value&&bt((e=>({...e,duration:!1})))},keyfilter:"num",onBlur:e=>{var t;xt(parseFloat((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||0).toFixed(2)),vt(parseFloat(e.target.value||0).toFixed(2))},style:{paddingLeft:"28px",width:"150px"},className:(0,w.A)(P.inputBox,"outline-none"),placeholder:"1.0"})]}),(null===ft||void 0===ft?void 0:ft.duration)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"3"===nt?"Hours is required":"Time Estimation is required"})]})]})}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0"),children:[(0,z.jsxs)("div",{className:P.paymentType,children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable),children:["Time",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsxs)("div",{className:P.paymentmain,children:["4"!==nt&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:`flex align-items-center ${P.RadioButton}`,children:[(0,z.jsx)("input",{type:"radio",id:"shift",name:"timetype",value:"1",onChange:e=>{at(e.target.value),"1"===e.target.value&&bt((e=>({...e,time_type:!1})))},checked:"1"===lt,className:P.customRadio}),(0,z.jsx)("label",{htmlFor:"shift",className:(0,w.A)(P.radioLabel,P.shift),children:"Shift"})]}),(0,z.jsx)("span",{children:"OR"})]}),(0,z.jsxs)("div",{className:`flex align-items-center ${P.RadioButton}`,children:[(0,z.jsx)("input",{type:"radio",id:"timeframe",name:"timetype",value:"T",onChange:e=>{at(e.target.value),"T"===e.target.value&&bt((e=>({...e,time_type:!1})))},checked:"T"===lt,className:P.customRadio}),(0,z.jsx)("label",{htmlFor:"timeframe",className:(0,w.A)(P.radioLabel,P.timeFrame),children:"Time Frame"})]})]}),(null===ft||void 0===ft?void 0:ft.time_type)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Time type is required"})]}),(0,z.jsxs)("div",{className:"d-flex gap-2",children:[(0,z.jsxs)("div",{className:"form-group",children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable,"mt-4 mb-2 d-block"),children:["Starts",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsx)(M.s,{value:ct,onChange:e=>{ut(e.value),e.value&&bt((e=>({...e,start:!1})))},placeholder:"17 Jun 2021",dateFormat:"dd M yy",style:{height:"46px",width:"230px",overflow:"hidden"},icon:(0,z.jsx)(c.A,{color:"#667085",size:20}),className:(0,w.A)(P.inputBox,"p-0 outline-none"),hourFormat:"24",popupId:"start-time",onClearError:()=>bt((e=>({...e,start:!1})))}),(null===ft||void 0===ft?void 0:ft.start)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Start is required"})]}),"1"!==lt&&(0,z.jsxs)("div",{className:"form-group",children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable,"mt-4 mb-2 d-block"),children:["End",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsx)(M.s,{value:pt,onChange:e=>{mt(e.value),e.value&&bt((e=>({...e,end:!1})))},placeholder:"20 Jun 2021",dateFormat:"dd M yy",style:{height:"46px",width:"230px",overflow:"hidden"},icon:(0,z.jsx)(c.A,{color:"#667085",size:20}),className:(0,w.A)(P.inputBox,"p-0 outline-none"),hourFormat:"24",popupId:"end-time",onClearError:()=>bt((e=>({...e,end:!1})))}),(null===ft||void 0===ft?void 0:ft.end)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"End is required"})]}),"2"===nt&&"T"!==lt?(0,z.jsxs)("div",{style:{width:"fit-content"},children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable,"mt-4 mb-2 d-block"),children:["Hours",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsxs)(C.C,{iconPosition:"right",children:[(0,z.jsx)(k.m,{children:(0,z.jsx)(u.A,{color:"#667085",size:20,style:{position:"relative",top:"-5px"}})}),(0,z.jsx)($.S,{value:ht,onChange:e=>xt(e.target.value),keyfilter:"num",onBlur:e=>{var t;return xt(parseFloat((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||0).toFixed(2))},style:{paddingLeft:"12px",width:"150px"},className:(0,w.A)(P.inputBox,"outline-none"),placeholder:"1.0"})]}),(null===ft||void 0===ft?void 0:ft.duration)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Hours is required"})]}):"1"===lt||"1"!==lt&&"4"===nt?(0,z.jsxs)("div",{style:{width:"fit-content"},children:[(0,z.jsxs)("label",{className:(0,w.A)(P.lable,"mt-4 mb-2 d-block"),children:["Hours",(0,z.jsx)("span",{className:"required",children:"*"})]}),(0,z.jsxs)(C.C,{iconPosition:"right",children:[(0,z.jsx)(k.m,{children:(0,z.jsx)(u.A,{color:"#667085",size:20,style:{position:"relative",top:"-5px"}})}),(0,z.jsx)($.S,{value:gt,onChange:e=>vt(e.target.value),keyfilter:"num",onBlur:e=>{var t;return vt(parseFloat((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||0).toFixed(2))},style:{paddingLeft:"12px",width:"150px"},className:(0,w.A)(P.inputBox,"outline-none"),placeholder:"1.0"})]}),(null===ft||void 0===ft?void 0:ft.dayShiftHours)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Hours is required"})]}):""]})]})]}),(0,z.jsxs)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:[(0,z.jsx)(l.A.Body,{className:(0,w.A)(P.borderBottom),children:(0,z.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Link to Project"})}),(0,z.jsx)(l.A.Header,{className:(0,w.A)(P.background,"border-0",P.borderBottom),children:(0,z.jsxs)("div",{style:{position:"relative",textAlign:"start"},children:[(0,z.jsx)("label",{className:(0,w.A)(P.customLabel),children:"Project"}),(0,z.jsx)(S.m,{options:Nt&&(null===(b=Nt.data)||void 0===b?void 0:b.map((e=>({value:e.id,label:`${e.number}: ${e.reference}`}))))||[],className:(0,w.A)(P.dropdownSelect,"dropdown-height-fixed","outline-none","mb-3"),style:{height:"44px",width:"100%"},placeholder:"Select project",onChange:e=>{Pe(e.value),e.value&&bt((e=>({...e,projectId:!1})))},value:Be,loading:null===Nt||void 0===Nt?void 0:Nt.isFetching,scrollHeight:"400px",filter:!0,filterInputAutoFocus:!0,showClear:!!Be,panelStyle:{maxHeight:"400px",width:"591px"}}),(null===ft||void 0===ft?void 0:ft.projectId)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Project is required"})]})})]}),(0,z.jsxs)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:[(0,z.jsx)(l.A.Body,{className:(0,w.A)(P.borderBottom,"cursor-pointer"),onClick:()=>ge(!xe),children:(0,z.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,z.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Set to repeat"}),(0,z.jsx)("button",{className:"text-button p-0",children:xe?(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),xe&&(0,z.jsxs)("div",{className:P.openTransition,children:[(0,z.jsx)(l.A.Header,{className:(0,w.A)(P.background,"border-0",P.borderBottom),children:(0,z.jsxs)("div",{className:"d-flex align-items-center gap-4 py-1",children:[(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"Weekly",name:"repeat",value:"Weekly",onChange:e=>Te(e.value),checked:"Weekly"===Le}),(0,z.jsx)("label",{htmlFor:"Weekly",className:"ms-2 cursor-pointer",children:"Weekly"})]}),(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"Monthly",name:"repeat",value:"Monthly",onChange:e=>Te(e.value),checked:"Monthly"===Le}),(0,z.jsx)("label",{htmlFor:"Monthly",className:"ms-2 cursor-pointer",children:"Monthly"})]})]})}),(0,z.jsx)(l.A.Header,{className:(0,w.A)(P.background,"border-0",P.borderBottom),children:(0,z.jsxs)("div",{className:"d-flex flex-column",children:[(0,z.jsx)("label",{className:"mb-2",children:"Repeat on"}),"Weekly"===Le&&(0,z.jsx)("div",{className:"d-flex gap-3 align-items-center",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(((e,t)=>(0,z.jsx)("button",{onClick:()=>{Ue((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]))},className:(0,w.A)("outline-button",{"active-outline-button":Ie.includes(t)}),children:e},e)))}),"Monthly"===Le&&(0,z.jsx)("div",{className:"d-flex gap-2 align-items-center flex-wrap",children:Array.from({length:31},((e,t)=>t+1)).map((e=>(0,z.jsx)("button",{onClick:()=>{He((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},className:(0,w.A)("outline-button",{"active-outline-button":De.includes(e)}),children:e},e)))}),(null===ft||void 0===ft?void 0:ft.on)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Repeats on are required"})]})}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0",P.borderBottom),children:[(0,z.jsx)("label",{className:"mb-2",children:"Starts"}),(0,z.jsx)(N.V,{value:Me,onChange:e=>ze(e.value),showButtonBar:!0,placeholder:"17 Jun 2021",dateFormat:"dd M yy",locale:"en",showIcon:!0,style:{height:"46px",width:"180px",overflow:"hidden"},icon:(0,z.jsx)(c.A,{color:"#667085",size:20}),className:(0,w.A)(P.inputBox,"p-0 outline-none")}),(null===ft||void 0===ft?void 0:ft.repeatStart)&&(0,z.jsx)("p",{className:"error-message mb-0",children:"Starts is required"})]}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0 d-flex",P.borderBottom),children:[(0,z.jsxs)("div",{className:"d-flex flex-column",children:[(0,z.jsx)("label",{className:"mb-1",children:"Ends"}),(0,z.jsxs)("div",{className:"d-flex align-items-center gap-4 py-1",children:[(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"On",name:"ending",value:"On",onChange:e=>qe(e.value),checked:"On"===Le}),(0,z.jsx)("label",{htmlFor:"On",className:"ms-2 cursor-pointer",children:"On"})]}),(0,z.jsx)(N.V,{value:Oe,onChange:e=>Ge(e.value),showButtonBar:!0,placeholder:"20 Jun 2021",dateFormat:"dd M yy",locale:"en",showIcon:!0,style:{height:"46px",width:"180px",overflow:"hidden"},icon:(0,z.jsx)(c.A,{color:"#667085",size:20}),className:(0,w.A)(P.inputBox,"p-0 outline-none")}),(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"Never",name:"ending",value:"Never",onChange:e=>qe(e.value),checked:"Never"===Le}),(0,z.jsx)("label",{htmlFor:"Never",className:"ms-2 cursor-pointer",children:"Never"})]})]})]}),(0,z.jsxs)("div",{className:"d-flex flex-column ms-3",children:[(0,z.jsx)("label",{className:"mb-1",children:"Occurrences"}),(0,z.jsx)(S.m,{options:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7}],className:(0,w.A)(P.dropdownSelect,"dropdown-height-fixed","outline-none","mb-3"),style:{height:"44px",width:"100%"},placeholder:"Select Occurrences",onChange:e=>{Pe(e.value)},value:Be,loading:null===Nt||void 0===Nt?void 0:Nt.isFetching,filter:!0,filterInputAutoFocus:!0})]})]}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0 d-flex flex-column",P.borderBottom),children:[(0,z.jsx)("label",{className:"mb-1",children:"Set Schedule Ahead"}),(0,z.jsx)(S.m,{options:[{label:"1 Week",value:1},{label:"2 Week",value:2},{label:"3 Week",value:3},{label:"4 Week",value:4},{label:"5 Week",value:5},{label:"6 Week",value:6},{label:"7 Week",value:7}],className:(0,w.A)(P.dropdownSelect,"dropdown-height-fixed","outline-none","mb-3"),style:{height:"44px",width:"250px"},placeholder:"Select week",onChange:e=>{Ve(e.value)},value:Je,filterInputAutoFocus:!0})]}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0 d-flex justify-content-between",P.borderBottom),children:[(0,z.jsx)(o.A,{className:"outline-button",children:"Cancel"}),(0,z.jsx)(o.A,{className:"outline-button active-outline-button",children:"Apply"})]})]})]}),(0,z.jsxs)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:[(0,z.jsx)(l.A.Body,{className:(0,w.A)(P.borderBottom,"cursor-pointer"),onClick:()=>je(!be),children:(0,z.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,z.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Project Photos"}),(0,z.jsx)("button",{className:"text-button p-0",children:be?(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),be&&(0,z.jsx)(l.A.Header,{className:(0,w.A)(P.background,"border-0 d-flex justify-content-between",P.borderBottom),children:(0,z.jsxs)("div",{className:"d-flex align-items-center gap-4 py-1",children:[(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"None",name:"projectPhotoDeliver",value:"",onChange:e=>Ke(e.value),checked:""==Ze}),(0,z.jsx)("label",{htmlFor:"None",className:"ms-2 cursor-pointer",children:"None"})]}),(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"Before and After",name:"projectPhotoDeliver",value:"1",onChange:e=>Ke(e.value),checked:"1"==Ze}),(0,z.jsx)("label",{htmlFor:"Before and After",className:"ms-2 cursor-pointer",children:"Before and After"})]}),(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"After",name:"projectPhotoDeliver",value:"2",onChange:e=>Ke(e.value),checked:"2"===Ze}),(0,z.jsx)("label",{htmlFor:"After",className:"ms-2 cursor-pointer",children:"Photos Of the Process"})]}),(0,z.jsxs)("div",{className:"flex align-items-center",children:[(0,z.jsx)(R.a,{inputId:"All",name:"projectPhotoDeliver",value:"3",onChange:e=>Ke(e.value),checked:"3"==Ze}),(0,z.jsx)("label",{htmlFor:"All",className:"ms-2 cursor-pointer",children:"All"})]})]})})]}),(0,z.jsxs)(l.A,{className:(0,w.A)(P.border,"mb-3"),children:[(0,z.jsx)(l.A.Body,{className:(0,w.A)(P.borderBottom,"cursor-pointer"),onClick:()=>fe(!ve),children:(0,z.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,z.jsx)("h1",{className:"font-16 mb-0 font-weight-light",style:{color:"#475467",fontWeight:400},children:"Attachments"}),(0,z.jsx)("button",{className:"text-button p-0",children:ve?(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3536 7.35355C13.1583 7.54882 12.8417 7.54882 12.6464 7.35355L7 1.70711L1.35355 7.35355C1.15829 7.54881 0.841709 7.54881 0.646446 7.35355C0.451184 7.15829 0.451184 6.84171 0.646446 6.64645L6.64645 0.646446C6.84171 0.451184 7.15829 0.451184 7.35355 0.646446L13.3536 6.64645C13.5488 6.84171 13.5488 7.15829 13.3536 7.35355Z",fill:"#344054"})}):(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.64645 4.64645C1.84171 4.45118 2.15829 4.45118 2.35355 4.64645L8 10.2929L13.6464 4.64645C13.8417 4.45118 14.1583 4.45118 14.3536 4.64645C14.5488 4.84171 14.5488 5.15829 14.3536 5.35355L8.35355 11.3536C8.15829 11.5488 7.84171 11.5488 7.64645 11.3536L1.64645 5.35355C1.45118 5.15829 1.45118 4.84171 1.64645 4.64645Z",fill:"#344054"})})})]})}),ve&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(l.A.Header,{className:(0,w.A)(P.background,"border-0 d-flex justify-content-between"),children:(0,z.jsxs)("div",{...tt({className:"dropzone d-flex justify-content-center align-items-center flex-column"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,z.jsx)("input",{...st()}),(0,z.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,z.jsx)(p.A,{})}),(0,z.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,z.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,z.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})}),(0,z.jsxs)(l.A.Header,{className:(0,w.A)(P.background,"border-0 d-flex flex-column",P.borderBottom),children:[Ye.filter((e=>e.isExisting||100===e.progress)).length>0&&(0,z.jsx)("div",{className:"d-flex flex-column gap-2 mb-3",children:Ye.filter((e=>e.isExisting||100===e.progress)).map(((e,t)=>(0,z.jsxs)("div",{className:P.fileBox,style:{background:"#fff",border:"1px solid #EAECF0",borderRadius:"8px",padding:"12px 16px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:[W(e.type,32,"black"),(0,z.jsxs)("div",{className:P.fileNameBox,style:{flex:1,minWidth:0},children:[(0,z.jsx)("p",{className:"mb-0 text-truncate",style:{fontWeight:500,color:"#344054",fontSize:"14px"},children:(null===e||void 0===e?void 0:e.name)||""}),(0,z.jsxs)("p",{className:"mb-0",style:{color:"#667085",fontSize:"12px"},children:[parseFloat((null===e||void 0===e?void 0:e.size)/1024).toFixed(2)," KB"]})]}),(0,z.jsxs)("div",{className:"ms-auto d-flex align-items-center gap-1",children:[(0,z.jsx)(m.A,{color:"#12B76A",size:20}),e.url&&(0,z.jsx)("button",{type:"button",className:"text-button",onClick:()=>window.open(e.url,"_blank"),style:{border:"none",background:"transparent",padding:"6px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Download",children:(0,z.jsx)(h.A,{color:"#667085",size:16})}),(0,z.jsx)("button",{type:"button",className:"text-button",onClick:()=>Et(e),disabled:Ft.isPending&&Ft.variables===e.attachmentId,style:{border:"none",background:"transparent",padding:"6px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",opacity:Ft.isPending&&Ft.variables===e.attachmentId?.5:1},title:"Delete",children:Ft.isPending&&Ft.variables===e.attachmentId?(0,z.jsx)(E.p,{style:{width:"14px",height:"14px"},strokeWidth:"4"}):(0,z.jsx)(x.A,{color:"#B42318",size:16})})]})]},e.fileId||t)))}),Ye.filter((e=>!e.isExisting&&e.isPending&&e.progress<100&&!e.error)).length>0&&(0,z.jsx)("div",{className:"d-flex flex-column gap-2 mb-3",children:Ye.filter((e=>!e.isExisting&&e.isPending&&e.progress<100&&!e.error)).map(((e,t)=>(0,z.jsxs)("div",{className:P.fileBox,style:{background:"#FFFBEB",border:"1px solid #FEF0C7",borderRadius:"8px",padding:"12px 16px"},children:[W(e.type,32,"black"),(0,z.jsxs)("div",{className:P.fileNameBox,style:{flex:1,minWidth:0},children:[(0,z.jsx)("p",{className:"mb-0 text-truncate",style:{fontWeight:500,color:"#344054",fontSize:"14px"},children:(null===e||void 0===e?void 0:e.name)||""}),(0,z.jsxs)("p",{className:"mb-0",style:{color:"#B54708",fontSize:"12px"},children:[parseFloat((null===e||void 0===e?void 0:e.size)/1024).toFixed(2)," KB",e.progress>0?(0,z.jsxs)("span",{children:[" \u2022 ",parseInt(e.progress),"% uploading..."]}):(0,z.jsx)("span",{children:" \u2022 Ready to upload"})]})]}),(0,z.jsxs)("div",{className:"ms-auto d-flex align-items-center gap-1",children:[e.progress>0?(0,z.jsx)(D.A,{percentage:parseInt(null===e||void 0===e?void 0:e.progress)||0,size:20,color:"#B54708"}):(0,z.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"#FEF0C7",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,z.jsx)(p.A,{color:"#B54708",size:10})}),(0,z.jsx)("button",{type:"button",className:"text-button",onClick:()=>Et(e),style:{border:"none",background:"transparent",padding:"6px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Remove",children:(0,z.jsx)(x.A,{color:"#667085",size:16})})]})]},e.fileId||t)))}),Ye.filter((e=>e.error)).length>0&&(0,z.jsx)("div",{className:"d-flex flex-column gap-2 mb-3",children:Ye.filter((e=>e.error)).map(((e,t)=>(0,z.jsxs)("div",{className:P.fileBox,style:{background:"#FEF3F2",border:"1px solid #FECDCA",borderRadius:"8px",padding:"12px 16px"},children:[W(e.type,32,"black"),(0,z.jsxs)("div",{className:P.fileNameBox,style:{flex:1,minWidth:0},children:[(0,z.jsx)("p",{className:"mb-0 text-truncate",style:{fontWeight:500,color:"#344054",fontSize:"14px"},children:(null===e||void 0===e?void 0:e.name)||""}),(0,z.jsxs)("p",{className:"mb-0",style:{color:"#B42318",fontSize:"12px"},children:[parseFloat((null===e||void 0===e?void 0:e.size)/1024).toFixed(2)," KB \u2022 Upload failed"]})]}),(0,z.jsxs)("div",{className:"ms-auto d-flex align-items-center gap-1",children:[(0,z.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"#FECDCA",display:"flex",alignItems:"center",justifyContent:"center",color:"#B42318",fontWeight:"bold",fontSize:"12px"},children:"!"}),(0,z.jsx)("button",{type:"button",className:"text-button",onClick:()=>Et(e),style:{border:"none",background:"transparent",padding:"6px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Remove",children:(0,z.jsx)(x.A,{color:"#667085",size:16})})]})]},e.fileId||t)))}),(0,z.jsxs)("div",{className:"d-flex align-items-center mt-3 mb-3",children:[(0,z.jsx)(A.S,{inputId:"showProjectAttachments",checked:Xe,onChange:e=>Qe(e.checked)}),(0,z.jsx)("label",{htmlFor:"showProjectAttachments",className:"ms-2 cursor-pointer",style:{color:"#475467",fontSize:"14px"},children:"Share All Project Files"})]})]})]})]})]}),(0,z.jsxs)("div",{className:`modal-footer d-flex align-items-center ${J&&!le?"justify-content-between":"justify-content-end"} gap-3`,style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[J&&!le&&(0,z.jsxs)(o.A,{type:"button",className:"outline-button d-flex align-items-center gap-2",onClick:kt,children:[(0,z.jsx)(r.A,{size:16,color:"#344054"}),"Duplicate"]}),(0,z.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,z.jsx)(o.A,{type:"button",onClick:e=>{e.stopPropagation(),q(!1),Ct()},className:"outline-button",children:"Cancel"}),(0,z.jsxs)(o.A,{type:"button",onClick:()=>_t(!1),className:"outline-button active-outline-button",disabled:null===Rt||void 0===Rt?void 0:Rt.isPending,children:[J&&!le?"Update Draft":"Save Draft",(null===Rt||void 0===Rt?void 0:Rt.isPending)&&!se.current&&!ne.current&&(0,z.jsx)(E.p,{style:{width:"20px",height:"20px",color:"#fff"}})]}),(0,z.jsxs)("div",{className:P.publishButtonWrapper,ref:de,children:[(0,z.jsxs)("div",{className:P.publishButtonGroup,children:[(0,z.jsxs)(o.A,{type:"button",onClick:()=>_t(!0),className:P.publishMainButton,disabled:null===Rt||void 0===Rt?void 0:Rt.isPending,children:[J&&!le?"Update and Publish":"Save and Publish",(null===Rt||void 0===Rt?void 0:Rt.isPending)&&(0,z.jsx)(E.p,{style:{width:"20px",height:"20px",color:"#fff"}})]}),(!J||le)&&(0,z.jsx)("button",{type:"button",className:P.publishDropdownToggle,onClick:()=>re(!ie),disabled:null===Rt||void 0===Rt?void 0:Rt.isPending,children:ie?(0,z.jsx)(g.A,{size:16}):(0,z.jsx)(v.A,{size:16})})]}),ie&&(!J||le)&&(0,z.jsx)("div",{className:P.publishDropdownMenu,children:(0,z.jsxs)("button",{type:"button",className:P.publishDropdownItem,onClick:()=>{ne.current=!0,re(!1),_t(!0)},disabled:null===Rt||void 0===Rt?void 0:Rt.isPending,children:["Save and Duplicate",(0,z.jsx)(r.A,{size:16,color:"#106B99"}),(null===Rt||void 0===Rt?void 0:Rt.isPending)&&(0,z.jsx)(E.p,{style:{width:"16px",height:"16px"}})]})})]})]})]})]})}})}},32140:(e,t,s)=>{s.d(t,{s:()=>c});var n=s(65043),o=s(9634),l=s(58387),a=s(670),i=s(70579);const r=Array.from({length:24},((e,t)=>t.toString().padStart(2,"0"))),d=["00","15","30","45"],c=e=>{let{value:t,onChange:s,placeholder:c="17 Jun 2021",dateFormat:u="dd M yy",hourFormat:p="24",minuteOptions:m=d,className:h="",style:x={},icon:g=(0,i.jsx)(o.A,{color:"#667085",size:20}),onClearError:v,popupId:f="default",onDone:b,...j}=e;const[y,w]=(0,n.useState)({show:!1,top:0,left:0}),[N,A]=(0,n.useState)({show:!1,top:0,left:0}),S=(0,n.useRef)(null),C=(0,n.useRef)(null),k=(0,n.useRef)(null),$=(0,n.useRef)(null),F=!0===j.inline,E=(0,n.useCallback)((()=>{F&&b?b():S.current&&S.current.hide()}),[F,b]),R=(0,n.useCallback)((()=>{const e=new Date;s({value:e}),null===v||void 0===v||v()}),[s,v]),_=(0,n.useCallback)((()=>{s({value:null})}),[s]),B=(0,n.useCallback)((()=>(0,i.jsxs)("div",{className:"time-picker-footer",children:[(0,i.jsxs)("div",{className:"time-picker-footer-left",children:[(0,i.jsx)("button",{type:"button",className:"time-picker-footer-link",onClick:R,children:"Now"}),(0,i.jsx)("span",{className:"time-picker-footer-divider",children:"|"}),(0,i.jsx)("button",{type:"button",className:"time-picker-footer-link",onClick:_,children:"Clear"})]}),(0,i.jsx)("button",{type:"button",className:"time-picker-footer-done",onClick:E,children:"Done"})]})),[R,_,E]),P=(0,n.useCallback)((()=>t instanceof Date||t?new Date(t):new Date),[t]),L=(0,n.useCallback)((e=>{const n=P();n.setHours(parseInt(e)),t||n.setMinutes(0,0,0),s({value:n}),w({show:!1,top:0,left:0}),null===v||void 0===v||v()}),[t,s,v,P]),T=(0,n.useCallback)((e=>{const n=P();n.setMinutes(parseInt(e)),t||n.setSeconds(0,0),s({value:n}),A({show:!1,top:0,left:0}),null===v||void 0===v||v()}),[t,s,v,P]),I=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault();const t=document.querySelector(`.time-picker-${f} .p-hour-picker`);if(!t)return;const s=t.getBoundingClientRect(),n=document.querySelector(`.time-picker-${f}`);if(n){const e=n.getBoundingClientRect();w({show:!0,top:s.bottom-e.top-40,left:s.left-e.left-45}),A({show:!1,top:0,left:0})}}),[f]),U=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault();const t=document.querySelector(`.time-picker-${f} .p-minute-picker`);if(!t)return;const s=t.getBoundingClientRect(),n=document.querySelector(`.time-picker-${f}`);if(n){const e=n.getBoundingClientRect();A({show:!0,top:s.bottom-e.top-40,left:s.right-e.left-14}),w({show:!1,top:0,left:0})}}),[f]);(0,n.useEffect)((()=>{const e=document.querySelector(`.time-picker-${f}`);if(!e)return;let t=e.querySelector(".time-popup-container");t||(t=document.createElement("div"),t.className="time-popup-container",e.appendChild(t),$.current=t);const s=t=>{const s=e.querySelector(".time-popup-hour"),n=e.querySelector(".time-popup-minute"),o=t.target.closest('[data-pc-section="hour"]'),l=t.target.closest('[data-pc-section="minute"]'),a=s&&s.contains(t.target),i=n&&n.contains(t.target),r=t.target.closest(".p-hour-picker button")||t.target.closest(".p-minute-picker button")||t.target.closest(".p-datepicker-buttonbar")||t.target.closest(".p-datepicker-header");a||i||o||l||r||(w({show:!1,top:0,left:0}),A({show:!1,top:0,left:0}))};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}}),[f,y.show,N.show]),(0,n.useEffect)((()=>{const e=document.querySelector(`.time-picker-${f}`);if(!e)return;let s=e.querySelector(".time-popup-hour");if(y.show){s||(s=document.createElement("div"),s.className="time-popup time-popup-hour",e.appendChild(s));const n=t instanceof Date?t.getHours().toString().padStart(2,"0"):"";s.innerHTML=`\n                <div class="time-popup-header">Hour</div>\n                <div class="time-popup-items">\n                    ${r.map((e=>`\n                        <div \n                            data-hour="${e}"\n                            class="time-popup-item ${n===e?"time-popup-item-selected":""}"\n                        >\n                            ${e}\n                        </div>\n                    `)).join("")}\n                </div>\n            `,s.style.cssText=`\n                position: absolute;\n                top: ${y.top}px;\n                left: ${y.left}px;\n                z-index: 9999;\n            `;const o=s.querySelector(".time-popup-item-selected");if(o){const e=s.querySelector(".time-popup-items");e&&(e.scrollTop=o.offsetTop-e.offsetHeight/2+o.offsetHeight/2)}s.querySelectorAll("[data-hour]").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation(),L(e.getAttribute("data-hour"))}))}))}else s&&s.remove()}),[y,t,L,f]),(0,n.useEffect)((()=>{const e=document.querySelector(`.time-picker-${f}`);if(!e)return;let s=e.querySelector(".time-popup-minute");if(N.show){s||(s=document.createElement("div"),s.className="time-popup time-popup-minute",e.appendChild(s));const n=t instanceof Date?t.getMinutes().toString().padStart(2,"0"):"";s.innerHTML=`\n                <div class="time-popup-header">Minute</div>\n                <div class="time-popup-items">\n                    ${m.map((e=>`\n                        <div \n                            data-minute="${e}"\n                            class="time-popup-item ${n===e?"time-popup-item-selected":""}"\n                        >\n                            ${e}\n                        </div>\n                    `)).join("")}\n                </div>\n            `,s.style.cssText=`\n                position: absolute;\n                top: ${N.top}px;\n                left: ${N.left}px;\n                z-index: 9999;\n            `,s.querySelectorAll("[data-minute]").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation(),T(e.getAttribute("data-minute"))}))}))}else s&&s.remove()}),[N,t,m,T,f]);const D=(0,n.useCallback)((()=>{setTimeout((()=>{const e=document.querySelector(`.time-picker-${f} .p-hour-picker [data-pc-section="hour"]`),t=document.querySelector(`.time-picker-${f} .p-minute-picker [data-pc-section="minute"]`);e&&(C.current=e,e.style.cursor="pointer",e.addEventListener("click",I)),t&&(k.current=t,t.style.cursor="pointer",t.addEventListener("click",U))}),100)}),[I,U,f]),H=(0,n.useCallback)((()=>{C.current&&(C.current.removeEventListener("click",I),C.current=null),k.current&&(k.current.removeEventListener("click",U),k.current=null),w({show:!1,top:0,left:0}),A({show:!1,top:0,left:0})}),[I,U]);(0,n.useEffect)((()=>{if(F){const e=setTimeout((()=>{D()}),100);return()=>clearTimeout(e)}}),[F,D]);const M=(0,i.jsx)(a.V,{ref:S,value:t,onChange:s,showButtonBar:!1,placeholder:c,dateFormat:u,locale:"en",showIcon:!F,style:F?x:{height:"46px",width:"230px",overflow:"hidden",...x},icon:g,className:(0,l.A)("time-picker-calendar",F&&"time-picker-calendar-inline",h),hourFormat:p,showTime:!0,panelClassName:`time-picker-${f}`,onShow:D,onHide:H,footerTemplate:B,...j});return F?(0,i.jsx)("div",{className:`time-picker-wrapper time-picker-${f}`,children:M}):M}},33296:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(70579);const o=e=>{let{percentage:t,size:s=100,strokeWidth:o=4,color:l="#4CAF50",background:a="#ddd"}=e;const i=(s-o)/2,r=2*Math.PI*i,d=r-t/100*r;return(0,n.jsxs)("svg",{width:s,height:s,children:[(0,n.jsx)("circle",{cx:s/2,cy:s/2,r:i,fill:"none",stroke:a,strokeWidth:o}),(0,n.jsx)("circle",{cx:s/2,cy:s/2,r:i,fill:"none",stroke:l,strokeWidth:o,strokeDasharray:r,strokeDashoffset:d,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.3s ease"}})]})}},38391:(e,t,s)=>{s.d(t,{AO:()=>u,CE:()=>h,El:()=>a,Gj:()=>l,XX:()=>m,ax:()=>i,lh:()=>d,uP:()=>r,y8:()=>p,z8:()=>c});var n=s(31342);const o="https://app.memate.com.au/api/v1",l=async function(e,t){var s,l;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const d=(e-1)*t,c=new URL(`${o}/jobs/`);if(c.searchParams.append("limit",t),c.searchParams.append("offset",d),a&&c.searchParams.append("search",a),i&&c.searchParams.append("ordering",i),null!==r&&void 0!==r&&null!==(s=r.status)&&void 0!==s&&s.length){let e=[];r.status.forEach((t=>{"draft"===t.value?c.searchParams.append("published",!1):c.searchParams.append("published",!0),"in_progress"===t.value?c.searchParams.append("action_status","1,2"):c.searchParams.append("action_status","0"),"draft"!==t.value&&"in_progress"!==t.value&&e.push(t.value)})),e.length&&c.searchParams.append("status",e.join(","))}else c.searchParams.append("status","3,2,1,6,a");return null!==r&&void 0!==r&&null!==(l=r.worker)&&void 0!==l&&l.length&&c.searchParams.append("workers",r.worker.map((e=>e.id)).join(",")),(0,n.f)(c.toString(),{method:"GET"})},a=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/jobs/create/`);return(0,n.f)(s.toString(),t)},i=async e=>{const t=new URL(`${o}${`/jobs/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},r=async()=>{const e=new URL(`${o}/dashboard/`);return(0,n.f)(e.toString(),{method:"GET"})},d=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/jobs/update/${e}/`}`);return(0,n.f)(l.toString(),s)},c=async e=>{const t=new URL(`${o}${`/jobs/to-approve/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},u=async(e,t)=>{const s={method:"POST",body:t},l=new URL(`${o}${`/jobs/approve/${e}/`}`);return(0,n.f)(l.toString(),s)},p=async e=>{const t=new URL(`${o}${`/jobs/${e}/rework/`}`);return(0,n.f)(t.toString(),{method:"POST"})},m=async e=>{const t=new URL(`${o}${`/jobs/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},h=async(e,t)=>{const s=new URL(`${o}${`/jobs/attachments/delete/${e}/${t}/`}`);return(0,n.f)(s.toString(),{method:"DELETE"})}},81047:(e,t,s)=>{s.d(t,{AO:()=>h,Ad:()=>w,Bz:()=>E,Hb:()=>u,IT:()=>F,Kb:()=>i,Mp:()=>y,Pf:()=>S,Rh:()=>N,SQ:()=>c,T6:()=>g,UM:()=>b,VQ:()=>$,Xm:()=>d,bd:()=>k,bj:()=>x,gY:()=>v,hS:()=>m,hx:()=>C,iS:()=>a,p4:()=>r,pJ:()=>j,rJ:()=>A,s:()=>p,sB:()=>f,tC:()=>l});var n=s(31342);const o="https://app.memate.com.au/api/v1",l=async()=>{const e=new URL(`${o}/jobs/templates/`);return(0,n.f)(e.toString(),{method:"GET"})},a=async e=>{const t=new URL(`${o}${`/jobs/templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},i=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/jobs/templates/`);return(0,n.f)(s.toString(),t)},r=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/jobs/templates/${e}/`}`);return(0,n.f)(l.toString(),s)},d=async e=>{const t=new URL(`${o}${`/jobs/templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},c=async()=>{const e=new URL(`${o}/settings/templates/email-templates/`);return(0,n.f)(e.toString(),{method:"GET"})},u=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/settings/templates/email-templates/`);return(0,n.f)(s.toString(),t)},p=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/settings/templates/email-templates/${e}/`}`);return(0,n.f)(l.toString(),s)},m=async e=>{const t=new URL(`${o}${`/settings/templates/email-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},h=async()=>{const e=new URL(`${o}/email-signatures/`);return(0,n.f)(e.toString(),{method:"GET"})},x=async e=>{const t=new URL(`${o}${`/email-signatures/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},g=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/email-signatures/`);return(0,n.f)(s.toString(),t)},v=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/email-signatures/${e}/`}`);return(0,n.f)(l.toString(),s)},f=async e=>{const t=new URL(`${o}${`/email-signatures/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},b=async e=>{const t=new URL(`${o}${`/settings/email-signatures/default/${e}/`}`);return(0,n.f)(t.toString(),{method:"PUT"})},j=async()=>{const e=new URL(`${o}/sms-templates/`);return(0,n.f)(e.toString(),{method:"GET"})},y=async e=>{const t=new URL(`${o}${`/sms-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},w=async e=>{const t={method:"POST",body:e},s=new URL(`${o}/sms-templates/`);return(0,n.f)(s.toString(),t)},N=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/sms-templates/${e}/`}`);return(0,n.f)(l.toString(),s)},A=async e=>{const t=new URL(`${o}${`/sms-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},S=async e=>{const t=new URL(`${o}${`/proposals/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},C=async()=>{const e=new URL(`${o}/references/outgoing-email/`);return(0,n.f)(e.toString(),{method:"GET"})},k=async e=>{const t=new URL(`${o}${`/settings/templates/email-templates/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})},$=async()=>{const e=new URL(`${o}/settings/proposals/`);return(0,n.f)(e.toString(),{method:"GET"})},F=async e=>{const t=new URL(`${o}${`/settings/proposals/${e}/`}`);return(0,n.f)(t.toString(),{method:"GET"})},E=async e=>{const t=new URL(`${o}${`/settings/proposals/delete/${e}/`}`);return(0,n.f)(t.toString(),{method:"DELETE"})}},90386:(e,t,s)=>{s.d(t,{V_:()=>a,bd:()=>r,h9:()=>i,tD:()=>l});var n=s(31342);const o="https://app.memate.com.au/api/v1",l=async()=>{const e=new URL(`${o}/team/mobile-users/`);return(0,n.f)(e.toString(),{method:"GET"})},a=async()=>{const e=new URL(`${o}/users/desktop-users/`);return(0,n.f)(e.toString(),{method:"GET"})},i=async function(e,t,s){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!e||!t||!s)return;const a=(t-1)*s,i=new URL(`${o}${`/team/mobile-users/${e}/invoices/`}`);return i.searchParams.append("limit",s),i.searchParams.append("offset",a),l&&i.searchParams.append("number",l),(0,n.f)(i.toString(),{method:"GET"})},r=async(e,t)=>{const s={method:"PUT",body:t},l=new URL(`${o}${`/team/mobile-users/${e}/`}`);return(0,n.f)(l.toString(),s)}}}]);
//# sourceMappingURL=1281.a10483ab.chunk.js.map