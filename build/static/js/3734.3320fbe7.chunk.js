"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3734],{568:(e,s,l)=>{l.d(s,{J:()=>i});const i=Object.freeze({CLIENTS:{CREATE:"CREATE_CLIENT",READ:"READ_CLIENT",UPDATE:"UPDATE_CLIENT",DELETE:"DELETE_CLIENT"},SUPPLIERS:{CREATE:"CREATE_SUPPLIER",READ:"READ_SUPPLIER",UPDATE:"UPDATE_SUPPLIER",DELETE:"DELETE_SUPPLIER"},SALES:{},MANAGEMENT:{},PROJECTS:{},STATISTIC:{},EXPENSE:{CREATE:"CREATE_EXPENSE",READ:"READ_EXPENSE",UPDATE:"UPDATE_EXPENSE",DELETE:"DELETE_EXPENSE"},INVOICE:{CREATE:"CREATE_INVOICE",READ:"READ_INVOICE",UPDATE:"UPDATE_INVOICE",DELETE:"DELETE_INVOICE"},SETTINGS:{SUBSCRIPTION:{BUY_BUSINESS_SUBSCRIPTION:"BUY_BUSINESS_SUBSCRIPTION",CANCEL_BUSINESS_SUBSCRIPTION:"CANCEL_BUSINESS_SUBSCRIPTION",BUY_COMPANY_USER_SUBSCRIPTION:"BUY_COMPANY_USER_SUBSCRIPTION",BUY_WORK_SUBSCRIPTION:"BUY_WORK_SUBSCRIPTION",CANCEL_WORK_SUBSCRIPTION:"CANCEL_WORK_SUBSCRIPTION",ACTIVE_WORK_SUBSCRIPTION:"ACTIVE_WORK_SUBSCRIPTION",BUY_WORK_USER_SUBSCRIPTION:"BUY_WORK_USER_SUBSCRIPTION",BUY_LOCATION_SUBSCRIPTION:"BUY_LOCATION_SUBSCRIPTION",REMOVE_LOCATION_SUBSCRIPTION:"REMOVE_LOCATION_SUBSCRIPTION",ACTIVE_INQUIRIES_SUBSCRIPTION:"ACTIVE_INQUIRIES_SUBSCRIPTION",CANCEL_INQUIRIES_SUBSCRIPTION:"CANCEL_INQUIRIES_SUBSCRIPTION",ACTIVE_ASSETS_SUBSCRIPTION:"ACTIVE_ASSETS_SUBSCRIPTION",CANCEL_ASSETS_SUBSCRIPTION:"CANCEL_ASSETS_SUBSCRIPTION",MANAGE_ASSET_SUBSCRIPTION:"MANAGE_ASSET_SUBSCRIPTION"},USERS:{MOBILE_APP:{ADD:"ADD_USER",READ:"READ_USER",UPDATE:"UPDATE_USER",DISCONNECT_USER:"DISCONNECT_USER",RECONNECT_USER:"RECONNECT_USER",SHOW_DISCONNECTED_USERS:"SHOW_DISCONNECTED_USERS"},DESKTOP:{ADD:"ADD_USER",READ:"READ_USER",DELETE:"DELETE_USER",UPDATE:"UPDATE_USER",RESTORE:"RESTORE_USER",SHOW_DELETED_USERS:"SHOW_DELETED_USERS"}},LOCATION:{ADD:"ADD_LOCATION",READ:"READ_LOCATION",UPDATE:"UPDATE_LOCATION",DELETE:"DELETE_LOCATION"}}})},985:(e,s,l)=>{l.d(s,{w:()=>P,A:()=>O});var i=l(65043),n=l(14282),t=l(61072),a=l(78602),o=l(95192),d=l(56741),r=l(24291),c=l(35475),h=l(58387),m=l(76104);const u="indivisual-client-view_profileBox__WzeFK",p="indivisual-client-view_box__ObzCe",A="indivisual-client-view_boxLabel__w8zNR",x="indivisual-client-view_boxLabel2__5dIgs",S="indivisual-client-view_label__hrhXx",v="indivisual-client-view_text__d2e62",E="indivisual-client-view_iconBoxsContainer__XWWcT",N="indivisual-client-view_iconBox__PFmlv";var j=l(74196),I=l(24572),C=l(21913),T=l(73216),_=l(56328),g=l(43162),R=l(17344),y=l(70579);const b=(0,i.forwardRef)(((e,s)=>{var l,n,t,a,o,d,r,c,h,m,u,p,A,x,S,v,E,N,j;let{client:I,refetch:C,setIsPending:b,handleExternalSubmit:f,setIsEdit:P}=e;const O=(0,T.Zp)(),[w,U]=(0,i.useState)((null===I||void 0===I?void 0:I.photo)||null),[D]=(0,i.useState)({firstname:(null===I||void 0===I||null===(l=I.name)||void 0===l||null===(n=l.split(" "))||void 0===n?void 0:n[0])||"",lastname:(null===I||void 0===I||null===(t=I.name)||void 0===t||null===(a=t.split(" "))||void 0===a?void 0:a[1])||"",email:null===I||void 0===I?void 0:I.email,phone:(null===I||void 0===I?void 0:I.phone)||"",category:(null===I||void 0===I||null===(o=I.category)||void 0===o?void 0:o.id)||1,payment_terms:null===I||void 0===I?void 0:I.payment_terms,description:null===I||void 0===I?void 0:I.description,address:{id:(null===(d=I.addresses)||void 0===d||null===(r=d[0])||void 0===r?void 0:r.id)||"",title:(null===(c=I.addresses)||void 0===c||null===(h=c[0])||void 0===h?void 0:h.title)||"",country:(null===(m=I.addresses)||void 0===m||null===(u=m[0])||void 0===u?void 0:u.country_id)||"",state:(null===(p=I.addresses)||void 0===p||null===(A=p[0])||void 0===A?void 0:A.state_id)||"",city:(null===(x=I.addresses)||void 0===x||null===(S=x[0])||void 0===S?void 0:S.city)||"",address:(null===(v=I.addresses)||void 0===v||null===(E=v[0])||void 0===E?void 0:E.address)||"",postcode:(null===(N=I.addresses)||void 0===N||null===(j=N[0])||void 0===j?void 0:j.postcode)||""}});return(0,y.jsx)(R.A,{photo:w,setPhoto:U,ref:s,onSubmit:async e=>{I.id?(async e=>{console.log("indivisualFormSubmit: ",e);const s=(0,g.$)(e,w);b(!0),await(0,g.g)(`https://app.memate.com.au/api/v1/clients/update/individual/${I.id}/`,"PUT",s,(e=>{P(!1),C(),console.log("response: ",e),_.oR.success("Client updated successfully"),O("/clients")}),(()=>{_.oR.error("Failed to update client. Please try again.")})),b(!1)})(e):_.oR.error("Client id not found")},defaultValues:D})}));var f=l(81954);const P=e=>{var s,l,i,n,o;let{client:d}=e;const m=[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}];let u=null===m||void 0===m?void 0:m.find((e=>(null===e||void 0===e?void 0:e.value)===(null===d||void 0===d?void 0:d.payment_terms)));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,h.A)(p),children:(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Email"}),(0,y.jsx)(c.N_,{to:"#",onClick:e=>{e.preventDefault(),window.location.href=`mailto:${null===d||void 0===d?void 0:d.email}`},children:(0,y.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,y.jsxs)("div",{className:"ellipsis-width",title:null===d||void 0===d?void 0:d.email,children:[(null===d||void 0===d?void 0:d.email)||"-","\xa0"]}),(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,y.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Phone"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:(null===d||void 0===d?void 0:d.phone)||"-"})]})]})}),(0,y.jsx)("h5",{className:(0,h.A)(A),children:"Payment Terms"}),(0,y.jsx)("div",{className:(0,h.A)(p),children:(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Payment Terms"}),(0,y.jsx)("h4",{className:(0,h.A)(v,"mb-0"),children:(null===u||void 0===u?void 0:u.label)||"-"})]}),(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Customers Discount Category"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:(null===d||void 0===d||null===(s=d.category)||void 0===s?void 0:s.name)||"-"})]})]})}),(0,y.jsx)("h5",{className:(0,h.A)(A),children:"Contact Person"}),null===d||void 0===d||null===(l=d.contact_persons)||void 0===l?void 0:l.map((e=>{var s;return(0,y.jsxs)("div",{className:(0,h.A)(p),children:[(0,y.jsx)("div",{className:(0,h.A)(E),children:(0,y.jsx)("div",{className:(0,h.A)(N),children:(0,y.jsx)(r.A,{color:e.is_main||1===(null===d||void 0===d||null===(s=d.contact_persons)||void 0===s?void 0:s.length)?"#FFCB45":"#D0D5DD",size:16})})}),(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Full Name"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:`${e.firstname} ${e.lastname}`})]}),(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Email"}),(0,y.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`mailto:${null===e||void 0===e?void 0:e.email}`},children:(0,y.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,y.jsxs)("div",{className:"ellipsis-width",title:null===e||void 0===e?void 0:e.email,children:[(null===e||void 0===e?void 0:e.email)||"-","\xa0"]}),(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,y.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]}),(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Position"}),(0,y.jsx)("h4",{className:(0,h.A)(v,"mb-0"),children:(null===e||void 0===e?void 0:e.position)||"-"})]}),(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Phone"}),(0,y.jsxs)("h4",{className:(0,h.A)(v,"mb-0"),children:[(null===e||void 0===e?void 0:e.phone)||"-","\xa0\xa0",(0,y.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`tel:${null===e||void 0===e?void 0:e.phone}`},style:{position:"relative",top:"-2px"},children:(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,y.jsx)("path",{d:"M4.15387 1.32849C3.90343 1.00649 3.42745 0.976861 3.139 1.26531L2.10508 2.29923C1.6216 2.78271 1.44387 3.46766 1.6551 4.06847C2.50338 6.48124 3.89215 8.74671 5.82272 10.6773C7.75329 12.6078 10.0188 13.9966 12.4315 14.8449C13.0323 15.0561 13.7173 14.8784 14.2008 14.3949L15.2347 13.361C15.5231 13.0726 15.4935 12.5966 15.1715 12.3461L12.8653 10.5524C12.7008 10.4245 12.4866 10.3793 12.2845 10.4298L10.0954 10.9771C9.50082 11.1257 8.87183 10.9515 8.43845 10.5181L5.98187 8.06155C5.54849 7.62817 5.37427 6.99919 5.52292 6.40459L6.07019 4.21553C6.12073 4.01336 6.07552 3.79918 5.94758 3.63468L4.15387 1.32849ZM2.38477 0.511076C3.12689 -0.231039 4.3515 -0.154797 4.99583 0.673634L6.78954 2.97983C7.1187 3.40304 7.23502 3.95409 7.10498 4.47423L6.55772 6.66329C6.49994 6.8944 6.56766 7.13888 6.7361 7.30732L9.19268 9.7639C9.36113 9.93235 9.6056 10.0001 9.83671 9.94229L12.0258 9.39502C12.5459 9.26498 13.097 9.3813 13.5202 9.71047L15.8264 11.5042C16.6548 12.1485 16.731 13.3731 15.9889 14.1152L14.955 15.1492C14.2153 15.8889 13.1089 16.2137 12.0778 15.8512C9.51754 14.9511 7.11438 13.4774 5.06849 11.4315C3.0226 9.38562 1.54895 6.98246 0.648838 4.42225C0.286318 3.39112 0.61113 2.28472 1.35085 1.545L2.38477 0.511076Z",fill:"#106B99"})})})]})]})]})]},e.id)})),0===(null===d||void 0===d||null===(i=d.contact_persons)||void 0===i?void 0:i.length)&&(0,y.jsx)("div",{className:(0,h.A)(p),children:"-"}),(0,y.jsx)("h5",{className:(0,h.A)(A),children:"Locations"}),null===d||void 0===d||null===(n=d.addresses)||void 0===n?void 0:n.map((e=>{var s;return(0,y.jsxs)("div",{className:(0,h.A)(p),children:[(0,y.jsxs)("div",{className:(0,h.A)(E),children:[(0,y.jsx)("div",{className:(0,h.A)(N),children:(0,y.jsx)(r.A,{color:e.is_main||1===(null===d||void 0===d||null===(s=d.addresses)||void 0===s?void 0:s.length)?"#FFCB45":"#D0D5DD",size:16})}),(0,y.jsx)("div",{className:(0,h.A)(N),children:(0,y.jsx)(c.N_,{to:`http://maps.google.com/?q=${e.address}`,target:"_blank",children:(0,y.jsx)("img",{src:j,alt:"map"})})})]}),(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Location Name"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:`${e.title||"-"}`})]}),(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Country"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:`${e.country||"-"}`})]})]}),(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"State"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:`${e.state||"-"}`})]}),(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"City"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:`${e.city_name||"-"}`})]})]}),(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Street Address"}),(0,y.jsx)("h4",{className:(0,h.A)(v,"mb-0"),children:`${e.address||"-"}`})]}),(0,y.jsxs)(a.A,{sm:6,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Postcode"}),(0,y.jsx)("h4",{className:(0,h.A)(v,"mb-0"),children:`${e.postcode||"-"}`})]})]})]},e.id)})),0===(null===d||void 0===d||null===(o=d.addresses)||void 0===o?void 0:o.length)&&(0,y.jsx)("div",{className:(0,h.A)(p),children:"-"}),(0,y.jsx)("h5",{className:(0,h.A)(A),children:"Client Description"}),(0,y.jsx)("div",{className:(0,h.A)(p),children:d.description||"-"}),(0,y.jsx)("h5",{className:(0,h.A)(A),children:"Calculations"}),(0,y.jsxs)(t.A,{children:[(0,y.jsx)(a.A,{sm:6,children:(0,y.jsx)("div",{className:(0,h.A)(p),children:(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Total Turnover:"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:(0,I.up)(+d.total_turnover)||"-"})]}),(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Average Weekly Turnover:"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:(0,I.up)(+d.average_weekly)||"-"})]}),(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Total orders:"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:(0,I.up)(+d.total_orders)||"-"})]})]})})}),(0,y.jsx)(a.A,{sm:6,children:(0,y.jsx)("div",{className:(0,h.A)(p),children:(0,y.jsxs)(t.A,{children:[(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Total requests:"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:+d.total_requests||"-"})]}),(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Order Frequency:"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:((e,s)=>{const l=12*((new Date).getFullYear()-new Date(1e3*+s).getFullYear())+((new Date).getMonth()-new Date(1e3*s).getMonth());return`${l>0?(parseFloat(e)/l).toFixed(2):0} p/m`})(d.total_orders,d.created)||"-"})]}),(0,y.jsxs)(a.A,{sm:12,children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Average order:"}),(0,y.jsx)("h4",{className:(0,h.A)(v),children:(0,I.up)(+d.average_orders)||"-"})]})]})})})]}),(0,y.jsxs)("div",{className:(0,h.A)(p,"mb-0"),children:[(0,y.jsx)("label",{className:(0,h.A)(S),children:"Date Entered:"}),(0,y.jsx)("h4",{className:(0,h.A)(v,"mb-0"),children:(0,I.i$)(d.created,!0)||"-"})]})]})},O=e=>{let{client:s,refetch:l,closeIconRef:t,hide:a}=e;const r=(0,i.useRef)(null),[c,p]=(0,i.useState)(!1),[S,v]=(0,i.useState)(!1),E=()=>{r.current&&r.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,y.jsx)("div",{className:"view-details-sidebar",children:(0,y.jsxs)("div",{className:"d-flex flex-column",children:[(0,y.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,y.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,y.jsx)("div",{className:(0,h.A)(u,"d-flex align-items-center justify-content-center"),children:s.has_photo?(0,y.jsx)("img",{src:s.photo,alt:"client-photo"}):(0,y.jsx)(o.A,{color:"#667085",size:26})}),(0,y.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,y.jsx)("span",{style:{color:"344054",fontSize:"22px",fontWeight:600},children:s.name}),s.deleted?(0,y.jsx)(m.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]}),(0,y.jsx)("span",{children:(0,y.jsx)(n.A,{type:"button",className:"text-button",ref:t,onClick:e=>a(e),children:(0,y.jsx)(d.A,{size:24,color:"#667085"})})})]}),(0,y.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 122px)",overflow:"auto"},children:[(0,y.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,y.jsx)("h5",{className:(0,h.A)(A),children:"Client Details"}),(0,y.jsxs)("h6",{className:(0,h.A)(x),children:["Client ID: ",null===s||void 0===s?void 0:s.number]})]}),S?(0,y.jsx)(b,{ref:r,refetch:l,setIsPending:p,handleExternalSubmit:E,client:s,setIsEdit:v}):(0,y.jsx)(P,{client:s})]}),(0,y.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between h-100",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[s.deleted?(0,y.jsx)("span",{}):(0,y.jsx)(C.A,{id:null===s||void 0===s?void 0:s.id,refetch:l}),S?(0,y.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,y.jsx)(n.A,{type:"button",onClick:e=>{e.stopPropagation(),v(!1)},className:"outline-button",children:"Cancel"}),(0,y.jsx)(n.A,{type:"button",onClick:E,className:"solid-button",style:{minWidth:"179px"},children:c?"Loading...":"Save Client Details"})]}):s.deleted?(0,y.jsx)(f.A,{id:null===s||void 0===s?void 0:s.id,refetch:l}):(0,y.jsx)(n.A,{type:"button",onClick:e=>{e.stopPropagation(),v(!0)},className:"solid-button",children:"Edit Client"})]})]})})}},14834:(e,s,l)=>{function i(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=parseFloat(e);return isNaN(l)?"0.00":s&&Math.abs(l)>=1e3?new Intl.NumberFormat("en-AU",{notation:"compact",compactDisplay:"short",minimumFractionDigits:2,maximumFractionDigits:2}).format(l):new Intl.NumberFormat("en-AU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l)}l.d(s,{m:()=>i})},20793:(e,s,l)=>{e.exports=l.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},21913:(e,s,l)=>{l.d(s,{A:()=>A});l(65043);var i=l(14282),n=l(94819),t=l(73216),a=l(47097),o=l(30970),d=l(93740),r=l(56328),c=l(59638),h=l(57189),m=l(568),u=l(74737),p=l(70579);const A=e=>{let{id:s,refetch:l}=e;const{role:A}=(0,h.As)(),x=(0,t.Zp)(),S=(0,a.n)({mutationFn:()=>(0,c.zZ)(s),onSuccess:()=>{l(),x("/clients"),r.oR.success("Client deleted successfully")},onError:e=>{console.log("Failed to delete client: ",e),r.oR.error("Failed to delete client. Please try again.")}}),v=()=>{S.mutate()},E=()=>{};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.r,{}),(0,u._)(A,m.J.CLIENTS.DELETE)?(0,p.jsx)(i.A,{type:"button",onClick:e=>{if(!s)return r.oR.error("Id not found");(0,o.P)({target:e.currentTarget,message:"Do you want to delete this record?",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:v,reject:E})},disabled:S.isPending,className:"outline-button",children:S.isPending?(0,p.jsx)(d.p,{style:{width:"20px",height:"20px"}}):(0,p.jsx)(n.A,{color:"#344054",size:20})}):(0,p.jsx)("span",{})]})}},24572:(e,s,l)=>{function i(e){var s,l={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},i="";for(s in l)for(;e>=l[s];)i+=s,e-=l[s];return i}function n(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})}l.d(s,{Mf:()=>i,i$:()=>t,up:()=>n});const t=(e,s)=>{if(!e)return"-";const l=new Date(1e3*+e);return new Intl.DateTimeFormat("en-AU",{timeZone:"Australia/Sydney",day:"numeric",month:"short",year:"numeric"}).format(l)}},43162:(e,s,l)=>{l.d(s,{$:()=>t,g:()=>a});var i=l(64018),n=l(63712);const t=(e,s)=>{const l=new FormData;l.append("firstname",e.firstname),l.append("lastname",e.lastname),e.email&&l.append("email",e.email);const t=(null===e||void 0===e?void 0:e.phone)&&(0,i.l)(e.phone);if(null!==t&&void 0!==t&&t.nationalNumber&&l.append("phone",e.phone),"0"!=e.category&&l.append("category",e.category),l.append("payment_terms",e.payment_terms),e.description&&l.append("description",e.description),e.address.city&&(l.append("address.country",e.address.country),l.append("address.title",e.address.title),l.append("address.city",e.address.city),l.append("address.address",e.address.address),l.append("address.state",e.address.state),l.append("address.postcode",e.address.postcode),e.address.id&&l.append("address.id",e.address.id)),null!==s&&void 0!==s&&s.croppedImageBlob){const e=(0,n.Ak)(6);l.append("photo",s.croppedImageBlob,`${e}.jpg`)}return l},a=async(e,s,l,i,n)=>{const t=localStorage.getItem("access_token");try{const a=await fetch(e,{method:s,headers:{Authorization:`Bearer ${t}`},body:l});if(a.ok)i(a);else{n(await a.json())}}catch(a){console.error("API request error:",a),n()}}},67046:(e,s,l)=>{l.d(s,{D7:()=>t,HT:()=>A,L:()=>p,Op:()=>c,Sg:()=>a,V3:()=>m,WG:()=>r,cS:()=>d,fW:()=>u,j3:()=>o,oe:()=>h});var i=l(31342);const n="https://app.memate.com.au/api/v1",t=async e=>{const s={method:"POST",body:e},l=new URL(`${n}/sales/new-request/`);return(0,i.f)(l.toString(),s)},a=async(e,s)=>{const l={method:"POST",body:{managers:s}},t=new URL(`${n}${`/sales/managers/${e}/`}`);return(0,i.f)(t.toString(),l)},o=async()=>{const e=new Headers,s=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${s}`);const l={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${n}/sales/`,l);return await e.text()}catch(i){throw console.error("Profile fetch error:",i),i}},d=async(e,s)=>{const l=new Headers,i=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${i}`),l.append("Content-Type","application/json");const t={method:"PUT",headers:l,body:JSON.stringify({sales_note:s}),redirect:"follow"};try{const s=await fetch(`${n}/sales/${e}/notes/`,t);if(!s.ok){const e=await s.text();throw new Error(`Sales notes update failed with status ${s.status}: ${e}`)}const l=await s.text();return l.trim()?JSON.parse(l):null}catch(a){throw console.error("Sales notes update error:",a),a}},r=async e=>{const s={method:"PUT",body:{ids:e}},l=new URL(`${n}/sales/status/won/`);return(0,i.f)(l.toString(),s)},c=async e=>{const s={method:"PUT",body:{ids:e}},l=new URL(`${n}/sales/status/lost/`);return(0,i.f)(l.toString(),s)},h=async(e,s)=>{const l=new Headers,i=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${i}`),l.append("Content-Type","application/json");const t={method:"POST",headers:l,body:JSON.stringify(s),redirect:"follow"};try{const s=await fetch(`${n}/sales/${e}/contacts/`,t);return s.ok?s:(console.log("Error:",s.status),null)}catch(a){return console.log("Error:",a),null}},m=async(e,s)=>{const l=new Headers,i=localStorage.getItem("access_token");l.append("Authorization",`Bearer ${i}`),l.append("Content-Type","application/json");const t={method:"PUT",headers:l,body:JSON.stringify({lead:s,unique_id:e}),redirect:"follow"};try{const s=await fetch(`${n}/sales/${e}/lead/`,t);if(!s.ok){const e=await s.text();throw new Error(`Sales lead update failed with status ${s.status}: ${e}`)}const l=await s.text();return l.trim()?JSON.parse(l):null}catch(a){throw console.error("Sales lead update error:",a),a}},u=async e=>{const s=new Headers,l=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${l}`),s.append("Content-Type","application/json");const i={method:"PUT",headers:s,body:JSON.stringify({ids:e}),redirect:"follow"},t=await Promise.all([fetch(`${n}/sales/status/won/`,i)]);return await Promise.all(t.map((e=>e.json())))},p=async e=>{const s=new Headers,l=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${l}`),s.append("Content-Type","application/json");const i={method:"POST",headers:s,redirect:"follow"},t=await fetch(`${n}/sales/${e}/duplicate/`,i);return(await t.json())[0]},A=async e=>{const s=new Headers,l=localStorage.getItem("access_token");s.append("Authorization",`Bearer ${l}`),s.append("Content-Type","application/json");const i={method:"PUT",headers:s,body:JSON.stringify({ids:e}),redirect:"follow"},t=await Promise.all([fetch(`${n}/sales/status/lost/`,i)]);return await Promise.all(t.map((e=>e.json())))}},74196:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKZSURBVHgBjZM7aBRBGMf/sze53MNAYthdonJ5cZeQFAkSEHyQswiCWJxFIlho4yOFRbAwkigimMIikkI0lSLYSMBSUZK7aFqx0GAUTXyQ+EgkHvHu9h67M87M3i7auezON7v7/X/ft//ZIfiP42MqWc9pcIJX7OMgpJ4QPOeUnGufmX1NemdGkmBIykTGmJiqmYpqFOejmXcnueO0gAOcMzkIDmHlcOgArTh2psJs7N7eiiitxbP1JTjMETou8jgOfcqBM66wn/NFFB0HrdFa1HCu1eQKE7TMKjgTH1CAtcKmLILM90W//d6fJTFylAVkYSOrOmCsDp11YRANezRZpd/swvkX9/DNyiJpdqMp3OADcpT48yjVVNxGAyoKVlaTFbfKFvoa2/F47SX26h2qCwmWcWFHWCUHhXOpnTqOxUzsitRCvQR/QplIvPLqAUa7U2iO6riznMZXa9OHnNjPQFcDsN/bClRD1Avp7aoD5yppuX/KdQjcF7l3wGQij0GzjK0NAz+uf4Fm5ZVYAVri1xK3717WeNVt2YnXtszxxEXWhLXIaZQGjvhiu6cP1vCIIwtpTLVTFVY7mOxwxSwQQ7F+HAFaB7KvH6wtrrqzD6d8Y9UqeJeE3egoKPHKr2ZML44psWEYoJTC7uqB05YAb2j0AbRqgKo+5YtjuDg/hlwlgnyZ42xSU5CN3j4wq4C/D7EK7s871Wlh0HArj86PC2FEPU+/JaI7DcMHAT2ewDr4PwDNqzxklLCSjfli+Zy5nmFOQKYzGgLBIIzOLvU5PmBKGDZklrAsxBcyl5ATYk/oGSuH2SWCW2kBCQRgmiZCoZALONpYefphU4jTY/hdCqkdyeWurEZvLq/ZNxw359ROzOq6/lAC/gA2jGWYJ8Il5QAAAABJRU5ErkJggg=="},74737:(e,s,l)=>{l.d(s,{_:()=>a});var i=l(568);const n=Object.freeze({ADMIN:"Admin",LOCATION_MANAGER:"Location Manager",GENERAL_MANAGER:"General Manager",DEVELOPER:"Developer",DESIGNER:"Designers",SMM_PR:"SMM/PR"}),t={[n.ADMIN]:{permissions:[i.J.CLIENTS.CREATE,i.J.CLIENTS.READ,i.J.CLIENTS.UPDATE,i.J.CLIENTS.DELETE,i.J.SUPPLIERS.CREATE,i.J.SUPPLIERS.READ,i.J.SUPPLIERS.UPDATE,i.J.SUPPLIERS.DELETE,i.J.EXPENSE.CREATE,i.J.EXPENSE.READ,i.J.EXPENSE.UPDATE,i.J.EXPENSE.DELETE,i.J.INVOICE.CREATE,i.J.INVOICE.READ,i.J.INVOICE.UPDATE,i.J.INVOICE.DELETE,i.J.SETTINGS.SUBSCRIPTION.BUY_BUSINESS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_BUSINESS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_COMPANY_USER_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_WORK_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_WORK_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.ACTIVE_WORK_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_WORK_USER_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.BUY_LOCATION_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.REMOVE_LOCATION_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.ACTIVE_INQUIRIES_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_INQUIRIES_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.ACTIVE_ASSETS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.CANCEL_ASSETS_SUBSCRIPTION,i.J.SETTINGS.SUBSCRIPTION.MANAGE_ASSET_SUBSCRIPTION,i.J.SETTINGS.LOCATION.ADD,i.J.SETTINGS.LOCATION.READ,i.J.SETTINGS.LOCATION.UPDATE,i.J.SETTINGS.LOCATION.DELETE,i.J.SETTINGS.USERS.DESKTOP.ADD,i.J.SETTINGS.USERS.DESKTOP.READ,i.J.SETTINGS.USERS.DESKTOP.DELETE,i.J.SETTINGS.USERS.DESKTOP.UPDATE,i.J.SETTINGS.USERS.DESKTOP.RESTORE,i.J.SETTINGS.USERS.DESKTOP.SHOW_DELETED_USERS,i.J.SETTINGS.USERS.MOBILE_APP.ADD,i.J.SETTINGS.USERS.MOBILE_APP.READ,i.J.SETTINGS.USERS.MOBILE_APP.UPDATE,i.J.SETTINGS.USERS.MOBILE_APP.DISCONNECT_USER,i.J.SETTINGS.USERS.MOBILE_APP.RECONNECT_USER,i.J.SETTINGS.USERS.MOBILE_APP.SHOW_DISCONNECTED_USERS]}},a=function(e,s){let l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!t[e])return!1;const i=t[e].permissions;return Array.isArray(s)?l?s.every((e=>i.includes(e))):s.some((e=>i.includes(e))):i.includes(s)}},81493:(e,s,l)=>{l.d(s,{$:()=>U,A:()=>D});var i=l(65043),n=l(14282),t=l(61072),a=l(78602),o=l(44541),d=l(56741),r=l(24291),c=l(35475),h=l(28261),m=l(58387),u=l(93740),p=l(76104),A=l(56328);const x="business-client_profileBox__VGcoZ",S="business-client_box__+9rUT",v="business-client_boxLabel__InMvR",E="business-client_boxLabel2__IXr47",N="business-client_label__v0SXB",j="business-client_text__y7JLT",I="business-client_iconBoxsContainer__pG+eu",C="business-client_iconBox__BOGzY";var T=l(59638),_=l(74196),g=l(73216),R=l(64018),y=l(63712),b=l(33074),f=l(70579);const P=(0,i.forwardRef)(((e,s)=>{var l,n,t,a,o;let{client:d,refetch:r,setIsPending:c,handleExternalSubmit:h,setIsEdit:m}=e;const u=(0,g.Zp)(),[p,x]=(0,i.useState)((null===d||void 0===d?void 0:d.photo)||null),[S,v]=(0,i.useState)({...d,category:(null===d||void 0===d||null===(l=d.category)||void 0===l?void 0:l.id)||1,contact_persons:null===d||void 0===d||null===(n=d.contact_persons)||void 0===n?void 0:n.filter((e=>!(null!==e&&void 0!==e&&e.deleted))).map((e=>({...e,uniqeId:(null===e||void 0===e?void 0:e.id)||"",deleted:null===e||void 0===e?void 0:e.deleted}))),addresses:null===d||void 0===d||null===(t=d.addresses)||void 0===t?void 0:t.filter((e=>!(null!==e&&void 0!==e&&e.deleted))).map((e=>({id:(null===e||void 0===e?void 0:e.id)||"",uniqeId:(null===e||void 0===e?void 0:e.id)||"",deleted:null===e||void 0===e?void 0:e.deleted,title:(null===e||void 0===e?void 0:e.title)||"",country:(null===e||void 0===e?void 0:e.country_id)||"",state:(null===e||void 0===e?void 0:e.state_id)||"",city:(null===e||void 0===e?void 0:e.city)||"",address:(null===e||void 0===e?void 0:e.address)||"",postcode:(null===e||void 0===e?void 0:e.postcode)||""})))}||null);0===(null===S||void 0===S||null===(a=S.addresses)||void 0===a?void 0:a.length)&&S.addresses.push({title:"Main Location",country:1}),0===(null===S||void 0===S||null===(o=S.contact_persons)||void 0===o?void 0:o.length)&&S.contact_persons.push({deleted:!1});return(0,f.jsx)(b.A,{photo:p,setPhoto:x,ref:s,onSubmit:async e=>{d.id?(async e=>{console.log("data: ",e);const s=new FormData;s.append("name",e.name),e.abn&&s.append("abn",e.abn);const l=(null===e||void 0===e?void 0:e.phone)&&(0,R.l)(e.phone);if(null!==l&&void 0!==l&&l.nationalNumber&&s.append("phone",e.phone),e.email&&s.append("email",e.email),e.website&&s.append("website",e.website),s.append("payment_terms",e.payment_terms),"0"!=e.category&&s.append("category",e.category),e.industry&&s.append("industry",e.industry),e.description&&s.append("description",e.description),e.addresses.forEach(((e,l)=>{e.city&&(s.append(`addresses[${l}]city`,e.city),s.append(`addresses[${l}]title`,e.title),s.append(`addresses[${l}]address`,e.address),s.append(`addresses[${l}]is_main`,e.is_main),s.append(`addresses[${l}]postcode`,e.postcode),null!==e&&void 0!==e&&e.id&&s.append(`addresses[${l}]id`,null===e||void 0===e?void 0:e.id))})),e.contact_persons.forEach(((e,l)=>{if(e.firstname||e.email){s.append(`contact_persons[${l}]firstname`,e.firstname),s.append(`contact_persons[${l}]lastname`,e.lastname),s.append(`contact_persons[${l}]email`,e.email);const i=(null===e||void 0===e?void 0:e.phone)&&(0,R.l)(e.phone);null!==i&&void 0!==i&&i.nationalNumber&&s.append(`contact_persons[${l}]phone`,e.phone),s.append(`contact_persons[${l}]position`,e.position),s.append(`contact_persons[${l}]is_main`,e.is_main),null!==e&&void 0!==e&&e.id&&s.append(`contact_persons[${l}]id`,null===e||void 0===e?void 0:e.id)}})),null!==p&&void 0!==p&&p.croppedImageBlob){const e=(0,y.Ak)(6);s.append("photo",null===p||void 0===p?void 0:p.croppedImageBlob,`${e}.jpg`)}try{c(!0);const e=localStorage.getItem("access_token"),l=await fetch(`https://app.memate.com.au/api/v1/clients/update/business/${d.id}/`,{method:"PUT",headers:{Authorization:`Bearer ${e}`},body:s});l.ok?(m(!1),r(),console.log("response: ",l),A.oR.success("Client updated successfully"),u("/clients")):A.oR.error("Failed to update client. Please try again.")}catch(i){A.oR.error("Failed to update client. Please try again.")}finally{c(!1)}})(e):A.oR.error("Client id not found")},defaultValues:S,deleteAddress:async e=>{try{const s=await(0,T.ab)(e);console.log("response: ",s),s.message?A.oR.success("Address deleted successfully."):A.oR.error("Failed to delete address. Please try again.")}catch(s){A.oR.error("Failed to delete address. Please try again.")}},deleteContact:async e=>{try{(await(0,T.F1)(e)).message?A.oR.success("Contact deleted successfully."):A.oR.error("Failed to delete contact. Please try again.")}catch(s){A.oR.error("Failed to delete contact. Please try again.")}}})}));var O=l(21913),w=l(81954);const U=e=>{var s,l,n;let{client:o,refetch:d}=e;const p=(0,h.I)({queryKey:["industries"],queryFn:T.OF}),x=(null===p||void 0===p?void 0:p.data)||[],[E,g]=(0,i.useState)(null),R=[{value:1,label:"COD"},{value:0,label:"Prepaid"},{value:7,label:"Week"},{value:14,label:"Two weeks"},{value:30,label:"One month"}];let y=null===x||void 0===x?void 0:x.find((e=>e.id===(null===o||void 0===o?void 0:o.industry))),b=null===R||void 0===R?void 0:R.find((e=>(null===e||void 0===e?void 0:e.value)===(null===o||void 0===o?void 0:o.payment_terms)));const P=null===o||void 0===o||null===(s=o.addresses)||void 0===s?void 0:s.filter((e=>!(null!==e&&void 0!==e&&e.deleted))),O=null===o||void 0===o||null===(l=o.contact_persons)||void 0===l?void 0:l.filter((e=>!(null!==e&&void 0!==e&&e.deleted)));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:(0,m.A)(S),children:[(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"ABN"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:(null===o||void 0===o?void 0:o.abn)||"-"})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Industry"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:(null===y||void 0===y?void 0:y.name)||"-"})]})]}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Customer Type"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:null!==o&&void 0!==o&&o.is_business?"Business":"Indivisual"})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Phone"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:(null===o||void 0===o?void 0:o.phone)||"-"})]})]}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Email"}),(0,f.jsx)(c.N_,{to:"#",onClick:e=>{e.preventDefault(),window.location.href=`mailto:${null===o||void 0===o?void 0:o.email}`},children:(0,f.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,f.jsxs)("div",{className:"ellipsis-width",title:null===o||void 0===o?void 0:o.email,children:[(null===o||void 0===o?void 0:o.email)||"-","\xa0"]}),(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,f.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Website"}),(0,f.jsx)(c.N_,{to:null!==o&&void 0!==o&&o.website?o.website.startsWith("http://")||o.website.startsWith("https://")?o.website:`https://${o.website}`:"#",target:"_blank",children:(0,f.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,f.jsxs)("div",{className:"ellipsis-width",title:null===o||void 0===o?void 0:o.website,children:[(null===o||void 0===o?void 0:o.website)||"-","\xa0"]}),(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,f.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]})]}),(0,f.jsx)("h5",{className:(0,m.A)(v),children:"Payment Terms"}),(0,f.jsx)("div",{className:(0,m.A)(S),children:(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Payment Terms"}),(0,f.jsx)("h4",{className:(0,m.A)(j,"mb-0"),children:(null===b||void 0===b?void 0:b.label)||"-"})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Customers Discount Category"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:(null===o||void 0===o||null===(n=o.category)||void 0===n?void 0:n.name)||"-"})]})]})}),(0,f.jsx)("h5",{className:(0,m.A)(v),children:"Contact Person"}),null===O||void 0===O?void 0:O.map((e=>(0,f.jsxs)("div",{className:(0,m.A)(S),children:[(0,f.jsx)("div",{className:(0,m.A)(I),children:(0,f.jsx)("button",{className:(0,m.A)(C,"cursor-pointer"),disabled:E===e.id,onClick:()=>(async e=>{try{if(!e)return A.oR.error("Id not found");g(e),await(0,T.Ye)(e),d(),A.oR.success("Contact person has been successfully set as the primary contact")}catch(s){console.error("Error is setting primary contact:",s),A.oR.error("Failed to set primary contact. Please try again.")}finally{g(null)}})(e.id),children:E===e.id?(0,f.jsx)(u.p,{style:{width:"20px",height:"20px"}}):(0,f.jsx)(r.A,{color:e.is_main?"#FFCB45":"#D0D5DD",size:16})})}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Full Name"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:`${e.firstname} ${e.lastname}`})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Email"}),(0,f.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`mailto:${null===e||void 0===e?void 0:e.email}`},children:(0,f.jsxs)("div",{className:"d-flex align-items-center",style:{color:"#106B99",fontSize:"16px"},children:[(0,f.jsxs)("div",{className:"ellipsis-width",title:null===e||void 0===e?void 0:e.email,children:[(null===e||void 0===e?void 0:e.email)||"-","\xa0"]}),(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:(0,f.jsx)("path",{d:"M6.3335 14.1666L14.6668 5.83331M14.6668 5.83331H6.3335M14.6668 5.83331V14.1666",stroke:"#106B99",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})]}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Position"}),(0,f.jsx)("h4",{className:(0,m.A)(j,"mb-0"),children:(null===e||void 0===e?void 0:e.position)||"-"})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Phone"}),(0,f.jsxs)("h4",{className:(0,m.A)(j,"mb-0"),children:[(null===e||void 0===e?void 0:e.phone)||"-","\xa0\xa0",(0,f.jsx)(c.N_,{to:"#",onClick:s=>{s.preventDefault(),window.location.href=`tel:${null===e||void 0===e?void 0:e.phone}`},style:{position:"relative",top:"-2px"},children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,f.jsx)("path",{d:"M4.15387 1.32849C3.90343 1.00649 3.42745 0.976861 3.139 1.26531L2.10508 2.29923C1.6216 2.78271 1.44387 3.46766 1.6551 4.06847C2.50338 6.48124 3.89215 8.74671 5.82272 10.6773C7.75329 12.6078 10.0188 13.9966 12.4315 14.8449C13.0323 15.0561 13.7173 14.8784 14.2008 14.3949L15.2347 13.361C15.5231 13.0726 15.4935 12.5966 15.1715 12.3461L12.8653 10.5524C12.7008 10.4245 12.4866 10.3793 12.2845 10.4298L10.0954 10.9771C9.50082 11.1257 8.87183 10.9515 8.43845 10.5181L5.98187 8.06155C5.54849 7.62817 5.37427 6.99919 5.52292 6.40459L6.07019 4.21553C6.12073 4.01336 6.07552 3.79918 5.94758 3.63468L4.15387 1.32849ZM2.38477 0.511076C3.12689 -0.231039 4.3515 -0.154797 4.99583 0.673634L6.78954 2.97983C7.1187 3.40304 7.23502 3.95409 7.10498 4.47423L6.55772 6.66329C6.49994 6.8944 6.56766 7.13888 6.7361 7.30732L9.19268 9.7639C9.36113 9.93235 9.6056 10.0001 9.83671 9.94229L12.0258 9.39502C12.5459 9.26498 13.097 9.3813 13.5202 9.71047L15.8264 11.5042C16.6548 12.1485 16.731 13.3731 15.9889 14.1152L14.955 15.1492C14.2153 15.8889 13.1089 16.2137 12.0778 15.8512C9.51754 14.9511 7.11438 13.4774 5.06849 11.4315C3.0226 9.38562 1.54895 6.98246 0.648838 4.42225C0.286318 3.39112 0.61113 2.28472 1.35085 1.545L2.38477 0.511076Z",fill:"#106B99"})})})]})]})]})]},e.id))),0===(null===O||void 0===O?void 0:O.length)&&(0,f.jsx)("div",{className:(0,m.A)(S),children:"-"}),(0,f.jsx)("h5",{className:(0,m.A)(v),children:"Locations"}),null===P||void 0===P?void 0:P.map((e=>(0,f.jsxs)("div",{className:(0,m.A)(S),children:[(0,f.jsxs)("div",{className:(0,m.A)(I),children:[(0,f.jsx)("button",{className:(0,m.A)(C,"cursor-pointer"),disabled:E===e.id,onClick:()=>(async e=>{try{if(!e)return A.oR.error("Id not found");g(e),await(0,T.QK)(e),d(),A.oR.success("Address has been successfully set as the primary address")}catch(s){console.error("Error is setting primary address:",s),A.oR.error("Failed to set primary address. Please try again.")}finally{g(null)}})(e.id),children:E===e.id?(0,f.jsx)(u.p,{style:{width:"20px",height:"20px"}}):(0,f.jsx)(r.A,{color:e.is_main?"#FFCB45":"#D0D5DD",size:16})}),(0,f.jsx)("div",{className:(0,m.A)(C),children:(0,f.jsx)(c.N_,{to:`http://maps.google.com/?q=${e.address}`,target:"_blank",children:(0,f.jsx)("img",{src:_,alt:"map"})})})]}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Location Name"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:`${e.title||"-"}`})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Country"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:`${e.country||"-"}`})]})]}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"State"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:`${e.state||"-"}`})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"City"}),(0,f.jsx)("h4",{className:(0,m.A)(j),children:`${e.city||"-"}`})]})]}),(0,f.jsxs)(t.A,{children:[(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Street Address"}),(0,f.jsx)("h4",{className:(0,m.A)(j,"mb-0"),children:`${e.address||"-"}`})]}),(0,f.jsxs)(a.A,{sm:6,children:[(0,f.jsx)("label",{className:(0,m.A)(N),children:"Postcode"}),(0,f.jsx)("h4",{className:(0,m.A)(j,"mb-0"),children:`${e.postcode||"-"}`})]})]})]},e.id))),0===(null===P||void 0===P?void 0:P.length)&&(0,f.jsx)("div",{className:(0,m.A)(S),children:"-"}),(0,f.jsx)("h5",{className:(0,m.A)(v),children:"Client Description"}),(0,f.jsx)("div",{className:(0,m.A)(S,"mb-0"),children:o.description||"-"})]})},D=e=>{let{client:s,refetch:l,closeIconRef:t,hide:a}=e;const r=(0,i.useRef)(null),[c,h]=(0,i.useState)(!1),[u,A]=(0,i.useState)(!1),S=()=>{r.current&&r.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))};return(0,f.jsx)("div",{className:"view-details-sidebar",children:(0,f.jsxs)("div",{className:"d-flex flex-column",children:[(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,f.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,f.jsx)("div",{className:(0,m.A)(x,"d-flex align-items-center justify-content-center"),children:s.has_photo?(0,f.jsx)("img",{src:s.photo,alt:"client-photo"}):(0,f.jsx)(o.A,{color:"#667085",size:26})}),(0,f.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,f.jsx)("span",{style:{color:"344054",fontSize:"22px",fontWeight:600},children:s.name}),s.deleted?(0,f.jsx)(p.v,{value:"Deleted",style:{height:"22px",width:"59px",borderRadius:"16px",border:"1px solid #FECDCA",background:"#FEF3F2",color:"#912018",fontSize:"12px",fontWeight:500}}):""]})]}),(0,f.jsx)("span",{children:(0,f.jsx)(n.A,{type:"button",className:"text-button",ref:t,onClick:e=>a(e),children:(0,f.jsx)(d.A,{size:24,color:"#667085"})})})]}),(0,f.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 122px)",overflow:"auto"},children:[(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,f.jsx)("h5",{className:(0,m.A)(v),children:"Client Details"}),(0,f.jsxs)("h6",{className:(0,m.A)(E),children:["Client ID: ",null===s||void 0===s?void 0:s.number]})]}),u?(0,f.jsx)(P,{ref:r,refetch:l,setIsPending:h,handleExternalSubmit:S,client:s,setIsEdit:A}):(0,f.jsx)(U,{client:s,refetch:l})]}),(0,f.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-between h-100",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)"},children:[s.deleted?(0,f.jsx)("span",{}):(0,f.jsx)(O.A,{id:null===s||void 0===s?void 0:s.id,refetch:l}),u?(0,f.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,f.jsx)(n.A,{type:"button",onClick:e=>{e.stopPropagation(),A(!1)},className:"outline-button",disabled:c,children:"Cancel"}),(0,f.jsx)(n.A,{type:"button",onClick:S,className:"solid-button",style:{width:"180px"},disabled:c,children:c?"Loading...":"Save Client Details"})]}):s.deleted?(0,f.jsx)(w.A,{id:null===s||void 0===s?void 0:s.id,refetch:l}):(0,f.jsx)(n.A,{type:"button",onClick:e=>{e.stopPropagation(),A(!0)},className:"solid-button",children:"Edit Client"})]})]})})}},81954:(e,s,l)=>{l.d(s,{A:()=>c});var i=l(65043),n=l(14282),t=l(73216),a=l(93740),o=l(56328),d=l(59638),r=l(70579);const c=e=>{let{id:s,refetch:l}=e;const c=(0,t.Zp)(),[h,m]=(0,i.useState)(!1);return(0,r.jsxs)(n.A,{type:"button",disabled:h,onClick:e=>{e.stopPropagation(),(async e=>{e||o.oR.error("Id not found");try{m(!0);const s=await(0,d.oO)(e);if(null===s||void 0===s||!s.detail)throw new Error("Failed to restore client.");l(),c("/clients"),o.oR.success("Client restored successfully")}catch(s){console.log("err: ",s),o.oR.error("Failed to restore client. Please try again.")}finally{m(!1)}})(s)},className:"outline-button",children:["Restore Client ",h&&(0,r.jsx)(a.p,{style:{width:"20px",height:"20px"}})]})}},99868:(e,s,l)=>{l.d(s,{A:()=>A});var i=l(65043),n=l(14282),t=l(38294),a=l(35475),o=l(58387);const d="no-data-found-template_noDataBox__HgeT1",r="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",h="no-data-found-template_supportext__pHg2P";var m=l(20793),u=l(32808),p=l(70579);const A=e=>{let{isDataExist:s=!0}=e;const[l,A]=(0,i.useState)(!1);return(0,p.jsxs)("div",{className:(0,o.A)(d),children:[(0,p.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,p.jsx)("img",{src:m,alt:"no-data"})}),s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{className:(0,o.A)(r),children:"There is no results"}),(0,p.jsxs)("p",{className:(0,o.A)(c),children:["The user you are looking for doesn't exist. ",(0,p.jsx)("br",{}),"Here are some helpful links:"]}),(0,p.jsx)(a.N_,{to:"/",children:(0,p.jsxs)(n.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,p.jsx)(t.A,{})," Go back"]})}),(0,p.jsx)(a.N_,{onClick:()=>A(!0),to:"#",children:(0,p.jsx)("span",{className:(0,o.A)(h),children:"Support"})})]}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("h2",{className:(0,o.A)(r),children:"No historical records yet."})}),(0,p.jsx)(u.A,{setVisible:A,visible:l})]})}}}]);
//# sourceMappingURL=3734.3320fbe7.chunk.js.map