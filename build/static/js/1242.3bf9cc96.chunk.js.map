{"version":3,"file":"static/js/1242.3bf9cc96.chunk.js","mappings":"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","sources":["webpack://memateapp/./src/ui/send-email-2/send-email.module.scss?3bd9","ui/send-email-2/send-email.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"headerTitle\":\"send-email_headerTitle__50KUB\",\"customLabel\":\"send-email_customLabel__r5xED\",\"templateInfo\":\"send-email_templateInfo__mWkVT\",\"bag\":\"send-email_bag__wtdwK\",\"lable\":\"send-email_lable__+kNCa\",\"dropdownSelect\":\"send-email_dropdownSelect__RY5w8\",\"autoCompleteBox\":\"send-email_autoCompleteBox__fWZ7C\",\"AutoComplete\":\"send-email_AutoComplete__m9YI5\",\"bcc\":\"send-email_bcc__BwFzl\",\"box\":\"send-email_box__Zlmer\",\"active\":\"send-email_active__vEx4h\",\"inputBox\":\"send-email_inputBox__NpU2b\"};","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Col, Modal, Row } from \"react-bootstrap\";\nimport { InfoCircle } from 'react-bootstrap-icons';\nimport { useQuery } from \"@tanstack/react-query\";\nimport clsx from 'clsx';\nimport { AutoComplete } from \"primereact/autocomplete\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Editor } from \"primereact/editor\";\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from \"primereact/inputtext\";\nimport { OverlayPanel } from 'primereact/overlaypanel';\nimport { ProgressSpinner } from \"primereact/progressspinner\";\nimport style from \"./send-email.module.scss\";\nimport { getEmail, getEmailTemplates, getOutgoingEmail, getSignatureTemplates } from '../../APIs/email-template';\n\nconst renderHeader = () => (\n    <span className=\"ql-formats\">\n        <button className=\"ql-bold\" aria-label=\"Bold\"></button>\n        <button className=\"ql-italic\" aria-label=\"Italic\"></button>\n        <button className=\"ql-underline\" aria-label=\"Underline\"></button>\n        <button className=\"ql-strike\" aria-label=\"Strikethrough\"></button>\n        <button className=\"ql-blockquote\" aria-label=\"Blockquote\"></button>\n        <button\n            className=\"ql-list\"\n            value=\"ordered\"\n            aria-label=\"Ordered List\"\n        ></button>\n        <button\n            className=\"ql-list\"\n            value=\"bullet\"\n            aria-label=\"Bullet List\"\n        ></button>\n        <button className=\"ql-align\" value=\"\" aria-label=\"Align Left\"></button>\n        <button\n            className=\"ql-align\"\n            value=\"center\"\n            aria-label=\"Align Center\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"right\"\n            aria-label=\"Align Right\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"justify\"\n            aria-label=\"Justify\"\n        ></button>\n        <button className=\"ql-link\" aria-label=\"Insert Link\"></button>\n        <button className=\"ql-image\" aria-label=\"Insert Image\"></button>\n        <button className=\"ql-code-block\" aria-label=\"Code Block\"></button>\n    </span>\n);\nconst header = renderHeader();\n\nconst SendDynamicEmailForm = ({ show, setShow, mutation, contactPersons, setPayload, defaultTemplateId, isAddingContact = false }) => {\n    const op = useRef(null);\n    const profileData = JSON.parse(window.localStorage.getItem('profileData') || '{}');\n    const [from, setFrom] = useState('');\n    const [to, setTo] = useState([]);\n    const [cc, setCC] = useState([]);\n    const [bcc, setBCC] = useState([]);\n    const [subject, setSubject] = useState(null);\n    const [text, setText] = useState(null);\n    const [signature, setSignature] = useState(null);\n\n    const [errors, setErrors] = useState({});\n    const [filteredEmails, setFilteredEmails] = useState([]);\n    const autoCompleteRef = useRef(null);\n    const autoCompleteRef2 = useRef(null);\n    const autoCompleteRef3 = useRef(null);\n    const [showCC, setShowCC] = useState(false);\n    const [showBCC, setShowBCC] = useState(false);\n\n    // Email validation function\n    const isValidEmail = useCallback((email) => {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email.trim());\n    }, []);\n\n    // Validate array of emails\n    const validateEmailArray = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return true; // Empty array is valid\n        return emailArray.every(email => isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Get invalid emails from array\n    const getInvalidEmails = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return [];\n        return emailArray.filter(email => !isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Clean email array by removing invalid emails\n    const cleanEmailArray = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return [];\n        return emailArray.filter(email => isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Validate and clean all email fields\n    const validateAndCleanAllEmails = useCallback(() => {\n        let hasErrors = false;\n        \n        // Check TO emails\n        if (to.length > 0) {\n            const invalidToEmails = getInvalidEmails(to);\n            if (invalidToEmails.length > 0) {\n                console.log('Found invalid TO emails:', invalidToEmails);\n                setTo(cleanEmailArray(to));\n                hasErrors = true;\n            }\n        }\n        \n        // Check CC emails\n        if (cc.length > 0) {\n            const invalidCcEmails = getInvalidEmails(cc);\n            if (invalidCcEmails.length > 0) {\n                console.log('Found invalid CC emails:', invalidCcEmails);\n                setCC(cleanEmailArray(cc));\n                hasErrors = true;\n            }\n        }\n        \n        // Check BCC emails\n        if (bcc.length > 0) {\n            const invalidBccEmails = getInvalidEmails(bcc);\n            if (invalidBccEmails.length > 0) {\n                console.log('Found invalid BCC emails:', invalidBccEmails);\n                setBCC(cleanEmailArray(bcc));\n                hasErrors = true;\n            }\n        }\n        \n        return !hasErrors; // Return true if no errors found\n    }, [to, cc, bcc, getInvalidEmails, cleanEmailArray]);\n\n    const [emailTemplateId, setEmailTemplatedId] = useState(null);\n    const reset = () => {\n        setFrom([]);\n        setTo([]);\n        setCC([]);\n        setBCC([]);\n        setSubject([]);\n        setText([]);\n        setEmailTemplatedId(null);\n    };\n\n    const handleClose = () => {\n        setShow(false);\n        if (!defaultTemplateId) reset();\n    };\n\n    const emailTemplateQuery = useQuery({\n        queryKey: [\"emailTemplate\"],\n        queryFn: getEmailTemplates,\n        enabled: !!show,\n    });\n\n    const signatureQuery = useQuery({\n        queryKey: [\"getSignatureTemplates\"],\n        queryFn: getSignatureTemplates,\n        enabled: !!show,\n    });\n\n    const outgoingEmailTemplateQuery = useQuery({\n        queryKey: [\"getOutgoingEmail\"],\n        queryFn: getOutgoingEmail,\n        enabled: !!show,\n    });\n\n    const emailQuery = useQuery({\n        queryKey: [\"emailQuery\", emailTemplateId],\n        queryFn: () => getEmail(emailTemplateId),\n        enabled: !!emailTemplateId,\n        retry: 1,\n    });\n\n    useEffect(() => {\n        if (outgoingEmailTemplateQuery?.data) {\n            if (outgoingEmailTemplateQuery?.data?.outgoing_email && outgoingEmailTemplateQuery?.data?.outgoing_email_verified)\n                setFrom(outgoingEmailTemplateQuery?.data?.outgoing_email);\n            else\n                setFrom('no-reply@memate.com.au');\n        }\n\n        if (!emailTemplateId && emailTemplateQuery?.data && defaultTemplateId) {\n            const activeTemplateId = emailTemplateQuery?.data?.find((template) => template.type === defaultTemplateId);\n            if (activeTemplateId) setEmailTemplatedId(activeTemplateId?.id);\n        }\n\n    }, [emailTemplateQuery, outgoingEmailTemplateQuery, defaultTemplateId, emailTemplateId]);\n\n    const onSubmit = async () => {\n        let errorCount = 0;\n        setErrors({});\n\n        // First, validate and clean all email arrays\n        const allEmailsValid = validateAndCleanAllEmails();\n        if (!allEmailsValid) {\n            console.log('Some emails were invalid and have been cleaned');\n        }\n\n        if (!from) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, from: true }));\n        }\n\n        if (to?.length === 0) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, to: true }));\n        } else if (!validateEmailArray(to)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(to);\n            console.log('Invalid TO emails:', invalidEmails);\n            setErrors((others) => ({ ...others, to: true, toInvalid: true, invalidToEmails: invalidEmails }));\n        }\n\n        if (cc.length > 0 && !validateEmailArray(cc)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(cc);\n            console.log('Invalid CC emails:', invalidEmails);\n            setErrors((others) => ({ ...others, cc: true, invalidCcEmails: invalidEmails }));\n        }\n\n        if (bcc.length > 0 && !validateEmailArray(bcc)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(bcc);\n            console.log('Invalid BCC emails:', invalidEmails);\n            setErrors((others) => ({ ...others, bcc: true, invalidBccEmails: invalidEmails }));\n        }\n\n        if (!subject) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, subject: true }));\n        }\n\n        if (!text) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, text: true }));\n        }\n\n        if (errorCount) return;\n\n        mutation.mutate({\n            subject,\n            email_body: text,\n            from_email: from,\n            to: to?.toString(),\n            ...(cc.length > 0 && { cc: cc.toString() }),\n            ...(bcc.length > 0 && { bcc: bcc.toString() }),\n            ...(signature && { signature: signature })\n        });\n    };\n\n    const search = (event) => {\n        const query = event?.query?.toLowerCase() || '';\n        let emails = contactPersons.map((data) => (data.email))?.filter(email => email);\n        emails = emails.filter((email) => !to.includes(email));\n        emails = emails.filter((email) => !cc.includes(email));\n        emails = emails.filter((email) => !bcc.includes(email));\n\n        emails = emails.filter((email) =>\n            email.toLowerCase().includes(query)\n        );\n\n        setFilteredEmails(emails);\n    };\n\n    const onInputChange = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setTo((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length && validEmails.length > 0) {\n                setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onInputChange2 = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setCC((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length) {\n                setErrors((others) => ({ ...others, cc: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onInputChange3 = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setBCC((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length) {\n                setErrors((others) => ({ ...others, bcc: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onFocus = () => {\n        search();\n        if (autoCompleteRef.current) autoCompleteRef.current.show();\n    };\n\n    const onFocus2 = () => {\n        search();\n        if (autoCompleteRef2.current) autoCompleteRef2.current.show();\n    };\n\n    const onFocus3 = () => {\n        search();\n        if (autoCompleteRef3.current) autoCompleteRef3.current.show();\n    };\n\n    useEffect(() => {\n        if (contactPersons?.length) {\n            let emails = contactPersons.map((data) => (data.email))?.filter(email => email);\n            setFilteredEmails(emails);\n        }\n    }, [contactPersons]);\n\n    // Auto-clean invalid emails from arrays\n    useEffect(() => {\n        if (to.length > 0) {\n            const invalidToEmails = getInvalidEmails(to);\n            if (invalidToEmails.length > 0) {\n                console.log('Auto-cleaning invalid TO emails:', invalidToEmails);\n                const validEmails = cleanEmailArray(to);\n                setTo(validEmails);\n            }\n        }\n    }, [to, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        if (cc.length > 0) {\n            const invalidCcEmails = getInvalidEmails(cc);\n            if (invalidCcEmails.length > 0) {\n                console.log('Auto-cleaning invalid CC emails:', invalidCcEmails);\n                const validEmails = cleanEmailArray(cc);\n                setCC(validEmails);\n            }\n        }\n    }, [cc, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        if (bcc.length > 0) {\n            const invalidBccEmails = getInvalidEmails(bcc);\n            if (invalidBccEmails.length > 0) {\n                console.log('Auto-cleaning invalid BCC emails:', invalidBccEmails);\n                const validEmails = cleanEmailArray(bcc);\n                setBCC(validEmails);\n            }\n        }\n    }, [bcc, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        setPayload((prev) => ({\n            ...prev,\n            subject: subject,\n            email_body: text,\n            from_email: from,\n            to: to?.toString(),\n            ...(cc.length > 0 && { cc: cc.toString() }),\n            ...(bcc.length > 0 && { bcc: bcc.toString() }),\n            ...(signature && { signature: signature })\n        }));\n    }, [subject, text, from, to, cc, bcc, signature, setPayload]);\n\n    useEffect(() => {\n        if (signatureQuery?.data) {\n            setSignature(signatureQuery?.data?.find((template) => template.id === profileData.email_signature)?.id);\n        }\n    }, [signatureQuery?.data, profileData.email_signature]);\n\n    useEffect(() => {\n        setText(emailQuery?.data?.body || \"\");\n        setSubject(emailQuery?.data?.subject);\n        setErrors((others) => ({ ...others, subject: false }));\n        setErrors((others) => ({ ...others, text: false }));\n    }, [emailQuery?.data]);\n\n    return (\n        <Modal\n            show={show}\n            centered\n            onHide={handleClose}\n            className='invoice-form'\n            size='lg'\n        >\n            <Modal.Header closeButton>\n                <div className={`${style.modalHeader}`}>\n                    <div className=\"w-100 d-flex align-items-center gap-2\">\n                        <span className={`white-space-nowrap mt-2 mb-2 ${style.headerTitle}`}>\n                            Send email\n                        </span>\n                    </div>\n                </div>\n            </Modal.Header>\n            <Modal.Body>\n                <Row>\n                    <Col sm={6} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <label className={clsx(style.customLabel)}>FROM</label>\n                            <Dropdown\n                                options={\n                                    (outgoingEmailTemplateQuery && outgoingEmailTemplateQuery?.data && ([{\n                                        value: outgoingEmailTemplateQuery?.data?.outgoing_email,\n                                        label: `${outgoingEmailTemplateQuery?.data?.outgoing_email}`,\n                                    }])) ||\n                                    []\n                                }\n                                className={clsx(\n                                    style.dropdownSelect,\n                                    \"dropdown-height-fixed w-100\"\n                                )}\n                                style={{ height: \"46px\", paddingLeft: '60px' }}\n                                placeholder=\"Select from email\"\n                                onChange={(e) => {\n                                    setFrom(e.value);\n                                    setErrors((others) => ({ ...others, from: false }));\n                                }}\n                                value={from}\n                                filterInputAutoFocus={true}\n                            />\n                        </div>\n                        {errors?.from && (\n                            <p className=\"error-message mb-0\">{\"From email is required\"}</p>\n                        )}\n                    </Col>\n                    <Col sm={6} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <label className={clsx(style.customLabel)}>Templates</label>\n                            <Dropdown\n                                options={\n                                    (emailTemplateQuery &&\n                                        emailTemplateQuery.data?.map((emailTemplate) => ({\n                                            value: emailTemplate.id,\n                                            label: `${emailTemplate.name}`,\n                                        }))) ||\n                                    []\n                                }\n                                className={clsx(\n                                    style.dropdownSelect,\n                                    \"dropdown-height-fixed w-100\"\n                                )}\n                                style={{ height: \"46px\", paddingLeft: '88px' }}\n                                placeholder=\"Select template\"\n                                onChange={(e) => {\n                                    setEmailTemplatedId(e.value);\n                                }}\n                                value={emailTemplateId}\n                                loading={emailTemplateQuery?.isFetching}\n                                filterInputAutoFocus={true}\n                                scrollHeight=\"380px\"\n                            />\n                            <div className={style.templateInfo} onClick={(e) => op.current.toggle(e)}>\n                                <InfoCircle size={16} color='#737374ff' />\n                            </div>\n                            <OverlayPanel ref={op}>\n                                <p className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>Choose from your existing templates here.</p>\n                                <div className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>To edit or add new templates, go to<br /> Profile Settings &gt; Templates &gt; Email<br/> Templates.</div>\n                            </OverlayPanel>\n                        </div>\n                    </Col>\n                </Row>\n                <Row>\n                    <Col sm={12} className='mb-3'>\n                        <div className=\"d-flex gap-3 w-100\">\n                            <div style={{ position: 'relative' }} className={style.autoCompleteBox}>\n                                <div style={{ width: '50px' }} className={style.bag}></div>\n                                <label className={clsx(style.customLabel)}>TO</label>\n                                <AutoComplete\n                                    ref={autoCompleteRef}\n                                    value={to}\n                                    completeMethod={search}\n                                    onChange={(e) => {\n                                        setTo(e.value);\n                                        setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n                                    }}\n                                    multiple\n                                    suggestions={filteredEmails}\n                                    onClick={onFocus}\n                                    onFocus={onFocus}\n                                    onKeyUp={onInputChange}\n                                    onBlur={(e) => {\n                                        const currentValue = e.target.value.trim();\n                                        if (currentValue) {\n                                            if (isValidEmail(currentValue)) {\n                                                setTo((prev) => [...new Set([...prev, currentValue])]);\n                                                setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n                                            } else {\n                                                setErrors((others) => ({ ...others, toInvalid: true }));\n                                            }\n                                            e.target.value = '';\n                                        }\n                                    }}\n                                    className={clsx(style.AutoComplete, \"w-100\")}\n                                    placeholder=\"TO\"\n                                />\n                            </div>\n                            <Button\n                                className={clsx(style.box, { [style.active]: showCC })}\n                                onClick={() => { setShowCC(!showCC); setCC([]); }}\n                            >\n                                CC\n                            </Button>\n                            <Button\n                                className={clsx(style.box, { [style.active]: showBCC })}\n                                onClick={() => { setShowBCC(!showBCC); setBCC([]); }}\n                            >\n                                BCC\n                            </Button>\n                        </div>\n                        {errors?.to && !errors?.toInvalid && (\n                            <p className=\"error-message mb-0\">{\"To email is required\"}</p>\n                        )}\n                        {errors?.toInvalid && (\n                            <div>\n                                <p className=\"error-message mb-0\">{\"Please enter valid email addresses for TO\"}</p>\n                                {errors?.invalidToEmails && errors.invalidToEmails.length > 0 && (\n                                    <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                        Invalid emails: {errors.invalidToEmails.join(', ')}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </Col>\n                    {\n                        showCC &&\n                        <Col sm={6} className='mb-3'>\n                            <div style={{ position: 'relative' }}>\n                                <div style={{ width: '50px' }} className={style.bag}></div>\n                                <label className={clsx(style.customLabel)}>CC</label>\n                                <AutoComplete\n                                    ref={autoCompleteRef2}\n                                    value={cc}\n                                    completeMethod={search}\n                                    onChange={(e) => { \n                                        setCC(e.value);\n                                        setErrors((others) => ({ ...others, cc: false }));\n                                    }}\n                                    multiple\n                                    suggestions={filteredEmails}\n                                    onClick={onFocus2}\n                                    onFocus={onFocus2}\n                                    onKeyUp={onInputChange2}\n                                    onBlur={(e) => {\n                                        const currentValue = e.target.value.trim();\n                                        if (currentValue) {\n                                            if (isValidEmail(currentValue)) {\n                                                setCC((prev) => [...new Set([...prev, currentValue])]);\n                                                setErrors((others) => ({ ...others, cc: false }));\n                                            } else {\n                                                setErrors((others) => ({ ...others, cc: true }));\n                                            }\n                                            e.target.value = '';\n                                        }\n                                    }}\n                                    className={clsx(style.AutoComplete, \"w-100\")}\n                                    placeholder=\"CC\"\n                                />\n                            </div>\n                            {errors?.cc && (\n                                <div>\n                                    <p className=\"error-message mb-0\">{\"Please enter valid email addresses for CC\"}</p>\n                                    {errors?.invalidCcEmails && errors.invalidCcEmails.length > 0 && (\n                                        <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                            Invalid emails: {errors.invalidCcEmails.join(', ')}\n                                        </p>\n                                    )}\n                                </div>\n                            )}\n                        </Col>\n                    }\n\n                    {\n                        showBCC && <Col sm={6} className='mb-3'>\n                            <div style={{ position: 'relative' }}>\n                                <div style={{ width: '60px' }} className={style.bag}></div>\n                                <label className={clsx(style.customLabel)}>BCC</label>\n                                <AutoComplete\n                                    ref={autoCompleteRef3}\n                                    value={bcc}\n                                    completeMethod={search}\n                                    onChange={(e) => { \n                                        setBCC(e.value);\n                                        setErrors((others) => ({ ...others, bcc: false }));\n                                    }}\n                                    multiple\n                                    suggestions={filteredEmails}\n                                    onClick={onFocus3}\n                                    onFocus={onFocus3}\n                                    onKeyUp={onInputChange3}\n                                    onBlur={(e) => {\n                                        const currentValue = e.target.value.trim();\n                                        if (currentValue) {\n                                            if (isValidEmail(currentValue)) {\n                                                setBCC((prev) => [...new Set([...prev, currentValue])]);\n                                                setErrors((others) => ({ ...others, bcc: false }));\n                                            } else {\n                                                setErrors((others) => ({ ...others, bcc: true }));\n                                            }\n                                            e.target.value = '';\n                                        }\n                                    }}\n                                    className={clsx(style.AutoComplete, style.bcc, \"w-100\")}\n                                    placeholder=\"BCC\"\n                                />\n                            </div>\n                            {errors?.bcc && (\n                                <div>\n                                    <p className=\"error-message mb-0\">{\"Please enter valid email addresses for BCC\"}</p>\n                                    {errors?.invalidBccEmails && errors.invalidBccEmails.length > 0 && (\n                                        <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                            Invalid emails: {errors.invalidBccEmails.join(', ')}\n                                        </p>\n                                    )}\n                                </div>\n                            )}\n                        </Col>\n                    }\n                    <Col sm={12} className='mb-2'>\n                        <div style={{ position: 'relative' }}>\n                            <div style={{ width: '60px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>SUBJECT</label>\n                            <IconField>\n                                <InputIcon>\n                                    {emailQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                                </InputIcon>\n                                <InputText\n                                    value={subject}\n                                    className={clsx(style.inputBox, 'w-100')}\n                                    style={{ paddingLeft: '100px' }}\n                                    onChange={(e) => {\n                                        setSubject(e.target.value);\n                                        setErrors((others) => ({ ...others, subject: false }));\n                                    }}\n                                    placeholder=\"{Organization} | Quotation: {number} | {reference}\"\n                                />\n                            </IconField>\n                        </div>\n                        {errors?.subject && (\n                            <p className=\"error-message mb-0\">{\"Subject is required\"}</p>\n                        )}\n                    </Col>\n                    <Col sm={12} className='mb-3'>\n                        <div className=\"d-flex flex-column gap-1\" style={{ position: 'relative' }}>\n                            <label className={clsx(style.lable)}>Message</label>\n                            <InputIcon style={{ position: 'absolute', right: '15px', top: '40px', zIndex: 1 }}>\n                                {emailQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                            </InputIcon>\n                            <Editor\n                                style={{ minHeight: \"150px\" }}\n                                headerTemplate={header}\n                                value={text}\n                                placeholder='Enter a description...'\n                                onTextChange={(e) => {\n                                    setText(e.htmlValue);\n                                    setErrors((others) => ({ ...others, text: false }));\n                                }}\n                            />\n                        </div>\n                        {errors?.text && (\n                            <p className=\"error-message mb-0\">{\"Message is required\"}</p>\n                        )}\n                    </Col>\n                    <Col sm={12}>\n                        <div style={{ position: 'relative' }}>\n                            <label className={clsx(style.customLabel)}>Signature</label>\n                            <Dropdown\n                                options={\n                                    (signatureQuery &&\n                                        signatureQuery.data?.map((template) => ({\n                                            value: template.id,\n                                            label: `${template.name}`,\n                                        }))) ||\n                                    []\n                                }\n                                panelClassName='px880-dropdown-item'\n                                className={clsx(\n                                    style.dropdownSelect,\n                                    \"dropdown-height-fixed w-100\"\n                                )}\n                                style={{ height: \"46px\", paddingLeft: '88px' }}\n                                placeholder=\"Select signature\"\n                                onChange={(e) => {\n                                    setSignature(e.value);\n                                }}\n                                value={signature}\n                                loading={signatureQuery?.isFetching}\n                                filterInputAutoFocus={true}\n                            />\n                        </div>\n                    </Col>\n                </Row>\n            </Modal.Body>\n            <Modal.Footer className='d-flex justify-content-between'>\n                <span></span>\n                <div className=\"d-flex justify-content-end gap-2\">\n                    <Button className=\"outline-button\" onClick={handleClose}>\n                        Cancel{\" \"}\n                    </Button>\n                    <Button disabled={mutation?.isPending} className=\"solid-button\" onClick={onSubmit}>\n                        Send{\" \"}\n                        {(mutation?.isPending || isAddingContact) && (\n                            <ProgressSpinner\n                                style={{ width: \"20px\", height: \"20px\", color: \"#fff\" }}\n                            />\n                        )}\n                    </Button>\n                </div>\n            </Modal.Footer>\n        </Modal>\n    );\n};\n\nexport default SendDynamicEmailForm;"],"names":["header","_jsxs","className","children","_jsx","value","_ref","_outgoingEmailTemplat4","_outgoingEmailTemplat5","_emailTemplateQuery$d2","_signatureQuery$data2","show","setShow","mutation","contactPersons","setPayload","defaultTemplateId","isAddingContact","op","useRef","profileData","JSON","parse","window","localStorage","getItem","from","setFrom","useState","to","setTo","cc","setCC","bcc","setBCC","subject","setSubject","text","setText","signature","setSignature","errors","setErrors","filteredEmails","setFilteredEmails","autoCompleteRef","autoCompleteRef2","autoCompleteRef3","showCC","setShowCC","showBCC","setShowBCC","isValidEmail","useCallback","email","test","trim","validateEmailArray","emailArray","length","every","getInvalidEmails","filter","cleanEmailArray","validateAndCleanAllEmails","hasErrors","invalidToEmails","console","log","invalidCcEmails","invalidBccEmails","emailTemplateId","setEmailTemplatedId","handleClose","emailTemplateQuery","useQuery","queryKey","queryFn","getEmailTemplates","enabled","signatureQuery","getSignatureTemplates","outgoingEmailTemplateQuery","getOutgoingEmail","emailQuery","getEmail","retry","useEffect","_outgoingEmailTemplat","_outgoingEmailTemplat2","_outgoingEmailTemplat3","data","outgoing_email","outgoing_email_verified","_emailTemplateQuery$d","activeTemplateId","find","template","type","id","search","event","_event$query","_contactPersons$map","query","toLowerCase","emails","map","includes","onFocus","current","onFocus2","onFocus3","_contactPersons$map2","validEmails","prev","email_body","from_email","toString","_signatureQuery$data","_signatureQuery$data$","email_signature","_emailQuery$data","_emailQuery$data2","body","others","Modal","centered","onHide","size","Header","closeButton","style","modalHeader","headerTitle","Body","Row","Col","sm","position","clsx","customLabel","Dropdown","options","label","dropdownSelect","height","paddingLeft","placeholder","onChange","e","filterInputAutoFocus","emailTemplate","name","loading","isFetching","scrollHeight","templateInfo","onClick","toggle","InfoCircle","color","OverlayPanel","ref","lineHeight","autoCompleteBox","width","bag","AutoComplete","completeMethod","toInvalid","multiple","suggestions","onKeyUp","currentValue","target","key","split","Set","onBlur","Button","box","active","fontSize","join","IconField","InputIcon","ProgressSpinner","top","InputText","inputBox","lable","right","zIndex","Editor","minHeight","headerTemplate","onTextChange","htmlValue","panelClassName","Footer","disabled","isPending","async","errorCount","invalidEmails","mutate"],"sourceRoot":""}