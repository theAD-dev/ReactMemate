"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3075,6731],{568:(e,s,t)=>{t.d(s,{J:()=>n});const n=Object.freeze({CLIENTS:{CREATE:"CREATE_CLIENT",READ:"READ_CLIENT",UPDATE:"UPDATE_CLIENT",DELETE:"DELETE_CLIENT"},SUPPLIERS:{CREATE:"CREATE_SUPPLIER",READ:"READ_SUPPLIER",UPDATE:"UPDATE_SUPPLIER",DELETE:"DELETE_SUPPLIER"},SALES:{},MANAGEMENT:{},PROJECTS:{},STATISTIC:{},EXPENSE:{CREATE:"CREATE_EXPENSE",READ:"READ_EXPENSE",UPDATE:"UPDATE_EXPENSE",DELETE:"DELETE_EXPENSE"},INVOICE:{CREATE:"CREATE_INVOICE",READ:"READ_INVOICE",UPDATE:"UPDATE_INVOICE",DELETE:"DELETE_INVOICE"},SETTINGS:{SUBSCRIPTION:{BUY_BUSINESS_SUBSCRIPTION:"BUY_BUSINESS_SUBSCRIPTION",CANCEL_BUSINESS_SUBSCRIPTION:"CANCEL_BUSINESS_SUBSCRIPTION",BUY_COMPANY_USER_SUBSCRIPTION:"BUY_COMPANY_USER_SUBSCRIPTION",BUY_WORK_SUBSCRIPTION:"BUY_WORK_SUBSCRIPTION",CANCEL_WORK_SUBSCRIPTION:"CANCEL_WORK_SUBSCRIPTION",ACTIVE_WORK_SUBSCRIPTION:"ACTIVE_WORK_SUBSCRIPTION",BUY_WORK_USER_SUBSCRIPTION:"BUY_WORK_USER_SUBSCRIPTION",BUY_LOCATION_SUBSCRIPTION:"BUY_LOCATION_SUBSCRIPTION",REMOVE_LOCATION_SUBSCRIPTION:"REMOVE_LOCATION_SUBSCRIPTION"},USERS:{MOBILE_APP:{ADD:"ADD_USER",READ:"READ_USER",UPDATE:"UPDATE_USER",DISCONNECT_USER:"DISCONNECT_USER",RECONNECT_USER:"RECONNECT_USER",SHOW_DISCONNECTED_USERS:"SHOW_DISCONNECTED_USERS"},DESKTOP:{ADD:"ADD_USER",READ:"READ_USER",DELETE:"DELETE_USER",UPDATE:"UPDATE_USER",RESTORE:"RESTORE_USER",SHOW_DELETED_USERS:"SHOW_DELETED_USERS"}},LOCATION:{ADD:"ADD_LOCATION",READ:"READ_LOCATION",UPDATE:"UPDATE_LOCATION",DELETE:"DELETE_LOCATION"}}})},17030:(e,s,t)=>{t.d(s,{DY:()=>r,Dc:()=>i,MY:()=>g,VL:()=>m,Vn:()=>d,WL:()=>a,_0:()=>h,ax:()=>o,cM:()=>p,dl:()=>S,jH:()=>v,mL:()=>u,sl:()=>E,tA:()=>c,zw:()=>x});var n=t(31342);const l="https://dev.memate.com.au/api/v1",o=async e=>{const s=new URL(`${l}/references/calc-indexes/`);return 1===e&&s.searchParams.append("all",1),(0,n.f)(s.toString(),{method:"GET"})},i=async e=>{const s=new URL(`${l}${`/references/calculators/${e}/`}`),t=await(0,n.f)(s.toString(),{method:"GET"});return Array.isArray(t)?t.filter((e=>!e.deleted)):t&&!t.deleted?t:null},a=async e=>{const s=new URL(`${l}${`/projects/${e}/`}`);return(0,n.f)(s.toString(),{method:"GET"})},r=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/sales/new-request/`);return(0,n.f)(t.toString(),s)},d=async(e,s)=>{if(!e)throw new Error("No id found");const t={method:"PUT",body:s},o=new URL(`${l}${`/sales/projects/${e}/`}`);return(0,n.f)(o.toString(),t)},c=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/projects/merges/new/`);return(0,n.f)(t.toString(),s)},u=async e=>{const s=new URL(`${l}${`/projects/merges/${e}/delete/`}`);return(0,n.f)(s.toString(),{method:"DELETE"})},m=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/settings/departments/`);return(0,n.f)(t.toString(),s)},p=async(e,s)=>{if(!e)return;const t={method:"PUT",body:s},o=new URL(`${l}${`/settings/departments/update/${e}/`}`);return(0,n.f)(o.toString(),t)},x=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/settings/sub-departments/`);return(0,n.f)(t.toString(),s)},h=async(e,s)=>{if(!e)return;const t={method:"PUT",body:s},o=new URL(`${l}${`/settings/sub-departments/update/${e}/`}`);return(0,n.f)(o.toString(),t)},v=async(e,s)=>{const t={method:"POST",body:s},o=new URL(`${l}${`/references/calculators/${e}/new/`}`);return(0,n.f)(o.toString(),t)},E=async(e,s,t)=>{const o={method:"PUT",body:t},i=new URL(`${l}${`/references/calculators/${e}/update/${s}/`}`);return(0,n.f)(i.toString(),o)},g=async e=>{const s=new URL(`${l}${e}`);return(0,n.f)(s.toString(),{method:"DELETE"})},S=async e=>{const s={method:"POST",body:e.map(((e,s)=>({id:e.id,order:s+1})))},t=new URL(`${l}/settings/departments/order/`);return(0,n.f)(t.toString(),s)}},20793:(e,s,t)=>{e.exports=t.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},44908:(e,s,t)=>{t.d(s,{A:()=>_e});var n=t(65043),l=t(61072),o=t(78602),i=t(14282),a=t(77918),r=t(96141),d=t(544),c=t(60867),u=t(55850),m=t(9634),p=t(93202),x=t(51038),h=t(94819),v=t(89488),E=t(24858),g=t(5293),S=t(35475),f=t(18403),N=t(93747),j=t(86213),_=t(58387),A=t(75758),T=t(85371),I=t(88060),R=t(28676),y=t(74532),C=t(79255),P=t(72052),b=t(27932),O=t(59690),U=t(20288),D=t(1356),w=t(56328),L=t(80899);const B="expenses-form_circledesignstyle__mbb1-",$="expenses-form_out__KMiJx",F="expenses-form_bgGreay__JyrcA",J="expenses-form_lable__PwIbw",G="expenses-form_inputText__juz8k",M="expenses-form_error__BY34l",z="expenses-form_dropdownSelect__9h-UH",k="expenses-form_expensesCreateNew__okukP",V="expenses-form_dividerIcon__9TOjY",Y="expenses-form_expTotalRow__8u8o3",q="expenses-form_CalItem__5I8ic",W="expenses-form_CalItemActive__NBMtY",H="expenses-form_autoComplete__xaJgU",K="expenses-form_fileBox__vJk+d",X="expenses-form_fileNameBox__Sb+Fy",Z="expenses-form_deleteBox__IPh+B",Q="expenses-form_aiProcessingBox__Xslof",ee="expenses-form_aiProcessingSpinner__2Ykt8",se="expenses-form_aiProcessingText__r+NWH",te="expenses-form_aiSuccessBox__5wZSk",ne="expenses-form_aiSuccessText__g6HC8",le="expenses-form_aiNoDataBox__dy9sT",oe="expenses-form_aiNoDataText__fTku6",ie="expenses-form_aiErrorBox__nCorV",ae="expenses-form_aiErrorText__a5YuG";var re=t(17030),de=t(10586),ce=t(52781);const ue=t.p+"static/media/ai-scan.5a0b826f54cf1e4e72f8.png";var me=t(27472);const pe=e=>{try{if("object"===typeof e&&null!==e){if(!(Array.isArray(e)&&e.length>0&&Array.isArray(e[0])))return e;{const s=e[0].find((e=>"text"===e[0]));s&&s[1]&&(e=s[1])}}if("string"===typeof e){const s=e.match(/```json\s*([\s\S]*?)\s*```/);if(s&&s[1])return JSON.parse(s[1]);const t=e.indexOf("{"),n=e.lastIndexOf("}");if(-1!==t&&-1!==n){const s=e.substring(t,n+1);return JSON.parse(s)}}return null}catch(s){return console.error("Error extracting AI response data:",s),null}},xe=e=>{if(!e)return null;let s="0.00";e.total_amount&&(s=e.total_amount.replace(/[A-Za-z$,]/g,"").trim());let t="no";!0===e.gst_included?t="in":!1===e.gst_included&&(t="ex");const n=parseFloat(s)||0;let l=n,o=0;return"in"===t?(o=.1*n/1.1,l=n-o):"ex"===t&&(o=.1*l),{invoice_reference:e.invoice_number||"",amount:n.toFixed(2),"gst-calculation":t,gst:"ex"===t,nogst:"no"===t,subtotal:l.toFixed(2),tax:o.toFixed(2),totalAmount:(l+o).toFixed(2),note:e.description||""}};var he=t(14834),ve=t(33296),Ee=t(58027),ge=t(11281),Se=(t(66601),t(70579));const fe=L.Ik({supplier:L.ai().typeError("Supplier must be a valid id").required("Supplier is required"),invoice_reference:L.Yj().required("Invoice reference is required"),date:L.Yj().required("Date is required"),due_date:L.Yj().required("Due date is required").test("is-after-date","Due date must be after the invoice date",(function(e){const{date:s}=this.parent;if(!s||!e)return!0;const t=new Date(s),n=new Date(e);return t.setHours(0,0,0,0),n.setHours(0,0,0,0),n>=t})),amount:L.Yj().required("Amount is required"),nogst:L.zM().required("NOGST must be a boolean"),gst:L.zM().required("GST must be a boolean")}).required(),Ne=(0,n.forwardRef)(((e,s)=>{var t,g,L,Ne,_e,Ae,Te,Ie,Re,ye,Ce,Pe,be,Oe,Ue;let{onSubmit:De,defaultValues:we,id:Le,defaultSupplier:Be,projectId:$e}=e;const Fe=(0,n.useRef)(null),Je=(0,n.useRef)(null),Ge=localStorage.getItem("access_token"),[Me,ze]=(0,n.useState)(Be||""),[ke,Ve]=(0,n.useState)([]),[Ye,qe]=(0,n.useState)([]),[We,He]=(0,n.useState)(1),[Ke,Xe]=(0,n.useState)((null===Be||void 0===Be?void 0:Be.name)||""),[Ze,Qe]=(0,n.useState)(!0),[es,ss]=(0,n.useState)(!1),[ts,ns]=(0,n.useState)([]),{control:ls,reset:os,register:is,handleSubmit:as,setValue:rs,getValues:ds,watch:cs,setError:us,trigger:ms,formState:{errors:ps}}=(0,E.mN)({resolver:(0,f.t)(fe),defaultValues:we}),{getRootProps:xs,getInputProps:hs}=(0,v.VB)({maxFiles:1,multiple:!1,accept:{"application/pdf":[".pdf",".png",".jpg",".jpeg"]},maxSize:5242880,onDrop:e=>{const s=e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e),progress:0})));qe((()=>[...s])),Ss(s,!1)}}),{getRootProps:vs,getInputProps:Es}=(0,v.VB)({maxFiles:1,multiple:!1,accept:{"application/pdf":[".pdf",".png",".jpg",".jpeg"]},maxSize:5242880,onDrop:e=>{const s=e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e),progress:0,aiAnalysis:!0})));qe((()=>[...s])),Ss(s,!0)}}),gs=async(e,s)=>j.A.put(s,e,{headers:{"Content-Type":""},onUploadProgress:t=>{const n=Math.round(t.loaded/t.total*100);qe((t=>t.map((t=>t.name===e.name?Object.assign(t,{progress:n,url:s}):t))))}}).catch((t=>{console.log("err: ",t),qe((t=>t.map((t=>t.name===e.name?Object.assign(t,{progress:0,url:s,error:!0}):t))))})),Ss=async(e,s)=>{if(e.length)for(const l of e)try{const e=await j.A.post("https://dev.memate.com.au/api/v1/expenses/file/",{file_name:l.name},{headers:{Authorization:`Bearer ${Ge}`}}),{url:n}=e.data;if(!n)return qe([]),void w.oR.error(`Failed to upload ${l.name}. Please try again.`);await gs(l,n);const o=n.split("?")[0]||"";if(o&&(ns([o]),ss(!0)),!s)return rs("file",o),void qe((e=>e.map((e=>e.name===l.name?Object.assign(e,{progress:100}):e))));if(s){qe((e=>e.map((e=>e.name===l.name?Object.assign(e,{progress:100,aiProcessing:!0}):e)))),w.oR.info("AI is analyzing your document...",{duration:3e3});try{const e=await j.A.post("https://dev.memate.com.au/api/v1/expenses/recognize/",{file_url:o},{headers:{Authorization:`Bearer ${Ge}`}}),s=pe(null===e||void 0===e?void 0:e.data);if(s){const e=xe(s);e?(rs("file",o),Object.entries(e).forEach((e=>{let[s,t]=e;rs(s,t)})),ms(["invoice_reference","amount","gst","nogst"]),w.oR.success("Form prefilled with invoice data"),qe((e=>e.map((e=>e.name===l.name?Object.assign(e,{aiProcessing:!1,aiSuccess:!0}):e))))):(qe((e=>e.map((e=>e.name===l.name?Object.assign(e,{aiProcessing:!1,aiNoData:!0}):e)))),w.oR.warning("No invoice data could be extracted from the document"))}else qe((e=>e.map((e=>e.name===l.name?Object.assign(e,{aiProcessing:!1,aiNoData:!0}):e)))),w.oR.warning("No invoice data could be extracted from the document")}catch(t){console.error("Error during AI recognition:",t),qe((e=>e.map((e=>e.name===l.name?Object.assign(e,{aiProcessing:!1,aiError:!0}):e)))),w.oR.error("Failed to analyze the document. Please try again.")}}}catch(n){console.error("Error uploading file:",l.name,n),w.oR.error(`Failed to upload ${l.name}. Please try again.`)}},fs=()=>{Fe.current&&Fe.current.show();const e=document.querySelector(".p-autocomplete-items li.p-autocomplete-item:last-child");e&&Je.current.observe(e)},Ns=function(e,s){let t;return function(){for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>e(...l)),s)}}((e=>{var s;const t=(null===e||void 0===e||null===(s=e.query)||void 0===s?void 0:s.toLowerCase())||"";Xe(t)}),300);(0,n.useEffect)((()=>{He(1)}),[Ke]),(0,n.useEffect)((()=>{(async()=>{const e=await(0,ce.Jj)(We,25,Ke,"name");var s;1===We?Ve(e.results):(null===e||void 0===e||null===(s=e.results)||void 0===s?void 0:s.length)>0&&Ve((s=>{const t=new Set(s.map((e=>e.id))),n=e.results.filter((e=>!t.has(e.id)));return[...s,...n]}));Qe(e.count!==ke.length)})()}),[We,Ke]),(0,n.useEffect)((()=>{if(ke.length>0&&Ze){Je.current=new IntersectionObserver((e=>{e[0].isIntersecting&&He((e=>e+1)),console.log("entries[0].isIntersecting: ",e[0].isIntersecting)}));const e=document.querySelector(".p-autocomplete-items li.p-autocomplete-item:last-child");e&&Je.current.observe(e)}return()=>{Je.current&&Je.current.disconnect()}}),[ke,Ze]);const js=e=>{if(e){const s=parseFloat(ds("amount"))||0,{subtotal:t,calculatedTax:n,totalAmount:l}=((e,s)=>{let t=0,n=0;return"ex"===s?(n=e,t=.1*n):"in"===s?(t=.1*e/1.1,n=e-t):(n=e,t=0),{subtotal:n.toFixed(2),calculatedTax:t.toFixed(2),totalAmount:(parseFloat(n)+parseFloat(t)).toFixed(2)}})(s,e);rs("tax",n),rs("subtotal",t),rs("totalAmount",l),rs("nogst","no"===e),rs("gst","ex"===e),ms(["gst"])}},_s=(0,N.I)({queryKey:["getXeroCodesList"],queryFn:de.JP}),As=(0,N.I)({queryKey:["getDepartments"],queryFn:re.ax}),Ts=(0,N.I)({queryKey:["getProjectsList"],queryFn:de.Bu}),Is=["Assign to project","Assign to timeframe"],[Rs,ys]=(0,n.useState)((null===we||void 0===we?void 0:we.option)||Is[0]),Cs=cs("order");(0,n.useEffect)((()=>{Cs&&ms(["order"])}),[Cs]);const Ps=cs("type"),bs=()=>{"Assign to project"!==Rs||Cs||us("order",{type:"manual",message:"Order is required"}),"Assign to timeframe"!==Rs||Ps||us("type",{type:"manual",message:"Type is required"})};(0,n.useEffect)((()=>{Object.keys(ps).length>0&&bs()}),[ps]),(0,n.useEffect)((()=>{"Assign to timeframe"===Rs?(rs("order",""),null!==we&&void 0!==we&&we.type&&rs("type",null===we||void 0===we?void 0:we.type)):"Assign to project"===Rs&&(rs("type",""),null!==we&&void 0!==we&&we.order&&rs("order",null===we||void 0===we?void 0:we.order)),rs("option",Rs)}),[Rs]),(0,n.useEffect)((()=>{null!==we&&void 0!==we&&we.option&&ys(null===we||void 0===we?void 0:we.option)}),[null===we||void 0===we?void 0:we.option]);(0,n.useEffect)((()=>{$e&&rs("order",+$e)}),[$e]),(0,n.useEffect)((()=>{Le||rs("gst-calculation","in")}),[]),(0,n.useEffect)((()=>{var e,s;if(rs("supplier",+(null===Me||void 0===Me?void 0:Me.id)),null!==Me&&void 0!==Me&&Me.id&&ms(["supplier"]),null!==Me&&void 0!==Me&&null!==(e=Me.service)&&void 0!==e&&e.code&&null!==_s&&void 0!==_s&&null!==(s=_s.data)&&void 0!==s&&s.length){var t;let e=null===_s||void 0===_s||null===(t=_s.data)||void 0===t?void 0:t.find((e=>{var s;return e.code===(null===Me||void 0===Me||null===(s=Me.service)||void 0===s?void 0:s.code)}));rs("account_code",null===e||void 0===e?void 0:e.id)}else rs("account_code",we.account_code||"")}),[Me,null===_s||void 0===_s?void 0:_s.data,rs,ms,we.account_code]);const Os=(0,Se.jsx)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0 w-100",style:{borderBottom:"1px solid #EAECF0",padding:"4px 10px 24px 0px"},children:(0,Se.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,Se.jsx)("div",{className:B,children:(0,Se.jsx)("div",{className:$,children:(0,Se.jsx)(a.A,{size:24,color:"#17B26A"})})}),(0,Se.jsx)("span",{style:{color:"344054",fontSize:"20px",fontWeight:600},children:"Document Preview"})]})});return(0,n.useEffect)((()=>{null!==we&&void 0!==we&&we.file&&(ns([null===we||void 0===we?void 0:we.file]),ss(!0))}),[null===we||void 0===we?void 0:we.file]),(0,n.useEffect)((()=>{we&&(rs("supplier",null===we||void 0===we?void 0:we.supplier),rs("invoice_reference",null===we||void 0===we?void 0:we.invoice_reference),rs("date",null===we||void 0===we?void 0:we.date),rs("due_date",null===we||void 0===we?void 0:we.due_date),rs("amount",null===we||void 0===we?void 0:we.amount),rs("nogst",null===we||void 0===we?void 0:we.nogst),rs("gst",null===we||void 0===we?void 0:we.gst),rs("order",null===we||void 0===we?void 0:we.order),rs("type",null===we||void 0===we?void 0:we.type),rs("account_code",null===we||void 0===we?void 0:we.account_code),rs("department",null===we||void 0===we?void 0:we.department),rs("note",null===we||void 0===we?void 0:we.note),rs("option",null===we||void 0===we?void 0:we.option),rs("gst-calculation",null!==we&&void 0!==we&&we.gst?"ex":null!==we&&void 0!==we&&we.nogst?"no":"in"),rs("subtotal",null===we||void 0===we?void 0:we.subtotal),rs("tax",null===we||void 0===we?void 0:we.tax),rs("totalAmount",null===we||void 0===we?void 0:we.totalAmount))}),[we,rs]),(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("form",{ref:s,onSubmit:as((e=>{bs(),Object.keys(ps).length>0?console.log("Validation errors:",ps):De(e,os)})),children:[(0,Se.jsxs)(l.A,{className:(0,_.A)(F,"pt-3"),children:[(0,Se.jsx)(o.A,{sm:8,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mb-3",children:[(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Supplier",(0,Se.jsx)("span",{className:"required",children:"*"})]}),(0,Se.jsx)("input",{type:"hidden",...is("supplier")}),(0,Se.jsx)(A.j,{ref:Fe,value:Me||"",completeMethod:Ns,onChange:e=>{e.value||Xe(""),ze(e.value)},dropdownAutoFocus:!0,field:"name",suggestions:ke,itemTemplate:e=>(0,Se.jsxs)("div",{className:"d-flex gap-2 align-items-center w-100",children:[(0,Se.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"4px",overflow:"hidden",border:"1px solid #dedede"},children:(0,Se.jsx)(Ee.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!0,size:17})}),(0,Se.jsx)("div",{className:"ellipsis-width",style:{maxWidth:"350px"},children:null===e||void 0===e?void 0:e.name})]}),onClick:fs,onFocus:fs,onBlur:()=>{console.log("blur"),He(1),Xe(""),Qe(!0)},style:{minHeight:"46px"},scrollHeight:"450px",className:(0,_.A)(H,"w-100",{[M]:ps.supplier}),placeholder:"Search for supplier"}),ps.supplier&&(0,Se.jsx)("p",{className:"error-message",children:ps.supplier.message})]})}),(0,Se.jsx)(o.A,{sm:4,children:(0,Se.jsx)("div",{className:"d-flex justify-content-end text-md-end flex-column gap-1 mt-3 pt-3 mb-3",children:(0,Se.jsx)(S.N_,{to:"/suppliers?addNewSupplier=true",target:"_blank",children:(0,Se.jsxs)(i.A,{className:k,children:["Create New Supplier",(0,Se.jsx)(r.A,{size:24,color:"#475467"})]})})})}),(0,Se.jsx)(o.A,{sm:12,className:"mb-4",children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Invoice/#Ref",(0,Se.jsx)("span",{className:"required",children:"*"})]}),(0,Se.jsxs)(R.C,{children:[(0,Se.jsx)(y.m,{children:(null===ps||void 0===ps?void 0:ps.invoice_reference)&&(0,Se.jsx)("img",{src:me.A,className:"mb-3"})}),(0,Se.jsx)(P.S,{...is("invoice_reference"),className:(0,_.A)(G,{[M]:ps.invoice_reference}),placeholder:"Enter invoice reference"})]}),(null===ps||void 0===ps?void 0:ps.invoice_reference)&&(0,Se.jsx)("p",{className:"error-message",children:null===(t=ps.invoice_reference)||void 0===t?void 0:t.message})]})}),(0,Se.jsxs)(o.A,{sm:12,children:[(0,Se.jsxs)(l.A,{children:[(0,Se.jsxs)(o.A,{sm:6,children:[(0,Se.jsx)("label",{className:(0,_.A)(J),children:"Upload Only"}),(0,Se.jsxs)("div",{...xs({className:"dropzone d-flex justify-content-center align-items-center flex-column"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"5px"},children:[(0,Se.jsx)("input",{...hs()}),(0,Se.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,Se.jsx)(d.A,{size:20,color:"#475467"})}),(0,Se.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,Se.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,Se.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"PDF, SVG, PNG, JPG files \u2022 Max size: 5MB"})]})]}),(0,Se.jsxs)(o.A,{sm:6,children:[(0,Se.jsx)("label",{className:(0,_.A)(J),children:"Upload & Read With AI"}),(0,Se.jsxs)("div",{...vs({className:"dropzone d-flex justify-content-center align-items-center flex-column"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"5px"},children:[(0,Se.jsx)("input",{...Es()}),(0,Se.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #FFF",background:"#f2f2f2",borderRadius:"8px",marginBottom:"16px"},children:(0,Se.jsx)("img",{src:ue,className:"w-100"})}),(0,Se.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,Se.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,Se.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"PDF, PNG, JPG, JPEG files \u2022 Max size: 5MB"})]})]})]}),(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(null===Ye||void 0===Ye?void 0:Ye.length)>0&&(0,Se.jsx)("label",{className:(0,_.A)(J,"mt-4 mb-1"),children:"Photo/Document Of The Expense"}),null===Ye||void 0===Ye?void 0:Ye.map(((e,s)=>(0,Se.jsxs)("div",{className:K,children:[(0,ge.I)(e.type),(0,Se.jsxs)("div",{className:X,children:[(0,Se.jsx)("p",{className:"mb-0",children:(null===e||void 0===e?void 0:e.name)||""}),(0,Se.jsxs)("p",{className:"mb-0",children:[parseFloat((null===e||void 0===e?void 0:e.size)/1024).toFixed(2)," KB - ",parseInt(null===e||void 0===e?void 0:e.progress)||0,"% uploaded"]})]}),(0,Se.jsx)("div",{className:"ms-auto",children:e.error?(0,Se.jsx)("div",{className:Z,children:(0,Se.jsx)(c.A,{color:"#F04438",size:16})}):e.aiProcessing?(0,Se.jsxs)("div",{className:Q,children:[(0,Se.jsx)("div",{className:ee}),(0,Se.jsx)("span",{className:se,children:"AI analyzing..."})]}):e.aiSuccess?(0,Se.jsxs)("div",{className:te,children:[(0,Se.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Se.jsx)("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM7 11.4L3.6 8L5 6.6L7 8.6L11 4.6L12.4 6L7 11.4Z",fill:"#12B76A"})}),(0,Se.jsx)("span",{className:ne,children:"Data extracted"})]}):e.aiNoData?(0,Se.jsxs)("div",{className:le,children:[(0,Se.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Se.jsx)("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"#F79009"})}),(0,Se.jsx)("span",{className:oe,children:"No data found"})]}):e.aiError?(0,Se.jsxs)("div",{className:ie,children:[(0,Se.jsx)(c.A,{color:"#F04438",size:16}),(0,Se.jsx)("span",{className:ae,children:"AI error"})]}):100==e.progress?(0,Se.jsx)(u.A,{color:"#12B76A",size:20}):(0,Se.jsx)(ve.A,{percentage:parseInt(null===e||void 0===e?void 0:e.progress)||0,size:30,color:"#158ECC"})})]},s)))]})]}),(0,Se.jsx)(o.A,{sm:6,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4 mb-4",children:[(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Date",(0,Se.jsx)("span",{className:"required",children:"*"})]}),(0,Se.jsx)(E.xI,{name:"date",control:ls,render:e=>{let{field:s}=e;return(0,Se.jsx)(T.V,{...s,onChange:e=>{s.onChange(e.value),setTimeout((()=>ms("due_date")),0)},showButtonBar:!0,placeholder:"DD/MM/YY",dateFormat:"dd/mm/yy",showIcon:!0,style:{height:"46px"},icon:(0,Se.jsx)(m.A,{color:"#667085",size:20}),className:(0,_.A)(G,{[M]:ps.date},"p-0 outline-none")})}}),(null===ps||void 0===ps?void 0:ps.date)&&(0,Se.jsx)("p",{className:"error-message",children:null===(g=ps.date)||void 0===g?void 0:g.message})]})}),(0,Se.jsx)(o.A,{sm:6,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4 mb-4",children:[(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Due Date",(0,Se.jsx)("span",{className:"required",children:"*"})]}),(0,Se.jsx)(E.xI,{name:"due_date",control:ls,render:e=>{let{field:s}=e;const t=cs("date"),n=t?new Date(t):null;return(0,Se.jsx)(T.V,{...s,onChange:e=>{s.onChange(e.value),ms("due_date")},showButtonBar:!0,placeholder:"DD/MM/YY",dateFormat:"dd/mm/yy",locale:"en",showIcon:!0,minDate:n,style:{height:"46px"},icon:(0,Se.jsx)(m.A,{color:"#667085",size:20}),className:(0,_.A)(G,{[M]:ps.due_date},"p-0 outline-none")})}}),(null===ps||void 0===ps?void 0:ps.due_date)&&(0,Se.jsx)("p",{className:"error-message",children:null===(L=ps.due_date)||void 0===L?void 0:L.message})]})}),(0,Se.jsx)(o.A,{sm:6,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Total Amount",(0,Se.jsx)("span",{className:"required",children:"*"})]}),(0,Se.jsxs)(R.C,{children:[(0,Se.jsx)(C.Y,{prefix:"$",value:cs("amount"),onValueChange:e=>{rs("amount",e.value),js(ds("gst-calculation"))},onBlur:()=>js(ds("gst-calculation")),style:{height:"46px",padding:"0px"},className:(0,_.A)(G,{[M]:ps.amount}),placeholder:"$ Enter total amount",maxFractionDigits:2,minFractionDigits:2,inputId:"minmaxfraction"}),(0,Se.jsx)(y.m,{children:ps.amount&&(0,Se.jsx)("img",{src:me.A,className:"mb-3"})})]}),(null===ps||void 0===ps?void 0:ps.amount)&&(0,Se.jsx)("p",{className:"error-message",children:null===(Ne=ps.amount)||void 0===Ne?void 0:Ne.message})]})}),(0,Se.jsx)(o.A,{sm:6,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mb-2",children:[(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["GST",(0,Se.jsx)("span",{className:"required",children:"*"})]}),(0,Se.jsx)("input",{type:"hidden",...is("nogst")}),(0,Se.jsx)(E.xI,{name:"gst-calculation",control:ls,render:e=>{let{field:s}=e;return(0,Se.jsx)(I.m,{...s,options:[{value:"ex",label:"GST Exclusive"},{value:"in",label:"GST Inclusive"},{value:"no",label:"No GST"}]||0,onChange:e=>{s.onChange(e.value),js(e.value)},className:(0,_.A)(z,"dropdown-height-fixed",{[M]:null===ps||void 0===ps?void 0:ps.gst}),style:{height:"46px"},value:s.value,placeholder:"Select GST",filterInputAutoFocus:!0})}}),(null===ps||void 0===ps?void 0:ps.gst)&&(0,Se.jsx)("p",{className:"error-message",children:null===(_e=ps.gst)||void 0===_e?void 0:_e.message})]})})]}),(0,Se.jsxs)(l.A,{className:`${Y}`,children:[(0,Se.jsxs)(o.A,{className:"d-flex align-items-center justify-content-end",style:{position:"relative"},children:[(0,Se.jsx)("div",{className:q,children:(0,Se.jsxs)("div",{children:[(0,Se.jsx)("span",{children:"Subtotal"}),(0,Se.jsxs)("strong",{children:["$",(0,he.m)(cs("subtotal")||"0.00")]})]})}),(0,Se.jsx)("div",{className:V,children:(0,Se.jsx)(p.A,{color:"#667085",size:20})})]}),(0,Se.jsxs)(o.A,{className:"d-flex align-items-center justify-content-end",style:{position:"relative"},children:[(0,Se.jsx)("div",{className:q,children:(0,Se.jsxs)("div",{children:[(0,Se.jsx)("span",{children:"Tax"}),(0,Se.jsxs)("strong",{children:["$",(0,he.m)(cs("tax")||"0.00")]})]})}),(0,Se.jsx)("div",{className:V,children:(0,Se.jsx)("span",{style:{color:"#1D2939",fontSize:"14px",fontWeight:600},children:"="})})]}),(0,Se.jsx)(o.A,{style:{position:"relative"},children:(0,Se.jsx)("div",{className:`${W} ${q}`,children:(0,Se.jsxs)("div",{children:[(0,Se.jsx)("span",{children:"Total"}),(0,Se.jsxs)("strong",{className:"text-nowrap",children:["$",(0,he.m)(cs("totalAmount")||"0.00")]})]})})})]}),(0,Se.jsxs)(l.A,{className:(0,_.A)(F,"customSelectButton"),children:[(0,Se.jsx)(O.J,{value:Rs,onChange:e=>ys(e.value),options:Is}),"Assign to project"===Rs?(0,Se.jsx)(o.A,{sm:12,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4 mb-4",children:[(0,Se.jsx)(D.m,{position:"top",target:".info-timeinterval"}),(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Link to Project",(0,Se.jsx)("span",{className:"required",children:"*"})," ",(0,Se.jsx)(x.A,{color:"#667085",style:{position:"relative",top:"-1px"},className:"ms-1 info-timeinterval","data-pr-tooltip":"Select an existing project to assign expenses and display the exact cost of using this asset."})]}),(0,Se.jsx)(E.xI,{name:"order",control:ls,render:e=>{var s;let{field:t}=e;return(0,Se.jsx)(I.m,{...t,options:(null===Ts||void 0===Ts||null===(s=Ts.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:`${e.number}: ${e.reference}`}))))||[],onChange:e=>{t.onChange(e.value)},className:(0,_.A)(z,"dropdown-height-fixed",{[M]:null===ps||void 0===ps?void 0:ps.order}),style:{height:"46px"},value:t.value,loading:null===Ts||void 0===Ts?void 0:Ts.isFetching,placeholder:"Select project",filter:!0,filterInputAutoFocus:!0,scrollHeight:"400px"})}}),(null===ps||void 0===ps?void 0:ps.order)&&(0,Se.jsx)("p",{className:"error-message",children:null===(Ae=ps.order)||void 0===Ae?void 0:Ae.message})]})}):(0,Se.jsx)(o.A,{sm:12,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4 mb-4",children:[(0,Se.jsx)(D.m,{position:"top",target:".info-timeinterval"}),(0,Se.jsxs)("label",{className:(0,_.A)(J),children:["Expense time interval",(0,Se.jsx)("span",{className:"required",children:"*"})," ",(0,Se.jsx)(x.A,{color:"#667085",style:{position:"relative",top:"-1px"},className:"ms-1 info-timeinterval","data-pr-tooltip":"Selecting this option will categorize the expense under 'Operational Expense' and distribute it evenly over the chosen timeframe."})]}),(0,Se.jsx)(E.xI,{name:"type",control:ls,render:e=>{let{field:s}=e;return(0,Se.jsx)(I.m,{...s,options:[{value:1,label:"Monthly"},{value:2,label:"Yearly"}],onChange:e=>{s.onChange(e.value)},className:(0,_.A)(z,"dropdown-height-fixed",{[M]:null===ps||void 0===ps?void 0:ps.type}),style:{height:"46px"},value:s.value,placeholder:"Select expense time interval",filterInputAutoFocus:!0})}}),(null===ps||void 0===ps?void 0:ps.type)&&(0,Se.jsx)("p",{className:"error-message",children:null===(Te=ps.type)||void 0===Te?void 0:Te.message})]})})]}),(0,Se.jsx)(l.A,{className:(0,_.A)(F),children:(0,Se.jsx)(o.A,{sm:12,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,Se.jsx)("label",{className:(0,_.A)(J),children:"Notes"}),(0,Se.jsxs)(R.C,{children:[(0,Se.jsx)(y.m,{style:{top:"75%"},children:ps.note&&(0,Se.jsx)("img",{src:me.A,alt:"error-icon"})}),(0,Se.jsx)(b.Z,{...is("note"),rows:3,cols:30,className:(0,_.A)(G,{[M]:ps.note}),style:{resize:"none"},placeholder:"Enter a note..."})]}),ps.note&&(0,Se.jsx)("p",{className:"error-message",children:ps.note.message})]})})}),(0,Se.jsxs)(l.A,{className:(0,_.A)(F),children:[(0,Se.jsx)(o.A,{sm:6,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4 mb-4",children:[(0,Se.jsx)("label",{className:(0,_.A)(J),children:"Account Code"}),(0,Se.jsx)(E.xI,{name:"account_code",control:ls,render:e=>{var s;let{field:t}=e;return(0,Se.jsx)(I.m,{...t,options:[..._s&&(null===_s||void 0===_s||null===(s=_s.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:`${e.code}: ${e.name}`}))))||[]]||[],onChange:e=>{t.onChange(e.value)},className:(0,_.A)(z,"dropdown-height-fixed",{[M]:null===ps||void 0===ps?void 0:ps.account_code}),style:{height:"46px"},scrollHeight:"400px",value:t.value,loading:null===_s||void 0===_s?void 0:_s.isFetching,placeholder:"Select account code",filter:!0,filterInputAutoFocus:!0})}}),(null===ps||void 0===ps?void 0:ps.account_code)&&(0,Se.jsx)("p",{className:"error-message",children:null===(Ie=ps.account_code)||void 0===Ie?void 0:Ie.message})]})}),(0,Se.jsx)(o.A,{sm:6,children:(0,Se.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4 mb-4",children:[(0,Se.jsx)("label",{className:(0,_.A)(J),children:"Department"}),(0,Se.jsx)(E.xI,{name:"department",control:ls,render:e=>{var s;let{field:t}=e;return(0,Se.jsx)(I.m,{...t,options:[...As&&(null===As||void 0===As||null===(s=As.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:`${e.name}`}))))||[]]||[],onChange:e=>{t.onChange(e.value)},className:(0,_.A)(z,"dropdown-height-fixed",{[M]:null===ps||void 0===ps?void 0:ps.department}),style:{height:"46px"},scrollHeight:"400px",value:t.value,loading:null===As||void 0===As?void 0:As.isFetching,placeholder:"Select department",filter:!0,filterInputAutoFocus:!0})}}),(null===ps||void 0===ps?void 0:ps.department)&&(0,Se.jsx)("p",{className:"error-message",children:null===(Re=ps.department)||void 0===Re?void 0:Re.message})]})})]}),(null===we||void 0===we?void 0:we.file)&&(0,Se.jsx)(l.A,{className:(0,_.A)(F),children:(0,Se.jsx)(o.A,{sm:12,children:(0,Se.jsx)("div",{className:"d-flex flex-column gap-1",children:(0,Se.jsxs)("div",{className:"d-flex flex-column",children:[(0,Se.jsx)("label",{className:(0,_.A)(J,"mb-2"),children:"Photo/Document Of The Expense"}),(null===we||void 0===we?void 0:we.file)&&(0,Se.jsxs)("div",{className:K,children:[(0,ge.I)((null===we||void 0===we||null===(ye=we.file)||void 0===ye||null===(Ce=ye.split("."))||void 0===Ce?void 0:Ce[(null===we||void 0===we||null===(Pe=we.file)||void 0===Pe?void 0:Pe.split(".").length)-1])||""),(0,Se.jsxs)("div",{className:X,children:[(0,Se.jsx)(S.N_,{className:"linkText",to:null===we||void 0===we?void 0:we.file,target:"_blank",children:(0,Se.jsx)("p",{className:"mb-0",children:(null===we||void 0===we||null===(be=we.file)||void 0===be||null===(Oe=be.split("/"))||void 0===Oe?void 0:Oe[(null===we||void 0===we||null===(Ue=we.file)||void 0===Ue?void 0:Ue.split("/").length)-1])||""})}),(0,Se.jsx)("p",{className:"mb-0"})]}),(0,Se.jsx)("div",{className:"ms-auto",children:(0,Se.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{background:"#FEE4E2",borderRadius:"200px",width:"30px",height:"30px"},children:(0,Se.jsx)(h.A,{size:16,color:"#F04438",style:{cursor:"pointer"},onClick:()=>{}})})})]})]})})})})]}),(0,Se.jsx)(U.B,{visible:es&&(null===ts||void 0===ts?void 0:ts.length),header:Os,position:"right",modal:!1,dismissable:!1,style:{width:"1200px",paddingRight:"720px"},maskClassName:"p-sidebar-mask-document",onHide:()=>ss(!1),children:(0,Se.jsx)(je,{files:ts})})]})})),je=e=>{let{files:s}=e;const[t,l]=(0,n.useState)({}),o=(e,s)=>{l((t=>{var n,l;const o=(null===(n=t[e])||void 0===n?void 0:n.currentPage)||1,i=(null===(l=t[e])||void 0===l?void 0:l.numPages)||1,a=Math.min(Math.max(o+s,1),i);return{...t,[e]:{...t[e],currentPage:a}}}))};return(0,Se.jsx)("div",{style:{display:"grid",gap:"2rem"},children:s.map(((e,s)=>{if(/\.(jpeg|jpg|png|webp|gif|svg)$/i.test(e))return(0,Se.jsx)("img",{src:e,alt:`preview-${s}`,style:{maxWidth:"100%",maxHeight:"400px",border:"1px solid #ccc"}},s);if((e=>/\.pdf$/i.test(e))(e)){const n=t[e]||{},{numPages:i=null,currentPage:a=1}=n;return(0,Se.jsxs)("div",{style:{border:"1px solid #ccc",padding:"1rem",maxWidth:"420px"},children:[(0,Se.jsx)(g.yo,{file:e,onLoadSuccess:s=>((e,s)=>{let{numPages:t}=s;l((s=>({...s,[e]:{...s[e],numPages:t,currentPage:1}})))})(e,s),onLoadError:e=>console.error("PDF load error:",e),children:(0,Se.jsx)(g.YW,{pageNumber:a,width:400})}),i&&(0,Se.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem",gap:"1rem"},children:[(0,Se.jsx)("button",{className:"outline-button px-2",style:{height:"30px"},onClick:()=>o(e,-1),disabled:a<=1,children:"\u2039"}),(0,Se.jsxs)("span",{children:[a," of ",i]}),(0,Se.jsx)("button",{className:"outline-button px-2",style:{height:"30px"},onClick:()=>o(e,1),disabled:a>=i,children:"\u203a"})]})]},s)}return(0,Se.jsxs)("p",{children:["Unsupported file type: ",e]},s)}))})},_e=Ne},52781:(e,s,t)=>{t.d(s,{Jj:()=>o,O5:()=>r,Xq:()=>i,tg:()=>d,xe:()=>a});var n=t(31342);const l="https://dev.memate.com.au/api/v1",o=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;const a=(e-1)*s,r=new URL(`${l}/suppliers/`);return r.searchParams.append("limit",s),r.searchParams.append("offset",a),t&&r.searchParams.append("name",t),o&&r.searchParams.append("ordering",o),i&&r.searchParams.append("deleted",1),(0,n.f)(r.toString(),{method:"GET"})},i=async e=>{const s=new URL(`${l}${`/suppliers/${e}/`}`);return(0,n.f)(s.toString(),{method:"GET"})},a=async function(e,s,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5?arguments[5]:void 0;const r=(s-1)*t,d=new URL(`${l}${`/suppliers/history/${e}/`}`);return d.searchParams.append("limit",t),d.searchParams.append("offset",r),o&&d.searchParams.append("name",o),i&&d.searchParams.append("ordering",i),a&&d.searchParams.append("deleted",1),(0,n.f)(d.toString(),{method:"GET"})},r=async e=>{const s=new URL(`${l}${`/suppliers/${e}/`}`);return(0,n.f)(s.toString(),{method:"DELETE"})},d=async e=>{const s=new URL(`${l}${`/suppliers/restore/${e}/`}`);return(0,n.f)(s.toString(),{method:"POST"})}},54967:(e,s,t)=>{t.d(s,{A:()=>r,h:()=>d});var n=t(65043),l=t(44541),o=t(95192);const i="image-avatar_clientImg__-nnRU";var a=t(70579);const r=e=>{let{has_photo:s,photo:t,is_business:i,size:r}=e;const[d,c]=(0,n.useState)(!1),u=i?l.A:o.A;return(0,a.jsx)(a.Fragment,{children:s&&t&&!d?(0,a.jsx)("img",{src:t,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):(0,a.jsx)(u,{color:"#667085",size:r})})},d=e=>{let{has_photo:s,photo:t,is_business:r}=e;const[d,c]=(0,n.useState)(!1),u=r?l.A:o.A;return(0,a.jsx)("div",{className:`d-flex justify-content-center align-items-center ${i} ${r?"":"rounded-circle"}`,style:{overflow:"hidden"},children:s&&t&&!d?(0,a.jsx)("img",{src:t,alt:"client avatar",className:"w-100",onError:()=>c(!0)}):(0,a.jsx)(u,{color:"#667085"})})}},62284:(e,s,t)=>{t.d(s,{A:()=>v});var n=t(65043),l=t(14282),o=t(93202),i=t(56741),a=t(47097),r=t(20288),d=t(56328);const c="new-expense-create_circledesignstyle__Ke3sy",u="new-expense-create_out__C1Mi-",m="new-expense-create_expensesEditHead__xr-7V";var p=t(10586),x=t(44908),h=t(70579);const v=e=>{let{visible:s,setVisible:t,setRefetch:v}=e;const E=window.location.href,g=new URL(E),S=new URLSearchParams(g.search),[f,N]=(0,n.useState)(null),j=new Date,_=new Date(j);_.setDate(_.getDate()+1);const A=(0,n.useRef)(null),[T,I]=(0,n.useState)({option:"Assign to timeframe",type:2,notification:!1,date:j,due_date:_});(0,n.useEffect)((()=>{const e=S.get("projectId"),s=S.get("reference");s&&(I((e=>({...e,invoice_reference:s}))),g.searchParams.delete("reference"),window.history.replaceState({},"",g)),e&&(t(!0),N(e),I((e=>({...e,option:"Assign to project"}))),g.searchParams.delete("projectId"),window.history.replaceState({},"",g))}),[f,t]);const R=(0,a.n)({mutationFn:e=>(0,p.Rv)(e),onSuccess:e=>{console.log("response: ",e),d.oR.success("Expense created successfully"),P(),v((e=>!e))},onError:e=>{console.error("Error creating expense:",e),d.oR.error("Failed to create expense. Please try again.")}}),y=async e=>{delete e["gst-calculation"],delete e.option,delete e.subtotal,delete e.totalAmount,delete e.tax,e.order||delete e.order,e.type||(e.type=1),e.date&&(e.date=new Date(e.date).toISOString().split("T")[0]),e.due_date&&(e.due_date=new Date(e.due_date).toISOString().split("T")[0]),R.mutate(e)},C=()=>{A.current&&A.current.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},P=()=>{t(!1),N(null),I({option:"Assign to timeframe",type:2,notification:!1,date:j,due_date:_})};return(0,h.jsx)(r.B,{visible:s,position:"right",onHide:P,modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{let{closeIconRef:s,hide:t}=e;return(0,h.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"24px"},children:[(0,h.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,h.jsx)("div",{className:c,children:(0,h.jsx)("div",{className:u,children:(0,h.jsx)(o.A,{size:24,color:"#17B26A"})})}),(0,h.jsx)("span",{style:{color:"344054",fontSize:"20px",fontWeight:600},children:"Create new Expense"})]}),(0,h.jsx)("span",{children:(0,h.jsx)(l.A,{type:"button",className:"text-button",ref:s,onClick:e=>t(e),children:(0,h.jsx)(i.A,{size:24,color:"#667085"})})})]}),(0,h.jsxs)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 105px)",overflow:"auto"},children:[(0,h.jsx)("div",{className:`d-flex align-items-center mb-2 justify-content-between ${m}`,children:(0,h.jsx)("h5",{children:"Expense Details"})}),(0,h.jsx)(x.A,{ref:A,onSubmit:y,defaultValues:T,projectId:f})]}),(0,h.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-end gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,h.jsx)(l.A,{type:"button",onClick:e=>{e.stopPropagation(),P()},className:"outline-button",children:"Cancel"}),(0,h.jsx)(l.A,{type:"button",onClick:C,className:"solid-button",style:{minWidth:"70px"},children:R.isPending?"Loading...":"Save"})]})]})}})}},74737:(e,s,t)=>{t.d(s,{_:()=>i});var n=t(568);const l=Object.freeze({ADMIN:"Admin",LOCATION_MANAGER:"Location Manager",GENERAL_MANAGER:"General Manager",DEVELOPER:"Developer",DESIGNER:"Designers",SMM_PR:"SMM/PR"}),o={[l.ADMIN]:{permissions:[n.J.CLIENTS.CREATE,n.J.CLIENTS.READ,n.J.CLIENTS.UPDATE,n.J.CLIENTS.DELETE,n.J.SUPPLIERS.CREATE,n.J.SUPPLIERS.READ,n.J.SUPPLIERS.UPDATE,n.J.SUPPLIERS.DELETE,n.J.EXPENSE.CREATE,n.J.EXPENSE.READ,n.J.EXPENSE.UPDATE,n.J.EXPENSE.DELETE,n.J.INVOICE.CREATE,n.J.INVOICE.READ,n.J.INVOICE.UPDATE,n.J.INVOICE.DELETE,n.J.SETTINGS.SUBSCRIPTION.BUY_BUSINESS_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.CANCEL_BUSINESS_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.BUY_COMPANY_USER_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.BUY_WORK_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.CANCEL_WORK_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.ACTIVE_WORK_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.BUY_WORK_USER_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.BUY_LOCATION_SUBSCRIPTION,n.J.SETTINGS.SUBSCRIPTION.REMOVE_LOCATION_SUBSCRIPTION,n.J.SETTINGS.LOCATION.ADD,n.J.SETTINGS.LOCATION.READ,n.J.SETTINGS.LOCATION.UPDATE,n.J.SETTINGS.LOCATION.DELETE,n.J.SETTINGS.USERS.DESKTOP.ADD,n.J.SETTINGS.USERS.DESKTOP.READ,n.J.SETTINGS.USERS.DESKTOP.DELETE,n.J.SETTINGS.USERS.DESKTOP.UPDATE,n.J.SETTINGS.USERS.DESKTOP.RESTORE,n.J.SETTINGS.USERS.DESKTOP.SHOW_DELETED_USERS,n.J.SETTINGS.USERS.MOBILE_APP.ADD,n.J.SETTINGS.USERS.MOBILE_APP.READ,n.J.SETTINGS.USERS.MOBILE_APP.UPDATE,n.J.SETTINGS.USERS.MOBILE_APP.DISCONNECT_USER,n.J.SETTINGS.USERS.MOBILE_APP.RECONNECT_USER,n.J.SETTINGS.USERS.MOBILE_APP.SHOW_DISCONNECTED_USERS]}},i=function(e,s){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!o[e])return!1;const n=o[e].permissions;return Array.isArray(s)?t?s.every((e=>n.includes(e))):s.some((e=>n.includes(e))):n.includes(s)}},99868:(e,s,t)=>{t.d(s,{A:()=>h});var n=t(65043),l=t(14282),o=t(38294),i=t(35475),a=t(58387);const r="no-data-found-template_noDataBox__HgeT1",d="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",u="no-data-found-template_supportext__pHg2P";var m=t(20793),p=t(63919),x=t(70579);const h=e=>{let{isDataExist:s=!0}=e;const[t,h]=(0,n.useState)(!1);return(0,x.jsxs)("div",{className:(0,a.A)(r),children:[(0,x.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,x.jsx)("img",{src:m,alt:"no-data"})}),s?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h2",{className:(0,a.A)(d),children:"There is no results"}),(0,x.jsxs)("p",{className:(0,a.A)(c),children:["The user you are looking for doesn't exist. ",(0,x.jsx)("br",{}),"Here are some helpful links:"]}),(0,x.jsx)(i.N_,{to:"/",children:(0,x.jsxs)(l.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,x.jsx)(o.A,{})," Go back"]})}),(0,x.jsx)(i.N_,{onClick:()=>h(!0),to:"#",children:(0,x.jsx)("span",{className:(0,a.A)(u),children:"Support"})})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("h2",{className:(0,a.A)(d),children:"No historical records yet."})}),(0,x.jsx)(p.A,{setVisible:h,visible:t})]})}}}]);
//# sourceMappingURL=3075.894fc379.chunk.js.map