"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[971],{623:(e,t,n)=>{n.d(t,{IY:()=>b,Kh:()=>d,Nh:()=>l,Np:()=>f,PR:()=>c,SG:()=>p,YC:()=>w,fD:()=>y,hW:()=>u,ic:()=>S,j:()=>h,ms:()=>v,oQ:()=>i,sq:()=>x,vU:()=>m,yA:()=>j,yi:()=>g});var r=n(63712),o=n(40472);const a="https://dev.memate.com.au/api/v1",s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{method:n="GET",headers:r={},body:o}=t,a={method:n,headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json",...r},body:JSON.stringify(o),redirect:"follow"};try{const t=new URL(`${e}`),n=await fetch(t,a);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const r=n.headers.get("Content-Type");if(r&&r.includes("application/json"))return await n.json();return{message:"Non-JSON response",body:await n.text()}}catch(s){throw console.error("Fetch API error:",s),s}},i=async()=>{const e=new URL(`${a}/settings/subscriptions/tax-id/`);return s(e.toString(),{method:"GET"})},c=async()=>{const e=new URL(`${a}/settings/subscriptions/upcoming/`);return s(e.toString(),{method:"GET"})},l=async e=>{const t={method:"PUT",body:e},n=new URL(`${a}/settings/subscriptions/tax-id/`);return s(n.toString(),t)},d=async()=>{const e=new URL(`${a}/settings/subscriptions/payment-method/`);return s(e.toString(),{method:"GET"})},u=async()=>{const e=new URL(`${a}/subscriptions/retry/`);return s(e.toString(),{method:"POST"})},h=async e=>{const t={method:"PUT",body:e},n=new URL(`${a}/settings/subscriptions/payment-method/`);return s(n.toString(),t)},p=async()=>{const e=new URL(`${a}/settings/organization/region-language/`);return s(e.toString(),{method:"GET"})},m=async e=>{const t={method:"PUT",body:e},n=new URL(`${a}/settings/organization/region-language/`);return s(n.toString(),t)},g=async e=>{console.log("data: ",e),e.id&&delete e.id,e.isNew&&delete e.isNew,e.isChanged&&delete e.isChanged,e.value&&delete e.value;const t={method:"POST",body:e},n=new URL(`${a}/settings/project-statuses/new/`);return s(n.toString(),t)},f=async(e,t)=>{const n={method:"PUT",body:t},r=new URL(`${a}${`/settings/project-statuses/update/${e}/`}`);return s(r.toString(),n)},y=async e=>{const t=new URL(`${a}${`/settings/project-statuses/delete/${e}/`}`);return s(t.toString(),{method:"DELETE"})},w=async()=>{const e=new Headers,t=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${t}`);const n={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${a}/settings/organization/general/`,n);return await e.json()}catch(r){throw console.error("Profile fetch error:",r),r}},b=async(e,t)=>{const n=new Headers,o=localStorage.getItem("access_token");n.append("Authorization",`Bearer ${o}`);const s=new FormData;if(Object.keys(e).forEach((t=>{s.append(t,e[t])})),null!==t&&void 0!==t&&t.croppedImageBlob){const e=(0,r.Ak)(6);s.append("company_logo",null===t||void 0===t?void 0:t.croppedImageBlob,`${e}.jpg`)}const i={method:"PUT",headers:n,body:s,redirect:"follow"};try{const e=await fetch(`${a}/settings/organization/general/`,i),t=await e.text();return console.log("result>>>>>>>>>>: ",t),t}catch(c){throw console.error("Profile fetch error:",c),c}},v=async()=>{const e=new Headers,t=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${t}`);const n={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${a}/settings/organization/bank/`,n);return await e.text()}catch(r){throw console.error("Profile fetch error:",r),r}},j=async e=>{const t=new Headers,n=localStorage.getItem("access_token");t.append("Authorization",`Bearer ${n}`);const r=new FormData;Object.keys(e).forEach((t=>{r.append(t,e[t])}));const o={method:"PUT",headers:t,body:r,redirect:"follow"};try{const e=await fetch(`${a}/settings/organization/bank/`,o),t=await e.text();return console.log("result: ",t),t}catch(s){throw console.error("Profile fetch error:",s),s}},S=async()=>{const e=new Headers,t=localStorage.getItem("access_token");e.append("Authorization",`Bearer ${t}`);const n={method:"GET",headers:e,redirect:"follow"};try{const e=await fetch(`${a}/settings/project-statuses/`,n);return await e.json()}catch(r){throw console.error("project fetch error:",r),r}},x=async()=>{try{const e=JSON.parse(localStorage.getItem("profileData")).location,t=await(0,o.g$)(e);if(!t||!t.state)return console.error("Invalid location details:",t),[];const n=`/locations/${t.state}/holidays/`,r={method:"GET"},i=new URL(`${a}${n}`);return s(i.toString(),r)}catch(e){return console.error("Error fetching holidays:",e),[]}}},10971:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(65043),o=n(73898),a=n(49367),s=n(24858),i=n(35475),c=n(18403),l=n(74856),d=n(80899),u=n(24932),h=n(623),p=n(48417),m=n(70579);const g=d.Ik().shape({bank_name:d.Yj().required("Bank name is required"),bsb:d.Yj().matches(/^\d{6}$/,"BSB must be 6 digits").required("BSB is required"),account_number:d.Yj().matches(/^\d+$/,"Account number must be numeric").required("Account number is required")}),f=()=>{const{trialHeight:e}=(0,p.$)(),[t,n]=(0,r.useState)(!1),[d,f]=(0,r.useState)(!0),[y,w]=(0,r.useState)(!1),[b,v]=(0,r.useState)(""),j=t?80:160,S={bank_name:"Bank Name",bsb:"BSB",account_number:"Account"},{register:x,handleSubmit:$,setValue:k,formState:{errors:E},watch:N}=(0,s.mN)({resolver:(0,c.t)(g)});(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,h.ms)(),t=JSON.parse(e);Object.keys(t).forEach((e=>k(e,t[e])))}catch(b){console.error("Error fetching Bank information:",b),v("Failed to load bank details. Please try again later.")}finally{f(!1)}})()}),[k]);return(0,m.jsxs)("div",{className:"settings-wrap",children:[(0,m.jsx)(a.mg,{children:(0,m.jsx)("title",{children:"MeMate - Bank Details"})}),(0,m.jsxs)("div",{className:"settings-content",children:[(0,m.jsxs)("div",{className:"headSticky",children:[(0,m.jsx)("h1",{children:"Company Information"}),(0,m.jsx)("div",{className:"contentMenuTab",children:(0,m.jsxs)("ul",{children:[(0,m.jsx)("li",{children:(0,m.jsx)(i.N_,{to:"/settings/generalinformation",children:"General Information"})}),(0,m.jsx)("li",{className:"menuActive",children:(0,m.jsx)(i.N_,{to:"/settings/generalinformation/bank-details",children:"Bank Details"})}),(0,m.jsx)("li",{children:(0,m.jsx)(i.N_,{to:"/settings/generalinformation/region-and-language",children:"Region & Language"})})]})})]}),(0,m.jsx)("div",{className:"content_wrap_main pb-0 "+(t?"isEditingwrap":""),style:{height:`calc(100vh - 230px - ${e}px)`},children:(0,m.jsx)("div",{className:"content_wrapper pb-0 h-100",children:(0,m.jsxs)("div",{className:`listwrapper ${u.A.listwrapp} pb-0`,children:[(0,m.jsxs)("div",{className:"topHeadStyle",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"Bank Details"}),t?(0,m.jsx)("p",{className:"font-14",style:{color:"#475467"},children:"Provide your company's bank details. This information will be displayed on your quotes and invoices to facilitate EFT transactions."}):(0,m.jsx)("p",{className:"font-14",style:{color:"#475467"},children:"This will show on your invoices "})]}),!t&&(0,m.jsxs)(i.N_,{to:"#",onClick:()=>n(!0),children:["Edit ",(0,m.jsx)(o.A,{color:"#667085",size:20})]})]}),(0,m.jsxs)("form",{onSubmit:$((async e=>{try{w(!0),await(0,h.yA)(e),n(!1),window.location.reload()}catch(b){console.error("Error updating Bank information:",b),v("Failed to update bank details. Please try again.")}finally{w(!1)}})),children:[(0,m.jsx)("ul",{style:{overflow:"auto",height:`calc(100vh - 200px - ${e}px - ${j}px)`},children:["bank_name","bsb","account_number"].map(((e,n)=>(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:S[e]}),d?(0,m.jsx)(l.E,{width:"100%",height:"2rem"}):t?(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"text",...x(e)}),E[e]&&(0,m.jsx)("p",{className:"error-message",children:E[e].message})]}):(0,m.jsx)("strong",{children:N(e)||""})]},n)))}),t&&(0,m.jsxs)("div",{className:"updateButtonGeneral pb-3",style:{position:"fixed",bottom:0,width:"calc(100vw - 320px)",right:20},children:[(0,m.jsx)("button",{type:"button",className:"cancel",onClick:()=>n(!1),disabled:d,children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"save",disabled:y,children:y?"Saving...":"Save"})]})]}),b&&(0,m.jsx)("p",{className:"error-message",children:b})]})})})]})]})}},24932:(e,t,n)=>{n.d(t,{A:()=>r});const r={activelist:"general_activelist__FWpML",viewBorderWrap:"general_viewBorderWrap__h1m3m",editBorderWrap:"general_editBorderWrap__p-Bng",editinfo:"general_editinfo__FLHp1",editpara:"general_editpara__Db271",listwrapp:"general_listwrapp__S9ISd"}},31342:(e,t,n)=>{n.d(t,{f:()=>r});const r=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{method:r="GET",headers:o={},body:a}=t,s=localStorage.getItem("access_token"),i=a instanceof FormData,c={"Content-Type":i?"multipart/form-data":"application/json",...o};n&&(c.Authorization=`Bearer ${s}`);const l={method:r,headers:c,body:i?a:JSON.stringify(a),redirect:"follow"};try{const t=new URL(e),n=await fetch(t,l),r=n.headers.get("Content-Type");if(!n.ok){var d;let e=null;e=r&&r.includes("application/json")?await n.json():await n.text(),401===n.status&&(localStorage.clear(),sessionStorage.clear(),window.location.replace("/login"));const t=new Error((null===(d=e)||void 0===d?void 0:d.message)||`HTTP error! Status: ${n.status}`);throw t.status=n.status,t.data=e,t}if(r&&r.includes("application/json"))return await n.json();return{message:"Non-JSON response",body:await n.text()}}catch(u){throw console.error("Fetch API error:",u),u}}},40472:(e,t,n)=>{n.d(t,{MA:()=>d,N_:()=>h,Nt:()=>c,g$:()=>s,ir:()=>u,uU:()=>a,yJ:()=>i,zR:()=>l});var r=n(31342);const o="https://dev.memate.com.au/api/v1",a=async()=>{const e=new URL(`${o}/locations/`);return(0,r.f)(e.toString(),{method:"GET"})},s=async e=>{const t=new URL(`${o}${`/locations/${e}`}`);return(0,r.f)(t.toString(),{method:"GET"})},i=async e=>{const t={method:"POST",body:e},n=new URL(`${o}/locations/new/`);return(0,r.f)(n.toString(),t)},c=async(e,t)=>{if(!e)throw new Error("No id found");const n={method:"PUT",body:t},a=new URL(`${o}${`/locations/${e}/update/`}`);return(0,r.f)(a.toString(),n)},l=async e=>{const t=new URL(`${o}${`/locations/${e}/delete/`}`);return(0,r.f)(t.toString(),{method:"DELETE"})},d=async()=>{const e=new URL(`${o}/references/desktop-users/`);return(0,r.f)(e.toString(),{method:"GET"})},u=async(e,t)=>{const n=new URL(`${o}${`/locations/${e}/${t}/assign-user/`}`);return(0,r.f)(n.toString(),{method:"POST"})},h=async(e,t)=>{if(!e)throw new Error("Location id not found");if(!t)throw new Error("User id not found");const n=new URL(`${o}${`/locations/${e}/${t}/unassign-user/`}`);return(0,r.f)(n.toString(),{method:"POST"})}},63712:(e,t,n)=>{n.d(t,{Ak:()=>r});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t}},73898:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(65043),o=n(65173),a=n.n(o),s=["color","size","title","className"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}var c=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,a=e.size,c=void 0===a?"1em":a,l=e.title,d=void 0===l?null:l,u=e.className,h=void 0===u?"":u,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s);return r.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:c,height:c,fill:o,className:["bi","bi-pencil-square",h].filter(Boolean).join(" ")},p),d?r.createElement("title",null,d):null,r.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),r.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"}))}));c.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),title:a().string,className:a().string};const l=c},74856:(e,t,n)=>{n.d(t,{E:()=>g});var r=n(65043),o=n(84052),a=n(41828),s=n(2028),i=n(4504);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function d(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={root:function(e){var t=e.props;return(0,i.xW)("p-skeleton p-component",{"p-skeleton-circle":"circle"===t.shape,"p-skeleton-none":"none"===t.animation})}},h=a.x.extend({defaultProps:{__TYPE:"Skeleton",shape:"rectangle",size:null,width:"100%",height:"1rem",borderRadius:null,animation:"wave",style:null,className:null},css:{classes:u,inlineStyles:{root:{position:"relative"}},styles:'\n@layer primereact {\n    .p-skeleton {\n        position: relative;\n        overflow: hidden;\n    }\n    \n    .p-skeleton::after {\n        content: "";\n        animation: p-skeleton-animation 1.2s infinite;\n        height: 100%;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        transform: translateX(-100%);\n        z-index: 1;\n    }\n    \n    .p-skeleton-circle {\n        border-radius: 50%;\n    }\n    \n    .p-skeleton-none::after {\n        animation: none;\n    }\n}\n\n@keyframes p-skeleton-animation {\n    from {\n        transform: translateX(-100%);\n    }\n    to {\n        transform: translateX(100%);\n    }\n}\n'}});function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=r.memo(r.forwardRef((function(e,t){var n=(0,s.qV)(),c=r.useContext(o.UM),l=h.getProps(e,c),d=h.setMetaData({props:l}),u=d.ptm,p=d.cx,g=d.sx,f=d.isUnstyled;(0,a.j)(h.css.styles,f,{name:"skeleton"});var y=r.useRef(null);r.useImperativeHandle(t,(function(){return{props:l,getElement:function(){return y.current}}}));var w=l.size?{width:l.size,height:l.size,borderRadius:l.borderRadius}:{width:l.width,height:l.height,borderRadius:l.borderRadius},b=n({ref:y,className:(0,i.xW)(l.className,p("root")),style:m(m({},w),g("root")),"aria-hidden":!0},h.getOtherProps(l),u("root"));return r.createElement("div",b)})));g.displayName="Skeleton"}}]);
//# sourceMappingURL=971.1b884bc8.chunk.js.map