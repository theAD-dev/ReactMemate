"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[4719],{20793:(e,s,t)=>{e.exports=t.p+"static/media/NodataImg.ee3ccbdc6b7e66284e17.png"},70767:(e,s,t)=>{t.d(s,{A:()=>i});t(65043);const i=t.p+"static/media/addNoteModeIcon.43bdc8582f3ef769329a44f15a05fe67.svg"},79106:(e,s,t)=>{t.d(s,{Af:()=>r,Co:()=>h,Lb:()=>u,U9:()=>n,Zi:()=>m,aU:()=>d,gg:()=>a,gy:()=>c,lC:()=>o,qT:()=>x});var i=t(31342);const l="https://app.memate.com.au/api/v1",n=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6?arguments[6]:void 0;const d=(e-1)*s,c=new URL(`${l}/tasks/`);return c.searchParams.append("limit",s),c.searchParams.append("offset",d),t&&c.searchParams.append("search",t),n&&c.searchParams.append("ordering",n),a&&c.searchParams.append("deleted",1),!0===r&&c.searchParams.append("finished",!1),!1===r&&c.searchParams.append("finished",!0),o&&c.searchParams.append("users",o),(0,i.f)(c.toString(),{method:"GET"})},a=async e=>{const s=new URL(`${l}${`/tasks/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},r=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/tasks/new/`);return(0,i.f)(t.toString(),s)},o=async(e,s)=>{const t={method:"PUT",body:s},n=new URL(`${l}${`/tasks/update/${e}/`}`);return(0,i.f)(n.toString(),t)},d=async()=>{const e=new URL(`${l}/desktop-users/`);return(0,i.f)(e.toString(),{method:"GET"})},c=async()=>{const e=new URL(`${l}/team/mobile-users/`);return(0,i.f)(e.toString(),{method:"GET"})},u=async e=>{const s=new URL(`${l}${`/tasks/${e}/comments/`}`);return(0,i.f)(s.toString(),{method:"GET"})},m=async(e,s)=>{const t=new URL(`${l}${`/tasks/${e}/comments/`}`);return(0,i.f)(t.toString(),{method:"POST",body:s})},h=async e=>{const s=new URL(`${l}${`/tasks/comments/${e}/`}`);return(0,i.f)(s.toString(),{method:"DELETE"})},x=async(e,s,t)=>{const n=new URL(`${l}/tasks/comments/presigned-url/`);return(0,i.f)(n.toString(),{method:"POST",body:{file_name:s,task_id:e,attachment_type:t}})}},81047:(e,s,t)=>{t.d(s,{AO:()=>x,Ad:()=>b,Bz:()=>k,Hb:()=>u,IT:()=>F,Kb:()=>r,Mp:()=>_,Pf:()=>A,Rh:()=>N,SQ:()=>c,T6:()=>v,UM:()=>f,VQ:()=>q,Xm:()=>d,bd:()=>S,bj:()=>p,gY:()=>g,hS:()=>h,hx:()=>C,iS:()=>a,p4:()=>o,pJ:()=>j,rJ:()=>w,s:()=>m,sB:()=>y,tC:()=>n});var i=t(31342);const l="https://app.memate.com.au/api/v1",n=async()=>{const e=new URL(`${l}/jobs/templates/`);return(0,i.f)(e.toString(),{method:"GET"})},a=async e=>{const s=new URL(`${l}${`/jobs/templates/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},r=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/jobs/templates/`);return(0,i.f)(t.toString(),s)},o=async(e,s)=>{const t={method:"PUT",body:s},n=new URL(`${l}${`/jobs/templates/${e}/`}`);return(0,i.f)(n.toString(),t)},d=async e=>{const s=new URL(`${l}${`/jobs/templates/${e}/`}`);return(0,i.f)(s.toString(),{method:"DELETE"})},c=async()=>{const e=new URL(`${l}/settings/templates/email-templates/`);return(0,i.f)(e.toString(),{method:"GET"})},u=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/settings/templates/email-templates/`);return(0,i.f)(t.toString(),s)},m=async(e,s)=>{const t={method:"PUT",body:s},n=new URL(`${l}${`/settings/templates/email-templates/${e}/`}`);return(0,i.f)(n.toString(),t)},h=async e=>{const s=new URL(`${l}${`/settings/templates/email-templates/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},x=async()=>{const e=new URL(`${l}/email-signatures/`);return(0,i.f)(e.toString(),{method:"GET"})},p=async e=>{const s=new URL(`${l}${`/email-signatures/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},v=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/email-signatures/`);return(0,i.f)(t.toString(),s)},g=async(e,s)=>{const t={method:"PUT",body:s},n=new URL(`${l}${`/email-signatures/${e}/`}`);return(0,i.f)(n.toString(),t)},y=async e=>{const s=new URL(`${l}${`/email-signatures/${e}/`}`);return(0,i.f)(s.toString(),{method:"DELETE"})},f=async e=>{const s=new URL(`${l}${`/settings/email-signatures/default/${e}/`}`);return(0,i.f)(s.toString(),{method:"PUT"})},j=async()=>{const e=new URL(`${l}/sms-templates/`);return(0,i.f)(e.toString(),{method:"GET"})},_=async e=>{const s=new URL(`${l}${`/sms-templates/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},b=async e=>{const s={method:"POST",body:e},t=new URL(`${l}/sms-templates/`);return(0,i.f)(t.toString(),s)},N=async(e,s)=>{const t={method:"PUT",body:s},n=new URL(`${l}${`/sms-templates/${e}/`}`);return(0,i.f)(n.toString(),t)},w=async e=>{const s=new URL(`${l}${`/sms-templates/${e}/`}`);return(0,i.f)(s.toString(),{method:"DELETE"})},A=async e=>{const s=new URL(`${l}${`/proposals/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},C=async()=>{const e=new URL(`${l}/references/outgoing-email/`);return(0,i.f)(e.toString(),{method:"GET"})},S=async e=>{const s=new URL(`${l}${`/settings/templates/email-templates/${e}/`}`);return(0,i.f)(s.toString(),{method:"DELETE"})},q=async()=>{const e=new URL(`${l}/settings/proposals/`);return(0,i.f)(e.toString(),{method:"GET"})},F=async e=>{const s=new URL(`${l}${`/settings/proposals/${e}/`}`);return(0,i.f)(s.toString(),{method:"GET"})},k=async e=>{const s=new URL(`${l}${`/settings/proposals/delete/${e}/`}`);return(0,i.f)(s.toString(),{method:"DELETE"})}},83572:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ms});var i=t(65043),l=t(60035),n=t(94819),a=t(76420),r=t(84494),o=t(34602),d=t(49367),c=t(35475),u=t(28261),m=t(47097),h=t(58387),x=t(72018),p=t(2028),v=t(93740),g=t(56328),y=t(93921),f=t(72970),j=t(73216),_=t(9642),b=t(64824),N=t(88060);const w="enquiries_topBarText__1nTSe",A="enquiries_subMenuLink__KqPic",C="enquiries_active__O-Ri+",S="enquiries_newButton__H4+6H",q="enquiries_webIcon__90n5F",F="enquiries_formIcon__WHU8v",k="enquiries_selectedCount__G463X",E="enquiries_actionButton__qx9Ym",T="enquiries_deletedMode__yIHOE",L="enquiries_restoreButton__gA5xq";var I=t(70972),$=t(84479),R=t(79106),M=t(57189),z=t(48417),D=t(36097),U=t(10615),B=t(27066),P=t(99832),H=t(33361),O=t(98176),W=t(2210),V=t(51144),G=t(72413),Z=t(19944),J=t(22927),K=t(77527),Q=t(56741),X=t(95192),Y=t(58415),ee=t(37753),se=t(14282),te=t(78602),ie=t(32952),le=t(61072),ne=t(70767),ae=t(70579);const re=e=>{let{submissionId:s,reInitialize:t}=e;const[l,n]=(0,i.useState)(!1),[a,r]=(0,i.useState)(""),[o,d]=(0,i.useState)({description:""}),c=2e3,u=()=>n(!1),h=e=>e.trim()?e.length<3?"Note must be at least 3 characters long":e.length>c?"Note must not exceed 2000 characters":/^\s+$/.test(e)?"Note cannot contain only whitespace":"":"Note is required",x=(0,m.n)({mutationFn:e=>(0,I.vH)(s,e),onSuccess:()=>{g.oR.success("Note sent successfully"),u(),t()},onError:e=>{console.error("Error adding note:",e),g.oR.error("Failed to add note. Please try again.")}});return(0,i.useEffect)((()=>{l||(r(""),d({description:""}))}),[l]),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"linkByttonStyle py-2 border-right",onClick:()=>n(!0),children:"Add Note"}),(0,ae.jsxs)(ie.A,{show:l,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"taskModelProject",onHide:u,animation:!1,size:"lg",children:[(0,ae.jsxs)(ie.A.Header,{className:"mb-0 pb-0 border-0",children:[(0,ae.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,ae.jsxs)("span",{children:[(0,ae.jsx)("img",{src:ne.A,alt:"AddNoteModeIcon"}),"Add Note"]})}),(0,ae.jsx)("button",{className:"CustonCloseModal",onClick:u,children:(0,ae.jsx)(Q.A,{size:24,color:"#667085"})})]}),(0,ae.jsx)(ie.A.Body,{children:(0,ae.jsx)("div",{className:"ContactModel",children:(0,ae.jsx)(le.A,{children:(0,ae.jsx)(te.A,{children:(0,ae.jsxs)("div",{className:"formgroup mb-2 mt-2",children:[(0,ae.jsxs)("label",{htmlFor:"note-input",children:["Note ",(0,ae.jsx)("span",{className:"required",children:"*"})]}),(0,ae.jsx)("div",{className:"inputInfo "+(o.description?"error-border":""),children:(0,ae.jsx)("textarea",{id:"note-input",type:"text",name:"note",value:a,placeholder:"Enter a message here...",onChange:e=>{const s=e.target.value;r(s);const t=h(s);d((e=>({...e,description:t})))},maxLength:c,rows:10,className:"w-100"})}),(0,ae.jsx)("div",{className:"d-flex justify-content-between mt-1",children:(0,ae.jsx)("small",{className:o.description?"error-message":"text-muted",children:o.description||`${a.length}/2000 characters`})})]})})})})}),(0,ae.jsx)(ie.A.Footer,{className:"pt-0",children:(0,ae.jsxs)("div",{className:"popoverbottom w-100 border-0 mt-0 pt-0",children:[(0,ae.jsx)(se.A,{variant:"outline-danger",onClick:u,disabled:x.isPending,children:"Cancel"}),(0,ae.jsxs)(se.A,{variant:"primary save",onClick:()=>{const e=h(a);e?d((s=>({...s,description:e}))):x.mutate({text:a})},disabled:!!o.description||x.isPending,children:["Save",(null===x||void 0===x?void 0:x.isPending)&&(0,ae.jsx)(v.p,{style:{width:"15px",height:"15px"}})]})]})})]})]})},oe="compose-email_emailUnavailableText__gG-2Z",de="compose-email_emailStatus__uScN+",ce="compose-email_disconnected__6EXP3",ue="compose-email_dots__gPjPv";var me=t(81047),he=t(81242);const xe=e=>{let{submissionId:s,reInitialize:t,contactPersons:l=[]}=e;const[,n]=(0,i.useState)({}),[a,r]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),x=(0,u.I)({queryKey:["getOutgoingEmail"],queryFn:me.hx}),p=(0,m.n)({mutationFn:e=>(0,I.MR)(s,e),onSuccess:()=>{r(!1),t(),g.oR.success("Email send successfully.")},onError:e=>{console.error("Error sending email:",e),g.oR.error("Failed to send email. Please try again.")}});return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"linkByttonStyle py-2 ps-0",onClick:()=>{var e,s;null!==x&&void 0!==x&&null!==(e=x.data)&&void 0!==e&&e.outgoing_email&&"no-reply@memate.com.au"!==(null===x||void 0===x||null===(s=x.data)||void 0===s?void 0:s.outgoing_email)?r(!0):(d(!0),r(!1))},children:"Compose Email"}),(0,ae.jsxs)(ie.A,{show:o,onHide:()=>d(!1),"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"taskModelProject",animation:!1,children:[(0,ae.jsxs)(ie.A.Header,{className:"mb-0 pb-0 border-0",children:[(0,ae.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,ae.jsxs)("span",{children:[(0,ae.jsxs)("svg",{width:"56",height:"57",viewBox:"0 0 56 57",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ae.jsx)("rect",{x:"4",y:"4.5",width:"48",height:"48",rx:"24",fill:"#FEE4E2"}),(0,ae.jsx)("rect",{x:"4",y:"4.5",width:"48",height:"48",rx:"24",stroke:"#FEF3F2",strokeWidth:"8"}),(0,ae.jsx)("path",{d:"M18 21.5H38C39.1 21.5 40 22.4 40 23.5V33.5C40 34.6 39.1 35.5 38 35.5H18C16.9 35.5 16 34.6 16 33.5V23.5C16 22.4 16.9 21.5 18 21.5ZM38 23.5L28 29.5L18 23.5V25.5L28 31.5L38 25.5V23.5Z",fill:"#F04438"})]}),(0,ae.jsx)("span",{className:"ms-3",children:"Email is currently unavailable"})]})}),(0,ae.jsx)("button",{className:"CustonCloseModal",onClick:()=>d(!1),children:(0,ae.jsx)(Q.A,{size:24,color:"#667085"})})]}),(0,ae.jsxs)(ie.A.Body,{children:[(0,ae.jsx)("div",{className:"ContactModel",children:(0,ae.jsxs)("p",{className:oe,children:["Email functionality is currently unavailable. To use this feature, please configure an email account via ",(0,ae.jsx)(c.N_,{to:"/settings/integrations?openEmail=true",style:{color:"#158ECC"},children:"Settings > Integrations"}),"."]})}),(0,ae.jsxs)("div",{className:(0,h.A)("d-flex align-items-center justify-content-center flex-column gap-1 m-auto",de),children:[(0,ae.jsxs)("div",{className:(0,h.A)("d-flex align-items-center justify-content-center"),children:[(0,ae.jsx)(H.A,{size:25,color:"#667085"}),(0,ae.jsx)("h6",{className:"ms-2 mt-2",style:{color:"#101828",fontSize:"16px",fontWeight:"400",lineHeight:"24px"},children:"Outgoing Email"})]}),(0,ae.jsxs)("span",{className:(0,h.A)("px-2 py-1",ce),children:["Pending",(0,ae.jsx)("span",{className:ue})]})]})]})]}),(0,ae.jsx)(he.A,{show:a,isLoading:!1,mutation:p,setShow:r,setPayload:n,contactPersons:l,isComposeEmail:!0})]})},pe=e=>{let{submission:s,reInitialize:t}=e;const[l,n]=(0,i.useState)(!1),[a,r]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[c,u]=(0,i.useState)({}),m=()=>{n(!1),r(""),d(""),u({})};return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("button",{disabled:!0,className:"linkByttonStyle py-2 border-right pe-5",style:{cursor:"not-allowed"},onClick:()=>n(!0),children:"New Task"}),(0,ae.jsxs)(ie.A,{show:l,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"taskModelProject",onHide:m,animation:!1,size:"lg",children:[(0,ae.jsxs)(ie.A.Header,{className:"mb-0 pb-0 border-0",children:[(0,ae.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,ae.jsxs)("span",{children:[(0,ae.jsx)("img",{src:ne.A,alt:"AddNoteModeIcon"}),"New Task"]})}),(0,ae.jsx)("button",{className:"CustonCloseModal",onClick:m,children:(0,ae.jsx)(Q.A,{size:24,color:"#667085"})})]}),(0,ae.jsx)(ie.A.Body,{children:(0,ae.jsxs)("div",{className:"ContactModel",children:[(0,ae.jsx)(le.A,{children:(0,ae.jsx)(te.A,{children:(0,ae.jsxs)("div",{className:"formgroup mb-2",children:[(0,ae.jsxs)("label",{htmlFor:"task-title",children:["Task Title ",(0,ae.jsx)("span",{className:"required",children:"*"})]}),(0,ae.jsx)("div",{className:"inputInfo "+(c.title?"error-border":""),children:(0,ae.jsx)("input",{id:"task-title",type:"text",value:a,placeholder:"Enter task title...",onChange:e=>{r(e.target.value),c.title&&u((e=>({...e,title:""})))},className:"w-100"})}),c.title&&(0,ae.jsx)("small",{className:"error-message",children:c.title})]})})}),(0,ae.jsx)(le.A,{children:(0,ae.jsx)(te.A,{children:(0,ae.jsxs)("div",{className:"formgroup mb-2 mt-2",children:[(0,ae.jsx)("label",{htmlFor:"task-description",children:"Description"}),(0,ae.jsx)("div",{className:"inputInfo",children:(0,ae.jsx)("textarea",{id:"task-description",value:o,placeholder:"Enter task description...",onChange:e=>d(e.target.value),rows:6,className:"w-100"})})]})})})]})}),(0,ae.jsx)(ie.A.Footer,{className:"pt-0",children:(0,ae.jsxs)("div",{className:"popoverbottom w-100 border-0 mt-0 pt-0",children:[(0,ae.jsx)(se.A,{variant:"outline-danger",onClick:m,children:"Cancel"}),(0,ae.jsx)(se.A,{variant:"primary save",onClick:()=>{const e={};a.trim()||(e.title="Task title is required"),Object.keys(e).length>0?u(e):(console.log("Creating task for submission:",null===s||void 0===s?void 0:s.id,{title:a,description:o}),m(),t&&t())},children:"Create Task"})]})})]})]})};var ve=t(17380),ge=t(17803);const ye={phoneInput:"send-sms_phoneInput__ZC98x",countrySelector:"send-sms_countrySelector__xA-2K",customLabel:"send-sms_customLabel__5Lqhd",smsUnavailableAlert:"send-sms_smsUnavailableAlert__UGkMp",smsIcon:"send-sms_smsIcon__IXOru",twilioStatus:"send-sms_twilioStatus__HyLVv",twilioIcon:"send-sms_twilioIcon__cTv04",disconnectedBadge:"send-sms_disconnectedBadge__445kt",smsUnavailableText:"send-sms_smsUnavailableText__05fDU",settingsLink:"send-sms_settingsLink__xiIPR"},fe=ge.PhoneNumberUtil.getInstance(),je=e=>{try{return fe.isValidNumber(fe.parseAndKeepRawInput(e))}catch(s){return!1}},_e=e=>{var s;let{submissionId:t,phone:l,reInitialize:n}=e;const[a,r]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),[x,p]=(0,i.useState)(!1),[y,f]=(0,i.useState)(""),[j,_]=(0,i.useState)({}),[b,w]=(0,i.useState)(l||""),A=()=>{d(!1),f(""),w(""),_({}),r(null)},C=(0,u.I)({queryKey:["getSMSTemplates"],queryFn:me.pJ}),S=(0,u.I)({queryKey:["smsQuery",a],queryFn:()=>(0,me.Mp)(a),enabled:!!a,retry:1}),q=(0,m.n)({mutationFn:e=>(0,I.fl)(t,e),onSuccess:()=>{g.oR.success("SMS send successfully"),A(),n()},onError:e=>{console.error("Error creating expense:",e),g.oR.error("Failed to send sms. Please try again.")}});return(0,i.useEffect)((()=>{var e;null!==S&&void 0!==S&&null!==(e=S.data)&&void 0!==e&&e.text&&(f(S.data.text),_((e=>({...e,message:!1}))))}),[S.data]),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"linkByttonStyle py-2 border-right text-center ps-0",onClick:()=>{const e=JSON.parse(window.localStorage.getItem("profileData")||"{}");null!==e&&void 0!==e&&e.has_twilio?d(!0):p(!0)},children:"Send SMS"}),(0,ae.jsxs)(ie.A,{show:x,onHide:()=>p(!1),"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"taskModelProject",animation:!1,children:[(0,ae.jsxs)(ie.A.Header,{className:"mb-0 pb-0 border-0",children:[(0,ae.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,ae.jsxs)("span",{children:[(0,ae.jsxs)("svg",{width:"56",height:"57",viewBox:"0 0 56 57",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ae.jsx)("rect",{x:"4",y:"4.5",width:"48",height:"48",rx:"24",fill:"#FEE4E2"}),(0,ae.jsx)("rect",{x:"4",y:"4.5",width:"48",height:"48",rx:"24",stroke:"#FEF3F2",strokeWidth:"8"}),(0,ae.jsx)("path",{d:"M20.0168 34.3409C20.3324 34.6574 20.4904 35.0981 20.4479 35.5431C20.3524 36.5401 20.1325 37.5778 19.8502 38.5417C21.9425 38.0581 23.2204 37.4972 23.8012 37.2028C24.1309 37.0357 24.5107 36.9963 24.8677 37.092C25.8545 37.3566 26.9061 37.5 28 37.5C33.9934 37.5 38.5 33.2887 38.5 28.5C38.5 23.7113 33.9934 19.5 28 19.5C22.0066 19.5 17.5 23.7113 17.5 28.5C17.5 30.7021 18.426 32.7456 20.0168 34.3409ZM19.2773 40.1984C19.2672 40.2004 19.2571 40.2024 19.247 40.2044C19.1093 40.2315 18.9688 40.2583 18.8257 40.2845C18.625 40.3212 18.419 40.357 18.2076 40.3916C17.9091 40.4405 17.6805 40.1282 17.7985 39.8496C17.8755 39.6676 17.9515 39.4769 18.0255 39.2791C18.0725 39.1535 18.1187 39.025 18.1639 38.8941C18.1658 38.8885 18.1678 38.8828 18.1697 38.8772C18.5413 37.7976 18.8439 36.5567 18.9547 35.4001C17.1146 33.5548 16 31.1413 16 28.5C16 22.701 21.3726 18 28 18C34.6274 18 40 22.701 40 28.5C40 34.299 34.6274 39 28 39C26.7749 39 25.5926 38.8394 24.4793 38.5408C23.7 38.9357 22.0215 39.6545 19.2773 40.1984Z",fill:"#F04438"}),(0,ae.jsx)("path",{d:"M22 24.75C22 24.3358 22.3358 24 22.75 24H33.25C33.6642 24 34 24.3358 34 24.75C34 25.1642 33.6642 25.5 33.25 25.5H22.75C22.3358 25.5 22 25.1642 22 24.75ZM22 28.5C22 28.0858 22.3358 27.75 22.75 27.75H33.25C33.6642 27.75 34 28.0858 34 28.5C34 28.9142 33.6642 29.25 33.25 29.25H22.75C22.3358 29.25 22 28.9142 22 28.5ZM22 32.25C22 31.8358 22.3358 31.5 22.75 31.5H28.75C29.1642 31.5 29.5 31.8358 29.5 32.25C29.5 32.6642 29.1642 33 28.75 33H22.75C22.3358 33 22 32.6642 22 32.25Z",fill:"#F04438"})]}),(0,ae.jsx)("span",{className:"ms-3",children:"SMS is currently unavailable"})]})}),(0,ae.jsx)("button",{className:"CustonCloseModal",onClick:()=>p(!1),children:(0,ae.jsx)(Q.A,{size:24,color:"#667085"})})]}),(0,ae.jsx)(ie.A.Body,{children:(0,ae.jsxs)("div",{className:"ContactModel",children:[(0,ae.jsxs)("p",{className:ye.smsUnavailableText,children:["SMS functionality is currently unavailable. To use this",(0,ae.jsx)("br",{})," feature, please ask your admin to set up a Twilio",(0,ae.jsx)("br",{})," account and connect it via ",(0,ae.jsx)(c.N_,{to:"/settings/integrations?openTwilio=true",style:{color:"#158ECC"},children:"Settings > Integrations"}),"."]}),(0,ae.jsxs)("div",{className:(0,h.A)("d-flex align-items-center justify-content-center flex-column gap-1 m-auto",ye.twilioStatus),children:[(0,ae.jsxs)("div",{className:(0,h.A)("d-flex align-items-center justify-content-center",ye.twilioIcon),children:[(0,ae.jsx)("img",{src:"/static/media/twilio-logo.c9f32aa9e92765a4deb7.png",style:{width:"50px"}}),(0,ae.jsx)("h6",{className:"mb-1",style:{color:"#101828",fontSize:"16px",fontWeight:"400",lineHeight:"24px"},children:"Twilio"})]}),(0,ae.jsxs)("span",{className:(0,h.A)("px-2 py-1",ye.disconnectedBadge),children:["Disconnected \xa0",(0,ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"9",viewBox:"0 0 8 9",fill:"none",children:(0,ae.jsx)("circle",{cx:"4",cy:"4.5",r:"3",fill:"#F79009"})})]})]})]})})]}),(0,ae.jsxs)(ie.A,{show:o,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"taskModelProject",onHide:A,animation:!1,children:[(0,ae.jsxs)(ie.A.Header,{className:"mb-0 pb-0 border-0",children:[(0,ae.jsx)("div",{className:"modelHeader d-flex justify-content-between align-items-start",children:(0,ae.jsxs)("span",{children:[(0,ae.jsx)("img",{src:ne.A,alt:"AddNoteModeIcon"}),"Send SMS"]})}),(0,ae.jsx)("button",{className:"CustonCloseModal",onClick:A,children:(0,ae.jsx)(Q.A,{size:24,color:"#667085"})})]}),(0,ae.jsx)(ie.A.Body,{children:(0,ae.jsxs)("div",{className:"ContactModel",children:[(0,ae.jsxs)(le.A,{children:[(0,ae.jsx)(te.A,{sm:12,className:"mb-3",children:(0,ae.jsxs)("div",{style:{position:"relative"},children:[(0,ae.jsx)("label",{className:(0,h.A)(ye.customLabel),children:"Templates"}),(0,ae.jsx)(N.m,{options:C&&(null===(s=C.data)||void 0===s?void 0:s.map((e=>({value:e.id,label:`${e.title}`}))))||[],className:(0,h.A)(ye.dropdownSelect,"dropdown-height-fixed w-100"),style:{height:"46px",paddingLeft:"88px"},placeholder:"Select template",onChange:e=>{r(e.value)},value:a,loading:null===C||void 0===C?void 0:C.isFetching,filterInputAutoFocus:!0})]})}),(0,ae.jsx)(te.A,{children:(0,ae.jsxs)("div",{className:"formgroup sendSMSPhone mb-2 mt-0",children:[(0,ae.jsxs)("label",{children:["To",(0,ae.jsx)("span",{className:"required",children:"*"})]}),(0,ae.jsx)("div",{className:"inputInfo p-0 "+(j.taskRead?"error-border":"border-0"),children:(0,ae.jsx)(ve.LR,{defaultCountry:"au",placeholder:"Enter phone number",value:b||"",className:"phoneInput w-100",containerClass:ye.countrySelector,onChange:e=>{w(e),je(e)&&_((e=>({...e,phone:!1})))}})}),j.phone&&(0,ae.jsx)("p",{className:"error-message",children:"Phone is not valid"})]})})]}),(0,ae.jsx)(le.A,{children:(0,ae.jsx)(te.A,{children:(0,ae.jsxs)("div",{className:"formgroup mb-2 mt-2",children:[(0,ae.jsxs)("label",{children:["Message",(0,ae.jsx)("span",{className:"required",children:"*"})]}),(0,ae.jsxs)("div",{className:"inputInfo "+(j.description?"error-border":""),style:{position:"relative"},children:[(0,ae.jsx)("div",{style:{position:"absolute",right:"10px",top:"15px"},children:(null===S||void 0===S?void 0:S.isFetching)&&(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px",position:"relative",top:"-5px"}})}),(0,ae.jsx)("textarea",{type:"text",name:"Enter a message here...",value:y,placeholder:"Enter a message here...",onChange:e=>{const s=e.target.value.slice(0,150);f(s),_((e=>({...e,message:!1})))}})]}),(0,ae.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-1",children:[(0,ae.jsx)("p",{className:"error-message",children:j.message&&"Description is required"}),(0,ae.jsxs)("div",{style:{float:"right",fontSize:"14px",color:"#6c757d"},children:[(null===y||void 0===y?void 0:y.length)||0,"/150"]})]})]})})}),(0,ae.jsx)(le.A,{}),(0,ae.jsxs)("div",{className:"popoverbottom  mt-0 pt-4",children:[(0,ae.jsx)(se.A,{variant:"outline-danger",onClick:A,children:"Cancel"}),(0,ae.jsxs)(se.A,{disabled:null===q||void 0===q?void 0:q.isPending,variant:"primary save d-flex align-items-center gap-2",onClick:()=>{let e={};if(y||(e.message=!0),b&&je(b)||(e.phone=!0),Object.keys(e).length)return _(e);q.mutate({phone_number:b,message:y})},children:["Send",(null===q||void 0===q?void 0:q.isPending)&&(0,ae.jsx)(v.p,{style:{width:"15px",height:"15px"}})]})]})]})})]})]})},be={modalHeader:"view-enquiry-lead_modalHeader__WvfX2",modalContentClass:"view-enquiry-lead_modalContentClass__itply",headerContent:"view-enquiry-lead_headerContent__H7NVh",headerIcon:"view-enquiry-lead_headerIcon__yo7XE",headerText:"view-enquiry-lead_headerText__pg+ao",headerTitle:"view-enquiry-lead_headerTitle__GjKgE",headerSubtitle:"view-enquiry-lead_headerSubtitle__Z76mD",headerRight:"view-enquiry-lead_headerRight__25omv",submittedAt:"view-enquiry-lead_submittedAt__xzTee",submittedLabel:"view-enquiry-lead_submittedLabel__qbWVV",submittedValue:"view-enquiry-lead_submittedValue__L8gO9",closeButton:"view-enquiry-lead_closeButton__RyyWK",modalContent:"view-enquiry-lead_modalContent__bOGJx",leftColumn:"view-enquiry-lead_leftColumn__Kt9Cq",rightColumn:"view-enquiry-lead_rightColumn__QA8y5",sectionHeader:"view-enquiry-lead_sectionHeader__+6GSP",scrollContainer:"view-enquiry-lead_scrollContainer__oBsKH",leadInfoSection:"view-enquiry-lead_leadInfoSection__iNdLU",fieldCardsContainer:"view-enquiry-lead_fieldCardsContainer__D2QAd",infoGrid:"view-enquiry-lead_infoGrid__Z-w02",infoItem:"view-enquiry-lead_infoItem__AUpq0",infoLabel:"view-enquiry-lead_infoLabel__9Y6c1",infoValue:"view-enquiry-lead_infoValue__D4G4V",fieldCard:"view-enquiry-lead_fieldCard__-EU2h",fieldLabel:"view-enquiry-lead_fieldLabel__LhgnL",fieldValue:"view-enquiry-lead_fieldValue__Ygiks",loadingContainer:"view-enquiry-lead_loadingContainer__FiBVm",infoCard:"view-enquiry-lead_infoCard__-43Ig",infoIcon:"view-enquiry-lead_infoIcon__ObqUy",infoContent:"view-enquiry-lead_infoContent__y+elR",infoLink:"view-enquiry-lead_infoLink__ENpws",divider:"view-enquiry-lead_divider__N0Tyc",infoRow:"view-enquiry-lead_infoRow__IRsyo",label:"view-enquiry-lead_label__AtifM",value:"view-enquiry-lead_value__OH-4p",badge:"view-enquiry-lead_badge__UmKBS",tableContainer:"view-enquiry-lead_tableContainer__2em+H",dataTable:"view-enquiry-lead_dataTable__AyaYj",tableLabel:"view-enquiry-lead_tableLabel__p6PuX",tableValue:"view-enquiry-lead_tableValue__AwUoT",actionsRow:"view-enquiry-lead_actionsRow__ebAPJ",activitySection:"view-enquiry-lead_activitySection__xDOHF",activityScroll:"view-enquiry-lead_activityScroll__pxtGW",emptyState:"view-enquiry-lead_emptyState__XbiGK",emptyIcon:"view-enquiry-lead_emptyIcon__pLV9C",emptyText:"view-enquiry-lead_emptyText__s3Hux",emptySubtext:"view-enquiry-lead_emptySubtext__vXklP",modalFooter:"view-enquiry-lead_modalFooter__5gXhg",footerLeft:"view-enquiry-lead_footerLeft__Q8gh0",footerRight:"view-enquiry-lead_footerRight__-z904",assignedTo:"view-enquiry-lead_assignedTo__4I9uU",assignedLabel:"view-enquiry-lead_assignedLabel__Q3X8b",assignedUser:"view-enquiry-lead_assignedUser__JAAIp",userAvatar:"view-enquiry-lead_userAvatar__W9Qar",userAvatarPlaceholder:"view-enquiry-lead_userAvatarPlaceholder__Y4ZlH",skeletonContainer:"view-enquiry-lead_skeletonContainer__VBK4u",skeletonCircle:"view-enquiry-lead_skeletonCircle__380+Q",skeletonLineShort:"view-enquiry-lead_skeletonLineShort__myCRR",pulse:"view-enquiry-lead_pulse__+qz3L",skeletonLineLong:"view-enquiry-lead_skeletonLineLong__1MSAr",activityList:"view-enquiry-lead_activityList__DkT0l",activityItem:"view-enquiry-lead_activityItem__OsVt9",activityIcon:"view-enquiry-lead_activityIcon__ONoJn","type-email":"view-enquiry-lead_type-email__3Wv31","type-sms":"view-enquiry-lead_type-sms__6U4Ev","type-note":"view-enquiry-lead_type-note__mK2iV","type-quote":"view-enquiry-lead_type-quote__brYA8","type-job":"view-enquiry-lead_type-job__EsaTj",activityContent:"view-enquiry-lead_activityContent__T0+94",activityHeader:"view-enquiry-lead_activityHeader__Z8mZH",activityTitle:"view-enquiry-lead_activityTitle__JD5xx",activityTime:"view-enquiry-lead_activityTime__c2Gvt",activityBy:"view-enquiry-lead_activityBy__Qt2FY",activityText:"view-enquiry-lead_activityText__j9HXT",historyHeader:"view-enquiry-lead_historyHeader__HwU5T",historyTitle:"view-enquiry-lead_historyTitle__cFwji",historyText:"view-enquiry-lead_historyText__OPTnO",historyTimestamp:"view-enquiry-lead_historyTimestamp__6MWMs",emailBody:"view-enquiry-lead_emailBody__TEXOy",ellipsis:"view-enquiry-lead_ellipsis__+kgog"};var Ne=t(58027);const we=e=>{if(!e)return"-";const s=new Date(1e3*+e);return new Intl.DateTimeFormat("en-AU",{timeZone:"Australia/Sydney",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(s)},Ae=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),Ce=e=>{var s,t,l,n,a,r,o,d,c,m,x,p,y,f;let{visible:_,editData:b,usersList:N,onClose:w}=e;const A=(0,j.Zp)(),C=null===b||void 0===b?void 0:b.id,[S]=(0,i.useState)(!1),[q,F]=(0,i.useState)(null),[k,E]=(0,i.useState)(!1),T=(0,u.I)({queryKey:["enquiry-history",C],queryFn:()=>(0,I.WW)(C),enabled:!!C}),L=(null===T||void 0===T||null===(s=T.data)||void 0===s?void 0:s.results)||[],R=null===T||void 0===T?void 0:T.isFetching,M=(null===L||void 0===L?void 0:L.length)>0;(0,i.useEffect)((()=>{_&&null!==b&&void 0!==b&&b.leadData&&F(b.leadData)}),[_,b]);const z=()=>{w(),F(null)},ne=()=>{T.refetch()},oe=(()=>{if(null===q||void 0===q||!q.assigned_to)return null;const e=q.assigned_to;return N.find((s=>s.id===e))||null})(),de=e=>{const s=new Date(1e3*e);return`${new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(s)} | ${new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(s)} | ${`${s.getDate()} ${new Intl.DateTimeFormat("en-US",{month:"short"}).format(s)} ${s.getFullYear()}`}`},ce=e=>{switch(e){case"note":return(0,ae.jsx)(B.A,{size:16,color:"#1AB2FF"});case"task":return(0,ae.jsx)(P.A,{size:18,color:"#1AB2FF"});case"email":return(0,ae.jsx)(H.A,{size:16,color:"#1AB2FF"});case"sms":return(0,ae.jsx)(O.A,{size:16,color:"#1AB2FF"});case"assigned":return(0,ae.jsx)(W.A,{size:20,color:"#1AB2FF"});case"status_change":return(0,ae.jsx)(V.A,{size:18,color:"#1AB2FF"});case"sale_linked":return(0,ae.jsx)(G.A,{size:18,color:"#1AB2FF"});default:return(0,ae.jsx)(Z.A,{size:16,color:"#1AB2FF"})}};return(0,ae.jsxs)(ie.A,{show:_,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"projectCardModel",onHide:z,animation:!1,enforceFocus:!1,size:"xl",contentClassName:be.modalContentClass,children:[(0,ae.jsxs)(ie.A.Header,{className:be.modalHeader,children:[(0,ae.jsxs)("div",{className:be.headerContent,children:[(0,ae.jsx)("div",{className:be.headerIcon,children:(0,ae.jsx)(J.A,{size:20,color:"#17B26A"})}),(0,ae.jsxs)("div",{className:be.headerText,children:[(0,ae.jsx)("h2",{className:be.headerTitle,children:"Lead Details"}),(null===q||void 0===q?void 0:q.form_title)&&(0,ae.jsx)("p",{className:be.headerSubtitle,children:null===q||void 0===q?void 0:q.form_title})]})]}),(0,ae.jsxs)("div",{className:be.headerRight,children:[(null===q||void 0===q?void 0:q.submitted_at)&&(0,ae.jsxs)("div",{className:be.submittedAt,children:[(0,ae.jsx)("span",{className:be.submittedLabel,children:"Submitted At"}),(0,ae.jsxs)("span",{className:be.submittedValue,children:[(0,ae.jsx)(K.A,{size:14}),we(null===q||void 0===q?void 0:q.submitted_at)]})]}),(0,ae.jsx)("button",{className:be.closeButton,onClick:z,"aria-label":"Close",children:(0,ae.jsx)(Q.A,{size:24})})]})]}),(0,ae.jsx)(ie.A.Body,{className:"p-0",children:(0,ae.jsx)("div",{className:be.modalContent,children:(0,ae.jsxs)(le.A,{className:"g-0 h-100",children:[(0,ae.jsx)(te.A,{sm:6,className:be.leftColumn,children:(0,ae.jsx)("div",{className:be.scrollContainer,children:S?(0,ae.jsx)("div",{className:be.loadingContainer,children:(0,ae.jsx)(v.p,{style:{width:"40px",height:"40px"}})}):(0,ae.jsxs)("div",{className:be.leadInfoSection,children:[(0,ae.jsxs)("div",{className:be.infoGrid,children:[(null===q||void 0===q||null===(t=q.data)||void 0===t?void 0:t.name)&&(0,ae.jsxs)("div",{className:be.infoItem,children:[(0,ae.jsx)(X.A,{size:16,color:"#1AB2FF"}),(0,ae.jsx)("span",{className:be.infoLabel,children:"Name"}),(0,ae.jsx)("span",{className:(0,h.A)(be.infoValue,be.ellipsis),children:null===q||void 0===q||null===(l=q.data)||void 0===l?void 0:l.name})]}),(null===q||void 0===q||null===(n=q.data)||void 0===n?void 0:n.date_field)&&(0,ae.jsxs)("div",{className:be.infoItem,children:[(0,ae.jsx)(K.A,{size:16,color:"#1AB2FF"}),(0,ae.jsx)("span",{className:be.infoLabel,children:"Date Field"}),(0,ae.jsx)("span",{className:(0,h.A)(be.infoValue,be.ellipsis),children:null===q||void 0===q||null===(a=q.data)||void 0===a?void 0:a.date_field})]}),(null===q||void 0===q||null===(r=q.data)||void 0===r?void 0:r.email)&&(0,ae.jsxs)("div",{className:be.infoItem,children:[(0,ae.jsx)(H.A,{size:16,color:"#1AB2FF"}),(0,ae.jsx)("span",{className:be.infoLabel,children:"Email"}),(0,ae.jsx)("span",{className:(0,h.A)(be.infoValue,be.ellipsis),children:null===q||void 0===q||null===(o=q.data)||void 0===o?void 0:o.email})]}),(null===q||void 0===q||null===(d=q.data)||void 0===d?void 0:d.time_field)&&(0,ae.jsxs)("div",{className:be.infoItem,children:[(0,ae.jsx)(Y.A,{size:16,color:"#1AB2FF"}),(0,ae.jsx)("span",{className:be.infoLabel,children:"Time Field"}),(0,ae.jsx)("span",{className:(0,h.A)(be.infoValue,be.ellipsis),children:null===q||void 0===q||null===(c=q.data)||void 0===c?void 0:c.time_field})]}),(null===q||void 0===q||null===(m=q.data)||void 0===m?void 0:m.phone)&&(0,ae.jsxs)("div",{className:be.infoItem,children:[(0,ae.jsx)(ee.A,{size:16,color:"#1AB2FF"}),(0,ae.jsx)("span",{className:be.infoLabel,children:"Phone"}),(0,ae.jsx)("span",{className:(0,h.A)(be.infoValue,be.ellipsis),children:null===q||void 0===q||null===(x=q.data)||void 0===x?void 0:x.phone})]}),(0,ae.jsxs)("div",{className:be.infoItem,children:[(0,ae.jsx)(J.A,{size:16,color:"#1AB2FF"}),(0,ae.jsx)("span",{className:be.infoLabel,children:"Form Type"}),(0,ae.jsx)("span",{className:(0,h.A)(be.infoValue,be.ellipsis),children:"web"===(null===q||void 0===q?void 0:q.form_type)?"Web":"Form"})]})]}),(0,ae.jsx)("div",{className:be.fieldCardsContainer,children:(null===q||void 0===q?void 0:q.data)&&Object.entries(null===q||void 0===q?void 0:q.data).filter((e=>{let[s,t]=e;return!["name","email","phone","date_field","time_field"].includes(s)&&""!==t&&null!==t&&void 0!==t&&!("object"===typeof t&&0===Object.keys(t).length)})).map((e=>{let[s,t]=e;return(0,ae.jsxs)("div",{className:be.fieldCard,children:[(0,ae.jsx)("span",{className:be.fieldLabel,children:Ae(s)}),(0,ae.jsx)("span",{className:be.fieldValue,children:"boolean"===typeof t?t?"Yes":"No":"object"===typeof t?Array.isArray(t)?t.join(", "):JSON.stringify(t):t})]},s)}))})]})})}),(0,ae.jsxs)(te.A,{sm:6,className:be.rightColumn,children:[(0,ae.jsxs)("div",{className:be.actionsRow,children:[(0,ae.jsx)(re,{submissionId:null===b||void 0===b?void 0:b.id,reInitialize:ne}),(0,ae.jsx)(pe,{submissionId:null===b||void 0===b?void 0:b.id,reInitialize:ne}),(0,ae.jsx)(_e,{submissionId:null===b||void 0===b?void 0:b.id,phone:null===q||void 0===q||null===(p=q.data)||void 0===p?void 0:p.phone,reInitialize:ne}),(0,ae.jsx)(xe,{submissionId:null===b||void 0===b?void 0:b.id,contactPersons:null!==q&&void 0!==q&&null!==(y=q.data)&&void 0!==y&&y.email?[{email:null===q||void 0===q||null===(f=q.data)||void 0===f?void 0:f.email}]:[],reInitialize:ne})]}),(0,ae.jsxs)("div",{className:be.activitySection,children:[(0,ae.jsx)("div",{className:be.sectionHeader,children:(0,ae.jsx)("h3",{children:"Enquiry History"})}),(0,ae.jsxs)("div",{className:be.activityScroll,children:[R&&(0,ae.jsx)("div",{className:be.skeletonContainer,children:[1,2,3,4].map((e=>(0,ae.jsxs)("div",{className:"d-flex flex-column mb-3",children:[(0,ae.jsxs)("div",{className:be.activityItem,children:[(0,ae.jsx)("div",{className:be.activityIcon,children:(0,ae.jsx)("div",{className:be.skeletonCircle})}),(0,ae.jsxs)("div",{className:be.activityContent,children:[(0,ae.jsx)("div",{className:be.skeletonLineShort}),(0,ae.jsx)("div",{className:be.skeletonLine}),(0,ae.jsx)("div",{className:be.skeletonLineLong})]})]}),(0,ae.jsx)("div",{className:be.skeletonLine}),(0,ae.jsx)("div",{className:be.skeletonLineLong}),(0,ae.jsx)("div",{className:be.skeletonLine}),(0,ae.jsx)("div",{className:be.skeletonLineLong})]},e)))}),!R&&!M&&(0,ae.jsxs)("div",{className:be.emptyState,children:[(0,ae.jsx)("div",{className:be.emptyIcon,children:(0,ae.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ae.jsx)("rect",{width:"48",height:"48",rx:"24",fill:"#F9FAFB"}),(0,ae.jsx)("path",{d:"M24 16V32M16 24H32",stroke:"#98A2B3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ae.jsx)("p",{className:be.emptyText,children:"No activity history available yet."}),(0,ae.jsx)("p",{className:be.emptySubtext,children:"Activities like notes, tasks, emails, and SMS will appear here."})]}),!R&&M&&(0,ae.jsx)("div",{className:be.activityList,children:L.map((e=>{var s,t,i,l;console.log("item: ",e);let n=[];var a,r,o;"email"===e.type&&null!==e&&void 0!==e&&e.meta&&(n=[...(null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.to)||[],...(null===e||void 0===e||null===(r=e.meta)||void 0===r?void 0:r.cc)||[],...(null===e||void 0===e||null===(o=e.meta)||void 0===o?void 0:o.bcc)||[]]);return(0,ae.jsxs)("div",{className:"d-flex flex-column",children:[(0,ae.jsxs)("div",{className:be.historyHeader,children:[ce(null===e||void 0===e?void 0:e.type),(0,ae.jsx)("span",{className:null===be||void 0===be?void 0:be.historyTitle,children:null===e||void 0===e?void 0:e.title})]}),"email"===(null===e||void 0===e?void 0:e.type)?(0,ae.jsxs)("div",{className:be.emailPreview,children:[(0,ae.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[(0,ae.jsx)("strong",{className:"font-12",children:"Subject:"}),(0,ae.jsx)("span",{className:"font-12",children:null===e||void 0===e||null===(s=e.text)||void 0===s?void 0:s.split(":")[1]})]}),(0,ae.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[(0,ae.jsx)("strong",{className:"font-12",children:"Recipients:"}),(0,ae.jsx)("span",{className:"font-12",children:null===(t=n)||void 0===t?void 0:t.toString()})]}),(0,ae.jsx)("div",{className:(0,h.A)("font-12",be.emailBody),dangerouslySetInnerHTML:{__html:null===e||void 0===e||null===(i=e.meta)||void 0===i?void 0:i.body}})]}):(0,ae.jsx)("p",{className:be.historyText,children:null===e||void 0===e?void 0:e.text}),(0,ae.jsxs)("p",{className:be.historyTimestamp,children:[de(+(null===e||void 0===e?void 0:e.created_at))," by ",null===e||void 0===e||null===(l=e.created_by)||void 0===l?void 0:l.full_name]})]},null===e||void 0===e?void 0:e.id)}))})]})]})]})]})})}),(0,ae.jsxs)(ie.A.Footer,{className:be.modalFooter,children:[(0,ae.jsx)("div",{className:be.footerLeft,children:oe&&(0,ae.jsxs)("div",{className:be.assignedTo,children:[(0,ae.jsx)("span",{className:be.assignedLabel,children:"Assigned To"}),(0,ae.jsx)("div",{className:be.assignedUser,children:(0,ae.jsx)(D.A,{placement:"bottom",overlay:(0,ae.jsxs)(U.A,{id:"assigned-user-tooltip",children:[null===oe||void 0===oe?void 0:oe.first_name," ",null===oe||void 0===oe?void 0:oe.last_name]}),children:(0,ae.jsx)("span",{style:{display:"inline-flex"},children:(0,ae.jsx)(Ne.h,{photo:null===oe||void 0===oe?void 0:oe.photo,has_photo:null===oe||void 0===oe?void 0:oe.has_photo,is_business:!1,size:20})})})})]})}),(0,ae.jsxs)("div",{className:be.footerRight,children:[(0,ae.jsx)(se.A,{className:"outline-button",onClick:z,children:"Close"}),(0,ae.jsx)(se.A,{className:"solid-button",onClick:async()=>{var e;const s=null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.email;if(!s){var t,i;const e={name:(null===q||void 0===q||null===(t=q.data)||void 0===t?void 0:t.name)||"",email:"",phone:(null===q||void 0===q||null===(i=q.data)||void 0===i?void 0:i.phone)||"",formData:(null===q||void 0===q?void 0:q.data)||{},enquiryId:C,formTitle:(null===q||void 0===q?void 0:q.form_title)||""};return sessionStorage.setItem("enquiry-to-sale",JSON.stringify(e)),z(),void A("/sales/newquote/selectyourclient/new-clients")}E(!0);try{const e=await(0,$.DI)(s,100),t=((null===e||void 0===e?void 0:e.results)||[]).find((e=>{var t,i;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===s.toLowerCase()||(null===(i=e.contact_persons)||void 0===i?void 0:i.length)>0&&e.contact_persons.some((e=>{var t;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===s.toLowerCase()}))}));if(t)z(),A(`/sales/newquote/selectyourclient/client-information/scope-of-work/${t.id}`);else{var l,n;const e={name:(null===q||void 0===q||null===(l=q.data)||void 0===l?void 0:l.name)||"",email:s,phone:(null===q||void 0===q||null===(n=q.data)||void 0===n?void 0:n.phone)||"",formData:(null===q||void 0===q?void 0:q.data)||{},enquiryId:C,formTitle:(null===q||void 0===q?void 0:q.form_title)||""};sessionStorage.setItem("enquiry-to-sale",JSON.stringify(e)),z(),A("/sales/newquote/selectyourclient/new-clients")}}catch(a){console.error("Error searching for client:",a),g.oR.error("Failed to search for client. Please try again.")}finally{E(!1)}},disabled:k||2===(null===q||void 0===q?void 0:q.status),children:k?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(v.p,{style:{width:"16px",height:"16px"},strokeWidth:"4"}),"\xa0Processing..."]}):"Move to Sale"})]})]})]})};var Se=t(27734),qe=t(99868);const Fe=e=>{if(!e)return"-";const s=new Date(1e3*+e);return new Intl.DateTimeFormat("en-AU",{timeZone:"Australia/Sydney",day:"numeric",month:"short",year:"numeric"}).format(s)},ke=(0,i.forwardRef)(((e,s)=>{var t,o;let{searchValue:d,selectedSubmissions:h,setSelectedSubmissions:p,isShowDeleted:w,filterType:A,refetchTrigger:C,setRefetchTrigger:S,enquiriesCountQuery:k,statusFilter:E}=e;const{trialHeight:T}=(0,z.$)(),{session:L}=(0,M.As)(),D=(0,j.Zp)(),U=(0,i.useRef)(null),[B,P]=(0,i.useState)([]),[H,O]=(0,i.useState)(1),[W]=(0,c.ok)(),V=W.get("formId"),[G,Z]=(0,i.useState)({sortField:"id",sortOrder:-1}),[J,K]=(0,i.useState)({sortField:"id",sortOrder:-1}),[Q,X]=(0,i.useState)(!0),[Y,ee]=(0,i.useState)(!1),[se,te]=(0,i.useState)([]),[ie,le]=(0,i.useState)(null),[ne,re]=(0,i.useState)(null),[oe,de]=(0,i.useState)(null),[ce,ue]=(0,i.useState)(!1),[me,he]=(0,i.useState)(null),[xe,pe]=(0,i.useState)(null),[ve,ge]=(0,i.useState)(null),[ye,fe]=(0,i.useState)(null),je=(0,m.n)({mutationFn:e=>{let{submissionId:s}=e;return(0,I.qB)(s)},onSuccess:()=>{S&&S((e=>!e)),null===k||void 0===k||k.refetch(),re(null),g.oR.success("Submission deleted successfully")},onError:e=>{console.error("Error deleting submission:",e),re(null),g.oR.error("Failed to delete submission")}}),_e=(0,m.n)({mutationFn:e=>{let{submissionId:s,status:t}=e;return(0,I.dY)(s,t)},onSuccess:()=>{S&&S((e=>!e)),null===k||void 0===k||k.refetch(),ge(null),g.oR.success("Submission restored successfully")},onError:e=>{console.error("Error restoring submission:",e),ge(null),g.oR.error("Failed to restore submission")}}),be=(0,u.I)({queryKey:["getUserList"],queryFn:R.aU});(0,i.useEffect)((()=>{var e,s;const t=[];if((null===be||void 0===be||null===(e=be.data)||void 0===e||null===(s=e.users)||void 0===s?void 0:s.length)>0){const e=be.data.users.filter((e=>null===e||void 0===e?void 0:e.is_active)).map((e=>({id:null===e||void 0===e?void 0:e.id,first_name:null===e||void 0===e?void 0:e.first_name,last_name:null===e||void 0===e?void 0:e.last_name,photo:(null===e||void 0===e?void 0:e.photo)||"",has_photo:null===e||void 0===e?void 0:e.has_photo})));e.length>0&&t.push({label:"Desktop User",items:e})}te(t)}),[null===be||void 0===be?void 0:be.data]),(0,i.useEffect)((()=>{O(1)}),[d,w,A,C,V,E]),(0,i.useEffect)((()=>{(async()=>{var e,s;ee(!0);let t=null===L||void 0===L||null===(e=L.organization)||void 0===e?void 0:e.id;if(!t)return g.oR.error("Organization ID is not available in session"),void ee(!1);let i="";1===(null===J||void 0===J?void 0:J.sortOrder)?i=`${J.sortField}`:-1===(null===J||void 0===J?void 0:J.sortOrder)&&(i=`-${J.sortField}`);let l="";A&&"all"!==A&&(l=A);let n="";(null===E||void 0===E||null===(s=E.status)||void 0===s?void 0:s.length)>0&&(n=E.status.map((e=>e.value)).join(","));const a=await(0,I.Ho)(t,H,25,d,i,w,l,V,n);var r;1===H?P(a.results):(null===a||void 0===a||null===(r=a.results)||void 0===r?void 0:r.length)>0&&P((e=>{const s=new Set(e.map((e=>e.id))),t=a.results.filter((e=>!s.has(e.id)));return[...e,...t]}));Z(J),X(a.count!==B.length),ee(!1)})()}),[H,d,J,w,A,null===L||void 0===L||null===(t=L.organization)||void 0===t?void 0:t.id,B.length,C,V,E]),(0,i.useEffect)((()=>{if(B.length>0&&Q){U.current=new IntersectionObserver((e=>{e[0].isIntersecting&&O((e=>e+1))}));const e=document.querySelector(".p-datatable-tbody tr:not(.p-datatable-emptymessage):last-child");e&&U.current.observe(e)}return()=>{U.current&&U.current.disconnect()}}),[B,Q]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)(b.b,{ref:s,value:B,scrollable:!0,selectionMode:"checkbox",columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,size:"large",scrollHeight:`calc(100vh - 175px - ${T}px)`,className:"border",selection:h,onSelectionChange:e=>p(e.value),loading:Y,loadingIcon:Se.A,emptyMessage:(0,ae.jsx)(qe.A,{isDataExist:!!d}),sortField:null===G||void 0===G?void 0:G.sortField,sortOrder:null===G||void 0===G?void 0:G.sortOrder,onSort:e=>{const{sortField:s,sortOrder:t}=e;K({sortField:s,sortOrder:t}),O(1)},children:[(0,ae.jsx)(_.V,{selectionMode:"multiple",headerClassName:"ps-4 border-end-0",bodyClassName:"show-on-hover border-end-0",headerStyle:{width:"1rem",textAlign:"center"},frozen:!0}),(0,ae.jsx)(_.V,{field:"form_title",header:"Lead Source",body:e=>(0,ae.jsxs)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",children:[(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:["web"==e.form_type?(0,ae.jsx)("div",{className:q,children:(0,ae.jsx)(a.A,{size:12,color:"#9E77ED"})}):(0,ae.jsx)("div",{className:F,children:(0,ae.jsx)(r.A,{size:12,color:"#F79009"})}),(0,ae.jsxs)("div",{className:"d-flex flex-column",style:{lineHeight:"1.385"},children:[(0,ae.jsx)("span",{style:{color:"#667085",fontSize:"14px"},children:e.form_title||"-"}),(0,ae.jsx)("span",{className:"font-12",style:{color:"#98A2B3"},children:Fe(e.submitted_at)})]})]}),(0,ae.jsx)(x.$,{label:"Open",onClick:()=>{ue(!0),he({id:null===e||void 0===e?void 0:e.id,leadData:e})},className:"primary-text-button ms-3 show-on-hover-element not-show-checked",text:!0})]}),style:{minWidth:"160px"},sortable:!0,headerClassName:"shadowRight ps-0",bodyClassName:"shadowRight ps-0",frozen:!0}),(0,ae.jsx)(_.V,{field:"data.name",header:"Name",body:e=>{var s;return(0,ae.jsx)("div",{className:"d-flex flex-column",children:(0,ae.jsx)("span",{style:{color:"#667085"},children:(null===(s=e.data)||void 0===s?void 0:s.name)||"-"})})},style:{minWidth:"160px"}}),(0,ae.jsx)(_.V,{field:"data.phone",header:"Phone",body:e=>{var s;return(0,ae.jsx)("div",{className:"d-flex flex-column",children:(0,ae.jsx)("span",{style:{color:"#667085"},children:(null===(s=e.data)||void 0===s?void 0:s.phone)||"-"})})},style:{minWidth:"140px"}}),(0,ae.jsx)(_.V,{field:"data.email",header:"Email",body:e=>{var s;return(0,ae.jsx)("div",{className:"d-flex flex-column",children:(0,ae.jsx)("span",{style:{color:"#667085"},children:(null===(s=e.data)||void 0===s?void 0:s.email)||"-"})})},style:{minWidth:"220px"}}),(0,ae.jsx)(_.V,{header:(0,ae.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["Assign To",(0,ae.jsx)("span",{style:{fontSize:"11px",color:"#98A2B3",fontWeight:400},children:"A\u2192Z"}),(0,ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#98A2B3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,ae.jsx)("polyline",{points:"18 15 12 9 6 15"})})]}),body:e=>(0,ae.jsx)("div",{className:"d-flex align-items-center",children:(0,ae.jsx)(N.m,{value:e.assigned_to||null,onChange:s=>(async s=>{try{await(0,I.JA)(e.id,{assigned_to:s}),S&&S((e=>!e)),null===k||void 0===k||k.refetch(),g.oR.success("User assigned successfully")}catch(t){console.error("Error assigning user:",t),g.oR.error("Failed to assign user")}})(s.value),options:se,optionLabel:e=>`${e.first_name} ${e.last_name}`,optionValue:"id",placeholder:"Unassigned",optionGroupLabel:"label",optionGroupChildren:"items",filter:!0,filterInputAutoFocus:!0,dropdownIcon:(0,ae.jsx)(ae.Fragment,{}),style:{width:"100%",border:"none",background:"transparent",boxShadow:"none"},panelStyle:{minWidth:"200px"},scrollHeight:"400px",itemTemplate:e=>(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,ae.jsx)(Ne.A,{photo:null===e||void 0===e?void 0:e.photo,has_photo:null===e||void 0===e?void 0:e.has_photo,is_business:!1,size:17})}),(0,ae.jsxs)("span",{style:{fontSize:"14px",color:"#667085"},children:[e.first_name," ",e.last_name]})]}),valueTemplate:s=>{var t,i;if(!e.assigned_to)return(0,ae.jsx)("span",{style:{color:"#98A2B3",fontSize:"14px"},children:"-"});let l=null;for(const e of se)if(l=e.items.find((e=>(null===e||void 0===e?void 0:e.id)===(null===s||void 0===s?void 0:s.id))),l)break;return l?(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"24px",height:"24px",borderRadius:"50%",overflow:"hidden",border:"1px solid #dedede"},children:(0,ae.jsx)(Ne.A,{photo:null===(t=l)||void 0===t?void 0:t.photo,has_photo:null===(i=l)||void 0===i?void 0:i.has_photo,is_business:!1,size:17})}),(0,ae.jsxs)("span",{style:{color:"#667085",fontSize:"14px"},children:[l.first_name," ",l.last_name]})]}):(0,ae.jsx)("span",{style:{color:"#98A2B3"},children:"-"})}})}),style:{minWidth:"180px"},sortable:!0,field:"assigned_to.name"}),(0,ae.jsx)(_.V,{header:"Spam",body:e=>{if(4===e.status){const s=async()=>{fe(e.id);try{const s=e.assigned_to?1:0;await(0,I.JA)(e.id,{status:s}),S&&S((e=>!e)),g.oR.success("Enquiry restored successfully")}catch(s){console.error("Error restoring enquiry:",s),g.oR.error("Failed to restore enquiry")}finally{fe(null)}};return(0,ae.jsx)("button",{onClick:s,disabled:ye===e.id,style:{padding:"6px",borderRadius:"16px",border:"1px solid #A9EFC5",background:"#ECFDF3",color:"#067647",cursor:ye===e.id?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.background="#D1FAE5"},onMouseLeave:e=>{e.currentTarget.style.background="#ECFDF3"},title:"Restore from Spam",children:ye===e.id?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"},strokeWidth:"4"}):(0,ae.jsx)(l.A,{size:20,color:"#067647"})})}return(0,ae.jsx)("button",{onClick:async()=>{try{de(e.id),await(0,I.JA)(e.id,{status:4}),S&&S((e=>!e)),g.oR.success("Marked as spam successfully")}catch(s){de(null),console.error("Error marking as spam:",s),g.oR.error("Failed to mark as spam")}finally{de(null)}},disabled:oe===e.id,style:{padding:"6px",borderRadius:"16px",border:"1px solid #EAECF0",background:"transparent",color:"#667085",cursor:oe===e.id?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.color="#344054",e.currentTarget.style.background="#F9FAFB"},onMouseLeave:e=>{e.currentTarget.style.color="#667085",e.currentTarget.style.background="transparent"},title:"Mark as spam",children:oe===e.id?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"},strokeWidth:"4"}):(0,ae.jsx)(y.A,{size:20,color:oe===e.id?"#344054":"#667085"})})},style:{minWidth:"90px",maxWidth:"90px",width:"90px",textAlign:"center"},hidden:w}),(0,ae.jsx)(_.V,{header:"No Go",body:e=>{if(3===e.status){const s=async()=>{fe(e.id);try{const s=e.assigned_to?1:0;await(0,I.JA)(e.id,{status:s}),S&&S((e=>!e)),g.oR.success("Enquiry restored successfully")}catch(s){console.error("Error restoring enquiry:",s),g.oR.error("Failed to restore enquiry")}finally{fe(null)}};return(0,ae.jsx)("button",{onClick:s,disabled:ye===e.id,style:{padding:"0",borderRadius:"8px",border:"1px solid #A9EFC5",background:"#ECFDF3",color:"#067647",cursor:ye===e.id?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"42px",height:"42px",opacity:ye===e.id?.6:1},onMouseEnter:e=>{e.currentTarget.style.background="#D1FAE5"},onMouseLeave:e=>{e.currentTarget.style.background="#ECFDF3"},title:"Restore from No Go",children:ye===e.id?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"},strokeWidth:"4"}):(0,ae.jsx)(l.A,{size:20,color:"#067647"})})}return(0,ae.jsx)("button",{onClick:async()=>{le(e.id);try{await(0,I.JA)(e.id,{status:3}),S&&S((e=>!e)),g.oR.success("Marked as No Go successfully")}catch(s){console.error("Error marking as No Go:",s),g.oR.error("Failed to mark as No Go")}finally{le(null)}},disabled:ie===e.id,style:{padding:"0",borderRadius:"8px",border:"1px solid #EAECF0",background:"#FFFFFF",color:"#F04438",cursor:ie===e.id?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"42px",height:"42px",opacity:ie===e.id?.6:1},onMouseEnter:s=>{ie!==e.id&&(s.currentTarget.style.background="#FEF3F2")},onMouseLeave:s=>{ie!==e.id&&(s.currentTarget.style.background="#FFFFFF")},title:"Mark as No Go",children:ie===e.id?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"},strokeWidth:"4"}):(0,ae.jsx)(f.A,{size:20,color:"#D92D20"})})},style:{minWidth:"90px",maxWidth:"90px",width:"90px",textAlign:"center"},hidden:w}),(0,ae.jsx)(_.V,{header:"Move to Sale",body:e=>(0,ae.jsxs)("button",{onClick:async()=>{var s,t;const i=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.name,l=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email;if(!i){var n,a,r;const s={name:(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.name)||"",email:(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.email)||"",phone:(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.phone)||"",formData:(null===e||void 0===e?void 0:e.data)||{},enquiryId:(null===e||void 0===e?void 0:e.id)||null,formTitle:(null===e||void 0===e?void 0:e.form_title)||""};return sessionStorage.setItem("enquiry-to-sale",JSON.stringify(s)),void D("/sales/newquote/selectyourclient/new-clients")}pe(e.id);try{const s=await(0,$.DI)(i,100),t=((null===s||void 0===s?void 0:s.results)||[]).find((e=>{var s,t;return(null===(s=e.email)||void 0===s?void 0:s.toLowerCase())===l.toLowerCase()||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===i.toLowerCase()}));if(t)D(`/sales/newquote/selectyourclient/client-information/scope-of-work/${t.id}`);else{var o,d;const s={name:(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.name)||"",email:l,phone:(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.phone)||"",formData:(null===e||void 0===e?void 0:e.data)||{},enquiryId:(null===e||void 0===e?void 0:e.id)||null,formTitle:(null===e||void 0===e?void 0:e.form_title)||""};sessionStorage.setItem("enquiry-to-sale",JSON.stringify(s)),D("/sales/newquote/selectyourclient/new-clients")}}catch(c){console.error("Error searching for client:",c),g.oR.error("Failed to search for client. Please try again.")}finally{pe(null)}},style:{padding:"8px 18px",borderRadius:"24px",border:"1px solid #A9EFC5",background:"#ECFDF3",color:"#067647",cursor:2===(null===e||void 0===e?void 0:e.status)||xe===e.id?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:e=>{e.currentTarget.style.background="#D1FAE5",e.currentTarget.style.borderColor="#A7F3D0"},onMouseLeave:e=>{e.currentTarget.style.background="#ECFDF5",e.currentTarget.style.borderColor="#D1FAE5"},title:"Move to Sale",disabled:xe===e.id||2===(null===e||void 0===e?void 0:e.status),children:["Move",xe===e.id?(0,ae.jsx)(v.p,{style:{width:"16px",height:"16px"},strokeWidth:"4"}):(0,ae.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[(0,ae.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.55806 2.05806C4.80214 1.81398 5.19786 1.81398 5.44194 2.05806L12.9419 9.55806C13.186 9.80214 13.186 10.1979 12.9419 10.4419L5.44194 17.9419C5.19786 18.186 4.80214 18.186 4.55806 17.9419C4.31398 17.6979 4.31398 17.3021 4.55806 17.0581L11.6161 10L4.55806 2.94194C4.31398 2.69786 4.31398 2.30214 4.55806 2.05806Z",fill:"#079455"}),(0,ae.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55806 2.05806C9.80214 1.81398 10.1979 1.81398 10.4419 2.05806L17.9419 9.55806C18.186 9.80214 18.186 10.1979 17.9419 10.4419L10.4419 17.9419C10.1979 18.186 9.80214 18.186 9.55806 17.9419C9.31398 17.6979 9.31398 17.3021 9.55806 17.0581L16.6161 10L9.55806 2.94194C9.31398 2.69786 9.31398 2.30214 9.55806 2.05806Z",fill:"#079455"})]})]}),style:{minWidth:"130px",maxWidth:"150px",width:"150px"},hidden:w}),(0,ae.jsx)(_.V,{header:w?"Restore":"Actions",body:e=>{const s=async()=>{ge(e.id);const s=e.assigned_to?1:0;_e.mutate({submissionId:e.id,status:s})};return w?(0,ae.jsx)("button",{onClick:s,disabled:ve===e.id,style:{padding:"0",borderRadius:"8px",border:"1px solid #A9EFC5",background:"#ECFDF3",color:"#067647",cursor:ve===e.id?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"42px",height:"42px",opacity:ve===e.id?.6:1},onMouseEnter:s=>{ve!==e.id&&(s.currentTarget.style.background="#D1FAE5")},onMouseLeave:s=>{ve!==e.id&&(s.currentTarget.style.background="#ECFDF3")},title:"Restore Submission",children:ve===e.id?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"},strokeWidth:"4"}):(0,ae.jsx)(l.A,{size:20,color:"#067647"})}):(0,ae.jsx)("button",{onClick:async()=>{re(e.id),je.mutate({submissionId:e.id})},disabled:ne===e.id,style:{padding:"0",borderRadius:"8px",border:"1px solid #EAECF0",background:"#FFFFFF",color:"#F04438",cursor:ne===e.id?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"42px",height:"42px",opacity:ne===e.id?.6:1},onMouseEnter:s=>{ne!==e.id&&(s.currentTarget.style.background="#FEF3F2")},onMouseLeave:s=>{ne!==e.id&&(s.currentTarget.style.background="#FFFFFF")},title:"Delete Submission",children:ne===e.id?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"},strokeWidth:"4"}):(0,ae.jsx)(n.A,{size:20,color:"#D92D20"})})},style:{minWidth:"90px",maxWidth:"90px",width:"90px",textAlign:"center"}})]}),ce&&(null===me||void 0===me?void 0:me.id)&&(0,ae.jsx)(Ce,{visible:ce,editData:me,usersList:(null===be||void 0===be||null===(o=be.data)||void 0===o?void 0:o.users)||[],onClose:()=>{ue(!1),he(null)}})]})}));var Ee=t(93202),Te=t(24858),Le=t(670),Ie=t(54972),$e=t(28676),Re=t(74532),Me=t(72052),ze=t(27932),De=t(748),Ue=t(31892),Be=t(20288),Pe=t(80899);const He="create-enquiry_circledesignstyle__5EJgP",Oe="create-enquiry_out__kfKqP",We="create-enquiry_sectionTitle__YX-Ok",Ve="create-enquiry_bgGreay__oZVVw",Ge="create-enquiry_lable__ZEJf6",Ze="create-enquiry_inputText__Ge7Qq",Je="create-enquiry_dropdownSelect__ZndVN",Ke="create-enquiry_error__6iqu0",Qe="create-enquiry_required__w7Mrt";var Xe=t(27472),Ye=t(87201);const es=e=>e?e.message?[e.message]:Array.isArray(e)?e.filter(Boolean):[]:[],ss=(e,s,t)=>{if(!e.visible_if||!e.visible_if.field_name)return!0;const{field_name:i,value:l,operator:n="equals"}=e.visible_if,a=t.find((e=>e.name===i));if(!a)return!0;const r=a.field_type||"";let o=s[i];if("checkbox"!==r&&"consent"!==r||(o=o?"Checked":"Unchecked"),"multicheckbox"===r){const e=s[`${i}[]`]||[];return"equals"===n?e.includes(l):!e.includes(l)}return"equals"===n?o===l:"not_equals"===n?o!==l:o===l},ts=e=>{let{visible:s,setVisible:t,refetchTrigger:l,enquiriesCountQuery:n}=e;const{session:a}=(0,M.As)(),r=(0,i.useRef)(null),o=(0,i.useRef)(!1),[d,c]=(0,i.useState)([]),[u,x]=(0,i.useState)(""),[p,y]=(0,i.useState)(!0),[f,j]=(0,i.useState)(!1),[_,b]=(0,i.useState)(""),w=(0,i.useRef)(1),A=(0,i.useRef)(null),C=(0,i.useRef)(null),[S,q]=(0,i.useState)(null),F=(0,i.useMemo)((()=>(null===S||void 0===S?void 0:S.fields)||[]),[S]),{register:k,handleSubmit:E,formState:{errors:T},reset:L,setValue:$,watch:R,trigger:z}=(0,Te.mN)({defaultValues:{form:""},mode:"onBlur"}),D=R(),U=(0,i.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t={form:Pe.ai().required("Form is required").typeError("Form is required")};return e.forEach((i=>{const l=i.name;if(!l)return;const n=ss(i,s,e),a=i.required&&n;let r;if("multicheckbox"===i.field_type||"multiselect"===i.field_type)return r=Pe.YO().nullable(),a&&(r=r.min(1,"This field is required")),void(t[l]=r);if("consent"===i.field_type||"checkbox"===i.field_type&&(!i.options||0===i.options.length))return r=Pe.zM(),a&&(r=r.oneOf([!0],"This field is required")),void(t[l]=r);if(r=Pe.Yj().nullable(),a&&(r=r.required("This field is required")),i.max_length&&"number"===typeof i.max_length&&(r=r.max(i.max_length,`Max ${i.max_length} characters`)),i.regex&&"string"===typeof i.regex&&i.regex.trim())try{let e;const s=i.regex.trim(),t=s.match(/^\/(.+)\/([gimuy]*)$/);e=t?new RegExp(t[1],t[2]||""):new RegExp(s),r=r.matches(e,i.error_message||"Invalid format")}catch(o){console.warn(`Invalid regex for field "${l}"`,i.regex)}t[l]=r})),Pe.Ik(t)}((null===S||void 0===S?void 0:S.fields)||[],D)),[null===S||void 0===S?void 0:S.fields,D]);(0,i.useEffect)((()=>{}),[U]);const B=(0,i.useCallback)((e=>ss(e,D,F)),[D,F]),P=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!o.current){o.current=!0,j(!0);try{var i;const l=await(0,I.$x)(e,25,t,"",!1,null===a||void 0===a||null===(i=a.organization)||void 0===i?void 0:i.id),n=(null===l||void 0===l?void 0:l.results)||[];s?(c(n),w.current=1):c((e=>{const s=new Set(e.map((e=>e.id))),t=n.filter((e=>!s.has(e.id)));return[...e,...t]})),y(25===n.length)}catch(l){console.error("Error fetching forms:",l)}finally{o.current=!1,j(!1)}}}),[]);(0,i.useEffect)((()=>{P(1,!0,"")}),[P]),(0,i.useEffect)((()=>{_&&(w.current=1)}),[_]),(0,i.useEffect)((()=>{P(w.current,1===w.current,_)}),[_,P]);const H=R("form");(0,i.useEffect)((()=>{const e=Number(H);if(!e)return void q(null);let s=!1;return(async()=>{try{const t=await(0,Ye.Jy)(e);s||q(t)}catch(t){console.error("Failed to fetch form detail",t),s||q(null)}})(),()=>{s=!0}}),[H]);const O=(0,i.useCallback)((e=>{const s=e.target;if(Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<1&&p&&!f){const e=w.current+1;w.current=e,P(e,!1,_)}}),[p,f,P,_]),W=(0,m.n)({mutationFn:e=>{const{form:s,...t}=e;return(0,I.UQ)(s,t)},onSuccess:()=>{g.oR.success("Enquiry created successfully"),L(),q(null),x(""),t(!1),l&&l((e=>!e)),null===n||void 0===n||n.refetch()},onError:e=>{var s,t;console.error("Error creating enquiry:",e),g.oR.error((null===e||void 0===e||null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to create enquiry. Please try again.")}}),V=async e=>{console.log("data: ",e);try{await U.validate(e,{abortEarly:!1})}catch(t){return t.inner&&t.inner.forEach((e=>{console.error("Validation error:",e.path,e.message)})),void g.oR.error("Please fix the form errors before submitting")}const s={form:e.form};F.forEach((t=>{const i=t.name;i&&B(t)&&(void 0!==e[i]&&(s[i]=e[i]),void 0!==e[`${i}[]`]&&(s[`${i}[]`]=e[`${i}[]`]))})),W.mutate(s)},G=()=>{E(V)()},Z=e=>{if(!B(e))return null;const s=String(e.field_type||"").toLowerCase(),t=e.name||"",i=e.label||"",l=e.placeholder||"";if("html"===s)return(0,ae.jsx)("div",{className:"d-flex flex-column gap-1 mb-4",children:(0,ae.jsx)("div",{dangerouslySetInnerHTML:{__html:e.html||""}})},t||Math.random());if("consent"===s||"checkbox"===s&&(!e.options||0===e.options.length)){const s=`${t}-single`;return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)(Ie.S,{inputId:s,name:t,onChange:e=>$(t,e.checked),checked:R(t)||!1}),(0,ae.jsxs)("label",{htmlFor:s,className:(0,h.A)(Ge),style:{cursor:"pointer"},children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("input",{type:"hidden",...k(t)})]}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t)}if("checkbox"===s&&e.options&&e.options.length>0){const s=t||"checkbox";return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("div",{className:"d-flex flex-column",style:{gap:".5rem"},children:(e.options||[]).map(((e,t)=>{const i=`${s}-${t}`,l=R(`${s}[]`)||[],n=l.includes(e);return(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)(Ie.S,{inputId:i,value:e,onChange:()=>{const t=n?l.filter((s=>s!==e)):[...l,e];$(`${s}[]`,t)},checked:n}),(0,ae.jsx)("label",{htmlFor:i,style:{margin:0,fontWeight:"normal",cursor:"pointer"},children:e}),(0,ae.jsx)("input",{type:"hidden",...k(`${s}[]`)})]},i)}))}),T[`${s}[]`]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[`${s}[]`]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t)}if("radio"===s)return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("div",{className:"d-flex flex-column",style:{gap:".5rem"},children:(e.options||[]).map(((e,s)=>{const i=`${t}-${s}`;return(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)(Ue.a,{inputId:i,name:t,value:e,onChange:e=>$(t,e.value),checked:R(t)===e}),(0,ae.jsx)("label",{htmlFor:i,style:{margin:0,fontWeight:"normal",cursor:"pointer"},children:e}),(0,ae.jsx)("input",{type:"hidden",...k(t)})]},i)}))}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t);if("multicheckbox"===s){const s=t||"multi";return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("div",{className:"d-flex flex-column",style:{gap:".5rem"},children:(e.options||[]).map(((e,t)=>{const i=`${s}-${t}`,l=R(`${s}[]`)||[],n=l.includes(e);return(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)(Ie.S,{inputId:i,value:e,onChange:()=>{const t=n?l.filter((s=>s!==e)):[...l,e];$(`${s}[]`,t)},checked:n}),(0,ae.jsx)("label",{htmlFor:i,style:{margin:0,fontWeight:"normal",cursor:"pointer"},children:e}),(0,ae.jsx)("input",{type:"hidden",...k(`${s}[]`)})]},i)}))}),T[`${s}[]`]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[`${s}[]`]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t)}if("select"===s)return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("div",{style:{display:"none"},children:(0,ae.jsx)("input",{...k(t)})}),(0,ae.jsx)(N.m,{value:R(t)||"",onChange:e=>$(t,e.value),options:e.options||[],placeholder:l||"Select an option",className:(0,h.A)(Je,{[Ke]:T[t]}),style:{height:"46px",width:"100%"}}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t);if("multiselect"===s)return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("div",{style:{display:"none"},children:(0,ae.jsx)("input",{...k(t)})}),(0,ae.jsx)(De.K,{value:R(t)||[],onChange:e=>$(t,e.value),options:e.options||[],placeholder:l||"Select options",className:(0,h.A)(Je,{[Ke]:T[t]}),style:{height:"46px",width:"100%"}}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t);if("textarea"===s)return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsxs)($e.C,{children:[(0,ae.jsx)(Re.m,{children:T[t]&&(0,ae.jsx)("img",{src:Xe.A,className:"mb-3",alt:"error"})}),(0,ae.jsx)(ze.Z,{rows:5,placeholder:l,className:(0,h.A)(Ze,{[Ke]:T[t]}),...k(t)})]}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t);if("date"===s)return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsx)("div",{style:{display:"none"},children:(0,ae.jsx)("input",{...k(t)})}),(0,ae.jsx)(Le.V,{value:R(t)?new Date(R(t)):null,onChange:e=>{const s=e.value?e.value.toISOString().split("T")[0]:"";$(t,s)},placeholder:l||"Select a date",dateFormat:"dd/mm/yy",className:(0,h.A)({[Ke]:T[t]}),style:{width:"100%",border:"1px solid #d0d5dd"}}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t);if("time"===s)return(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsxs)($e.C,{children:[(0,ae.jsx)(Re.m,{children:T[t]&&(0,ae.jsx)("img",{src:Xe.A,className:"mb-3",alt:"error"})}),(0,ae.jsx)(Me.S,{type:"time",placeholder:l,className:(0,h.A)(Ze,{[Ke]:T[t]}),...k(t)})]}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t);const n="phone"===s?"tel":s,a=["text","email","number","tel","url"],r=a.includes(n)?n:"text";return a.includes(n)?(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsxs)($e.C,{children:[(0,ae.jsx)(Re.m,{children:T[t]&&(0,ae.jsx)("img",{src:Xe.A,className:"mb-3",alt:"error"})}),(0,ae.jsx)(Me.S,{type:r,placeholder:l,className:(0,h.A)(Ze,{[Ke]:T[t]}),maxLength:e.max_length||void 0,...k(t)})]}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t):(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:[i,e.required&&(0,ae.jsx)("span",{className:Qe,children:" *"})]}),(0,ae.jsxs)($e.C,{children:[(0,ae.jsx)(Re.m,{children:T[t]&&(0,ae.jsx)("img",{src:Xe.A,className:"mb-3",alt:"error"})}),(0,ae.jsx)(Me.S,{type:"text",placeholder:l,className:(0,h.A)(Ze,{[Ke]:T[t]}),...k(t)})]}),T[t]&&(0,ae.jsx)("div",{className:"error-messages",children:es(T[t]).map(((e,s)=>(0,ae.jsx)("p",{className:"error-message",children:e},s)))})]},t)};return(0,ae.jsx)(Be.B,{visible:s,position:"right",onHide:()=>t(!1),modal:!1,dismissable:!1,style:{width:"702px"},content:e=>{let{closeIconRef:s,hide:i}=e;return(0,ae.jsxs)("div",{className:"create-sidebar d-flex flex-column",children:[(0,ae.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-shrink-0",style:{borderBottom:"1px solid #EAECF0",padding:"16px 24px"},children:[(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,ae.jsx)("div",{className:He,children:(0,ae.jsx)("div",{className:Oe,children:(0,ae.jsx)(Ee.A,{size:24,color:"#17B26A"})})}),(0,ae.jsx)("span",{style:{color:"#344054",fontSize:"20px",fontWeight:600},children:"Create New Enquiry"})]}),(0,ae.jsx)("span",{children:(0,ae.jsx)(se.A,{type:"button",className:"text-button",ref:s,onClick:e=>i(e),children:(0,ae.jsx)(Q.A,{size:24,color:"#667085"})})})]}),(0,ae.jsx)("div",{className:"modal-body",style:{padding:"24px",height:"calc(100vh - 72px - 105px)",overflow:"auto"},children:(0,ae.jsxs)("form",{ref:r,onSubmit:E(V),children:[(0,ae.jsx)(le.A,{children:(0,ae.jsx)(te.A,{sm:12,children:(0,ae.jsxs)("h2",{className:We,children:["Enquiry Information ",S&&`(${S.title})`]})})}),(0,ae.jsxs)(le.A,{className:(0,h.A)(Ve),children:[(0,ae.jsx)(te.A,{sm:12,children:(0,ae.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,ae.jsxs)("label",{className:(0,h.A)(Ge),children:["Form ",(0,ae.jsx)("span",{className:"required",children:"*"})]}),(0,ae.jsx)("input",{type:"hidden",...k("form")}),(0,ae.jsx)(N.m,{ref:A,value:u,onChange:e=>{x(e.value),$("form",+e.value)},options:d,optionLabel:"title",optionValue:"id",className:(0,h.A)(Je,{[Ke]:T.form}),panelClassName:"form-dropdown",style:{height:"46px"},placeholder:"Select a form",filter:!0,onFilter:e=>{const s=e.filter||"";C.current&&clearTimeout(C.current),C.current=setTimeout((()=>b(s)),300)},filterInputAutoFocus:!0,scrollHeight:"400px",onShow:()=>{setTimeout((()=>{const e=document.querySelector(".p-dropdown-items-wrapper");e&&e.addEventListener("scroll",O)}),100)},onHide:()=>{C.current&&clearTimeout(C.current),b("");const e=document.querySelector(".p-dropdown-items-wrapper");e&&e.removeEventListener("scroll",O)},itemTemplate:e=>(0,ae.jsxs)("div",{className:"d-flex flex-column",style:{padding:"4px 0"},children:[(0,ae.jsx)("span",{style:{fontWeight:"500",fontSize:"14px",color:"#344054"},children:e.title||"N/A"}),e.source_type&&(0,ae.jsx)("span",{style:{fontSize:"12px",color:"#667085"},children:e.source_type})]}),valueTemplate:e=>u?(0,ae.jsx)("span",{style:{fontWeight:"500",color:"#344054"},children:e.title||"N/A"}):null,emptyFilterMessage:"No forms found"}),T.form&&(0,ae.jsx)("p",{className:"error-message",children:T.form.message})]})}),S&&S.description&&(0,ae.jsx)(te.A,{sm:12,children:(0,ae.jsx)("p",{style:{color:"#667085",fontSize:"14px",margin:"0 0 16px"},children:S.description})}),S&&F.length>0?F.sort(((e,s)=>(e.order||0)-(s.order||0))).map((e=>(0,ae.jsx)(te.A,{sm:12,children:Z(e)},e.name||e.id))):null]})]})}),(0,ae.jsxs)("div",{className:"modal-footer d-flex align-items-center justify-content-end gap-3",style:{padding:"16px 24px",borderTop:"1px solid var(--Gray-200, #EAECF0)",height:"72px"},children:[(0,ae.jsx)(se.A,{type:"button",onClick:e=>{e.stopPropagation(),t(!1)},className:"outline-button",children:"Cancel"}),(0,ae.jsx)(se.A,{type:"button",disabled:W.isPending,onClick:G,className:"solid-button",style:{minWidth:"75px"},children:W.isPending?(0,ae.jsx)(v.p,{style:{width:"20px",height:"20px"}}):"Save"})]})]})}})};var is=t(39759),ls=t(6168),ns=t(43908),as=t(75218),rs=t(5328),os=t(44621);const ds={filterBox:"enquiry-filters_filterBox__uaYN+",mainTagsWrapper:"enquiry-filters_mainTagsWrapper__aKW7X",tagsInputContainer:"enquiry-filters_tagsInputContainer__A-0Xe",tagItemsWrap:"enquiry-filters_tagItemsWrap__heIb3",tagItemWrap:"enquiry-filters_tagItemWrap__gU7BD",status:"enquiry-filters_status__oMg1E",NEW:"enquiry-filters_NEW__EMSf8",ASSIGNED:"enquiry-filters_ASSIGNED__OD+vI",MOVED_TO_SALE:"enquiry-filters_MOVED_TO_SALE__w8naz",NO_GO:"enquiry-filters_NO_GO__0H4qp",SPAM:"enquiry-filters_SPAM__bHQtg",selectedCount:"enquiry-filters_selectedCount__XFtNo",active:"enquiry-filters_active__erAS6",filterBoxActive:"enquiry-filters_filterBoxActive__1Ok-5",deletedOption:"enquiry-filters_deletedOption__1Oq5f"},cs=e=>{let{setFilters:s,filter:t,isShowDeleted:l,setIsShowDeleted:a}=e;const[r,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)("status"),[u,m]=(0,i.useState)([]),x=[{label:"New",value:0,className:"NEW"},{label:"Assigned",value:1,className:"ASSIGNED"},{label:"Moved to Sale",value:2,className:"MOVED_TO_SALE"},{label:"No Go",value:3,className:"NO_GO"},{label:"Spam",value:4,className:"SPAM"}];return(0,i.useEffect)((()=>{const e=e=>{e.target.closest(".enquiry-filters")||e.target.closest(".enquiry-filters *")||o(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,i.useEffect)((()=>{var e;t.status?null!==(e=t.status)&&void 0!==e&&e.length&&m(t.status.map((e=>e.value))):m([])}),[t]),(0,ae.jsxs)("div",{className:"enquiry-filters",children:[(0,ae.jsx)("button",{className:(0,h.A)(ds.filterBox,{[ds.filterBoxActive]:l}),onClick:()=>o(!r),children:(0,ae.jsx)(is.A,{})}),r&&(0,ae.jsxs)(os.A,{id:"enquiry-filter-tabs",activeKey:d,onSelect:e=>c(e),className:"filtterBoxWrapper",style:{marginLeft:"22px",marginTop:"-7px"},children:[(0,ae.jsxs)(rs.A,{eventKey:"status",title:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(B.A,{color:"#667085",size:16}),"Status"]}),children:[(0,ae.jsx)("div",{className:"enquiry-status",style:{overflow:"auto",marginLeft:"0px",padding:"6px 10px"},children:x.map((e=>(0,ae.jsxs)("div",{className:"d-flex align-items-center gap-3 p-2 mb-2",children:[(0,ae.jsx)(Ie.S,{checked:u.includes(e.value),onChange:s=>{m((t=>s.checked?[...t,e.value]:t.filter((s=>s!==e.value))))}}),(0,ae.jsx)(as.v,{className:(0,h.A)("status",ds[e.className],"font-14"),label:e.label})]},e.value)))}),(0,ae.jsxs)("div",{className:"d-flex justify-content-end gap-2 p-3 border-top",children:[(0,ae.jsx)(se.A,{className:"outline-button",style:{width:"115px",padding:"8px 14px"},onClick:()=>{o(!1),s((e=>{const{status:s,...t}=e;return t})),m([])},children:"Cancel"}),(0,ae.jsx)(se.A,{className:"solid-button",style:{width:"115px",padding:"8px 14px"},onClick:()=>{if(o(!1),null===u||void 0===u||!u.length)return;const e=x.filter((e=>u.includes(e.value)));s((s=>({...s,status:e})))},children:"Apply"})]})]}),(0,ae.jsx)(rs.A,{eventKey:"deleted",title:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(n.A,{color:"#667085",size:16}),"Deleted"]}),children:(0,ae.jsx)("div",{className:"enquiry-deleted",style:{padding:"8px"},children:(0,ae.jsx)("div",{className:(0,h.A)("d-flex align-items-center gap-1 p-2",ds.deletedOption),onClick:()=>{a((e=>!e)),o(!1)},style:{cursor:"pointer"},children:l?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ls.A,{color:"#D92D20",size:20}),(0,ae.jsx)("span",{style:{color:"#344054",fontSize:"14px"},children:"Hide Deleted Enquiries"})]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ns.A,{color:"#667085",size:20}),(0,ae.jsx)("span",{style:{color:"#344054",fontSize:"14px"},children:"Show Deleted Enquiries"})]})})})})]})]})},us=e=>{var s,t;let{filter:i,setFilters:l}=e;return(0,ae.jsx)(ae.Fragment,{children:(null===(s=Object.keys(i))||void 0===s?void 0:s.length)>0&&(0,ae.jsx)("div",{className:ds.mainTagsWrapper,children:null===(t=Object.entries(i))||void 0===t?void 0:t.map((e=>{let[s,t]=e;return(0,ae.jsx)("div",{children:(null===t||void 0===t?void 0:t.length)>0&&(0,ae.jsx)("div",{className:ds.tagsInputContainer,children:(0,ae.jsxs)("ul",{className:ds.tagItemsWrap,children:[t.map(((e,n)=>(0,ae.jsxs)("li",{className:ds.tagItemWrap,children:[null===e||void 0===e?void 0:e.label,(null===t||void 0===t?void 0:t.length)>1&&(0,ae.jsx)(se.A,{variant:"link",size:"sm",style:{marginLeft:"5px",padding:0},onClick:()=>((e,s)=>{const t={...i},n=t[e].filter((e=>e!==s));0===n.length?delete t[e]:t[e]=n,l(t)})(s,e),children:(0,ae.jsx)(Q.A,{color:"#F96969",size:15})})]},n))),(0,ae.jsx)(se.A,{variant:"link",size:"sm",style:{marginLeft:"0px",padding:0},onClick:()=>(e=>{const s={...i};delete s[e],l(s)})(s),children:(0,ae.jsx)(Q.A,{color:"#F96969",size:20})})]})})},s)}))})})},ms=()=>{var e;const{session:s}=(0,M.As)(),[t,y,f]=(0,p.d7)("",400),[j,_]=(0,i.useState)([]),[b,N]=(0,i.useState)(!1),[q,F]=(0,i.useState)(!1),[$,R]=(0,i.useState)(!1),[z,D]=(0,i.useState)("all"),[U,B]=(0,i.useState)({}),P=(0,u.I)({queryKey:["getEnquiryCounts"],queryFn:()=>{var e;return(0,I.ML)(null===s||void 0===s||null===(e=s.organization)||void 0===e?void 0:e.id)},enabled:!(null===s||void 0===s||null===(e=s.organization)||void 0===e||!e.id)});document.querySelectorAll(".enquiries-badge").forEach((e=>{var s,t,i;e.style.display=(null===P||void 0===P||null===(s=P.data)||void 0===s?void 0:s.count)>0?"inline-block":"none",e.innerText=(null===P||void 0===P||null===(t=P.data)||void 0===t?void 0:t.count)>99?"99+":null===P||void 0===P||null===(i=P.data)||void 0===i?void 0:i.count}));const H=(0,m.n)({mutationFn:e=>(0,I.HU)(e),onSuccess:()=>{_([]),R((e=>!e)),null===P||void 0===P||P.refetch(),g.oR.success("Submissions deleted successfully")},onError:e=>{console.error("Error deleting submissions:",e),g.oR.error("Failed to delete submissions")}}),O=(0,m.n)({mutationFn:e=>(0,I.MC)(e),onSuccess:()=>{_([]),R((e=>!e)),null===P||void 0===P||P.refetch(),g.oR.success("Submissions restored successfully")},onError:e=>{console.error("Error restoring submissions:",e),g.oR.error("Failed to restore submissions")}});return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(d.mg,{children:(0,ae.jsx)("title",{children:"MeMate - Enquiries"})}),(0,ae.jsxs)("div",{className:`topbar ${null!==j&&void 0!==j&&j.length?C:""} ${b?T:""}`,style:{padding:"4px 32px 4px 23px",position:"relative",height:"48px"},children:[(0,ae.jsx)("div",{className:"left-side d-flex align-items-center",style:{gap:"16px"},children:null!==j&&void 0!==j&&j.length?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("h6",{className:k,children:["Selected: ",null===j||void 0===j?void 0:j.length]}),(0,ae.jsx)("div",{className:"filtered-box d-flex",style:{gap:"8px"},children:b?(0,ae.jsx)("button",{className:L,onClick:()=>{if(0===j.length)return;const e=j.map((e=>e.id));O.mutate(e)},disabled:O.isPending,title:"Restore selected",children:O.isPending?(0,ae.jsx)(v.p,{style:{width:"16px",height:"16px"},strokeWidth:"4"}):(0,ae.jsx)(l.A,{size:16,color:"#067647"})}):(0,ae.jsx)("button",{className:E,onClick:()=>{if(0===j.length)return;const e=j.map((e=>e.id));H.mutate(e)},disabled:H.isPending,title:"Delete selected",children:H.isPending?(0,ae.jsx)(v.p,{style:{width:"16px",height:"16px"},strokeWidth:"4"}):(0,ae.jsx)(n.A,{size:16,color:"#D92D20"})})})]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"filtered-box",children:(0,ae.jsx)(cs,{setFilters:B,filter:U,isShowDeleted:b,setIsShowDeleted:e=>{_([]),N(e)}})}),(0,ae.jsxs)("div",{className:"searchBox",style:{position:"relative"},children:[(0,ae.jsx)("div",{style:{position:"absolute",top:"2px",left:"6px"},children:(0,ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,ae.jsx)("path",{d:"M14.6777 12.9299C15.6661 11.5841 16.25 9.92275 16.25 8.125C16.25 3.63769 12.6123 0 8.125 0C3.63769 0 0 3.63769 0 8.125C0 12.6123 3.63769 16.25 8.125 16.25C9.92323 16.25 11.585 15.6658 12.9309 14.6769L12.9299 14.6777C12.9667 14.7277 13.0078 14.7756 13.053 14.8208L17.8661 19.6339C18.3543 20.122 19.1457 20.122 19.6339 19.6339C20.122 19.1457 20.122 18.3543 19.6339 17.8661L14.8208 13.053C14.7756 13.0078 14.7277 12.9667 14.6777 12.9299ZM15 8.125C15 11.922 11.922 15 8.125 15C4.32804 15 1.25 11.922 1.25 8.125C1.25 4.32804 4.32804 1.25 8.125 1.25C11.922 1.25 15 4.32804 15 8.125Z",fill:"#98A2B3"})})}),(0,ae.jsx)("input",{type:"text",placeholder:"Search",value:t,onChange:e=>f(e.target.value),className:"border search-resource",style:{borderRadius:"4px",width:"184px",border:"1px solid #D0D5DD",color:"#424242",paddingLeft:"36px",fontSize:"14px",height:"32px"}})]})]})}),(0,ae.jsxs)("div",{className:"featureName d-flex align-items-center gap-3",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[(0,ae.jsx)(c.N_,{to:"/enquiries",className:(0,h.A)("d-flex align-items-center px-2 py-1",A,{[C]:"all"===z}),onClick:()=>D("all"),children:(0,ae.jsx)("span",{className:w,children:"All"})}),(0,ae.jsxs)(c.N_,{to:"/enquiries",className:(0,h.A)("d-flex align-items-center px-2 py-1",A,{[C]:"web"===z}),onClick:()=>D("web"),children:[(0,ae.jsx)(a.A,{color:"#9E77ED",size:16,className:"me-2"}),(0,ae.jsx)("span",{className:w,children:"Web"})]}),(0,ae.jsxs)(c.N_,{to:"/enquiries",className:(0,h.A)("d-flex align-items-center px-2 py-1",A,{[C]:"form"===z}),onClick:()=>D("form"),children:[(0,ae.jsx)(r.A,{color:"#F79009",size:16,className:"me-2"}),(0,ae.jsx)("span",{className:w,children:"Form"})]})]}),(0,ae.jsxs)("div",{className:"right-side d-flex align-items-center",style:{gap:"8px"},children:[(0,ae.jsx)(x.$,{className:`solid-button font-14 ${S}`,onClick:()=>F(!0),children:"New Enquiry"}),(0,ae.jsx)(c.N_,{to:"/enquiries/forms",children:(0,ae.jsxs)(x.$,{className:"info-button py-1 font-14",children:["Set Up ",(0,ae.jsx)(o.A,{color:"#158ECC",size:20})]})})]})]}),Object.keys(U).length>0&&(0,ae.jsx)(us,{setFilters:B,filter:U}),(0,ae.jsx)(ke,{searchValue:y,selectedSubmissions:j,setSelectedSubmissions:_,isShowDeleted:b,refetchTrigger:$,setRefetchTrigger:R,filterType:z,enquiriesCountQuery:P,statusFilter:U}),(0,ae.jsx)(ts,{refetchTrigger:R,visible:q,setVisible:F,enquiriesCountQuery:P})]})}},87201:(e,s,t)=>{t.d(s,{Jy:()=>a,bJ:()=>n,lI:()=>r});var i=t(31342);const l="https://app.memate.com.au/api/v1";async function n(e){const s=`${l}/inquiries/form/`,t={method:"POST",body:e};return(0,i.f)(s,t)}async function a(e){const s=`${l}/inquiries/form/${e}/`;return(0,i.f)(s,{method:"GET"})}async function r(e,s){const t=`${l}/inquiries/form/${e}/update/`,n={method:"PATCH",body:s};return(0,i.f)(t,n)}},99868:(e,s,t)=>{t.d(s,{A:()=>p});var i=t(65043),l=t(14282),n=t(38294),a=t(35475),r=t(58387);const o="no-data-found-template_noDataBox__HgeT1",d="no-data-found-template_title__P5uV2",c="no-data-found-template_subTitle__zMBB-",u="no-data-found-template_supportext__pHg2P";var m=t(20793),h=t(32808),x=t(70579);const p=e=>{let{isDataExist:s=!0}=e;const[t,p]=(0,i.useState)(!1);return(0,x.jsxs)("div",{className:(0,r.A)(o),children:[(0,x.jsx)("div",{className:"position-relative d-flex flex-column",children:(0,x.jsx)("img",{src:m,alt:"no-data"})}),s?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h2",{className:(0,r.A)(d),children:"There is no results"}),(0,x.jsxs)("p",{className:(0,r.A)(c),children:["The user you are looking for doesn't exist. ",(0,x.jsx)("br",{}),"Here are some helpful links:"]}),(0,x.jsx)(a.N_,{to:"/",children:(0,x.jsxs)(l.A,{className:"outline-button",style:{marginBottom:"32px"},children:[" ",(0,x.jsx)(n.A,{})," Go back"]})}),(0,x.jsx)(a.N_,{onClick:()=>p(!0),to:"#",children:(0,x.jsx)("span",{className:(0,r.A)(u),children:"Support"})})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("h2",{className:(0,r.A)(d),children:"No historical records yet."})}),(0,x.jsx)(h.A,{setVisible:p,visible:t})]})}}}]);
//# sourceMappingURL=4719.6abf3d00.chunk.js.map