"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[4908],{24908:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(65043),i=s(87201),n=(s(61234),s(70579));const r=5;function o(e){let{organizationId:t=r}=e;const[s,o]=(0,a.useState)(String(t||r)),[d,c]=(0,a.useState)([]),[l,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),u=async e=>{p(!0),h("");try{const t=await(0,i.sk)(e),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.results)||[];c(s)}catch(t){h(t.message||"Failed to load forms")}finally{p(!1)}};(0,a.useEffect)((()=>{u(s)}),[]);return(0,n.jsx)("div",{className:"mf-builder",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("header",{children:(0,n.jsx)("h1",{children:"Forms"})}),(0,n.jsx)("div",{className:"editor-actions",style:{gap:12},children:(0,n.jsxs)("div",{className:"form-field",style:{display:"flex",alignItems:"center",gap:8,margin:0},children:[(0,n.jsx)("label",{htmlFor:"org-id",style:{margin:0},children:"Organization ID"}),(0,n.jsx)("input",{id:"org-id",value:s,onChange:e=>o(e.target.value),style:{width:120}}),(0,n.jsx)("button",{className:"btn",onClick:()=>u(s),children:"Load"}),(0,n.jsx)("button",{className:"btn",onClick:()=>u(s),children:"Reload"}),(0,n.jsx)("a",{className:"btn btn-primary",href:"/enquiries/form-builder/new",children:"New Form"})]})}),l&&(0,n.jsx)("p",{children:"Loading\u2026"}),m&&(0,n.jsx)("p",{className:"error-message",children:m}),!l&&!m&&(0,n.jsx)("div",{className:"table-wrap",style:{overflowX:"auto",marginTop:12},children:(0,n.jsxs)("table",{className:"mf-table",style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"ID"}),(0,n.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Form"}),(0,n.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Domain"}),(0,n.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Created At"}),(0,n.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Inquiries"}),(0,n.jsx)("th",{style:{textAlign:"center",padding:"8px 10px",borderBottom:"1px solid #e5e7eb"},children:"Actions"})]})}),(0,n.jsxs)("tbody",{children:[0===d.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,style:{padding:"12px"},children:"No forms found for this organization."})}),d.map((e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{padding:"8px 10px"},children:e.id}),(0,n.jsx)("td",{style:{padding:"8px 10px"},children:e.title||"(untitled)"}),(0,n.jsx)("td",{style:{padding:"8px 10px"},children:e.domain||"-"}),(0,n.jsx)("td",{style:{padding:"8px 10px"},children:e.created?new Date(e.created).toLocaleString():"-"}),(0,n.jsx)("td",{style:{padding:"8px 10px"},children:e.inquiries_count||0}),(0,n.jsxs)("td",{style:{padding:"8px 10px",display:"flex",gap:8},children:[(0,n.jsx)("button",{className:"btn btn-secondary",onClick:()=>(async e=>{const t=`<script src="https://dev.memate.com.au/astatic/inquiries/embed.js" data-form-id="${e}"><\/script>`;try{await navigator.clipboard.writeText(t),alert("Embed code copied to clipboard")}catch(s){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand&&document.execCommand("copy"),document.body.removeChild(e),alert("Embed code copied to clipboard")}})(e.id),children:"Copy Embed"}),(0,n.jsx)("a",{className:"btn btn-secondary",href:`/enquiries/form-builder/new?id=${e.id}`,children:"Edit"}),(0,n.jsx)("a",{className:"btn btn-secondary",href:`/enquiries/form-builder/inquiries?id=${e.id}`,children:"Inquiries"}),(0,n.jsx)("button",{className:"btn",style:{backgroundColor:"#f87171",color:"white"},onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this form?"))try{await(0,i.i6)(e),alert("Form deleted successfully"),u(s)}catch(t){alert(t.message||"Failed to delete form")}})(e.id),children:"Delete"})]})]},e.id)))]})]})})]})})}},61234:()=>{},87201:(e,t,s)=>{s.d(t,{Jy:()=>r,Mb:()=>d,bJ:()=>i,i6:()=>c,lI:()=>o,sk:()=>n});const a="https://dev.memate.com.au/api/v1/inquiries/form/";async function i(e){const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text().catch((()=>""));throw new Error(`API ${t.status}: ${e||t.statusText}`)}return t.json()}async function n(e){const t=`https://dev.memate.com.au/api/v1/inquiries/forms/?organization=${encodeURIComponent(e)}`,s=await fetch(t);if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return s.json()}async function r(e){const t=`https://dev.memate.com.au/api/v1/inquiries/form/${e}/`,s=await fetch(t);if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return s.json()}async function o(e,t){const s=`https://dev.memate.com.au/api/v1/inquiries/form/${e}/update/`,a=await fetch(s,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.text().catch((()=>""));throw new Error(`API ${a.status}: ${e||a.statusText}`)}return a.json()}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("formId is required");const s=`https://dev.memate.com.au/api/v1/inquiries/form/${encodeURIComponent(e)}/submissions/`,a=new URLSearchParams;t.page&&a.set("page",t.page),t.page_size&&a.set("page_size",t.page_size),null!=t.status&&a.set("status",t.status),t.assigned_to&&a.set("assigned_to",t.assigned_to),t.search&&a.set("search",t.search),t.ordering&&a.set("ordering",t.ordering);const i=a.toString()?`${s}?${a.toString()}`:s,n=await fetch(i);if(!n.ok){const e=await n.text().catch((()=>""));throw new Error(`API ${n.status}: ${e||n.statusText}`)}return n.json()}async function c(e){const t=`https://dev.memate.com.au/api/v1/inquiries/form/${e}/delete/`,s=await fetch(t,{method:"DELETE"});if(!s.ok){const e=await s.text().catch((()=>""));throw new Error(`API ${s.status}: ${e||s.statusText}`)}return!0}}}]);
//# sourceMappingURL=4908.bef8070b.chunk.js.map