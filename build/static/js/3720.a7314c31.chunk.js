"use strict";(self.webpackChunkmemateapp=self.webpackChunkmemateapp||[]).push([[3720],{23720:(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var l=t(65043),i=t(49367),r=t(27417),o=t(96141),n=t(73216),a=t(35475),d=t(93747),c=t(47097),u=t(58387),m=t(72018),h=t(9642),p=t(64824),v=t(93740),x=t(56328),g=t(61072),j=t(78602),f=t(73898),b=t(93202),w=t(69956),_=t(33361),y=t(24858),N=t(17380),A=t(18403),S=t(63712),P=t(55797),k=t(8129),T=t(28676),E=t(74532),R=t(72052),$=t(74856),B=t(80899),F=t(24370),I=t(63882),C=t(84576),U=t(70579);const q=e=>{var s,t,i,r,o,n,a,c;let{visible:h,setVisible:p,id:q=null,setId:O,refetch:D,privilegeOptions:H}=e;const[L,z]=(0,l.useState)(!1),[V,G]=(0,l.useState)(null),[M,Y]=(0,l.useState)(!1),{control:K,register:W,reset:X,handleSubmit:Z,formState:{errors:J}}=(0,y.mN)({resolver:(0,A.t)((Q=!!q,B.Ik({firstName:B.Yj().required("First Name is required"),lastName:B.Yj().required("Last Name is required"),email:B.Yj().email("Invalid email address").required("Email is required"),phone:B.Yj().optional(),role:B.Yj().required("Role is required"),privilege:B.Yj().required("Privilege is required"),password:Q?B.Yj().notRequired():B.Yj().required("Password is required"),repeatPassword:B.Yj().when("password",{is:e=>!Q||!!e,then:e=>e.required("Repeat Password is required").oneOf([B.KR("password")],"Passwords must match"),otherwise:e=>e.notRequired().nullable()})}).required())),defaultValues:{firstName:"",lastName:"",email:"",phone:"",role:"",privilege:"",password:"",repeatPassword:""}});var Q;const ee=(0,d.I)({queryKey:["readDesktopUser",q],queryFn:()=>(0,F.mt)(q),enabled:!!q,retry:0}),se=()=>{p(!1),O(null),G(null),X({firstName:"",lastName:"",email:"",phone:"",role:"",privilege:"",password:"",repeatPassword:""})},te=async e=>{console.log("data: ",e);const s=new FormData;if(s.append("first_name",e.firstName),s.append("last_name",e.lastName),s.append("email",e.email.toLowerCase()),s.append("phone",e.phone),s.append("role",e.role),s.append("privilege",e.privilege),e.password&&s.append("password",e.password),null!==V&&void 0!==V&&V.croppedImageBlob){const e=(0,S.Ak)(6);s.append("photo",V.croppedImageBlob,`${e}.jpg`)}let t="POST",l="https://dev.memate.com.au/api/v1/desktop-users/new/";q&&(t="PUT",l=`https://dev.memate.com.au/api/v1/desktop-users/update/${q}/`);const i=localStorage.getItem("access_token");try{Y(!0);const e=await fetch(l,{method:t,headers:{Authorization:`Bearer ${i}`},body:s});return Y(!1),e.ok?(se(),x.oR.success("Desktop user created successfully!"),D(),"success"):(x.oR.error("Failed to create the user. Please try again."),"error")}catch(r){Y(!1),console.error("Error creating user:",r),x.oR.error("Failed to create the user. Please try again.")}finally{Y(!1)}};(0,l.useEffect)((()=>{var e,s,t,l,i,r,o,n,a;null!==ee&&void 0!==ee&&ee.data&&q?(X({firstName:null===ee||void 0===ee||null===(e=ee.data)||void 0===e?void 0:e.first_name,lastName:null===ee||void 0===ee||null===(s=ee.data)||void 0===s?void 0:s.last_name,email:null===ee||void 0===ee||null===(t=ee.data)||void 0===t?void 0:t.email,phone:null===ee||void 0===ee||null===(l=ee.data)||void 0===l?void 0:l.phone,role:null===ee||void 0===ee||null===(i=ee.data)||void 0===i?void 0:i.role,privilege:null===ee||void 0===ee||null===(r=ee.data)||void 0===r?void 0:r.privilege}),null!==ee&&void 0!==ee&&null!==(o=ee.data)&&void 0!==o&&o.photo&&null!==ee&&void 0!==ee&&null!==(n=ee.data)&&void 0!==n&&n.has_photo&&G(null===ee||void 0===ee||null===(a=ee.data)||void 0===a?void 0:a.photo)):(G(""),X({firstName:"",lastName:"",email:"",phone:"",role:"",privilege:"",password:"",repeatPassword:""}))}),[null===ee||void 0===ee?void 0:ee.data,q,X]);const le=(0,U.jsx)("div",{className:`${C.A.modalHeader}`,children:(0,U.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,U.jsx)("div",{className:C.A.circledesignstyle,children:(0,U.jsx)("div",{className:C.A.out,children:q?(0,U.jsx)(f.A,{size:24,color:"#17B26A",className:"mb-0"}):(0,U.jsx)(b.A,{size:24,color:"#17B26A",className:"mb-0"})})}),(0,U.jsxs)("span",{className:`white-space-nowrap ${C.A.headerTitle}`,children:[q?"Edit":"Add"," Desktop User"]})]})}),ie=(0,U.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,U.jsx)("span",{}),(0,U.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,U.jsx)(m.$,{className:"outline-button",onClick:se,children:"Cancel"}),(0,U.jsxs)(m.$,{type:"submit",disabled:M,onClick:Z(te),className:"solid-button",children:[q?"Update":"Save"," Details",M&&(0,U.jsx)(v.p,{style:{width:"20px",height:"20px"}})]})]})]}),re=null===H||void 0===H||null===(s=H.filter((e=>"Admin"!==(null===e||void 0===e?void 0:e.name))))||void 0===s?void 0:s.map((e=>({label:(null===e||void 0===e?void 0:e.name)||"",value:null===e||void 0===e?void 0:e.id})));return(0,U.jsx)(P.l,{visible:h,modal:!0,header:le,footer:ie,className:`${C.A.modal} custom-modal`,onHide:se,children:(0,U.jsx)("div",{className:"d-flex flex-column",children:(0,U.jsx)("form",{onSubmit:Z(te),children:(0,U.jsxs)(g.A,{children:[(0,U.jsxs)(j.A,{sm:12,children:[(0,U.jsxs)("div",{className:(0,u.A)(C.A.fileUploadBox,"cursor-pointer"),onClick:()=>z(!0),children:[(0,U.jsx)("div",{className:(0,u.A)(C.A.uploadedImgBox),children:V?(0,U.jsx)("img",{src:(null===V||void 0===V?void 0:V.croppedImageBase64)||V,alt:"profile-img"}):(0,U.jsx)(w.A,{size:20,color:"#667085"})}),(0,U.jsx)("p",{className:(0,u.A)("mb-0",C.A.uploadedText1),children:(0,U.jsx)("span",{className:(0,u.A)("mb-0",C.A.uploadedText2),children:"Click to upload"})}),(0,U.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]}),(0,U.jsx)(I.A,{show:L,setShow:z,setPhoto:G})]}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"First Name"}),(0,U.jsx)(R.S,{...W("firstName"),className:(0,u.A)(C.A.inputText,"outline-none",{[C.A.error]:null===J||void 0===J?void 0:J.firstName}),placeholder:"Enter first name"}),(null===J||void 0===J?void 0:J.firstName)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(t=J.firstName)||void 0===t?void 0:t.message})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Last Name"}),(0,U.jsx)(R.S,{...W("lastName"),className:(0,u.A)(C.A.inputText,"outline-none",{[C.A.error]:null===J||void 0===J?void 0:J.lastName}),placeholder:"Enter last name"}),(null===J||void 0===J?void 0:J.lastName)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(i=J.lastName)||void 0===i?void 0:i.message})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Email"}),(0,U.jsxs)(T.C,{iconPosition:"left",children:[(0,U.jsx)(E.m,{children:(0,U.jsx)(_.A,{style:{position:"relative",top:"-5px"},size:20,color:"#667085"})}),(0,U.jsx)(R.S,{...W("email"),disabled:!!q,style:{paddingLeft:"38px"},className:(0,u.A)(C.A.inputText,"outline-none",{[C.A.error]:null===J||void 0===J?void 0:J.email}),placeholder:"company@email.com"})]}),(null===J||void 0===J?void 0:J.email)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(r=J.email)||void 0===r?void 0:r.message})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Phone (optional)"}),(0,U.jsx)(y.xI,{name:"phone",control:K,render:e=>{let{field:s}=e;return(0,U.jsx)(N.LR,{defaultCountry:"au",value:"string"===typeof s.value?s.value:"",className:"phoneInput rounded",onChange:s.onChange,placeholder:"Enter phone number"})}})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Role"}),(0,U.jsx)(R.S,{...W("role"),className:(0,u.A)(C.A.inputText,"outline-none"),placeholder:"Select role"}),(null===J||void 0===J?void 0:J.role)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(o=J.role)||void 0===o?void 0:o.message})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Privilege"}),(0,U.jsx)(y.xI,{name:"privilege",control:K,defaultValue:"",render:e=>{let{field:s}=e;return(0,U.jsx)(k.m,{...s,options:re,className:(0,u.A)(C.A.dropdownSelect,"dropdown-height-fixed","outline-none"),placeholder:"Select privilege",value:s.value,style:{height:"46px"},onChange:e=>s.onChange(e.value)})}}),(null===J||void 0===J?void 0:J.privilege)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(n=J.privilege)||void 0===n?void 0:n.message})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Password"}),(0,U.jsx)(R.S,{type:"password",...W("password"),className:(0,u.A)(C.A.inputText,"outline-none",{[C.A.error]:null===J||void 0===J?void 0:J.password}),placeholder:"Enter password"}),(null===J||void 0===J?void 0:J.password)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(a=J.password)||void 0===a?void 0:a.message})]})}),(0,U.jsx)(j.A,{sm:6,children:null!==ee&&void 0!==ee&&ee.isFetching?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)($.E,{width:"20%",className:"mb-2"}),(0,U.jsx)($.E,{width:"100%",height:"3rem",className:"mb-4"})]}):(0,U.jsxs)("div",{className:"d-flex flex-column gap-1 mb-4",children:[(0,U.jsx)("label",{className:(0,u.A)(C.A.label),children:"Repeat Password"}),(0,U.jsx)(R.S,{type:"password",...W("repeatPassword"),className:(0,u.A)(C.A.inputText,"outline-none",{[C.A.error]:null===J||void 0===J?void 0:J.repeatPassword}),placeholder:"Repeat password"}),(null===J||void 0===J?void 0:J.repeatPassword)&&(0,U.jsx)("p",{className:"error-message",children:null===J||void 0===J||null===(c=J.repeatPassword)||void 0===c?void 0:c.message})]})})]})})})})};var O=t(48417),D=t(58027);const H=e=>{var s,t,i,g,j,f,b,w,_,y;let{visible:N,setVisible:A}=e;const{trialHeight:S}=(0,O.$)(),P=(0,n.Zp)(),[k,T]=(0,l.useState)(null),[E,R]=(0,l.useState)(!1),$=(0,d.I)({queryKey:["desktop-users-list"],queryFn:F.MA}),B=(0,d.I)({queryKey:["privileges-list"],queryFn:F.rY});let I=(null===$||void 0===$||null===(s=$.data)||void 0===s||null===(t=s.users)||void 0===t?void 0:t.filter((e=>e.is_active)))||0;const H=E?null===$||void 0===$||null===(i=$.data)||void 0===i||null===(g=i.users)||void 0===g?void 0:g.filter((e=>!e.is_active)):(null===$||void 0===$||null===(j=$.data)||void 0===j||null===(f=j.users)||void 0===f?void 0:f.filter((e=>e.is_active)))||[],L=(0,c.n)({mutationFn:e=>(0,F.V0)(e),onSuccess:()=>{null===$||void 0===$||$.refetch(),x.oR.success("User deleted successfully"),L.reset()},onError:e=>{console.log("error: ",e),x.oR.error("Failed to delete user. Please try again.")}}),z=(0,c.n)({mutationFn:e=>(0,F._S)(e),onSuccess:()=>{R(!1),null===$||void 0===$||$.refetch(),x.oR.success("User restored successfully"),z.reset()},onError:e=>{console.log("error: ",e),x.oR.error("Failed to restore user. Please try again.")}});console.log("restoreMutation: ",null===z||void 0===z?void 0:z.variables);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:"settings-content setModalelBoots w-100",children:[(0,U.jsxs)("div",{className:"headSticky",children:[(0,U.jsx)("h1",{className:"mb-0",children:"Users"}),(0,U.jsxs)("div",{className:`contentMenuTab ${C.A.contentMenuTab}`,style:{height:"50px"},children:[(0,U.jsxs)("ul",{children:[(0,U.jsx)("li",{className:"menuActive",children:(0,U.jsx)(a.N_,{to:"/settings/users/desktop",children:"Desktop"})}),(0,U.jsx)("li",{children:(0,U.jsx)(a.N_,{to:"/settings/users/mobile-app",children:"Mobile App"})})]}),(0,U.jsxs)(m.$,{disabled:(null===$||void 0===$||null===(b=$.data)||void 0===b||null===(w=b.limits)||void 0===w?void 0:w.total)<=(null===I||void 0===I?void 0:I.length),onClick:()=>A(!0),className:(0,u.A)(C.A.addUserBut,"outline-none"),children:["Add ",(0,U.jsx)(o.A,{size:20,color:"#000"})]})]})]}),(0,U.jsx)("div",{className:`content_wrap_main ${C.A.contentwrapmain}`,style:{paddingBottom:`${S}px`},children:(0,U.jsx)("div",{className:"content_wrapper border-top",children:(0,U.jsxs)("div",{className:"listwrapper",children:[(0,U.jsxs)("div",{className:"topHeadStyle pb-4",children:[(0,U.jsxs)("div",{className:C.A.userHead,children:[(0,U.jsx)("h2",{children:"Desktop Users"}),(0,U.jsxs)("p",{className:"d-flex align-items-center gap-2",children:[(null===I||void 0===I?void 0:I.length)||0," / ",(null===$||void 0===$||null===(_=$.data)||void 0===_||null===(y=_.limits)||void 0===y?void 0:y.total)||0,(0,U.jsx)(a.N_,{to:"/settings/generalinformation/subscription",className:"p-0 border-0",style:{background:"transparent"},children:(0,U.jsx)("span",{className:"cursor-pointer",children:"Buy More"})})]})]}),(0,U.jsxs)(m.$,{onClick:()=>R(!E),className:(0,u.A)(C.A.showDeleteBut,"outline-none"),children:[E?"Hide":"Show"," Deleted"]})]}),(0,U.jsx)("div",{className:`settings-wrap ${C.A.userSettingPage}`,children:(0,U.jsxs)(p.b,{value:H,showGridlines:!0,tableStyle:{minWidth:"50rem"},children:[(0,U.jsx)(h.V,{field:"name",style:{width:"auto"},body:e=>(0,U.jsxs)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",children:[(0,U.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,U.jsx)(D.h,{has_photo:e.has_photo,photo:e.photo,is_business:!1}),(0,U.jsx)("div",{className:"d-flex flex-column gap-1",children:(0,U.jsxs)("div",{className:`${C.A.ellipsis}`,children:[e.first_name," ",e.last_name]})})]}),(0,U.jsx)(m.$,{label:"Edit",onClick:()=>{"Admin"===(null===e||void 0===e?void 0:e.privilege_name)?P("/settings/generalinformation/profile"):(T(null===e||void 0===e?void 0:e.id),A(!0))},className:"primary-text-button ms-3 show-on-hover-element not-show-checked"})]}),header:"Name"}),(0,U.jsx)(h.V,{field:"email",style:{width:"267px"},header:"Email"}),(0,U.jsx)(h.V,{field:"phone",style:{width:"210px"},header:"Phone"}),(0,U.jsx)(h.V,{field:"role",style:{width:"210px"},header:"Role"}),(0,U.jsx)(h.V,{field:"privilege",body:e=>(0,U.jsx)("div",{className:"d-flex align-items-center justify-content-between show-on-hover",children:(0,U.jsx)("div",{className:`styleGrey01  ${C.A.privilege}`,children:(null===e||void 0===e?void 0:e.privilege_name)||"-"})}),style:{width:"147px"},header:"Privilege"}),(0,U.jsx)(h.V,{style:{width:"210px"},header:"Actions",body:e=>"Admin"===(null===e||void 0===e?void 0:e.privilege_name)?"-":(0,U.jsx)(l.Fragment,{children:null!==e&&void 0!==e&&e.is_active?(0,U.jsxs)(m.$,{disabled:(null===L||void 0===L?void 0:L.variables)===(null===e||void 0===e?void 0:e.id),onClick:()=>{L.mutate(null===e||void 0===e?void 0:e.id)},className:(0,u.A)(C.A.dangerTextButton,"text-button"),style:{width:"120px"},children:["Delete",(null===L||void 0===L?void 0:L.variables)===(null===e||void 0===e?void 0:e.id)?(0,U.jsx)(v.p,{style:{width:"20px",height:"20px"}}):""]}):(0,U.jsxs)(m.$,{disabled:(null===z||void 0===z?void 0:z.variables)===(null===e||void 0===e?void 0:e.id),onClick:()=>(e=>{var s,t;(null===$||void 0===$||null===(s=$.data)||void 0===s||null===(t=s.limits)||void 0===t?void 0:t.total)<=(null===I||void 0===I?void 0:I.length)?x.oR.error("You have reached the maximum number of users allowed."):z.mutate(e)})(null===e||void 0===e?void 0:e.id),className:(0,u.A)(C.A.successTextButton,"text-button"),style:{width:"120px",color:"#067647"},children:["Restore",(null===z||void 0===z?void 0:z.variables)===(null===e||void 0===e?void 0:e.id)?(0,U.jsx)(v.p,{style:{width:"20px",height:"20px"}}):""]})})})]})})]})})})]}),$.isLoading&&(0,U.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",background:"white",width:"60px",height:"60px",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},className:"shadow-lg",children:(0,U.jsx)(r.A,{animation:"border",role:"status",children:(0,U.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),(0,U.jsx)(q,{id:k,setId:T,visible:N,setVisible:A,refetch:()=>null===$||void 0===$?void 0:$.refetch(),privilegeOptions:(null===B||void 0===B?void 0:B.data)||[]})]})},L=()=>{const[e,s]=(0,l.useState)(!1);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(i.mg,{children:(0,U.jsx)("title",{children:"MeMate - Desktop Users"})}),(0,U.jsx)("div",{className:`${C.A.userSettingPage}`,children:(0,U.jsx)(H,{visible:e,setVisible:s})})]})}},24370:(e,s,t)=>{t.d(s,{KI:()=>p,MA:()=>o,V0:()=>d,_S:()=>c,gy:()=>u,mr:()=>m,mt:()=>a,rY:()=>r,sf:()=>n,vm:()=>h});var l=t(31342);const i="https://dev.memate.com.au/api/v1",r=async()=>{const e=new URL(`${i}/references/privileges/`);return(0,l.f)(e.toString(),{method:"GET"})},o=async()=>{const e=new URL(`${i}/desktop-users/`);return(0,l.f)(e.toString(),{method:"GET"})},n=async e=>{const s={method:"PUT",body:e},t=new URL(`${i}/settings/subscriptions/business/`);return(0,l.f)(t.toString(),s)},a=async e=>{const s=new URL(`${i}${`/desktop-users/update/${e}/`}`);return(0,l.f)(s.toString(),{method:"GET"})},d=async e=>{const s=new URL(`${i}${`/desktop-users/active/${e}/`}`);return(0,l.f)(s.toString(),{method:"PUT",body:{is_active:!1}})},c=async e=>{const s=new URL(`${i}${`/desktop-users/active/${e}/`}`);return(0,l.f)(s.toString(),{method:"PUT",body:{is_active:!0}})},u=async()=>{const e=new URL(`${i}/team/mobile-users/`);return(0,l.f)(e.toString(),{method:"GET"})},m=async e=>{const s={method:"PUT",body:e},t=new URL(`${i}/settings/subscriptions/work/`);return(0,l.f)(t.toString(),s)},h=async e=>{const s=new URL(`${i}${`/mobile-users/active/${e}/`}`);return(0,l.f)(s.toString(),{method:"PUT",body:{is_active:!1}})},p=async e=>{const s=new URL(`${i}${`/mobile-users/active/${e}/`}`);return(0,l.f)(s.toString(),{method:"PUT",body:{is_active:!0}})}},31342:(e,s,t)=>{t.d(s,{f:()=>l});const l=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{method:l="GET",headers:i={},body:r}=s,o=localStorage.getItem("access_token"),n=r instanceof FormData,a={"Content-Type":n?"multipart/form-data":"application/json",...i};t&&(a.Authorization=`Bearer ${o}`);const d={method:l,headers:a,body:n?r:JSON.stringify(r),redirect:"follow"};try{const s=new URL(`${e}`),t=await fetch(s,d);if(!t.ok){if(401===t.status&&(window.localStorage.clear(),window.sessionStorage.clear(),window.location.replace("/login")),404===t.status)throw new Error("Not found");throw new Error(`HTTP error! Status: ${t.status}`)}const l=t.headers.get("Content-Type");if(l&&l.includes("application/json"))return await t.json();return{message:"Non-JSON response",body:await t.text()}}catch(c){throw console.error("Fetch API error:",c),c}}},63882:(e,s,t)=>{t.d(s,{A:()=>y});var l=t(65043),i=t(32952),r=t(14282),o=t(76163),n=t(69956),a=t(89488),d=t(55683),c=t(58387),u=t(73722);const m="file-uploader_title__+HTTy",h="file-uploader_previewSection__mnNRf",p="file-uploader_previewBox__j6psm",v="file-uploader_previewBoxImg1__SR-1w",x="file-uploader_previewBoxImg2__zYCKK",g="file-uploader_previewBoxImg3__YNTWI",j="file-uploader_previewBoxImg4__cRl+e",f="file-uploader_previewBoxImg5__GzHFj",b="file-uploader_previewActions__UO1dp",w="file-uploader_label__Udhfq";var _=t(70579);const y=e=>{let{show:s,setShow:t,setPhoto:y,additionalDesign:N,shape:A="rect"}=e;const[S,P]=(0,l.useState)([]),[k,T]=(0,l.useState)({x:0,y:0}),[E,R]=(0,l.useState)(1),[$,B]=(0,l.useState)(0),[F,I]=(0,l.useState)(null),[C,U]=(0,l.useState)({}),q=(0,l.useCallback)(((e,s)=>{I(s)}),[]),O=(0,l.useCallback)((async()=>{if(!S.length||!F)return;const e=document.createElement("canvas"),s=e.getContext("2d"),t=new Image;t.src=S[0].preview,await new Promise((e=>t.onload=e)),e.width=F.width,e.height=F.height,s.translate(e.width/2,e.height/2),s.rotate($*Math.PI/180),s.translate(-e.width/2,-e.height/2),s.drawImage(t,F.x,F.y,F.width,F.height,0,0,F.width,F.height);return e.toDataURL("image/jpeg")}),[S,F,$]),D=async()=>{const e=await O();e&&U({img2:e,img3:e,img4:e,img5:e})};(0,l.useEffect)((()=>{D()}),[E,k,$,S,F]);const{getRootProps:H,getInputProps:L}=(0,a.VB)({maxFiles:1,accept:{"image/*":[]},onDrop:e=>{P(e.map((e=>Object.assign(e,{preview:URL.createObjectURL(e)}))))}});return(0,_.jsxs)(i.A,{style:{zIndex:1111},show:s,centered:!0,onHide:()=>t(!1),onShow:D,children:[(0,_.jsx)(i.A.Header,{closeButton:!0,children:(0,_.jsx)(i.A.Title,{children:(0,_.jsx)("span",{className:`${m}`,children:"Edit Photo"})})}),(0,_.jsxs)(i.A.Body,{children:[N,(0,_.jsxs)("div",{className:`${h}`,children:[(0,_.jsxs)("div",{className:`${p}`,children:[(0,_.jsx)("div",{className:(0,c.A)(v,"round"===A?"rounded-circle":""),children:(0,_.jsx)(d.Ay,{image:S.length>0?S[0].preview:null,crop:k,zoom:E,cropShape:A,rotation:$,onCropChange:T,onZoomChange:R,onCropComplete:q,aspect:1,restrictPosition:!1,style:{containerStyle:{width:"100%",height:"100%",position:"relative"},cropAreaStyle:{width:"100%",height:"100%"},mediaStyle:{width:"100%",height:"100%",objectFit:"contain"}}})}),(0,_.jsx)("div",{className:(0,c.A)(x,"round"===A?"rounded-circle":""),children:C.img2&&(0,_.jsx)("img",{src:C.img2,alt:"Preview 2",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_.jsx)("div",{className:(0,c.A)(g,"round"===A?"rounded-circle":""),children:C.img3&&(0,_.jsx)("img",{src:C.img3,alt:"Preview 3",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_.jsx)("div",{className:(0,c.A)(j,"round"===A?"rounded-circle":""),children:C.img4&&(0,_.jsx)("img",{src:C.img4,alt:"Preview 4",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,_.jsx)("div",{className:(0,c.A)(f,"round"===A?"rounded-circle":""),children:C.img5&&(0,_.jsx)("img",{src:C.img5,alt:"Preview 5",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),(0,_.jsxs)("div",{className:`${b}`,children:[(0,_.jsxs)(u.A.Group,{children:[(0,_.jsx)(u.A.Label,{className:`${w}`,children:"Zoom"}),(0,_.jsx)(u.A.Range,{value:E,min:1,max:3,step:.1,className:"custom-range",onChange:e=>R(e.target.value)})]}),(0,_.jsx)("div",{className:"d-flex align-item-center pt-4 ms-4",style:{gap:"8px"},children:(0,_.jsxs)(r.A,{className:"text-button",onClick:()=>{B((e=>(e+90)%360))},children:[(0,_.jsx)(o.A,{color:"#106B99",size:24}),"Rotate"]})})]})]}),(0,_.jsxs)("div",{...H({className:"dropzone d-flex justify-content-center align-items-center flex-column cursor-pointer"}),style:{width:"100%",height:"126px",background:"#fff",borderRadius:"4px",border:"1px solid #EAECF0",marginTop:"16px"},children:[(0,_.jsx)("input",{...L()}),(0,_.jsx)("button",{type:"button",className:"d-flex justify-content-center align-items-center",style:{width:"40px",height:"40px",border:"1px solid #EAECF0",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:(0,_.jsx)(n.A,{})}),(0,_.jsxs)("p",{className:"mb-0",style:{color:"#475467",fontSize:"14px"},children:[(0,_.jsx)("span",{style:{color:"#106B99",fontWeight:"600"},children:"Click to upload"})," or drag and drop"]}),(0,_.jsx)("span",{style:{color:"#475467",fontSize:"12px"},children:"SVG, PNG, JPG or GIF (max. 800x400px)"})]})]}),(0,_.jsxs)(i.A.Footer,{className:"d-flex justify-content-end",children:[(0,_.jsx)(r.A,{className:"outline-button",onClick:e=>{e.stopPropagation(),P([]),U({}),y(null),t(!1)},children:"Cancel"}),(0,_.jsx)(r.A,{className:"solid-button",onClick:async()=>{const e=await O(),s=function(e,s){const t=atob(e.split(",")[1]),l=new ArrayBuffer(t.length),i=new Uint8Array(l);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([l],{type:s})}(e,"image/jpeg");y({croppedImageBase64:e,croppedImageBlob:s}),t(!1)},children:"Save Photo"})]})]})}},74856:(e,s,t)=>{t.d(s,{E:()=>v});var l=t(65043),i=t(84052),r=t(41828),o=t(2028),n=t(4504);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function d(e){var s=function(e,s){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,s||"default");if("object"!=a(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==a(s)?s:s+""}function c(e,s,t){return(s=d(s))in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}var u={root:function(e){var s=e.props;return(0,n.xW)("p-skeleton p-component",{"p-skeleton-circle":"circle"===s.shape,"p-skeleton-none":"none"===s.animation})}},m=r.x.extend({defaultProps:{__TYPE:"Skeleton",shape:"rectangle",size:null,width:"100%",height:"1rem",borderRadius:null,animation:"wave",style:null,className:null},css:{classes:u,inlineStyles:{root:{position:"relative"}},styles:'\n@layer primereact {\n    .p-skeleton {\n        position: relative;\n        overflow: hidden;\n    }\n    \n    .p-skeleton::after {\n        content: "";\n        animation: p-skeleton-animation 1.2s infinite;\n        height: 100%;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        transform: translateX(-100%);\n        z-index: 1;\n    }\n    \n    .p-skeleton-circle {\n        border-radius: 50%;\n    }\n    \n    .p-skeleton-none::after {\n        animation: none;\n    }\n}\n\n@keyframes p-skeleton-animation {\n    from {\n        transform: translateX(-100%);\n    }\n    to {\n        transform: translateX(100%);\n    }\n}\n'}});function h(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);s&&(l=l.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,l)}return t}function p(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?h(Object(t),!0).forEach((function(s){c(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var v=l.memo(l.forwardRef((function(e,s){var t=(0,o.qV)(),a=l.useContext(i.UM),d=m.getProps(e,a),c=m.setMetaData({props:d}),u=c.ptm,h=c.cx,v=c.sx,x=c.isUnstyled;(0,r.j)(m.css.styles,x,{name:"skeleton"});var g=l.useRef(null);l.useImperativeHandle(s,(function(){return{props:d,getElement:function(){return g.current}}}));var j=d.size?{width:d.size,height:d.size,borderRadius:d.borderRadius}:{width:d.width,height:d.height,borderRadius:d.borderRadius},f=t({ref:g,className:(0,n.xW)(d.className,h("root")),style:p(p({},j),v("root")),"aria-hidden":!0},m.getOtherProps(d),u("root"));return l.createElement("div",f)})));v.displayName="Skeleton"},84576:(e,s,t)=>{t.d(s,{A:()=>l});const l={userSettingPage:"users_userSettingPage__KqRqG",userHead:"users_userHead__Qb-45",users_userHead:"users_users_userHead__66zxc",contentwrapmain:"users_contentwrapmain__9EuvG",ellipsis:"users_ellipsis__MtwMP",userImg:"users_userImg__-Ft5y",privilege:"users_privilege__yA6Qo",contentMenuTab:"users_contentMenuTab__Znvft",addUserBut:"users_addUserBut__H4HT5",showDeleteBut:"users_showDeleteBut__YDAwL",appSettingPage:"users_appSettingPage__urt2L",appaction:"users_appaction__vcXFf",connected:"users_connected__jXreM",invited:"users_invited__Rgnv8",disconnected:"users_disconnected__t2YHg",selectuserInput:"users_selectuserInput__YZrqN",modal:"users_modal__XmOaj",modalHeader:"users_modalHeader__q7QkG",headerTitle:"users_headerTitle__ZVL6h",circledesignstyle:"users_circledesignstyle__7Fx4h",out:"users_out__HXDgH",lable:"users_lable__Wc5bm",inputText:"users_inputText__U6PZ4",error:"users_error__vuT5H",td:"users_td__d5O9J",hoverShow:"users_hoverShow__+hAKM",borderNone:"users_borderNone__BKq3M",dangerTextButton:"users_dangerTextButton__pvNTe",fileUploadBox:"users_fileUploadBox__SSDRH",uploadedImgBox:"users_uploadedImgBox__Kal3a",uploadedText1:"users_uploadedText1__mtBeo",uploadedText2:"users_uploadedText2__5sLVb",successTextButton:"users_successTextButton__gV-ns",leftBoxParent:"users_leftBoxParent__HuTuY",leftbox:"users_leftbox__xpVNj",leftboxText:"users_leftboxText__T8ElD",active:"users_active__yxWuy"}}}]);
//# sourceMappingURL=3720.a7314c31.chunk.js.map