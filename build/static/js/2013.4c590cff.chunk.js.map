{"version":3,"file":"static/js/2013.4c590cff.chunk.js","mappings":"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","sources":["shared/lib/format-aud.js","APIs/CalApi.js","components/Business/shared/utils/helper.js","../node_modules/suneditor/src/lang|/Users/souravsantra/Develop/freelance/charru-tower/ReactMemate-main/node_modules/suneditor/src/lang|sync|/^/.//.*/.js$","webpack://memateapp/./src/ui/image-with-fallback/image-avatar.module.scss?81d4","ui/image-with-fallback/image-avatar.jsx","shared/ui/editor/sun-editor-component.js","components/Business/Pages/sales/new-request/department-quote/department-quote-table-row-loading.js","components/Business/Pages/sales/new-request/department-quote/select-component.js","webpack://memateapp/./src/components/Business/features/sales-features/merges-calculation/create-merge-calculation/create-merge-calculation.module.scss?7822","components/Business/features/sales-features/merges-calculation/create-merge-calculation/index.js","webpack://memateapp/./src/components/Business/features/sales-features/merges-calculation/list-merge-calculations/list-merge-calculation.module.scss?7117","components/Business/features/sales-features/merges-calculation/delete-merge-calculation/index.js","webpack://memateapp/./src/components/Business/features/sales-features/merges-calculation/edit-merge-calculation/edit-merge-calculation.module.scss?eb01","components/Business/features/sales-features/merges-calculation/edit-merge-calculation/index.js","components/Business/features/sales-features/merges-calculation/view-merge-calculation/index.js","components/Business/features/sales-features/merges-calculation/list-merge-calculations/index.js","components/Business/Pages/sales/new-request/department-quote/department-calculation-table.js","components/Business/Pages/sales/new-request/department-quote/quote-to-business.js","components/Business/Pages/sales/new-request/department-quote/quote-to-client.js","components/Business/Pages/sales/new-request/ui/custom-radio-button.js","components/Business/Pages/sales/new-request/department-quote/index.js","webpack://memateapp/./src/components/Business/features/sales-features/create-proposal/create-proposal.module.scss?17ba","webpack://memateapp/./src/components/Business/features/sales-features/create-proposal/file-uploader/file-uploader.module.scss?611f","components/Business/features/sales-features/create-proposal/file-uploader/utils.js","components/Business/features/sales-features/create-proposal/file-uploader/file-uploader.js","webpack://memateapp/./src/ui/send-proposal/send-proposal-email.module.scss?e126","ui/send-proposal/send-proposal-email-form.jsx","components/Business/features/sales-features/send-proposal/send-proposal.jsx","components/Business/features/sales-features/create-proposal/create-proposal.js","components/Business/features/sales-features/send-quote/send-quote.jsx","components/Business/Pages/sales/new-request/calculate-quote.js","shared/ui/editor/editor-header-template.js"],"sourcesContent":["export function formatAUD(amount, shorten = false) {\n    const num = parseFloat(amount);\n\n    if (isNaN(num)) {\n        return \"0.00\";\n    }\n\n    if (shorten && Math.abs(num) >= 1000.00) {\n        return new Intl.NumberFormat('en-AU', {\n            notation: \"compact\",\n            compactDisplay: \"short\",\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        }).format(num);\n    }\n\n    return new Intl.NumberFormat('en-AU', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n    }).format(num);\n}","import { fetchAPI } from \"./base-api\";\nconst API_BASE_URL = process.env.REACT_APP_BACKEND_API_URL;\n\nexport const getDepartments = async (all) => {\n  const endpoint = `/references/calc-indexes/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  if (all === 1) url.searchParams.append('all', 1);\n\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getCalculationByReferenceId = async (id) => {\n  const endpoint = `/references/calculators/${id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  const result = await fetchAPI(url.toString(), options);\n  return Array.isArray(result)\n    ? result.filter(item => !item.deleted)\n    : result && !result.deleted ? result : null;\n};\n\nexport const getQuoteByUniqueId = async (unique_id) => {\n  const endpoint = `/projects/${unique_id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createNewCalculationQuoteRequest = async (data) => {\n  const endpoint = '/sales/new-request/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateNewCalculationQuoteRequest = async (unique_id, data) => {\n  if (!unique_id) throw new Error(\"No id found\");\n\n  const endpoint = `/sales/projects/${unique_id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createNewMergeQuote = async (data) => {\n  const endpoint = '/projects/merges/new/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteMergeQuote = async (id) => {\n  const endpoint = `/projects/merges/${id}/delete/`;\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const getMergeItemsByUniqueId = async (unique_id) => {\n  const endpoint = `/projects/merges/${unique_id}/`;\n  const options = {\n    method: 'GET',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createDepartment = async (data) => {\n  const endpoint = '/settings/departments/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateDepartment = async (id, data) => {\n  if (!id) return;\n\n  const endpoint = `/settings/departments/update/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createSubDepartment = async (data) => {\n  const endpoint = '/settings/sub-departments/';\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateSubDepartment = async (id, data) => {\n  if (!id) return;\n\n  const endpoint = `/settings/sub-departments/update/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createCalculator = async (index, data) => {\n  const endpoint = `/references/calculators/${index}/new/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const updateCalculator = async (index, id, data) => {\n  const endpoint = `/references/calculators/${index}/update/${id}/`;\n  const options = {\n    method: 'PUT',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const deleteSettingCalculator = async (endpoint) => {\n  const options = {\n    method: 'DELETE',\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const createQuoteProposal = async (id, data) => {\n  const endpoint = `/proposals/new/${id}/`;\n  const options = {\n    method: 'POST',\n    body: data\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n\nexport const reorderDepartments = async (departments) => {\n  const endpoint = '/settings/departments/order/';\n  const options = {\n    method: 'POST',\n    body: departments.map((d, idx) => ({ id: d.id, order: idx + 1 })),\n  };\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  return fetchAPI(url.toString(), options);\n};\n","export function adjustColor(color, amount) {\n  if (!color) return;\n  let usePound = false;\n\n  if (color[0] === \"#\") {\n    color = color.slice(1);\n    usePound = true;\n  }\n\n  let num = parseInt(color, 16);\n\n  let r = (num >> 16) + amount;\n  let g = ((num >> 8) & 0x00ff) + amount;\n  let b = (num & 0x0000ff) + amount;\n\n  return (\n    (usePound ? \"#\" : \"\") +\n    (r > 255 ? 255 : r < 0 ? 0 : r).toString(16).padStart(2, \"0\") +\n    (g > 255 ? 255 : g < 0 ? 0 : g).toString(16).padStart(2, \"0\") +\n    (b > 255 ? 255 : b < 0 ? 0 : b).toString(16).padStart(2, \"0\")\n  );\n}\n\nexport function romanize(num) {\n  var lookup = { M: 1000, CM: 900, D: 500, CD: 400, C: 100, XC: 90, L: 50, XL: 40, X: 10, IX: 9, V: 5, IV: 4, I: 1 }, roman = '', i;\n  for (i in lookup) {\n    while (num >= lookup[i]) {\n      roman += i;\n      num -= lookup[i];\n    }\n  }\n  return roman;\n}\n\nexport function formatMoney(number) {\n  return number.toLocaleString('en-US', { style: 'currency', currency: 'USD' });\n}\n\n\nexport const dateFormat = (dateInMiliSec, isDotformate) => {\n  if (!dateInMiliSec) return \"-\";\n\n  const options = { year: 'numeric', month: 'short', day: 'numeric' };\n  const date = new Date(1000 * +dateInMiliSec);\n\n  if(isDotformate) {\n    const dotFormattedDate = date.toLocaleDateString('en-GB', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    }).replace(/\\//g, '.');\n    return dotFormattedDate;\n  }\n\n  const formattedDate = date.toLocaleDateString('en-US', options)?.replace(/,/g, '');\n  return formattedDate;\n};","var map = {\n\t\"./ckb.js\": 23743,\n\t\"./cs.js\": 7333,\n\t\"./da.js\": 11664,\n\t\"./de.js\": 30844,\n\t\"./en.js\": 5460,\n\t\"./es.js\": 6151,\n\t\"./fa.js\": 96062,\n\t\"./fr.js\": 27755,\n\t\"./he.js\": 3296,\n\t\"./hu.js\": 33776,\n\t\"./index.js\": 70559,\n\t\"./it.js\": 54762,\n\t\"./ja.js\": 80074,\n\t\"./km.js\": 27671,\n\t\"./ko.js\": 20665,\n\t\"./lv.js\": 90749,\n\t\"./nl.js\": 66449,\n\t\"./pl.js\": 48599,\n\t\"./pt_br.js\": 48366,\n\t\"./ro.js\": 73100,\n\t\"./ru.js\": 34638,\n\t\"./se.js\": 55111,\n\t\"./tr.js\": 10057,\n\t\"./ua.js\": 79657,\n\t\"./ur.js\": 64640,\n\t\"./zh_cn.js\": 25277\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 32224;","// extracted by mini-css-extract-plugin\nexport default {\"clientImg\":\"image-avatar_clientImg__-nnRU\"};","import React, { useState } from 'react';\nimport { Building, Person } from 'react-bootstrap-icons';\nimport style from './image-avatar.module.scss';\n\nconst ImageAvatar = ({ has_photo, photo, is_business }) => {\n    const [imgError, setImgError] = useState(false);\n    const Icon = is_business ? Building : Person;\n\n    return (\n        <div className={`d-flex justify-content-center align-items-center ${style.clientImg} ${is_business ? \"\" : \"rounded-circle\"}`} style={{ overflow: 'hidden' }}>\n            {has_photo && photo && !imgError ? (\n                <img src={photo} alt=\"client avatar\" className=\"w-100\" onError={() => setImgError(true)} />\n            ) : (\n                <Icon color=\"#667085\" />\n            )}\n        </div>\n    );\n};\n\nexport const FallbackImage = ({ has_photo, photo, is_business, size }) => {\n    const [imgError, setImgError] = useState(false);\n    const Icon = is_business ? Building : Person;\n\n    return <>\n        {has_photo && photo && !imgError ? (\n            <img src={photo} alt=\"client avatar\" className=\"w-100\" onError={() => setImgError(true)} />\n        ) : (\n            <Icon color=\"#667085\" size={size} />\n        )}\n    </>;\n};\n\nexport const FallbackImageWithInitials = ({ has_photo, photo, name }) => {\n    const [imgError, setImgError] = useState(false);\n    const initials = name && name?.split(' ')?.map(n => n[0])?.join('')?.toUpperCase() || \"\";\n\n    return <>\n        {has_photo && photo && !imgError ? (\n            <img src={photo} alt=\"client avatar\" className=\"w-100\" onError={() => setImgError(true)} />\n        ) : initials}\n    </>;\n};\n\nexport const InitialsAvatar = ({ name, size = 14 }) => {\n    const initials = name.split(' ').map(n => n[0]).join('').toUpperCase();\n\n    return (\n        <span style={{ fontSize: `${size}px` }}>\n            {initials}\n        </span>\n    );\n};\n\nexport default ImageAvatar;\n","import { useCallback, useRef, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { toast } from 'sonner';\nimport SunEditor from 'suneditor-react';\nimport 'suneditor/dist/css/suneditor.min.css';\n\nconst SunEditorComponent = ({\n    value = '',\n    onChange,\n    placeholder = 'Enter content...',\n    height = 299,\n    showTable = true,\n    showLink = true,\n    disabled = false,\n    className = '',\n    customOptions = {},\n    onLoad,\n    onFocus,\n    onBlur,\n    enableS3Upload = false,\n    s3UploadEndpoint = null,\n    uploadId = null,\n    ...props\n}) => {\n    console.log('value: ', value);\n\n    // State for upload progress and drag states\n    const [uploadProgress, setUploadProgress] = useState({});\n    const [dragState, setDragState] = useState(false);\n    const [processingBase64, setProcessingBase64] = useState(false);\n    \n    // Cache to store already uploaded base64 images to prevent duplicate uploads\n    const uploadCacheRef = useRef(new Map());\n\n    // Clean up cache periodically to prevent memory leaks\n    useEffect(() => {\n        const cleanupInterval = setInterval(() => {\n            const cache = uploadCacheRef.current;\n            if (cache.size > 50) { // Limit cache to 50 entries\n                const entries = Array.from(cache.entries());\n                const toKeep = entries.slice(-25); // Keep latest 25 entries\n                uploadCacheRef.current = new Map(toKeep);\n                console.log('Cleaned up upload cache, kept', toKeep.length, 'entries');\n            }\n        }, 60000); // Check every minute\n\n        return () => clearInterval(cleanupInterval);\n    }, []);\n\n    // Ref for SunEditor instance\n    const editorRef = useRef(null);\n    const editorInstanceRef = useRef(null);\n\n    // Utility function to check if an image is already hosted on S3\n    const isS3Image = useCallback((src) => {\n        if (!src || typeof src !== 'string') return false;\n        \n        // Check for common S3 URL patterns\n        const s3Patterns = [\n            /^https?:\\/\\/.*\\.s3\\..*\\.amazonaws\\.com\\//,\n            /^https?:\\/\\/s3\\..*\\.amazonaws\\.com\\//,\n            /^https?:\\/\\/.*\\.s3\\.amazonaws\\.com\\//,\n            /^https?:\\/\\/.*\\.digitaloceanspaces\\.com\\//,\n            // Add your specific S3 bucket pattern here if needed\n            new RegExp(`^https?://${process.env.REACT_APP_S3_BUCKET || '.*'}\\\\.s3\\\\..*\\\\.amazonaws\\\\.com/`)\n        ];\n        \n        return s3Patterns.some(pattern => pattern.test(src));\n    }, []);\n\n    // Utility function to detect all images in content and categorize them\n    const categorizeImages = useCallback((content) => {\n        const allImageRegex = /<img[^>]+src=\"([^\"]+)\"[^>]*>/gi;\n        const base64Images = [];\n        const s3Images = [];\n        const otherImages = [];\n        let match;\n        \n        while ((match = allImageRegex.exec(content)) !== null) {\n            const fullMatch = match[0];\n            const src = match[1];\n            \n            if (src.startsWith('data:image/')) {\n                // Extract format and base64 data for base64 images\n                const base64Match = src.match(/^data:image\\/([^;]+);base64,(.+)$/);\n                if (base64Match) {\n                    base64Images.push({\n                        fullMatch,\n                        format: base64Match[1],\n                        base64Data: base64Match[2],\n                        src,\n                        index: match.index\n                    });\n                }\n            } else if (isS3Image(src)) {\n                s3Images.push({\n                    fullMatch,\n                    src,\n                    index: match.index\n                });\n            } else {\n                otherImages.push({\n                    fullMatch,\n                    src,\n                    index: match.index\n                });\n            }\n        }\n        \n        return { base64Images, s3Images, otherImages };\n    }, [isS3Image]);\n\n    // Utility function to convert base64 to File object\n    const base64ToFile = useCallback((base64Data, format, filename) => {\n        // Remove data URL prefix if present\n        const base64String = base64Data.replace(/^data:image\\/[a-z]+;base64,/, '');\n        \n        // Convert base64 to binary data\n        const byteCharacters = atob(base64String);\n        const byteNumbers = new Array(byteCharacters.length);\n        \n        for (let i = 0; i < byteCharacters.length; i++) {\n            byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        \n        const byteArray = new Uint8Array(byteNumbers);\n        const blob = new Blob([byteArray], { type: `image/${format}` });\n        \n        return new File([blob], filename, { type: `image/${format}` });\n    }, []);\n\n    // Upload base64 image to S3 and return the S3 URL (with caching)\n    const uploadBase64ImageToS3 = useCallback(async (base64Data, format) => {\n        if (!enableS3Upload) return null;\n\n        // Create a hash of the base64 data for caching\n        const base64Hash = btoa(base64Data.substring(0, 100)); // Use first 100 chars as hash\n        \n        // Check if this image was already uploaded\n        if (uploadCacheRef.current.has(base64Hash)) {\n            const cachedUrl = uploadCacheRef.current.get(base64Hash);\n            console.log('Using cached S3 URL for image:', cachedUrl);\n            return cachedUrl;\n        }\n\n        try {\n            const timestamp = Date.now();\n            const filename = `editor-images/image-${timestamp}.${format}`;\n            const file = base64ToFile(base64Data, format, `image-${timestamp}.${format}`);\n\n            // Get signed URL\n            const accessToken = localStorage.getItem('access_token');\n            const endpoint = s3UploadEndpoint || `${process.env.REACT_APP_BACKEND_API_URL}/chat/upload/${uploadId}/`;\n\n            const response = await axios.post(\n                endpoint,\n                { filename },\n                {\n                    headers: {\n                        Authorization: `Bearer ${accessToken}`,\n                    },\n                }\n            );\n\n            const { url } = response.data;\n            if (!url) {\n                throw new Error(\"Failed to get upload URL\");\n            }\n\n            // Upload to S3\n            await axios.put(url, file, {\n                headers: {\n                    \"Content-Type\": \"\",\n                },\n            });\n\n            // Get the S3 URL (remove query parameters)\n            const s3Url = url.split(\"?\")[0] || \"\";\n            \n            // Cache the uploaded image\n            uploadCacheRef.current.set(base64Hash, s3Url);\n            console.log('Cached new upload:', s3Url);\n            \n            return s3Url;\n\n        } catch (error) {\n            console.error(\"Error uploading base64 image to S3:\", error);\n            throw error;\n        }\n    }, [enableS3Upload, s3UploadEndpoint, uploadId, base64ToFile]);\n\n    // S3 upload function\n    const uploadToS3 = useCallback(async (file, url) => {\n        return axios.put(url, file, {\n            headers: {\n                \"Content-Type\": \"\",\n            },\n            onUploadProgress: (progressEvent) => {\n                const progress = Math.round(\n                    (progressEvent.loaded / progressEvent.total) * 100\n                );\n                setUploadProgress({ progress, uploading: true });\n            }\n        }).then((response) => {\n            // S3 returns 200 for successful uploads, check status\n            if (response.status === 200 || response.status === 201) {\n                setUploadProgress({ progress: 100, success: true, uploading: false });\n                const fileURL = url.split(\"?\")[0] || \"\";\n\n                console.log('S3 upload successful, inserting image:', fileURL);\n                // here we insert the image into the editor\n\n                toast.success('Image uploaded successfully');\n\n                // Clear progress after a delay\n                setTimeout(() => {\n                    setUploadProgress({});\n                }, 2000);\n            } else {\n                throw new Error(`Upload failed with status: ${response.status}`);\n            }\n\n        }).catch((err) => {\n            console.log('Error uploading to S3: ', err);\n            console.log('Error response:', err.response);\n            setUploadProgress({ progress: 0, error: true, uploading: false });\n            toast.error('Failed to upload image to S3');\n            throw err; // Re-throw to be caught by fileUploadBySignedURL\n        });\n    }, []);\n\n    // Get signed URL and upload file to S3\n    const fileUploadBySignedURL = useCallback(async (file) => {\n        if (!file || !enableS3Upload) return;\n\n        try {\n            const name = file?.name?.split(\".\")[0];\n            const fileExtension = file?.name?.split(\".\")?.pop();\n            const fileName = `proposal-images/${name}-${Date.now()}.${fileExtension}`;\n\n            setUploadProgress({ progress: 0, uploading: true });\n\n            const accessToken = localStorage.getItem('access_token');\n            const endpoint = s3UploadEndpoint || `${process.env.REACT_APP_BACKEND_API_URL}/chat/upload/${uploadId}/`;\n\n            const response = await axios.post(\n                endpoint,\n                { filename: fileName },\n                {\n                    headers: {\n                        Authorization: `Bearer ${accessToken}`,\n                    },\n                }\n            );\n\n            const { url } = response.data;\n            if (!url) {\n                setUploadProgress({ progress: 0, error: true, uploading: false });\n                toast.error(\"Failed to get upload URL. Please try again.\");\n                return;\n            }\n\n            // Upload to S3 - this will handle its own success/error states\n            await uploadToS3(file, url);\n\n        } catch (error) {\n            // Only show error if it's not from S3 upload (which handles its own errors)\n            if (!error.message?.includes('Upload failed with status')) {\n                setUploadProgress({ progress: 0, error: true, uploading: false });\n                console.error(\"Error in fileUploadBySignedURL:\", error);\n                toast.error(\"Failed to upload file. Please try again.\");\n            }\n        }\n    }, [uploadToS3, enableS3Upload, s3UploadEndpoint, uploadId]);\n\n    // Drag and drop handlers\n    const handleDragEnter = useCallback((e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (enableS3Upload) {\n            setDragState(true);\n        }\n    }, [enableS3Upload]);\n\n    const handleDragLeave = useCallback((e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        // Only hide drag overlay if we're leaving the editor completely\n        const rect = e.currentTarget.getBoundingClientRect();\n        const x = e.clientX;\n        const y = e.clientY;\n\n        if (x < rect.left || x > rect.right || y < rect.top || y > rect.bottom) {\n            setDragState(false);\n        }\n    }, []);\n\n    const handleDragOver = useCallback((e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    }, []);\n\n    const handleDrop = useCallback(async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDragState(false);\n\n        if (!enableS3Upload) return;\n\n        const files = e.dataTransfer.files;\n        if (files && files.length > 0) {\n            const file = files[0];\n\n            // Validate file size (max 10MB)\n            if (file.size > 10 * 1024 * 1024) {\n                toast.error('File size must be less than 10MB');\n                return;\n            }\n\n            // Validate file type\n            if (!file.type.startsWith('image/')) {\n                toast.error('Please select a valid image file');\n                return;\n            }\n\n            await fileUploadBySignedURL(file);\n        }\n    }, [fileUploadBySignedURL, enableS3Upload]);\n\n    // Render upload progress overlay\n    const renderUploadProgress = () => {\n        if (!uploadProgress?.uploading && !uploadProgress?.success && !uploadProgress?.error && !processingBase64) return null;\n\n        return (\n            <div style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                backgroundColor: 'rgba(255, 255, 255, 0.9)',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                zIndex: 1000,\n                borderRadius: '4px'\n            }}>\n                {(uploadProgress.uploading || processingBase64) && (\n                    <>\n                        <div style={{\n                            width: '60px',\n                            height: '60px',\n                            border: '4px solid #f3f3f3',\n                            borderTop: '4px solid #3498db',\n                            borderRadius: '50%',\n                            animation: 'spin 1s linear infinite',\n                            marginBottom: '16px'\n                        }}></div>\n                        <div style={{\n                            fontSize: '14px',\n                            fontWeight: '500',\n                            color: '#333',\n                            marginBottom: '8px'\n                        }}>\n                            {processingBase64 ? 'Processing images...' : 'Uploading image...'}\n                        </div>\n                        {uploadProgress.uploading && (\n                            <>\n                                <div style={{\n                                    width: '200px',\n                                    height: '6px',\n                                    backgroundColor: '#f0f0f0',\n                                    borderRadius: '3px',\n                                    overflow: 'hidden'\n                                }}>\n                                    <div style={{\n                                        width: `${uploadProgress.progress}%`,\n                                        height: '100%',\n                                        backgroundColor: '#3498db',\n                                        transition: 'width 0.3s ease'\n                                    }}></div>\n                                </div>\n                                <div style={{\n                                    fontSize: '12px',\n                                    color: '#666',\n                                    marginTop: '4px'\n                                }}>\n                                    {uploadProgress.progress}%\n                                </div>\n                            </>\n                        )}\n                    </>\n                )}\n                {uploadProgress.success && (\n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{\n                            width: '50px',\n                            height: '50px',\n                            backgroundColor: '#27ae60',\n                            borderRadius: '50%',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            margin: '0 auto 16px'\n                        }}>\n                            <span style={{ color: 'white', fontSize: '24px' }}></span>\n                        </div>\n                        <div style={{ fontSize: '14px', color: '#27ae60' }}>\n                            Upload completed!\n                        </div>\n                    </div>\n                )}\n                {uploadProgress.error && (\n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{\n                            width: '50px',\n                            height: '50px',\n                            backgroundColor: '#e74c3c',\n                            borderRadius: '50%',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            margin: '0 auto 16px'\n                        }}>\n                            <span style={{ color: 'white', fontSize: '24px' }}></span>\n                        </div>\n                        <div style={{ fontSize: '14px', color: '#e74c3c' }}>\n                            Upload failed\n                        </div>\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    // Render drag overlay\n    const renderDragOverlay = () => {\n        if (!dragState || !enableS3Upload) return null;\n\n        return (\n            <div style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                backgroundColor: 'rgba(52, 152, 219, 0.1)',\n                border: '2px dashed #3498db',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                zIndex: 999,\n                borderRadius: '4px'\n            }}>\n                <div style={{\n                    textAlign: 'center',\n                    color: '#3498db',\n                    fontSize: '16px',\n                    fontWeight: '500'\n                }}>\n                    <div style={{ fontSize: '48px', marginBottom: '16px' }}></div>\n                    Drop your image here\n                </div>\n            </div>\n        );\n    };\n\n    // Default button configuration\n    const getButtonList = () => {\n        const buttons = [\n            ['undo', 'redo'],\n            ['bold', 'italic', 'underline', 'strike'],\n            ['formatBlock'],\n            ['list'],\n            ['align'],\n            ['image'],\n        ];\n\n        // Conditionally add buttons based on props\n        if (showLink) buttons.push(['link']);\n        if (showTable) buttons.push(['table']);\n\n        return buttons;\n    };\n\n\n    // Default SunEditor configuration\n    const defaultOptions = {\n        buttonList: getButtonList(),\n        height: height,\n        placeholder: placeholder,\n        showPathLabel: false,\n        charCounter: false,\n        resizingBar: false,\n        disable: disabled,\n        // Custom image handler for S3 upload\n        imageUploadUrl: enableS3Upload ? null : undefined,\n        // Table configuration\n        table: {\n            headerStyle: 'background-color: #f8f9fa; font-weight: bold; padding: 8px; min-width: 50px; border: none;',\n            cellStyle: 'padding: 8px; min-width: 50px; border: none;'\n        },\n        // Image configuration\n        imageUploadHeader: enableS3Upload ? undefined : {\n            'Authorization': `Bearer ${localStorage.getItem('access_token') || ''}`\n        },\n        // Format options\n        formats: ['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n        // Font options\n        font: ['Arial', 'Helvetica', 'Georgia', 'Times New Roman', 'Courier New'],\n        fontSize: [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72],\n        // Color options\n        colorList: [\n            ['#000000', '#424242', '#636363', '#9C9C94', '#CEC6CE', '#EFEFEF', '#F7F3F7', '#FFFFFF'],\n            ['#FF0000', '#FF9C00', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#9C00FF', '#FF00FF'],\n            ['#F7C6CE', '#FFE7CE', '#FFEFC6', '#D6EFD6', '#CEDEE7', '#CEE7F7', '#D6D6E7', '#E7D6DE'],\n            ['#E79C9C', '#FFC69C', '#FFE79C', '#B5D6A5', '#A5C6CE', '#9CC6EF', '#B5A5D6', '#D6A5BD'],\n            ['#E76363', '#FF9C63', '#FFCE63', '#9CDE9C', '#63B5CE', '#639CFF', '#9C63E7', '#CE639C'],\n            ['#E73131', '#FF7031', '#FFB531', '#73DE73', '#319CCE', '#3173FF', '#7331E7', '#CE3173'],\n            ['#9C0000', '#B56308', '#9C9C00', '#089C00', '#008294', '#0031FF', '#4A0A77', '#9C005A'],\n            ['#630000', '#7B3900', '#636300', '#006300', '#005A6B', '#002173', '#290A4A', '#630039']\n        ]\n    };\n\n    // Merge custom options with default options\n    const editorOptions = {\n        ...defaultOptions,\n        ...customOptions,\n        // Ensure buttonList is properly merged\n        buttonList: customOptions.buttonList || defaultOptions.buttonList\n    };\n\n    const handleChange = async (content) => {\n        console.log('content: ', content);\n        \n        // Check if S3 upload is enabled and content contains images\n        if (enableS3Upload && content && typeof content === 'string') {\n            const { base64Images, s3Images } = categorizeImages(content);\n            \n            // Log image categorization for debugging\n            console.log(`Image analysis: ${base64Images.length} base64, ${s3Images.length} S3, total images: ${base64Images.length + s3Images.length}`);\n            \n            // Only process base64 images (skip S3 images to prevent re-upload)\n            if (base64Images.length > 0) {\n                console.log(`Found ${base64Images.length} new base64 image(s) to upload (skipping ${s3Images.length} existing S3 images)`);\n                \n                setProcessingBase64(true);\n                \n                try {\n                    let updatedContent = content;\n                    \n                    // Process each base64 image\n                    for (const imageMatch of base64Images) {\n                        const { fullMatch, format, base64Data } = imageMatch;\n                        \n                        // Upload to S3\n                        const s3Url = await uploadBase64ImageToS3(base64Data, format);\n                        \n                        if (s3Url) {\n                            // Replace base64 image with S3 URL in content\n                            const newImgTag = fullMatch.replace(\n                                /src=\"data:image\\/[^;]+;base64,[^\"]+\"/,\n                                `src=\"${s3Url}\"`\n                            );\n                            updatedContent = updatedContent.replace(fullMatch, newImgTag);\n                            console.log('Replaced base64 image with S3 URL:', s3Url);\n                        }\n                    }\n                    \n                    setProcessingBase64(false);\n                    \n                    // Call onChange with updated content containing S3 URLs\n                    if (onChange && updatedContent !== content) {\n                        onChange(updatedContent);\n                        return;\n                    }\n                } catch (error) {\n                    console.error('Error processing base64 images:', error);\n                    setProcessingBase64(false);\n                    toast.error('Failed to upload images. Please try again.');\n                }\n            } else if (s3Images.length > 0) {\n                // Content has S3 images but no new base64 images to process\n                console.log('Content contains only S3 images, no upload needed');\n            }\n        }\n        \n        // If no base64 images or S3 upload disabled, proceed normally\n        if (onChange) {\n            onChange(content);\n        }\n    };\n\n    const handleLoad = (sunEditor) => {\n        // Store the editor instance for later use\n        editorInstanceRef.current = sunEditor;\n\n        // Also try to get the editor from the ref if available\n        if (editorRef.current) {\n            const refEditor = editorRef.current.getInstance();\n            if (refEditor && Object.keys(refEditor).length > 0) {\n                editorInstanceRef.current = refEditor;\n            }\n        }\n\n        if (onLoad) {\n            onLoad(sunEditor);\n        }\n    };\n\n    const handleFocus = (event, sunEditor) => {\n        if (onFocus) {\n            onFocus(event, sunEditor);\n        }\n    };\n\n    const handleBlur = (event, sunEditor) => {\n        if (onBlur) {\n            onBlur(event, sunEditor);\n        }\n    };\n\n    return (\n        <>\n            <style>{`\n                @keyframes spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n                \n                /* Remove all table borders in SunEditor */\n                .sun-editor-wrapper .se-wrapper-inner table,\n                .sun-editor-wrapper .se-wrapper-inner table td,\n                .sun-editor-wrapper .se-wrapper-inner table th,\n                .sun-editor-wrapper .se-wrapper-inner table tr {\n                    border: none !important;\n                    border-collapse: collapse !important;\n                }\n                \n                /* Also remove borders when content is rendered outside editor */\n                .sun-editor-content table,\n                .sun-editor-content table td,\n                .sun-editor-content table th,\n                .sun-editor-content table tr {\n                    border: none !important;\n                    border-collapse: collapse !important;\n                }\n            `}</style>\n            <div\n                className={`sun-editor-wrapper ${className}`}\n                style={{ position: 'relative' }}\n                onDragEnter={handleDragEnter}\n                onDragLeave={handleDragLeave}\n                onDragOver={handleDragOver}\n                onDrop={handleDrop}\n            >\n                <SunEditor\n                    ref={editorRef}\n                    setOptions={editorOptions}\n                    setContents={value}\n                    onChange={handleChange}\n                    onLoad={handleLoad}\n                    onFocus={handleFocus}\n                    onBlur={handleBlur}\n                    {...props}\n                />\n\n                {/* Drag Overlay */}\n                {renderDragOverlay()}\n\n                {/* Upload Progress Overlay */}\n                {renderUploadProgress()}\n            </div>\n        </>\n    );\n};\n\nexport default SunEditorComponent;\n","import React from 'react';\nimport Placeholder from 'react-bootstrap/Placeholder';\n\nexport const DepartmentQuoteTableRowLoading = () => {\n    return (\n        <tr>\n            <td style={{ width: \"24px\" }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '64px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '192px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '600px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n\n            <td style={{ width: '128px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '185px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '166px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '83px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '32px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n        </tr>\n    );\n};\n\nexport const DepartmentRowChangeLoading = () => {\n    return (\n        <>\n            <td style={{ width: '64px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '192px', textAlign: 'center' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '600px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n\n            <td style={{ width: '128px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '185px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '166px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '83px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '118px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n            <td style={{ width: '32px' }}>\n                <Placeholder as=\"p\" animation=\"wave\">\n                    <Placeholder xs={12} bg=\"secondary\" />\n                </Placeholder>\n            </td>\n        </>\n    );\n};","import React from 'react';\nimport { ChevronDown } from 'react-bootstrap-icons';\nimport { Menu, MenuItem, MenuButton, SubMenu } from '@szhsin/react-menu';\nimport '@szhsin/react-menu/dist/index.css';\n\nconst SelectComponent = ({ departments, handleChange, title, keyValue }) => {\n    const handleSubMenuClick = (label, value) => {\n        handleChange(value, label, keyValue);\n    };\n\n    return (\n        <Menu\n            menuButton={\n                <MenuButton style={{\n                    width: '150px',\n                    display: 'inline-flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    padding: '8px 0px',\n                    cursor: 'pointer',\n                    background: 'transparent',\n                    border: 'none',\n                    color: title ? '#101828' : '#98A2B3'\n                }}>\n                    <div className='ellipsis-width' title={title || \"Department\"}>\n                        {title || \"Department\"}\n                    </div>\n                    <span>\n                        <ChevronDown color=\"#98A2B3\" size={15} />\n                    </span>\n                </MenuButton>\n            }\n            overflow=\"auto\"\n            position=\"anchor\"\n            portal\n            className='departmentSelect'\n        >\n            {departments?.filter((data) => !data?.deleted)?.sort((a, b) => a.order - b.order).map((department) => (\n                <React.Fragment key={department.id}>\n                    {department?.subindexes?.length ? (\n                        <SubMenu\n                            key={department.id}\n                            label={department?.name}\n                            direction=\"right\"\n                            align=\"start\"\n                            menuStyle={{\n                                maxHeight: '500px',\n                                overflow: 'auto',\n                                textAlign: 'left'\n                            }}\n                        >\n                            {department.subindexes?.filter((data) => !data?.deleted)?.sort((a, b) => a.order - b.order).map((subitem) => (\n                                <MenuItem\n                                    key={subitem.id}\n                                    onClick={() => handleSubMenuClick(subitem?.name, subitem?.id)}\n                                >\n                                    {subitem?.name}\n                                </MenuItem>\n                            ))}\n                        </SubMenu>\n                    ) : (\n                        <MenuItem\n                            style={{ textAlign: 'left' }}\n                            key={department.id}\n                            onClick={() => handleSubMenuClick(department?.name, department?.id)}\n                        >\n                            {department?.name}\n                        </MenuItem>\n                    )}\n                </React.Fragment>\n            ))}\n        </Menu>\n    );\n};\n\nexport default SelectComponent;\n","// extracted by mini-css-extract-plugin\nexport default {\"mergeButton\":\"create-merge-calculation_mergeButton__A2lWg\",\"disabled\":\"create-merge-calculation_disabled__-KWur\",\"cancelButton\":\"create-merge-calculation_cancelButton__5g1vU\",\"deleteButton\":\"create-merge-calculation_deleteButton__AA6vR\"};","import React, { useEffect, useState } from 'react';\nimport { Button, Col, ListGroup, Modal, Row } from 'react-bootstrap';\nimport { Trash } from 'react-bootstrap-icons';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport clsx from 'clsx';\nimport Form from 'react-bootstrap/Form';\nimport * as yup from 'yup';\nimport style from './create-merge-calculation.module.scss';\nimport { romanize } from '../../../../shared/utils/helper';\n\n\n// Validation schema\nconst schema = yup\n  .object({\n    title: yup.string().required(\"Title is required\"),\n    description: yup.string().required(\"Description is required\"),\n  })\n  .required();\n\nconst CreateMergeCalculation = ({ selectItem, setSelectItem, merges, setMerges }) => {\n  const [show, setShow] = useState(false);\n  const romanNo = romanize((merges?.length || 0) + 1);\n  const [defaultValues,] = useState({\n    title: '',\n    description: ''\n  });\n  const { register, reset, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema), defaultValues\n  });\n\n  useEffect(() => { reset(); }, [selectItem]);\n\n  const onSubmit = (data) => {\n    const payload = {\n      ...data,\n      alias: romanNo,\n      calculators: Object.values(selectItem)?.flat().map((value) => ({\n        key: value.key,\n        merge_id: value.merge_id,\n        calculator: value.calculator,\n        label: value.label,\n        total: value.total,\n        description: value.description\n      }))\n    };\n    setMerges((others) => ([...others, payload]));\n    handleClose();\n    setSelectItem({});\n  };\n\n  const deleteAndCancel = () => {\n    setShow(false);\n    setSelectItem({});\n  };\n  const handleClose = () => setShow(false);\n  const handleOpen = () => setShow(true);\n\n  return (\n    <React.Fragment>\n      <Button type='button' disabled={Object.keys(selectItem)?.length < 2} onClick={handleOpen} className={clsx(style.mergeButton, 'text-button', { [style.disabled]: Object.keys(selectItem)?.length < 2 })}>Merge Items</Button>\n      <Modal\n        size=\"lg\"\n        show={show}\n        centered\n        onHide={handleClose}\n        className={clsx('task-form', 'mergeForm')}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className='d-flex align-items-center'>\n            <div className='d-flex justify-content-center align-items-center' style={{ width: '36px', height: '36px', borderRadius: '50%', border: '1px solid #EAECF0', background: '#F2F4F7', color: '#344054', fontSize: '14px', fontWeight: 600 }}>\n              {romanNo}\n            </div>\n            <span className='modal-task-title'>Merge Items</span>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body className='px-0'>\n          <Form onSubmit={handleSubmit(onSubmit)}>\n            <div className='px-4' style={{ maxHeight: '450px', overflow: 'auto', }}>\n              <Form.Group className=\"mb-3\">\n                <Form.Label>Task Title</Form.Label>\n                <Form.Control\n                  {...register(\"title\")}\n                  type=\"text\"\n                  placeholder=\"Merge items title\"\n                  className={`${errors.title ? 'border border-danger' : ''}`}\n                />\n                {errors.title && <Form.Text className=\"text-danger\">{errors.title.message}</Form.Text>}\n              </Form.Group>\n\n              <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n                <Form.Label>Describe merging items</Form.Label>\n                <Form.Control\n                  as=\"textarea\"\n                  rows={2}\n                  placeholder='Enter a description...'\n                  {...register(\"description\")}\n                  style={{ height: '80px', outline: 'none', boxShadow: 'none' }}\n                  className={`${errors.description ? 'border border-danger' : ''}`}\n                />\n                {errors.description && <Form.Text className=\"text-danger\">{errors.description.message}</Form.Text>}\n              </Form.Group>\n              <ListGroup variant=\"flush border rounded mb-4\" style={{ border: \"1px solid var(--Gray-100, #F2F4F7)\" }}>\n                {\n                  Object.entries(selectItem)?.map(([key, values]) =>\n                    values?.map((value) =>\n                      <ListGroup.Item key={`${key}-${value.id}`} className='d-flex justify-content-between'>\n                        <Row className='w-100'>\n                          <Col sm={4} className='text-start'>\n                            <span style={{ color: '#101828', fontSize: '16px' }}>\n                              {value?.label || \"\"}\n                            </span>\n                          </Col>\n                          <Col sm={6}>\n                            <span style={{ color: '#101828', fontSize: '16px' }}>\n                              {value?.description || \"\"}\n                            </span>\n                          </Col>\n                          <Col sm={2} className='text-end text-nowrap'>\n                            <span style={{ color: '#101828', fontSize: '16px', textAlign: 'end' }}>\n                              $ {parseFloat(value?.total).toFixed(2)}\n                            </span>\n                          </Col>\n                        </Row>\n                      </ListGroup.Item>\n                    )\n                  )\n                }\n              </ListGroup>\n            </div>\n            <Modal.Footer className='d-flex justify-content-between align-items-center'>\n              <Button type='button' onClick={deleteAndCancel} className={style.deleteButton}>\n                <Trash color='#B42318' size={18} />\n              </Button>\n              <div className='d-flex align-items-center gap-3'>\n                <Button type='button' onClick={handleClose} className='outline-button' style={{ minWidth: '67px' }}>Cancel</Button>\n                <Button type='submit' className='solid-button' style={{ minWidth: '67px' }}>Save</Button>\n              </div>\n            </Modal.Footer>\n          </Form>\n        </Modal.Body>\n      </Modal>\n    </React.Fragment>\n  );\n};\n\nexport default CreateMergeCalculation;","// extracted by mini-css-extract-plugin\nexport default {\"mergeListItem\":\"list-merge-calculation_mergeListItem__lMMHT\",\"mergeListSrBox\":\"list-merge-calculation_mergeListSrBox__Pg9x-\",\"divider\":\"list-merge-calculation_divider__uLh55\",\"divider2\":\"list-merge-calculation_divider2__ixjfs\"};","import React from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { Trash } from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { useMutation } from '@tanstack/react-query';\nimport { ConfirmPopup, confirmPopup } from 'primereact/confirmpopup';\nimport { toast } from 'sonner';\nimport { deleteMergeQuote } from '../../../../../../APIs/CalApi';\n\nconst DeleteMerge = ({ id, alias, refetch, setMerges }) => {\n  const { unique_id } = useParams();\n  const deleteMutation = useMutation({\n    mutationFn: () => deleteMergeQuote(id),\n    onSuccess: () => {\n      toast.success(`Merge item deleted successfully`);\n      refetch();\n    },\n    onError: (error) => {\n      console.log('error: ', error);\n      toast.error(`Failed to delete merge item. Please try again.`);\n    }\n  });\n\n  const accept = () => {\n    if (unique_id) {\n      if (!id) return toast.error(\"Id not found\");\n      deleteMutation.mutate();\n    } else {\n      setMerges((merges) => {\n        let updatedMerges = merges.filter((merge) => merge.alias !== alias);\n        return updatedMerges;\n      });\n    }\n  };\n  const reject = () => { };\n\n  const deleteMergeItem = (event) => {\n    confirmPopup({\n      target: event.currentTarget,\n      message: 'Do you want to delete this record?',\n      defaultFocus: 'reject',\n      acceptClassName: 'p-button-danger',\n      accept,\n      reject,\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <ConfirmPopup />\n      {\n        deleteMutation.isPending ? (\n          <Spinner animation=\"border\" role=\"status\" size=\"sm\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </Spinner>\n        ) : <Trash onClick={deleteMergeItem} color=\"#98A2B3\" size={16} className='cursor-pointer' />\n      }\n    </React.Fragment>\n  );\n};\n\nexport default DeleteMerge;","// extracted by mini-css-extract-plugin\nexport default {\"mergeButton\":\"edit-merge-calculation_mergeButton__MJN7A\",\"disabled\":\"edit-merge-calculation_disabled__mjeA+\",\"cancelButton\":\"edit-merge-calculation_cancelButton__e50P9\",\"deleteButton\":\"edit-merge-calculation_deleteButton__5ACo9\"};","import React, { useEffect, useState } from 'react';\nimport { Button, Col, ListGroup, Modal, Row } from 'react-bootstrap';\nimport { Trash } from 'react-bootstrap-icons';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport clsx from 'clsx';\nimport Form from 'react-bootstrap/Form';\nimport * as yup from 'yup';\nimport style from './edit-merge-calculation.module.scss';\n\n\n// Validation schema\nconst schema = yup\n  .object({\n    title: yup.string().required(\"Title is required\"),\n    description: yup.string().required(\"Description is required\"),\n  })\n  .required();\n\nconst EditMergeCalculation = ({ merge, alias, setMerges, refetch, deleteMergeCalculator }) => {\n  const [show, setShow] = useState(false);\n  const romanNo = alias;\n  const [defaultValues,] = useState({\n    title: merge?.title || \"\",\n    description: merge?.description || \"\"\n  });\n  const { register, reset, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema), defaultValues\n  });\n\n  useEffect(() => { reset(); }, [alias]);\n\n  const onSubmit = (data) => {\n    const payload = {\n      ...data,\n      alias: romanNo,\n      calculators: merge?.calculators?.map((value) => ({\n        key: value.key,\n        merge_id: value.merge_id,\n        calculator: value.calculator,\n        label: value.label,\n        total: value.total,\n        description: value.description\n      }))\n    };\n    setMerges((merges) =>\n      merges.map((item) =>\n        item.alias === romanNo ? { ...item, ...payload } : item\n      )\n    );\n    handleClose();\n  };\n\n  const deleteAndCancel = () => {\n    setShow(false);\n  };\n  const handleClose = () => setShow(false);\n  const handleOpen = () => setShow(true);\n\n  return (\n    <React.Fragment>\n      <Button type='button' onClick={handleOpen} className={clsx(style.mergeButton, 'text-button')}>Edit</Button>\n      <Modal\n        size=\"lg\"\n        show={show}\n        centered\n        onHide={handleClose}\n        className={clsx('task-form', 'mergeForm')}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title className='d-flex align-items-center'>\n            <div className='d-flex justify-content-center align-items-center' style={{ width: '36px', height: '36px', borderRadius: '50%', border: '1px solid #EAECF0', background: '#F2F4F7', color: '#344054', fontSize: '14px', fontWeight: 600 }}>\n              {romanNo}\n            </div>\n            <span className='modal-task-title'>Edit Merge Items</span>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body className='px-0'>\n          <Form onSubmit={handleSubmit(onSubmit)}>\n            <div className='px-4' style={{ maxHeight: '450px', overflow: 'auto', }}>\n              <Form.Group className=\"mb-3\">\n                <Form.Label>Task Title</Form.Label>\n                <Form.Control\n                  {...register(\"title\")}\n                  type=\"text\"\n                  placeholder=\"Merge items title\"\n                  className={`${errors.title ? 'border border-danger' : ''}`}\n                />\n                {errors.title && <Form.Text className=\"text-danger\">{errors.title.message}</Form.Text>}\n              </Form.Group>\n\n              <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n                <Form.Label>Describe merging items</Form.Label>\n                <Form.Control\n                  as=\"textarea\"\n                  rows={2}\n                  placeholder='Enter a description...'\n                  {...register(\"description\")}\n                  style={{ height: '80px', outline: 'none', boxShadow: 'none' }}\n                  className={`${errors.description ? 'border border-danger' : ''}`}\n                />\n                {errors.description && <Form.Text className=\"text-danger\">{errors.description.message}</Form.Text>}\n              </Form.Group>\n              <ListGroup variant=\"flush border rounded mb-4\" style={{ border: \"1px solid var(--Gray-100, #F2F4F7)\" }}>\n                {\n                  merge?.calculators?.map((value, index) =>\n                    <ListGroup.Item key={`${index}-${value.id}`} className='d-flex justify-content-between'>\n                      <Row className='w-100'>\n                        <Col sm={4} className='text-start'>\n                          <span style={{ color: '#101828', fontSize: '16px' }}>\n                            {value?.label || \"\"}\n                          </span>\n                        </Col>\n                        <Col sm={6}>\n                          <span style={{ color: '#101828', fontSize: '16px' }}>\n                            {value?.description || \"\"}\n                          </span>\n                        </Col>\n                        <Col sm={2} className='text-end text-nowrap'>\n                          <span style={{ color: '#101828', fontSize: '16px', textAlign: 'end' }}>\n                            $ {parseFloat(value?.total).toFixed(2)}\n                          </span>\n                          <Trash onClick={() => deleteMergeCalculator(value.calculator, value.key)} color='#98A2B3' size={16} className='ms-2' style={{ position: 'relative', left: '20px', cursor: 'pointer' }} />\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n                  )\n                }\n              </ListGroup>\n            </div>\n            <Modal.Footer className='d-flex justify-content-between align-items-center'>\n              <Button type='button' onClick={deleteAndCancel} className={style.deleteButton}>\n                <Trash color='#B42318' size={18} />\n              </Button>\n              <div className='d-flex align-items-center gap-3'>\n                <Button type='button' onClick={handleClose} className='outline-button' style={{ minWidth: '67px' }}>Cancel</Button>\n                <Button type='submit' className='solid-button' style={{ minWidth: '67px' }}>Save</Button>\n              </div>\n            </Modal.Footer>\n          </Form>\n        </Modal.Body>\n      </Modal>\n    </React.Fragment>\n  );\n};\n\nexport default EditMergeCalculation;","import React from 'react';\nimport { useRef, useState } from 'react';\nimport { CloseButton, ListGroup } from 'react-bootstrap';\nimport { ControlledMenu, useClick } from '@szhsin/react-menu';\nimport '@szhsin/react-menu/dist/index.css';\n\nconst ViewMerge = ({ title, alias, items }) => {\n    const ref = useRef(null);\n    const [isOpen, setOpen] = useState(false);\n    const anchorProps = useClick(isOpen, setOpen);\n    return (\n        <React.Fragment>\n            <button type=\"button\" className=\"btn p-0 ellipsis-width\" style={{ maxWidth: '450px' }} ref={ref} {...anchorProps}>{title}</button>\n\n            <ControlledMenu\n                state={isOpen ? 'open' : 'closed'}\n                anchorRef={ref}\n                onClose={() => setOpen(false)}\n                menuStyle={{ padding: '24px 24px 20px 24px', width: '365px' }}\n            >\n                <div className='d-flex justify-content-between'>\n                    <div className='BoxNo'>\n                        <div className='no'>{alias}</div>\n                    </div>\n                    <CloseButton onClick={() => setOpen(false)}/>\n                </div>\n\n                <ListGroup variant=\"flush border\" style={{ marginTop: '16px' }}>\n                    {\n                        items?.map((data, index) =>\n                            <ListGroup.Item key={index} className='d-flex justify-content-between border-0'>\n                                <span style={{ color: '#475467', fontSize: '14px', fontWeight: 400 }}>{data?.label}</span>\n                                <span style={{ color: '#475467', fontSize: '14px', fontWeight: 600, whiteSpace: 'nowrap' }}>$ {data?.total || \"0.00\"}</span>\n                            </ListGroup.Item>\n                        )\n                    }\n                </ListGroup>\n            </ControlledMenu>\n        </React.Fragment>\n    );\n};\n\nexport default ViewMerge;","import React from 'react';\nimport clsx from 'clsx';\nimport style from './list-merge-calculation.module.scss';\nimport DeleteMerge from '../delete-merge-calculation';\nimport EditMergeCalculation from '../edit-merge-calculation';\nimport ViewMerge from '../view-merge-calculation';\n\nconst ListMergeCalculations = ({ merges, setMerges, refetch, deleteMergeCalculator }) => {\n    return (\n        <>\n            <div className={clsx('w-100', style.divider)} style={{}}></div>\n\n            {(merges?.length && <p className='mb-0' style={{ fontSize: '14px', fontWeight: '500', color: '#475467' }}>Merged Items</p>) || ''}\n\n            {\n                merges.map((merge, index) => (\n                    <div key={`${index}-${merge.id}`} className={clsx('d-flex align-items-center gap-3', style.mergeListItem)}>\n                        <div className={clsx('d-flex justify-content-center align-items-center', style.mergeListSrBox)}>\n                            {merge?.alias}\n                        </div>\n                        <div className='d-flex align-items-center gap-3' style={{ width: '317px' }}>\n                            <ViewMerge title={merge.title} alias={merge?.alias} items={merge.calculators} />\n                            <EditMergeCalculation merge={merge} setMerges={setMerges} alias={merge?.alias} deleteMergeCalculator={deleteMergeCalculator} />\n                        </div>\n                        <span style={{ minWidth: '120px', color: '#667085' }}>$ {merge?.calculators?.reduce((sum, item) => sum + parseFloat(item.total), 0).toFixed(2) || \"0.00\"}</span>\n                        <DeleteMerge id={merge.id} alias={merge?.alias} refetch={refetch} setMerges={setMerges} />\n                    </div>\n                ))\n            }\n\n            {(merges?.length && <div className={clsx('w-100', style.divider2)}></div>) || \"\"}\n        </>\n    );\n};\n\nexport default ListMergeCalculations;","import React, { useEffect, useState } from 'react';\nimport { Check, GripVertical, Trash } from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\nimport { useQuery } from '@tanstack/react-query';\nimport { nanoid } from \"nanoid\";\nimport { InputNumber } from 'primereact/inputnumber';\nimport { toast } from 'sonner';\nimport { DepartmentQuoteTableRowLoading, DepartmentRowChangeLoading } from './department-quote-table-row-loading';\nimport SelectComponent from './select-component';\nimport { getCalculationByReferenceId, getDepartments } from '../../../../../../APIs/CalApi';\nimport { formatAUD } from '../../../../../../shared/lib/format-aud';\nimport CreateMergeCalculation from '../../../../features/sales-features/merges-calculation/create-merge-calculation';\nimport ListMergeCalculations from '../../../../features/sales-features/merges-calculation/list-merge-calculations';\nimport { romanize } from '../../../../shared/utils/helper';\n\nconst DepartmentCalculationTableEmptyRow = ({ srNo, departments, handleChange }) => {\n    return (\n        <tr>\n            <td style={{ width: '24px' }} className='shadowRight-'></td>\n            <td style={{ width: '64px', textAlign: 'left' }}>{srNo + 1}</td>\n            <td style={{ width: '192px' }}>\n                <SelectComponent departments={departments} handleChange={handleChange} isShowlabel={false} />\n            </td>\n            <td style={{ width: '100%', paddingTop: '10px' }}>\n                <textarea disabled rows={1} placeholder='Enter a description...' style={{ background: 'transparent', border: '0px solid #fff', resize: 'none', boxSizing: 'border-box' }} onChange={() => { }}></textarea>\n            </td>\n            <td style={{ width: '128px' }}>\n                <div className='d-flex align-items-center'>\n                    <span style={{ color: 'rgb(152, 162, 179)' }}>$</span>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ padding: '4px', width: '100px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${'0.00'}`}\n                        onChange={() => { }}\n                    />\n                </div>\n            </td>\n            <td style={{ width: '185px' }}>\n                <div className='d-flex align-items-center'>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ padding: '4px', width: '60px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${'0.00'}`}\n                        onChange={() => { }}\n                    />\n                    <select value={\"MRG\"} disabled style={{ border: '0px solid #fff', background: 'transparent' }} onChange={() => { }}>\n                        <option value={\"MRG\"}>MRG %</option>\n                        <option value={\"AMN\"}>AMT $</option>\n                        <option value={\"MRK\"}>MRK %</option>\n                    </select>\n                </div>\n            </td>\n            <td style={{ width: '118px', textAlign: 'left', color: 'rgb(152, 162, 179)' }}>$ {\"0.00\"}</td>\n            <td style={{ width: '166px' }}>\n                <div className='d-flex align-items-center'>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ padding: '4px', width: '60px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${'0.00'}`}\n                        onChange={() => { }}\n                    />\n                    {/* <select value={\"Cost\"} disabled style={{ border: '0px solid #fff', background: 'transparent' }} onChange={() => { }}>\n                        <option value=\"Cost\">1/Q</option>\n                        <option value=\"Hourly\">1/H</option>\n                    </select> */}\n                </div>\n            </td>\n            <td style={{ width: '83px' }}>\n                <div className='d-flex align-items-center'>\n                    <input\n                        type=\"text\"\n                        disabled\n                        style={{ width: '60px', padding: '4px', background: 'transparent', color: '#98A2B3' }}\n                        value={`${\"0.00%\"}`}\n                        onChange={() => { }}\n                    />\n                </div>\n            </td>\n            <td style={{ width: '118px', textAlign: 'left', color: 'rgb(152, 162, 179)' }}>$ {\"0.00\"}</td>\n            <td style={{ width: '32px', position: 'sticky', right: '0px' }} className='shadowLeft-'>\n                <Trash color=\"#98A2B3\" style={{ cursor: 'not-allowed', opacity: '.5' }} onClick={() => { }} />\n            </td>\n        </tr>\n    );\n};\n\nconst DepartmentCalculationTableHead = () => {\n    return (\n        <thead>\n            <tr>\n                <th style={{ width: '24px' }}></th>\n                <th style={{ width: '64px', textAlign: 'left' }}>Order</th>\n                <th style={{ width: '192px' }}>Department</th>\n                <th style={{ width: '100%' }}>Description</th>\n                <th style={{ width: '128px' }}>Cost</th>\n                <th style={{ width: '185px' }}>Markup / Margin</th>\n                <th style={{ width: '118px' }}>Unit Price</th>\n                <th style={{ width: '166px' }}>Qty / Unit</th>\n                <th style={{ width: '83px' }}>Discount</th>\n                <th style={{ width: '118px' }}>Amount</th>\n                <th style={{ width: '32px' }}></th>\n            </tr>\n        </thead>\n    );\n};\n\nconst DepartmentCalculationTableBody = ({ rows, updateData, deleteRow, selectItem, setSelectItem, mapMergeItemWithNo, checkedItems = [], departments, handleDepartmentChange, selectKey }) => {\n    const handleChange = (event, value, key) => {\n        const mergeKey = `${key}-${value.id}`;\n\n        setSelectItem((oldItems) => {\n            if (event.target.checked) {\n                const items = {\n                    label: value.label,\n                    description: value?.description,\n                    calculator: value?.calculator,\n                    index: value?.index,\n                    total: value?.total,\n                    key: key,\n                    merge_id: value?.merge_id\n                };\n\n                let newItems = oldItems[mergeKey] || [];\n                newItems.push(items);\n\n                return {\n                    ...oldItems,\n                    [mergeKey]: newItems\n                };\n            } else {\n                const updatedItems = { ...oldItems };\n                if (updatedItems[mergeKey]) delete updatedItems[mergeKey];\n                return updatedItems;\n            }\n        });\n    };\n\n    return (\n        <>\n            {Object.entries(rows).map(([key, values], id) => (\n                <React.Fragment key={key}>\n                    {\n                        values?.map((value, index) =>\n                            <Draggable draggableId={`row-${key}-${value.id}`} key={`${key}-${value.id}`} index={id}>\n                                {(provided) => (\n                                    <tr\n                                        key={`tr-${key}-${value.id}`}\n                                        ref={provided.innerRef}\n                                        {...provided.draggableProps}\n                                        style={{\n                                            ...provided.draggableProps.style,\n                                            cursor: 'default',\n                                        }}\n                                        className={`calculation-tr ${checkedItems.includes(key) ? 'selected' : ''}`}\n                                    >\n\n                                        {\n                                            selectKey === key ? (\n                                                <>\n                                                    <td {...provided.dragHandleProps} style={{ width: '24px' }}>\n                                                        {\n                                                            index === 0 && <GripVertical color=\"#98A2B3\" style={{ cursor: 'move' }} />\n                                                        }\n                                                    </td>\n                                                    <DepartmentRowChangeLoading />\n                                                </>\n                                            )\n                                                : (\n                                                    <>\n                                                        <td {...provided.dragHandleProps} style={{ width: '24px' }} className='shadowRight-'>\n                                                            {\n                                                                index === 0 && <GripVertical color=\"#98A2B3\" style={{ cursor: 'move' }} />\n                                                            }\n                                                        </td>\n                                                        <td style={{ width: '64px', textAlign: 'left' }}>\n\n                                                            <div className='d-flex align-items-center justify-content-end gap-2'>\n                                                                {index === 0 && (<span>{id + 1}</span>)}\n                                                                {\n                                                                    mapMergeItemWithNo[`${key}-${value.calculator}`] ? (\n                                                                        <div className='d-flex justify-content-center align-items-center' style={{ width: '20px', height: '20px', borderRadius: '24px', background: '#F2F4F7', border: '1px solid #EAECF0', color: '#344054', fontSize: '10px', marginRight: '0px' }}>\n                                                                            {mapMergeItemWithNo[`${key}-${value.calculator}`]}\n                                                                        </div>\n                                                                    ) : (\n                                                                        <label className=\"customCheckBox checkbox\" style={{ marginRight: '0px' }}>\n                                                                            <input type=\"checkbox\" checked={selectItem[`${key}-${value.id}`] ? true : false} onChange={(e) => handleChange(e, value, key)} />\n                                                                            <span className=\"checkmark\" style={{ top: '0px' }}>\n                                                                                <Check color=\"#1AB2FF\" size={20} />\n                                                                            </span>\n                                                                        </label>\n                                                                    )\n                                                                }\n                                                            </div>\n                                                        </td>\n                                                        <td style={{ width: '192px' }}>\n                                                            {\n                                                                index === 0 && (\n                                                                    <SelectComponent departments={departments} handleChange={handleDepartmentChange} title={value.label} keyValue={key} />\n                                                                )\n                                                            }\n                                                        </td>\n                                                        <td style={{ width: '300px', textAlign: 'left' }}>\n                                                            <textarea rows={1} className=\"auto-expand\" style={{ background: 'transparent', border: '0px solid #fff', fontSize: '14px' }} value={value.description}\n                                                                onChange={(e) => updateData(key, value.id, 'description', e.target.value)}\n                                                                onInput={(e) => {\n                                                                    e.target.style.height = 'auto';\n                                                                    e.target.style.height = `${e.target.scrollHeight}px`;\n                                                                }}\n                                                                onFocus={(e) => {\n                                                                    e.target.style.height = 'auto';\n                                                                    e.target.style.height = `${e.target.scrollHeight}px`;\n                                                                }}\n                                                                onBlur={(e) => {\n                                                                    e.target.style.height = '50px';\n                                                                }}\n                                                                onClick={(e) => {\n                                                                    e.target.style.height = 'auto';\n                                                                    e.target.style.height = `${e.target.scrollHeight}px`;\n                                                                }}\n                                                            ></textarea>\n                                                        </td>\n                                                        <td style={{ width: '128px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    prefix=\"$\"\n                                                                    value={value.cost}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'cost', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='$0.00'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '120px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                            </div>\n                                                        </td>\n                                                        <td style={{ width: '185px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    value={value.profit_type_value}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'profit_type_value', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='0.00'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '60px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                                <select value={value.profit_type} style={{ border: '0px solid #fff', background: 'transparent', fontSize: '14px' }} onChange={(e) => updateData(key, value.id, 'profit_type', e.target.value)}>\n                                                                    <option value={\"MRG\"}>MRG %</option>\n                                                                    <option value={\"AMN\"}>AMT $</option>\n                                                                    <option value={\"MRK\"}>MRK %</option>\n                                                                </select>\n                                                            </div>\n                                                        </td>\n                                                        <td style={{ width: '100%', textAlign: 'left', fontSize: '14px' }}>${formatAUD(value.unit_price || \"0.00\")}</td>\n                                                        <td style={{ width: '166px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    value={value.quantity}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'quantity', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='0.00'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '60px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                                {/* <select value={value.type} style={{ border: '0px solid #fff', background: 'transparent', fontSize: '14px' }} onChange={(e) => updateData(key, value.id, 'type', e.target.value)}>\n                                                                    <option value=\"Cost\">1/Q</option>\n                                                                    <option value=\"Hourly\">1/H</option>\n                                                                </select> */}\n                                                            </div>\n                                                        </td>\n\n                                                        <td style={{ width: '60px' }}>\n                                                            <div className='d-flex align-items-center'>\n                                                                <InputNumber\n                                                                    suffix=\"%\"\n                                                                    value={value.discount}\n                                                                    onValueChange={(e) => updateData(key, value.id, 'discount', e.target.value)}\n                                                                    maxFractionDigits={2}\n                                                                    minFractionDigits={2}\n                                                                    placeholder='0.00%'\n                                                                    inputId=\"minmaxfraction\"\n                                                                    className='w-100'\n                                                                    inputStyle={{ width: '60px', padding: '4px', background: 'transparent' }}\n                                                                />\n                                                            </div>\n                                                        </td>\n\n                                                        <td style={{ textAlign: 'left', fontSize: '14px' }}>$ {formatAUD(value.total || 0.00)}</td>\n                                                        <td style={{ width: '32px', position: 'sticky', right: '0px' }} className='shadowLeft-'>\n                                                            <Trash color=\"#98A2B3\" style={{ cursor: 'pointer' }} onClick={() => deleteRow(key, value.id, value.calculator)} />\n                                                        </td>\n                                                    </>\n                                                )\n                                        }\n\n                                    </tr>\n                                )}\n                            </Draggable>\n                        )\n                    }\n                </React.Fragment>\n            ))}\n        </>\n    );\n};\n\nconst DepartmentCalculationTable = ({ setTotals, setPayload, defaultDiscount, xero_tax, preExistCalculation, preMerges, refetch, setMergeDeletedItems }) => {\n    const { unique_id } = useParams();\n    const [rows, setRows] = useState({});\n    const [subItem, setSubItem] = useState(null);\n    const [subItemLabel, setSubItemLabel] = useState(null);\n    const [selectKey, setSelectKey] = useState(null);\n    const [preExistMerges, setPreExistMerges] = useState([]);\n\n    const [merges, setMerges] = useState([]);\n    const [selectItem, setSelectItem] = useState({});\n    const [mapMergeItemWithNo, setMapMergeItemWithNo] = useState({});\n\n    const { data: departments } = useQuery({\n        queryKey: ['departments'],\n        queryFn: getDepartments,\n        staleTime: 0,\n        refetchOnWindowFocus: true\n    });\n    const { isLoading: isLoadingSubItem, data } = useQuery({\n        queryKey: ['calcReferenceId', subItem],\n        queryFn: () => getCalculationByReferenceId(subItem),\n        enabled: !!subItem,\n        retry: 1,\n    });\n\n    const onDragEnd = (result) => {\n        const { source, destination } = result;\n\n        // Dropped outside the list\n        if (!destination) {\n            return;\n        }\n\n        const keys = Object.keys(rows);\n        const sourceKey = keys[source.index];\n        const destinationKey = keys[destination.index];\n\n        if (!sourceKey || !destinationKey) {\n            console.error('Invalid source or destination key.');\n            return;\n        }\n\n        // Reorder keys\n        const reorderedKeys = Array.from(keys);\n        const [removedKey] = reorderedKeys.splice(source.index, 1);\n        reorderedKeys.splice(destination.index, 0, removedKey);\n\n        // Rebuild the rows object with reordered keys\n        const reorderedRows = reorderedKeys.reduce((acc, key) => {\n            acc[key] = rows[key];\n            return acc;\n        }, {});\n\n        setRows(reorderedRows);\n    };\n\n    const handleChange = (subitemId, label) => {\n        if (subitemId) setSubItem(subitemId);\n        if (label) setSubItemLabel(label);\n    };\n\n    const calculateTotal = (item) => {\n        let cost = parseFloat(item.cost) || 0;\n        let quantity = parseFloat(item.quantity) || 0;\n        let subtotal = cost * quantity;\n\n        let margin = parseFloat(item.profit_type_value) || 0;\n        if (item.profit_type === \"MRK\") {\n            subtotal += (subtotal * margin) / 100;\n        } else if (item.profit_type === \"MRG\") {\n            subtotal = subtotal / (1 - margin / 100);\n        } else if (item.profit_type === \"AMN\") {\n            subtotal += margin;\n        }\n\n        let discount = parseFloat(item.discount) || 0;\n        let total = subtotal - (subtotal * discount) / 100;\n\n        return parseFloat(total).toFixed(2);\n    };\n\n    const calculateUnitPrice = (item) => {\n        let cost = parseFloat(item.cost) || 0;\n        let unit_price = 0.00;\n\n        let margin = parseFloat(item.profit_type_value) || 0;\n        if (item.profit_type === \"MRK\") {\n            unit_price = cost + (cost * (margin / 100));\n        } else if (item.profit_type === \"MRG\") {\n            unit_price = cost / (1 - (margin / 100));\n        } else if (item.profit_type === \"AMN\") {\n            unit_price = cost + margin;\n        }\n\n        return parseFloat(unit_price).toFixed(2);\n    };\n\n    const updateData = (key, id, type, value) => {\n        setRows(prevRows => {\n            const updatedRows = {\n                ...prevRows,\n                [key]: prevRows[key].map(item => {\n                    if (item.id === id) {\n                        const updatedItem = { ...item, [type]: value };\n                        if (updatedItem.profit_type === \"MRG\" && updatedItem.profit_type_value >= 100) {\n                            updatedItem.profit_type_value = 99.99;\n                        }\n                        updatedItem.unit_price = calculateUnitPrice(updatedItem);\n                        updatedItem.total = calculateTotal(updatedItem);\n                        return updatedItem;\n                    }\n                    return item;\n                })\n            };\n            return updatedRows;\n        });\n    };\n\n    const deleteMergeCalculator = (calcReferenceId, key) => {\n        let idsToDelete = [], mergeCount = 0;\n\n        const updatedMerges = merges.reduce((result, item) => {\n            const updatedCalculators = item.calculators.filter(\n                calc => !(calc.calculator === calcReferenceId && calc.key === key)\n            );\n\n            if (updatedCalculators.length < 2) {\n                if (item.id && unique_id) idsToDelete.push(item.id);\n                return result;\n            }\n\n            mergeCount++;\n            const alias = romanize(mergeCount);\n            result.push({ ...item, calculators: updatedCalculators, alias });\n            return result;\n        }, []);\n        setMerges(updatedMerges);\n        setMergeDeletedItems((prev) => [...new Set([...prev, ...idsToDelete])]);\n    };\n\n    const deleteRow = (key, id, calcReferenceId) => {\n        setRows(prevRows => {\n            const updatedRows = {\n                ...prevRows,\n                [key]: prevRows[key].filter(item => item.id !== id)\n            };\n\n            if (updatedRows[key].length === 0) delete updatedRows[key];\n\n            return updatedRows;\n        });\n        deleteMergeCalculator(calcReferenceId, key);\n    };\n\n    useEffect(() => {\n        if (data && data.length && subItem) {\n            if (data.length) {\n                data.forEach((item) => {\n                    item.label = subItemLabel;\n                    item.calculator = item.id;\n                    item.index = subItem;\n                    item.merge_id = nanoid(6);\n                    item.discount = defaultDiscount;\n                    item.quantity = parseFloat(parseFloat(item.quantity) || 1).toFixed(2);\n                    item.unit_price = calculateUnitPrice(item);\n                    item.total = calculateTotal(item);\n                });\n            } else {\n                data.push({\n                    label: subItemLabel,\n                    calculator: data.id,\n                    index: subItem,\n                    merge_id: nanoid(6),\n                    discount: defaultDiscount,\n                    quantity: parseFloat(parseFloat(data.quantity) || 1).toFixed(2),\n                });\n            }\n\n            let filteredData = data.filter((item, index, self) =>\n                index === self.findIndex((t) => t.id === item.id)\n            );\n\n            let key = `${nanoid(6)}`;\n            setRows((prevRows) => ({\n                ...prevRows,\n                [`${key}`]: filteredData,\n            }));\n\n            setSubItem(\"\");\n        }\n\n        if (subItem && data?.length === 0) {\n            toast.error(`No calculation found inside ${subItemLabel}`);\n        }\n\n    }, [data, subItem, defaultDiscount, subItemLabel]);\n\n    const handleDepartmentChange = async (value, label, keyValue) => {\n        if (!value || !keyValue) return;\n\n        try {\n            setSelectKey(keyValue);\n            const calculators = await getCalculationByReferenceId(value);\n            if (calculators?.length) {\n                calculators.forEach((item) => {\n                    item.label = label;\n                    item.calculator = item.id;\n                    item.index = value;\n                    item.merge_id = nanoid(6);\n                    item.discount = defaultDiscount;\n                    item.quantity = parseFloat(parseFloat(item.quantity) || 1).toFixed(2);\n                    item.unit_price = calculateUnitPrice(item);\n                    item.total = calculateTotal(item);\n                });\n\n                let filteredData = calculators.filter((item, index, self) =>\n                    index === self.findIndex((t) => t.id === item.id)\n                );\n\n                setRows((prevRows) => ({\n                    ...prevRows,\n                    [`${keyValue}`]: filteredData,\n                }));\n\n            } else {\n                toast.error(`No calculation found inside ${label}`);\n            }\n        } catch (error) {\n            console.error('Error in handleDepartmentChange:', error);\n        } finally {\n            setSelectKey(null);\n        }\n    };\n\n    const calculateSummary = (taxType) => {\n        let budget = 0;\n        let subtotal = 0;\n\n        Object.values(rows)?.forEach(departmentRows => {\n            departmentRows?.forEach(item => {\n                let rate = parseFloat(item.cost) || 0;\n                let quantity = parseFloat(item.quantity) || 0;\n                let cost = rate * quantity;\n                budget += parseFloat(cost || 0);\n                subtotal += parseFloat(item.total || 0);\n            });\n        });\n\n        let tax = 0;\n        let total = 0;\n\n        if (taxType === 'ex') {\n            tax = subtotal * 0.10;\n            total = subtotal + tax;\n        } else if (taxType === 'in') {\n            total = subtotal;\n            tax = total * 0.10 / 1.10;\n            subtotal = total - tax;\n        } else if (taxType === 'no') {\n            tax = 0;\n            total = subtotal;\n        }\n\n        const operationalProfit = subtotal - budget;\n\n        return {\n            budget: parseFloat(budget || 0.00).toFixed(2),\n            operationalProfit: parseFloat(operationalProfit).toFixed(2),\n            subtotal: parseFloat(subtotal).toFixed(2),\n            tax: parseFloat(tax).toFixed(2),\n            total: parseFloat(total).toFixed(2),\n        };\n    };\n\n    useEffect(() => {\n        const summary = calculateSummary(xero_tax);\n        setTotals(summary);\n\n        const calculations = Object.entries(rows).flatMap(([key, items], parentIndex) => {\n            return items.map((item) => {\n                const { id, ...rest } = item;\n                return {\n                    ...rest,\n                    cost: parseFloat(rest.cost || 0.00).toFixed(2),\n                    profit_type_value: parseFloat(rest.profit_type_value || 0.00).toFixed(2),\n                    unit_price: parseFloat(rest.unit_price || 0.00).toFixed(2),\n                    quantity: parseFloat(rest.quantity || 0.00).toFixed(2),\n                    discount: parseFloat(rest.discount || 0.00).toFixed(2),\n                    order: parentIndex + 1, // Use the parent's index as the order\n                };\n            });\n        });\n        setPayload((others) => ({ ...others, expense: summary.total || \"\", calculations }));\n    }, [rows, xero_tax]);\n\n    useEffect(() => {\n        setPreExistMerges(preMerges);\n    }, [preMerges]);\n\n    useEffect(() => {\n        if (!preExistCalculation?.length || !departments?.length) return;\n\n        // Build a map of subindex id to subindex name\n        const subindexMap = departments.reduce((map, department) => {\n            department.subindexes.forEach(subindex => {\n                map[subindex.id] = subindex.name;\n            });\n            return map;\n        }, {});\n\n        // Add merge id to preExistCalculation\n        preExistCalculation.forEach(item => {\n            if (!item.merge_id) item.merge_id = nanoid(6);\n        });\n\n        // Group by order first, then assign nanoid keys\n        const orderGroups = preExistCalculation.reduce((acc, { order, index, ...item }) => {\n            acc[order] = acc[order] || [];\n            let unit_price = item.unit_price;\n            if (unit_price === \"0.00\" || !unit_price) {\n                unit_price = calculateUnitPrice(item);\n            } else if (unit_price) {\n                unit_price = calculateUnitPrice(item);\n            }\n            acc[order].push({ ...item, unit_price, label: subindexMap[index] || \"Unknown\", index });\n            return acc;\n        }, {});\n\n        const reformattedData = Object.keys(orderGroups).reduce((acc, order) => {\n            const key = nanoid(6);\n            acc[key] = orderGroups[order];\n            return acc;\n        }, {});\n\n        // Build a mapping of calculator IDs to reformattedData keys\n        const calculatorKeyMap = {};\n        Object.entries(reformattedData).forEach(([key, items]) => {\n            items.forEach(item => {\n                calculatorKeyMap[item.id] = key;\n            });\n        });\n\n        // Create key-index map and reformat preExistMerges data\n        const reformattedMerges = preExistMerges.map((merge, index) => {\n            const alias = romanize(index + 1);\n\n            const calculators = merge?.calculators?.map(cal => {\n                const findData = preExistCalculation.find(data => data.id === cal.calculator);\n                const key = calculatorKeyMap[findData?.id];\n                return { label: subindexMap[findData?.index], description: findData?.description, total: findData?.total, calculator: findData?.calculator, key, merge_id: findData?.merge_id };\n            });\n\n            return { ...merge, alias, calculators };\n        });\n\n        setRows(reformattedData);\n        setMerges(reformattedMerges);\n\n    }, [preExistCalculation, preExistMerges, departments]);\n\n    useEffect(() => {\n        if (departments?.length) {\n            const keyIndexMap = {};\n            merges?.forEach((merge, index) => {\n                const alias = romanize(index + 1);\n                merge?.calculators?.forEach(cal => {\n                    keyIndexMap[`${cal.key}-${cal.calculator}`] = alias;\n                });\n            });\n\n            setMapMergeItemWithNo(keyIndexMap);\n            setPayload((others) => ({ ...others, merges }));\n        }\n    }, [merges]);\n\n\n    return (\n        <>\n            <div className=\"pb-3\" style={{ overflowX: 'auto', width: '100%' }}>\n                <DragDropContext onDragEnd={onDragEnd}>\n                    <table className='w-100 department-calculation'>\n                        <DepartmentCalculationTableHead />\n                        <Droppable droppableId=\"departmentQuoteTable\">\n                            {(provided) => (\n                                <tbody {...provided.droppableProps} ref={provided.innerRef}>\n                                    <DepartmentCalculationTableBody\n                                        rows={rows}\n                                        updateData={updateData}\n                                        deleteRow={deleteRow}\n                                        defaultDiscount={defaultDiscount}\n                                        selectItem={selectItem}\n                                        setSelectItem={setSelectItem}\n                                        mapMergeItemWithNo={mapMergeItemWithNo}\n                                        checkedItems={Object.keys(selectItem)}\n\n                                        selectKey={selectKey}\n                                        departments={departments}\n                                        handleDepartmentChange={handleDepartmentChange}\n                                    />\n                                    {\n                                        isLoadingSubItem && <DepartmentQuoteTableRowLoading />\n                                    }\n\n                                    <DepartmentCalculationTableEmptyRow srNo={Object.keys(rows || {}).length} departments={departments} handleChange={handleChange} />\n                                    {provided.placeholder}\n                                </tbody>\n                            )}\n                        </Droppable>\n                    </table>\n                </DragDropContext>\n            </div>\n            <div className='merge-section' style={{ marginTop: '20px', textAlign: 'left' }}>\n                <CreateMergeCalculation unique_id={unique_id} selectItem={selectItem}\n                    setSelectItem={setSelectItem} merges={merges} setMerges={setMerges}\n                    setPayload={setPayload} refetch={refetch} setPreExistMerges={setPreExistMerges}\n                />\n                <ListMergeCalculations unique_id={unique_id} merges={merges}\n                    setMerges={setMerges}\n                    refetch={refetch}\n                    deleteMergeCalculator={deleteMergeCalculator}\n                />\n            </div>\n\n        </>\n    );\n};\n\nexport default DepartmentCalculationTable;","import React, { useEffect, useRef, useState } from 'react';\nimport { Col, Placeholder, Row } from 'react-bootstrap';\nimport { Search } from 'react-bootstrap-icons';\nimport { useQuery } from '@tanstack/react-query';\nimport { Dropdown } from 'primereact/dropdown';\nimport { useDebounce } from 'primereact/hooks';\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from 'primereact/inputtext';\nimport { toast } from 'sonner';\nimport { getClientById, getListOfClients } from '../../../../../../APIs/ClientsApi';\nimport ImageAvatar from '../../../../../../ui/image-with-fallback/image-avatar';\n\nconst QuoteToBusiness = ({ isLoading, data, setPayload }) => {\n    const [selectClient, setSelectClient] = useState(null);\n    const [selectContact, setSelectContact] = useState(null);\n    const [isEdit, setIsEdit] = useState(false);\n\n    const observerRef = useRef(null);\n    const dropdownRef = useRef(null);\n    const [clients, setClients] = useState([]);\n    const [page, setPage] = useState(1);\n    const [hasMoreData, setHasMoreData] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const [inputValue, debouncedValue, setInputValue] = useDebounce('', 400);\n    const limit = 25;\n\n    const mainAddress = data.addresses.find(address => address.is_main) || (data.addresses?.length ? data.addresses[0] : {});\n    const mainContact = data.contact_persons.find(contact => contact.is_main) || (data.contact_persons?.length ? data.contact_persons[0] : {});\n\n    const clientQuery = useQuery({\n        queryKey: ['id', selectClient],\n        queryFn: () => getClientById(selectClient),\n        enabled: !!selectClient,\n        retry: 1,\n    });\n    const isBusiness = clientQuery.data?.is_business;\n\n    const contactOptions = clientQuery.data?.contact_persons || [];\n\n    useEffect(() => {\n        setPage(1);\n    }, [debouncedValue]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            setLoading(true);\n            const data = await getListOfClients(page, limit, debouncedValue);\n            if (page === 1) setClients(data.results);\n            else {\n                if (data?.results?.length > 0) {\n                    setClients(prev => {\n                        const existingClientIds = new Set(prev.map(client => client.id));\n                        const newClients = data.results.filter(client => !existingClientIds.has(client.id));\n                        return [...prev, ...newClients];\n                    });\n                }\n            }\n            setHasMoreData(data.count !== clients.length);\n            setLoading(false);\n        };\n\n        loadData();\n    }, [page, debouncedValue]);\n\n    // Wait for the dropdown to render its items\n    const setupObserver = () => {\n        const lastRow = document.querySelector('.p-dropdown-items .p-dropdown-item:last-child');\n\n        if (lastRow && !observerRef.current) {\n            observerRef.current = new IntersectionObserver(entries => {\n                if (entries[0].isIntersecting) {\n                    setPage(prevPage => prevPage + 1);\n                }\n            }, { threshold: 1.0 });\n            observerRef.current.observe(lastRow);\n        }\n    };\n\n    useEffect(() => {\n        if (!isEdit || !clients.length || !hasMoreData || !dropdownRef.current) return;\n\n        // Use a small delay or MutationObserver to ensure DOM is ready\n        const timeout = setTimeout(setupObserver, 100);\n\n        return () => {\n            clearTimeout(timeout);\n            if (observerRef.current) {\n                observerRef.current.disconnect();\n                observerRef.current = null;\n            }\n        };\n    }, [clients, hasMoreData, isEdit]);\n\n    const filterTemplate = () => {\n        return (\n            <IconField iconPosition=\"left\">\n                <InputIcon><Search className='mb-2' /></InputIcon>\n                <InputText\n                    type=\"text\"\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    className=\"p-inputtext p-component\"\n                    placeholder=\"Search clients\"\n                    style={{ width: '100%' }}\n\n                />\n            </IconField>\n        );\n    };\n\n    const handleChangeSave = () => {\n        if (!selectClient) return toast.error('Please select a client');\n        setPayload((prev) => ({ ...prev, client: selectClient, contact_person: selectContact }));\n        setIsEdit(false);\n    };\n\n    const clientOptionTemplate = (option) => {\n        return (\n            <div className=\"d-flex align-items-center gap-1\">\n                <ImageAvatar has_photo={option.has_photo} photo={option.photo} is_business={option.is_business} />\n                <div>{option.name}</div>\n            </div>\n        );\n    };\n\n    const selectedOptionTemplate = (option) => {\n        if (option?.name) {\n            return (\n                <div className=\"d-flex align-items-center gap-1\">\n                    <ImageAvatar has_photo={option?.has_photo} photo={option?.photo} is_business={option?.is_business} />\n                    <div>{option?.name}</div>\n                </div>\n            );\n        }\n    };\n\n    return (\n        <>\n            <Row>\n                {isEdit ? (\n                    <>\n                        <Col sm={6} style={{ minHeight: '190px' }}>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Company<span className='required'>*</span></p>\n                            <Dropdown\n                                ref={dropdownRef}\n                                value={selectClient}\n                                loading={loading}\n                                onChange={(e) => setSelectClient(e.value)}\n                                options={clients}\n                                itemTemplate={clientOptionTemplate}\n                                valueTemplate={selectClient && selectedOptionTemplate}\n                                optionLabel=\"name\"\n                                optionValue=\"id\"\n                                placeholder=\"Select client\"\n                                filter\n                                filterTemplate={filterTemplate}\n                                virtualScrollerOptions={{ itemSize: 46, lazy: true, onLazyLoad: setupObserver }}\n                                className=\"w-100\"\n                                filterInputAutoFocus={true}\n                            />\n                        </Col>\n                        {isBusiness &&\n                            <Col sm={6} style={{ minHeight: '190px' }}>\n                                <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                                <Dropdown\n                                    value={selectContact}\n                                    onChange={(e) => setSelectContact(e.value)}\n                                    options={contactOptions}\n                                    optionLabel={(option) => `${option.firstname} ${option.lastname}`}\n                                    optionValue='id'\n                                    placeholder=\"Select contact\"\n                                    filter\n                                    loading={clientQuery.isLoading}\n                                    className=\"w-100\"\n                                    filterInputAutoFocus={true}\n                                />\n                            </Col>\n                        }\n                    </>\n                ) : (\n                    <>\n                        <Col sm={6}>\n                            {isLoading ? (\n                                <>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                    <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                        <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                                    </Placeholder>\n                                </>\n                            ) : (\n                                <>\n                                    <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Company</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{data?.name || '-'}</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>ABN: {data?.abn || '-'}</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{data?.phone || '-'}</p>\n                                    <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '8px' }}>{mainAddress?.address || '-'}</p>\n                                </>\n                            )}\n                        </Col>\n                        <Col sm={6}>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{`${mainContact?.firstname || '-'} ${mainContact?.lastname || '-'}`}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.position || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.phone || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.email || '-'}</p>\n                        </Col>\n                    </>\n                )}\n\n                <Col sm={12}>\n                    {isEdit ? (\n                        <div className=\"d-flex\">\n                            <button onClick={handleChangeSave} className=\"btn py-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                                Save\n                            </button>\n                            <button onClick={() => setIsEdit(!isEdit)} className=\"btn py-0\" style={{ color: '#B42318', fontSize: '14px', fontWeight: '600' }}>\n                                Cancel\n                            </button>\n                        </div>\n                    ) : (\n                        <button onClick={() => setIsEdit(!isEdit)} className=\"btn p-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                            Edit info\n                        </button>\n                    )}\n                </Col>\n            </Row>\n        </>\n    );\n};\n\nexport default QuoteToBusiness;","import React, { useEffect, useRef, useState } from 'react';\nimport { Col, Placeholder, Row } from 'react-bootstrap';\nimport { Search } from 'react-bootstrap-icons';\nimport { useQuery } from '@tanstack/react-query';\nimport { Dropdown } from 'primereact/dropdown';\nimport { useDebounce } from 'primereact/hooks';\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from 'primereact/inputtext';\nimport { toast } from 'sonner';\nimport { getClientById, getListOfClients } from '../../../../../../APIs/ClientsApi';\nimport ImageAvatar from '../../../../../../ui/image-with-fallback/image-avatar';\n\nconst QuoteToClient = ({ isLoading, data, setPayload }) => {\n    const [selectClient, setSelectClient] = useState(null);\n    const [selectContact, setSelectContact] = useState(null);\n    const [isEdit, setIsEdit] = useState(false);\n\n    const observerRef = useRef(null);\n    const dropdownRef = useRef(null);\n    const [clients, setClients] = useState([]);\n    const [page, setPage] = useState(1);\n    const [hasMoreData, setHasMoreData] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const [inputValue, debouncedValue, setInputValue] = useDebounce('', 400);\n    const limit = 25;\n\n    const mainContact = data?.contact_persons?.find(contact => contact.is_main) || (data?.contact_persons?.length ? data?.contact_persons[0] : {});\n\n    const clientQuery = useQuery({\n        queryKey: ['id', selectClient],\n        queryFn: () => getClientById(selectClient),\n        enabled: !!selectClient,\n        retry: 1,\n    });\n\n    const contactOptions = clientQuery.data?.contact_persons || [];\n    const isBusiness = clientQuery.data?.is_business;\n\n    useEffect(() => {\n        setPage(1);\n    }, [debouncedValue]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            setLoading(true);\n            const data = await getListOfClients(page, limit, debouncedValue);\n            if (page === 1) setClients(data.results);\n            else {\n                if (data?.results?.length > 0) {\n                    setClients(prev => {\n                        const existingClientIds = new Set(prev.map(client => client.id));\n                        const newClients = data.results.filter(client => !existingClientIds.has(client.id));\n                        return [...prev, ...newClients];\n                    });\n                }\n            }\n            setHasMoreData(data.count !== clients.length);\n            setLoading(false);\n        };\n\n        loadData();\n    }, [page, debouncedValue]);\n\n    // Wait for the dropdown to render its items\n    const setupObserver = () => {\n        const lastRow = document.querySelector('.p-dropdown-items .p-dropdown-item:last-child');\n\n        if (lastRow && !observerRef.current) {\n            observerRef.current = new IntersectionObserver(entries => {\n                if (entries[0].isIntersecting) {\n                    setPage(prevPage => prevPage + 1);\n                }\n            }, { threshold: 1.0 });\n            observerRef.current.observe(lastRow);\n        }\n    };\n\n    useEffect(() => {\n        if (!isEdit || !clients.length || !hasMoreData || !dropdownRef.current) return;\n\n        // Use a small delay or MutationObserver to ensure DOM is ready\n        const timeout = setTimeout(setupObserver, 100);\n\n        return () => {\n            clearTimeout(timeout);\n            if (observerRef.current) {\n                observerRef.current.disconnect();\n                observerRef.current = null;\n            }\n        };\n    }, [clients, hasMoreData, isEdit]);\n\n    const filterTemplate = () => {\n        return (\n            <IconField iconPosition=\"left\">\n                <InputIcon><Search className='mb-2' /></InputIcon>\n                <InputText\n                    type=\"text\"\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    className=\"p-inputtext p-component\"\n                    placeholder=\"Search clients\"\n                    style={{ width: '100%' }}\n\n                />\n            </IconField>\n        );\n    };\n\n    const handleChangeSave = () => {\n        if (!selectClient) return toast.error('Please select a client');\n        setPayload((prev) => ({ ...prev, client: selectClient, contact_person: selectContact }));\n        setIsEdit(false);\n    };\n\n    const clientOptionTemplate = (option) => {\n        return (\n            <div className=\"d-flex align-items-center gap-1\">\n                <ImageAvatar has_photo={option.has_photo} photo={option.photo} is_business={option.is_business} />\n                <div>{option.name}</div>\n            </div>\n        );\n    };\n\n    const selectedOptionTemplate = (option) => {\n        if (option?.name) {\n            return (\n                <div className=\"d-flex align-items-center gap-1\">\n                    <ImageAvatar has_photo={option?.has_photo} photo={option?.photo} is_business={option?.is_business} />\n                    <div>{option?.name}</div>\n                </div>\n            );\n        }\n    };\n\n    return (\n        <Row>\n            {isEdit ? (\n                <>\n                    <Col sm={6} style={{ minHeight: '190px' }}>\n                        <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Company<span className='required'>*</span></p>\n                        <Dropdown\n                            ref={dropdownRef}\n                            value={selectClient}\n                            loading={loading}\n                            onChange={(e) => setSelectClient(e.value)}\n                            options={clients}\n                            itemTemplate={clientOptionTemplate}\n                            valueTemplate={selectClient && selectedOptionTemplate}\n                            optionLabel=\"name\"\n                            optionValue=\"id\"\n                            placeholder=\"Select client\"\n                            filter\n                            filterTemplate={filterTemplate}\n                            virtualScrollerOptions={{ itemSize: 46, lazy: true, onLazyLoad: setupObserver }}\n                            className=\"w-100\"\n                            filterInputAutoFocus={true}\n                        />\n                    </Col>\n                    {\n                        isBusiness &&\n                        <Col sm={6} style={{ minHeight: '190px' }}>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                            <Dropdown\n                                value={selectContact}\n                                onChange={(e) => setSelectContact(e.value)}\n                                options={contactOptions}\n                                optionLabel={(option) => `${option.firstname} ${option.lastname}`}\n                                optionValue='id'\n                                placeholder=\"Select contact\"\n                                filter\n                                loading={clientQuery.isLoading}\n                                className=\"w-100\"\n                                filterInputAutoFocus={true}\n                            />\n                        </Col>\n                    }\n                </>\n            ) : (\n                <Col sm={12}>\n                    {isLoading ? (\n                        <>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                            <Placeholder as=\"p\" animation=\"wave\" className=\"mb-1 mt-0\">\n                                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '100%', height: '12px' }} />\n                            </Placeholder>\n                        </>\n                    ) : (\n                        <>\n                            <p style={{ color: '#667085', fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>Main Contact</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{`${mainContact?.firstname || '-'} ${mainContact?.lastname || '-'}`}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.position || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.phone || '-'}</p>\n                            <p style={{ color: '#1D2939', fontSize: '16px', fontWeight: '400', marginBottom: '4px' }}>{mainContact?.email || '-'}</p>\n                        </>\n                    )}\n                </Col>\n            )}\n\n            <Col sm={12}>\n                {isEdit ? (\n                    <div className=\"d-flex\">\n                        <button onClick={handleChangeSave} className=\"btn py-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                            Save\n                        </button>\n                        <button onClick={() => setIsEdit(!isEdit)} className=\"btn py-0\" style={{ color: '#B42318', fontSize: '14px', fontWeight: '600' }}>\n                            Cancel\n                        </button>\n                    </div>\n                ) : (\n                    <button onClick={() => setIsEdit(!isEdit)} className=\"btn p-0\" style={{ color: '#158ECC', fontSize: '14px', fontWeight: '600' }}>\n                        Edit info\n                    </button>\n                )}\n            </Col>\n        </Row>\n    );\n};\n\nexport default QuoteToClient;\n","import React from 'react';\n\nconst CustomRadioButton = ({ label, name, value, checked, onChange, disabled }) => {\n  return (\n    <label className={`custom-radio-button ${disabled ? 'disabled' : ''}`}>\n      <input\n        type=\"radio\"\n        name={name}\n        value={value}\n        checked={checked}\n        onChange={onChange}\n        disabled={disabled}\n      />\n      <span className=\"custom-radio-button__checkmark\"></span>\n      {label}\n    </label>\n  );\n};\n\nexport default CustomRadioButton;\n","import React, { useEffect, useState } from 'react';\nimport { Col, Row, Placeholder, OverlayTrigger, Tooltip, Button } from 'react-bootstrap';\nimport { ChevronDown, InfoCircle, PencilSquare } from 'react-bootstrap-icons';\nimport { components } from 'react-select';\nimport Select1 from 'react-select';\nimport { FormControl, MenuItem, Select } from '@mui/material';\nimport { useQuery } from '@tanstack/react-query';\nimport { Calendar } from 'primereact/calendar';\nimport { Dropdown } from 'primereact/dropdown';\nimport { InputNumber } from 'primereact/inputnumber';\nimport Form from 'react-bootstrap/Form';\nimport DepartmentCalculationTable from './department-calculation-table';\nimport QuoteToBusiness from './quote-to-business';\nimport QuoteToClient from './quote-to-client';\nimport { getClientById, getProjectManager } from '../../../../../../APIs/ClientsApi';\nimport ImageAvatar from '../../../../../../ui/image-with-fallback/image-avatar';\nimport CustomRadioButton from '../ui/custom-radio-button';\n\nconst CustomOption = (props) => {\n  return (\n    <components.Option {...props}>\n      <div className='d-flex align-items-center'>\n        <ImageAvatar has_photo={props?.data.has_photo} photo={props.data.image} is_business={false} />\n        {props.data.label}\n      </div>\n    </components.Option>\n  );\n};\n\nconst DepartmentQuote = React.memo(({ payload, setPayload, setTotals, refetch, preExistCalculation, preExistMerges, setMergeDeletedItems, setContactPersons, quoteType }) => {\n  const [paymentCollection, setPaymentCollection] = useState('request');\n  const [selectedManagers, setSelectedManagers] = useState([]);\n  const [editedReference, setEditedReference] = useState('');\n  const [isEditingReference, setIsEditingReference] = useState(false);\n  const [editedDescription, setEditedDescription] = useState('');\n  const [isEditingDescription, setIsEditingDescription] = useState(false);\n  const handleEditReference = () => {\n    setIsEditingReference(true);\n    setEditedReference(payload.reference || '');\n  };\n  const handleEditDescription = () => {\n    setIsEditingDescription(true);\n    setEditedDescription(payload.description || '');\n  };\n\n  const handleDataChange = (e) => {\n    setEditedReference(e.target.value);\n    setEditedDescription(e.target.value);\n  };\n\n  const handleSaveReference = () => {\n    setIsEditingReference(false);\n    setPayload((prev) => ({ ...prev, reference: editedReference }));\n  };\n  const handleSaveDescription = () => {\n    setIsEditingDescription(false);\n    setPayload((prev) => ({ ...prev, description: editedDescription }));\n  };\n\n\n  const projectManagerQuery = useQuery({ queryKey: ['project-manager'], queryFn: getProjectManager });\n  const clientQuery = useQuery({\n    queryKey: ['id', payload.client],\n    queryFn: () => getClientById(payload.client),\n    enabled: !!payload.client,\n    retry: 1,\n  });\n\n  useEffect(() => {\n    if (clientQuery.data?.contact_persons?.length) {\n      let person = clientQuery.data?.contact_persons[0];\n      let find = clientQuery.data?.contact_persons.find((contact) => contact.is_main === true);\n      if (find) {\n        setPayload((others) => ({ ...others, contact_person: find.id }));\n      } else {\n        setPayload((others) => ({ ...others, contact_person: person.id }));\n      }\n      setContactPersons(clientQuery.data?.contact_persons);\n    }\n  }, [clientQuery.data]);\n\n  useEffect(() => {\n    if (payload.managers) {\n      const uniqueManagers = payload.managers.reduce((acc, manager) => {\n        if (!acc.some(item => item.manager === manager.manager)) {\n          acc.push(manager);\n        }\n        return acc;\n      }, []);\n\n      const initialManagers = uniqueManagers.map(manager => ({\n        value: manager.manager,\n        has_photo: projectManagerQuery?.data?.find(user => user.id === manager.manager)?.has_photo,\n        label: projectManagerQuery?.data?.find(user => user.id === manager.manager)?.name || 'Unknown',\n        image: projectManagerQuery?.data?.find(user => user.id === manager.manager)?.photo || 'https://dev.memate.com.au/media/no_org.png'\n      }));\n      setSelectedManagers(initialManagers);\n    }\n  }, [payload.managers, projectManagerQuery.data]);\n\n  return (\n    <React.Fragment>\n      <div className='company-info text-left' style={{ background: '#fff', borderRadius: '4px', padding: '16px', marginBottom: '16px' }}>\n        <Row>\n          <Col md={8} style={{ borderRight: '1px solid #F2F4F7' }}>\n            <h3 style={{ color: '#344054', fontSize: '16px', fontWeight: '600' }}>Reference  <InfoCircle color=\"#667085\" size={16} /></h3>\n            {clientQuery.isLoading ? (\n              <Placeholder as=\"p\" animation=\"wave\">\n                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '120px', height: '20px' }} />\n              </Placeholder>\n            ) : isEditingReference ? (\n              <p>\n                <input\n                  type=\"text\"\n                  value={editedReference}\n                  onChange={handleDataChange}\n                  onBlur={handleSaveReference}\n                  autoFocus\n                  className=\"border rounded p-2 w-100\"\n                />\n              </p>\n            ) : (\n              <div>\n                <p style={{ color: '#475467', fontSize: '16px', fontWeight: '400', marginBottom: '16px', whiteSpace: \"pre-line\" }}>\n                  {payload.reference}\n                  <PencilSquare size={16} color=\"#106B99\" onClick={handleEditReference} className='ms-2' style={{ cursor: 'pointer' }} />\n                </p>\n              </div>\n            )}\n\n\n            <h3 style={{ color: '#344054', fontSize: '16px', fontWeight: '600' }}>Description</h3>\n            {clientQuery.isLoading ? (\n              <Placeholder as=\"p\" animation=\"wave\">\n                <Placeholder xs={12} bg=\"secondary\" className=\"rounded-0\" size=\"sm\" style={{ width: '120px', height: '20px' }} />\n              </Placeholder>\n            ) : isEditingDescription ? (\n              <p>\n                <textarea\n                  type=\"text\"\n                  value={editedDescription}\n                  onChange={handleDataChange}\n                  onBlur={handleSaveDescription}\n                  autoFocus\n                  className=\"border rounded p-2\"\n                  style={{ resize: 'none', width: '100%', height: '120px' }}\n                ></textarea>\n              </p>\n            ) : (\n              <div className='mb-4'>\n                <p style={{ color: '#475467', fontSize: '16px', fontWeight: '400', marginBottom: '0px', whiteSpace: \"pre-line\", maxHeight: '200px', overflow: 'auto' }}>\n                  {payload.description}\n                </p>\n                <PencilSquare size={16} color=\"#106B99\" onClick={handleEditDescription} className='ms-1' style={{ cursor: 'pointer' }} />\n              </div>\n            )}\n\n          </Col>\n          <Col md={4}>\n            <h3 style={{ color: '#344054', fontSize: '16px', fontWeight: '600' }}>Quote To  <InfoCircle color=\"#667085\" size={16} /></h3>\n            <Row>\n              {\n                clientQuery?.data?.is_business ?\n                  <QuoteToBusiness isLoading={clientQuery?.isLoading} data={clientQuery?.data} setPayload={setPayload} />\n                  :\n                  <QuoteToClient isLoading={clientQuery?.isLoading} data={clientQuery?.data} setPayload={setPayload} />\n              }\n            </Row>\n          </Col>\n        </Row>\n      </div>\n      <div className='DepartmentQuote mb-3' style={{ background: '#fff', borderRadius: '4px', padding: '16px', width: '100%' }}>\n\n        <DepartmentCalculationTable setTotals={setTotals} setPayload={setPayload} xero_tax={payload.xero_tax} defaultDiscount={clientQuery?.data?.category?.value || 0} preExistCalculation={preExistCalculation} preMerges={preExistMerges} refetch={refetch} setMergeDeletedItems={setMergeDeletedItems} />\n\n        <Row>\n          <Col md={6}>\n            <Form.Group className=\"mb-3 text-start note-textarea\" controlId=\"exampleForm.ControlTextarea1\">\n              <Form.Label style={{ color: '#475467', fontSize: '14px' }}>Notes on the quote/invoice</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                placeholder='Enter a description...'\n                value={payload.note || \"\"}\n                onChange={(e) => setPayload((data) => ({ ...data, note: e.target.value }))}\n                required\n                className='textarea'\n                style={{ height: '229px', padding: '12px 14px', resize: 'none' }}\n              />\n            </Form.Group>\n          </Col>\n          <Col md={6}>\n            <Row>\n              <Col>\n                <Row>\n                  <Col sm={12} className='text-start'>\n                    <div className='formgroupboxs mb-3 mt-1'>\n                      <label style={{ color: '#475467', fontSize: '14px', display: 'block', marginBottom: '6px' }}>Project Manager<span className='required'>*</span></label>\n                      <div className={`inputInfo px-0`} style={{ minHeight: '46px', height: 'fit-content', padding: '0px 14px' }}>\n                        <Select1\n                          placeholder=\"Select Manager\"\n                          className=\"basic-multi-select w-100 border-0\"\n                          closeMenuOnSelect={false}\n                          components={{ Option: CustomOption }}\n                          value={selectedManagers}\n                          onChange={(selected) => {\n                            const managers = selected\n                              ? [...new Map(selected.map((obj) => [obj.value, { manager: obj.value }])).values()]\n                              : [];\n\n                            setSelectedManagers(selected);\n                            setPayload((others) => ({ ...others, managers: managers || [] }));\n                          }}\n                          isMulti\n                          styles={{\n                            control: (styles) => ({\n                              ...styles, boxShadow: 'none',\n                            }),\n                            multiValueRemove: (styles) => {\n                              return {\n                                ...styles,\n                                ':hover': {\n                                  backgroundColor: '#fff',\n                                  cursor: 'pointer'\n                                },\n                              };\n                            },\n                            multiValue: (styles, { data }) => {\n                              return {\n                                ...styles,\n                                backgroundColor: '#fff',\n                                border: '1px solid #D0D5DD',\n                                borderRadius: '4px',\n                                ':before': {\n                                  borderRadius: '50%',\n                                  content: '\" \"',\n                                  backgroundImage: data?.has_photo ? `url(${data.image})` : 'url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjFlbSIgaGVpZ2h0PSIxZW0iIGZpbGw9IiM2NjcwODUiIGNsYXNzPSJiaSBiaS1wZXJzb24iPjxwYXRoIGQ9Ik04IDhhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTItM2EyIDIgMCAxIDEtNCAwIDIgMiAwIDEgMSA0IDBtNCA4YzAgMS0xIDEtMSAxSDMscy0xIDAtMS0xIDEtNCA2LTQgNiAzIDYgNG0tMS0uMDA0Yy0uMDAxLS4yNDYtLjE1NC0uOTg2LS44MzItMS42NjRDMTEuNTE2IDEwLjY4IDEwLjI4OSAxMCA4IDEwcy0zLjUxNi42OC00LjE2OCAxLjMzMmMtLjY3OC42NzgtLjgzIDEuNDE4LS44MzIgMS42NjR6Ij48L3BhdGg+PC9zdmc+\")',\n                                  backgroundSize: 'cover',\n                                  backgroundPosition: 'center',\n                                  backgroundRepeat: 'no-repeat',\n                                  display: 'block',\n                                  marginRight: 8,\n                                  position: 'relative',\n                                  top: '5px',\n                                  left: '5px',\n                                  height: 16,\n                                  width: 16,\n                                  border: '0.3px solid #101828'\n                                },\n                              };\n                            },\n                          }}\n                          options={projectManagerQuery?.data?.map((user) => ({\n                            value: user.id,\n                            label: user.name,\n                            image: user.photo,\n                            has_photo: user.has_photo\n                          }))}\n                        />\n                      </div>\n                    </div>\n\n                  </Col>\n                  <Col sm={12} className='text-start'>\n                    <div className=\"formgroupboxs mb-3\">\n                      <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>PO</label>\n                      <div className={`inputInfo px-0`} style={{ height: '46px' }}>\n                        <Form.Control\n                          required\n                          type=\"text\"\n                          placeholder=\"Purchase Order #\"\n                          value={payload?.purchase_order || \"\"}\n                          style={{ color: '#101828' }}\n                          className='w-100 m-0 border-0 no-border-outline'\n                          onChange={(e) => setPayload((data) => ({ ...data, purchase_order: e.target.value }))}\n                        />\n                      </div>\n                    </div>\n                  </Col>\n                  <Col sm={12} className='text-start'>\n                    <Form.Group className=\"mb-3 mui-select-custom\">\n                      <Form.Label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Amounts are<span className='required'>*</span></Form.Label>\n                      <FormControl sx={{ m: 0, minWidth: `100%`, color: '#101828' }}>\n                        <Select\n                          value={payload?.xero_tax || \"\"}\n                          onChange={(e) => setPayload((data) => ({ ...data, xero_tax: e.target.value }))}\n                          displayEmpty\n                          inputProps={{ 'aria-label': 'Without label' }}\n                          IconComponent={ChevronDown}\n                        >\n                          <MenuItem value={\"ex\"}>Tax exclusive</MenuItem>\n                          <MenuItem value={\"in\"}>Tax Inclusive</MenuItem>\n                          <MenuItem value={\"no\"}>No tax</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Form.Group>\n                  </Col>\n                </Row>\n              </Col>\n              <Col>\n                <Row>\n                  <Col sm={12} className='quoteInvoice'>\n                    <div className=\"radio-buttons mt-4 pt-3\">\n                      <CustomRadioButton\n                        label={<><b>Request Payment </b> <span> Create an invoice requesting <br></br>payment on a specific date</span></>}\n                        name=\"payment\"\n                        value=\"request\"\n                        checked={paymentCollection === 'request'}\n                        onChange={() => setPaymentCollection(\"request\")}\n                      />\n                      <CustomRadioButton\n                        label={<><b>Autocharge Customer </b> <span> Automatically charge a payment<br></br> method on file</span></>}\n                        name=\"payment\"\n                        value=\"auto\"\n                        checked={paymentCollection === 'auto'}\n                        onChange={() => setPaymentCollection(\"auto\")}\n                      />\n                    </div>\n                  </Col>\n                  <Col sm={12}>\n                    <div className=\"toggle-switch-wrap\">\n                      <label className=\"toggle-switch\">\n                        <input\n                          type=\"checkbox\"\n                          checked={Boolean(payload.display_discount)}\n                          onChange={(e) => setPayload((prevPayload) => ({\n                            ...prevPayload,\n                            display_discount: e.target.checked\n                          }))}\n                        />\n                        <span className=\"switch\" />\n                      </label>\n                      <em>Display Discounts</em>\n                    </div>\n                  </Col>\n                </Row>\n              </Col>\n            </Row>\n          </Col>\n        </Row>\n      </div>\n\n      {quoteType === 'Recurring' &&\n        <div style={{ background: '#fff', borderRadius: '4px', padding: '16px', width: '100%' }} >\n          <h3 style={{ color: 'rgb(52, 64, 84)', fontSize: '16px', fontWeight: '600', textAlign: 'left' }}>\n            Recurring Details {\" \"}\n            {['top'].map((placement) => (\n              <OverlayTrigger\n                key={placement}\n                placement={placement}\n                overlay={\n                  <Tooltip className='TooltipOverlay width-300' id={`tooltip-${placement}`}>\n                    <div className='text-start'>\n                      1. Daily - 15 Upfront <br />\n                      2. Weekly - Day of the Week - 5 Upfront<br />\n                      3. Biweekly - Day of the week - 4 Upfront<br />\n                      4. Monthly - Date - 3 Upfront<br />\n                      5. Last Day of the Month - Date - 3 Upfront<br />\n                      6. Quarterly - Date - 4 Upfront<br />\n                      7. Yearly - 2 Upfront\n                    </div>\n\n                  </Tooltip>\n                }\n              >\n                <Button className='ms-1 bg-transparent border-0 p-0'><InfoCircle size={16} color=\"#667085\" /> </Button>\n              </OverlayTrigger>\n            ))}\n          </h3>\n\n          <div className='d-flex align-items-center gap-3'>\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px', display: 'block' }}>Frequency <span className='required'>*</span></label>\n              <Dropdown\n                style={{ height: '46px',  minWidth: '250px', maxWidth: '250px'  }}\n                value={payload?.recurring?.frequency || null}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, frequency: e.value } }))}\n                options={[\n                  { label: \"Daily\", value: \"D\" },\n                  { label: \"Weekly\", value: \"W\" },\n                  { label: \"Biweekly\", value: \"B\" },\n                  { label: \"Monthly\", value: \"M\" },\n                  { label: \"Last Day of the Month\", value: \"L\" },\n                  { label: \"Quarterly\", value: \"Q\" },\n                  { label: \"Yearly\", value: \"Y\" },\n                ]}\n                className=\"w-100 outline-none\"\n                placeholder=\"Select frequency\"\n                filterInputAutoFocus={true}\n              />\n            </div>\n\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Start <span className='required'>*</span></label>\n              <Calendar\n                value={payload?.recurring?.start_date || null}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, start_date: e.value } }))}\n                showButtonBar\n                placeholder='DD/MM/YY'\n                dateFormat=\"dd/mm/yy\"\n                locale=\"en\"\n                style={{ height: '46px' }}\n                className='w-100 outline-none border rounded'\n              />\n            </div>\n\n            <div className=\"formgroupboxs mb-3 text-start\">\n              <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>End <span className='required'>*</span></label>\n              <Dropdown\n                value={payload?.recurring?.end_by}\n                onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, end_by: e.value } }))}\n                options={[\n                  { label: \"No end\", value: 0 },\n                  { label: \"Number of Occurrences\", value: 2 },\n                  { label: \"By date\", value: 1 },\n                ]}\n                style={{ height: '46px', minWidth: '260px' }}\n                className=\"w-100 outline-none\"\n                placeholder=\"Select an end\"\n                filterInputAutoFocus={true}\n              />\n            </div>\n\n            {\n              payload?.recurring?.end_by === 2 ?\n                <div className=\"formgroupboxs mb-3 text-start\">\n                  <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>Number of Occurrences <span className='required'>*</span></label>\n                  <InputNumber\n                    value={payload?.recurring?.occurrences || 0}\n                    onValueChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, occurrences: e.target.value } }))}\n                    style={{ height: '46px' }}\n                    placeholder='Enter number of occurrences'\n                    inputStyle={{ width: '80px' }}\n                    className='w-100 outline-none border rounded'\n                  />\n                </div>\n                : payload?.recurring?.end_by === 1 ?\n                  <div className=\"formgroupboxs mb-3 text-start\">\n                    <label style={{ color: '#475467', fontSize: '14px', marginBottom: '6px' }}>By Date <span className='required'>*</span></label>\n                    <Calendar\n                      value={payload?.recurring?.end_date || null}\n                      onChange={(e) => setPayload((data) => ({ ...data, recurring: { ...data?.recurring, end_date: e.value } }))}\n                      showButtonBar\n                      placeholder='DD/MM/YY'\n                      dateFormat=\"dd/mm/yy\"\n                      locale=\"en\"\n                      style={{ height: '46px' }}\n                      className='w-100 outline-none border rounded'\n                    />\n                  </div>\n                  : null\n            }\n          </div>\n        </div>\n      }\n\n    </React.Fragment>\n  );\n});\n\nexport default DepartmentQuote;","// extracted by mini-css-extract-plugin\nexport default {\"iconStyle\":\"create-proposal_iconStyle__Q0cmV\",\"headerTitle\":\"create-proposal_headerTitle__vMyBv\",\"customLabel\":\"create-proposal_customLabel__vKXkN\",\"templateInfo\":\"create-proposal_templateInfo__ce6V9\",\"dropdownSelect\":\"create-proposal_dropdownSelect__uAoBl\",\"accordion\":\"create-proposal_accordion__WM+iT\",\"error\":\"create-proposal_error__QxGLm\",\"p-accordion-content\":\"create-proposal_p-accordion-content__om9Aa\",\"uploadBox\":\"create-proposal_uploadBox__KxAAF\",\"imageBox\":\"create-proposal_imageBox__-Eh-d\",\"uploadButton\":\"create-proposal_uploadButton__jHShw\",\"uploadText\":\"create-proposal_uploadText__mWPJf\",\"trashBox\":\"create-proposal_trashBox__A3WDp\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"file-uploader_title__MJFJ7\",\"previewSection\":\"file-uploader_previewSection__ot4jI\",\"previewBox\":\"file-uploader_previewBox__KC4if\",\"previewBoxImg1\":\"file-uploader_previewBoxImg1__rKP04\",\"previewBoxImg2\":\"file-uploader_previewBoxImg2__7XwSP\",\"previewBoxImg3\":\"file-uploader_previewBoxImg3__7luuQ\",\"previewBoxImg4\":\"file-uploader_previewBoxImg4__EcGdL\",\"previewBoxImg5\":\"file-uploader_previewBoxImg5__2ZZPh\",\"previewActions\":\"file-uploader_previewActions__r3LWm\",\"label\":\"file-uploader_label__pWhYK\",\"label2\":\"file-uploader_label2__N-JEM\"};","import { nanoid } from \"nanoid\";\n\nexport function base64ToBlob(base64, mime) {\n    const byteString = atob(base64.split(',')[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type: mime });\n}\n\nexport const base64ToFile = (base64String) => {\n    const photoHintId = nanoid(6);\n    const fileName = `${photoHintId}.jpg`;\n    const byteString = atob(base64String.split(',')[1]); // Decode Base64 string\n    const mimeString = base64String.split(',')[0].split(':')[1].split(';')[0]; // Get MIME type\n\n    const arrayBuffer = new ArrayBuffer(byteString.length);\n    const uint8Array = new Uint8Array(arrayBuffer);\n\n    for (let i = 0; i < byteString.length; i++) {\n        uint8Array[i] = byteString.charCodeAt(i);\n    }\n\n    return new File([uint8Array], fileName, { type: mimeString });\n};","import React, { useCallback, useEffect, useState } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport { ArrowClockwise, CloudUpload } from 'react-bootstrap-icons';\nimport { useDropzone } from 'react-dropzone';\nimport Cropper from 'react-easy-crop';\nimport clsx from 'clsx';\nimport Form from 'react-bootstrap/Form';\nimport { toast } from 'sonner';\nimport styles from './file-uploader.module.scss';\nimport { base64ToBlob } from './utils';\n\nconst FileUploader = ({ show, setShow, setPhoto, additionalDesign, shape=\"rect\" }) => {\n    const [files, setFiles] = useState([]);\n    const [crop, setCrop] = useState({ x: 0, y: 0 });\n    const [zoom, setZoom] = useState(1);\n    const [rotation, setRotation] = useState(0);\n    const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);\n    const [croppedImages, setCroppedImages] = useState({});\n\n    const handleClose = () => setShow(false);\n\n    const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\n        setCroppedAreaPixels(croppedAreaPixels);\n    }, []);\n\n    const getCroppedImg = useCallback(async () => {\n        if (!files.length || !croppedAreaPixels) return;\n\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n\n        const img = new Image();\n        img.src = files[0].preview;\n        await new Promise((resolve) => (img.onload = resolve));\n\n        // Set canvas dimensions to the cropped area's dimensions\n        canvas.width = croppedAreaPixels.width;\n        canvas.height = croppedAreaPixels.height;\n\n        // Translate canvas to center to rotate around the center\n        ctx.translate(canvas.width / 2, canvas.height / 2);\n        ctx.rotate((rotation * Math.PI) / 180);\n        ctx.translate(-canvas.width / 2, -canvas.height / 2);\n\n        ctx.drawImage(\n            img,\n            croppedAreaPixels.x,\n            croppedAreaPixels.y,\n            croppedAreaPixels.width,\n            croppedAreaPixels.height,\n            0,\n            0,\n            croppedAreaPixels.width,\n            croppedAreaPixels.height\n        );\n\n        const base64Image = canvas.toDataURL('image/jpeg');\n        return base64Image;\n    }, [files, croppedAreaPixels, rotation]);\n\n    const generateCroppedImages = async () => {\n        const croppedImage = await getCroppedImg();\n        if (croppedImage) {\n            setCroppedImages({\n                img2: croppedImage,\n                img3: croppedImage,\n                img4: croppedImage,\n                img5: croppedImage,\n            });\n        }\n    };\n\n    useEffect(() => {\n        generateCroppedImages();\n    }, [zoom, crop, rotation, files, croppedAreaPixels]);\n\n    const {\n        getRootProps,\n        getInputProps\n    } = useDropzone({\n        maxFiles: 1,\n        accept: {\n            'image/*': []\n        },\n        onDrop: acceptedFiles => {\n            setFiles(acceptedFiles.map(file => Object.assign(file, {\n                preview: URL.createObjectURL(file)\n            })));\n        }\n    });\n\n    const remove = (e) => {\n        e.stopPropagation();\n        setFiles([]);\n        setCroppedImages({});\n        setShow(false);\n    };\n\n    const rotateImage = () => {\n        setRotation((prevRotation) => (prevRotation + 90) % 360);\n    };\n\n    const handleImage = async () => {\n        const croppedImageBase64 = await getCroppedImg();\n        if (!croppedImageBase64) return toast.error('Please select a photo');\n        const croppedImageBlob = base64ToBlob(croppedImageBase64, 'image/jpeg');\n        setPhoto({ croppedImageBase64, croppedImageBlob });\n        setShow(false);\n        setFiles([]);\n        setCroppedImages({});\n    };\n\n    return (\n        <Modal style={{ zIndex: 1111 }} show={show} centered onHide={handleClose} onShow={generateCroppedImages}>\n            <Modal.Header closeButton>\n                <Modal.Title>\n                    <span className={`${styles.title}`}>Edit Photo</span>\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                {additionalDesign}\n                <div className={`${styles.previewSection}`}>\n                    <div className={`${styles.previewBox}`}>\n                        <div className={clsx(styles.previewBoxImg1, shape === 'round' ? 'rounded-circle' : '')}>\n                            <Cropper\n                                image={files.length > 0 ? files[0].preview : null}\n                                crop={crop}\n                                zoom={zoom}\n                                cropShape={shape}\n                                rotation={rotation}\n                                onCropChange={setCrop}\n                                onZoomChange={setZoom}\n                                onCropComplete={onCropComplete}\n                                aspect={3/2} // or remove this if you want a flexible aspect ratio\n                                restrictPosition={false} // Allow full movement within the bounds\n                                style={{\n                                    containerStyle: {\n                                        width: '100%',\n                                        height: '100%',\n                                        position: 'relative',\n                                    },\n                                    cropAreaStyle: {\n                                        width: '100%',\n                                        height: '100%',\n                                    },\n                                    mediaStyle: {\n                                        width: '100%',\n                                        height: '100%',\n                                        objectFit: 'contain',\n                                    },\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div className={`${styles.previewActions}`}>\n                        <Form.Group>\n                            <Form.Label className={`${styles.label}`}>Zoom</Form.Label>\n                            <Form.Range\n                                value={zoom}\n                                min={1}\n                                max={3}\n                                step={0.1}\n                                className='custom-range'\n                                onChange={(e) => setZoom(e.target.value)}\n                            />\n                        </Form.Group>\n                        <div className='d-flex align-item-center pt-4 ms-4' style={{ gap: '8px' }}>\n                            <Button className='text-button' onClick={rotateImage}>\n                                <ArrowClockwise color='#106B99' size={24} />\n                                Rotate\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n\n                <div {...getRootProps({ className: 'dropzone d-flex justify-content-center align-items-center flex-column' })} style={{ width: '100%', height: '126px', background: '#fff', borderRadius: '4px', border: '1px solid #EAECF0', marginTop: '16px' }}>\n                    <input {...getInputProps()} />\n                    <button type='button' className='d-flex justify-content-center align-items-center' style={{ width: '40px', height: '40px', border: '1px solid #EAECF0', background: '#fff', borderRadius: '8px', marginBottom: '16px' }}>\n                        <CloudUpload />\n                    </button>\n                    <p className='mb-0' style={{ color: '#475467', fontSize: '14px' }}><span style={{ color: '#106B99', fontWeight: '600' }}>Click to upload</span> or drag and drop</p>\n                    <span style={{ color: '#475467', fontSize: '12px' }}>SVG, PNG, JPG or GIF (max. 800x400px)</span>\n                </div>\n            </Modal.Body>\n            <Modal.Footer className='d-flex justify-content-end'>\n                <Button className='outline-button' onClick={remove}>Cancel</Button>\n                <Button className='solid-button' onClick={handleImage}>Save Photo</Button>\n            </Modal.Footer>\n        </Modal>\n    );\n};\n\nexport default FileUploader;\n","// extracted by mini-css-extract-plugin\nexport default {\"headerTitle\":\"send-proposal-email_headerTitle__Z8dTz\",\"customLabel\":\"send-proposal-email_customLabel__BN+xG\",\"templateInfo\":\"send-proposal-email_templateInfo__fabRO\",\"bag\":\"send-proposal-email_bag__a-GeD\",\"lable\":\"send-proposal-email_lable__PQY4a\",\"dropdownSelect\":\"send-proposal-email_dropdownSelect__WENZ5\",\"autoCompleteBox\":\"send-proposal-email_autoCompleteBox__la62D\",\"AutoComplete\":\"send-proposal-email_AutoComplete__55Bdi\",\"bcc\":\"send-proposal-email_bcc__G5naH\",\"box\":\"send-proposal-email_box__CiEmC\",\"active\":\"send-proposal-email_active__ERNoo\",\"inputBox\":\"send-proposal-email_inputBox__-sHnD\"};","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { InfoCircle } from 'react-bootstrap-icons';\nimport { useQuery } from \"@tanstack/react-query\";\nimport clsx from 'clsx';\nimport { AutoComplete } from \"primereact/autocomplete\";\nimport { Dialog } from \"primereact/dialog\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { Editor } from \"primereact/editor\";\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from \"primereact/inputtext\";\nimport { OverlayPanel } from 'primereact/overlaypanel';\nimport { ProgressSpinner } from \"primereact/progressspinner\";\nimport style from \"./send-proposal-email.module.scss\";\nimport { getEmail, getEmailTemplates, getOutgoingEmail, getSignatureTemplates } from '../../APIs/email-template';\n\nconst headerElement = (\n    <div className={`${style.modalHeader}`}>\n        <div className=\"w-100 d-flex align-items-center gap-2\">\n            <span className={`white-space-nowrap mt-2 mb-2 ${style.headerTitle}`}>\n                Send a Proposal\n            </span>\n        </div>\n    </div>\n);\n\nconst renderHeader = () => (\n    <span className=\"ql-formats\">\n        <button className=\"ql-bold\" aria-label=\"Bold\"></button>\n        <button className=\"ql-italic\" aria-label=\"Italic\"></button>\n        <button className=\"ql-underline\" aria-label=\"Underline\"></button>\n        <button className=\"ql-strike\" aria-label=\"Strikethrough\"></button>\n        <button className=\"ql-blockquote\" aria-label=\"Blockquote\"></button>\n        <button\n            className=\"ql-list\"\n            value=\"ordered\"\n            aria-label=\"Ordered List\"\n        ></button>\n        <button\n            className=\"ql-list\"\n            value=\"bullet\"\n            aria-label=\"Bullet List\"\n        ></button>\n        <button className=\"ql-align\" value=\"\" aria-label=\"Align Left\"></button>\n        <button\n            className=\"ql-align\"\n            value=\"center\"\n            aria-label=\"Align Center\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"right\"\n            aria-label=\"Align Right\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"justify\"\n            aria-label=\"Justify\"\n        ></button>\n        <button className=\"ql-link\" aria-label=\"Insert Link\"></button>\n        <button className=\"ql-image\" aria-label=\"Insert Image\"></button>\n        <button className=\"ql-code-block\" aria-label=\"Code Block\"></button>\n    </span>\n);\nconst header = renderHeader();\n\nconst SendProposalEmailForm = ({ show, setShow, contactPersons, setPayload, save }) => {\n    const op = useRef(null);\n    const profileData = JSON.parse(window.localStorage.getItem('profileData') || '{}');\n    const [from, setFrom] = useState('');\n    const [to, setTo] = useState([]);\n    const [cc, setCC] = useState([]);\n    const [bcc, setBCC] = useState([]);\n    const [subject, setSubject] = useState(null);\n    const [text, setText] = useState(null);\n    const [signature, setSignature] = useState(null);\n\n    const [errors, setErrors] = useState({});\n    const [filteredEmails, setFilteredEmails] = useState([]);\n    const autoCompleteRef = useRef(null);\n    const autoCompleteRef2 = useRef(null);\n    const autoCompleteRef3 = useRef(null);\n    const [showCC, setShowCC] = useState(false);\n    const [showBCC, setShowBCC] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const handleClose = () => setShow(false);\n\n    // Email validation function\n    const isValidEmail = useCallback((email) => {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email.trim());\n    }, []);\n\n    // Validate array of emails\n    const validateEmailArray = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return true; // Empty array is valid\n        return emailArray.every(email => isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Get invalid emails from array\n    const getInvalidEmails = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return [];\n        return emailArray.filter(email => !isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Clean email array by removing invalid emails\n    const cleanEmailArray = useCallback((emailArray) => {\n        if (!emailArray || emailArray.length === 0) return [];\n        return emailArray.filter(email => isValidEmail(email));\n    }, [isValidEmail]);\n\n    // Validate and clean all email fields\n    const validateAndCleanAllEmails = useCallback(() => {\n        let hasErrors = false;\n        \n        // Check TO emails\n        if (to.length > 0) {\n            const invalidToEmails = getInvalidEmails(to);\n            if (invalidToEmails.length > 0) {\n                console.log('Found invalid TO emails:', invalidToEmails);\n                setTo(cleanEmailArray(to));\n                hasErrors = true;\n            }\n        }\n        \n        // Check CC emails\n        if (cc.length > 0) {\n            const invalidCcEmails = getInvalidEmails(cc);\n            if (invalidCcEmails.length > 0) {\n                console.log('Found invalid CC emails:', invalidCcEmails);\n                setCC(cleanEmailArray(cc));\n                hasErrors = true;\n            }\n        }\n        \n        // Check BCC emails\n        if (bcc.length > 0) {\n            const invalidBccEmails = getInvalidEmails(bcc);\n            if (invalidBccEmails.length > 0) {\n                console.log('Found invalid BCC emails:', invalidBccEmails);\n                setBCC(cleanEmailArray(bcc));\n                hasErrors = true;\n            }\n        }\n        \n        return !hasErrors; // Return true if no errors found\n    }, [to, cc, bcc, getInvalidEmails, cleanEmailArray]);\n\n    const [emailTemplateId, setEmailTemplatedId] = useState(null);\n    const emailTemplateQuery = useQuery({\n        queryKey: [\"emailTemplate\"],\n        queryFn: getEmailTemplates,\n    });\n    const signatureQuery = useQuery({\n        queryKey: [\"getSignatureTemplates\"],\n        queryFn: getSignatureTemplates,\n    });\n    const outgoingEmailTemplateQuery = useQuery({\n        queryKey: [\"getOutgoingEmail\"],\n        queryFn: getOutgoingEmail,\n    });\n    const emailQuery = useQuery({\n        queryKey: [\"emailQuery\", emailTemplateId],\n        queryFn: () => getEmail(emailTemplateId),\n        enabled: !!emailTemplateId,\n        retry: 1,\n    });\n\n    useEffect(() => {\n        if (outgoingEmailTemplateQuery?.data) {\n            if (outgoingEmailTemplateQuery?.data?.outgoing_email && outgoingEmailTemplateQuery?.data?.outgoing_email_verified)\n                setFrom(outgoingEmailTemplateQuery?.data?.outgoing_email);\n            else\n                setFrom('no-reply@memate.com.au');\n        }\n\n        if (!emailTemplateId && emailTemplateQuery?.data) {\n            const activeTemplateId = emailTemplateQuery?.data?.find((template) => template.type === 'Proposal');\n            if (activeTemplateId?.id) setEmailTemplatedId(activeTemplateId.id);\n        }\n\n    }, [emailQuery, outgoingEmailTemplateQuery, emailTemplateId, emailTemplateQuery?.data]);\n\n    const onSubmit = async () => {\n        let errorCount = 0;\n        setErrors({});\n\n        // First, validate and clean all email arrays\n        const allEmailsValid = validateAndCleanAllEmails();\n        if (!allEmailsValid) {\n            console.log('Some emails were invalid and have been cleaned');\n        }\n\n        if (!from) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, from: true }));\n        }\n\n        if (to?.length === 0) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, to: true }));\n        } else if (!validateEmailArray(to)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(to);\n            console.log('Invalid TO emails:', invalidEmails);\n            setErrors((others) => ({ ...others, to: true, toInvalid: true, invalidToEmails: invalidEmails }));\n        }\n\n        if (cc.length > 0 && !validateEmailArray(cc)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(cc);\n            console.log('Invalid CC emails:', invalidEmails);\n            setErrors((others) => ({ ...others, cc: true, invalidCcEmails: invalidEmails }));\n        }\n\n        if (bcc.length > 0 && !validateEmailArray(bcc)) {\n            ++errorCount;\n            const invalidEmails = getInvalidEmails(bcc);\n            console.log('Invalid BCC emails:', invalidEmails);\n            setErrors((others) => ({ ...others, bcc: true, invalidBccEmails: invalidEmails }));\n        }\n\n        if (!subject) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, subject: true }));\n        }\n\n        if (!text) {\n            ++errorCount;\n            setErrors((others) => ({ ...others, text: true }));\n        }\n\n        if (errorCount) return;\n        setIsLoading(true);\n        await save();\n        setIsLoading(false);\n    };\n\n    const footerContent = (\n        <div className=\"d-flex justify-content-end gap-2\">\n            <Button className=\"outline-button\" onClick={() => setShow(false)}>\n                Cancel\n            </Button>\n            <Button className=\"solid-button\" disabled={isLoading} onClick={onSubmit}>\n                Send{\" \"}\n                {isLoading && (\n                    <ProgressSpinner\n                        style={{ width: \"20px\", height: \"20px\", color: \"#fff\" }}\n                    />\n                )}\n            </Button>\n        </div>\n    );\n\n    const search = (event) => {\n        const query = event?.query?.toLowerCase() || '';\n        let emails = contactPersons.map((data) => (data.email))?.filter(email => email);\n        emails = emails.filter((email) => !to.includes(email));\n        emails = emails.filter((email) => !cc.includes(email));\n        emails = emails.filter((email) => !bcc.includes(email));\n\n        emails = emails.filter((email) =>\n            email.toLowerCase().includes(query)\n        );\n\n        setFilteredEmails(emails);\n    };\n\n    const onInputChange = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setTo((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length && validEmails.length > 0) {\n                setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onInputChange2 = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setCC((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length) {\n                setErrors((others) => ({ ...others, cc: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onInputChange3 = (e) => {\n        const currentValue = e.target.value;\n        if (currentValue.includes(',') || e.key === 'Enter') {\n            const emails = currentValue.split(/[\\s,]+/).filter((email) => email);\n            // Validate emails before adding\n            const validEmails = emails.filter(email => isValidEmail(email));\n            setBCC((prev) => [...new Set([...prev, ...validEmails])]);\n            // Clear error if emails are valid\n            if (validEmails.length === emails.length) {\n                setErrors((others) => ({ ...others, bcc: false }));\n            }\n            e.target.value = '';\n        }\n    };\n\n    const onFocus = () => {\n        search();\n        if (autoCompleteRef.current) autoCompleteRef.current.show();\n    };\n\n    const onFocus2 = () => {\n        search();\n        if (autoCompleteRef2.current) autoCompleteRef2.current.show();\n    };\n\n    const onFocus3 = () => {\n        search();\n        if (autoCompleteRef3.current) autoCompleteRef3.current.show();\n    };\n\n    useEffect(() => {\n        if (contactPersons?.length) {\n            let emails = contactPersons.map((data) => (data.email))?.filter(email => email);\n            setFilteredEmails(emails);\n        }\n    }, [contactPersons]);\n\n    // Auto-clean invalid emails from arrays\n    useEffect(() => {\n        if (to.length > 0) {\n            const invalidToEmails = getInvalidEmails(to);\n            if (invalidToEmails.length > 0) {\n                console.log('Auto-cleaning invalid TO emails:', invalidToEmails);\n                const validEmails = cleanEmailArray(to);\n                setTo(validEmails);\n            }\n        }\n    }, [to, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        if (cc.length > 0) {\n            const invalidCcEmails = getInvalidEmails(cc);\n            if (invalidCcEmails.length > 0) {\n                console.log('Auto-cleaning invalid CC emails:', invalidCcEmails);\n                const validEmails = cleanEmailArray(cc);\n                setCC(validEmails);\n            }\n        }\n    }, [cc, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        if (bcc.length > 0) {\n            const invalidBccEmails = getInvalidEmails(bcc);\n            if (invalidBccEmails.length > 0) {\n                console.log('Auto-cleaning invalid BCC emails:', invalidBccEmails);\n                const validEmails = cleanEmailArray(bcc);\n                setBCC(validEmails);\n            }\n        }\n    }, [bcc, getInvalidEmails, cleanEmailArray]);\n\n    useEffect(() => {\n        setPayload((prev) => ({\n            ...prev,\n            subject: subject,\n            email_body: text,\n            from_email: from,\n            to: to?.toString(),\n            ...(cc.length > 0 && { cc: cc.toString() }),\n            ...(bcc.length > 0 && { bcc: bcc.toString() }),\n            ...(signature && { signature: signature })\n        }));\n    }, [subject, text, from, to, cc, bcc, signature, setPayload]);\n\n    useEffect(() => {\n        setText(emailQuery?.data?.body || \"\");\n        setSubject(emailQuery?.data?.subject);\n        setErrors((others) => ({ ...others, subject: false }));\n        setErrors((others) => ({ ...others, text: false }));\n    }, [emailQuery?.data]);\n\n    useEffect(() => {\n        if (signatureQuery?.data) {\n            setSignature(signatureQuery?.data?.find((template) => template.id === profileData.email_signature)?.id);\n        }\n    }, [signatureQuery?.data, profileData.email_signature]);\n\n    return (\n        <Dialog\n            visible={show}\n            modal={true}\n            header={headerElement}\n            footer={footerContent}\n            className={`${style.modal} custom-modal`}\n            style={{ width: \"896px\" }}\n            onHide={handleClose}\n        >\n            <Row>\n                <Col sm={6} className='mb-3'>\n                    <div style={{ position: 'relative' }}>\n                        <label className={clsx(style.customLabel)}>FROM</label>\n                        <Dropdown\n                            options={\n                                (outgoingEmailTemplateQuery && outgoingEmailTemplateQuery?.data && ([{\n                                    value: outgoingEmailTemplateQuery?.data?.outgoing_email,\n                                    label: `${outgoingEmailTemplateQuery?.data?.outgoing_email}`,\n                                }])) ||\n                                []\n                            }\n                            className={clsx(\n                                style.dropdownSelect,\n                                \"dropdown-height-fixed w-100\"\n                            )}\n                            style={{ height: \"46px\", paddingLeft: '60px' }}\n                            placeholder=\"Select from email\"\n                            onChange={(e) => {\n                                setFrom(e.value);\n                                setErrors((others) => ({ ...others, from: false }));\n                            }}\n                            value={from}\n                            filterInputAutoFocus={true}\n                        />\n                    </div>\n                    {errors?.from && (\n                        <p className=\"error-message mb-0\">{\"From email is required\"}</p>\n                    )}\n                </Col>\n                <Col sm={6} className='mb-3'>\n                    <div style={{ position: 'relative' }}>\n                        <label className={clsx(style.customLabel)}>Templates</label>\n                        <Dropdown\n                            options={\n                                (emailTemplateQuery &&\n                                    emailTemplateQuery.data?.map((emailTemplate) => ({\n                                        value: emailTemplate.id,\n                                        label: `${emailTemplate.name}`,\n                                    }))) ||\n                                []\n                            }\n                            className={clsx(\n                                style.dropdownSelect,\n                                \"dropdown-height-fixed w-100\"\n                            )}\n                            style={{ height: \"46px\", paddingLeft: '88px' }}\n                            placeholder=\"Select template\"\n                            onChange={(e) => {\n                                setEmailTemplatedId(e.value);\n                            }}\n                            value={emailTemplateId}\n                            loading={emailTemplateQuery?.isFetching}\n                            filterInputAutoFocus={true}\n                        />\n                        <div className={style.templateInfo} onClick={(e) => op.current.toggle(e)}>\n                            <InfoCircle size={16} color='#737374ff' />\n                        </div>\n                        <OverlayPanel ref={op}>\n                            <p className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>Choose from your existing templates here.</p>\n                            <div className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>To edit or add new templates, go to<br /> Profile Settings &gt; Templates &gt; Proposal<br /> Templates.</div>\n                        </OverlayPanel>\n                    </div>\n                </Col>\n            </Row>\n            <Row>\n                <Col sm={12} className='mb-3'>\n                    <div className=\"d-flex gap-3 w-100\">\n                        <div style={{ position: 'relative' }} className={style.autoCompleteBox}>\n                            <div style={{ width: '50px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>TO</label>\n                            <AutoComplete\n                                ref={autoCompleteRef}\n                                value={to}\n                                completeMethod={search}\n                                onChange={(e) => {\n                                    setTo(e.value);\n                                    setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n                                }}\n                                multiple\n                                suggestions={filteredEmails}\n                                onClick={onFocus}\n                                onFocus={onFocus}\n                                onKeyUp={onInputChange}\n                                onBlur={(e) => {\n                                    const currentValue = e.target.value.trim();\n                                    if (currentValue) {\n                                        if (isValidEmail(currentValue)) {\n                                            setTo((prev) => [...new Set([...prev, currentValue])]);\n                                            setErrors((others) => ({ ...others, to: false, toInvalid: false }));\n                                        } else {\n                                            setErrors((others) => ({ ...others, toInvalid: true }));\n                                        }\n                                        e.target.value = '';\n                                    }\n                                }}\n                                className={clsx(style.AutoComplete, \"w-100\")}\n                                placeholder=\"TO\"\n                            />\n                        </div>\n                        <Button\n                            className={clsx(style.box, { [style.active]: showCC })}\n                            onClick={() => { setShowCC(!showCC); setCC([]); }}\n                        >\n                            CC\n                        </Button>\n                        <Button\n                            className={clsx(style.box, { [style.active]: showBCC })}\n                            onClick={() => { setShowBCC(!showBCC); setBCC([]); }}\n                        >\n                            BCC\n                        </Button>\n                    </div>\n                    {errors?.to && !errors?.toInvalid && (\n                        <p className=\"error-message mb-0\">{\"To email is required\"}</p>\n                    )}\n                    {errors?.toInvalid && (\n                        <div>\n                            <p className=\"error-message mb-0\">{\"Please enter valid email addresses for TO\"}</p>\n                            {errors?.invalidToEmails && errors.invalidToEmails.length > 0 && (\n                                <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                    Invalid emails: {errors.invalidToEmails.join(', ')}\n                                </p>\n                            )}\n                        </div>\n                    )}\n                </Col>\n                {\n                    showCC &&\n                    <Col sm={6} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <div style={{ width: '50px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>CC</label>\n                            <AutoComplete\n                                ref={autoCompleteRef2}\n                                value={cc}\n                                completeMethod={search}\n                                onChange={(e) => { \n                                    setCC(e.value);\n                                    setErrors((others) => ({ ...others, cc: false }));\n                                }}\n                                multiple\n                                suggestions={filteredEmails}\n                                onClick={onFocus2}\n                                onFocus={onFocus2}\n                                onKeyUp={onInputChange2}\n                                onBlur={(e) => {\n                                    const currentValue = e.target.value.trim();\n                                    if (currentValue) {\n                                        if (isValidEmail(currentValue)) {\n                                            setCC((prev) => [...new Set([...prev, currentValue])]);\n                                            setErrors((others) => ({ ...others, cc: false }));\n                                        } else {\n                                            setErrors((others) => ({ ...others, cc: true }));\n                                        }\n                                        e.target.value = '';\n                                    }\n                                }}\n                                className={clsx(style.AutoComplete, \"w-100\")}\n                                placeholder=\"CC\"\n                            />\n                        </div>\n                        {errors?.cc && (\n                            <div>\n                                <p className=\"error-message mb-0\">{\"Please enter valid email addresses for CC\"}</p>\n                                {errors?.invalidCcEmails && errors.invalidCcEmails.length > 0 && (\n                                    <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                        Invalid emails: {errors.invalidCcEmails.join(', ')}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </Col>\n                }\n\n                {\n                    showBCC && <Col sm={6} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <div style={{ width: '60px' }} className={style.bag}></div>\n                            <label className={clsx(style.customLabel)}>BCC</label>\n                            <AutoComplete\n                                ref={autoCompleteRef3}\n                                value={bcc}\n                                completeMethod={search}\n                                onChange={(e) => { \n                                    setBCC(e.value);\n                                    setErrors((others) => ({ ...others, bcc: false }));\n                                }}\n                                multiple\n                                suggestions={filteredEmails}\n                                onClick={onFocus3}\n                                onFocus={onFocus3}\n                                onKeyUp={onInputChange3}\n                                onBlur={(e) => {\n                                    const currentValue = e.target.value.trim();\n                                    if (currentValue) {\n                                        if (isValidEmail(currentValue)) {\n                                            setBCC((prev) => [...new Set([...prev, currentValue])]);\n                                            setErrors((others) => ({ ...others, bcc: false }));\n                                        } else {\n                                            setErrors((others) => ({ ...others, bcc: true }));\n                                        }\n                                        e.target.value = '';\n                                    }\n                                }}\n                                className={clsx(style.AutoComplete, style.bcc, \"w-100\")}\n                                placeholder=\"BCC\"\n                            />\n                        </div>\n                        {errors?.bcc && (\n                            <div>\n                                <p className=\"error-message mb-0\">{\"Please enter valid email addresses for BCC\"}</p>\n                                {errors?.invalidBccEmails && errors.invalidBccEmails.length > 0 && (\n                                    <p className=\"error-message mb-0 mt-1\" style={{ fontSize: '12px', color: '#dc3545' }}>\n                                        Invalid emails: {errors.invalidBccEmails.join(', ')}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </Col>\n                }\n                <Col sm={12} className='mb-2'>\n                    <div style={{ position: 'relative' }}>\n                        <div style={{ width: '60px' }} className={style.bag}></div>\n                        <label className={clsx(style.customLabel)}>SUBJECT</label>\n                        <IconField>\n                            <InputIcon>\n                                {emailQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                            </InputIcon>\n                            <InputText\n                                value={subject}\n                                className={clsx(style.inputBox, 'w-100')}\n                                style={{ paddingLeft: '100px' }}\n                                onChange={(e) => {\n                                    setSubject(e.target.value);\n                                    setErrors((others) => ({ ...others, subject: false }));\n                                }}\n                                placeholder=\"{Organization} | Quotation: {number} | {reference}\"\n                            />\n                        </IconField>\n                    </div>\n                    {errors?.subject && (\n                        <p className=\"error-message mb-0\">{\"Subject is required\"}</p>\n                    )}\n                </Col>\n                <Col sm={12} className='mb-3'>\n                    <div className=\"d-flex flex-column gap-1\" style={{ position: 'relative' }}>\n                        <label className={clsx(style.lable)}>Message</label>\n                        <InputIcon style={{ position: 'absolute', right: '15px', top: '40px', zIndex: 1 }}>\n                            {emailQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                        </InputIcon>\n                        <Editor\n                            style={{ minHeight: \"150px\" }}\n                            headerTemplate={header}\n                            value={text}\n                            placeholder='Enter a description...'\n                            onTextChange={(e) => {\n                                setText(e.htmlValue);\n                                setErrors((others) => ({ ...others, text: false }));\n                            }}\n                        />\n                    </div>\n                    {errors?.text && (\n                        <p className=\"error-message mb-0\">{\"Message is required\"}</p>\n                    )}\n                </Col>\n                <Col sm={12}>\n                    <div style={{ position: 'relative' }}>\n                        <label className={clsx(style.customLabel)}>Signature</label>\n                        <Dropdown\n                            options={\n                                (signatureQuery &&\n                                    signatureQuery.data?.map((template) => ({\n                                        value: template.id,\n                                        label: `${template.name}`,\n                                    }))) ||\n                                []\n                            }\n                            panelClassName='px880-dropdown-item'\n                            className={clsx(\n                                style.dropdownSelect,\n                                \"dropdown-height-fixed w-100\"\n                            )}\n                            style={{ height: \"46px\", paddingLeft: '88px' }}\n                            placeholder=\"Select signature\"\n                            onChange={(e) => {\n                                setSignature(e.value);\n                            }}\n                            value={signature}\n                            loading={signatureQuery?.isFetching}\n                            filterInputAutoFocus={true}\n                        />\n                    </div>\n                </Col>\n            </Row>\n        </Dialog>\n    );\n};\n\nexport default SendProposalEmailForm;","import React from 'react';\nimport SendProposalEmailForm from '../../../../../ui/send-proposal/send-proposal-email-form';\n\nconst SendProposal = ({ show, setShow, contactPersons, setPayload, onSubmit, handleClose }) => {\n  const save = async () => {\n    const res = await onSubmit('send');\n    return res;\n  };\n\n  return (\n    <SendProposalEmailForm show={show} setShow={setShow} contactPersons={contactPersons} setPayload={setPayload} save={save} handleOtherClose={handleClose} />\n  );\n};\n\nexport default SendProposal;","import React, { useEffect, useState } from 'react';\nimport { Button, Col, Row } from \"react-bootstrap\";\nimport { Check2Circle, CloudUpload, InfoCircle, PlusLg, Trash } from 'react-bootstrap-icons';\nimport { useParams } from 'react-router-dom';\nimport { useQuery } from \"@tanstack/react-query\";\nimport clsx from 'clsx';\nimport { nanoid } from 'nanoid';\nimport { Accordion, AccordionTab } from 'primereact/accordion';\nimport { Dialog } from \"primereact/dialog\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { IconField } from 'primereact/iconfield';\nimport { InputIcon } from 'primereact/inputicon';\nimport { InputText } from \"primereact/inputtext\";\nimport { OverlayPanel } from 'primereact/overlaypanel';\nimport { ProgressSpinner } from \"primereact/progressspinner\";\nimport { toast } from 'sonner';\nimport style from './create-proposal.module.scss';\nimport FileUploader from './file-uploader/file-uploader';\nimport { getProposalBySalesId, getProposalsTemplate, getProposalsTemplates } from '../../../../../APIs/email-template';\nimport { SunEditorComponent } from '../../../../../shared/ui/editor';\nimport SendProposal from '../send-proposal/send-proposal';\n\n\nconst headerElement = (\n    <div className={`${style.modalHeader}`}>\n        <div className=\"w-100 d-flex align-items-center gap-2\">\n            <b className={style.iconStyle}><Check2Circle size={24} color=\"#079455\" /></b>\n            <span className={`white-space-nowrap mt-2 mb-2 ${style.headerTitle}`}>\n                Proposal\n            </span>\n        </div>\n    </div>\n);\n\nconst renderHeader = () => (\n    <span className=\"ql-formats\">\n        <button className=\"ql-bold\" aria-label=\"Bold\"></button>\n        <button className=\"ql-italic\" aria-label=\"Italic\"></button>\n        <button className=\"ql-underline\" aria-label=\"Underline\"></button>\n        <button className=\"ql-strike\" aria-label=\"Strikethrough\"></button>\n        <button className=\"ql-blockquote\" aria-label=\"Blockquote\"></button>\n        <button\n            className=\"ql-list\"\n            value=\"ordered\"\n            aria-label=\"Ordered List\"\n        ></button>\n        <button\n            className=\"ql-list\"\n            value=\"bullet\"\n            aria-label=\"Bullet List\"\n        ></button>\n        <button className=\"ql-align\" value=\"\" aria-label=\"Align Left\"></button>\n        <button\n            className=\"ql-align\"\n            value=\"center\"\n            aria-label=\"Align Center\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"right\"\n            aria-label=\"Align Right\"\n        ></button>\n        <button\n            className=\"ql-align\"\n            value=\"justify\"\n            aria-label=\"Justify\"\n        ></button>\n        <button className=\"ql-link\" aria-label=\"Insert Link\"></button>\n        <button className=\"ql-image\" aria-label=\"Insert Image\"></button>\n        <button className=\"ql-code-block\" aria-label=\"Code Block\"></button>\n    </span>\n);\n\nconst header = renderHeader();\n\nconst CreateProposal = ({ show, setShow, refetch, contactPersons, isExist }) => {\n    const { unique_id } = useParams();\n    const op = React.useRef(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [isVisible, setIsVisible] = useState(false);\n    const [errors, setErrors] = useState({});\n    const [fileName, setFileName] = useState('');\n    const [showSendModal, setShowSendModal] = useState(false);\n    const [payload, setPayload] = useState({});\n\n    const [templateId, setTemplatedId] = useState(null);\n    const [sections, setSections] = useState([]);\n    const [image, setImage] = useState(null);\n\n    const proposalTemplateQuery = useQuery({\n        queryKey: [\"proposalTemplate\"],\n        queryFn: getProposalsTemplates,\n    });\n\n    const readProposalQuery = useQuery({\n        queryKey: [\"readProposal\", unique_id],\n        queryFn: () => getProposalBySalesId(unique_id),\n        enabled: !!unique_id && isExist,\n        retry: 0,\n    });\n\n    useEffect(() => {\n        if (readProposalQuery?.data) {\n            setTemplatedId(readProposalQuery?.data?.template);\n        }\n        if (!image && readProposalQuery?.data?.image) {\n            setImage({ croppedImageBase64: readProposalQuery?.data?.image });\n        }\n    }, [readProposalQuery?.data]);\n\n    const proposalQuery = useQuery({\n        queryKey: [\"getProposal\", templateId],\n        queryFn: () => getProposalsTemplate(templateId),\n        enabled: !!templateId,\n        retry: 0,\n    });\n    const sendProposalAction = () => {\n        // if (!templateId) return toast.error('Template is required');\n        if (!unique_id) return toast.error('Id not found');\n        let notdeletedSections = sections?.filter(section => !section.delete);\n        if (!notdeletedSections?.length) return toast.error('Please add proposal content');\n\n        const newErrors = {};\n        const sectionErrors = sections?.filter(section => !section.delete)?.map((section) => {\n            const sectionError = {};\n\n            if (!section.title) sectionError.title = true;\n            if (!section.description) sectionError.description = true;\n            return sectionError;\n        });\n        if (sectionErrors.some(sectionError => Object.keys(sectionError).length > 0)) {\n            newErrors.sections = sectionErrors;\n        }\n\n        // if (!image) {\n        //     newErrors.image = true;\n        // }\n\n        setErrors(newErrors);\n\n        if (Object.keys(newErrors).length === 0) {\n            setShow(false);\n            setShowSendModal(true);\n        }\n    };\n    const onSubmit = async (action) => {\n        // if (!templateId) return toast.error('Template is required');\n        if (!unique_id) return toast.error('Id not found');\n        let notdeletedSections = sections?.filter(section => !section.delete);\n        if (!notdeletedSections?.length) return toast.error('Please add proposal content');\n        setErrors({});\n\n        const newErrors = {};\n        const sectionErrors = sections?.filter(section => !section.delete)?.map((section) => {\n            const sectionError = {};\n\n            if (!section.title) sectionError.title = true;\n            if (!section.description) sectionError.description = true;\n            return sectionError;\n        });\n        if (sectionErrors.some(sectionError => Object.keys(sectionError).length > 0)) {\n            newErrors.sections = sectionErrors;\n        }\n\n        // if (!image) {\n        //     newErrors.image = true;\n        // }\n\n        setErrors(newErrors);\n        if (Object.keys(newErrors).length === 0) {\n            const formData = new FormData();\n\n            sections.forEach((section, index) => {\n                formData.append(`sections[${index}]title`, section.title);\n                formData.append(`sections[${index}]description`, section.description);\n                formData.append(`sections[${index}]delete`, !!section.delete);\n                if (readProposalQuery?.data && section.id) formData.append(`sections[${index}]id`, section.id);\n            });\n            if (templateId) formData.append('template', templateId);\n            else formData.append('template', \"\");\n\n            if (action === \"send\") {\n                formData.append('action', 'send');\n                formData.append('subject', payload?.subject);\n                formData.append('email_body', payload?.email_body);\n                formData.append('from_email', payload?.from_email);\n                formData.append('to', payload?.to);\n                if (payload?.cc) formData.append('cc', payload?.cc);\n                if (payload?.bcc) formData.append('bcc', payload?.bcc);\n            } else {\n                formData.append('action', 'create');\n            }\n\n            if (image?.croppedImageBlob) {\n                const photoHintId = nanoid(6);\n                formData.append('image', image?.croppedImageBlob, `${photoHintId}.jpg`);\n            }\n            const accessToken = localStorage.getItem(\"access_token\");\n\n            setIsLoading(true);\n            let method = \"POST\";\n            let URL = `${process.env.REACT_APP_BACKEND_API_URL}/proposals/new/${unique_id}/`;\n            if (readProposalQuery?.data) {\n                method = \"PUT\";\n                URL = `${process.env.REACT_APP_BACKEND_API_URL}/proposals/update/${unique_id}/`;\n            }\n            try {\n                setIsLoading(true);\n\n                const response = await fetch(URL, {\n                    method: method,\n                    headers: {\n                        'Authorization': `Bearer ${accessToken}`,\n                    },\n                    body: formData,\n                });\n\n                const data = await response.json();\n                setIsLoading(false);\n\n                if (response.ok) {\n                    handleClose();\n                    toast.success(`Proposal ${action === 'send' ? 'created and send' : 'created'} successfully!`);\n                    refetch();\n                    readProposalQuery.refetch();\n                    return \"success\";\n                } else {\n                    toast.error(`Failed to ${action === 'send' ? 'create and send' : 'create'} the proposal. Please try again.`);\n                    return \"error\";\n                }\n            } catch (error) {\n                setIsLoading(false);\n                console.error(\"Error creating proposal:\", error);\n                toast.error(`Failed to ${action === 'send' ? 'create and send' : 'create'} the proposal. Please try again.`);\n                return \"error\";\n            } finally {\n                setIsLoading(false);\n            }\n        }\n    };\n    const handleClose = () => {\n        setShow(false);\n        // setTemplatedId(null);\n        // setSections([]);\n        // setImage(null);\n        // setFileName('');\n        setShowSendModal(false);\n    };\n    const handleAddSection = () => {\n        setSections([...sections, { title: \"\", description: \"\" }]);\n    };\n    const handleDeleteSection = (index, id) => {\n        if (id) {\n            setSections((prevSections) =>\n                prevSections.map((section, i) =>\n                    i === index ? { ...section, delete: true } : section\n                )\n            );\n        } else {\n            setSections((prevSections) =>\n                prevSections.filter((section, i) => i !== index)\n            );\n        }\n    };\n    const handleImageUpload = (event) => {\n        const file = event.target.files[0];\n        if (file) {\n            setImage(file);\n            setFileName(file.name);\n        }\n    };\n    const footerContent = (\n        <div className='d-flex justify-content-between'>\n            <Button className='text-button text-danger' onClick={handleClose}>Cancel</Button>\n            <div className=\"d-flex justify-content-end gap-2\">\n                <Button className=\"btn info-button\" onClick={handleAddSection}>\n                    Add  New Section <PlusLg color='#106B99' />\n                </Button>\n                <Button className=\"outline-button\" disabled={isLoading} onClick={onSubmit}>\n                    Create & Save\n                    {isLoading && (\n                        <ProgressSpinner\n                            style={{ width: \"20px\", height: \"20px\", color: \"#fff\" }}\n                        />\n                    )}\n                </Button>\n                <Button className=\"solid-button\" onClick={sendProposalAction}>\n                    Send Proposal\n                </Button>\n            </div>\n        </div>\n    );\n\n    useEffect(() => {\n        if (templateId && templateId != readProposalQuery?.data?.template && proposalQuery?.data) {\n            setSections([\n                ...readProposalQuery?.data?.sections?.map(section => ({ ...section, delete: true })) || [],\n                ...proposalQuery?.data?.sections?.map(({ id, ...rest }) => ({ ...rest })) || []\n            ]);\n        } else if (templateId === readProposalQuery?.data?.template) {\n            setSections(readProposalQuery?.data?.sections);\n        }\n    }, [templateId, proposalQuery?.data, readProposalQuery?.data]);\n\n    return (\n        <>\n            <Dialog\n                visible={show}\n                modal={true}\n                header={headerElement}\n                footer={footerContent}\n                className={`${style.modal} custom-modal p-0`}\n                style={{ width: \"896px\" }}\n                onHide={handleClose}\n            >\n                <Row className='px-4 pt-4 border-bottom mb-3 bg-white'>\n                    <Col sm={12} className='mb-3'>\n                        <div style={{ position: 'relative' }}>\n                            <label className={clsx(style.customLabel)}>Templates</label>\n                            <Dropdown\n                                options={\n                                    (proposalTemplateQuery &&\n                                        proposalTemplateQuery.data?.map((template) => ({\n                                            value: template.id,\n                                            label: `${template.name}`,\n                                        }))) ||\n                                    []\n                                }\n                                className={clsx(\n                                    style.dropdownSelect,\n                                    \"dropdown-height-fixed w-100\"\n                                )}\n                                style={{ height: \"46px\", paddingLeft: '88px' }}\n                                placeholder=\"Select template\"\n                                onChange={(e) => {\n                                    setTemplatedId(e.value);\n                                }}\n                                value={templateId}\n                                loading={proposalTemplateQuery?.isFetching}\n                                showClear\n                                scrollHeight=\"380px\"\n                                filter\n                                filterInputAutoFocus={true}\n                            />\n                            <div className={style.templateInfo} onClick={(e) => op.current.toggle(e)}>\n                                <InfoCircle size={16} color='#737374ff' />\n                            </div>\n                            <OverlayPanel ref={op}>\n                                <p className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>Choose from your existing templates here.</p>\n                                <div className='font-12' style={{ color: '#344054', lineHeight: '18px' }}>To edit or add new templates, go to<br /> Profile Settings &gt; Templates &gt; Proposal<br /> Templates.</div>\n                            </OverlayPanel>\n                        </div>\n                    </Col>\n                </Row>\n                <div className='d-flex flex-column px-4'>\n                    <div className='d-flex gap-3 justify-content-center align-items-center mb-1'>\n                        {\n                            image?.croppedImageBase64\n                                ?\n                                <div style={{ position: 'relative', cursor: 'pointer' }} onClick={() => setIsVisible(true)}>\n                                    <div className={style.imageBox} style={{ overflow: 'hidden', textAlign: 'center' }}>\n                                        <img\n                                            alt=\"uploaded-file\"\n                                            src={image?.croppedImageBase64}\n                                            style={{ width: \"100%\", height: \"100#\" }}\n                                        />\n                                    </div>\n                                    <div className={clsx(style.trashBox, 'cursor-pointer')} onClick={(e) => { e.stopPropagation(); setImage(null); }}>\n                                        <Trash color='#F04438' size={16} />\n                                    </div>\n                                </div>\n                                : <div className={style.uploadBox} style={{ cursor: 'pointer' }} onClick={() => setIsVisible(true)}>\n                                    <div className={style.uploadButton}>\n                                        <CloudUpload color='#475467' size={20} />\n                                    </div>\n                                    <p className={style.uploadText}>Click to upload</p>\n                                </div>\n                        }\n                    </div>\n                    <FileUploader show={isVisible} setShow={setIsVisible} setPhoto={setImage} />\n                    {errors?.image && (\n                        <p className=\"error-message mb-2\">{\"Image is required\"}</p>\n                    )}\n\n                    {/* <div className='d-flex gap-3 align-items-center mb-1'>\n                        <Button className='outline-button w-fit' style={{ position: 'relative', cursor: 'pointer' }}>\n                            Upload Image <Upload />\n                            <input\n                                type=\"file\"\n                                accept=\"image/*\"\n                                onChange={handleImageUpload}\n                                style={{\n                                    position: 'absolute',\n                                    opacity: 0,\n                                    width: '100%',\n                                    height: '100%',\n                                    cursor: 'pointer',\n                                }}\n                            />\n                        </Button>\n                        {fileName && (\n                            <span>{fileName}</span>\n                        )}\n                    </div>\n                    {errors?.image && (\n                        <p className=\"error-message mb-2\">{\"Image is required\"}</p>\n                    )} */}\n                    <Accordion activeIndex={0} className='mt-3'>\n                        {sections?.map((section, originalIndex) => ({ ...section, originalIndex }))?.filter(section => !section.delete)?.map((section, index) => (\n                            <AccordionTab key={section?.id || `accordion-${index}`} className={clsx(style.accordion, { [style.error]: (errors?.sections?.[index]?.title || errors?.sections?.[index]?.description) ? true : false }, 'proposal-accordion')} header={`Paragraph ${index + 1}`}>\n                                <div className=\"flex flex-column gap-2 w-100\" style={{ marginBottom: '16px' }}>\n                                    <label className={style.label}>Paragraph title</label>\n                                    <IconField>\n                                        <InputIcon>\n                                            {proposalQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                                        </InputIcon>\n                                        <InputText\n                                            value={section?.title}\n                                            className={clsx(style.inputBox, 'w-100 border mt-2')}\n                                            onChange={(e) => {\n                                                setSections(prevSections => {\n                                                    const newSections = [...prevSections];\n                                                    newSections[section?.originalIndex] = { ...newSections[section?.originalIndex], title: e.target.value };\n                                                    return newSections;\n                                                });\n                                            }}\n                                            placeholder=\"Section Title\"\n                                        />\n                                    </IconField>\n                                    {errors?.sections?.[index]?.title && (\n                                        <p className=\"error-message mb-0\">{\"Title is required\"}</p>\n                                    )}\n                                </div>\n                                <div className=\"d-flex flex-column gap-1 w-100 pb-2\" style={{ position: 'relative' }}>\n                                    <label className={clsx(style.lable)}>Paragraph</label>\n                                    <InputIcon style={{ position: 'absolute', right: '15px', top: '40px', zIndex: 1 }}>\n                                        {proposalQuery?.isFetching && <ProgressSpinner style={{ width: '20px', height: '20px', position: 'relative', top: '-5px' }} />}\n                                    </InputIcon>\n                                    <SunEditorComponent\n                                        value={section.description}\n                                        onChange={(content) => {\n                                            setSections(prevSections => {\n                                                const newSections = [...prevSections];\n                                                newSections[section?.originalIndex] = { ...newSections[section?.originalIndex], description: content };\n                                                return newSections;\n                                            });\n                                        }}\n                                        placeholder=\"Enter a description...\"\n                                        height={299}\n                                        showTable={true}\n                                        showImage={true}\n                                        showLink={true}\n                                        showCodeView={true}\n                                        enableS3Upload={true}\n                                        uploadId={0}\n                                    />\n                                    {errors?.sections?.[index]?.description && (\n                                        <p className=\"error-message mb-0\">{\"Message is required\"}</p>\n                                    )}\n                                </div>\n                                <div className='bg-white mt-2 pt-2 d-flex justify-content-end'>\n                                    <Button className='danger-outline-button' onClick={() => handleDeleteSection(section?.originalIndex, section?.id)}>Delete Paragraph</Button>\n                                </div>\n                            </AccordionTab>\n                        ))}\n                    </Accordion>\n                </div>\n            </Dialog >\n            <SendProposal show={showSendModal} setShow={setShowSendModal} contactPersons={contactPersons} setPayload={setPayload} onSubmit={onSubmit} handleClose={handleClose} />\n        </>\n    );\n};\n\nexport default CreateProposal;","import React from 'react';\nimport SendEmailForm from '../../../../../ui/send-email/send-email-form';\n\nconst SendQuote = ({ show, setShow, contactPersons, setPayload, createNewRequest }) => {\n  const save = async () => {\n    await createNewRequest('send');\n  };\n\n  return (\n    <SendEmailForm show={show} setShow={setShow} contactPersons={contactPersons} setPayload={setPayload} save={save} />\n  );\n};\n\nexport default SendQuote;","import React, { useEffect, useState } from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { ChevronLeft, FiletypePdf, PlusSlashMinus } from 'react-bootstrap-icons';\nimport { Link, NavLink, useNavigate, useParams } from 'react-router-dom';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { toast } from 'sonner';\nimport DepartmentQuote from './department-quote';\nimport CustomRadioButton from './ui/custom-radio-button';\nimport { createNewCalculationQuoteRequest, createNewMergeQuote, deleteMergeQuote, getQuoteByUniqueId, updateNewCalculationQuoteRequest } from '../../../../../APIs/CalApi';\nimport { useTrialHeight } from '../../../../../app/providers/trial-height-provider';\nimport { formatAUD } from '../../../../../shared/lib/format-aud';\nimport CreateProposal from '../../../features/sales-features/create-proposal/create-proposal';\nimport SendQuote from '../../../features/sales-features/send-quote/send-quote';\n\n\nconst CalculateQuote = () => {\n    const navigate = useNavigate();\n    const { trialHeight } = useTrialHeight();\n    const [contactPersons, setContactPersons] = useState([]);\n    const [showQuoteModal, setShowQuoteModal] = useState(false);\n    const [showProposalModal, setShowProposalModal] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [quoteType, setQuoteType] = useState('Standard');\n    const [payload, setPayload] = useState({});\n    const [mergeDeletedItems, setMergeDeletedItems] = useState([]);\n    const [totals, setTotals] = useState({ budget: 0, operationalProfit: 0, subtotal: 0, tax: 0, total: 0 });\n    const { unique_id } = useParams();\n    const newRequestQuery = useQuery({\n        queryKey: ['unique_id', unique_id],\n        queryFn: () => getQuoteByUniqueId(unique_id),\n        enabled: !!unique_id,\n        retry: 1,\n        cacheTime: 0,\n        staleTime: 0,\n        refetchOnWindowFocus: false,\n    });\n\n    useEffect(() => {\n        if (!unique_id) {\n            const storedSessionData = JSON.parse(window.sessionStorage.getItem(`new-request`) || \"{}\");\n            const profileData = JSON.parse(window.localStorage.getItem('profileData') || \"{}\");\n            setPayload((others) => ({\n                ...others,\n                xero_tax: \"ex\",\n                display_discount: true,\n                managers: [{ manager: profileData?.desktop_user_id }],\n                client: storedSessionData?.id || \"\",\n                reference: storedSessionData?.reference || \"\",\n                description: storedSessionData?.requirements || \"\",\n                recurring: {\n                    frequency: \"M\",\n                    start_date: new Date(),\n                    end_by: 0\n                }\n            }));\n        } else if (newRequestQuery?.data) {\n            let quoteType = newRequestQuery?.data?.recurring?.frequency ? 'Recurring' : 'Standard';\n            setQuoteType(quoteType);\n            const newData = { ...newRequestQuery?.data };\n            if (quoteType === 'Recurring') {\n                const sydneyFormatter = new Intl.DateTimeFormat('en-AU', {\n                    timeZone: 'Australia/Sydney',\n                    year: 'numeric',\n                    month: '2-digit',\n                    day: '2-digit',\n                    hour: '2-digit',\n                    minute: '2-digit',\n                    second: '2-digit',\n                    hour12: false,\n                });\n\n                // Check if timestamp is in seconds, then multiply by 1000\n                const startTimestamp = +newData.recurring.start_date;\n                newData.recurring.start_date = new Date(startTimestamp < 1e12 ? startTimestamp * 1000 : startTimestamp);\n                console.log(\"Start Date (Sydney):\", sydneyFormatter.format(newData.recurring.start_date));\n\n                newData.recurring.end_by = +newData.recurring.end_by;\n\n                if (newData.recurring.end_by === 1) {\n                    const endTimestamp = +newData.recurring.end_date;\n                    newData.recurring.end_date = new Date(endTimestamp < 1e12 ? endTimestamp * 1000 : endTimestamp);\n                    console.log(\"End Date (Sydney):\", sydneyFormatter.format(newData.recurring.end_date));\n                }\n            }\n            setPayload((others) => ({ ...others, ...newData }));\n        }\n    }, [unique_id, newRequestQuery?.data]);\n\n    const newRequestMutation = useMutation({\n        mutationFn: (data) => createNewCalculationQuoteRequest(data),\n        onSuccess: (response) => {\n            if (!response) {\n                toast.error(`Failed to create new calculation quote. Please try again.`);\n            }\n        },\n        onError: (error) => {\n            setIsLoading(false);\n            console.error('Error creating new calculation quote:', error);\n            toast.error(`Failed to create new calculation quote. Please try again.`);\n        }\n    });\n\n    const updateRequestMutation = useMutation({\n        mutationFn: (data) => updateNewCalculationQuoteRequest(unique_id, data),\n        onSuccess: (response) => {\n            if (!response) {\n                setIsLoading(false);\n                toast.error(`Failed to update calculation quote. Please try again.`);\n            }\n        },\n        onError: (error) => {\n            setIsLoading(false);\n            console.log('Error updating new calculation quote:', error, error?.data?.client?.[0]);\n\n            if (error?.status === 400) {\n                const msg = error?.data?.client?.[0];\n                if (msg?.includes('Invalid pk') && msg?.includes('object does not exist')) {\n                    return toast.error(\"This client has been deleted. Please restore it before continuing.\");\n                }\n            }\n\n            toast.error(`Failed to update calculation quote. Please try again.`);\n        }\n    });\n\n    function formatDateToYMD(date) {\n        if (!date) return '';\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    }\n\n    const createNewRequest = async (action) => {\n        payload.action = action;\n        if (action !== \"send\") {\n            delete payload.subject;\n            delete payload.email_body;\n            delete payload.to;\n            delete payload.cc;\n            delete payload.bcc;\n            delete payload.from_email;\n            delete payload.signature;\n        }\n\n        if (action === \"saveAndsend\") {\n            if ((!payload?.calculations || !payload.calculations.length) && action !== \"draft\") return toast.error('At least one calculation is required');\n            setShowQuoteModal(true);\n            return;\n        }\n\n        if (action === \"quote-pdf-open\") {\n            payload.action = \"save\";\n        }\n\n        const merges = payload.merges;\n        if (payload.merges) delete payload.merges;\n\n        if (!payload?.client) return toast.error('Client is required');\n        // if (!payload?.contact_person && action !== \"draft\") return toast.error('Contact person is required');\n        if ((!payload?.managers || !payload.managers?.length) && action !== \"draft\") return toast.error('Project manager is required');\n        if ((!payload?.calculations || !payload.calculations.length) && action !== \"draft\") return toast.error('At least one calculation is required');\n        if (!payload?.xero_tax && action !== \"draft\") return toast.error('Tax details is required');\n        if (!payload?.expense && action !== \"draft\") return toast.error('Expense is required');\n\n        if (quoteType === 'Recurring' && !payload?.recurring) return toast.error('Recurring details is required');\n        if (quoteType === 'Recurring' && !payload?.recurring?.frequency) return toast.error('Recurring frequency is required');\n        if (quoteType === 'Recurring' && !payload?.recurring?.start_date) return toast.error('Recurring start date is required');\n        if (quoteType === 'Recurring' && !([0, 1, 2].includes(payload?.recurring?.end_by))) return toast.error('Recurring end by is required');\n        if (quoteType === 'Recurring' && payload?.recurring?.end_by === 1 && !payload?.recurring?.end_date) return toast.error('Recurring end date is required');\n        if (quoteType === 'Recurring' && payload?.recurring?.end_by === 2 && !payload?.recurring?.occurrences) return toast.error('Recurring projects is required');\n        if (quoteType === 'Recurring') {\n            if (payload.recurring.start_date)\n                payload.recurring.start_date = formatDateToYMD(payload.recurring.start_date);\n            if (payload.recurring.end_date && payload.recurring.end_by === 1)\n                payload.recurring.end_date = formatDateToYMD(payload.recurring.end_date);\n            else {\n                delete payload.recurring.end_date;\n            }\n        } else {\n            payload.recurring = null;\n        }\n\n        let result;\n        setIsLoading(true);\n        if (mergeDeletedItems.length) {\n            for (const id of mergeDeletedItems) {\n                try {\n                    if (id) await deleteMergeQuote(id);\n                } catch (error) {\n                    console.log('Error during with deleting merge: ', error);\n                }\n            }\n        }\n        if (unique_id) {\n            result = await updateRequestMutation.mutateAsync(payload);\n            let uniqueid = result?.unique_id;\n\n            if (merges && merges?.length) {\n                let calculatorMap = result.calculations?.reduce((map, item) => {\n                    map[item.merge_id] = item.id;\n                    return map;\n                }, {});\n\n                const updateMerges = merges?.map(item => ({\n                    ...item,\n                    unique_id: uniqueid,\n                    calculations: item.calculators.map(calc => ({\n                        calculator: calculatorMap[calc.merge_id]\n                    }))\n                }));\n\n                for (const merge of updateMerges) {\n                    try {\n                        if (merge.id) await deleteMergeQuote(merge.id);\n                        await createNewMergeQuote(merge);\n                    } catch (error) {\n                        setIsLoading(false);\n                        console.log('Error during with creating merge: ', error);\n                    }\n                }\n                toast.success(`Calculations and merge items updated successfully.`);\n            } else {\n                toast.success(`Calculations updated successfully.`);\n            }\n\n        } else {\n            result = await newRequestMutation.mutateAsync(payload);\n            let uniqueid = result?.unique_id;\n\n            if (merges && merges?.length) {\n                let calculatorMap = result.calculations?.reduce((map, item) => {\n                    map[item.merge_id] = item.id;\n                    return map;\n                }, {});\n\n                const updateMerges = merges?.map(item => ({\n                    ...item,\n                    unique_id: uniqueid,\n                    calculations: item.calculators.map(calc => ({\n                        calculator: calculatorMap[calc.merge_id]\n                    }))\n                }));\n\n                updateMerges.forEach(async (merge) => {\n                    try {\n                        await createNewMergeQuote(merge);\n                    } catch (error) {\n                        setIsLoading(false);\n                        console.log('Error during with creating merge: ', error);\n                    }\n                });\n                toast.success(`Calculations and new merge items created successfully.`);\n            } else {\n                toast.success(`Calculations created successfully.`);\n            }\n        }\n\n        if (action === \"quote-pdf-open\") {\n            if (result?.quote_url) {\n                window.open(`${process.env.REACT_APP_URL}${result.quote_url}`, '_blank');\n            } else {\n                toast.error('Quote PDF not found.');\n            }\n        } else {\n            navigate(`/sales`);\n        }\n\n        setIsLoading(false);\n        setShowQuoteModal(false);\n    };\n\n    return (\n        <div className='newQuotePage'>\n            <div className='topbar d-flex justify-content-between' style={{ padding: '16px 32px', height: '72px', position: 'relative', boxShadow: \"rgba(0, 0, 0, 0.05) 0px 1px 2px 0px\" }}>\n                <NavLink to={\"\"}>\n                    <button className='back-button' style={{ padding: \"10px 16px\" }} onClick={() => { navigate(-1); }}>\n                        <ChevronLeft color=\"#000000\" size={17} /> &nbsp;Go Back\n                    </button>\n                </NavLink>\n                <h2 className='m-0' style={{ fontSize: '22px', fontWeight: '600', position: 'absolute', left: '42.5%' }}>\n                    <div className='d-flex flex-column align-items-center gap-1'>\n                        <div className='d-flex align-items-center'><PlusSlashMinus color=\"#1D2939\" size={16} />&nbsp; Calculate a Quote</div>\n                        {newRequestQuery?.data?.number && <small className='font-14 border px-3 py-1 rounded' style={{ width: 'fit-content' }}>{newRequestQuery?.data?.number}</small>}\n                    </div>\n                </h2>\n                <div className='d-flex align-items-center justify-content-end'>\n                    <CustomRadioButton\n                        label=\"Standard\"\n                        name=\"customRadio\"\n                        value=\"Standard\"\n                        checked={quoteType === 'Standard'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                        disabled={false}\n                    />\n                    <CustomRadioButton\n                        label=\"Recurring\"\n                        name=\"customRadio\"\n                        value=\"Recurring\"\n                        checked={quoteType === 'Recurring'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                    />\n                    <CustomRadioButton\n                        label=\"Subscription\"\n                        name=\"customRadio\"\n                        value=\"Subscription\"\n                        checked={quoteType === 'Subscription'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                        disabled={true}\n                    />\n                    <CustomRadioButton\n                        label=\"Retainer\"\n                        name=\"customRadio\"\n                        value=\"Retainer\"\n                        checked={quoteType === 'Retainer'}\n                        onChange={(e) => setQuoteType(e.target.value)}\n                        disabled={true}\n                    />\n                </div>\n            </div>\n\n            <div className='w-100' style={{ overflow: 'auto', height: `calc(100% - 208px - ${trialHeight}px)`, padding: '16px 32px' }}>\n                <DepartmentQuote payload={payload} setPayload={setPayload} totals={totals} setTotals={setTotals} refetch={newRequestQuery?.refetch} preExistMerges={newRequestQuery?.data?.merges || []} preExistCalculation={newRequestQuery?.data?.calculations || []} setMergeDeletedItems={setMergeDeletedItems} setContactPersons={setContactPersons} quoteType={quoteType} />\n            </div>\n\n            <div className='calculation-quote-bottom w-100' style={{ padding: '8px 24px', height: '136px', background: '#fff', borderTop: '1px solid #f2f2f2', boxShadow: 'rgba(0, 0, 0, 0.06) 0px 0px 4px 0px inset' }}>\n                <div className='d-flex justify-content-between align-items-center pb-3' style={{ gap: '20px', width: '100%', overflowX: 'auto' }}>\n                    <div className='d-flex align-items-center' style={{ gap: '16px' }}>\n                        <div className='item'>\n                            <label>Budget</label>\n                            <div className='amount'>${formatAUD(totals.budget)}</div>\n                        </div>\n                        <div className='item'>\n                            <label>Operational Profit</label>\n                            <div className='amount' style={{ color: '#079455' }}>${formatAUD(totals.operationalProfit)}</div>\n                        </div>\n                    </div>\n                    <div className='d-flex align-items-center' style={{ gap: '16px' }}>\n                        <div className='item'>\n                            <label>Subtotal</label>\n                            <div className='amount'>${formatAUD(totals.subtotal)}</div>\n                        </div>\n                        <div className='item'>\n                            <label>Tax (10%)</label>\n                            <div className='amount'>${formatAUD(totals.tax)}</div>\n                        </div>\n                        <div className='item' style={{ minWidth: 'fit-content' }}>\n                            <label>Total</label>\n                            <div className='amount'>${formatAUD(totals.total)}</div>\n                        </div>\n                    </div>\n                </div>\n                <div className='d-flex justify-content-between align-items-center'>\n                    <div className='d-flex align-items-center' style={{ gap: '0px' }}>\n                        <a href='/sales' type=\"button\" className=\"button-custom text-button text-danger padding-left-0\" style={{ color: '#B42318' }}>\n                            Cancel\n                        </a>\n                        {\n                            <a href='#' onClick={() => createNewRequest('quote-pdf-open')} type=\"button\" className=\"button-custom text-button px-0\">\n                                Quote PDF\n                            </a>\n                        }\n                        {\n                            newRequestQuery?.data?.proposal_pdf ? (\n                                <div className='d-flex align-items-center'>\n                                    <button type=\"button\" className=\"text-button\" onClick={() => setShowProposalModal(true)}>\n                                        Edit Proposal\n                                    </button>\n                                    <Link to={`${process.env.REACT_APP_URL}${newRequestQuery?.data?.proposal_pdf}`} target='_blank' rel=\"noreferrer\" style={{ position: 'relative', top: '-2px', left: '-8px' }}>\n                                        <FiletypePdf color='#106B99' size={20} />\n                                    </Link>\n                                </div>\n                            ) : (\n                                <button type=\"button\" disabled={!unique_id} className=\"button-custom text-button px-2\" onClick={() => setShowProposalModal(true)}>\n                                    Create Proposal\n                                </button>\n                            )\n                        }\n                    </div>\n                    <div className='d-flex align-items-center' style={{ gap: '8px' }}>\n                        <button type=\"button\" disabled={newRequestMutation.isPending || updateRequestMutation.isPending} onClick={() => createNewRequest('draft')} className=\"button-custom text-button\">\n                            Save Draft\n                            {(newRequestMutation.isPending || updateRequestMutation.isPending)\n                                && (newRequestMutation?.variables?.action === \"draft\" || updateRequestMutation?.variables?.action === \"draft\")\n                                && <ProgressSpinner style={{ width: '20px', height: '20px' }} />}\n                        </button>\n                        <button type=\"button\" disabled={newRequestMutation.isPending || updateRequestMutation.isPending} onClick={() => createNewRequest('save')} className=\"button-custom submit-button-light\">\n                            Save\n                            {(newRequestMutation.isPending || updateRequestMutation.isPending)\n                                && (newRequestMutation?.variables?.action === \"save\" || updateRequestMutation?.variables?.action === \"save\")\n                                && <ProgressSpinner style={{ width: '20px', height: '20px' }} />}\n                        </button>\n                        <button type=\"button\" disabled={newRequestMutation.isPending || updateRequestMutation.isPending} onClick={() => createNewRequest('saveAndsend')} className=\"submit-button\">\n                            Save and Send\n                            {(newRequestMutation.isPending || updateRequestMutation.isPending)\n                                && (newRequestMutation?.variables?.action === \"send\" || updateRequestMutation?.variables?.action === \"send\")\n                                && <ProgressSpinner style={{ width: '20px', height: '20px' }} />}\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <SendQuote show={showQuoteModal} setShow={setShowQuoteModal} contactPersons={contactPersons} setPayload={setPayload} createNewRequest={createNewRequest} />\n            <CreateProposal show={showProposalModal} setShow={setShowProposalModal} refetch={newRequestQuery?.refetch} contactPersons={contactPersons} isExist={!!newRequestQuery?.data?.proposal_pdf} />\n\n            {\n                (newRequestMutation.isPending || newRequestQuery.isFetching || isLoading) && <div style={{ position: 'absolute', top: '50%', left: '50%', background: 'white', width: '60px', height: '60px', borderRadius: '4px', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 10 }} className=\"shadow-lg\">\n                    <Spinner animation=\"border\" role=\"status\">\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </Spinner>\n                </div>\n            }\n        </div >\n    );\n};\n\n\n\nexport default CalculateQuote;","export const renderHeader = () => {\n    return (\n        <>\n            <span className=\"ql-formats\">\n                <button className=\"ql-bold me-1\" aria-label=\"Bold\"></button>\n                <button className=\"ql-italic me-1\" aria-label=\"Italic\"></button>\n                <button className=\"ql-underline me-1\" aria-label=\"Underline\"></button>\n            </span>\n            <span className=\"ql-formats\">\n                <button className=\"ql-list me-1\" value=\"ordered\" aria-label=\"Ordered List\" />\n                <button className=\"ql-list me-1\" value=\"bullet\" aria-label=\"Unordered List\" />\n                <button className=\"ql-indent me-1\" value=\"-1\" aria-label=\"Indent\" />\n                <button className=\"ql-indent me-1\" value=\"+1\" aria-label=\"Outdent\" />\n            </span>\n            <span className=\"ql-formats\">\n                <select className=\"ql-size me-1\">\n                    <option value=\"small\">Small</option>\n                    <option value=\"\" selected>Normal</option>\n                    <option value=\"large\">Large</option>\n                    <option value=\"huge\">Huge</option>\n                </select>\n                <select className=\"ql-color me-1\" />\n                <button className=\"ql-link me-1\" value=\"+1\" aria-label=\"Outdent\" />\n            </span>\n        </>\n    );\n};"],"names":["formatAUD","amount","shorten","arguments","length","undefined","num","parseFloat","isNaN","Math","abs","Intl","NumberFormat","notation","compactDisplay","minimumFractionDigits","maximumFractionDigits","format","API_BASE_URL","process","getDepartments","async","url","URL","all","searchParams","append","fetchAPI","toString","method","getCalculationByReferenceId","id","result","Array","isArray","filter","item","deleted","getQuoteByUniqueId","unique_id","createNewCalculationQuoteRequest","options","body","data","updateNewCalculationQuoteRequest","Error","createNewMergeQuote","deleteMergeQuote","createDepartment","updateDepartment","createSubDepartment","updateSubDepartment","createCalculator","index","updateCalculator","deleteSettingCalculator","endpoint","reorderDepartments","departments","map","d","idx","order","romanize","i","lookup","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I","roman","formatMoney","number","toLocaleString","style","currency","dateFormat","dateInMiliSec","isDotformate","_date$toLocaleDateStr","date","Date","toLocaleDateString","day","month","year","replace","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","keys","Object","resolve","module","exports","FallbackImage","_ref2","has_photo","photo","is_business","size","imgError","setImgError","useState","Icon","Building","Person","_jsx","_Fragment","children","src","alt","className","onError","color","FallbackImageWithInitials","_ref3","_name$split","_name$split$map","_name$split$map$join","name","initials","split","n","join","toUpperCase","InitialsAvatar","_ref4","fontSize","_ref","overflow","value","onChange","placeholder","height","showTable","showLink","disabled","customOptions","onLoad","onFocus","onBlur","enableS3Upload","s3UploadEndpoint","uploadId","props","console","log","uploadProgress","setUploadProgress","dragState","setDragState","processingBase64","setProcessingBase64","uploadCacheRef","useRef","Map","useEffect","cleanupInterval","setInterval","cache","current","toKeep","from","entries","slice","clearInterval","editorRef","editorInstanceRef","isS3Image","useCallback","RegExp","REACT_APP_S3_BUCKET","some","pattern","test","categorizeImages","content","allImageRegex","base64Images","s3Images","otherImages","match","exec","fullMatch","startsWith","base64Match","push","base64Data","base64ToFile","filename","base64String","byteCharacters","atob","byteNumbers","charCodeAt","byteArray","Uint8Array","blob","Blob","type","File","uploadBase64ImageToS3","base64Hash","btoa","substring","has","cachedUrl","get","timestamp","now","file","accessToken","localStorage","getItem","response","axios","post","headers","Authorization","put","s3Url","set","error","uploadToS3","onUploadProgress","progressEvent","progress","round","loaded","total","uploading","then","status","success","fileURL","toast","setTimeout","catch","err","fileUploadBySignedURL","_file$name","_file$name2","_file$name2$split","fileExtension","pop","fileName","_error$message","message","includes","handleDragEnter","preventDefault","stopPropagation","handleDragLeave","rect","currentTarget","getBoundingClientRect","x","clientX","y","clientY","left","right","top","bottom","handleDragOver","handleDrop","files","dataTransfer","defaultOptions","buttonList","getButtonList","buttons","showPathLabel","charCounter","resizingBar","disable","imageUploadUrl","table","headerStyle","cellStyle","imageUploadHeader","formats","font","colorList","editorOptions","_jsxs","position","onDragEnter","onDragLeave","onDragOver","onDrop","SunEditor","ref","setOptions","setContents","updatedContent","imageMatch","newImgTag","sunEditor","refEditor","getInstance","handleFocus","event","handleBlur","backgroundColor","border","display","alignItems","justifyContent","zIndex","borderRadius","textAlign","fontWeight","marginBottom","flexDirection","width","borderTop","animation","transition","marginTop","margin","DepartmentQuoteTableRowLoading","Placeholder","as","xs","bg","DepartmentRowChangeLoading","_departments$filter","handleChange","title","keyValue","handleSubMenuClick","label","Menu","menuButton","MenuButton","padding","cursor","background","ChevronDown","portal","sort","a","b","department","_department$subindexe","_department$subindexe2","_department$subindexe3","React","subindexes","SubMenu","direction","align","menuStyle","maxHeight","subitem","MenuItem","onClick","schema","yup","required","description","_Object$keys","_Object$keys2","_Object$entries","selectItem","setSelectItem","merges","setMerges","show","setShow","romanNo","defaultValues","register","reset","handleSubmit","formState","errors","useForm","resolver","yupResolver","handleClose","Button","handleOpen","clsx","Modal","centered","onHide","Header","closeButton","Title","Body","Form","onSubmit","_Object$values","payload","alias","calculators","values","flat","key","merge_id","calculator","others","Group","Label","Control","Text","controlId","rows","outline","boxShadow","ListGroup","variant","Item","Row","Col","sm","toFixed","Footer","deleteAndCancel","Trash","minWidth","refetch","useParams","deleteMutation","useMutation","mutationFn","onSuccess","accept","mutate","merge","reject","ConfirmPopup","isPending","Spinner","role","confirmPopup","target","defaultFocus","acceptClassName","_merge$calculators2","deleteMergeCalculator","_merge$calculators","items","isOpen","setOpen","anchorProps","useClick","maxWidth","ControlledMenu","state","anchorRef","onClose","CloseButton","whiteSpace","ViewMerge","EditMergeCalculation","reduce","sum","DeleteMerge","DepartmentCalculationTableEmptyRow","srNo","SelectComponent","isShowlabel","paddingTop","resize","boxSizing","opacity","DepartmentCalculationTableHead","DepartmentCalculationTableBody","updateData","deleteRow","mapMergeItemWithNo","checkedItems","handleDepartmentChange","selectKey","Draggable","draggableId","provided","innerRef","draggableProps","dragHandleProps","GripVertical","marginRight","checked","mergeKey","oldItems","newItems","updatedItems","Check","onInput","scrollHeight","InputNumber","prefix","cost","onValueChange","maxFractionDigits","minFractionDigits","inputId","inputStyle","profit_type_value","profit_type","unit_price","quantity","suffix","discount","setTotals","setPayload","defaultDiscount","xero_tax","preExistCalculation","preMerges","setMergeDeletedItems","setRows","subItem","setSubItem","subItemLabel","setSubItemLabel","setSelectKey","preExistMerges","setPreExistMerges","setMapMergeItemWithNo","useQuery","queryKey","queryFn","staleTime","refetchOnWindowFocus","isLoading","isLoadingSubItem","enabled","retry","subitemId","calculateTotal","subtotal","calculateUnitPrice","prevRows","updatedItem","calcReferenceId","idsToDelete","mergeCount","updatedMerges","updatedCalculators","calc","prev","Set","updatedRows","forEach","nanoid","filteredData","self","findIndex","t","summary","taxType","budget","departmentRows","rate","tax","operationalProfit","calculateSummary","calculations","flatMap","_ref5","parentIndex","rest","expense","subindexMap","subindex","orderGroups","acc","_ref6","reformattedData","calculatorKeyMap","_ref7","reformattedMerges","cal","findData","find","keyIndexMap","overflowX","DragDropContext","onDragEnd","source","destination","sourceKey","destinationKey","reorderedKeys","removedKey","splice","reorderedRows","Droppable","droppableId","droppableProps","CreateMergeCalculation","ListMergeCalculations","_data$addresses","_data$contact_persons","_clientQuery$data","_clientQuery$data2","selectClient","setSelectClient","selectContact","setSelectContact","isEdit","setIsEdit","observerRef","dropdownRef","clients","setClients","page","setPage","hasMoreData","setHasMoreData","loading","setLoading","inputValue","debouncedValue","setInputValue","useDebounce","mainAddress","addresses","address","is_main","mainContact","contact_persons","contact","clientQuery","getClientById","isBusiness","contactOptions","getListOfClients","_data$results","results","existingClientIds","client","newClients","count","loadData","setupObserver","lastRow","document","querySelector","IntersectionObserver","isIntersecting","prevPage","threshold","observe","timeout","clearTimeout","disconnect","minHeight","Dropdown","itemTemplate","option","ImageAvatar","valueTemplate","optionLabel","optionValue","filterTemplate","IconField","iconPosition","InputIcon","Search","InputText","virtualScrollerOptions","itemSize","lazy","onLazyLoad","filterInputAutoFocus","firstname","lastname","abn","phone","email","handleChangeSave","contact_person","_data$contact_persons2","CustomOption","components","Option","image","_clientQuery$data5","_clientQuery$data6","_clientQuery$data6$ca","_projectManagerQuery$7","_payload$recurring","_payload$recurring2","_payload$recurring3","_payload$recurring4","_payload$recurring5","_payload$recurring6","_payload$recurring7","setContactPersons","quoteType","paymentCollection","setPaymentCollection","selectedManagers","setSelectedManagers","editedReference","setEditedReference","isEditingReference","setIsEditingReference","editedDescription","setEditedDescription","isEditingDescription","setIsEditingDescription","handleDataChange","projectManagerQuery","getProjectManager","_clientQuery$data$con","_clientQuery$data3","_clientQuery$data4","person","managers","initialManagers","manager","_projectManagerQuery$","_projectManagerQuery$2","_projectManagerQuery$3","_projectManagerQuery$4","_projectManagerQuery$5","_projectManagerQuery$6","user","md","borderRight","InfoCircle","handleSaveReference","reference","autoFocus","PencilSquare","handleEditReference","handleSaveDescription","handleEditDescription","QuoteToBusiness","QuoteToClient","DepartmentCalculationTable","category","note","Select1","closeMenuOnSelect","selected","obj","isMulti","styles","control","multiValueRemove","multiValue","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","purchase_order","FormControl","sx","m","Select","displayEmpty","inputProps","IconComponent","CustomRadioButton","Boolean","display_discount","prevPayload","placement","OverlayTrigger","overlay","Tooltip","recurring","frequency","Calendar","start_date","showButtonBar","locale","end_by","occurrences","end_date","setPhoto","additionalDesign","shape","setFiles","crop","setCrop","zoom","setZoom","rotation","setRotation","croppedAreaPixels","setCroppedAreaPixels","croppedImages","setCroppedImages","onCropComplete","croppedArea","getCroppedImg","canvas","createElement","ctx","getContext","img","Image","preview","Promise","onload","translate","rotate","PI","drawImage","toDataURL","generateCroppedImages","croppedImage","img2","img3","img4","img5","getRootProps","getInputProps","useDropzone","maxFiles","acceptedFiles","assign","createObjectURL","onShow","Cropper","cropShape","onCropChange","onZoomChange","aspect","restrictPosition","containerStyle","cropAreaStyle","mediaStyle","objectFit","Range","min","max","step","gap","rotateImage","prevRotation","ArrowClockwise","CloudUpload","croppedImageBase64","croppedImageBlob","base64","mime","byteString","ab","ArrayBuffer","ia","base64ToBlob","headerElement","modalHeader","headerTitle","header","_outgoingEmailTemplat4","_outgoingEmailTemplat5","_emailTemplateQuery$d2","_signatureQuery$data2","contactPersons","save","op","profileData","JSON","parse","window","setFrom","to","setTo","cc","setCC","bcc","setBCC","subject","setSubject","text","setText","signature","setSignature","setErrors","filteredEmails","setFilteredEmails","autoCompleteRef","autoCompleteRef2","autoCompleteRef3","showCC","setShowCC","showBCC","setShowBCC","setIsLoading","isValidEmail","trim","validateEmailArray","emailArray","every","getInvalidEmails","cleanEmailArray","validateAndCleanAllEmails","hasErrors","invalidToEmails","invalidCcEmails","invalidBccEmails","emailTemplateId","setEmailTemplatedId","emailTemplateQuery","getEmailTemplates","signatureQuery","getSignatureTemplates","outgoingEmailTemplateQuery","getOutgoingEmail","emailQuery","getEmail","_outgoingEmailTemplat","_outgoingEmailTemplat2","_outgoingEmailTemplat3","outgoing_email","outgoing_email_verified","_emailTemplateQuery$d","activeTemplateId","template","footerContent","errorCount","invalidEmails","toInvalid","ProgressSpinner","search","_event$query","_contactPersons$map","query","toLowerCase","emails","onFocus2","onFocus3","_contactPersons$map2","validEmails","email_body","from_email","_emailQuery$data","_emailQuery$data2","_signatureQuery$data","_signatureQuery$data$","email_signature","Dialog","visible","modal","footer","customLabel","dropdownSelect","paddingLeft","emailTemplate","isFetching","templateInfo","toggle","OverlayPanel","lineHeight","autoCompleteBox","bag","AutoComplete","completeMethod","multiple","suggestions","onKeyUp","currentValue","box","active","inputBox","lable","Editor","headerTemplate","onTextChange","htmlValue","panelClassName","SendProposalEmailForm","handleOtherClose","iconStyle","Check2Circle","_proposalTemplateQuer","_sections$map","_sections$map$filter","isExist","isVisible","setIsVisible","setFileName","showSendModal","setShowSendModal","templateId","setTemplatedId","sections","setSections","setImage","proposalTemplateQuery","getProposalsTemplates","readProposalQuery","getProposalBySalesId","_readProposalQuery$da2","_readProposalQuery$da","_readProposalQuery$da3","proposalQuery","getProposalsTemplate","_sections$filter2","notdeletedSections","section","delete","newErrors","sectionErrors","sectionError","formData","FormData","action","photoHintId","fetch","json","ok","handleAddSection","PlusLg","sendProposalAction","_sections$filter","_readProposalQuery$da4","_readProposalQuery$da7","_readProposalQuery$da5","_readProposalQuery$da6","_proposalQuery$data","_proposalQuery$data$s","_readProposalQuery$da8","showClear","imageBox","trashBox","uploadBox","uploadButton","uploadText","FileUploader","Accordion","activeIndex","originalIndex","_errors$sections","_errors$sections$inde","_errors$sections2","_errors$sections2$ind","_errors$sections3","_errors$sections3$ind","_errors$sections4","_errors$sections4$ind","AccordionTab","accordion","prevSections","newSections","SunEditorComponent","showImage","showCodeView","handleDeleteSection","SendProposal","createNewRequest","SendEmailForm","CalculateQuote","_newRequestQuery$data3","_newRequestQuery$data4","_newRequestQuery$data5","_newRequestQuery$data6","_newRequestQuery$data7","_newRequestQuery$data8","_newRequestMutation$v","_updateRequestMutatio","_newRequestMutation$v2","_updateRequestMutatio2","_newRequestMutation$v3","_updateRequestMutatio3","_newRequestQuery$data9","navigate","useNavigate","trialHeight","useTrialHeight","showQuoteModal","setShowQuoteModal","showProposalModal","setShowProposalModal","setQuoteType","mergeDeletedItems","totals","newRequestQuery","cacheTime","_newRequestQuery$data","_newRequestQuery$data2","newData","sydneyFormatter","DateTimeFormat","timeZone","hour","minute","second","hour12","startTimestamp","endTimestamp","storedSessionData","sessionStorage","desktop_user_id","requirements","newRequestMutation","updateRequestMutation","_error$data","_error$data$client","_error$data2","_error$data2$client","msg","formatDateToYMD","getFullYear","String","getMonth","padStart","getDate","_payload$managers","_result","mutateAsync","uniqueid","_result$calculations","calculatorMap","updateMerges","_result2","_result$calculations2","_result3","quote_url","open","NavLink","ChevronLeft","PlusSlashMinus","DepartmentQuote","href","proposal_pdf","Link","rel","FiletypePdf","variables","SendQuote","CreateProposal","renderHeader"],"sourceRoot":""}