{"version":3,"file":"static/js/4451.646ec22b.chunk.js","mappings":"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","sources":["APIs/assets-api.js","webpack://memateapp/./src/components/Business/features/supliers-features/supplier-create/supplier-create.module.scss?107e","components/Business/features/supliers-features/supplier-create/index.js","webpack://memateapp/./src/components/Business/features/expenses-features/new-expenses-create/new-expense-create.module.scss?aa4a","components/Business/features/expenses-features/new-expenses-create/new-expense-create.js","webpack://memateapp/./src/components/Business/shared/ui/expense-ui/expenses-form.module.scss?7b45","components/Business/shared/ui/expense-ui/assets-types/vehicle-dropdown.jsx","shared/lib/extract-ai-response.js","components/Business/shared/ui/expense-ui/expenses-form.js"],"sourcesContent":["import { fetchAPI } from \"./base-api\";\nconst API_BASE_URL = process.env.REACT_APP_BACKEND_API_URL;\n\nexport const getAssetsTypes = async () => {\n    const endpoint = `/assets/types/`;\n    const options = {\n        method: 'GET',\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};\n\nexport const getListOfAssetCategories = async () => {\n    const endpoint = `/assets/types/subscriptions/`;\n    const options = {\n        method: 'GET',\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};\n\nexport const getListOfVehicles = async (page, limit, search = \"\", order = \"\", isShowDeleted) => {\n    const offset = (page - 1) * limit;\n    const endpoint = `/assets/vehicles/`;\n    const options = {\n        method: 'GET',\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    url.searchParams.append(\"limit\", limit);\n    url.searchParams.append(\"offset\", offset);\n    if (search) url.searchParams.append(\"q\", search);\n    if (order) url.searchParams.append(\"ordering\", order);\n    if (isShowDeleted) url.searchParams.append('deleted', 1);\n\n    return fetchAPI(url.toString(), options);\n};\n\nexport const createNewVehicle = async (data) => {\n    const endpoint = '/assets/vehicles/create/';\n    const options = {\n        method: 'POST',\n        body: data\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};\n\nexport const getVehicle = async (id) => {\n    const endpoint = `/assets/vehicles/${id}/`;\n    const options = {\n        method: 'GET',\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};\n\nexport const updateVehicle = async (id, data) => {\n    const endpoint = `/assets/vehicles/${id}/update/`;\n    const options = {\n        method: 'PUT',\n        body: data\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};\n\n// Services API\nexport const getVehicleServices = async (vehicleId, page = 1, limit = 25, search = \"\", order = \"\") => {\n    const offset = (page - 1) * limit;\n    const endpoint = `/assets/vehicles/${vehicleId}/services/`;\n    const options = {\n        method: 'GET',\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    url.searchParams.append(\"limit\", limit);\n    url.searchParams.append(\"offset\", offset);\n    if (search) url.searchParams.append(\"search\", search);\n    if (order) url.searchParams.append(\"ordering\", order);\n\n    return fetchAPI(url.toString(), options);\n};\n\nexport const createNewService = async (vehicleId, data) => {\n    const endpoint = `/assets/vehicles/${vehicleId}/services/`;\n    const options = {\n        method: 'POST',\n        body: data\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};\n\nexport const linkExpenseToAsset = async (data) => {\n    const endpoint = `/assets/types/expense-links/create/`;\n    const options = {\n        method: 'POST',\n        body: data\n    };\n    const url = new URL(`${API_BASE_URL}${endpoint}`);\n    return fetchAPI(url.toString(), options);\n};","// extracted by mini-css-extract-plugin\nexport default {\"circledesignstyle\":\"supplier-create_circledesignstyle__RXgvx\",\"out\":\"supplier-create_out__lEI-I\",\"tab\":\"supplier-create_tab__dSUke\",\"iconBox\":\"supplier-create_iconBox__rDYMY\",\"tabText\":\"supplier-create_tabText__l0k3i\",\"active\":\"supplier-create_active__Rphlh\",\"bgGreay\":\"supplier-create_bgGreay__laJf2\",\"fileUploadBox\":\"supplier-create_fileUploadBox__z31UF\",\"uploadedImgBox\":\"supplier-create_uploadedImgBox__gTrVH\",\"uploadedText1\":\"supplier-create_uploadedText1__a1udq\",\"uploadedText2\":\"supplier-create_uploadedText2__NIItB\",\"lable\":\"supplier-create_lable__Ph2h4\",\"inputText\":\"supplier-create_inputText__pEINV\",\"error\":\"supplier-create_error__SN0Nv\",\"phoneInput\":\"supplier-create_phoneInput__WIIfS\",\"countrySelector\":\"supplier-create_countrySelector__rhyKO\",\"headingInputs\":\"supplier-create_headingInputs__cG1T8\",\"dropdownSelect\":\"supplier-create_dropdownSelect__de+vx\",\"tempDelete\":\"supplier-create_tempDelete__lruWX\",\"tempAdd\":\"supplier-create_tempAdd__6Elmk\"};","import React, { useEffect, useRef, useState } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { PlusCircle, X } from 'react-bootstrap-icons';\nimport { useLocation } from 'react-router-dom';\nimport { parsePhoneNumberFromString } from 'libphonenumber-js';\nimport { nanoid } from 'nanoid';\nimport { Sidebar } from 'primereact/sidebar';\nimport { toast } from 'sonner';\nimport styles from './supplier-create.module.scss';\nimport SupplierForm from '../../../shared/ui/supliers-ui/supplier-form';\n\n\nconst SupplierCreate = ({ visible, setVisible, refetch }) => {\n  const formRef = useRef(null);\n  const addNewSupplier = new URLSearchParams(useLocation().search).get(\"addNewSupplier\");\n  const [isPending, setIsPending] = useState(false);\n  const [photo, setPhoto] = useState(null);\n  const [defaultValues, ] = useState({\n    contact_persons: [{}],\n    addresses: [{ title: \"Main Location\", country: 1 }],\n  });\n\n  const FormSubmit = async (data) => {\n    console.log('data: ', data);\n    const formData = new FormData();\n\n    formData.append(\"name\", data.name);\n    if (data.email) formData.append(\"email\", data.email);\n    if (data.website) formData.append(\"website\", data.website);\n    if (data.abn) formData.append(\"abn\", data.abn);\n    const phoneNumber = data?.phone && parsePhoneNumberFromString(data.phone);\n    if (phoneNumber?.nationalNumber) formData.append(\"phone\", data.phone);\n    if (data.service) formData.append(\"service\", data.service);\n    if (data.note) formData.append(\"note\", data.note);\n\n    data.addresses.forEach((address, index) => {\n      if (address.city) {\n        formData.append(`addresses[${index}]address`, address.address);\n        formData.append(`addresses[${index}]city`, address.city);\n        formData.append(`addresses[${index}]postcode`, address.postcode);\n        formData.append(`addresses[${index}]is_main`, address.is_main);\n        formData.append(`addresses[${index}]title`, address.title);\n      }\n    });\n\n    data.contact_persons.forEach((person, index) => {\n      if (person.firstname || person.email) {\n        formData.append(`contact_persons[${index}]firstname`, person.firstname);\n        formData.append(`contact_persons[${index}]lastname`, person.lastname);\n        formData.append(`contact_persons[${index}]email`, person.email);\n        const phoneNumber = person?.phone && parsePhoneNumberFromString(person.phone);\n        if (phoneNumber?.nationalNumber) formData.append(`contact_persons[${index}]phone`, person.phone);\n        formData.append(`contact_persons[${index}]position`, person.position);\n        formData.append(`contact_persons[${index}]is_main`, person.is_main);\n      }\n    });\n\n    if (photo?.croppedImageBlob) {\n      const photoHintId = nanoid(6);\n      formData.append('photo', photo?.croppedImageBlob, `${photoHintId}.jpg`);\n    }\n\n    try {\n      setIsPending(true);\n      const accessToken = localStorage.getItem(\"access_token\");\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_API_URL}/suppliers/new/`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`\n        },\n        body: formData,\n      });\n      if (response.ok) {\n        console.log('response: ', response);\n        toast.success(`New supplier created successfully`);\n        setVisible(false);\n        refetch((prev) => !prev);\n      } else {\n        toast.error('Failed to create new supplier. Please try again.');\n      }\n    } catch (err) {\n      toast.error(`Failed to create new supplier. Please try again.`);\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  const handleSubmit = async (data) => {\n    console.log('data: ', data);\n    FormSubmit(data);\n  };\n\n  const handleExternalSubmit = () => {\n    if (formRef.current) {\n      formRef.current.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }));\n    }\n  };\n\n  useEffect(() => {\n    if (!visible) setPhoto(null);\n  }, [visible]);\n\n  useEffect(() => {\n    if (addNewSupplier) {\n      setVisible(true);\n    }\n  }, [addNewSupplier, setVisible]);\n\n  return (\n    <Sidebar visible={visible} position=\"right\" onHide={() => setVisible(false)} modal={false} dismissable={false} style={{ width: '702px' }}\n      content={({ closeIconRef, hide }) => (\n        <div className='create-sidebar d-flex flex-column'>\n          <div className=\"d-flex align-items-center justify-content-between flex-shrink-0\" style={{ borderBottom: '1px solid #EAECF0', padding: '24px' }}>\n            <div className=\"d-flex align-items-center gap-2\">\n              <div className={styles.circledesignstyle}>\n                <div className={styles.out}>\n                  <PlusCircle size={24} color=\"#17B26A\" />\n                </div>\n              </div>\n              <span style={{ color: '344054', fontSize: '20px', fontWeight: 600 }}>Create new Supplier</span>\n            </div>\n            <span>\n              <Button type=\"button\" className='text-button' ref={closeIconRef} onClick={(e) => hide(e)}>\n                <X size={24} color='#667085' />\n              </Button>\n            </span>\n          </div>\n\n          <div className='modal-body' style={{ padding: '24px', height: 'calc(100vh - 72px - 122px)', overflow: 'auto' }}>\n            <SupplierForm photo={photo} setPhoto={setPhoto} ref={formRef} onSubmit={handleSubmit} defaultValues={defaultValues} />\n          </div>\n\n          <div className='modal-footer d-flex align-items-center justify-content-end gap-3' style={{ padding: '16px 24px', borderTop: \"1px solid var(--Gray-200, #EAECF0)\", height: '72px' }}>\n            <Button type='button' onClick={(e) => { e.stopPropagation(); setVisible(false); }} className='outline-button'>Cancel</Button>\n            <Button type='button' disabled={isPending} onClick={handleExternalSubmit} className='solid-button' style={{ minWidth: '75px' }}>{isPending ? \"Loading...\" : \"Save\"}</Button>\n          </div>\n        </div>\n      )}\n    ></Sidebar>\n  );\n};\n\nexport default SupplierCreate;","// extracted by mini-css-extract-plugin\nexport default {\"circledesignstyle\":\"new-expense-create_circledesignstyle__Ke3sy\",\"out\":\"new-expense-create_out__C1Mi-\",\"bgGreay\":\"new-expense-create_bgGreay__g2IX6\",\"fileUploadBox\":\"new-expense-create_fileUploadBox__lKcNi\",\"lable\":\"new-expense-create_lable__er5YG\",\"inputText\":\"new-expense-create_inputText__67rf1\",\"error\":\"new-expense-create_error__exTkr\",\"phoneInput\":\"new-expense-create_phoneInput__8m0if\",\"countrySelector\":\"new-expense-create_countrySelector__JcTx+\",\"headingInputs\":\"new-expense-create_headingInputs__vduP8\",\"dropdownSelect\":\"new-expense-create_dropdownSelect__CLtdF\",\"tempDelete\":\"new-expense-create_tempDelete__nk8Ly\",\"tempAdd\":\"new-expense-create_tempAdd__nj5Hm\",\"expensesEditHead\":\"new-expense-create_expensesEditHead__xr-7V\",\"expensesCreateNew\":\"new-expense-create_expensesCreateNew__NnaRF\",\"customCalendar\":\"new-expense-create_customCalendar__GifKn\",\"customIcon\":\"new-expense-create_customIcon__Sq5Zs\",\"expTotalRow\":\"new-expense-create_expTotalRow__kP3IT\",\"CalItem\":\"new-expense-create_CalItem__RBEak\",\"CalItemActive\":\"new-expense-create_CalItemActive__q16n0\",\"tabsExpenses\":\"new-expense-create_tabsExpenses__xtomK\",\"active\":\"new-expense-create_active__+KR+4\"};","import React, { useEffect, useRef, useState } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { PlusCircle, X } from 'react-bootstrap-icons';\nimport { useMutation } from '@tanstack/react-query';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { Sidebar } from 'primereact/sidebar';\nimport { toast } from 'sonner';\nimport styles from './new-expense-create.module.scss';\nimport { linkExpenseToAsset } from '../../../../../APIs/assets-api';\nimport { createNewExpense } from '../../../../../APIs/expenses-api';\nimport ExpensesForm from '../../../shared/ui/expense-ui/expenses-form';\n\nconst NewExpensesCreate = ({ visible, setVisible, setRefetch, expenseProjectId, assetForExpense, projectReference, createNewService = false, createServiceFromExpense }) => {\n    const url = window.location.href;\n    const urlObj = new URL(url);\n    const params = new URLSearchParams(urlObj.search);\n    const [projectId, setProjectId] = useState(null);\n    const [asset, setAsset] = useState(null);\n\n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n\n    const formRef = useRef(null);\n    const [defaultValues, setDefaultValues] = useState({\n        option: 'Assign to timeframe',\n        type: 2,\n        notification: false,\n        date: today,\n        due_date: tomorrow\n    });\n\n    useEffect(() => {\n        if (assetForExpense && assetForExpense.id && assetForExpense.type) {\n            setDefaultValues((prev) => ({ ...prev, option: 'Assign to asset' }));\n            setAsset({ id: assetForExpense.id, type: assetForExpense.type });\n        }\n    }, [assetForExpense]);\n\n    useEffect(() => {\n        const projectParamId = params.get('projectId') || expenseProjectId;\n        const reference = params.get('reference') || projectReference;\n        if (reference) {\n            setDefaultValues((prev) => ({ ...prev, invoice_reference: reference }));\n            urlObj.searchParams.delete('reference');\n            window.history.replaceState({}, '', urlObj);\n        }\n\n        if (projectParamId) {\n            setProjectId(projectParamId);\n            setDefaultValues((prev) => ({ ...prev, option: 'Assign to project' }));\n            urlObj.searchParams.delete('projectId');\n            window.history.replaceState({}, '', urlObj);\n        }\n    }, [projectId, setVisible]);\n\n    const expenseLinkMutation = useMutation({\n        mutationFn: (data) => linkExpenseToAsset(data),\n        onSuccess: (response) => {\n            console.log('response: ', response);\n            toast.success(`Expense linked to asset successfully`);\n        },\n        onError: (error) => {\n            console.error('Error linking expense to asset:', error);\n            toast.error('Failed to link expense to asset. Please try again.');\n        }\n    });\n\n    const mutation = useMutation({\n        mutationFn: (data) => createNewExpense(data),\n        onSuccess: (response) => {\n            console.log('response: ', response);\n            toast.success(`Expense created successfully`);\n            if (asset && asset.type && asset.id) {\n                const linkData = {\n                    asset_type: asset.type,\n                    asset_id: asset.id,\n                    expense: response.id\n                };\n                expenseLinkMutation.mutate(linkData);\n                createNewService && createServiceFromExpense(response.id || 1043);\n            }\n            handleClose();\n            setRefetch((refetch) => !refetch);\n        },\n        onError: (error) => {\n            console.error('Error creating expense:', error);\n            toast.error('Failed to create expense. Please try again.');\n        }\n    });\n\n    const handleSubmit = async (data) => {\n        delete data[\"gst-calculation\"];\n        delete data.option;\n        delete data.subtotal;\n        delete data.totalAmount;\n        delete data.tax;\n\n        if (!data.order) delete data.order;\n        if (!data.type) data.type = 1;\n        if (data.date) data.date = new Date(data.date).toISOString().split('T')[0];\n        if (data.due_date) data.due_date = new Date(data.due_date).toISOString().split('T')[0];\n        mutation.mutate(data);\n    };\n\n    const handleExternalSubmit = () => {\n        if (formRef.current) {\n            formRef.current.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }));\n        }\n    };\n\n    const handleClose = () => {\n        setVisible(false);\n        setProjectId(null);\n        setDefaultValues({\n            option: 'Assign to timeframe',\n            type: 2,\n            notification: false,\n            date: today,\n            due_date: tomorrow\n        });\n        setAsset(null);\n    };\n    return (\n        <Sidebar visible={visible} position=\"right\" onHide={handleClose} modal={false} dismissable={false} style={{ width: '702px' }}\n            content={({ closeIconRef, hide }) => (\n                <div className='create-sidebar d-flex flex-column'>\n                    <div className=\"d-flex align-items-center justify-content-between flex-shrink-0\" style={{ borderBottom: '1px solid #EAECF0', padding: '24px' }}>\n                        <div className=\"d-flex align-items-center gap-2\">\n                            <div className={styles.circledesignstyle}>\n                                <div className={styles.out}>\n                                    <PlusCircle size={24} color=\"#17B26A\" />\n                                </div>\n                            </div>\n                            <span style={{ color: '344054', fontSize: '20px', fontWeight: 600 }}>Create new Expense</span>\n                        </div>\n                        <span>\n                            <Button type=\"button\" className='text-button' ref={closeIconRef} onClick={(e) => hide(e)}>\n                                <X size={24} color='#667085' />\n                            </Button>\n                        </span>\n                    </div>\n\n                    <div className='modal-body' style={{ padding: '24px', height: 'calc(100vh - 72px - 122px)', overflow: 'auto' }}>\n                        <div className={`d-flex align-items-center mb-2 justify-content-between ${styles.expensesEditHead}`}>\n                            <h5>Expense Details</h5>\n                        </div>\n                        <ExpensesForm ref={formRef} onSubmit={handleSubmit} defaultValues={defaultValues} projectId={projectId}  asset={asset} setAsset={setAsset} />\n                    </div>\n\n                    <div className='modal-footer d-flex align-items-center justify-content-end gap-3' style={{ padding: '16px 24px', borderTop: \"1px solid var(--Gray-200, #EAECF0)\", height: '72px' }}>\n                        <Button type='button' onClick={(e) => { e.stopPropagation(); handleClose(); }} className='outline-button' disabled={mutation.isPending || expenseLinkMutation.isPending}>Cancel</Button>\n                        <Button type='button' onClick={handleExternalSubmit} className='solid-button' style={{ minWidth: '70px' }} disabled={mutation.isPending || expenseLinkMutation.isPending}>Save {(mutation.isPending || expenseLinkMutation.isPending) && <ProgressSpinner style={{ width: '18px', height: '18px' }} />}</Button>\n                    </div>\n                </div>\n            )}\n        ></Sidebar>\n    );\n};\n\nexport default NewExpensesCreate;","// extracted by mini-css-extract-plugin\nexport default {\"circledesignstyle\":\"expenses-form_circledesignstyle__mbb1-\",\"out\":\"expenses-form_out__KMiJx\",\"bgGreay\":\"expenses-form_bgGreay__JyrcA\",\"fileUploadBox\":\"expenses-form_fileUploadBox__QqdfG\",\"lable\":\"expenses-form_lable__PwIbw\",\"inputText\":\"expenses-form_inputText__juz8k\",\"error\":\"expenses-form_error__BY34l\",\"phoneInput\":\"expenses-form_phoneInput__phIqe\",\"countrySelector\":\"expenses-form_countrySelector__jh886\",\"headingInputs\":\"expenses-form_headingInputs__yQe3t\",\"dropdownSelect\":\"expenses-form_dropdownSelect__9h-UH\",\"tempDelete\":\"expenses-form_tempDelete__9u3Mi\",\"tempAdd\":\"expenses-form_tempAdd__+At5w\",\"expensesEditHead\":\"expenses-form_expensesEditHead__iCDmi\",\"expensesCreateNew\":\"expenses-form_expensesCreateNew__okukP\",\"customCalendar\":\"expenses-form_customCalendar__ihmVH\",\"customIcon\":\"expenses-form_customIcon__O0pZc\",\"dividerIcon\":\"expenses-form_dividerIcon__9TOjY\",\"expTotalRow\":\"expenses-form_expTotalRow__8u8o3\",\"CalItem\":\"expenses-form_CalItem__5I8ic\",\"CalItemActive\":\"expenses-form_CalItemActive__NBMtY\",\"tabsExpenses\":\"expenses-form_tabsExpenses__LYCvt\",\"active\":\"expenses-form_active__6X+QV\",\"autoComplete\":\"expenses-form_autoComplete__xaJgU\",\"fileBox\":\"expenses-form_fileBox__vJk+d\",\"imgBox\":\"expenses-form_imgBox__s6UcP\",\"fileType\":\"expenses-form_fileType__FWLXy\",\"fileNameBox\":\"expenses-form_fileNameBox__Sb+Fy\",\"deleteBox\":\"expenses-form_deleteBox__IPh+B\",\"openTransition\":\"expenses-form_openTransition__JKSLK\",\"aiProcessingBox\":\"expenses-form_aiProcessingBox__Xslof\",\"aiProcessingSpinner\":\"expenses-form_aiProcessingSpinner__2Ykt8\",\"spin\":\"expenses-form_spin__wPR6I\",\"aiProcessingText\":\"expenses-form_aiProcessingText__r+NWH\",\"aiSuccessBox\":\"expenses-form_aiSuccessBox__5wZSk\",\"aiSuccessText\":\"expenses-form_aiSuccessText__g6HC8\",\"aiNoDataBox\":\"expenses-form_aiNoDataBox__dy9sT\",\"aiNoDataText\":\"expenses-form_aiNoDataText__fTku6\",\"aiErrorBox\":\"expenses-form_aiErrorBox__nCorV\",\"aiErrorText\":\"expenses-form_aiErrorText__a5YuG\",\"selectButton\":\"expenses-form_selectButton__z9PXk\",\"reviewButton\":\"expenses-form_reviewButton__t4Vcn\",\"modal\":\"expenses-form_modal__lciui\",\"modalHeader\":\"expenses-form_modalHeader__Kf8rL\",\"headerTitle\":\"expenses-form_headerTitle__2VPHZ\",\"iconStyle\":\"expenses-form_iconStyle__s2Evh\"};","import React, { useEffect, useRef, useState } from 'react';\nimport { Col } from 'react-bootstrap';\nimport clsx from 'clsx';\nimport { Dropdown } from 'primereact/dropdown';\nimport { getListOfVehicles } from '../../../../../../APIs/assets-api';\nimport styles from '../expenses-form.module.scss';\n\nfunction debounce(fn, delay) {\n    let timeoutId;\n    return (...args) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => fn(...args), delay);\n    };\n}\n\nexport const VehicleDropdown = ({ asset, setAsset, errors }) => {\n    const vehicleObserverRef = useRef(null);\n    const [vehicles, setVehicles] = useState([]);\n    const [vehiclePage, setVehiclePage] = useState(1);\n    const [vehicleSearchValue, setVehicleSearchValue] = useState(\"\");\n    const [hasMoreVehicles, setHasMoreVehicles] = useState(true);\n    const limit = 25;\n\n    // Vehicle search debounce function\n    const searchVehicle = debounce((event) => {\n        const query = event?.filter?.toLowerCase() || '';\n        setVehicleSearchValue(query);\n    }, 300);\n\n    // Reset page when search value changes\n    useEffect(() => {\n        setVehiclePage(1);\n    }, [vehicleSearchValue]);\n\n    // Load vehicles\n    useEffect(() => {\n        const loadVehicles = async () => {\n            try {\n                const data = await getListOfVehicles(vehiclePage, limit, vehicleSearchValue, 'registration_number');\n                \n                if (vehiclePage === 1) {\n                    setVehicles(data?.results || []);\n                } else {\n                    if (data?.results?.length > 0) {\n                        setVehicles(prev => {\n                            const existingIds = new Set(prev.map(vehicle => vehicle.id));\n                            const newVehicles = data.results.filter(vehicle => !existingIds.has(vehicle.id));\n                            return [...prev, ...newVehicles];\n                        });\n                    }\n                }\n                setHasMoreVehicles(data?.results?.length === limit);\n            } catch (error) {\n                console.error('Error loading vehicles:', error);\n            }\n        };\n\n        loadVehicles();\n    }, [vehiclePage, vehicleSearchValue]);\n\n    // Infinite scroll observer\n    useEffect(() => {\n        if (vehicles.length > 0 && hasMoreVehicles) {\n            const timeout = setTimeout(() => {\n                const lastRow = document.querySelector('.vehicle-dropdown .p-dropdown-items li.p-dropdown-item:last-child');\n\n                if (lastRow) {\n                    vehicleObserverRef.current = new IntersectionObserver(entries => {\n                        if (entries[0].isIntersecting) {\n                            setVehiclePage(prevPage => prevPage + 1);\n                        }\n                    });\n                    vehicleObserverRef.current.observe(lastRow);\n                }\n            }, 1000);\n\n            return () => {\n                clearTimeout(timeout);\n                if (vehicleObserverRef.current) vehicleObserverRef.current.disconnect();\n            };\n        }\n    }, [vehicles, hasMoreVehicles]);\n\n    return (\n        <Col sm={6}>\n            <label className={clsx(styles.lable)}>Select Vehicle</label>\n            <Dropdown\n                value={asset?.id || null}\n                options={vehicles}\n                optionLabel=\"registration_number\"\n                optionValue=\"id\"\n                onChange={(e) => {\n                    setAsset(() => ({ ...asset, id: e.value }));\n                }}\n                itemTemplate={(option) => {\n                    return (\n                        <div className='d-flex gap-2 align-items-center w-100'>\n                            <div className='ellipsis-width' style={{ maxWidth: '350px' }}>\n                                <div style={{ fontWeight: '400' }}>{option?.make} {option?.model}</div>\n                                <div style={{ fontSize: '12px', color: '#98A2B3' }}>\n                                    {option?.registration_number || '-'} {option?.year_manufactured && `(${option?.year_manufactured})`}\n                                </div>\n                            </div>\n                        </div>\n                    );\n                }}\n                valueTemplate={(option) => {\n                    return (\n                        asset?.id === option?.id ? (\n                            <div className='d-flex gap-2 align-items-center w-100'>\n                                <div className='ellipsis-width' style={{ maxWidth: '350px' }}>\n                                    {option?.make} {option?.model}\n                                </div>\n                            </div>\n                        ) : null\n                    );\n                }}\n                className={clsx(styles.dropdownSelect, 'dropdown-height-fixed')}\n                panelClassName={\"vehicle-dropdown\"}\n                style={{ height: '46px' }}\n                scrollHeight=\"350px\"\n                placeholder=\"Search for vehicle\"\n                filter\n                onFilter={searchVehicle}\n                filterInputAutoFocus={true}\n            />\n            {errors?.assetId && <p className=\"error-message\">{errors.assetId?.message}</p>}\n        </Col>\n    );\n};\n","/**\n * Extracts JSON data from AI response string\n * @param {string} aiResponseString - The AI response string containing JSON data\n * @returns {Object|null} - Parsed JSON object or null if extraction fails\n */\nexport const extractAIResponseData = (aiResponseString) => {\n  try {\n    // Check if the input is already an object\n    if (typeof aiResponseString === 'object' && aiResponseString !== null) {\n      // If it's an array with the specific structure from the AI response\n      if (Array.isArray(aiResponseString) && aiResponseString.length > 0 && Array.isArray(aiResponseString[0])) {\n        // Find the text entry in the array\n        const textEntry = aiResponseString[0].find(entry => entry[0] === 'text');\n        if (textEntry && textEntry[1]) {\n          aiResponseString = textEntry[1];\n        }\n      } else {\n        // If it's already a valid object, return it\n        return aiResponseString;\n      }\n    }\n\n    // If it's a string, extract the JSON part\n    if (typeof aiResponseString === 'string') {\n      // Look for JSON pattern between triple backticks\n      const jsonMatch = aiResponseString.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n      \n      if (jsonMatch && jsonMatch[1]) {\n        return JSON.parse(jsonMatch[1]);\n      }\n      \n      // Try to find JSON without the markdown formatting\n      const jsonStart = aiResponseString.indexOf('{');\n      const jsonEnd = aiResponseString.lastIndexOf('}');\n      \n      if (jsonStart !== -1 && jsonEnd !== -1) {\n        const jsonString = aiResponseString.substring(jsonStart, jsonEnd + 1);\n        return JSON.parse(jsonString);\n      }\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Error extracting AI response data:', error);\n    return null;\n  }\n};\n\n/**\n * Formats the AI response data for the expenses form\n * @param {Object} data - The extracted AI response data\n * @returns {Object} - Formatted data for the expenses form\n */\nexport const formatExpenseDataFromAI = (data) => {\n  if (!data) return null;\n  \n  // Parse the amount from the total_amount field\n  let amount = \"0.00\";\n  if (data.total_amount) {\n    // Remove currency symbol and commas\n    amount = data.total_amount.replace(/[A-Za-z$,]/g, '').trim();\n  }\n  \n  // Determine GST calculation type based on gst_included\n  let gstCalculation = 'no'; // Default to No GST\n  if (data.gst_included === true) {\n    gstCalculation = 'in'; // GST Inclusive\n  } else if (data.gst_included === false) {\n    gstCalculation = 'ex'; // GST Exclusive\n  }\n  \n  // Calculate GST amounts\n  const amountValue = parseFloat(amount) || 0;\n  let subtotal = amountValue;\n  let tax = 0;\n  \n  if (gstCalculation === 'in') {\n    tax = amountValue * 0.10 / 1.10;\n    subtotal = amountValue - tax;\n  } else if (gstCalculation === 'ex') {\n    tax = subtotal * 0.10;\n  }\n  \n  return {\n    invoice_reference: data.invoice_number || '',\n    amount: amountValue.toFixed(2),\n    'gst-calculation': gstCalculation,\n    gst: gstCalculation === 'ex',\n    nogst: gstCalculation === 'no',\n    subtotal: subtotal.toFixed(2),\n    tax: tax.toFixed(2),\n    totalAmount: (subtotal + tax).toFixed(2),\n    note: data.description || ''\n  };\n};\n","import React, { forwardRef, useEffect, useMemo, useRef, useState } from 'react';\nimport { Button, Col, Row } from 'react-bootstrap';\nimport { Plus, Calendar3, QuestionCircle, ExclamationCircleFill, Upload, PlusCircle, CheckCircleFill, Trash, InfoCircle } from 'react-bootstrap-icons';\nimport { useDropzone } from 'react-dropzone';\nimport { useForm, Controller } from 'react-hook-form';\nimport { Document, Page } from 'react-pdf';\nimport { Link } from 'react-router-dom';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useQuery } from '@tanstack/react-query';\nimport axios from 'axios';\nimport clsx from 'clsx';\nimport { Calendar } from 'primereact/calendar';\nimport { Dialog } from 'primereact/dialog';\nimport { Dropdown } from 'primereact/dropdown';\nimport { IconField } from \"primereact/iconfield\";\nimport { InputIcon } from \"primereact/inputicon\";\nimport { InputNumber } from 'primereact/inputnumber';\nimport { InputText } from \"primereact/inputtext\";\nimport { InputTextarea } from 'primereact/inputtextarea';\nimport { SelectButton } from 'primereact/selectbutton';\nimport { Sidebar } from 'primereact/sidebar';\nimport { Tooltip } from 'primereact/tooltip';\nimport { toast } from 'sonner';\nimport * as yup from 'yup';\nimport { VehicleDropdown } from './assets-types/vehicle-dropdown';\nimport styles from './expenses-form.module.scss';\nimport { getListOfAssetCategories } from '../../../../../APIs/assets-api';\nimport { getProjectsList, getXeroCodesList } from '../../../../../APIs/expenses-api';\nimport { getListOfSuppliers } from '../../../../../APIs/SuppliersApi';\nimport aiScanImg from '../../../../../assets/ai-scan.png';\nimport exclamationCircle from \"../../../../../assets/images/icon/exclamation-circle.svg\";\nimport { extractAIResponseData, formatExpenseDataFromAI } from '../../../../../shared/lib/extract-ai-response';\nimport { formatAUD } from '../../../../../shared/lib/format-aud';\nimport { CircularProgressBar } from '../../../../../shared/ui/circular-progressbar';\nimport { FallbackImage } from '../../../../../shared/ui/image-with-fallback/image-avatar';\nimport { getFileIcon } from '../../../../Work/features/create-job/create-job';\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\nimport SupplierCreate from '../../../features/supliers-features/supplier-create';\n\nfunction debounce(fn, delay) {\n    let timeoutId;\n    return (...args) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => fn(...args), delay);\n    };\n}\n\nconst schema = yup\n    .object({\n        supplier: yup.number().typeError(\"Supplier must be a valid id\").required(\"Supplier is required\"),\n        invoice_reference: yup.string().required(\"Invoice reference is required\"),\n        date: yup.string().required(\"Date is required\"),\n        due_date: yup.string()\n            .required(\"Due date is required\")\n            .test(\n                'is-after-date',\n                'Due date must be after the invoice date',\n                function (value) {\n                    const { date } = this.parent;\n                    if (!date || !value) return true; // Skip validation if either date is missing\n\n                    const invoiceDate = new Date(date);\n                    const dueDate = new Date(value);\n\n                    // Set hours, minutes, seconds, and milliseconds to 0 for both dates to compare only the dates\n                    invoiceDate.setHours(0, 0, 0, 0);\n                    dueDate.setHours(0, 0, 0, 0);\n\n                    return dueDate >= invoiceDate;\n                }\n            ),\n        amount: yup.string().required(\"Amount is required\"),\n        nogst: yup.boolean().required(\"NOGST must be a boolean\"),\n        gst: yup.boolean().required(\"GST must be a boolean\"),\n        // account_code: yup.string().required(\"Account Code is required\"),\n        // department: yup.number().required(\"Department is required\"),\n    })\n    .required();\n\nconst ExpensesForm = forwardRef(({ onSubmit, defaultValues, id, defaultSupplier, projectId, asset, setAsset }, ref) => {\n    const autoCompleteRef = useRef(null);\n    const observerRef = useRef(null);\n    const accessToken = localStorage.getItem(\"access_token\");\n\n    const [showReviewModal, setShowReviewModal] = useState(false);\n    const [supplierValue, setSupplierValue] = useState(defaultSupplier?.id || \"\");\n    const [selectedSupplier, setSelectedSupplier] = useState(defaultSupplier || null);\n    const [suppliers, setSuppliers] = useState([]);\n    const [files, setFiles] = useState([]);\n    const [page, setPage] = useState(1);\n    const [searchValue, setSearchValue] = useState(\"\");\n    const [hasMoreData, setHasMoreData] = useState(true);\n    const [showDocumentSideBar, setShowDocumentSidebar] = useState(false);\n    const [showCreateSupplierModal, setShowCreateSupplierModal] = useState(false);\n    const [supplierRefetchToggle, setSupplierRefetchToggle] = useState(false);\n    const [links, setLinks] = useState([]);\n    const limit = 25;\n\n    const { control, reset, register, handleSubmit, setValue, getValues, watch, setError, trigger, formState: { errors } } = useForm({\n        resolver: yupResolver(schema),\n        defaultValues\n    });\n\n    const {\n        getRootProps,\n        getInputProps\n    } = useDropzone({\n        maxFiles: 1,\n        multiple: false,\n        accept: { 'application/pdf': ['.pdf', '.png', '.jpg', '.jpeg'] },\n        maxSize: 5 * 1024 * 1024,\n        onDrop: acceptedFiles => {\n            const newFiles = acceptedFiles.map(file => Object.assign(file, {\n                preview: URL.createObjectURL(file),\n                progress: 0,\n            }));\n            setFiles(() => [\n                ...newFiles,\n            ]);\n            fileUploadBySignedURL(newFiles, false);\n        }\n    });\n\n    const {\n        getRootProps: getAIRootProps,\n        getInputProps: getAIInputProps,\n    } = useDropzone({\n        maxFiles: 1,\n        multiple: false,\n        accept: { 'application/pdf': ['.pdf', '.png', '.jpg', '.jpeg'] },\n        maxSize: 5 * 1024 * 1024,\n        onDrop: (acceptedFiles) => {\n            const newFiles = acceptedFiles.map((file) =>\n                Object.assign(file, {\n                    preview: URL.createObjectURL(file),\n                    progress: 0,\n                    aiAnalysis: true,\n                })\n            );\n            setFiles(() => [...newFiles]);\n            fileUploadBySignedURL(newFiles, true);\n        },\n    });\n\n    const uploadToS3 = async (file, url) => {\n        return axios.put(url, file, {\n            headers: {\n                \"Content-Type\": \"\",\n            },\n            onUploadProgress: (progressEvent) => {\n                const progress = Math.round(\n                    (progressEvent.loaded / progressEvent.total) * 100\n                );\n                setFiles((prevFiles) => {\n                    return prevFiles.map((f) =>\n                        f.name === file.name\n                            ? Object.assign(f, { progress, url })\n                            : f\n                    );\n                });\n            },\n        }).catch((err) => {\n            console.log('err: ', err);\n            setFiles((prevFiles) => {\n                return prevFiles.map((f) =>\n                    f.name === file.name\n                        ? Object.assign(f, { progress: 0, url, error: true })\n                        : f\n                );\n            });\n        });\n    };\n\n    const fileUploadBySignedURL = async (files, isAIAnalysis) => {\n        if (!files.length) return;\n\n        for (const file of files) {\n            try {\n                // Step 1: Get the signed URL from the backend\n                const response = await axios.post(\n                    `${process.env.REACT_APP_BACKEND_API_URL}/expenses/file/`,\n                    { file_name: file.name },\n                    {\n                        headers: {\n                            Authorization: `Bearer ${accessToken}`,\n                        },\n                    }\n                );\n\n                const { url } = response.data;\n                if (!url) {\n                    setFiles([]);\n                    toast.error(`Failed to upload ${file.name}. Please try again.`);\n                    return;\n                }\n\n                // Step 2: Upload the file to S3 using the signed URL\n                await uploadToS3(file, url);\n\n                // step 3: Get the AI recognize response\n                const fileUrl = url.split(\"?\")[0] || \"\";\n                if (fileUrl) {\n                    setLinks([fileUrl]);\n                    setShowDocumentSidebar(true);\n                }\n\n                if (!isAIAnalysis) {\n                    // set the file url\n                    setValue('file', fileUrl);\n\n                    // Update file progress to show AI processing\n                    setFiles((prevFiles) => {\n                        return prevFiles.map((f) =>\n                            f.name === file.name\n                                ? Object.assign(f, { progress: 100 })\n                                : f\n                        );\n                    });\n                    return;\n                }\n\n                if (isAIAnalysis) {\n                    // Update file progress to show AI processing\n                    setFiles((prevFiles) => {\n                        return prevFiles.map((f) =>\n                            f.name === file.name\n                                ? Object.assign(f, { progress: 100, aiProcessing: true })\n                                : f\n                        );\n                    });\n\n                    // Show toast notification for AI processing\n                    toast.info('AI is analyzing your document...', {\n                        duration: 3000,\n                    });\n\n                    try {\n                        const aiResponse = await axios.post(\n                            `${process.env.REACT_APP_BACKEND_API_URL}/expenses/recognize/`,\n                            { file_url: fileUrl },\n                            {\n                                headers: {\n                                    Authorization: `Bearer ${accessToken}`,\n                                },\n                            }\n                        );\n\n                        // Extract and process the AI response data\n                        const extractedData = extractAIResponseData(aiResponse?.data);\n                        if (extractedData) {\n                            // Format the data for the form\n                            const formattedData = formatExpenseDataFromAI(extractedData);\n                            if (formattedData) {\n                                // set the file url\n                                setValue('file', fileUrl);\n\n                                // Prefill the form with the extracted data\n                                Object.entries(formattedData).forEach(([key, value]) => {\n                                    setValue(key, value);\n                                });\n\n                                // Trigger validation for required fields\n                                trigger(['invoice_reference', 'amount', 'gst', 'nogst']);\n\n                                // Show success message\n                                toast.success('Form prefilled with invoice data');\n\n                                // Update file to show success\n                                setFiles((prevFiles) => {\n                                    return prevFiles.map((f) =>\n                                        f.name === file.name\n                                            ? Object.assign(f, { aiProcessing: false, aiSuccess: true })\n                                            : f\n                                    );\n                                });\n                            } else {\n                                // Update file to show no data extracted\n                                setFiles((prevFiles) => {\n                                    return prevFiles.map((f) =>\n                                        f.name === file.name\n                                            ? Object.assign(f, { aiProcessing: false, aiNoData: true })\n                                            : f\n                                    );\n                                });\n                                toast.warning('No invoice data could be extracted from the document');\n                            }\n                        } else {\n                            // Update file to show no data extracted\n                            setFiles((prevFiles) => {\n                                return prevFiles.map((f) =>\n                                    f.name === file.name\n                                        ? Object.assign(f, { aiProcessing: false, aiNoData: true })\n                                        : f\n                                );\n                            });\n                            toast.warning('No invoice data could be extracted from the document');\n                        }\n                    } catch (aiError) {\n                        console.error(\"Error during AI recognition:\", aiError);\n                        // Update file to show AI error\n                        setFiles((prevFiles) => {\n                            return prevFiles.map((f) =>\n                                f.name === file.name\n                                    ? Object.assign(f, { aiProcessing: false, aiError: true })\n                                    : f\n                            );\n                        });\n                        toast.error('Failed to analyze the document. Please try again.');\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error uploading file:\", file.name, error);\n                toast.error(`Failed to upload ${file.name}. Please try again.`);\n            }\n        }\n    };\n\n    const onFocus = () => {\n        if (autoCompleteRef.current) autoCompleteRef.current.show();\n        const lastRow = document.querySelector('.p-autocomplete-items li.p-autocomplete-item:last-child');\n        if (lastRow) {\n            observerRef.current.observe(lastRow);\n        }\n    };\n\n    const listOfAssetCategoriesQuery = useQuery({\n        queryKey: ['assetCategories'],\n        queryFn: getListOfAssetCategories,\n        staleTime: 0\n    });\n    \n    const assetCategories = useMemo(() => {\n        const data = listOfAssetCategoriesQuery?.data;\n        console.log('Raw asset categories data:', data);\n        \n        // Handle both array and object with results property\n        if (Array.isArray(data)) {\n            // Only filter by enabled if the property exists, otherwise return all\n            return data.filter(category => category.enabled !== false);\n        }\n        \n        if (data?.results && Array.isArray(data.results)) {\n            return data.results.filter(category => category.enabled !== false);\n        }\n        \n        return [];\n    }, [listOfAssetCategoriesQuery?.data]);\n\n    const search = debounce((event) => {\n        const query = event?.filter?.toLowerCase() || '';\n        setSearchValue(query);\n    }, 300);\n\n    useEffect(() => {\n        setPage(1);\n    }, [searchValue, supplierRefetchToggle]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            const data = await getListOfSuppliers(page, limit, searchValue, 'name');\n            if (page === 1) {\n                if (supplierValue) {\n                    const filteredSuppliers = data.results.filter(supplier => supplier.id !== supplierValue);\n                    return setSuppliers([selectedSupplier, ...filteredSuppliers]);\n                }\n\n                setSuppliers(data.results);\n            }\n\n            else {\n                if (data?.results?.length > 0) {\n                    let results = data.results;\n                    if (supplierValue) {\n                        results = [selectedSupplier, ...data.results];\n                    }\n                    setSuppliers(prev => {\n                        let previous = prev;\n                        if (supplierValue) {\n                            previous = [...prev, selectedSupplier];\n                        }\n                        const existingSupplierIds = new Set(previous.map(supplier => supplier.id));\n                        const newSuppliers = results.filter(supplier => !existingSupplierIds.has(supplier.id));\n                        return [...prev, ...newSuppliers];\n                    });\n                }\n            }\n            setHasMoreData(data.count !== suppliers.length);\n        };\n\n        loadData();\n    }, [page, searchValue, supplierValue, selectedSupplier, supplierRefetchToggle]);\n\n    useEffect(() => {\n        if (suppliers.length > 0 && hasMoreData) {\n            const timeout = setTimeout(() => {\n                const lastRow = document.querySelector('.supplier-dropdown .p-dropdown-items li.p-dropdown-item:last-child');\n                console.log('lastRow: ', lastRow);\n\n                if (lastRow) {\n                    observerRef.current = new IntersectionObserver(entries => {\n                        if (entries[0].isIntersecting) {\n                            setPage(prevPage => prevPage + 1);\n                            console.log('entries[0].isIntersecting: ', entries[0].isIntersecting);\n                        }\n                    });\n                    observerRef.current.observe(lastRow);\n                }\n            }, 1000); // Wait for DOM paint\n\n            return () => {\n                clearTimeout(timeout);\n                if (observerRef.current) observerRef.current.disconnect();\n            };\n        }\n    }, [suppliers, hasMoreData]);\n\n    const calculateAmounts = (amount, gstType) => {\n        let calculatedTax = 0;\n        let subtotal = 0;\n\n        if (gstType === 'ex') {\n            subtotal = amount;\n            calculatedTax = subtotal * 0.10;\n        } else if (gstType === 'in') {\n            calculatedTax = amount * 0.10 / 1.10;\n            subtotal = amount - calculatedTax;\n        } else {\n            subtotal = amount;\n            calculatedTax = 0;\n        }\n\n        return {\n            subtotal: subtotal.toFixed(2),\n            calculatedTax: calculatedTax.toFixed(2),\n            totalAmount: (parseFloat(subtotal) + parseFloat(calculatedTax)).toFixed(2),\n        };\n    };\n\n    const handleGstChange = (value) => {\n        if (value) {\n            const totalAmount = parseFloat(getValues(\"amount\")) || 0;\n            const { subtotal, calculatedTax, totalAmount: newTotalAmount } = calculateAmounts(totalAmount, value);\n\n            setValue(\"tax\", calculatedTax);\n            setValue(\"subtotal\", subtotal);\n            setValue(\"totalAmount\", newTotalAmount);\n            setValue(\"nogst\", value === 'no');\n            setValue(\"gst\", value === 'ex');\n            trigger(['gst']);\n        }\n    };\n\n    const xeroCodesList = useQuery({ queryKey: ['getXeroCodesList'], queryFn: getXeroCodesList });\n    // const departmentsList = useQuery({ queryKey: ['getDepartments'], queryFn: getDepartments });\n    const projectsList = useQuery({ queryKey: ['getProjectsList'], queryFn: getProjectsList });\n\n    const options = ['Assign to project', 'Assign to timeframe', 'Assign to asset'];\n    const [option, setOptionValue] = useState(defaultValues?.option || options[0]);\n\n    const watchOrder = watch('order');\n\n    useEffect(() => {\n        if (watchOrder) trigger(['order']);\n    }, [watchOrder]);\n\n    const watchType = watch('type');\n\n    const validateFields = () => {\n        if (option === 'Assign to project' && !watchOrder) {\n            setError(\"order\", { type: \"manual\", message: \"Order is required\" });\n        }\n\n        if (option === 'Assign to timeframe' && !watchType) {\n            setError(\"type\", { type: \"manual\", message: \"Type is required\" });\n        }\n\n        if (option === 'Assign to asset') {\n            if (!asset?.type) {\n                setError(\"assetType\", { type: \"manual\", message: \"Asset Category is required\" });\n            }\n\n            if (!asset?.id) {\n                setError(\"assetId\", { type: \"manual\", message: \"Asset is required\" });\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (Object.keys(errors).length > 0)\n            validateFields();\n    }, [errors]);\n\n    useEffect(() => {\n        if (option === 'Assign to timeframe') {\n            setValue('order', '');\n            if (defaultValues?.type) setValue('type', defaultValues?.type);\n        } else if (option === 'Assign to project') {\n            setValue('type', '');\n            if (defaultValues?.order) setValue('order', defaultValues?.order);\n        }\n\n        setValue('option', option);\n    }, [option]);\n\n    useEffect(() => {\n        if (defaultValues?.option) setOptionValue(defaultValues?.option);\n    }, [defaultValues?.option]);\n\n    const handleFormSubmit = (data) => {\n        validateFields();\n\n        if (Object.keys(errors).length > 0) {\n            console.log('Validation errors:', errors);\n            return;\n        }\n\n        onSubmit(data, reset);\n    };\n\n    useEffect(() => {\n        if (projectId) {\n            setValue('order', +projectId);\n        }\n    }, [projectId]);\n\n    useEffect(() => {\n        if (!id) setValue('gst-calculation', 'in');\n    }, []);\n\n    useEffect(() => {\n        if (supplierValue) setValue('supplier', +supplierValue);\n        if (supplierValue) trigger(['supplier']);\n        if (selectedSupplier?.service?.code && xeroCodesList?.data?.length) {\n            let findCode = xeroCodesList?.data?.find(code => code.code === selectedSupplier?.service?.code);\n            if (findCode?.id) setValue('account_code', findCode?.id);\n        } else if (defaultValues.account_code) {\n            setValue('account_code', defaultValues.account_code || '');\n        }\n    }, [supplierValue, xeroCodesList?.data, setValue, trigger, defaultValues.account_code, selectedSupplier?.service?.code]);\n\n    const documentSidebarHeader = (\n        <div className=\"d-flex align-items-center justify-content-between flex-shrink-0 w-100\" style={{ borderBottom: '1px solid #EAECF0', padding: '4px 10px 24px 0px' }}>\n            <div className=\"d-flex align-items-center gap-2\">\n                <div className={styles.circledesignstyle}>\n                    <div className={styles.out}>\n                        <InfoCircle size={24} color=\"#17B26A\" />\n                    </div>\n                </div>\n                <span style={{ color: '344054', fontSize: '20px', fontWeight: 600 }}>Document Preview</span>\n            </div>\n        </div>\n    );\n\n    const removeFile = () => {\n        setValue('file', '');\n        setLinks([]);\n        setShowDocumentSidebar(false);\n    };\n\n    useEffect(() => {\n        if (defaultValues?.file) {\n            setLinks([defaultValues?.file]);\n            setShowDocumentSidebar(true);\n        }\n    }, [defaultValues?.file]);\n\n    const handleReviewClick = () => {\n        setShowReviewModal(true);\n    };\n\n    return (\n        <div>\n            <form ref={ref} onSubmit={handleSubmit(handleFormSubmit)} >\n                <Row className={clsx(styles.bgGreay, 'pt-3')}>\n                    <Col sm={8}>\n                        <div className=\"d-flex flex-column gap-1 mb-3\">\n                            <label className={clsx(styles.lable)}>Supplier<span className='required'>*</span></label>\n                            <input type=\"hidden\" {...register(\"supplier\")} />\n                            <Dropdown\n                                value={supplierValue}\n                                options={suppliers}\n                                optionLabel=\"name\"\n                                optionValue=\"id\"\n                                onChange={(e) => {\n                                    setSupplierValue(+e.value);\n                                    let findSupplier = suppliers.find(supplier => supplier.id === e.value);\n                                    setSelectedSupplier(findSupplier || {});\n                                }}\n                                itemTemplate={(option) => {\n                                    return (\n                                        <div className='d-flex gap-2 align-items-center w-100'>\n                                            <div className='d-flex justify-content-center align-items-center' style={{ width: '24px', height: '24px', borderRadius: '4px', overflow: 'hidden', border: '1px solid #dedede' }}>\n                                                <FallbackImage photo={option?.photo} has_photo={option?.has_photo} is_business={true} size={17} />\n                                            </div>\n                                            <div className='ellipsis-width' style={{ maxWidth: '350px' }}>{option?.name}</div>\n                                        </div>\n                                    );\n                                }}\n                                valueTemplate={(option) => {\n                                    return (\n                                        supplierValue ? (\n                                            <div className='d-flex gap-2 align-items-center w-100'>\n                                                <div className='d-flex justify-content-center align-items-center' style={{ width: '24px', height: '24px', borderRadius: '4px', overflow: 'hidden', border: '1px solid #dedede' }}>\n                                                    <FallbackImage photo={option?.photo} has_photo={option?.has_photo} is_business={true} size={17} />\n                                                </div>\n                                                <div className='ellipsis-width' style={{ maxWidth: '350px' }}>{option?.name}</div>\n                                            </div>\n                                        ) : null\n                                    );\n                                }}\n                                className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.supplier })}\n                                panelClassName={\"supplier-dropdown\"}\n                                style={{ height: '46px' }}\n                                scrollHeight=\"350px\"\n                                placeholder=\"Search for supplier\"\n                                filter\n                                onFilter={search}\n                                filterInputAutoFocus={true}\n                            />\n                            {/* <AutoComplete\n                                ref={autoCompleteRef}\n                                value={supplierValue || \"\"}\n                                completeMethod={search}\n                                onChange={(e) => {\n                                    if (!e.value) setSearchValue(\"\");\n                                    setSupplierValue(e.value);\n                                }}\n                                dropdownAutoFocus={true}\n                                field=\"name\"\n                                suggestions={suppliers}\n                                itemTemplate={(option) => {\n                                    return (\n                                        <div className='d-flex gap-2 align-items-center w-100'>\n                                            <div className='d-flex justify-content-center align-items-center' style={{ width: '24px', height: '24px', borderRadius: '4px', overflow: 'hidden', border: '1px solid #dedede' }}>\n                                                <FallbackImage photo={option?.photo} has_photo={option?.has_photo} is_business={true} size={17} />\n                                            </div>\n                                            <div className='ellipsis-width' style={{ maxWidth: '350px' }}>{option?.name}</div>\n                                        </div>\n                                    );\n                                }}\n                                onClick={onFocus}\n                                onFocus={onFocus}\n                                onBlur={() => {\n                                    console.log('blur');\n                                    setPage(1);\n                                    setSearchValue(\"\");\n                                    setHasMoreData(true);\n                                }}\n                                style={{ minHeight: '46px' }}\n                                scrollHeight='450px'\n                                className={clsx(styles.autoComplete, \"w-100\", { [styles.error]: errors.supplier })}\n                                placeholder=\"Search for supplier\"\n                            /> */}\n                            {errors.supplier && <p className=\"error-message\">{errors.supplier.message}</p>}\n                        </div>\n                    </Col>\n\n                    <Col sm={4}>\n                        <div className=\"d-flex justify-content-end text-md-end flex-column gap-1 mt-3 pt-3 mb-3\">\n                            <Button className={styles.expensesCreateNew} onClick={() => setShowCreateSupplierModal(true)}>Create New Supplier<Plus size={24} color=\"#475467\" /></Button>\n                        </div>\n                    </Col>\n\n                    <Col sm={12} className='mb-4'>\n                        <div className=\"d-flex flex-column gap-1\">\n                            <label className={clsx(styles.lable)}>Invoice/#Ref<span className='required'>*</span></label>\n                            <IconField>\n                                <InputIcon>{errors?.invoice_reference && <img src={exclamationCircle} className='mb-3' />}</InputIcon>\n                                <InputText {...register(\"invoice_reference\")} className={clsx(styles.inputText, { [styles.error]: errors.invoice_reference })} placeholder='Enter invoice reference' />\n                            </IconField>\n                            {errors?.invoice_reference && <p className=\"error-message\">{errors.invoice_reference?.message}</p>}\n                        </div>\n                    </Col>\n\n                    <Col sm={12}>\n                        <Row>\n                            <Col sm={6}>\n                                <label className={clsx(styles.lable)}>Upload Only</label>\n                                <div {...getRootProps({ className: 'dropzone d-flex justify-content-center align-items-center flex-column' })} style={{ width: '100%', height: '126px', background: '#fff', borderRadius: '4px', border: '1px solid #EAECF0', marginTop: '5px' }}>\n                                    <input {...getInputProps()} />\n                                    <button type='button' className='d-flex justify-content-center align-items-center' style={{ width: '40px', height: '40px', border: '1px solid #EAECF0', background: '#fff', borderRadius: '8px', marginBottom: '16px' }}>\n                                        <Upload size={20} color='#475467' />\n                                    </button>\n                                    <p className='mb-0' style={{ color: '#475467', fontSize: '14px' }}><span style={{ color: '#106B99', fontWeight: '600' }}>Click to upload</span> or drag and drop</p>\n                                    <span style={{ color: '#475467', fontSize: '12px' }}>PDF, SVG, PNG, JPG files  Max size: 5MB</span>\n                                </div>\n                            </Col>\n                            <Col sm={6}>\n                                <label className={clsx(styles.lable)}>Upload & Read With AI</label>\n                                <div {...getAIRootProps({ className: 'dropzone d-flex justify-content-center align-items-center flex-column' })} style={{ width: '100%', height: '126px', background: '#fff', borderRadius: '4px', border: '1px solid #EAECF0', marginTop: '5px' }}>\n                                    <input {...getAIInputProps()} />\n                                    <button type='button' className='d-flex justify-content-center align-items-center' style={{ width: '40px', height: '40px', border: '1px solid #FFF', background: '#f2f2f2', borderRadius: '8px', marginBottom: '16px' }}>\n                                        <img src={aiScanImg} className='w-100' />\n                                    </button>\n                                    <p className='mb-0' style={{ color: '#475467', fontSize: '14px' }}><span style={{ color: '#106B99', fontWeight: '600' }}>Click to upload</span> or drag and drop</p>\n                                    <span style={{ color: '#475467', fontSize: '12px' }}>PDF, PNG, JPG, JPEG files  Max size: 5MB</span>\n                                </div>\n                            </Col>\n                        </Row>\n\n\n                        <div className='d-flex flex-column'>\n                            {files?.length > 0 && <label className={clsx(styles.lable, 'mt-4 mb-1')}>Photo/Document Of The Expense</label>}\n                            {\n                                files?.map((file, index) => (\n                                    <div key={index} className={styles.fileBox}>\n                                        {getFileIcon(file.type)}\n                                        <div className={styles.fileNameBox}>\n                                            <p className='mb-0'>{file?.name || \"\"}</p>\n                                            <p className='mb-0'>{parseFloat(file?.size / 1024).toFixed(2)} KB - {parseInt(file?.progress) || 0}% uploaded</p>\n                                        </div>\n                                        <div className='ms-auto'>\n                                            {\n                                                file.error ? (\n                                                    <div className={styles.deleteBox}>\n                                                        <ExclamationCircleFill color='#F04438' size={16} />\n                                                    </div>\n                                                ) : file.aiProcessing ? (\n                                                    <div className={styles.aiProcessingBox}>\n                                                        <div className={styles.aiProcessingSpinner}></div>\n                                                        <span className={styles.aiProcessingText}>AI analyzing...</span>\n                                                    </div>\n                                                ) : file.aiSuccess ? (\n                                                    <div className={styles.aiSuccessBox}>\n                                                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                            <path d=\"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM7 11.4L3.6 8L5 6.6L7 8.6L11 4.6L12.4 6L7 11.4Z\" fill=\"#12B76A\" />\n                                                        </svg>\n                                                        <span className={styles.aiSuccessText}>Data extracted</span>\n                                                    </div>\n                                                ) : file.aiNoData ? (\n                                                    <div className={styles.aiNoDataBox}>\n                                                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                            <path d=\"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z\" fill=\"#F79009\" />\n                                                        </svg>\n                                                        <span className={styles.aiNoDataText}>No data found</span>\n                                                    </div>\n                                                ) : file.aiError ? (\n                                                    <div className={styles.aiErrorBox}>\n                                                        <ExclamationCircleFill color='#F04438' size={16} />\n                                                        <span className={styles.aiErrorText}>AI error</span>\n                                                    </div>\n                                                ) : file.progress == 100 ? (\n                                                    <CheckCircleFill color='#12B76A' size={20} />\n                                                ) : (\n                                                    <CircularProgressBar percentage={parseInt(file?.progress) || 0} size={30} color=\"#158ECC\" />\n                                                )\n                                            }\n\n                                        </div>\n                                    </div>\n                                ))\n                            }\n                        </div>\n                    </Col>\n\n                    <Col sm={6}>\n                        <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                            <label className={clsx(styles.lable)}>Date<span className='required'>*</span></label>\n                            <Controller\n                                name=\"date\"\n                                control={control}\n                                render={({ field }) => (\n                                    <Calendar {...field}\n                                        onChange={(e) => {\n                                            field.onChange(e.value);\n                                            // Trigger validation for due_date when invoice date changes\n                                            setTimeout(() => trigger('due_date'), 0);\n                                        }}\n                                        showButtonBar\n                                        placeholder='DD/MM/YY'\n                                        dateFormat=\"dd/mm/yy\"\n                                        showIcon\n                                        style={{ height: '46px' }}\n                                        icon={<Calendar3 color='#667085' size={20} />}\n                                        className={clsx(styles.inputText, { [styles.error]: errors.date }, 'p-0 outline-none')}\n                                    />\n                                )}\n                            />\n                            {errors?.date && <p className=\"error-message\">{errors.date?.message}</p>}\n                        </div>\n                    </Col>\n\n                    <Col sm={6}>\n                        <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                            <label className={clsx(styles.lable)}>Due Date<span className='required'>*</span></label>\n                            <Controller\n                                name=\"due_date\"\n                                control={control}\n                                render={({ field }) => {\n                                    // Get the current invoice date value to set as minimum date\n                                    const invoiceDate = watch('date');\n                                    const minDate = invoiceDate ? new Date(invoiceDate) : null;\n\n                                    return (\n                                        <Calendar {...field}\n                                            onChange={(e) => {\n                                                field.onChange(e.value);\n                                                // Trigger validation after date change\n                                                trigger('due_date');\n                                            }}\n                                            showButtonBar\n                                            placeholder='DD/MM/YY'\n                                            dateFormat=\"dd/mm/yy\"\n                                            locale=\"en\"\n                                            showIcon\n                                            minDate={minDate}\n                                            style={{ height: '46px' }}\n                                            icon={<Calendar3 color='#667085' size={20} />}\n                                            className={clsx(styles.inputText, { [styles.error]: errors.due_date }, 'p-0 outline-none')}\n                                        />\n                                    );\n                                }}\n                            />\n                            {errors?.due_date && <p className=\"error-message\">{errors.due_date?.message}</p>}\n                        </div>\n                    </Col>\n\n\n                    <Col sm={6}>\n                        <div className=\"d-flex flex-column gap-1\">\n                            <label className={clsx(styles.lable)}>Total Amount<span className='required'>*</span></label>\n                            <IconField>\n                                <InputNumber\n                                    prefix=\"$\"\n                                    value={watch('amount')}\n                                    onValueChange={(e) => {\n                                        setValue('amount', e.value);\n                                        handleGstChange(getValues('gst-calculation'));\n                                    }}\n                                    onBlur={() => handleGstChange(getValues('gst-calculation'))}\n                                    style={{ height: '46px', padding: '0px' }}\n                                    className={clsx(styles.inputText, { [styles.error]: errors.amount })}\n                                    placeholder='$ Enter total amount'\n                                    maxFractionDigits={2}\n                                    minFractionDigits={2}\n                                    inputId=\"minmaxfraction\"\n                                />\n                                <InputIcon>{errors.amount && <img src={exclamationCircle} className='mb-3' />}</InputIcon>\n                            </IconField>\n                            {errors?.amount && <p className=\"error-message\">{errors.amount?.message}</p>}\n                        </div>\n                    </Col>\n                    <Col sm={6}>\n                        <div className=\"d-flex flex-column gap-1 mb-2\">\n                            <label className={clsx(styles.lable)}>GST<span className='required'>*</span></label>\n                            <input type=\"hidden\" {...register(\"nogst\")} />\n                            <Controller\n                                name=\"gst-calculation\"\n                                control={control}\n                                render={({ field }) => (\n                                    <Dropdown\n                                        {...field}\n                                        options={[\n                                            { value: 'ex', label: \"GST Exclusive\" },\n                                            { value: 'in', label: \"GST Inclusive\" },\n                                            { value: 'no', label: \"No GST\" },\n                                        ] || []}\n                                        onChange={(e) => {\n                                            field.onChange(e.value);\n                                            handleGstChange(e.value);\n                                        }}\n                                        className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.gst })}\n                                        style={{ height: '46px' }}\n                                        value={field.value}\n                                        placeholder=\"Select GST\"\n                                        filterInputAutoFocus={true}\n                                    />\n                                )}\n                            />\n                            {errors?.gst && <p className=\"error-message\">{errors.gst?.message}</p>}\n                        </div>\n                    </Col>\n                </Row>\n\n                <Row className={`${styles.expTotalRow}`}>\n                    <Col className='d-flex align-items-center justify-content-end' style={{ position: 'relative' }}>\n                        <div className={styles.CalItem}>\n                            <div>\n                                <span>Subtotal</span>\n                                <strong>${formatAUD(watch('subtotal') || \"0.00\")}</strong>\n                            </div>\n                        </div>\n                        <div className={styles.dividerIcon}>\n                            <PlusCircle color='#667085' size={20} />\n                        </div>\n                    </Col>\n                    <Col className='d-flex align-items-center justify-content-end' style={{ position: 'relative' }}>\n                        <div className={styles.CalItem}>\n                            <div>\n                                <span>Tax</span>\n                                <strong>${formatAUD(watch('tax') || \"0.00\")}</strong>\n                            </div>\n                        </div>\n                        <div className={styles.dividerIcon}>\n                            <span style={{ color: '#1D2939', fontSize: '14px', fontWeight: 600 }}>=</span>\n                        </div>\n                    </Col>\n                    <Col style={{ position: 'relative' }}>\n                        <div className={`${styles.CalItemActive} ${styles.CalItem}`}>\n                            <div>\n                                <span>Total</span>\n                                <strong className='text-nowrap'>${formatAUD(watch('totalAmount') || \"0.00\")}</strong>\n                            </div>\n                        </div>\n                    </Col>\n                </Row>\n\n                <Row className={clsx(styles.bgGreay, 'customSelectButton')}>\n                    <div className='d-flex justify-content-between align-items-center'>\n                        <SelectButton value={option} className={styles.selectButton} onChange={(e) => setOptionValue(e.value)} options={options} />\n                        {/* <Button className={styles.reviewButton} onClick={handleReviewClick}>Review\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n                                <path d=\"M9.57154 7.80883C9.7088 7.39705 10.2912 7.39706 10.4285 7.80884L11.2353 10.2294C11.595 11.3083 12.4416 12.155 13.5206 12.5146L15.9412 13.3215C16.3529 13.4588 16.3529 14.0412 15.9412 14.1785L13.5206 14.9853C12.4417 15.345 11.595 16.1916 11.2353 17.2706L10.4285 19.6911C10.2912 20.1029 9.7088 20.1029 9.57154 19.6911L8.76466 17.2706C8.40501 16.1916 7.55836 15.345 6.47941 14.9853L4.05884 14.1785C3.64705 14.0412 3.64705 13.4588 4.05884 13.3215L6.47941 12.5146C7.55836 12.155 8.40501 11.3083 8.76467 10.2294L9.57154 7.80883Z\" fill=\"#106B99\" />\n                                <path d=\"M4.74293 1.4353C4.82529 1.18823 5.17476 1.18823 5.25711 1.4353L5.74122 2.88763C5.957 3.535 6.465 4.043 7.11237 4.25879L8.56471 4.7429C8.81178 4.82526 8.81178 5.17473 8.56471 5.25709L7.11238 5.7412C6.465 5.95699 5.957 6.46499 5.74122 7.11236L5.25711 8.5647C5.17476 8.81177 4.82528 8.81177 4.74293 8.5647L4.2588 7.11235C4.04301 6.46498 3.53502 5.95699 2.88765 5.7412L1.4353 5.25709C1.18823 5.17473 1.18823 4.82526 1.4353 4.7429L2.88765 4.25879C3.53502 4.043 4.04301 3.53501 4.2588 2.88764L4.74293 1.4353Z\" fill=\"#106B99\" />\n                                <path d=\"M13.5786 0.123533C13.6335 -0.0411787 13.8665 -0.0411773 13.9214 0.123535L14.2441 1.09175C14.388 1.52333 14.7267 1.862 15.1583 2.00586L16.1265 2.3286C16.2912 2.38351 16.2912 2.61649 16.1265 2.67139L15.1583 2.99413C14.7267 3.13799 14.388 3.47666 14.2441 3.90824L13.9214 4.87647C13.8665 5.04118 13.6335 5.04118 13.5786 4.87647L13.2559 3.90823C13.112 3.47665 12.7734 3.13799 12.3418 2.99413L11.3735 2.67139C11.2088 2.61649 11.2088 2.38351 11.3735 2.3286L12.3418 2.00586C12.7734 1.862 13.112 1.52334 13.2559 1.09176L13.5786 0.123533Z\" fill=\"#106B99\" />\n                            </svg>\n                        </Button> */}\n                    </div>\n                    {\n                        option === 'Assign to project'\n                            ? (\n                                <Col sm={12}>\n                                    <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                                        <Tooltip position='top' target={`.info-timeinterval`} />\n                                        <label className={clsx(styles.lable)}>Link to Project<span className='required'>*</span> <QuestionCircle color='#667085' style={{ position: 'relative', top: '-1px' }} className={`ms-1 info-timeinterval`} data-pr-tooltip=\"Select an existing project to assign expenses and display the exact cost of using this asset.\" /></label>\n                                        <Controller\n                                            name=\"order\"\n                                            control={control}\n                                            render={({ field }) => (\n                                                <Dropdown\n                                                    {...field}\n                                                    options={projectsList?.data?.map((project) => ({\n                                                        value: project.id,\n                                                        label: `${project.number}: ${project.reference}`\n                                                    })) || []}\n                                                    onChange={(e) => {\n                                                        field.onChange(e.value);\n                                                    }}\n                                                    className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.order })}\n                                                    style={{ height: '46px' }}\n                                                    value={field.value}\n                                                    loading={projectsList?.isFetching}\n                                                    placeholder=\"Select project\"\n                                                    filter\n                                                    filterInputAutoFocus={true}\n                                                    scrollHeight=\"400px\"\n                                                />\n                                            )}\n                                        />\n                                        {errors?.order && <p className=\"error-message\">{errors.order?.message}</p>}\n                                    </div>\n                                </Col>\n                            ) : option === 'Assign to asset' ? (\n                                <Col sm={12}>\n                                    <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                                        <Row>\n                                            <Col sm={6}>\n                                                <label className={clsx(styles.lable)}>Asset Type</label>\n                                                <Dropdown\n                                                    options={(() => {\n                                                        const opts = assetCategories.map(category => ({\n                                                            value: category.id,\n                                                            label: category.asset_name\n                                                        }));\n                                                        return opts;\n                                                    })()}\n                                                    onChange={(e) => {\n                                                        setAsset({ type: e.value });\n                                                    }}\n                                                    className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.type })}\n                                                    style={{ height: '46px' }}\n                                                    value={asset?.type}\n                                                    placeholder=\"Select asset type\"\n                                                    filter={false}\n                                                    loading={listOfAssetCategoriesQuery?.isFetching}\n                                                    emptyMessage=\"No asset types available\"\n                                                    // showClear={asset?.type ? true : false}\n                                                />\n                                                {errors?.assetType && <p className=\"error-message\">{errors.assetType?.message}</p>}\n                                            </Col>\n                                            {asset?.type && assetCategories.find(cat => cat.id === asset?.type)?.asset_name?.toLowerCase() === 'vehicles' && (\n                                                <VehicleDropdown asset={asset} setAsset={setAsset} errors={errors} />\n                                            )}\n                                        </Row>\n                                    </div>\n                                </Col>\n                            ) : (\n                                <Col sm={12}>\n                                    <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                                        <Tooltip position='top' target={`.info-timeinterval`} />\n                                        <label className={clsx(styles.lable)}>Expense time interval<span className='required'>*</span> <QuestionCircle color='#667085' style={{ position: 'relative', top: '-1px' }} className={`ms-1 info-timeinterval`} data-pr-tooltip=\"Selecting this option will categorize the expense under 'Operational Expense' and distribute it evenly over the chosen timeframe.\" /></label>\n                                        <Controller\n                                            name=\"type\"\n                                            control={control}\n                                            render={({ field }) => (\n                                                <Dropdown\n                                                    {...field}\n                                                    options={[\n                                                        { value: 1, label: 'Monthly' },\n                                                        { value: 2, label: 'Yearly' }\n                                                    ]}\n                                                    onChange={(e) => {\n                                                        field.onChange(e.value);\n                                                    }}\n                                                    className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.type })}\n                                                    style={{ height: '46px' }}\n                                                    value={field.value}\n                                                    placeholder=\"Select expense time interval\"\n                                                    filterInputAutoFocus={true}\n                                                />\n                                            )}\n                                        />\n                                        {errors?.type && <p className=\"error-message\">{errors.type?.message}</p>}\n                                    </div>\n                                </Col>\n                            )\n                    }\n                </Row>\n\n                <Row className={clsx(styles.bgGreay)}>\n                    <Col sm={12}>\n                        <div className=\"d-flex flex-column gap-1\">\n                            <label className={clsx(styles.lable)}>Notes</label>\n                            <IconField>\n                                <InputIcon style={{ top: '75%' }}>{errors.note && <img src={exclamationCircle} alt='error-icon' />}</InputIcon>\n                                <InputTextarea {...register(\"note\")} rows={3} cols={30} className={clsx(styles.inputText, { [styles.error]: errors.note })} style={{ resize: 'none' }} placeholder='Enter a note...' />\n                            </IconField>\n                            {errors.note && <p className=\"error-message\">{errors.note.message}</p>}\n                        </div>\n                    </Col>\n                </Row>\n\n                <Row className={clsx(styles.bgGreay)}>\n                    <Col sm={12}>\n                        <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                            <label className={clsx(styles.lable)}>Account Code</label>\n                            <Controller\n                                name=\"account_code\"\n                                control={control}\n                                render={({ field }) => (\n                                    <Dropdown\n                                        {...field}\n                                        options={[\n                                            ...(xeroCodesList && xeroCodesList?.data?.map((code) => ({\n                                                value: code.id,\n                                                label: `${code.code}: ${code.name}`\n                                            }))) || []\n                                        ] || []}\n                                        onChange={(e) => {\n                                            field.onChange(e.value);\n                                        }}\n                                        className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.account_code })}\n                                        style={{ height: '46px' }}\n                                        scrollHeight=\"400px\"\n                                        value={field.value}\n                                        loading={xeroCodesList?.isFetching}\n                                        placeholder=\"Select account code\"\n                                        filter\n                                        filterInputAutoFocus={true}\n                                    />\n                                )}\n                            />\n                            {errors?.account_code && <p className=\"error-message\">{errors.account_code?.message}</p>}\n                        </div>\n                    </Col>\n                    {/* <Col sm={6}>\n                        <div className=\"d-flex flex-column gap-1 mt-4 mb-4\">\n                            <label className={clsx(styles.lable)}>Department</label>\n                            <Controller\n                                name=\"department\"\n                                control={control}\n                                render={({ field }) => (\n                                    <Dropdown\n                                        {...field}\n                                        options={[\n                                            ...(departmentsList && departmentsList?.data?.map((department) => ({\n                                                value: department.id,\n                                                label: `${department.name}`\n                                            }))) || []\n                                        ] || []}\n                                        onChange={(e) => {\n                                            field.onChange(e.value);\n                                        }}\n                                        className={clsx(styles.dropdownSelect, 'dropdown-height-fixed', { [styles.error]: errors?.department })}\n                                        style={{ height: '46px' }}\n                                        scrollHeight=\"400px\"\n                                        value={field.value}\n                                        loading={departmentsList?.isFetching}\n                                        placeholder=\"Select department\"\n                                        filter\n                                        filterInputAutoFocus={true}\n                                    />\n                                )}\n                            />\n                            {errors?.department && <p className=\"error-message\">{errors.department?.message}</p>}\n                        </div>\n                    </Col> */}\n                </Row>\n\n                {links?.length ?\n                    <Row className={clsx(styles.bgGreay)}>\n                        <Col sm={12}>\n                            <div className=\"d-flex flex-column gap-1\">\n                                <div className='d-flex flex-column'>\n                                    <label className={clsx(styles.lable, 'mb-2')}>Photo/Document Of The Expense</label>\n                                    {\n                                        links[0] && (\n                                            <div className={styles.fileBox}>\n                                                {getFileIcon(links[0]?.split(\".\")?.[links[0]?.split(\".\").length - 1] || \"\")}\n                                                <div className={styles.fileNameBox}>\n                                                    <Link className='linkText' to={links[0]} target='_blank'><p className='mb-0'>{links[0]?.split(\"/\")?.[links[0]?.split(\"/\").length - 1] || \"\"}</p></Link>\n                                                    <p className='mb-0'></p>\n                                                </div>\n                                                <div className='ms-auto'>\n                                                    <div className='d-flex align-items-center justify-content-center' style={{ background: '#FEE4E2', borderRadius: '200px', width: '30px', height: '30px' }}>\n                                                        <Trash size={16} color=\"#F04438\" style={{ cursor: 'pointer' }} onClick={removeFile} />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )\n                                    }\n                                </div>\n                            </div>\n                        </Col>\n                    </Row>\n                    : \"\"\n                }\n\n                {/* <div className=\"flex align-items-center\">\n                <Controller\n                    name=\"notification\"\n                    control={control}\n                    render={({ field: { onChange, onBlur, value, ref } }) => (\n                        <Checkbox\n                            inputRef={ref}\n                            checked={value}\n                            onChange={(e) => {\n                                onChange(e.checked);\n                            }}\n                            onBlur={onBlur}\n                        />\n                    )}\n                />\n                <label className=\"ms-2\" style={{ position: 'relative', top: '1px', color: '#344054', fontWeight: 500, fontSize: '14px' }}>Send Email Notification when paid</label>\n            </div> */}\n            </form>\n\n            {\n                <Sidebar visible={showDocumentSideBar && links?.length} header={documentSidebarHeader} position=\"right\" modal={false} dismissable={false} style={{ width: '1200px', paddingRight: '720px' }} maskClassName=\"p-sidebar-mask-document\" onHide={() => setShowDocumentSidebar(false)}>\n                    <FilePreview files={links} />\n                </Sidebar>\n            }\n            {showReviewModal && (\n                <ReviewExpense\n                    visible={showReviewModal}\n                    onHide={() => setShowReviewModal(false)}\n                />\n            )}\n\n            {showCreateSupplierModal && (\n                <SupplierCreate\n                    visible={showCreateSupplierModal}\n                    setVisible={setShowCreateSupplierModal}\n                    refetch={() => setSupplierRefetchToggle(prev => !prev)}\n                />\n            )}\n        </div>\n    );\n});\n\nconst FilePreview = ({ files }) => {\n    const [pageStates, setPageStates] = useState({});\n\n    const isImage = (url) => /\\.(jpeg|jpg|png|webp|gif|svg)$/i.test(url);\n    const isPDF = (url) => /\\.pdf$/i.test(url);\n\n    const handleLoadSuccess = (file, { numPages }) => {\n        setPageStates((prev) => ({\n            ...prev,\n            [file]: { ...prev[file], numPages, currentPage: 1 },\n        }));\n    };\n\n    const changePage = (file, offset) => {\n        setPageStates((prev) => {\n            const current = prev[file]?.currentPage || 1;\n            const numPages = prev[file]?.numPages || 1;\n            const newPage = Math.min(Math.max(current + offset, 1), numPages);\n            return {\n                ...prev,\n                [file]: {\n                    ...prev[file],\n                    currentPage: newPage,\n                },\n            };\n        });\n    };\n\n    return (\n        <div style={{ display: 'grid', gap: '2rem' }}>\n            {files.map((file, index) => {\n                if (isImage(file)) {\n                    return (\n                        <img\n                            key={index}\n                            src={file}\n                            alt={`preview-${index}`}\n                            style={{\n                                maxWidth: '100%',\n                                maxHeight: '400px',\n                                border: '1px solid #ccc',\n                            }}\n                        />\n                    );\n                }\n\n                if (isPDF(file)) {\n                    const currentState = pageStates[file] || {};\n                    const { numPages = null, currentPage = 1 } = currentState;\n\n                    return (\n                        <div\n                            key={index}\n                            style={{\n                                border: '1px solid #ccc',\n                                padding: '1rem',\n                                maxWidth: '420px',\n                            }}\n                        >\n                            <Document\n                                file={file}\n                                onLoadSuccess={(e) => handleLoadSuccess(file, e)}\n                                onLoadError={(err) =>\n                                    console.error('PDF load error:', err)\n                                }\n                            >\n                                <Page pageNumber={currentPage} width={400} />\n                            </Document>\n\n                            {numPages && (\n                                <div\n                                    style={{\n                                        display: 'flex',\n                                        justifyContent: 'center',\n                                        alignItems: 'center',\n                                        marginTop: '1rem',\n                                        gap: '1rem',\n                                    }}\n                                >\n                                    <button\n                                        className='outline-button px-2'\n                                        style={{ height: '30px' }}\n                                        onClick={() => changePage(file, -1)}\n                                        disabled={currentPage <= 1}\n                                    >\n                                        \n                                    </button>\n                                    <span>\n                                        {currentPage} of {numPages}\n                                    </span>\n                                    <button\n                                        className='outline-button px-2'\n                                        style={{ height: '30px' }}\n                                        onClick={() => changePage(file, 1)}\n                                        disabled={currentPage >= numPages}\n                                    >\n                                        \n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    );\n                }\n\n                return <p key={index}>Unsupported file type: {file}</p>;\n            })}\n        </div>\n    );\n};\n\nconst ReviewExpense = React.memo(({ visible, onHide, defaultValues = {} }) => {\n    const observerRef = useRef(null);\n    const [supplierValue, setSupplierValue] = useState(defaultValues.supplier?.id || \"\");\n    const [selectedSupplier, setSelectedSupplier] = useState(defaultValues.supplier || null);\n    const [suppliers, setSuppliers] = useState([]);\n    const [page, setPage] = useState(1);\n    const [searchValue, setSearchValue] = useState(\"\");\n    const [hasMoreData, setHasMoreData] = useState(true);\n    const [links, setLinks] = useState([]);\n    const limit = 25;\n\n    const search = debounce((event) => {\n        const query = event?.filter?.toLowerCase() || '';\n        setSearchValue(query);\n    }, 300);\n\n    useEffect(() => {\n        setPage(1);\n    }, [searchValue]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            const data = await getListOfSuppliers(page, limit, searchValue, 'name');\n            if (page === 1) {\n                if (supplierValue) {\n                    const filteredSuppliers = data.results.filter(supplier => supplier.id !== supplierValue);\n                    return setSuppliers([selectedSupplier, ...filteredSuppliers]);\n                }\n\n                setSuppliers(data.results);\n            }\n\n            else {\n                if (data?.results?.length > 0) {\n                    let results = data.results;\n                    if (supplierValue) {\n                        results = [selectedSupplier, ...data.results];\n                    }\n                    setSuppliers(prev => {\n                        let previous = prev;\n                        if (supplierValue) {\n                            previous = [...prev, selectedSupplier];\n                        }\n                        const existingSupplierIds = new Set(previous.map(supplier => supplier.id));\n                        const newSuppliers = results.filter(supplier => !existingSupplierIds.has(supplier.id));\n                        return [...prev, ...newSuppliers];\n                    });\n                }\n            }\n            setHasMoreData(data.count !== suppliers.length);\n        };\n\n        loadData();\n    }, [page, searchValue, supplierValue, selectedSupplier]);\n\n    useEffect(() => {\n        if (suppliers.length > 0 && hasMoreData) {\n            const timeout = setTimeout(() => {\n                const lastRow = document.querySelector('.supplier-dropdown .p-dropdown-items li.p-dropdown-item:last-child');\n                console.log('lastRow: ', lastRow);\n\n                if (lastRow) {\n                    observerRef.current = new IntersectionObserver(entries => {\n                        if (entries[0].isIntersecting) {\n                            setPage(prevPage => prevPage + 1);\n                            console.log('entries[0].isIntersecting: ', entries[0].isIntersecting);\n                        }\n                    });\n                    observerRef.current.observe(lastRow);\n                }\n            }, 1000); // Wait for DOM paint\n\n            return () => {\n                clearTimeout(timeout);\n                if (observerRef.current) observerRef.current.disconnect();\n            };\n        }\n    }, [suppliers, hasMoreData]);\n\n    const headerElement = (\n        <div className={`${styles.modalHeader}`}>\n            <div className={styles.iconStyle}>\n                <img src={aiScanImg} alt=\"Review Icon\" />\n            </div>\n            <span className={`white-space-nowrap ${styles.headerTitle}`}>Review</span>\n        </div>\n    );\n\n    const footerContent = (\n        <div className=\"d-flex justify-content-end align-items-center gap-3\">\n            {/* <Button disabled={paidMutation?.isPending} label=\"Cancel\" className=\"outline-button outline-none\" onClick={() => setVisible(false)} autoFocus /> */}\n            {/* <Button disabled={paidMutation?.isPending} label={paidMutation?.isPending ? \"Loading...\" : \"Mark as paid\"} className=\"success-button outline-none\" onClick={handlePaidExpense} autoFocus /> */}\n        </div>\n    );\n    return (\n        <Dialog visible={visible} modal onHide={onHide} header={headerElement} footer={footerContent} className={`${styles.modal} custom-modal`} >\n            <Row className='mb-2'>\n                <Col sm={8}>\n                    <div className=\"d-flex flex-column gap-1\">\n                        <label className={clsx(styles.lable)}>Supplier<span className='required'>*</span></label>\n                        <Dropdown\n                            value={supplierValue}\n                            options={suppliers}\n                            optionLabel=\"name\"\n                            optionValue=\"id\"\n                            onChange={(e) => {\n                                setSupplierValue(+e.value);\n                                let findSupplier = suppliers.find(supplier => supplier.id === e.value);\n                                setSelectedSupplier(findSupplier || {});\n                            }}\n                            itemTemplate={(option) => {\n                                return (\n                                    <div className='d-flex gap-2 align-items-center w-100'>\n                                        <div className='d-flex justify-content-center align-items-center' style={{ width: '24px', height: '24px', borderRadius: '4px', overflow: 'hidden', border: '1px solid #dedede' }}>\n                                            <FallbackImage photo={option?.photo} has_photo={option?.has_photo} is_business={true} size={17} />\n                                        </div>\n                                        <div className='ellipsis-width' style={{ maxWidth: '350px' }}>{option?.name}</div>\n                                    </div>\n                                );\n                            }}\n                            valueTemplate={(option) => {\n                                return (\n                                    supplierValue ? (\n                                        <div className='d-flex gap-2 align-items-center w-100'>\n                                            <div className='d-flex justify-content-center align-items-center' style={{ width: '24px', height: '24px', borderRadius: '4px', overflow: 'hidden', border: '1px solid #dedede' }}>\n                                                <FallbackImage photo={option?.photo} has_photo={option?.has_photo} is_business={true} size={17} />\n                                            </div>\n                                            <div className='ellipsis-width' style={{ maxWidth: '350px' }}>{option?.name}</div>\n                                        </div>\n                                    ) : null\n                                );\n                            }}\n                            className={clsx(styles.dropdownSelect, 'dropdown-height-fixed')}\n                            panelClassName={\"supplier-dropdown\"}\n                            style={{ height: '46px' }}\n                            scrollHeight=\"350px\"\n                            placeholder=\"Search for supplier\"\n                            filter\n                            onFilter={search}\n                            filterInputAutoFocus={true}\n                        />\n                    </div>\n                </Col>\n\n                <Col sm={4}>\n                    <div className=\"d-flex justify-content-end text-md-end flex-column gap-1 mt-3 pt-3\">\n                        <Link to={\"/suppliers?addNewSupplier=true\"} target='_blank'>\n                            <Button className={styles.expensesCreateNew}>Create New Supplier<Plus size={24} color=\"#475467\" /></Button>\n                        </Link>\n                    </div>\n                </Col>\n            </Row>\n            <hr />\n            <Row>\n\n            </Row>\n        </Dialog>\n    );\n});\n\nexport default ExpensesForm;"],"names":["API_BASE_URL","process","getAssetsTypes","async","url","URL","fetchAPI","toString","method","getListOfAssetCategories","getListOfVehicles","page","limit","search","arguments","length","undefined","order","isShowDeleted","offset","searchParams","append","createNewVehicle","options","body","data","getVehicle","id","updateVehicle","getVehicleServices","vehicleId","createNewService","linkExpenseToAsset","_ref","visible","setVisible","refetch","formRef","useRef","addNewSupplier","URLSearchParams","useLocation","get","isPending","setIsPending","useState","photo","setPhoto","defaultValues","contact_persons","addresses","title","country","handleSubmit","console","log","formData","FormData","name","email","website","abn","phoneNumber","phone","parsePhoneNumberFromString","nationalNumber","service","note","forEach","address","index","city","postcode","is_main","person","firstname","lastname","position","croppedImageBlob","photoHintId","nanoid","accessToken","localStorage","getItem","response","fetch","headers","ok","toast","success","prev","error","err","FormSubmit","handleExternalSubmit","current","dispatchEvent","Event","cancelable","bubbles","useEffect","_jsx","Sidebar","onHide","modal","dismissable","style","width","content","_ref2","closeIconRef","hide","_jsxs","className","children","borderBottom","padding","styles","PlusCircle","size","color","fontSize","fontWeight","Button","type","ref","onClick","e","X","height","overflow","SupplierForm","onSubmit","borderTop","stopPropagation","disabled","minWidth","setRefetch","expenseProjectId","assetForExpense","projectReference","createServiceFromExpense","window","location","href","urlObj","params","projectId","setProjectId","asset","setAsset","today","Date","tomorrow","setDate","getDate","setDefaultValues","option","notification","date","due_date","projectParamId","reference","invoice_reference","delete","history","replaceState","expenseLinkMutation","useMutation","mutationFn","onSuccess","onError","mutation","createNewExpense","linkData","asset_type","asset_id","expense","mutate","handleClose","subtotal","totalAmount","tax","toISOString","split","ExpensesForm","ProgressSpinner","VehicleDropdown","_errors$assetId","errors","vehicleObserverRef","vehicles","setVehicles","vehiclePage","setVehiclePage","vehicleSearchValue","setVehicleSearchValue","hasMoreVehicles","setHasMoreVehicles","searchVehicle","fn","delay","timeoutId","_len","args","Array","_key","clearTimeout","setTimeout","debounce","event","_event$filter","query","filter","toLowerCase","_data$results2","_data$results","results","existingIds","Set","map","vehicle","newVehicles","has","loadVehicles","timeout","lastRow","document","querySelector","IntersectionObserver","entries","isIntersecting","prevPage","observe","disconnect","Col","sm","clsx","Dropdown","value","optionLabel","optionValue","onChange","itemTemplate","maxWidth","make","model","registration_number","year_manufactured","valueTemplate","panelClassName","scrollHeight","placeholder","onFilter","filterInputAutoFocus","assetId","message","extractAIResponseData","aiResponseString","isArray","textEntry","find","entry","jsonMatch","match","JSON","parse","jsonStart","indexOf","jsonEnd","lastIndexOf","jsonString","substring","formatExpenseDataFromAI","amount","total_amount","replace","trim","gstCalculation","gst_included","amountValue","parseFloat","invoice_number","toFixed","gst","nogst","description","schema","yup","supplier","typeError","required","test","this","parent","invoiceDate","dueDate","setHours","forwardRef","_selectedSupplier$ser3","_errors$invoice_refer","_errors$date","_errors$due_date","_errors$amount","_errors$gst","_errors$order","_errors$assetType","_assetCategories$find","_assetCategories$find2","_errors$type","_errors$account_code","_links$","_links$$split","_links$2","_links$3","_links$3$split","_links$4","defaultSupplier","observerRef","showReviewModal","setShowReviewModal","supplierValue","setSupplierValue","selectedSupplier","setSelectedSupplier","suppliers","setSuppliers","files","setFiles","setPage","searchValue","setSearchValue","hasMoreData","setHasMoreData","showDocumentSideBar","setShowDocumentSidebar","showCreateSupplierModal","setShowCreateSupplierModal","supplierRefetchToggle","setSupplierRefetchToggle","links","setLinks","control","reset","register","setValue","getValues","watch","setError","trigger","formState","useForm","resolver","yupResolver","getRootProps","getInputProps","useDropzone","maxFiles","multiple","accept","maxSize","onDrop","acceptedFiles","newFiles","file","Object","assign","preview","createObjectURL","progress","fileUploadBySignedURL","getAIRootProps","getAIInputProps","aiAnalysis","uploadToS3","axios","put","onUploadProgress","progressEvent","Math","round","loaded","total","prevFiles","f","catch","isAIAnalysis","post","file_name","Authorization","fileUrl","aiProcessing","info","duration","aiResponse","file_url","extractedData","formattedData","key","aiSuccess","aiNoData","warning","aiError","listOfAssetCategoriesQuery","useQuery","queryKey","queryFn","staleTime","assetCategories","useMemo","category","enabled","getListOfSuppliers","filteredSuppliers","previous","existingSupplierIds","newSuppliers","count","loadData","handleGstChange","calculatedTax","newTotalAmount","calculateAmounts","gstType","xeroCodesList","getXeroCodesList","projectsList","getProjectsList","setOptionValue","watchOrder","watchType","validateFields","keys","_selectedSupplier$ser","_xeroCodesList$data","code","_xeroCodesList$data2","findCode","_selectedSupplier$ser2","account_code","documentSidebarHeader","InfoCircle","Row","findSupplier","borderRadius","border","FallbackImage","has_photo","is_business","Plus","IconField","InputIcon","src","exclamationCircle","InputText","background","marginTop","marginBottom","Upload","aiScanImg","getFileIcon","parseInt","ExclamationCircleFill","viewBox","fill","xmlns","d","CheckCircleFill","CircularProgressBar","percentage","Controller","render","_ref3","field","Calendar","showButtonBar","dateFormat","showIcon","icon","Calendar3","_ref4","minDate","locale","InputNumber","prefix","onValueChange","onBlur","maxFractionDigits","minFractionDigits","inputId","_ref5","label","formatAUD","SelectButton","Tooltip","target","QuestionCircle","top","_ref6","_projectsList$data","project","number","loading","isFetching","asset_name","emptyMessage","assetType","cat","_ref7","alt","InputTextarea","rows","cols","resize","_ref8","_xeroCodesList$data3","Link","to","Trash","cursor","removeFile","header","paddingRight","maskClassName","FilePreview","ReviewExpense","SupplierCreate","_ref9","pageStates","setPageStates","changePage","_prev$file","_prev$file2","currentPage","numPages","newPage","min","max","display","gap","maxHeight","isPDF","currentState","Document","onLoadSuccess","handleLoadSuccess","_ref10","onLoadError","Page","pageNumber","justifyContent","alignItems","React","_ref11","_defaultValues$suppli","_event$filter2","headerElement","footerContent","Dialog","footer"],"sourceRoot":""}